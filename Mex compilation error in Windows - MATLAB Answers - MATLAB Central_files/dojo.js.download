//>>built
/*
 Copyright 2015 The MathWorks, Inc.
 @exports MW/utils/deprecation
 Copyright 2013-2016 The MathWorks, Inc.
 @module MW/dialog/DialogUtils

 Copyright 2015 The MathWorks, Inc.
 @exports MW/utils/deprecation
 Copyright 2015 The MathWorks, Inc.
 @exports MW/utils/deprecation
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2016-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2013 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014-2017 The MathWorks, Inc.
 Copyright 2012-2014 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.

 Copyright 2016 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 MathWorks, Inc.
 Copyright 2015 MathWorks, Inc.
 Copyright 2015 MathWorks, Inc.
 Copyright 2015 MathWorks, Inc.
 Copyright 2015 MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.

 Copyright 2014 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2015-2016 The MathWorks, Inc.
 Copyright 2013-2017 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015-2017 The MathWorks, Inc.
 Copyright 2016 The MathWorks, Inc.
 Copyright 2014-2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
*/
(function(h,f){var g,e=function(){},d=function(a){for(var b in a)return 0;return 1},c={}.toString,b=function(a){return"[object Function]"==c.call(a)},a=function(a){return"[object String]"==c.call(a)},k=function(a){return"[object Array]"==c.call(a)},l=function(a,b){if(a)for(var c=0;c<a.length;)b(a[c++])},m=function(a,b){for(var c in b)a[c]=b[c];return a},q=function(a,b){return m(Error(a),{src:"dojoLoader",info:b})},n=1,p=function(){return"_"+n++},r=function(a,b,c){return qa(a,b,c,0,r)},s=this,t=s.document,
u=t&&t.createElement("DiV"),v=r.has=function(a){return b(w[a])?w[a]=w[a](s,t,u):w[a]},w=v.cache=f.hasCache;v.add=function(a,b,c,d){(void 0===w[a]||d)&&(w[a]=b);return c&&v(a)};v.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);v("host-webworker")&&(m(f.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),f.loaderPatch={injectUrl:function(a,b){try{importScripts(a),b()}catch(c){console.error(c)}}});
for(var x in h.has)v.add(x,h.has[x],0,1);r.async=1;var B=v("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");r.eval=function(a,b){return B(a+"\r\n//# sourceURL\x3d"+b)};var A={},D=r.signal=function(a,b){var c=A[a];l(c&&c.slice(0),function(a){a.apply(null,k(b)?b:[b])})},F=r.on=function(a,b){var c=A[a]||(A[a]=[]);c.push(b);return{remove:function(){for(var a=0;a<c.length;a++)if(c[a]===b){c.splice(a,1);break}}}},H=[],L={},N=[],M={},P=r.map={},Q=[],O={},I="",E={},K={};x={};var Y=
0,Z=function(a,b){b=!1!==b;var c,d,k,e;for(c in K)d=K[c],(k=c.match(/^url\:(.+)/))?E["url:"+za(k[1],a)]=d:"*now"==c?e=d:"*noref"!=c&&(k=Ha(c,a,!0),E[k.mid]=E["url:"+k.url]=d);e&&e(T(a));b&&(K={})},S=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},V=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+S(c)+"(/|$)"),c.length]);b.sort(function(a,b){return b[3]-a[3]});return b},ha=function(b,c){l(b,function(b){c.push([a(b[0])?RegExp("^"+S(b[0])+
"$"):b[0],b[1]])})},U=function(a){var b=a.name;b||(b=a,a={name:b});a=m({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(P[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));M[b]=a},ea=[],W=function(b,c,d){for(var k in b){"waitSeconds"==k&&(r.waitms=1E3*(b[k]||0));"cacheBust"==k&&(I=b[k]?a(b[k])?b[k]:(new Date).getTime()+"":"");if("baseUrl"==k||"combo"==k)r[k]=b[k];b[k]!==w&&(r.rawConfig[k]=b[k],"has"!=k&&v.add("config-"+k,b[k],0,c))}r.baseUrl||(r.baseUrl="./");/\/$/.test(r.baseUrl)||
(r.baseUrl+="/");for(k in b.has)v.add(k,b.has[k],0,c);l(b.packages,U);for(var e in b.packagePaths)l(b.packagePaths[e],function(b){var c=e+"/"+b;a(b)&&(b={name:b});b.location=c;U(b)});V(m(P,b.map),Q);l(Q,function(a){a[1]=V(a[1],[]);"*"==a[0]&&(Q.star=a)});V(m(L,b.paths),N);ha(b.aliases,H);if(c)ea.push({config:b.config});else for(k in b.config)c=Da(k,d),c.config=m(c.config||{},b.config[k]);b.cache&&(Z(),K=b.cache,Z(0,!!b.cache["*noref"]));D("config",[b,r.rawConfig])};v("dojo-cdn");var aa=t.getElementsByTagName("script");
g=0;for(var ba,$,ka,da;g<aa.length;){ba=aa[g++];if((ka=ba.getAttribute("src"))&&(da=ka.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))$=da[3]||"",f.baseUrl=f.baseUrl||$,Y=ba;if(ka=ba.getAttribute("data-dojo-config")||ba.getAttribute("djConfig"))x=r.eval("({ "+ka+" })","data-dojo-config"),Y=ba}r.rawConfig={};W(f,1);v("dojo-cdn")&&((M.dojo.location=$)&&($+="/"),M.dijit.location=$+"../dijit/",M.dojox.location=$+"../dojox/");W(h,1);W(x,1);var fa=function(a){qb(function(){l(a.deps,Sa)})},qa=function(b,c,d,g,l){var f;
if(a(b)){if((f=Da(b,g,!0))&&f.executed)return f.result;if("dojo/i18n"===g.mid)return;throw q("undefinedModule",b);}k(b)||(W(b,0,g),b=c,c=d);if(k(b))if(b.length){d="require*"+p();for(var n,h=[],s=0;s<b.length;)n=b[s++],h.push(Da(n,g));f=m(Ea("",d,0,""),{injected:2,deps:h,def:c||e,require:g?g.require:r,gc:1});O[f.mid]=f;fa(f);var t=Ta&&0!="sync";qb(function(){rb(f,t)});f.executed||la.push(f);eb()}else c&&c();return l},T=function(a){if(!a)return r;var b=a.require;b||(b=function(c,d,k){return qa(c,d,
k,a,b)},a.require=m(b,r),b.module=a,b.toUrl=function(b){return za(b,a)},b.toAbsMid=function(b){return Ua(b,a)});return b},la=[],ua=[],X={},va=function(a){a.injected=1;X[a.mid]=1;a.url&&(X[a.url]=a.pack||1);sb()},xa=function(a){a.injected=2;delete X[a.mid];a.url&&delete X[a.url];d(X)&&Va()},tb=r.idle=function(){return!ua.length&&d(X)&&!la.length&&!Ta},Fa=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},Ia=function(a){var b=[],c,d;for(a=a.replace(/\\/g,"/").split("/");a.length;)c=
a.shift(),".."==c&&b.length&&".."!=d?(b.pop(),d=b[b.length-1]):"."!=c&&b.push(d=c);return b.join("/")},Ea=function(a,b,c,d){return{pid:a,mid:b,pack:c,url:d,executed:0,def:0}},Wa=function(a,c,d,k,e,g,f,m,n,h){var p,s,r,t;t=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||t&&!c)return Ea(0,a,0,a);a=Ia(t?c.mid+"/../"+a:a);if(/^\./.test(a))throw q("irrationalPath",a);!h&&(!t&&g.star)&&(r=Fa(a,g.star[1]));!r&&c&&(r=(r=Fa(c.mid,g))&&Fa(a,r[1]));r&&(a=r[1]+a.substring(r[3]));c=(da=a.match(/^([^\/]+)(\/(.+))?$/))?
da[1]:"";(p=d[c])?a=c+"/"+(s=da[3]||p.main):c="";var u=0;l(m,function(c){var d=a.match(c[0]);d&&0<d.length&&(u=b(c[1])?a.replace(c[0],c[1]):c[1])});if(u)return Wa(u,0,d,k,e,g,f,m,n);if(d=k[a])return n?Ea(d.pid,d.mid,d.pack,d.url):k[a];k=(r=Fa(a,f))?r[1]+a.substring(r[3]):c?p.location+"/"+s:a;/(^\/)|(\:)/.test(k)||(k=e+k);return Ea(c,a,p,Ia(k+".js"))},Ha=function(a,b,c){return Wa(a,b,M,O,r.baseUrl,Q,N,H,void 0,c)},fb=function(a,b,c){return a.normalize?a.normalize(b,function(a){return Ua(a,c)}):Ua(b,
c)},gb=0,Da=function(a,b,c){var d,k;(d=a.match(/^(.+?)\!(.*)$/))?(k=Da(d[1],b,c),5===k.executed&&!k.load&&ub(k),k.load?(d=fb(k,d[2],b),a=k.mid+"!"+(k.dynamic?++gb+"!":"")+d):(d=d[2],a=k.mid+"!"+ ++gb+"!waitingForPlugin"),a={plugin:k,mid:a,req:T(b),prid:d}):a=Ha(a,b);return O[a.mid]||!c&&(O[a.mid]=a)},Ua=r.toAbsMid=function(a,b){return Ha(a,b).mid},za=r.toUrl=function(a,b){var c=Ha(a+"/x",b),d=c.url;return Kb(0===c.pid?a:d.substring(0,d.length-5))},Na={injected:2,executed:5,def:3,result:3};$=function(a){return O[a]=
m({mid:a},Na)};var Lb=$("require"),Ub=$("exports"),Vb=$("module"),hb={},vb=0,ub=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Wb=function(a){var b={};l(a.loadQ,function(c){var d=fb(a,c.prid,c.req.module),k=a.dynamic?c.mid.replace(/waitingForPlugin$/,d):a.mid+"!"+d,d=m(m({},c),{mid:k,prid:d,injected:0});if(!O[k]||!O[k].injected)Mb(O[k]=d);b[c.mid]=O[k];xa(c);delete O[c.mid]});a.loadQ=0;var c=function(a){for(var c=a.deps||[],d=0;d<c.length;d++)(a=b[c[d].mid])&&
(c[d]=a)},d;for(d in O)c(O[d]);l(la,c)},wb=function(a){r.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=vb++;a.loadQ&&(ub(a),Wb(a));for(g=0;g<la.length;)la[g]===a?la.splice(g,1):g++;/^require\*/.test(a.mid)&&delete O[a.mid]},Xb=[],rb=function(a,c){if(4===a.executed)return r.trace("loader-circular-dependency",[Xb.concat(a.mid).join("-\x3e")]),!a.def||c?hb:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return hb;var d=a.mid,k=a.deps||[],e,g=[],l=0;for(a.executed=4;e=k[l++];){e=e===Lb?T(a):
e===Ub?a.cjs.exports:e===Vb?a.cjs:rb(e,c);if(e===hb)return a.executed=0,r.trace("loader-exec-module",["abort",d]),hb;g.push(e)}r.trace("loader-run-factory",[a.mid]);d=a.def;g=b(d)?d.apply(null,g):d;a.result=void 0===g&&a.cjs?a.cjs.exports:g;wb(a)}return a.result},Ta=0,qb=function(a){try{Ta++,a()}catch(b){throw b;}finally{Ta--}tb()&&D("idle",[])},eb=function(){Ta||qb(function(){for(var a,b,c=0;c<la.length;)a=vb,b=la[c],rb(b),a!=vb?c=0:c++})};void 0===v("dojo-loader-eval-hint-url")&&v.add("dojo-loader-eval-hint-url",
1);var Kb="function"==typeof h.fixupUrl?h.fixupUrl:function(a){a+="";return a+(I?(/\?/.test(a)?"\x26":"?")+I:"")},Mb=function(a){var b=a.plugin;5===b.executed&&!b.load&&ub(b);var c=function(b){a.result=b;xa(a);wb(a);eb()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],la.unshift(b),Sa(b))},ib=0,xb=0,Ja=0,yb=function(a,b){"function"===typeof h.moduleTextTransform&&(a=h.moduleTextTransform(a,b));v("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));Ja=1;a===ib?ib.call(null):
r.eval(a,v("dojo-loader-eval-hint-url")?b.url:b.mid);Ja=0},Sa=function(a){var b=a.mid,c=a.url;if(!a.executed&&!a.injected&&!(X[b]||a.url&&(a.pack&&X[a.url]===a.pack||1==X[a.url])))if(va(a),a.plugin)Mb(a);else{var d=function(){Xa(a);if(2!==a.injected){if(v("dojo-enforceDefine")){D("error",q("noDefine",a));return}xa(a);m(a,Na);r.trace("loader-define-nonmodule",[a.url])}eb()};(ib=E[b]||E["url:"+a.url])?(r.trace("loader-inject",["cache",a.mid,c]),yb(ib,a),d()):(r.trace("loader-inject",["script",a.mid,
c]),xb=a,r.injectUrl(Kb(c),d,a),xb=0)}},Ka=function(a,c,d){r.trace("loader-define-module",[a.mid,c]);if(2===a.injected)return D("error",q("multipleDefine",a)),a;m(a,{deps:c,def:d,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var k=0;c[k];k++)c[k]=Da(c[k],a);xa(a);!b(d)&&!c.length&&(a.result=d,wb(a));return a},Xa=function(a,b){for(var c=[],d,k;ua.length;)k=ua.shift(),b&&(k[0]=b.shift()),d=k[0]&&Da(k[0])||a,c.push([d,k[1],
k[2]]);Z(a);l(c,function(a){fa(Ka.apply(null,a))})},Va=e,sb=e;v.add("ie-event-behavior",t.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Oa=function(a,b,c,d){if(v("ie-event-behavior"))return a.attachEvent(c,d),function(){a.detachEvent(c,d)};a.addEventListener(b,d,!1);return function(){a.removeEventListener(b,d,!1)}},Nb=Oa(window,"load","onload",function(){r.pageLoaded=1;try{"complete"!=t.readyState&&(t.readyState="complete")}catch(a){}Nb()}),
aa=t.getElementsByTagName("script");for(g=0;!Y;)if(!/^dojo/.test((ba=aa[g++])&&ba.type))Y=ba;r.injectUrl=function(a,b,c){c=c.node=t.createElement("script");var d=Oa(c,"load","onreadystatechange",function(a){a=a||window.event;var c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))d(),k(),b&&b()}),k=Oa(c,"error","onerror",function(b){d();k();D("error",q("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;Y.parentNode.insertBefore(c,Y);return c};
r.log=e;r.trace=e;ba=function(c,d,k){var e=arguments.length,g=["require","exports","module"],l=[0,c,d];1==e?l=[0,b(c)?g:[],c]:2==e&&a(c)?l=[c,b(d)?g:[],d]:3==e&&(l=[c,d,k]);r.trace("loader-define",l.slice(0,2));if((e=l[0]&&Da(l[0]))&&!X[e.mid])fa(Ka(e,l[1],l[2]));else if(!v("ie-event-behavior")||Ja)ua.push(l);else{e=e||xb;if(!e)for(c in X)if((g=O[c])&&g.node&&"interactive"===g.node.readyState){e=g;break}e?(Z(e),fa(Ka(e,l[1],l[2]))):D("error",q("ieDefineFailed",l[0]));eb()}};ba.amd={vendor:"dojotoolkit.org"};
m(m(r,f.loaderPatch),h.loaderPatch);F("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(c){}});m(r,{uid:p,cache:E,packs:M});s.define||(s.define=ba,s.require=r,l(ea,function(a){W(a)}),F=x.deps||h.deps||f.deps,x=x.callback||h.callback||f.callback,r.boot=F||x?[F||[],x]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",
name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../shared",name:"shared"},{location:"../MW",name:"MW"},{location:"../l10n",name:"l10n"},{location:"../l10n-lti",name:"l10n-lti"},{location:"../non-amd",name:"non-amd"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../css",name:"css"},{location:"../css-rtc",name:"css-rtc"},{location:"../help",
name:"help"},{location:"../images",name:"images"},{location:"../fonts",name:"fonts"},{location:"../spinner",name:"spinner"},{location:"../dojoConfig",name:"dojoConfig"},{location:"../richeditor-converter",name:"richeditor-converter"},{location:"../mw-peermodel",main:"PeerSynchronizer",name:"mw-peermodel"},{location:"../mw-remote",main:"Remote",name:"mw-remote"},{location:"../mw-messageservice",main:"MessageService",name:"mw-messageservice"},{location:"../mw-actiondataservice",main:"ActionDataService",
name:"mw-actiondataservice"},{location:"../mw-log",main:"Log",name:"mw-log"},{location:"../mw-dnd",main:"DndUtils",name:"mw-dnd"},{location:"../mw-keybindings",name:"mw-keybindings"},{location:"../mw-colorpicker",name:"mw-colorpicker"},{location:"../mw-gesture",name:"mw-gesture"},{location:"../mw-utils",main:"Utils",name:"mw-utils"},{location:"../mw-statemachine",main:"StateMachine",name:"mw-statemachine"},{location:"../mw-html-utils",main:"HTMLUtils",name:"mw-html-utils"},{location:"../mw-dialog-utils",
main:"DialogUtils.js",name:"mw-dialog-utils"},{location:"../mw-store-utils",name:"mw-store-utils"},{location:"../mw-dom-utils",main:"domUtils",name:"mw-dom-utils"},{location:"../mw-event-utils",main:"platformize",name:"mw-event-utils"},{location:"../mw-filename-utils",main:"FileNameUtil",name:"mw-filename-utils"},{location:"../mw-string-utils",main:"Utils",name:"mw-string-utils"},{location:"../mw-deprecation-utils",name:"mw-deprecation-utils"},{location:"../mw-mixins",name:"mw-mixins"},{location:"../mw-menu",
main:"ActionDataService",name:"mw-menu"},{location:"../mw-form",main:"ActionDataService",name:"mw-form"},{location:"../mw-navigationbar",name:"mw-navigationbar"},{location:"../mw-browser-utils",name:"mw-browser-utils"},{location:"../mw-overlay-utils",main:"Utils",name:"mw-overlay-utils"}]});
require({cache:{"richeditor-converter/RichEditorConverter":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-attr dojo/dom-style dojo/dom-class dojo/on dojo/dom dojo/query dojo/aspect dojo/touch dojo/ready dijit/registry dojo/_base/lang MW/rtc/RichTextComponent dojo/dom-geometry MW/rtc/model/io/OpcPackage MW/rtc/model/io/Reader MW/rtc/model/io/Writer MW/rtc/plugins/view/exporters/HTMLContentWriter richeditor-converter/REToolbar richeditor-converter/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPluginProvider richeditor-converter/CustomPlugins/textstyletoolstrip/TextStyleToolstripProvider MW/rtc/clipboardservice/ClipboardService dijit/Destroyable richeditor-converter/PopUpConfig richeditor-converter/ToolStripConfig MW/uiframework/UIBuilderFactory MW/uiframework/constants/TypeConstants richeditor-converter/HTMLDivWriter".split(" "),function(h,
f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M){return h([D],{constructor:function(){this.textAreaNode=this.rtcInstance=null},replaceDivWithCodeEditor:function(a){var b=this.getRtcArguments(!1);this.start(a,b)},replaceTextAreaWithCodeEditor:function(a){var b=this.getRtcArguments(!1);this.textAreaNode=a;this._createRTCParent();f.place(this.rtcParent,this.textAreaNode,"before");e.set(this.textAreaNode,"width","100%");e.set(this.textAreaNode,"display","none");this.start(this.placeHolderNode,
b);this._updateRTCWithTextAreaValue();this._updateOnTextAreaUpdate();k.after(this._document,"onChange",n.hitch(this,"_updateTextArea"));this._autoGrowForExistingContent()},replaceDivWithTextEditor:function(a){var b=this.getRtcArguments(!0);this.start(a,b);this.toolbarObj=new w(this.rtcInstance);this.toolbarObj.place(this.targetParent);this.rtcInstance.localActionService.executeAction("rtc_toggle_code_and_text")},clone:function(a){var b;if(null==a||"object"!=typeof a)return a;if(a instanceof Date)return b=
new Date,b.setTime(a.getTime()),b;if(a instanceof Array){b=[];for(var c=0,d=a.length;c<d;c++)b[c]=this.clone(a[c]);return b}if(a instanceof Object){b={};for(c in a)a.hasOwnProperty(c)&&(b[c]=this.clone(a[c]));return b}throw Error("Unable to copy obj! Its type isn't supported.");},replaceDivWithTextEditorAndToolbar:function(a,b){var d=this.getRtcArguments(!0);this.start(a,d);this._temporaryImageDialogBugFix();d=L.getInstance({actionService:this.rtcInstance.localActionService});this.toolbar=d.create({type:N.TOOLSTRIP,
tag:"motwToolstripTest"});k.after(this.rtcInstance.localActionService,"onActionChange",n.hitch(this.rtcInstance,"focus"));k.after(this.rtcInstance.localActionService,"executeAction",n.hitch(this.rtcInstance,"focus"));d.createPopupsFromConfig(F);d.addTabGroupFromConfig(H,"motwToolstrip.globalTabGroupTest","motwToolstripTest");d.placeToolstripAt("motwToolstripTest",this.targetParent.previousElementSibling);this.toolbarObj={};this.toolbarObj.domNode=this.targetParent.previousElementSibling;e.set(this.toolbarObj.domNode,
"height","52px");var g=d.tagToId("motwToolstrip.liveEditorTab.help.editorUsageHelp");void 0===b&&(b="/matlabcentral/answers/help/rtc");d.addEventCallback(g,function(a){window.open(b,"_blank").focus()},this);this.rtcInstance.localActionService.executeAction("rtc_toggle_code_and_text");this.rtcInstance.getCursor().onChange();/Android|webOS|iPhone|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)&&(this.resize_mobile_toolstrip(),c(window,"resize",n.hitch(this,
"resize_mobile_toolstrip")))},resize_mobile_toolstrip:function(){581>e.get(a(".rtc_editor_with_toolstrip")[0],"width")?(a("div[data-tag^\x3d'motwToolstrip.liveEditorTab.text.']").addClass("no_display"),a("div[data-tag^\x3d'motwToolstrip.liveEditorTab.code.']").addClass("no_display")):(a("div[data-tag^\x3d'motwToolstrip.liveEditorTab.text.']").removeClass("no_display"),a("div[data-tag^\x3d'motwToolstrip.liveEditorTab.code.']").removeClass("no_display"));q.getEnclosingWidget(this.toolbarObj.domNode.children[0]).resize()},
clearEditor:function(){this.placeDataInEditor('{"parts":[{"partUri":"matlab/document.xml","contentType":"text/xml","content":"\x3c?xml version\x3d\\"1.0\\" encoding\x3d\\"UTF-8\\"?\x3e\x3cw:document xmlns:w\x3d\\"http://schemas.openxmlformats.org/wordprocessingml/2006/main\\"\x3e\x3cw:body\x3e\x3cw:p\x3e\x3cw:pPr\x3e\x3cw:pStyle w:val\x3d\\"text\\"/\x3e\x3c/w:pPr\x3e\x3cw:r\x3e\x3cw:t\x3e\x3c/w:t\x3e\x3c/w:r\x3e\x3c/w:p\x3e\x3c/w:body\x3e\x3c/w:document\x3e","relationship":null}],"relationships":[{"relationshipType":"http://schemas.mathworks.com/matlab/code/2013/relationships/document","target":"matlab/document.xml","relationshipId":"rId1"}]}')},
convertToReadOnlyRTC:function(a){var b=this.getRtcArguments(!1);this._createRTCParent();f.place(this.rtcParent,a,"before");this.start(this.placeHolderNode,b);this._document.setText(a.textContent);e.set(this.rtcParent,"display","none");var c=this;setTimeout(function(){var b=c.convertToHTML();a.innerHTML=b;e.set(a,"display","block");c.destroy()},1E3)},placeDataInEditor:function(a){a=JSON.parse(a);a=s.fromJson(a);t.read(this.rtcInstance._internalDocument,a,this.rtcInstance._pluginResolver._injector.getDependency("rtc.serializers"));
var b=this;this._autoGrow();m(function(){setTimeout(function(){b._autoGrow()},500)})},convertToOpcPackage:function(){var a=new s;u.write(this.rtcInstance._internalDocument,a,this.rtcInstance._pluginResolver._injector.getDependency("rtc.serializers"));a=s.toJson(a);return JSON.stringify(a)},convertToInlineHTML:function(){var a=new v;a.switchToInlineView(this.rtcInstance.localActionService);return a.write(this.rtcInstance._internalDocument)},convertToHTML:function(){var a=new M;a.switchToInlineView(this.rtcInstance.localActionService);
return a.write(this.rtcInstance._internalDocument)},start:function(a,b){this.target=a.parentElement.parentElement;this.targetParent=this.target.parentElement;this.rtcInstance=new p(b,a);this.rtcInstance.startup();this.rtcInstance.resize();this._document=this.rtcInstance.getDocument();this._view=this.rtcInstance.getView();this._cursor=this.rtcInstance.getCursor();this._cursor.hide();this._handleCursorEvents();this._initializeAutogrow();this.own(k.after(this._cursor,"show",n.hitch(this,"_addFocusAttributes",
!0)),k.after(this._cursor,"hide",n.hitch(this,"_addFocusAttributes",!1)),k.after(this._cursor,"onChange",n.hitch(this,"_reAdjustWindowScroll")),k.after(this._view.getDomtarget(),"blur",n.hitch(this,function(){this.rtcInstance.blur()})),c(window,"resize",function(){this.rtcInstance.resize();this._autoGrow()}.bind(this)))},destroy:function(){f.destroy(this.rtcParent);this.rtcInstance.destroy()},onResize:function(a,b){this.target.style.height=a;this.targetParent.style.height=a;this.rtcInstance.resize()},
displayCode:function(a){this._document.setText(a);this.rtcInstance.resize()},setReadOnly:function(a){this.rtcInstance.document.setReadOnly(a)},getRtcArguments:function(a){var b={};b["rtc.clipboard"]=A.getBrowserSyncedClipboard();b={"class":"rtePaneFixedSize",features:null,registry:[{id:"editor.movekeycapturewithcursor",path:"richeditor-converter/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPluginProvider"},{id:"liveeditor.toolstrip.textStyle",path:"richeditor-converter/CustomPlugins/textstyletoolstrip/TextStyleToolstripProvider"}],
dependencies:b};b.features=a?this._getConfiguration("richText"):this._getConfiguration("codeField");return b},_getConfiguration:function(a){switch(a){case "richText":return{autoIndent:!0,fixedSize:!0,enabled:"layoutrules rtc.view.layoutmanager.rule rtc.serializers.serialize rtc.code.parenmatch rtc.richtext rtc.code.syntaxhighlighter rtc.richtext.lists rtc.richtext.hyperlink rtc.richtext.equations rtc.richtext.images rtc.richtext.insertimage rtc.code.sections.insert rtc.cutcopypaste liveeditor.saveload smartformatting rtc.smartformatting.formatters.autocoding rtc.smartformatting.formatters.autoformatting editor.movekeycapturewithcursor rtc.code.autoindent rtc.richtext.toggleshortcuts rtc.indent liveeditor.toolstrip.textStyle".split(" "),
disabled:["rtc.smartformatting.formatter.matlab.sectionbreak.heading","rtc.smartformatting.formatter.matlab.sectionbreak.separator"]};case "codeField":return{defaultFeatureState:!1,plainText:!0,fixedSize:!0,enabled:["rtc.code.syntaxhighlighter","rtc.code.autoindent","margin.linenumber","rtc.cutcopypaste","editor.movekeycapturewithcursor"],disabled:["rtc.smartformatting.formatter.matlab.sectionbreak.heading","rtc.smartformatting.formatter.matlab.sectionbreak.separator"]}}},_handleCursorEvents:function(){this.rtcInstance.own(c(document.body,
"click",n.hitch(this,function(a){var c=b.isDescendant(a.target,this.rtcInstance.domNode);a=this._handleToolbarCursorEvents(a);!c&&!a?!1===this.rtcInstance.focused||"false"===this.rtcInstance.focused?(this._cursor.releaseAnchor(),this._cursor.hide()):this._cursor.show():(!0===this.rtcInstance.focused||"true"===this.rtcInstance.focused)&&this._cursor.show()})))},_handleToolbarCursorEvents:function(c){var d=!1;this.toolbarObj&&(d=b.isDescendant(c.target,this.toolbarObj.domNode)||b.isDescendant(c.target,
a(".dialog")[0]));return d},_updateTextArea:function(){this.textAreaNode.value=this._document.getCodeText();this.textAreaNode.textContent=this._document.getCodeText();c.emit(this.textAreaNode,"change",{bubbles:!0,cancelable:!0})},_updateOnTextAreaUpdate:function(){c(this.textAreaNode,"keypress",n.hitch(this,"_updateRTCWithTextAreaValue"));c(this.textAreaNode,"keyup",n.hitch(this,"_updateRTCWithTextAreaValue"));var a=this;this.textAreaNode._value=this.textAreaNode.value;Object.defineProperty(this.textAreaNode,
"value",{get:function(){return this._value},set:function(b){this._value=b;a.rtcInstance.document.getCodeText().trim()!==this._value.trim()&&a._updateRTCWithTextAreaValue()}})},_updateRTCWithTextAreaValue:function(){this._document.setText(this.textAreaNode.value)},_createRTCParent:function(){this.rtcParent=f.create("div");g.set(this.rtcParent,"class","code_template lti_editor lti_editor_sm");var a=f.create("div");g.set(a,"class","windowPane editorWindow");f.place(a,this.rtcParent,"first");var b=f.create("div");
g.set(b,"class","rtcWrapper");f.place(b,a,"first");this.placeHolderNode=f.create("div");f.place(this.placeHolderNode,b,"first")},_addFocusAttributes:function(a){!0===a||"true"===a?!0===this.rtcInstance.isEditable()&&(g.set(this.target,"data-focused-on-tab","true"),g.set(this._view.getDomtarget(),"data-refuse-focus-on-tab","true")):(g.set(this.target,"data-focused-on-tab","false"),g.set(this._view.getDomtarget(),"data-refuse-focus-on-tab","false"))},_initializeAutogrow:function(){this.own(k.after(this._document,
"onChange",n.hitch(this,"_autoGrow")));var a=this.targetParent.offsetHeight,b=this._view.getDomtarget();e.set(b,{minHeight:a+"px",overflowY:"hidden",overflowX:"auto",height:"auto"})},_autoGrow:function(){var a=this._view.getDomtarget().offsetHeight;if(a!==this.target.offsetHeight||this._view.canScroll())a+="px",this.target.style.height=a,this.targetParent.style.height=a,this.rtcInstance.resize(),this._reAdjustWindowScroll()},_reAdjustWindowScroll:function(){if(!0!==this._cursor.isHidden()){var a=
this._cursor.getLineColumn(),a=this._view.getCoordinateForLineColumn(a.line,a.column),b=this._cumulativeOffset(this.target);a.x+=b.x;a.y+=b.y;(a.y>window.innerHeight+this._getWindowScrollY()||a.y<this._getWindowScrollY())&&window.scrollTo(a.x,a.y-window.innerHeight+this._cursor.getNode().getHeight())}},_getWindowScrollY:function(){return r.docScroll().y},_autoGrowForExistingContent:function(){var a=this;this._autoGrow();m(function(){setTimeout(function(){a._autoGrow()},500)})},_cumulativeOffset:function(a){var b=
0,c=0;do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a);return{x:c,y:b}},_temporaryImageDialogBugFix:function(){this.rtcInstance._pluginResolver.getDependency("rtc.richtext.insertimage")._dlgAccept=function(a){this._imagesPlugin.startImageChange();var b=a.node;b?(this._internalDocument.changeNodeAttributes(b,a),this._cursor.onUpdate()):b=this._imagesPlugin.insertImageFromData(a);this._imagesPlugin.endImageChange(b)}}})})},"dojo/_base/declare":function(){define(["./kernel","../has",
"./lang"],function(h,f,g){function e(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function d(a,b,c){var d,k,g,l,f,m,n,q=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=b,b=c);c=0;l=a.callee;(d=d||l.nom)||e("can't deduce a name to call inherited()",this.declaredClass);f=this.constructor._meta;g=f.bases;n=q.p;if(d!=D){if(q.c!==l&&(n=0,m=g[0],f=m._meta,f.hidden[d]!==l)){(k=f.chains)&&"string"==typeof k[d]&&e("calling chained method with inherited: "+d,this.declaredClass);do if(f=m._meta,
k=m.prototype,f&&(k[d]===l&&k.hasOwnProperty(d)||f.hidden[d]===l))break;while(m=g[++n]);n=m?n:-1}if(m=g[++n])if(k=m.prototype,m._meta&&k.hasOwnProperty(d))c=k[d];else{l=w[d];do if(k=m.prototype,(c=k[d])&&(m._meta?k.hasOwnProperty(d):c!==l))break;while(m=g[++n])}c=m&&c||w[d]}else{if(q.c!==l&&(n=0,(f=g[0]._meta)&&f.ctor!==l)){k=f.chains;for((!k||"manual"!==k.constructor)&&e("calling chained constructor with inherited",this.declaredClass);(m=g[++n])&&!((f=m._meta)&&f.ctor===l););n=m?n:-1}for(;(m=g[++n])&&
!(c=(f=m._meta)?f.ctor:m););c=m&&c}q.c=c;q.p=n;if(c)return!0===b?c:c.apply(this,b||a)}function c(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function b(a,b,c){var d=this.getInherited(a,b);if(d)return d.apply(this,c||b||a)}function a(a){for(var b=this.constructor._meta.bases,c=0,d=b.length;c<d;++c)if(b[c]===a)return!0;return this instanceof a}function k(a,b){for(var c in b)c!=D&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(f("bug-for-in-skips-shadowed"))for(var d=g._extraNames,
k=d.length;k;)c=d[--k],c!=D&&b.hasOwnProperty(c)&&(a[c]=b[c])}function l(a){u.safeMixin(this.prototype,a);return this}function m(a,b){a instanceof Array||"function"==typeof a||(b=a,a=void 0);b=b||{};a=a||[];return u([this].concat(a),b)}function q(a,b){return function(){var c=arguments,d=c,k=c[0],e,g;g=a.length;var l;if(!(this instanceof c.callee))return t(c);if(b&&(k&&k.preamble||this.preamble)){l=Array(a.length);l[0]=c;for(e=0;;){if(k=c[0])(k=k.preamble)&&(c=k.apply(this,c)||c);k=a[e].prototype;
(k=k.hasOwnProperty("preamble")&&k.preamble)&&(c=k.apply(this,c)||c);if(++e==g)break;l[e]=c}}for(e=g-1;0<=e;--e)k=a[e],(k=(g=k._meta)?g.ctor:k)&&k.apply(this,l?l[e]:c);(k=this.postscript)&&k.apply(this,d)}}function n(a,b){return function(){var c=arguments,d=c,k=c[0];if(!(this instanceof c.callee))return t(c);b&&(k&&(k=k.preamble)&&(d=k.apply(this,d)||d),(k=this.preamble)&&k.apply(this,d));a&&a.apply(this,c);(k=this.postscript)&&k.apply(this,c)}}function p(a){return function(){var b=arguments,c=0,
d,k;if(!(this instanceof b.callee))return t(b);for(;d=a[c];++c)if(d=(k=d._meta)?k.ctor:d){d.apply(this,b);break}(d=this.postscript)&&d.apply(this,b)}}function r(a,b,c){return function(){var d,k,e=0,g=1;c&&(e=b.length-1,g=-1);for(;d=b[e];e+=g)k=d._meta,(d=(k?k.hidden:d.prototype)[a])&&d.apply(this,arguments)}}function s(a){B.prototype=a.prototype;a=new B;B.prototype=null;return a}function t(a){var b=a.callee,c=s(b);b.apply(c,a);return c}function u(b,f,h){"string"!=typeof b&&(h=f,f=b,b="");h=h||{};
var t,B,Q,O,I,E,K,Y=1,Z=f;if("[object Array]"==x.call(f)){Y=b;Q=[];O=[{cls:0,refs:[]}];E={};for(var S=1,V=f.length,ha=0,U,ea,W,aa;ha<V;++ha){(U=f[ha])?"[object Function]"!=x.call(U)&&e("mixin #"+ha+" is not a callable constructor.",Y):e("mixin #"+ha+" is unknown. Did you use dojo.require to pull it in?",Y);ea=U._meta?U._meta.bases:[U];W=0;for(U=ea.length-1;0<=U;--U)aa=ea[U].prototype,aa.hasOwnProperty("declaredClass")||(aa.declaredClass="uniqName_"+A++),aa=aa.declaredClass,E.hasOwnProperty(aa)||(E[aa]=
{count:0,refs:[],cls:ea[U]},++S),aa=E[aa],W&&W!==aa&&(aa.refs.push(W),++W.count),W=aa;++W.count;O[0].refs.push(W)}for(;O.length;){W=O.pop();Q.push(W.cls);for(--S;B=W.refs,1==B.length;){W=B[0];if(!W||--W.count){W=0;break}Q.push(W.cls);--S}if(W){ha=0;for(V=B.length;ha<V;++ha)W=B[ha],--W.count||O.push(W)}}S&&e("can't build consistent linearization",Y);U=f[0];Q[0]=U?U._meta&&U===Q[Q.length-U._meta.bases.length]?U._meta.bases.length:1:0;E=Q;Q=E[0];Y=E.length-Q;f=E[Y]}else E=[0],f?"[object Function]"==
x.call(f)?(Q=f._meta,E=E.concat(Q?Q.bases:f)):e("base class is not a callable constructor.",b):null!==f&&e("unknown base class. Did you use dojo.require to pull it in?",b);if(f)for(B=Y-1;;--B){t=s(f);if(!B)break;Q=E[B];(Q._meta?k:v)(t,Q.prototype);O=new Function;O.superclass=f;O.prototype=t;f=t.constructor=O}else t={};u.safeMixin(t,h);Q=h.constructor;Q!==w.constructor&&(Q.nom=D,t.constructor=Q);for(B=Y-1;B;--B)(Q=E[B]._meta)&&Q.chains&&(K=v(K||{},Q.chains));t["-chains-"]&&(K=v(K||{},t["-chains-"]));
Q=!K||!K.hasOwnProperty(D);E[0]=O=K&&"manual"===K.constructor?p(E):1==E.length?n(h.constructor,Q):q(E,Q);O._meta={bases:E,hidden:h,chains:K,parents:Z,ctor:h.constructor};O.superclass=f&&f.prototype;O.extend=l;O.createSubclass=m;O.prototype=t;t.constructor=O;t.getInherited=c;t.isInstanceOf=a;t.inherited=F;t.__inherited=d;b&&(t.declaredClass=b,g.setObject(b,O));if(K)for(I in K)t[I]&&("string"==typeof K[I]&&I!=D)&&(Q=t[I]=r(I,E,"after"===K[I]),Q.nom=I);return O}var v=g.mixin,w=Object.prototype,x=w.toString,
B,A=0,D="constructor";B=f("csp-restrictions")?function(){}:new Function;var F=h.config.isDebug?b:d;h.safeMixin=u.safeMixin=function(a,b){var c,d;for(c in b)if(d=b[c],(d!==w[c]||!(c in w))&&c!=D)"[object Function]"==x.call(d)&&(d.nom=c),a[c]=d;if(f("bug-for-in-skips-shadowed")&&b)for(var k=g._extraNames,e=k.length;e;)if(c=k[--e],d=b[c],(d!==w[c]||!(c in w))&&c!=D)"[object Function]"==x.call(d)&&(d.nom=c),a[c]=d;return a};return h.declare=u})},"dojo/_base/kernel":function(){define(["../has","./config",
"require","module"],function(h,f,g,e){var d,c=function(){return this}(),b={},a={},k={config:f,global:c,dijit:b,dojox:a},b={dojo:["dojo",k],dijit:["dijit",b],dojox:["dojox",a]};e=g.map&&g.map[e.id.match(/[^\/]+/)[0]];for(d in e)b[d]?b[d][0]=e[d]:b[d]=[e[d],{}];for(d in b)e=b[d],e[1]._scopeName=e[0],f.noGlobals||(c[e[0]]=e[1]);k.scopeMap=b;k.baseUrl=k.config.baseUrl=g.baseUrl;k.isAsync=g.async;k.locale=f.locale;f="$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/);k.version={major:1,minor:11,patch:2,flag:"",revision:f?
f[0]:NaN,toString:function(){var a=k.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};h("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(k);k.exit=function(){};h("host-webworker");h.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});g="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");
var l;for(f=0;l=g[f++];)console[l]?h("console-as-object")&&(console[l]=Function.prototype.bind.call(console[l],console)):function(){var a=l+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();k.deprecated=k.experimental=function(){};k._hasResource={};return k})},"dojo/has":function(){define(["require","module"],function(h,f){var g=h.has||function(){};g.add("dom-addeventlistener",!!document.addEventListener);
g.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);g.add("touch-events","ontouchstart"in document);g.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window);g.add("MSPointer",window.navigator.msPointerEnabled);g.add("device-width",screen.availWidth||innerWidth);var e=document.createElement("form");g.add("dom-attributes-explicit",0==e.attributes.length);g.add("dom-attributes-specified-flag",
0<e.attributes.length&&40>e.attributes.length);g.clearElement=function(d){d.innerHTML="";return d};g.normalize=function(d,c){var b=d.match(/[\?:]|[^:\?]*/g),a=0,k=function(c){var d=b[a++];if(":"==d)return 0;if("?"==b[a++]){if(!c&&g(d))return k();k(!0);return k(c)}return d||0};return(d=k())&&c(d)};g.load=function(d,c,b){d?c([d],b):b()};return g})},"dojo/_base/config":function(){define(["../has","require"],function(h,f){var g={},e=f.rawConfig,d;for(d in e)g[d]=e[d];g.updateLocale=function(c,b){var a,
d;if(0<=c.indexOf(b)&&"zh"!==b)g.locale=b;else if(a=b.split("-")[0],"zh"===a)g.locale="en-us".toLocaleLowerCase();else{for(var e=0;e<c.length;e+=1)if(d=c[e].split("-")[0],a===d){g.locale=c[e];break}g.locale||(g.locale="en-us")}};if(!g.locale&&"undefined"!=typeof navigator&&(e=g._testLanguageOverride||navigator.language||navigator.userLanguage))e=e.toLowerCase(),g.supportedLocales&&g.updateLocale(g.supportedLocales,e);g.locale||(g.locale="en-us");return g})},"dojo/_base/lang":function(){define(["./kernel",
"../has","../sniff"],function(h,f){f.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var g=f("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],e=g.length,d=function(a,b,c){c||(c=a[0]&&h.scopeMap[a[0]]?h.scopeMap[a.shift()][1]:h.global);try{for(var d=0;d<a.length;d++){var k=a[d];if(!(k in c))if(b)c[k]={};else return;c=c[k]}return c}catch(e){}},c=Object.prototype.toString,
b=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},a=/\{([^\}]+)\}/g,k={_extraNames:g,_mixin:function(a,b,c){var d,k,h,s={};for(d in b)if(k=b[d],!(d in a)||a[d]!==k&&(!(d in s)||s[d]!==k))a[d]=c?c(k):k;if(f("bug-for-in-skips-shadowed")&&b)for(h=0;h<e;++h)if(d=g[h],k=b[d],!(d in a)||a[d]!==k&&(!(d in s)||s[d]!==k))a[d]=c?c(k):k;return a},mixin:function(a,b){a||(a={});for(var c=1,d=arguments.length;c<d;c++)k._mixin(a,arguments[c]);return a},setObject:function(a,b,c){var k=a.split(".");
a=k.pop();return(c=d(k,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return!a?c:d(a.split("."),b,c)},exists:function(a,b){return void 0!==k.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:Array.isArray||function(a){return"[object Array]"==c.call(a)},isFunction:function(a){return"[object Function]"===c.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||k.isArray(a)||k.isFunction(a))},isArrayLike:function(a){return!!a&&
!k.isString(a)&&!k.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(k.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!k.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,b){for(var c=1,d=arguments.length;c<d;c++)k._mixin(a.prototype,arguments[c]);return a},_hitchArgs:function(a,b){var c=k._toArray(arguments,2),d=k.isString(b);return function(){var e=k._toArray(arguments),g=d?(a||h.global)[b]:b;return g&&g.apply(a||this,c.concat(e))}},hitch:function(a,
b){if(2<arguments.length)return k._hitchArgs.apply(h,arguments);b||(b=a,a=null);if(k.isString(b)){a=a||h.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return!a?b:function(){return b.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,c){a.prototype=b;var d=new a;a.prototype=null;c&&k._mixin(d,c);return d}}(),_toArray:f("ie")?function(){function a(b,c,d){d=d||[];for(c=c||0;c<b.length;c++)d.push(b[c]);
return d}return function(c){return(c.item?a:b).apply(this,arguments)}}():b,partial:function(a){return k.hitch.apply(h,[null].concat(k._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||k.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,c,d;if(k.isArray(a)){b=[];c=0;for(d=a.length;c<d;++c)c in a&&(b[c]=k.clone(a[c]))}else b=a.constructor?new a.constructor:{};
return k._mixin(b,a,k.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,c,d){return b.replace(d||a,k.isFunction(c)?c:function(a,b){return k.getObject(b,!1,c)})}};k.mixin(h,k);return k})},"dojo/sniff":function(){define(["./has"],function(h){var f=navigator,g=f.userAgent,f=f.appVersion,e=parseFloat(f);h.add("air",0<=g.indexOf("AdobeAIR"));h.add("wp",parseFloat(g.split("Windows Phone")[1])||void 0);h.add("msapp",
parseFloat(g.split("MSAppHost/")[1])||void 0);h.add("khtml",0<=f.indexOf("Konqueror")?e:void 0);h.add("edge",parseFloat(g.split("Edge/")[1])||void 0);h.add("opr",parseFloat(g.split("OPR/")[1])||void 0);h.add("webkit",!h("wp")&&!h("edge")&&parseFloat(g.split("WebKit/")[1])||void 0);h.add("chrome",!h("edge")&&!h("opr")&&parseFloat(g.split("Chrome/")[1])||void 0);h.add("android",!h("wp")&&parseFloat(g.split("Android ")[1])||void 0);h.add("safari",0<=f.indexOf("Safari")&&!h("wp")&&!h("chrome")&&!h("android")&&
!h("edge")&&!h("opr")?parseFloat(f.split("Version/")[1]):void 0);h.add("mac",0<=f.indexOf("Macintosh"));h.add("quirks","BackCompat"==document.compatMode);if(!h("wp")&&g.match(/(iPhone|iPod|iPad)/)){var d=RegExp.$1.replace(/P/,"p"),c=g.match(/OS ([\d_]+)/)?RegExp.$1:"1",c=parseFloat(c.replace(/_/,".").replace(/_/g,""));h.add(d,c);h.add("ios",c)}h.add("bb",(0<=g.indexOf("BlackBerry")||0<=g.indexOf("BB10"))&&parseFloat(g.split("Version/")[1])||void 0);h.add("trident",parseFloat(f.split("Trident/")[1])||
void 0);h.add("svg","undefined"!==typeof SVGAngle);h("webkit")||(0<=g.indexOf("Opera")&&h.add("opera",9.8<=e?parseFloat(g.split("Version/")[1])||e:e),0<=g.indexOf("Gecko")&&(!h("wp")&&!h("khtml")&&!h("trident")&&!h("edge"))&&h.add("mozilla",e),h("mozilla")&&h.add("ff",parseFloat(g.split("Firefox/")[1]||g.split("Minefield/")[1])||void 0),document.all&&!h("opera")&&(g=parseFloat(f.split("MSIE ")[1])||void 0,(f=document.documentMode)&&(5!=f&&Math.floor(g)!=f)&&(g=f),h.add("ie",g)),h.add("wii","undefined"!=
typeof opera&&opera.wiiremote));return h})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(h,f,g,e,d,c){function b(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}function a(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(b){}for(var c;c=a.lastChild;)a.removeChild(c)}var k={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],
caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},l=/<\s*([\w\:]+)/,m={},q=0,n="__"+f._scopeName+"ToDomId",p;for(p in k)k.hasOwnProperty(p)&&(f=k[p],f.pre="option"==p?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+f.join("\x3e\x3c")+"\x3e",f.post="\x3c/"+f.reverse().join("\x3e\x3c/")+"\x3e");var r;8>=g("ie")&&(r=function(a){a.__dojo_html5_tested="yes";var b=s("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(b){a.createElement(b)});t(b)});h.toDom=function(a,b){b=b||e.doc;var c=b[n];c||(b[n]=c=++q+"",m[c]=b.createElement("div"));8>=g("ie")&&!b.__dojo_html5_tested&&b.body&&r(b);a+="";var d=a.match(l),f=d?d[1].toLowerCase():"",c=m[c];if(d&&k[f]){d=k[f];c.innerHTML=d.pre+a+d.post;for(d=d.length;d;--d)c=c.firstChild}else c.innerHTML=a;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(f=b.createDocumentFragment();d=c.firstChild;)f.appendChild(d);return f};h.place=function(a,c,k){c=d.byId(c);
"string"==typeof a&&(a=/^\s*</.test(a)?h.toDom(a,c.ownerDocument):d.byId(a));if("number"==typeof k){var e=c.childNodes;!e.length||e.length<=k?c.appendChild(a):b(a,e[0>k?0:k])}else switch(k){case "before":b(a,c);break;case "after":k=a;(e=c.parentNode)&&(e.lastChild==c?e.appendChild(k):e.insertBefore(k,c.nextSibling));break;case "replace":c.parentNode.replaceChild(a,c);break;case "only":h.empty(c);c.appendChild(a);break;case "first":if(c.firstChild){b(a,c.firstChild);break}default:c.appendChild(a)}return a};
var s=h.create=function(a,b,k,g){var f=e.doc;k&&(k=d.byId(k),f=k.ownerDocument);"string"==typeof a&&(a=f.createElement(a));b&&c.set(a,b);k&&h.place(a,k,g);return a};h.empty=function(b){a(d.byId(b))};var t=h.destroy=function(b){if(b=d.byId(b)){var c=b;b=b.parentNode;c.firstChild&&a(c);b&&(g("ie")&&b.canHaveChildren&&"removeNode"in c?c.removeNode(!1):b.removeChild(c))}}})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(h,f,g){var e={global:h.global,doc:h.global.document||
null,body:function(d){d=d||h.doc;return d.body||d.getElementsByTagName("body")[0]},setContext:function(d,c){h.global=e.global=d;h.doc=e.doc=c},withGlobal:function(d,c,b,a){var k=h.global;try{return h.global=e.global=d,e.withDoc.call(null,d.document,c,b,a)}finally{h.global=e.global=k}},withDoc:function(d,c,b,a){var k=e.doc,f=g("quirks"),m=g("ie"),q,n,p;try{h.doc=e.doc=d;h.isQuirks=g.add("quirks","BackCompat"==h.doc.compatMode,!0,!0);if(g("ie")&&(p=d.parentWindow)&&p.navigator)q=parseFloat(p.navigator.appVersion.split("MSIE ")[1])||
void 0,(n=d.documentMode)&&(5!=n&&Math.floor(q)!=n)&&(q=n),h.isIE=g.add("ie",q,!0,!0);b&&"string"==typeof c&&(c=b[c]);return c.apply(b,a||[])}finally{h.doc=e.doc=k,h.isQuirks=g.add("quirks",f,!0,!0),h.isIE=g.add("ie",m,!0,!0)}}};f.mixin(h,e);return e})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(h,f){if(7>=h("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}var e={};h("ie")?e.byId=function(c,b){if("string"!=typeof c)return c;var a=b||f.doc,d=c&&a.getElementById(c);
if(d&&(d.attributes.id.value==c||d.id==c))return d;a=a.all[c];if(!a||a.nodeName)a=[a];for(var e=0;d=a[e++];)if(d.attributes&&d.attributes.id&&d.attributes.id.value==c||d.id==c)return d}:e.byId=function(c,b){return("string"==typeof c?(b||f.doc).getElementById(c):c)||null};e.isDescendant=function(c,b){try{c=e.byId(c);for(b=e.byId(b);c;){if(c==b)return!0;c=c.parentNode}}catch(a){}return!1};h.add("css-user-select",function(c,b,a){if(!a)return!1;c=a.style;b=["Khtml","O","Moz","Webkit"];a=b.length;var d=
"userSelect";do if("undefined"!==typeof c[d])return d;while(a--&&(d=b[a]+"UserSelect"));return!1});var d=h("css-user-select");e.setSelectable=d?function(c,b){e.byId(c).style[d]=b?"":"none"}:function(c,b){c=e.byId(c);var a=c.getElementsByTagName("*"),d=a.length;if(b)for(c.removeAttribute("unselectable");d--;)a[d].removeAttribute("unselectable");else for(c.setAttribute("unselectable","on");d--;)a[d].setAttribute("unselectable","on")};return e})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),
function(h,f,g,e,d,c){function b(a,b){var c=a.getAttributeNode&&a.getAttributeNode(b);return!!c&&c.specified}var a={innerHTML:1,textContent:1,className:1,htmlFor:f("ie"),value:1},k={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};h.has=function(d,g){var f=g.toLowerCase();return a[c.names[f]||g]||b(e.byId(d),k[f]||g)};h.get=function(d,f){d=e.byId(d);var q=f.toLowerCase(),n=c.names[q]||f,h=d[n];if(a[n]&&"undefined"!=typeof h)return h;if("textContent"==n)return c.get(d,n);if("href"!=
n&&("boolean"==typeof h||g.isFunction(h)))return h;q=k[q]||f;return b(d,q)?d.getAttribute(q):null};h.set=function(b,f,q){b=e.byId(b);if(2==arguments.length){for(var n in f)h.set(b,n,f[n]);return b}n=f.toLowerCase();var p=c.names[n]||f,r=a[p];if("style"==p&&"string"!=typeof q)return d.set(b,q),b;if(r||"boolean"==typeof q||g.isFunction(q))return c.set(b,f,q);b.setAttribute(k[n]||f,q);return b};h.remove=function(a,b){e.byId(a).removeAttribute(k[b.toLowerCase()]||b)};h.getNodeProp=function(a,d){a=e.byId(a);
var g=d.toLowerCase(),f=c.names[g]||d;if(f in a&&"href"!=f)return a[f];g=k[g]||d;return b(a,g)?a.getAttribute(g):null}})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(h,f,g){function e(a,c,d){c=c.toLowerCase();if("auto"==d){if("height"==c)return a.offsetHeight;if("width"==c)return a.offsetWidth}if("fontweight"==c)switch(d){case 700:return"bold";default:return"normal"}c in m||(m[c]=q.test(c));return m[c]?b(a,d):d}var d,c={};d=h("webkit")?function(a){var b;if(1==
a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=c.getComputedStyle(a,null))}return b||{}}:h("ie")&&(9>h("ie")||h("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){if(1===a.nodeType){var b=a.ownerDocument.defaultView;return(b.opener?b:g.global.window).getComputedStyle(a,null)||{}}return{}};c.getComputedStyle=d;var b;b=h("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==
b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,k=c.left,e=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(g){b=0}c.left=k;d.left=e;return b}:function(a,b){return parseFloat(b)||0};c.toPixelValue=b;var a=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},k=9>h("ie")||10>h("ie")&&h("quirks")?function(b){try{return a(b).Opacity/100}catch(c){return 1}}:function(a){return d(a).opacity},l=9>h("ie")||10>h("ie")&&h("quirks")?
function(b,c){""===c&&(c=1);var d=100*c;1===c?(b.style.zoom="",a(b)&&(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,a(b)?a(b,1).Opacity=d:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+d+")",a(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(d=b.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&l(d,c);return c}:function(a,b){return a.style.opacity=b},m={left:!0,top:!0},q=/margin|padding|width|height|max|min|offset/,
n={cssFloat:1,styleFloat:1,"float":1};c.get=function(a,b){var d=f.byId(a),g=arguments.length;if(2==g&&"opacity"==b)return k(d);b=n[b]?"cssFloat"in d.style?"cssFloat":"styleFloat":b;var l=c.getComputedStyle(d);return 1==g?l:e(d,b,l[b]||d.style[b])};c.set=function(a,b,d){var k=f.byId(a),e=arguments.length,g="opacity"==b;b=n[b]?"cssFloat"in k.style?"cssFloat":"styleFloat":b;if(3==e)return g?l(k,d):k.style[b]=d;for(var m in b)c.set(a,m,b[m]);return c.getComputedStyle(k)};return c})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),
function(h,f,g,e,d,c,b,a){function k(a){var b="";a=a.childNodes;for(var c=0,d;d=a[c];c++)8!=d.nodeType&&(b=1==d.nodeType?b+k(d):b+d.nodeValue);return b}var l={},m=1,q=f._scopeName+"attrid";g.add("dom-textContent",function(a,b,c){return"textContent"in c});h.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};h.get=function(a,b){a=d.byId(a);var c=b.toLowerCase(),
c=h.names[c]||b;return"textContent"==c&&!g("dom-textContent")?k(a):a[c]};h.set=function(k,f,r){k=d.byId(k);if(2==arguments.length&&"string"!=typeof f){for(var s in f)h.set(k,s,f[s]);return k}s=f.toLowerCase();s=h.names[s]||f;if("style"==s&&"string"!=typeof r)return c.set(k,r),k;if("innerHTML"==s)return g("ie")&&k.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(b.empty(k),k.appendChild(b.toDom(r,k.ownerDocument))):k[s]=r,k;if("textContent"==s&&!g("dom-textContent"))return b.empty(k),
k.appendChild(k.ownerDocument.createTextNode(r)),k;if(e.isFunction(r)){var t=k[q];t||(t=m++,k[q]=t);l[t]||(l[t]={});var u=l[t][s];if(u)a.disconnect(u);else try{delete k[s]}catch(v){}r?l[t][s]=a.connect(k,s,r):k[s]=null;return k}k[s]=r;return k}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(h,f,g,e,d,c,b,a){function k(b,d,k,g,l){g=a.hitch(k,g);if(!b||!b.addEventListener&&!b.attachEvent)return e.after(b||h.global,
d,g,!0);"string"==typeof d&&"on"==d.substring(0,2)&&(d=d.substring(2));b||(b=h.global);if(!l)switch(d){case "keypress":d=p;break;case "mouseenter":d=c.enter;break;case "mouseleave":d=c.leave}return f(b,d,g,l)}function l(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}b.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(c){}return 0==
a.charCode&&!b("opera")});var m={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},q=b("mac")?"metaKey":"ctrlKey",n=function(b,c){var d=a.mixin({},b,c);l(d);d.preventDefault=function(){b.preventDefault()};d.stopPropagation=function(){b.stopPropagation()};return d},p;p=b("events-keypress-typed")?function(a,c){var d=f(a,"keydown",function(a){var d=a.keyCode,k=13!=d&&32!=d&&(27!=d||!b("ie"))&&(48>d||90<d)&&(96>d||111<d)&&(186>d||192<d)&&(219>d||222<d)&&
229!=d;if(k||a.ctrlKey){k=k?0:d;if(a.ctrlKey){if(3==d||13==d)return c.call(a.currentTarget,a);k=95<k&&106>k?k-48:!a.shiftKey&&65<=k&&90>=k?k+32:m[k]||k}d=n(a,{type:"keypress",faux:!0,charCode:k});c.call(a.currentTarget,d);if(b("ie"))try{a.keyCode=d.keyCode}catch(e){}}}),k=f(a,"keypress",function(a){var b=a.charCode;a=n(a,{charCode:32<=b?b:0,faux:!0});return c.call(this,a)});return{remove:function(){d.remove();k.remove()}}}:b("opera")?function(a,b){return f(a,"keypress",function(a){var c=a.which;3==
c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&(!a.shiftKey&&65<=c&&90>=c)&&(c+=32);return b.call(this,n(a,{charCode:c}))})}:function(a,b){return f(a,"keypress",function(a){l(a);return b.call(this,a)})};var r={_keypress:p,connect:function(a,b,c,d,e){var g=arguments,f=[],l=0;f.push("string"==typeof g[0]?null:g[l++],g[l++]);var m=g[l+1];f.push("string"==typeof m||"function"==typeof m?g[l++]:null,g[l++]);for(m=g.length;l<m;l++)f.push(g[l]);return k.apply(this,f)},disconnect:function(a){a&&a.remove()},
subscribe:function(b,c,d){return g.subscribe(b,a.hitch(c,d))},publish:function(a,b){return g.publish.apply(g,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){r.publish(a,arguments)};return c?r.connect(b,c,d):r.connect(b,d)},isCopyKey:function(a){return a[q]}};r.unsubscribe=r.disconnect;a.mixin(h,r);return r})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(h,f,g){function e(b,c,d,e,f){if(e=c.match(/(.*):(.*)/))return c=e[2],
e=e[1],a.selector(e,c).call(f,b,d);g("touch")&&(k.test(c)&&(d=A(d)),!g("event-orientationchange")&&"orientationchange"==c&&(c="resize",b=window,d=A(d)));p&&(d=p(d));if(b.addEventListener){var l=c in q,m=l?q[c]:c;b.addEventListener(m,d,l);return{remove:function(){b.removeEventListener(m,d,l)}}}if(u&&b.attachEvent)return u(b,"on"+c,d);throw Error("Target must be an event emitter");}function d(){this.cancelable=!1;this.defaultPrevented=!0}function c(){this.bubbles=!1}var b=window.ScriptEngineMajorVersion;
g.add("jscript",b&&b()+ScriptEngineMinorVersion()/10);g.add("event-orientationchange",g("touch")&&!g("android"));g.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);g.add("event-focusin",function(a,b,c){return"onfocusin"in c});g("touch")&&g.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var b=new a;b.target=null;return null===b.target}catch(c){return!1}});
var a=function(b,c,d,k){return"function"==typeof b.on&&"function"!=typeof c&&!b.nodeType?b.on(c,d):a.parse(b,c,d,e,k,this)};a.pausable=function(b,c,d,k){var e;b=a(b,c,function(){if(!e)return d.apply(this,arguments)},k);b.pause=function(){e=!0};b.resume=function(){e=!1};return b};a.once=function(b,c,d,k){var e=a(b,c,function(){e.remove();return d.apply(this,arguments)});return e};a.parse=function(b,c,d,k,e,g){var f;if(c.call)return c.call(g,b,d);c instanceof Array?f=c:-1<c.indexOf(",")&&(f=c.split(/\s*,\s*/));
if(f){var l=[];c=0;for(var m;m=f[c++];)l.push(a.parse(b,m,d,k,e,g));l.remove=function(){for(var a=0;a<l.length;a++)l[a].remove()};return l}return k(b,c,d,e,g)};var k=/^touch/;a.matches=function(a,b,c,d,k){k=k&&"function"==typeof k.matches?k:f.query;d=!1!==d;1!=a.nodeType&&(a=a.parentNode);for(;!k.matches(a,b,c);)if(a==c||!1===d||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};a.selector=function(b,c,d){return function(k,e){function g(c){return a.matches(c,b,k,d,f)}var f="function"==typeof b?{matches:b}:
this,l=c.bubble;return l?a(k,l(g),e):a(k,c,function(a){var b=g(a.target);if(b)return a.selectorTarget=b,e.call(b,a)})}};var l=[].slice,m=a.emit=function(a,b,k){var e=l.call(arguments,2),g="on"+b;if("parentNode"in a){var f=e[0]={},m;for(m in k)f[m]=k[m];f.preventDefault=d;f.stopPropagation=c;f.target=a;f.type=b;k=f}do a[g]&&a[g].apply(a,e);while(k&&k.bubbles&&(a=a.parentNode));return k&&k.cancelable&&k},q=g("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!g("event-stopimmediatepropagation"))var n=
function(){this.modified=this.immediatelyStopped=!0},p=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=n,a.apply(this,arguments)}};if(g("dom-addeventlistener"))a.emit=function(b,c,d){if(b.dispatchEvent&&document.createEvent){var k=(b.ownerDocument||document).createEvent("HTMLEvents");k.initEvent(c,!!d.bubbles,!!d.cancelable);for(var e in d)e in k||(k[e]=d[e]);return b.dispatchEvent(k)&&k}return m.apply(a,arguments)};else{a._fixEvent=function(a,b){a||(a=(b&&
(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{r&&(a.type==r.type&&a.srcElement==r.target)&&(a=r)}catch(c){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=v,a.preventDefault=w),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=
d;d=a;d.keyChar=d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}return a};var r,s=function(a){this.handle=a};s.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var t=function(b){return function(c){c=a._fixEvent(c,this);var d=b.call(this,c);c.modified&&(r||setTimeout(function(){r=null}),r=c);return d}},u=function(a,b,c){c=t(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>g("jscript"))&&!g("config-_allow_leaks")){"undefined"==
typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=a[b];if(!d||!d.listeners){var k=d,d=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");d.listeners=[];a[b]=d;d.global=this;k&&d.listeners.push(_dojoIEListeners_.push(k)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(c)-1);return new s(a)}return h.after(a,b,c,!0)},v=function(){this.cancelBubble=
!0},w=a._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(g("touch"))var x=function(){},B=window.orientation,A=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(k){}if(b.type){if(g("touch-can-modify-event-delegate"))x.prototype=b,c=new x;else{var c={},e;for(e in b)c[e]=b[e]}c.preventDefault=function(){b.preventDefault()};c.stopPropagation=
function(){b.stopPropagation()}}else c=b,c.type=d;b.corrected=c;if("resize"==d){if(B==window.orientation)return null;B=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var d=c.changedTouches[0],f;for(f in d)delete c[f],c[f]=d[f]}return a.call(this,c)}};return a})},"dojo/topic":function(){define(["./Evented"],function(h){var f=new h;return{publish:function(g,e){return f.emit.apply(f,arguments)},subscribe:function(g,e){return f.on.apply(f,
arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(h,f){function g(){}var e=h.after;g.prototype={on:function(d,c){return f.parse(this,d,c,function(b,a){return e(b,"on"+a,c,!0)})},emit:function(d,c){var b=[this];b.push.apply(b,arguments);return f.emit.apply(f,b)}};return g})},"dojo/aspect":function(){define([],function(){function h(b,a,c,d){var e=b[a],g="around"==a,f;if(g){var h=c(function(){return e.advice(this,arguments)});f={remove:function(){h&&(h=b=c=null)},advice:function(a,
b){return h?h.apply(a,b):e.advice(a,b)}}}else f={remove:function(){if(f.advice){var d=f.previous,e=f.next;!e&&!d?delete b[a]:(d?d.next=e:b[a]=e,e&&(e.previous=d));b=c=f.advice=null}},id:b.nextId++,advice:c,receiveArguments:d};if(e&&!g)if("after"==a){for(;e.next&&(e=e.next););e.next=f;f.previous=e}else"before"==a&&(b[a]=f,f.next=e,e.previous=f);else b[a]=f;return f}function f(b){return function(a,c,d,e){var f=a[c],n;if(!f||f.target!=a)a[c]=n=function(){for(var a=n.nextId,b=arguments,c=n.before;c;)c.advice&&
(b=c.advice.apply(this,b)||b),c=c.next;if(n.around)var d=n.around.advice(this,b);for(c=n.after;c&&c.id<a;){if(c.advice)if(c.receiveArguments)var k=c.advice.apply(this,b),d=k===g?d:k;else d=c.advice.call(this,d,b);c=c.next}return d},f&&(n.around={advice:function(a,b){return f.apply(a,b)}}),n.target=a,n.nextId=n.nextId||0;a=h(n||f,b,d,e);d=null;return a}}var g,e=f("after"),d=f("before"),c=f("around");return{before:d,around:c,after:e}})},"dojo/_base/event":function(){define(["./kernel","../on","../has",
"../dom-geometry"],function(h,f,g,e){if(f._fixEvent){var d=f._fixEvent;f._fixEvent=function(b,a){(b=d(b,a))&&e.normalizeEvent(b);return b}}var c={fix:function(b,a){return f._fixEvent?f._fixEvent(b,a):b},stop:function(b){g("dom-addeventlistener")||b&&b.preventDefault?(b.preventDefault(),b.stopPropagation()):(b=b||window.event,b.cancelBubble=!0,f._preventDefault.call(b))}};h.fixEvent=c.fix;h.stopEvent=c.stop;return c})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],
function(h,f,g,e){function d(a,b,c,d,k,e){e=e||"px";a=a.style;isNaN(b)||(a.left=b+e);isNaN(c)||(a.top=c+e);0<=d&&(a.width=d+e);0<=k&&(a.height=k+e)}function c(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function b(b){return"border-box"==a.boxModel||"table"==b.tagName.toLowerCase()||c(b)}var a={boxModel:"content-box"};h("ie")&&(a.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");a.getPadExtents=
function(a,b){a=g.byId(a);var c=b||e.getComputedStyle(a),d=e.toPixelValue,k=d(a,c.paddingLeft),f=d(a,c.paddingTop),h=d(a,c.paddingRight),c=d(a,c.paddingBottom);return{l:k,t:f,r:h,b:c,w:k+h,h:f+c}};a.getBorderExtents=function(a,b){a=g.byId(a);var c=e.toPixelValue,d=b||e.getComputedStyle(a),k="none"!=d.borderLeftStyle?c(a,d.borderLeftWidth):0,f="none"!=d.borderTopStyle?c(a,d.borderTopWidth):0,h="none"!=d.borderRightStyle?c(a,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(a,d.borderBottomWidth):
0;return{l:k,t:f,r:h,b:c,w:k+h,h:f+c}};a.getPadBorderExtents=function(b,c){b=g.byId(b);var d=c||e.getComputedStyle(b),k=a.getPadExtents(b,d),d=a.getBorderExtents(b,d);return{l:k.l+d.l,t:k.t+d.t,r:k.r+d.r,b:k.b+d.b,w:k.w+d.w,h:k.h+d.h}};a.getMarginExtents=function(a,b){a=g.byId(a);var c=b||e.getComputedStyle(a),d=e.toPixelValue,k=d(a,c.marginLeft),f=d(a,c.marginTop),h=d(a,c.marginRight),c=d(a,c.marginBottom);return{l:k,t:f,r:h,b:c,w:k+h,h:f+c}};a.getMarginBox=function(b,c){b=g.byId(b);var d=c||e.getComputedStyle(b),
k=a.getMarginExtents(b,d),f=b.offsetLeft-k.l,r=b.offsetTop-k.t,s=b.parentNode,t=e.toPixelValue;if(h("mozilla")){var u=parseFloat(d.left),d=parseFloat(d.top);!isNaN(u)&&!isNaN(d)?(f=u,r=d):s&&s.style&&(s=e.getComputedStyle(s),"visible"!=s.overflow&&(f+="none"!=s.borderLeftStyle?t(b,s.borderLeftWidth):0,r+="none"!=s.borderTopStyle?t(b,s.borderTopWidth):0))}else if((h("opera")||8==h("ie")&&!h("quirks"))&&s)s=e.getComputedStyle(s),f-="none"!=s.borderLeftStyle?t(b,s.borderLeftWidth):0,r-="none"!=s.borderTopStyle?
t(b,s.borderTopWidth):0;return{l:f,t:r,w:b.offsetWidth+k.w,h:b.offsetHeight+k.h}};a.getContentBox=function(b,c){b=g.byId(b);var d=c||e.getComputedStyle(b),k=b.clientWidth,f=a.getPadExtents(b,d),r=a.getBorderExtents(b,d);k?(d=b.clientHeight,r.w=r.h=0):(k=b.offsetWidth,d=b.offsetHeight);h("opera")&&(f.l+=r.l,f.t+=r.t);return{l:f.l,t:f.t,w:k-f.w-r.w,h:d-f.h-r.h}};a.setContentSize=function(c,k,e){c=g.byId(c);var f=k.w;k=k.h;b(c)&&(e=a.getPadBorderExtents(c,e),0<=f&&(f+=e.w),0<=k&&(k+=e.h));d(c,NaN,NaN,
f,k)};var k={l:0,t:0,w:0,h:0};a.setMarginBox=function(f,m,q){f=g.byId(f);var n=q||e.getComputedStyle(f);q=m.w;var p=m.h,r=b(f)?k:a.getPadBorderExtents(f,n),n=a.getMarginExtents(f,n);if(h("webkit")&&c(f)){var s=f.style;0<=q&&!s.width&&(s.width="4px");0<=p&&!s.height&&(s.height="4px")}0<=q&&(q=Math.max(q-r.w-n.w,0));0<=p&&(p=Math.max(p-r.h-n.h,0));d(f,m.l,m.t,q,p)};a.isBodyLtr=function(a){a=a||f.doc;return"ltr"==(f.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};a.docScroll=function(b){b=
b||f.doc;var c=f.doc.parentWindow||f.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=h("quirks")?f.body(b):b.documentElement)&&{x:a.fixIeBiDiScrollLeft(c.scrollLeft||0,b),y:c.scrollTop||0}};a.getIeDocumentElementOffset=function(a){return{x:0,y:0}};a.fixIeBiDiScrollLeft=function(b,c){c=c||f.doc;var d=h("ie");if(d&&!a.isBodyLtr(c)){var k=h("quirks"),e=k?f.body(c):c.documentElement,g=f.global;6==d&&(!k&&g.frameElement&&e.scrollHeight>e.clientHeight)&&(b+=e.clientLeft);return 8>
d||k?b+e.clientWidth-e.scrollWidth:-b}return b};a.position=function(b,c){b=g.byId(b);var d=f.body(b.ownerDocument),k=b.getBoundingClientRect(),k={x:k.left,y:k.top,w:k.right-k.left,h:k.bottom-k.top};9>h("ie")&&(k.x-=h("quirks")?d.clientLeft+d.offsetLeft:0,k.y-=h("quirks")?d.clientTop+d.offsetTop:0);c&&(d=a.docScroll(b.ownerDocument),k.x+=d.x,k.y+=d.y);return k};a.getMarginSize=function(b,c){b=g.byId(b);var d=a.getMarginExtents(b,c||e.getComputedStyle(b)),k=b.getBoundingClientRect();return{w:k.right-
k.left+d.w,h:k.bottom-k.top+d.h}};a.normalizeEvent=function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!("pageX"in b)){var c=b.target,c=c&&c.ownerDocument||document,d=h("quirks")?c.body:c.documentElement;b.pageX=b.clientX+a.fixIeBiDiScrollLeft(d.scrollLeft||0,c);b.pageY=b.clientY+(d.scrollTop||0)}};return a})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(h,f,g,e,d){function c(b,a){var d=function(c,d){return f(c,b,function(b){if(a)return a(b,
d);if(!e.isDescendant(b.relatedTarget,c))return d.call(this,b)})};d.bubble=function(a){return c(b,function(b,c){var d=a(b.target),k=b.relatedTarget;if(d&&d!=(k&&1==k.nodeType&&a(k)))return c.call(d,b)})};return d}g.add("dom-quirks",d.doc&&"BackCompat"==d.doc.compatMode);g.add("events-mouseenter",d.doc&&"onmouseenter"in d.doc.createElement("div"));g.add("events-mousewheel",d.doc&&"onmousewheel"in d.doc);d=g("dom-quirks")&&g("ie")||!g("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,
a){return b.button&a},isLeft:function(b){return b.button&1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,a){return b.button==a},isLeft:function(b){return 0==b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};h.mouseButtons=d;h=g("events-mousewheel")?"mousewheel":function(b,a){return f(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;a.call(this,b)})};return{_eventHandler:c,
enter:c("mouseover"),leave:c("mouseout"),wheel:h,isLeft:d.isLeft,isMiddle:d.isMiddle,isRight:d.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(h,f,g){h._name="browser";f.mixin(h,{isBrowser:!0,isFF:g("ff"),isIE:g("ie"),isKhtml:g("khtml"),isWebKit:g("webkit"),isMozilla:g("mozilla"),isMoz:g("mozilla"),isOpera:g("opera"),isSafari:g("safari"),isChrome:g("chrome"),isMac:g("mac"),isIos:g("ios"),isAndroid:g("android"),isWii:g("wii"),isQuirks:g("quirks"),isAir:g("air")});
return g})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(h,f){return h.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:f("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,
NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:f("mac")&&!f("air")?f("safari")?91:224:17}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(h,f,g){function e(a){if("string"==typeof a||a instanceof
String){if(a&&!c.test(a))return b[0]=a,b;a=a.split(c);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return!a?[]:f.filter(a,function(a){return a})}var d,c=/\s+/,b=[""],a={};return d={contains:function(a,b){return 0<=(" "+g.byId(a).className+" ").indexOf(" "+b+" ")},add:function(a,b){a=g.byId(a);b=e(b);var c=a.className,d,c=c?" "+c+" ":" ";d=c.length;for(var f=0,h=b.length,r;f<h;++f)(r=b[f])&&0>c.indexOf(" "+r+" ")&&(c+=r+" ");d<c.length&&(a.className=c.substr(1,c.length-2))},
remove:function(a,b){a=g.byId(a);var c;if(void 0!==b){b=e(b);c=" "+a.className+" ";for(var d=0,f=b.length;d<f;++d)c=c.replace(" "+b[d]+" "," ");c=h.trim(c)}else c="";a.className!=c&&(a.className=c)},replace:function(b,c,e){b=g.byId(b);a.className=b.className;d.remove(a,e);d.add(a,c);b.className!==a.className&&(b.className=a.className)},toggle:function(a,b,c){a=g.byId(a);if(void 0===c){b=e(b);for(var f=0,n=b.length,h;f<n;++f)h=b[f],d[d.contains(a,h)?"remove":"add"](a,h)}else d[c?"add":"remove"](a,
b);return c}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(h,f,g){function e(a){return b[a]=new Function("item","index","array",a)}function d(a){var c=!a;return function(d,k,f){var g=0,h=d&&d.length||0,t;h&&"string"==typeof d&&(d=d.split(""));"string"==typeof k&&(k=b[k]||e(k));if(f)for(;g<h;++g){if(t=!k.call(f,d[g],g,d),a^t)return!t}else for(;g<h;++g)if(t=!k(d[g],g,d),a^t)return!t;return c}}function c(b){var c=1,d=0,e=0;b||(c=d=e=-1);return function(f,g,h,t){if(t&&
0<c)return k.lastIndexOf(f,g,h);t=f&&f.length||0;var u=b?t+e:d;h===a?h=b?d:t+e:0>h?(h=t+h,0>h&&(h=d)):h=h>=t?t+e:h;for(t&&"string"==typeof f&&(f=f.split(""));h!=u;h+=c)if(f[h]==g)return h;return-1}}var b={},a,k={every:d(!1),some:d(!0),indexOf:c(!0),lastIndexOf:c(!1),forEach:function(a,c,d){var k=0,f=a&&a.length||0;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=b[c]||e(c));if(d)for(;k<f;++k)c.call(d,a[k],k,a);else for(;k<f;++k)c(a[k],k,a)},map:function(a,c,d,k){var f=0,g=a&&a.length||
0;k=new (k||Array)(g);g&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=b[c]||e(c));if(d)for(;f<g;++f)k[f]=c.call(d,a[f],f,a);else for(;f<g;++f)k[f]=c(a[f],f,a);return k},filter:function(a,c,d){var k=0,f=a&&a.length||0,g=[],h;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=b[c]||e(c));if(d)for(;k<f;++k)h=a[k],c.call(d,h,k,a)&&g.push(h);else for(;k<f;++k)h=a[k],c(h,k,a)&&g.push(h);return g},clearCache:function(){b={}}};g.mixin(h,k);return k})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),
function(h,f,g,e,d,c,b,a){function k(a,b){var c=function(c,d){if("string"==typeof d&&(d=g.byId(d),!d))return new b([]);var k="string"==typeof c?a(c,d):c?c.end&&c.on?c:[c]:[];return k.end&&k.on?k:new b(k)};c.matches=a.match||function(a,b,d){return 0<c.filter([a],b,d).length};c.filter=a.filter||function(a,b,k){return c(b,k).filter(function(b){return-1<d.indexOf(a,b)})};if("function"!=typeof a){var k=a.search;a=function(a,b){return k(b||document,a)}}return c}f.add("array-extensible",function(){return 1==
c.delegate([],{length:1}).length&&!f("bug-for-in-skips-shadowed")});var l=Array.prototype,m=l.slice,q=l.concat,n=d.forEach,p=function(a,b,c){b=[0].concat(m.call(b,0));c=c||h.global;return function(d){b[0]=d;return a.apply(c,b)}},r=function(a){var b=this instanceof s&&f("array-extensible");"number"==typeof a&&(a=Array(a));var d=a&&"length"in a?a:arguments;if(b||!d.sort){for(var k=b?this:[],e=k.length=d.length,g=0;g<e;g++)k[g]=d[g];if(b)return k;d=k}c._mixin(d,t);d._NodeListCtor=function(a){return s(a)};
return d},s=r,t=s.prototype=f("array-extensible")?[]:{};s._wrap=t._wrap=function(a,b,c){a=new (c||this._NodeListCtor||s)(a);return b?a._stash(b):a};s._adaptAsMap=function(a,b){return function(){return this.map(p(a,arguments,b))}};s._adaptAsForEach=function(a,b){return function(){this.forEach(p(a,arguments,b));return this}};s._adaptAsFilter=function(a,b){return function(){return this.filter(p(a,arguments,b))}};s._adaptWithCondition=function(a,b,c){return function(){var d=arguments,k=p(a,d,c);if(b.call(c||
h.global,d))return this.map(k);this.forEach(k);return this}};n(["slice","splice"],function(a){var b=l[a];t[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});n(["indexOf","lastIndexOf","every","some"],function(a){var b=d[a];t[a]=function(){return b.apply(h,[this].concat(m.call(arguments,0)))}});c.extend(r,{constructor:s,_NodeListCtor:s,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return e(c,
a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=m.call(this,0),c=d.map(arguments,function(a){return m.call(a,0)});return this._wrap(q.apply(b,c),this)},map:function(a,b){return this._wrap(d.map(this,a,b),this)},forEach:function(a,b){n(this,a,b);return this},filter:function(a){var b=arguments,c=this,k=0;if("string"==typeof a){c=u._filterResult(this,b[0]);if(1==b.length)return c._stash(this);
k=1}return this._wrap(d.filter(c,b[k],b[k+1]),this)},instantiate:function(a,b){var d=c.isFunction(a)?a:c.getObject(a);b=b||{};return this.forEach(function(a){new d(b,a)})},at:function(){var a=new this._NodeListCtor(0);n(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var u=k(a,r);h.query=k(a,function(a){return r(a)});u.load=function(a,c,d){b.load(a,c,function(a){d(k(a,r))})};h._filterQueryResult=u._filterResult=function(a,b,c){return new r(u.filter(a,
b,c))};h.NodeList=u.NodeList=r;return u})},"dojo/selector/_loader":function(){define(["../has","require"],function(h,f){if("undefined"!==typeof document){var g=document.createElement("div");h.add("dom-qsa2.1",!!g.querySelectorAll);h.add("dom-qsa3",function(){try{return g.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==g.querySelectorAll(".TEST:empty").length}catch(d){}})}var e;return{load:function(d,c,b,a){if(a&&a.isBuild)b();else{a=f;d="default"==d?h("config-selectorEngine")||"css3":d;d="css2"==
d||"lite"==d?"./lite":"css2.1"==d?h("dom-qsa2.1")?"./lite":"./acme":"css3"==d?h("dom-qsa3")?"./lite":"./acme":"acme"==d?"./acme":(a=c)&&d;if("?"==d.charAt(d.length-1)){d=d.substring(0,d.length-1);var k=!0}if(k&&(h("dom-compliant-qsa")||e))return b(e);a([d],function(a){"./lite"!=d&&(e=a);b(a)})}}}})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(h,f){var g=document.createElement("div"),e=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector,
d=g.querySelectorAll,c=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;h.add("dom-matches-selector",!!e);h.add("dom-qsa",!!d);var b=function(c,e){if(l&&-1<c.indexOf(","))return l(c,e);var g=e?e.ownerDocument||e:f.doc||document,p=(d?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(c);e=e||g;if(p){var r=8===h("ie")&&h("quirks")?e.nodeType===g.nodeType:null!==e.parentNode&&9!==e.nodeType&&e.parentNode===g;if(p[2]&&r){var s=
f.byId?f.byId(p[2],g):g.getElementById(p[2]);if(!s||p[1]&&p[1]!=s.tagName.toLowerCase())return[];if(e!=g)for(g=s;g!=e;)if(g=g.parentNode,!g)return[];return p[3]?b(p[3],s):[s]}if(p[3]&&e.getElementsByClassName)return e.getElementsByClassName(p[4]);if(p[5])if(s=e.getElementsByTagName(p[5]),p[4]||p[6])c=(p[4]||"")+p[6];else return s}if(d)return 1===e.nodeType&&"object"!==e.nodeName.toLowerCase()?a(e,c,e.querySelectorAll):e.querySelectorAll(c);s||(s=e.getElementsByTagName("*"));p=[];g=0;for(r=s.length;g<
r;g++){var t=s[g];1==t.nodeType&&k(t,c,e)&&p.push(t)}return p},a=function(a,b,d){var k=a,e=a.getAttribute("id"),g=e||"__dojo__",f=a.parentNode,l=/^\s*[+~]/.test(b);if(l&&!f)return[];e?g=g.replace(/'/g,"\\$\x26"):a.setAttribute("id",g);l&&f&&(a=a.parentNode);b=b.match(c);for(f=0;f<b.length;f++)b[f]="[id\x3d'"+g+"'] "+b[f];b=b.join(",");try{return d.call(a,b)}finally{e||k.removeAttribute("id")}};if(!h("dom-matches-selector"))var k=function(){function a(b,c,d){var k=c.charAt(0);if('"'==k||"'"==k)c=c.slice(1,
-1);c=c.replace(/\\/g,"");var e=f[d||""];return function(a){return(a=a.getAttribute(b))&&e(a,c)}}function b(a){return function(b,c){for(;(b=b.parentNode)!=c;)if(a(b,c))return!0}}function c(a){return function(b,c){b=b.parentNode;return a?b!=c&&a(b,c):b==c}}function d(a,b){return a?function(c,d){return b(c)&&a(c,d)}:b}var k="div"==g.tagName?"toLowerCase":"toUpperCase",e={"":function(a){a=a[k]();return function(b){return b.tagName==a}},".":function(a){var b=" "+a+" ";return function(c){return-1<c.className.indexOf(a)&&
-1<(" "+c.className+" ").indexOf(b)}},"#":function(a){return function(b){return b.id==a}}},f={"^\x3d":function(a,b){return 0==a.indexOf(b)},"*\x3d":function(a,b){return-1<a.indexOf(b)},"$\x3d":function(a,b){return a.substring(a.length-b.length,a.length)==b},"~\x3d":function(a,b){return-1<(" "+a+" ").indexOf(" "+b+" ")},"|\x3d":function(a,b){return 0==(a+"-").indexOf(b+"-")},"\x3d":function(a,b){return a==b},"":function(a,b){return!0}},l={};return function(k,f,g){var h=l[f];if(!h){if(f.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,
function(k,f,g,l,r,t,u){l?h=d(h,e[g||""](l.replace(/\\/g,""))):f?h=(" "==f?b:c)(h):r&&(h=d(h,a(r,u,t)));return""}))throw Error("Syntax error in query");if(!h)return!0;l[f]=h}return h(k,g)}}();if(!h("dom-qsa"))var l=function(a,d){for(var k=a.match(c),e=[],f=0;f<k.length;f++){a=new String(k[f].replace(/\s*$/,""));a.indexOf=escape;for(var g=b(a,d),l=0,h=g.length;l<h;l++){var v=g[l];e[v.sourceIndex]=v}}k=[];for(f in e)k.push(e[f]);return k};b.match=e?function(b,c,d){return d&&9!=d.nodeType?a(d,c,function(a){return e.call(b,
a)}):e.call(b,c)}:k;return b})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(h,f,g,e,d,c,b,a,k,l){function m(a,b,d){return r&&d?function(a,b){return c(a,d,b)}:t?function(d,k){var e=c(d,b,function(a){k.call(this,a);L=(new Date).getTime()}),f=c(d,a,function(a){(!L||(new Date).getTime()>L+1E3)&&k.call(this,a)});return{remove:function(){e.remove();f.remove()}}}:function(b,d){return c(b,a,d)}}function q(a){do if(void 0!==
a.dojoClick)return a;while(a=a.parentNode)}function n(b,d,k){if(!a.isRight(b)){var f=q(b.target);if(v=!b.target.disabled&&f&&f.dojoClick)if(x=(w="useTarget"==v)?f:b.target,w&&b.preventDefault(),B=b.changedTouches?b.changedTouches[0].pageX-l.global.pageXOffset:b.clientX,A=b.changedTouches?b.changedTouches[0].pageY-l.global.pageYOffset:b.clientY,D=("object"==typeof v?v.x:"number"==typeof v?v:0)||4,F=("object"==typeof v?v.y:"number"==typeof v?v:0)||4,!u){u=!0;var m=function(a){v=w?g.isDescendant(l.doc.elementFromPoint(a.changedTouches?
a.changedTouches[0].pageX-l.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-l.global.pageYOffset:a.clientY),x):v&&(a.changedTouches?a.changedTouches[0].target:a.target)==x&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-l.global.pageXOffset:a.clientX)-B)<=D&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-l.global.pageYOffset:a.clientY)-A)<=F};l.doc.addEventListener(d,function(b){a.isRight(b)||(m(b),w&&b.preventDefault())},!0);l.doc.addEventListener(k,function(b){if(!a.isRight(b)&&
(m(b),v)){H=(new Date).getTime();var d=w?x:b.target;"LABEL"===d.tagName&&(d=g.byId(d.getAttribute("for"))||d);var k=b.changedTouches?b.changedTouches[0]:b,e=function(a){var c=document.createEvent("MouseEvents");c._dojo_click=!0;c.initMouseEvent(a,!0,!0,b.view,b.detail,k.screenX,k.screenY,k.clientX,k.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null);return c},f=e("mousedown"),l=e("mouseup"),n=e("click");setTimeout(function(){c.emit(d,"mousedown",f);c.emit(d,"mouseup",l);c.emit(d,"click",n);H=
(new Date).getTime()},0)}},!0);b=function(a){l.doc.addEventListener(a,function(b){var c=b.target;v&&(!b._dojo_click&&(new Date).getTime()<=H+1E3&&!("INPUT"==c.tagName&&e.contains(c,"dijitOffScreen")))&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"==a&&(("INPUT"!=c.tagName||"radio"==c.type&&(e.contains(c,"dijitCheckBoxInput")||e.contains(c,"mblRadioButton"))||"checkbox"==c.type&&(e.contains(c,"dijitCheckBoxInput")||e.contains(c,"mblCheckBox")))&&"TEXTAREA"!=
c.tagName&&"AUDIO"!=c.tagName&&"VIDEO"!=c.tagName)&&b.preventDefault())},!0)};b("click");b("mousedown");b("mouseup")}}}var p=5>b("ios"),r=b("pointer-events")||b("MSPointer"),s=function(){var a={},c;for(c in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[c]=b("MSPointer")?"MSPointer"+c.charAt(0).toUpperCase()+c.slice(1):"pointer"+c;return a}(),t=b("touch-events"),u,v,w=!1,x,B,A,D,F,H,L,N;b("touch")&&(r?k(function(){l.doc.addEventListener(s.down,function(a){n(a,s.move,s.up)},!0)}):k(function(){function a(c){var k=
d.delegate(c,{bubbles:!0});6<=b("ios")&&(k.touches=c.touches,k.altKey=c.altKey,k.changedTouches=c.changedTouches,k.ctrlKey=c.ctrlKey,k.metaKey=c.metaKey,k.shiftKey=c.shiftKey,k.targetTouches=c.targetTouches);return k}N=l.body();l.doc.addEventListener("touchstart",function(a){L=(new Date).getTime();var b=N;N=a.target;c.emit(b,"dojotouchout",{relatedTarget:N,bubbles:!0});c.emit(N,"dojotouchover",{relatedTarget:b,bubbles:!0});n(a,"touchmove","touchend")},!0);c(l.doc,"touchmove",function(b){L=(new Date).getTime();
var d=l.doc.elementFromPoint(b.pageX-(p?0:l.global.pageXOffset),b.pageY-(p?0:l.global.pageYOffset));d&&(N!==d&&(c.emit(N,"dojotouchout",{relatedTarget:d,bubbles:!0}),c.emit(d,"dojotouchover",{relatedTarget:N,bubbles:!0}),N=d),c.emit(d,"dojotouchmove",a(b))||b.preventDefault())});c(l.doc,"touchend",function(b){L=(new Date).getTime();var d=l.doc.elementFromPoint(b.pageX-(p?0:l.global.pageXOffset),b.pageY-(p?0:l.global.pageYOffset))||l.body();c.emit(d,"dojotouchend",a(b))})}));f={press:m("mousedown",
"touchstart",s.down),move:m("mousemove","dojotouchmove",s.move),release:m("mouseup","dojotouchend",s.up),cancel:m(a.leave,"touchcancel",r?s.cancel:null),over:m("mouseover","dojotouchover",s.over),out:m("mouseout","dojotouchout",s.out),enter:a._eventHandler(m("mouseover","dojotouchover",s.over)),leave:a._eventHandler(m("mouseout","dojotouchout",s.out))};return h.touch=f})},"dojo/domReady":function(){define(["./has"],function(h){function f(b){k.push(b);a&&g()}function g(){if(!l){for(l=!0;k.length;)try{k.shift()(d)}catch(a){console.error(a,
"in domReady callback",a.stack)}l=!1;f._onQEmpty()}}var e=function(){return this}(),d=document,c={loaded:1,complete:1},b="string"!=typeof d.readyState,a=!!c[d.readyState],k=[],l;f.load=function(a,b,c){f(c)};f._Q=k;f._onQEmpty=function(){};b&&(d.readyState="loading");if(!a){var m=[],q=function(k){k=k||e.event;a||"readystatechange"==k.type&&!c[d.readyState]||(b&&(d.readyState="complete"),a=1,g())},n=function(a,b){a.addEventListener(b,q,!1);k.push(function(){a.removeEventListener(b,q,!1)})};if(!h("dom-addeventlistener")){var n=
function(a,b){b="on"+b;a.attachEvent(b,q);k.push(function(){a.detachEvent(b,q)})},p=d.createElement("div");try{p.doScroll&&null===e.frameElement&&m.push(function(){try{return p.doScroll("left"),1}catch(a){}})}catch(r){}}n(d,"DOMContentLoaded");n(e,"load");"onreadystatechange"in d?n(d,"readystatechange"):b||m.push(function(){return c[d.readyState]});if(m.length){var s=function(){if(!a){for(var b=m.length;b--;)if(m[b]()){q("poller");return}setTimeout(s,30)}};s()}}return f})},"dojo/ready":function(){define(["./_base/kernel",
"./has","require","./domReady","./_base/lang"],function(h,f,g,e,d){var c=0,b=[],a=0;f=function(){c=1;h._postLoad=h.config.afterOnLoad=!0;k()};var k=function(){if(!a){for(a=1;c&&(!e||0==e._Q.length)&&(g.idle?g.idle():1)&&b.length;){var d=b.shift();try{d()}catch(k){if(k.info=k.message,g.signal)g.signal("error",k);else throw k;}}a=0}};g.on&&g.on("idle",k);e&&(e._onQEmpty=k);var l=h.ready=h.addOnLoad=function(a,c,e){var f=d._toArray(arguments);"number"!=typeof a?(e=c,c=a,a=1E3):f.shift();e=e?d.hitch.apply(h,
f):function(){c()};e.priority=a;for(f=0;f<b.length&&a>=b[f].priority;f++);b.splice(f,0,e);k()},m=h.config.addOnLoad;if(m)l[d.isArray(m)?"apply":"call"](h,m);e?e(f):f();return l})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(h,f,g){var e={},d={},c={length:0,add:function(b){if(d[b.id])throw Error("Tried to register widget with id\x3d\x3d"+b.id+" but that id is already registered");d[b.id]=b;this.length++},remove:function(b){d[b]&&(delete d[b],this.length--)},
byId:function(b){return"string"==typeof b?d[b]:b},byNode:function(b){return d[b.getAttribute("widgetId")]},toArray:function(){var b=[],a;for(a in d)b.push(d[a]);return b},getUniqueId:function(b){var a;do a=b+"_"+(b in e?++e[b]:e[b]=0);while(d[a]);return"dijit"==g._scopeName?a:g._scopeName+"_"+a},findWidgets:function(b,a){function c(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var f=b.getAttribute("widgetId");f?(f=d[f])&&e.push(f):b!==a&&c(b)}}var e=[];c(b);return e},_destroyAll:function(){g._curFocus=
null;g._prevFocus=null;g._activeStack=[];h.forEach(c.findWidgets(f.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var a=1==b.nodeType&&b.getAttribute("widgetId");if(a)return d[a];b=b.parentNode}return null},_hash:d};return g.registry=c})},"dijit/main":function(){define(["dojo/_base/kernel"],function(h){return h.dijit})},"MW/rtc/RichTextComponent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/dom-attr dojo/dom-class dojo/has dojo/keys dojo/on dojo/dom-geometry dijit/layout/ContentPane dijit/layout/_LayoutWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/rtePane.html MW/rtc/core/registry/PluginRegistry MW/rtc/core/PluginResolver mw-actiondataservice/ActionDataService MW/rtc/keyBindingUtils MW/rtc/view/ViewEventUtilities MW/rtc/HasExtensions MW/layout/BorderContainer mw-mixins/property/VisualFamilyMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H){return h([r,s,t,H],{templateString:u,widgetsInTemplate:!0,baseClass:"rtePane mwRichTextComponent",visualFamily:"default",constructor:function(a){a=a||{};this.dependencies=a.dependencies||{};this.registry=a.registry||[];var b=this.dependencies["rtc.backingstore"],b=b&&b.getStorageData?b.getStorageData():"";this.initialDocumentText=a.initialDocumentText||b;this.readOnly=a.readOnly;this.clientKeyBindings=a.keyBindings||[];this.clipboard=a.clipboard;
this.localActionService=a.actionDataService||new x;this.features=a.features||{};this._enabledPlugins=this.features.enabled||[];this._disabledPlugins=this.features.disabled||[];this._updateEnabledPlugins(this._enabledPlugins);this.started=!1;this._syncTimer=null},postCreate:function(){this.scrollPane=c.create("div",{"class":"scrollPane mwRichTextComponentDocument dijitInline mwDoNotApplyCustomScrollbarCSS",tabindex:0});a.set(this.scrollPane,"data-testid","rtc_scrollPane");this.features.fixedSize&&
(this.borderContainer=new F({},this.rteWindow));this._loadPlugins();this.own(d.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"documentChanged"),!0));this.features.fixedSize&&(this.view.paddingLeft=4);this.own(d.after(this.cursor,"onChange",e.hitch(this,"onCursorChanged")));this.own(d.after(this._undoRedoController,"onUndoRedoStackUpdated",e.hitch(this,"undoRedoStackUpdated"),!0));this.keyHandler=this._pluginResolver.getDependency("rtc.keyhandler");this._loadActionsAndKeyBindings();
this._focusService=this._pluginResolver.getDependency("rtc.focusservice");this._initializeDocument();l("ff")&&this._focusService.setFocus();this.features.fixedSize||(this.scrollPane.style.paddingRight="2px",this.scrollPane.style.overflow="visible")},startup:function(){if(!this.started){this.started=!0;this.borderContainer?(this._initializeBorderContainer(),this.own(d.after(this.borderContainer,"layout",e.hitch(this.view,"onResize")))):c.place(this.scrollPane,this.rteWindow);if(0<=this._enabledPlugins.indexOf("margin.linenumber"))this.onEnableLineGutter();
this.cursor.initialize()}this.view.onLayoutChange()},_initializeBorderContainer:function(){this.borderContainer.startup();this.borderContainer.design="sidebar";this._scrollPaneContentPane=this._scrollPaneContentPane||this._createContentPaneWrapper(this.scrollPane,"overflow: hidden");this.borderContainer.addWithProperties(this._scrollPaneContentPane,{isResizable:!0,isProportional:!0,region:"center"})},destroy:function(){this._featureInterface.onClose();this._syncTimer&&clearTimeout(this._syncTimer);
this._pluginResolver.destroy();this.borderContainer&&this.borderContainer.destroyRecursive();this.inherited(arguments)},_onClose:function(){},_loadActionsAndKeyBindings:function(){this.keyHandler.addBindings(this.clientKeyBindings);B.addLabelsForActionService(this.localActionService)},showEditor:function(){b.set(this.scrollPane,"left","auto")},hideEditor:function(){b.set(this.scrollPane,"left","-10000px")},onEnableLineGutter:function(){this.addLeftMargin();this._featureInterface.onEnableLineGutter()},
_createContentPaneWrapper:function(a,b){var c=new p({style:b});c.set("content",a);return c},addLeftMargin:function(){if(this.borderContainer&&!this._gutterContentPane){var a="overflow: hidden; width: "+this.marginProvider.getWidth()+"px";this._gutterContentPane=this._gutterContentPane||this._createContentPaneWrapper(this.marginProvider.marginContainer,a);this.borderContainer.addWithProperties(this._gutterContentPane,{isProportional:!0,region:"left",layoutOrder:1})}},hideCursor:function(){this.cursor.hide()},
showCursor:function(){this.cursor.show()},setCursorToEnd:function(){this.cursor.movePosition(this.cursor.END)},_initializeDocument:function(){this.initialDocumentText?this._internalDocument.openTextDocument(this.initialDocumentText,this.readOnly):this._internalDocument.newDocument(this.readOnly)},getActionDataService:function(){return this.localActionService},getCursor:function(){return this.cursor},getDocument:function(){return this.document},getView:function(){return this.view},isEditable:function(){return!this._internalDocument.isReadOnly()},
getLanguage:function(){return null},getUndoRedoStates:function(){return{isUndoable:this._undoRedoController.canUndo(),isRedoable:this._undoRedoController.canRedo()}},undoRedoStackUpdated:function(a){},undo:function(){this._undoRedoController.undo()},redo:function(){this._undoRedoController.redo()},addDocumentChangeListener:function(a){this.own(d.after(this._internalDocument,"onDocumentChanged",a,!0))},getId:function(){return this.id},getMatlabCellModeText:function(){return""},focus:function(){this._focusService.setFocus()},
blur:function(){this._focusService.setBlur()},resize:function(){this.borderContainer&&(this._updateDimensionsOfBorderContainer(),this.borderContainer.resize());this.view.onResize()},_updateDimensionsOfBorderContainer:function(){var a=this.marginProvider.getWidth();this.borderContainer.setFreeDimension("left",a)},setCursorInView:function(a,b,c){!a.rteNode&&a.parentNode.rteNode&&(a=a.parentNode);c?this.cursor.fixAnchor():this.cursor.releaseAnchor();this.cursor.setPosition(this._internalDocument.textNode(a.rteNode,
b),b,!1)},documentChanged:function(a){},hasSelection:function(){return this.cursor.hasSelection()},getText:function(){return this.document.getText()},setActive:function(){this._featureInterface.onActivated()},_onActivated:function(){},onCursorChanged:function(){if(this.cursor.isHidden())return!1;this.keyHandler.prepareKeyCapture(this.cursor.hasSelection())},resetEditor:function(a,b){var c=b&&b.readOnly,d=b&&b.silentUpdate,k=b?b.cursorOffset:null;(!b||!b.preserveUndoStack)&&this._undoRedoController.clear();
this.cursor.hide();this._internalDocument.newDocument(c);a?!1===d?(this._internalDocument.openTextDocument("",c),this.cursor.movePosition(this.cursor.START),this.document.insertTextAtCurrentPosition(a)):this._internalDocument.openTextDocument(a,c):this._internalDocument.newDocument(c);null!==a&&k?this.cursor.setPosition(k):this.cursor.movePosition(this.cursor.START);this.cursor.show();0<this._enabledPlugins.indexOf("margin.linenumber")&&this.marginProvider.update()},selectAll:function(){this.cursor.selectAll()},
getFeatureInterface:function(){this._featureInterface||(this._featureInterface={onClose:e.hitch(this,"_onClose"),onActivated:e.hitch(this,"_onActivated"),resize:e.hitch(this,"resize"),onEnableLineGutter:function(){}});return this._featureInterface},_loadPlugins:function(){var a=this._getDefaultDependencies(),b=v.plugins.concat(this.registry);this._pluginResolver=new w(b,this._enabledPlugins,this._disabledPlugins,a,this.dependencies);this._loadFeatures()},_getDefaultDependencies:function(){var a={"rtc.actionservice":this.localActionService,
"rtc.bordercontainer":this.borderContainer,"rtc.domnode":this.domNode,"rtc.fixedsize":this.features.fixedSize,"rtc.fileendselectable":this.features.fileEndSelectable,"rtc.scrollpane":this.scrollPane,"rtc.featureinterface":this.getFeatureInterface()};this.clipboard&&(a["rtc.clipboard"]=this.clipboard);return a},_loadFeatures:function(){this._pluginResolver.resolve();this.marginProvider=this._pluginResolver.getDependency("rtc.margin");this.own(d.after(this.marginProvider,"onResize",e.hitch(this,"_handleMarginResize")));
this._internalDocument=this._pluginResolver.getDependency("rtc.internaldocument");this.document=this._pluginResolver.getDependency("rtc.document");this.cursor=this._pluginResolver.getDependency("rtc.cursor");this.view=this._pluginResolver.getDependency("rtc.view");this._undoRedoController=this._pluginResolver.getDependency("rtc.undoredo.controller")},_handleMarginResize:function(){this.borderContainer&&this._updateDimensionsOfBorderContainer();this.view.onLayoutChange()},_updateEnabledPlugins:function(a){a.push("rtc.margin");
a.push("rtc.eventhandler");a.push("rtc.serializers");0>this._disabledPlugins.indexOf("document")&&a.push("document");0>this._disabledPlugins.indexOf("cursor")&&a.push("cursor");0>this._disabledPlugins.indexOf("rtc.clipboard")&&a.push("rtc.clipboard");0>this._disabledPlugins.indexOf("rtc.code.comment")&&a.push("rtc.code.comment");0>this._disabledPlugins.indexOf("rtc.divcaret")&&a.push("rtc.divcaret");0>this._disabledPlugins.indexOf("rtc.undoredo.action")&&a.push("rtc.undoredo.action");0>this._disabledPlugins.indexOf("rtc.undoredo.cursor")&&
a.push("rtc.undoredo.cursor");0>this._disabledPlugins.indexOf("rtc.tooltip")&&a.push("rtc.tooltip");0>this._disabledPlugins.indexOf("rtc.imeinput")&&a.push("rtc.imeinput");0>this._disabledPlugins.indexOf("rtc.divselection")&&a.push("rtc.divselection");0>this._disabledPlugins.indexOf("rtc.plaintextmimeconverter")&&a.push("rtc.plaintextmimeconverter");0>this._disabledPlugins.indexOf("rtc.plaintextmimeincodeconverter")&&a.push("rtc.plaintextmimeincodeconverter");0>this._disabledPlugins.indexOf("rtc.unicodestringmimeconverter")&&
a.push("rtc.unicodestringmimeconverter");0>this._disabledPlugins.indexOf("rtc.plaintextmimegeneratorprovider")&&a.push("rtc.plaintextmimegeneratorprovider");0>this._disabledPlugins.indexOf("rtc.plugins.cursorgripper")&&a.push("rtc.plugins.cursorgripper");0>this._disabledPlugins.indexOf("rtc.plugins.device.ios.virtualkeyboardshortcutbar")&&a.push("rtc.plugins.device.ios.virtualkeyboardshortcutbar")}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return k("dijit.layout.ContentPane",[g,e,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:h._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){b=m.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);
a=f.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=r.getLocalization("dijit","loading",this.lang);this.loadingMessage=c.substitute(this.loadingMessage,a);this.errorMessage=c.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&a.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&f.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){a.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&f.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&a.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&f.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(a){h.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new l(f.hitch(this,"cancel"));this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){h.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new l(f.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new l(f.hitch(this,"cancel"));this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
f.isObject(this.ioArgs)&&f.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||p.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(b){this.isLoaded&&this._onUnloadHandler();var c=this._contentSetter;a.forEach(this.getChildren(),function(a){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b);a._destroyed=!0});c&&(a.forEach(c.parseResults,function(a){a._destroyed||(a.destroyRecursive?
a.destroyRecursive(b):a.destroy&&a.destroy(b),a._destroyed=!0)}),delete c.parseResults);b||n.empty(this.containerNode);delete this._singleChild},_setContent:function(a,c){a=this.preprocessContent(a);this.destroyDescendants();var d=this._contentSetter;d&&d instanceof b._ContentSetter||(d=this._contentSetter=new b._ContentSetter({node:this.containerNode,_onError:f.hitch(this,this._onError),onContentError:f.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+
this.id+" could not change content due to "+b.message,b)}})}));var k=f.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),k=d.set(f.isObject(a)&&a.domNode?a.domNode:a,k),e=this;return s(k&&k.then?k:d.parseDeferred,function(){delete e._contentSetterParams;c||(e._started&&(e._startChildren(),e._scheduleLayout()),e._onLoadHandler(a))})},
preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){function p(){}function r(a){return function(c,d,k,e){return c&&"string"==typeof d&&c[d]==p?c.on(d.substring(2).toLowerCase(),b.hitch(k,e)):a.apply(g,arguments)}}h.around(g,"connect",r);c.connect&&h.around(c,"connect",r);h=e("dijit._Widget",[m,q,n],{onClick:p,onDblClick:p,onKeyDown:p,onKeyPress:p,onKeyUp:p,onMouseDown:p,onMouseMove:p,onMouseOut:p,onMouseOver:p,onMouseLeave:p,onMouseEnter:p,onMouseUp:p,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
p&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===p?g.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){c.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){c.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?a("[widgetId]",this.containerNode).map(l.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&k(0,function(){require(["dijit/_base"])});
return h})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable require ./registry".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A){function D(b){return function(c){a[c?"set":"remove"](this.domNode,
b,c);this._set(b,c)}}n.add("dijit-legacy-requires",!p.isAsync);n("dijit-legacy-requires")&&t(0,function(){h(["dijit/_base/manager"])});var F={};return c("dijit._WidgetBase",[u,x],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:D("lang"),dir:"",_setDirAttr:D("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:e.blankGif||h.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,d.length-9),(!b.attributeMap||!(d in b.attributeMap))&&c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,
c){this._introspect();this.srcNodeRef=b.byId(c);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);a&&(this.params=a,r.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=w.body(this.ownerDocument);
A.add(this);this.buildRendering();var d;if(this.domNode){this._applyAttributes();var k=this.srcNodeRef;k&&(k.parentNode&&this.domNode!==k)&&(k.parentNode.replaceChild(this.domNode,k),d=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();d&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);f.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,
a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(f.map(a,function(a){return a+"Rtl"})));k.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,f.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&r.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},
destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();f.forEach(this._connects,r.hitch(this,"disconnect"));f.forEach(this._supportingWidgets,b);this.domNode&&f.forEach(A.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);A.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&
(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?a.remove(this.domNode,"widgetId"):l.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||l.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){f.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;r.isObject(a)?q.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",
a)},_attrToDom:function(b,c,d){d=3<=arguments.length?d:this.attributeMap[b];f.forEach(r.isArray(d)?d:[d],function(d){var e=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":r.isFunction(c)&&(c=r.hitch(this,c));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;e.tagName?a.set(e,d,c):e.set(d,c);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(c));break;case "textContent":e.textContent=c;break;case "innerHTML":e.innerHTML=
c;break;case "class":k.replace(e,c,this[b]);break;case "toggleClass":k.toggle(e,d.className||b,c)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(r.isFunction(d))var k=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!r.isFunction(this.focusNode)?"focusNode":"domNode",e=this[d]&&this[d].tagName,
f;if(f=e)if(!(f=F[e])){f=this[d];var g={},l;for(l in f)g[l.toLowerCase()]=!0;f=F[e]=g}l=f;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:l&&c.l in l&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return k||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+
c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,k=this["on"+a];k&&(d=k.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&
s.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);return c?g.after(this,c,b,!0):this.own(s(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):
[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(d.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(v.subscribe(a,r.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():m.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=q.get(this.domNode,"display")},placeAt:function(a,c){var d=
!a.tagName&&A.byId(a);d&&d.addChild&&(!c||"number"===typeof c)?d.addChild(this,c):(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(c||"")?d.containerNode:d.domNode:b.byId(a,this.ownerDocument),l.place(this.domNode,d,c),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(r.hitch(this,function(){c&&(c=null,this._destroyed||r.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}})})},
"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(h,f,g,e){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(d){var c=this._attrPairNames;return c[d]?c[d]:c[d]={s:"_"+d+"Setter",g:"_"+d+"Getter"}},postscript:function(d){d&&this.set(d)},_get:function(d,c){return"function"===typeof this[c.g]?this[c.g]():this[d]},get:function(d){return this._get(d,this._getAttrNames(d))},set:function(d,c){if("object"===typeof d){for(var b in d)d.hasOwnProperty(b)&&
"_watchCallbacks"!=b&&this.set(b,d[b]);return this}b=this._getAttrNames(d);var a=this._get(d,b);b=this[b.s];var k;"function"===typeof b?k=b.apply(this,Array.prototype.slice.call(arguments,1)):this[d]=c;if(this._watchCallbacks){var f=this;e(k,function(){f._watchCallbacks(d,a,c)})}return this},_changeAttrValue:function(d,c){var b=this.get(d);this[d]=c;this._watchCallbacks&&this._watchCallbacks(d,b,c);return this},watch:function(d,c){var b=this._watchCallbacks;if(!b)var a=this,b=this._watchCallbacks=
function(c,d,k,e){var f=function(b){if(b){b=b.slice();for(var e=0,f=b.length;e<f;e++)b[e].call(a,c,d,k)}};f(b["_"+c]);e||f(b["*"])};!c&&"function"===typeof d?(c=d,d="*"):d="_"+d;var k=b[d];"object"!==typeof k&&(k=b[d]=[]);k.push(c);var e={};e.unwatch=e.remove=function(){var a=g.indexOf(k,c);-1<a&&k.splice(a,1)};return e}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(h,f){return function(g,e,d,c){var b=g&&"function"===typeof g.then,a=b&&g instanceof f;if(b)a||(b=new h(g.cancel),
g.then(b.resolve,b.reject,b.progress),g=b.promise);else return 1<arguments.length?e?e(g):g:(new h).resolve(g);return e||d||c?g.then(e,d,c):g}})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","require"],function(h,f,g,e,d){var c=Object.freeze||function(){},b=function(b,c,d,k,e){for(e=0;e<b.length;e++)a(b[e],c,d,k)},a=function(a,b,c,d){d=a[b];var e=a.deferred;if(d)try{var f=d(c);0===b?"undefined"!==typeof f&&l(e,b,f):f&&"function"===typeof f.then?
(a.cancel=f.cancel,f.then(k(e,1),k(e,2),k(e,0))):l(e,1,f)}catch(g){l(e,2,g)}else l(e,b,c)},k=function(a,b){return function(c){l(a,b,c)}},l=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},m=function(d){var k=this.promise=new e,f=this,l,h,t=!1,u=[];this.isResolved=k.isResolved=function(){return 1===l};this.isRejected=k.isRejected=function(){return 2===l};this.isFulfilled=k.isFulfilled=function(){return!!l};this.isCanceled=k.isCanceled=
function(){return t};this.progress=function(a,c){if(l){if(!0===c)throw Error("This deferred has already been fulfilled.");return k}b(u,0,a,null,f);return k};this.resolve=function(a,c){if(l){if(!0===c)throw Error("This deferred has already been fulfilled.");return k}b(u,l=1,h=a,null,f);u=null;return k};var v=this.reject=function(a,c){if(l){if(!0===c)throw Error("This deferred has already been fulfilled.");return k}b(u,l=2,h=a,void 0,f);u=null;return k};this.then=k.then=function(b,c,d){var e=[d,b,c];
e.cancel=k.cancel;e.deferred=new m(function(a){return e.cancel&&e.cancel(a)});l&&!u?a(e,l,h,void 0):u.push(e);return e.deferred.promise};this.cancel=k.cancel=function(a,b){if(l){if(!0===b)throw Error("This deferred has already been fulfilled.");}else{if(d){var c=d(a);a="undefined"===typeof c?a:c}t=!0;if(l){if(2===l&&h===a)return a}else return"undefined"===typeof a&&(a=new g),v(a),a}};c(k)};m.prototype.toString=function(){return"[object Deferred]"};d&&d(m);return m})},"dojo/errors/CancelError":function(){define(["./create"],
function(h){return h("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(h){return function(f,g,e,d){e=e||Error;var c=function(b){if(e===Error){Error.captureStackTrace&&Error.captureStackTrace(this,c);var a=Error.call(this,b),d;for(d in a)a.hasOwnProperty(d)&&(this[d]=a[d]);this.message=b;this.stack=a.stack}else e.apply(this,arguments);g&&g.apply(this,arguments)};c.prototype=h.delegate(e.prototype,d);c.prototype.name=f;return c.prototype.constructor=
c}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(h){function f(){throw new TypeError("abstract");}return h.extend(function(){},{then:function(g,e,d){f()},cancel:function(g,e){f()},isResolved:function(){f()},isRejected:function(){f()},isFulfilled:function(){f()},isCanceled:function(){f()},always:function(f){return this.then(f,f)},otherwise:function(f){return this.then(null,f)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},
"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,f,g){return g("dijit.Destroyable",null,{destroy:function(e){this._destroyed=!0},own:function(){var e=["destroyRecursive","destroy","remove"];h.forEach(arguments,function(d){function c(){a.remove();h.forEach(k,function(a){a.remove()})}var b,a=f.before(this,"destroy",function(a){d[b](a)}),k=[];d.then?(b="cancel",d.then(c,c)):h.forEach(e,function(a){"function"===typeof d[a]&&(b||(b=a),k.push(f.after(d,
a,c,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(h,f,g,e,d,c){h=e("dijit._OnDijitClickMixin",null,{connect:function(b,a,d){return this.inherited(arguments,[b,"ondijitclick"==a?c:a,d])}});h.a11yclick=c;return h})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(h,f,g,e){function d(a){if((a.keyCode===h.ENTER||a.keyCode===
h.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var c;g(document,"keydown",function(a){d(a)?(c=a.target,a.preventDefault()):c=null});g(document,"keyup",function(a){d(a)&&a.target==c&&(c=null,g.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var b=function(a,b){a.dojoClick=!0;return g(a,"click",b)};b.click=b;b.press=function(a,b){var c=g(a,
e.press,function(a){("mousedown"!=a.type||f.isLeft(a))&&b(a)}),d=g(a,"keydown",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&b(a)});return{remove:function(){c.remove();d.remove()}}};b.release=function(a,b){var c=g(a,e.release,function(a){("mouseup"!=a.type||f.isLeft(a))&&b(a)}),d=g(a,"keyup",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&b(a)});return{remove:function(){c.remove();d.remove()}}};b.move=e.move;return b})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase",
"dojo/_base/declare","dojo/_base/lang"],function(h,f,g,e){e.extend(f,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return g("dijit._FocusMixin",null,{_focusManager:h})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){var u,v,w=new (f([q,b],{curNode:null,activeStack:[],constructor:function(){var b=a.hitch(this,function(a){g.isDescendant(this.curNode,a)&&this.set("curNode",null);g.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});h.before(c,"empty",b);h.before(c,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=a.document&&a.document.body;if(d){var e=m("pointer-events")?"pointerdown":m("MSPointer")?
"MSPointerDown":m("touch-events")?"mousedown, touchstart":"mousedown",f=k(a.document,e,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(b||a.target,"mouse")}),g=k(d,"focusin",function(a){if(a.target.tagName){var d=a.target.tagName.toLowerCase();"#document"==d||"body"==d||(r.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),l=k(d,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){f.remove();g.remove();l.remove();d=f=
g=l=null}}}},_onBlurNode:function(b){b=(new Date).getTime();b<u+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(a.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),b<v+100||(this._clearActiveWidgetsTimer=setTimeout(a.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){v=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);d.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var k=e.get(a,"dijitPopupParent");if(k)a=s.byId(k).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===n.body())break;a=p.get(a.ownerDocument).frameElement}else{var f=a.getAttribute&&a.getAttribute("widgetId"),g=f&&s.byId(f);g&&!("mouse"==b&&g.get("disabled"))&&c.unshift(f);a=a.parentNode}}}catch(l){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(u=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,k=a.length-1;if(a[k]!=c[d]){this.set("activeStack",a);var e;for(e=d;0<=e&&c[e]!=a[e];e--)if(d=s.byId(c[e]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),
this.emit("widget-blur",d,b);for(e++;e<=k;e++)if(d=s.byId(a[e]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));l(function(){var a=w.registerWin(p.get(document));m("ie")&&k(window,"unload",function(){a&&(a.remove(),a=null)})});t.focus=function(a){w.focus(a)};for(var x in w)/^_/.test(x)||(t.focus[x]="function"==typeof w[x]?a.hitch(w,x):w[x]);w.watch(function(a,b,c){t.focus[a]=c});return w})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),
function(h,f,g,e,d,c,b){f.add("rtl-adjust-position-for-verticalScrollBar",function(a,c){var e=g.body(c),f=b.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},e,"last"),n=b.create("div",{style:{overflow:"hidden",direction:"ltr"}},f,"last"),h=0!=d.position(n).x;f.removeChild(n);e.removeChild(f);return h});f.add("position-fixed-support",function(a,c){var e=g.body(c),f=b.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},e,"last"),n=b.create("span",{style:{position:"fixed",left:"0",top:"0"}},f,"last"),h=d.position(n).x!=d.position(f).x;f.removeChild(n);e.removeChild(f);return h});var a={getBox:function(b){b=b||g.doc;var c="BackCompat"==b.compatMode?g.body(b):b.documentElement,e=d.docScroll(b);if(f("touch")){var h=a.get(b);b=h.innerWidth||c.clientWidth;c=h.innerHeight||c.clientHeight}else b=c.clientWidth,c=c.clientHeight;return{l:e.x,t:e.y,w:b,h:c}},get:function(b){if(f("ie")&&
a!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var c=b._parentWindow;b._parentWindow=null;return c}return b.parentWindow||b.defaultView},scrollIntoView:function(a,b){try{a=e.byId(a);var m=a.ownerDocument||g.doc,h=g.body(m),n=m.documentElement||h.parentNode,p=f("ie")||f("trident"),r=f("webkit");if(!(a==h||a==n))if(!f("mozilla")&&(!p&&!r&&!f("opera")&&!f("trident")&&!f("edge"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var s="BackCompat"==
m.compatMode,t=Math.min(h.clientWidth||n.clientWidth,n.clientWidth||h.clientWidth),u=Math.min(h.clientHeight||n.clientHeight,n.clientHeight||h.clientHeight),m=r||s?h:n,v=b||d.position(a),w=a.parentNode,r=function(a){return 6>=p||7==p&&s?!1:f("position-fixed-support")&&"fixed"==c.get(a,"position").toLowerCase()},x=this,B=function(a,b,c){"BODY"==a.tagName||"HTML"==a.tagName?x.get(a.ownerDocument).scrollBy(b,c):(b&&(a.scrollLeft+=b),c&&(a.scrollTop+=c))};if(!r(a))for(;w;){w==h&&(w=m);var A=d.position(w),
D=r(w),F="rtl"==c.getComputedStyle(w).direction.toLowerCase();if(w==m){A.w=t;A.h=u;if(m==n&&(p||f("trident"))&&F)A.x+=m.offsetWidth-A.w;A.x=0;A.y=0}else{var H=d.getPadBorderExtents(w);A.w-=H.w;A.h-=H.h;A.x+=H.l;A.y+=H.t;var L=w.clientWidth,N=A.w-L;0<L&&0<N&&(F&&f("rtl-adjust-position-for-verticalScrollBar")&&(A.x+=N),A.w=L);L=w.clientHeight;N=A.h-L;0<L&&0<N&&(A.h=L)}D&&(0>A.y&&(A.h+=A.y,A.y=0),0>A.x&&(A.w+=A.x,A.x=0),A.y+A.h>u&&(A.h=u-A.y),A.x+A.w>t&&(A.w=t-A.x));var M=v.x-A.x,P=v.y-A.y,Q=M+v.w-A.w,
O=P+v.h-A.h,I,E;if(0<Q*M&&(w.scrollLeft||w==m||w.scrollWidth>w.offsetHeight)){I=Math[0>M?"max":"min"](M,Q);if(F&&(8==p&&!s||5<=f("trident")))I=-I;E=w.scrollLeft;B(w,I,0);I=w.scrollLeft-E;v.x-=I}if(0<O*P&&(w.scrollTop||w==m||w.scrollHeight>w.offsetHeight))I=Math.ceil(Math[0>P?"max":"min"](P,O)),E=w.scrollTop,B(w,0,I),I=w.scrollTop-E,v.y-=I;w=w!=m&&!D&&w.parentNode}}}catch(K){console.error("scrollIntoView: "+K),a.scrollIntoView(!1)}}};h.setObject("dojo.window",a);return a})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(h,f,g,e,d,c,b){var a={_isElementShown:function(a){var b=e.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=g.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return g.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(d){try{b=a.contentWindow.document.body}catch(e){return!1}}return b&&
("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(b){return g.get(b,"disabled")?void 0:g.has(b,"tabIndex")?+g.get(b,"tabIndex"):a.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=a.effectiveTabIndex(b)},isFocusable:function(b){return-1<=a.effectiveTabIndex(b)},_getTabNavigable:function(b){function d(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var e,f,n,h,r,s,t={},u=a._isElementShown,v=a.effectiveTabIndex,w=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=c("ie")&&"HTML"!==a.scopeName||!u(a))){var b=v(a);if(0<=b){if(0==b)e||(e=a),f=a;else if(0<b){if(!n||b<h)h=b,n=a;if(!r||b>=s)s=b,r=a}b=d(a);g.get(a,"checked")&&b&&(t[b]=a)}"SELECT"!=a.nodeName.toUpperCase()&&w(a)}};u(b)&&w(b);return{first:t[d(e)]||e,last:t[d(f)]||f,lowest:t[d(n)]||n,highest:t[d(r)]||r}},getFirstInTabbingOrder:function(b,
c){var d=a._getTabNavigable(f.byId(b,c));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(b,c){var d=a._getTabNavigable(f.byId(b,c));return d.last?d.last:d.highest}};d.mixin(b,a);return a})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(h,f,g,e,d){var c=d.doc.documentElement;d=e("ie");var b=e("trident"),a=e("opera"),k=Math.floor,l=e("ff"),m=h.boxModel.replace(/-/,""),a={dj_quirks:e("quirks"),dj_opera:a,dj_khtml:e("khtml"),
dj_webkit:e("webkit"),dj_safari:e("safari"),dj_chrome:e("chrome"),dj_edge:e("edge"),dj_gecko:e("mozilla"),dj_ios:e("ios"),dj_android:e("android")};d&&(a.dj_ie=!0,a["dj_ie"+k(d)]=!0,a.dj_iequirks=e("quirks"));b&&(a.dj_trident=!0,a["dj_trident"+k(b)]=!0);l&&(a["dj_ff"+k(l)]=!0);a["dj_"+m]=!0;var q="",n;for(n in a)a[n]&&(q+=n+" ");c.className=f.trim(c.className+" "+q);g(function(){if(!h.isBodyLtr()){var a="dj_rtl dijitRtl "+q.replace(/ /g,"-rtl ");c.className=f.trim(c.className+" "+a+"dj_rtl dijitRtl "+
q.replace(/ /g,"-rtl "))}});return e})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(h,f,g,e){g(function(){f("highcontrast")&&h.add(e.body(),"dijit_a11y")});return f})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(h,f,g,e,d,c,b){d.add("highcontrast",function(){var a=b.doc.createElement("div");try{a.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+
(f.blankGif||h.toUrl("./resources/blank.gif"))+'");';b.body().appendChild(a);var c=e.getComputedStyle(a),g=c.backgroundImage;return c.borderTopColor==c.borderRightColor||g&&("none"==g||"url(invalid-url:)"==g)}catch(m){return!1}finally{8>=d("ie")?a.outerHTML="":b.body().removeChild(a)}});c(function(){d("highcontrast")&&g.add(b.body(),"dj_a11y")});return d})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(h,f,g,e){return f("dijit._Container",
null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(d,c){var b=this.containerNode;if(0<c){for(b=b.firstChild;0<c;)1==b.nodeType&&c--,b=b.nextSibling;b?c="before":(b=this.containerNode,c="last")}g.place(d.domNode,b,c);this._started&&!d._started&&d.startup()},removeChild:function(d){"number"==typeof d&&(d=this.getChildren()[d]);d&&(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},hasChildren:function(){return 0<this.getChildren().length},
_getSiblingOfChild:function(d,c){var b=this.getChildren(),a=h.indexOf(b,d);return b[a+c]},getIndexOfChild:function(d){return h.indexOf(this.getChildren(),d)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(h,f,g,e,d,c,b,a,k,l){return f("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=
this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(k.on("resize",c.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var c=[],d=!1;b("\x3e *",this.containerNode).some(function(b){var k=a.byNode(b);k&&k.resize?c.push(k):!/script|link|style/i.test(b.nodeName)&&b.offsetHeight&&(d=!0)});this._singleChild=1==c.length&&!d?c[0]:null;
g.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&e.setMarginBox(this.domNode,a);var d=this.containerNode;if(d===this.domNode){var k=b||{};c.mixin(k,a||{});if(!("h"in k)||!("w"in k))k=
c.mixin(e.getMarginBox(d),k);this._contentBox=l.marginBox2contentBox(d,k)}else this._contentBox=e.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||e.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,c=0;b=a[c++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?
this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!g.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(h,f,g,e,d){var c=
new h,b;g(function(){var a=d.getBox();c._rlh=f(window,"resize",function(){var b=d.getBox();a.h==b.h&&a.w==b.w||(a=b,c.emit("resize"))});if(8==e("ie")){var k=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=k&&(k=screen.deviceXDPI,c.emit("resize"))},500)}e("ios")&&(f(document,"focusin",function(a){b=a.target}),f(document,"focusout",function(a){b=null}))});c.getEffectiveBox=function(a){a=d.getBox(a);var c=b&&b.tagName&&b.tagName.toLowerCase();if(e("ios")&&b&&!b.readOnly&&("textarea"==c||
"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(b.type)))a.h*=0==orientation||180==orientation?0.66:0.4,c=b.getBoundingClientRect(),a.h=Math.max(a.h,c.top+c.height);return a};return c})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(h,f,g,e,d){function c(a,b){var c=a.resize?a.resize(b):g.setMarginBox(a.domNode,b);c?d.mixin(a,c):(d.mixin(a,g.getMarginBox(a.domNode)),d.mixin(a,b))}var b=
{marginBox2contentBox:function(a,b){var c=e.getComputedStyle(a),d=g.getMarginExtents(a,c),f=g.getPadBorderExtents(a,c);return{l:e.toPixelValue(a,c.paddingLeft),t:e.toPixelValue(a,c.paddingTop),w:b.w-(d.w+f.w),h:b.h-(d.h+f.h)}},layoutChildren:function(a,b,e,g,q){b=d.mixin({},b);f.add(a,"dijitLayoutContainer");e=h.filter(e,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(h.filter(e,function(a){return"center"==a.region||"client"==a.layoutAlign}));h.forEach(e,function(a){var d=a.domNode,
e=a.region||a.layoutAlign;if(!e)throw Error("No region setting for "+a.id);var l=d.style;l.left=b.l+"px";l.top=b.t+"px";l.position="absolute";f.add(d,"dijitAlign"+(e.substring(0,1).toUpperCase()+e.substring(1)));d={};g&&g==a.id&&(d["top"==a.region||"bottom"==a.region?"h":"w"]=q);"leading"==e&&(e=a.isLeftToRight()?"left":"right");"trailing"==e&&(e=a.isLeftToRight()?"right":"left");"top"==e||"bottom"==e?(d.w=b.w,c(a,d),b.h-=a.h,"top"==e?b.t+=a.h:l.top=b.t+b.h+"px"):"left"==e||"right"==e?(d.h=b.h,c(a,
d),b.w-=a.w,"left"==e?b.l+=a.w:l.left=b.l+b.w+"px"):("client"==e||"center"==e)&&c(a,b)})}};d.setObject("dijit.layout.utils",b);return b})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(h,f){var g=/[&<>'"\/]/g,e={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},d={};f.setObject("dojo.string",d);d.escape=function(c){return!c?"":c.replace(g,function(b){return e[b]})};d.rep=function(c,b){if(0>=b||!c)return"";for(var a=[];;){b&
1&&a.push(c);if(!(b>>=1))break;c+=c}return a.join("")};d.pad=function(c,b,a,k){a||(a="0");c=String(c);b=d.rep(a,Math.ceil((b-c.length)/a.length));return k?c+b:b+c};d.substitute=function(c,b,a,d){d=d||h.global;a=a?f.hitch(d,a):function(a){return a};return c.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(c,e,g){if(""==e)return"$";c=f.getObject(e,!1,b);g&&(c=f.getObject(g,!1,d).call(d,c,e));return a(c,e).toString()})};d.trim=String.prototype.trim?f.trim:function(c){c=c.replace(/^\s+/,"");
for(var b=c.length-1;0<=b;b--)if(/\S/.test(c.charAt(b))){c=c.substring(0,b+1);break}return c};return d})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(h,f,g,e,d,c,b){var a=0,k={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:c.empty,_setNodeContent:function(a,b){c.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),"string"==
typeof b&&(b=c.toDom(b,a.ownerDocument)),!b.nodeType&&f.isArrayLike(b))for(var d=b.length,k=0;k<b.length;k=d==b.length?k+1:0)c.place(b[k],a,"last");else c.place(b,a,"last");return a},_ContentSetter:e("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:h._scopeName,startup:!0,constructor:function(b,c){f.mixin(this,b||{});c=this.node=d.byId(this.node||c);this.id||(this.id=["Setter",c?c.id||c.tagName:"",a++].join("_"))},set:function(a,
b){void 0!==a&&(this.content=a);b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=k._setNodeContent(a,this.content)}catch(b){var c=this.onContentError(b);try{a.innerHTML=c}catch(d){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+d.message,d)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||
this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(g.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);c.empty(this.node)},onBegin:function(){var a=this.content;if(f.isString(a)&&(this.cleanContent&&(a=k._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();
return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var c={};g.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=b.parse({rootNode:a,
noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(k){this._onError("Content",k,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&k._setNodeContent(this.node,a,!0)}}),set:function(a,b,c){void 0==b&&(b="");"number"==typeof b&&(b=b.toString());return c?(new k._ContentSetter(f.mixin(c,
{content:b,node:a}))).set():k._setNodeContent(a,b,!0)}};f.setObject("dojo.html",k);return k})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){function t(a){return eval("("+a+")")}function u(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<w){var b=a._nameCaseMap={},d;for(d in c)"_"!==
d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=w}return b}function v(a,b){b||(b=h);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),d=a.join();if(!c[d]){for(var k=[],e=0,f=a.length;e<f;e++){var l=a[e];k[k.length]=c[l]=c[l]||g.getObject(l)||~l.indexOf("/")&&b(l)}e=k.shift();c[d]=k.length?e.createSubclass?e.createSubclass(k):e.extend.apply(e,k):e}return c[d]}new Date("X");var w=0;k.after(g,"extend",function(){w++},!0);var x={_clearCache:function(){w++;_ctorMap={}},_functionFromScript:function(a,
b){var c="",d="",k=a.getAttribute(b+"args")||a.getAttribute("args"),f=a.getAttribute("with"),k=(k||"").split(/\s*,\s*/);f&&f.length&&e.forEach(f.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(k,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||f._scopeName)+"Type",k="data-"+(c.scope||f._scopeName)+"-",g=k+"type",l=k+"mixins",m=[];e.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(g)||a.getAttribute(d);if(c){var k=a.getAttribute(l),c=k?
[c].concat(k.split(/\s*,\s*/)):[c];m.push({node:a,types:c})}});return this._instantiate(m,b,c)},_instantiate:function(a,b,c,d){function k(a){!b._started&&!c.noStart&&e.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=e.map(a,function(a){var d=a.ctor||v(a.types,c.contextRequire);if(!d)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(d,a.node,b,c,a.scripts,a.inherited)},this);return d?l(a).then(k):k(a)},construct:function(b,
c,d,l,h,q){function s(a){Y&&g.setObject(Y,a);for(E=0;E<U.length;E++)k[U[E].advice||"after"](a,U[E].method,g.hitch(a,U[E].func),!0);for(E=0;E<ea.length;E++)ea[E].call(a);for(E=0;E<W.length;E++)a.watch(W[E].prop,W[E].func);for(E=0;E<aa.length;E++)r(a,aa[E].event,aa[E].func);return a}var v=b&&b.prototype;l=l||{};var w={};l.defaults&&g.mixin(w,l.defaults);q&&g.mixin(w,q);var x;n("dom-attributes-explicit")?x=c.attributes:n("dom-attributes-specified-flag")?x=e.filter(c.attributes,function(a){return a.specified}):
(q=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),x=e.map(q.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var O=l.scope||f._scopeName;q="data-"+O+"-";var I={};"dojo"!==O&&(I[q+"props"]="data-dojo-props",I[q+"type"]="data-dojo-type",I[q+"mixins"]="data-dojo-mixins",I[O+"type"]=
"dojotype",I[q+"id"]="data-dojo-id");for(var E=0,K,O=[],Y,Z;K=x[E++];){var S=K.name,V=S.toLowerCase();K=K.value;switch(I[V]||V){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":Z=K;break;case "data-dojo-id":case "jsid":Y=K;break;case "data-dojo-attach-point":case "dojoattachpoint":w.dojoAttachPoint=K;break;case "data-dojo-attach-event":case "dojoattachevent":w.dojoAttachEvent=K;break;case "class":w["class"]=c.className;break;case "style":w.style=c.style&&
c.style.cssText;break;default:if(S in v||(S=u(b)[V]||S),S in v)switch(typeof v[S]){case "string":w[S]=K;break;case "number":w[S]=K.length?Number(K):NaN;break;case "boolean":w[S]="false"!=K.toLowerCase();break;case "function":""===K||-1!=K.search(/[^\w\.]+/i)?w[S]=new Function(K):w[S]=g.getObject(K,!1)||new Function(K);O.push(S);break;default:V=v[S],w[S]=V&&"length"in V?K?K.split(/\s*,\s*/):[]:V instanceof Date?""==K?new Date(""):"now"==K?new Date:m.fromISOString(K):V instanceof a?f.baseUrl+K:t(K)}else w[S]=
K}}for(x=0;x<O.length;x++)I=O[x].toLowerCase(),c.removeAttribute(I),c[I]=null;if(Z)try{Z=t.call(l.propsThis,"{"+Z+"}"),g.mixin(w,Z)}catch(ha){throw Error(ha.toString()+" in data-dojo-props\x3d'"+Z+"'");}g.mixin(w,d);h||(h=b&&(b._noScript||v._noScript)?[]:p("\x3e script[type^\x3d'dojo/']",c));var U=[],ea=[],W=[],aa=[];if(h)for(E=0;E<h.length;E++)I=h[E],c.removeChild(I),d=I.getAttribute(q+"event")||I.getAttribute("event"),l=I.getAttribute(q+"prop"),Z=I.getAttribute(q+"method"),O=I.getAttribute(q+"advice"),
x=I.getAttribute("type"),I=this._functionFromScript(I,q),d?"dojo/connect"==x?U.push({method:d,func:I}):"dojo/on"==x?aa.push({event:d,func:I}):w[d]=I:"dojo/aspect"==x?U.push({method:Z,advice:O,func:I}):"dojo/watch"==x?W.push({prop:l,func:I}):ea.push(I);b=(h=b.markupFactory||v.markupFactory)?h(w,c,b):new b(w,c);return b.then?b.then(s):s(b)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,
textDir:b.getAttribute(p)||d.textDir},k;for(k in b)b[k]&&(a.inherited[k]=b[k])}return a.inherited}var d=[],k=[],g={},l=(b.scope||f._scopeName)+"Type",m="data-"+(b.scope||f._scopeName)+"-",n=m+"type",p=m+"textdir",m=m+"mixins",r=a.firstChild,s=b.inherited;if(!s){var t=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&t(a.parentNode,b)},s={dir:t(a,"dir"),lang:t(a,"lang"),textDir:t(a,p)},u;for(u in s)s[u]||delete s[u]}for(var s={inherited:s},w,x;;)if(r)if(1!=r.nodeType)r=r.nextSibling;
else if(w&&"script"==r.nodeName.toLowerCase())(S=r.getAttribute("type"))&&/^dojo\/\w/i.test(S)&&w.push(r),r=r.nextSibling;else if(x)r=r.nextSibling;else{var S=r.getAttribute(n)||r.getAttribute(l);u=r.firstChild;if(!S&&(!u||3==u.nodeType&&!u.nextSibling))r=r.nextSibling;else{x=null;if(S){var V=r.getAttribute(m);w=V?[S].concat(V.split(/\s*,\s*/)):[S];try{x=v(w,b.contextRequire)}catch(ha){}x||e.forEach(w,function(a){~a.indexOf("/")&&!g[a]&&(g[a]=!0,k[k.length]=a)});V=x&&!x.prototype._noScript?[]:null;
s={types:w,ctor:x,parent:s,node:r,scripts:V};s.inherited=c(s);d.push(s)}else s={node:r,scripts:w,parent:s};w=V;x=r.stopParser||x&&x.prototype.stopParser&&!b.template;r=u}}else{if(!s||!s.node)break;r=s.node.nextSibling;x=!1;s=s.parent;w=s.scripts}var U=new q;k.length?(b.contextRequire||h)(k,function(){U.resolve(e.filter(d,function(a){if(!a.ctor)try{a.ctor=v(a.types,b.contextRequire)}catch(c){}for(var d=a.parent;d&&!d.types;)d=d.parent;var k=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(k&&k.stopParser&&
!b.template);a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))}):U.resolve(d);return U.promise},_require:function(a,b){var c=t("{"+a.innerHTML+"}"),d=[],k=[],e=new q,f=b&&b.contextRequire||h,l;for(l in c)d.push(l),k.push(c[l]);f(k,function(){for(var a=0;a<d.length;a++)g.setObject(d[a],arguments[a]);e.resolve(arguments)});return e.promise},_scanAmd:function(a,b){var c=new q,d=c.promise;c.resolve(!0);var k=this;p("script[type\x3d'dojo/require']",a).forEach(function(a){d=
d.then(function(){return k._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,d){a&&("string"!=typeof a&&!("nodeType"in a))&&(d=a,a=d.rootNode);var k=a?c.byId(a):b.body();d=d||{};var e=d.template?{template:!0}:{},f=[],l=this,m=this._scanAmd(k,d).then(function(){return l.scan(k,d)}).then(function(a){return l._instantiate(a,e,d,!0)}).then(function(a){return f=f.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});g.mixin(f,m);return f}};f.parser=
x;d.parseOnLoad&&s(100,x,"parse");return x})},"dojo/_base/url":function(){define(["./kernel"],function(h){var f=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,g=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,e=function(){for(var d=arguments,c=[d[0]],b=1;b<d.length;b++)if(d[b]){var a=new e(d[b]+""),c=new e(c[0]+"");if(""==a.path&&!a.scheme&&!a.authority&&!a.query)null!=a.fragment&&(c.fragment=a.fragment),a=c;else if(!a.scheme&&(a.scheme=c.scheme,!a.authority&&(a.authority=
c.authority,"/"!=a.path.charAt(0)))){for(var c=(c.path.substring(0,c.path.lastIndexOf("/")+1)+a.path).split("/"),k=0;k<c.length;k++)"."==c[k]?k==c.length-1?c[k]="":(c.splice(k,1),k--):0<k&&(!(1==k&&""==c[0])&&".."==c[k]&&".."!=c[k-1])&&(k==c.length-1?(c.splice(k,1),c[k-1]=""):(c.splice(k-1,2),k-=2));a.path=c.join("/")}c=[];a.scheme&&c.push(a.scheme,":");a.authority&&c.push("//",a.authority);c.push(a.path);a.query&&c.push("?",a.query);a.fragment&&c.push("#",a.fragment)}this.uri=c.join("");d=this.uri.match(f);
this.scheme=d[2]||(d[1]?"":null);this.authority=d[4]||(d[3]?"":null);this.path=d[5];this.query=d[7]||(d[6]?"":null);this.fragment=d[9]||(d[8]?"":null);null!=this.authority&&(d=this.authority.match(g),this.user=d[3]||null,this.password=d[4]||null,this.host=d[6]||d[7],this.port=d[9]||null)};e.prototype.toString=function(){return this.uri};return h._Url=e})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(h,f,g){var e=h.some;return function(d){var c,b;d instanceof
Array?b=d:d&&"object"===typeof d&&(c=d);var a,k=[];if(c){b=[];for(var l in c)Object.hasOwnProperty.call(c,l)&&(k.push(l),b.push(c[l]));a={}}else b&&(a=[]);if(!b||!b.length)return(new f).resolve(a);var m=new f;m.promise.always(function(){a=k=null});var h=b.length;e(b,function(b,d){c||k.push(d);g(b,function(b){m.isFulfilled()||(a[k[d]]=b,0===--h&&m.resolve(a))},m.reject);return m.isFulfilled()});return m.promise}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(h,f){var g=
{};h.setObject("dojo.date.stamp",g);g.fromISOString=function(e,d){g._isoRegExp||(g._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var c=g._isoRegExp.exec(e),b=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);d&&(d=new Date(d),f.forEach(f.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return d["get"+a]()}),function(a,b){c[b]=c[b]||a}));b=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||
0,c[5]||0,c[6]||0);100>c[0]&&b.setFullYear(c[0]||1970);var a=0,k=c[7]&&c[7].charAt(0);"Z"!=k&&(a=60*(c[8]||0)+(Number(c[9])||0),"-"!=k&&(a*=-1));k&&(a-=b.getTimezoneOffset());a&&b.setTime(b.getTime()+6E4*a)}return b};g.toISOString=function(e,d){var c=function(a){return 10>a?"0"+a:a};d=d||{};var b=[],a=d.zulu?"getUTC":"get",k="";"time"!=d.selector&&(k=e[a+"FullYear"](),k=["0000".substr((k+"").length)+k,c(e[a+"Month"]()+1),c(e[a+"Date"]())].join("-"));b.push(k);if("date"!=d.selector){k=[c(e[a+"Hours"]()),
c(e[a+"Minutes"]()),c(e[a+"Seconds"]())].join(":");a=e[a+"Milliseconds"]();d.milliseconds&&(k+="."+(100>a?"0":"")+c(a));if(d.zulu)k+="Z";else if("time"!=d.selector)var a=e.getTimezoneOffset(),f=Math.abs(a),k=k+((0<a?"-":"+")+c(Math.floor(f/60))+":"+c(f%60));b.push(k)}return b.join("T")};return g})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(h,f,g,e,d,c,b){var a=function(){},k=Object.freeze||function(){},
l=h.Deferred=function(b){function h(a){if(r)throw Error("This deferred has already been resolved");p=a;r=!0;n()}function n(){for(var b;!b&&w;){var k=w;w=w.next;if(b=k.progress==a)r=!1;var e=u?k.error:k.resolved;d("config-useDeferredInstrumentation")&&u&&f.instrumentRejected&&f.instrumentRejected(p,!!e);if(e)try{var g=e(p);g&&"function"===typeof g.then?g.then(c.hitch(k.deferred,"resolve"),c.hitch(k.deferred,"reject"),c.hitch(k.deferred,"progress")):(e=b&&void 0===g,b&&!e&&(u=g instanceof Error),k.deferred[e&&
u?"reject":"resolve"](e?p:g))}catch(l){k.deferred.reject(l)}else u?k.deferred.reject(p):k.deferred.resolve(p)}}var p,r,s,t,u,v,w,x=this.promise=new g;this.isResolved=x.isResolved=function(){return 0==t};this.isRejected=x.isRejected=function(){return 1==t};this.isFulfilled=x.isFulfilled=function(){return 0<=t};this.isCanceled=x.isCanceled=function(){return s};this.resolve=this.callback=function(a){this.fired=t=0;this.results=[a,null];h(a)};this.reject=this.errback=function(a){u=!0;this.fired=t=1;d("config-useDeferredInstrumentation")&&
f.instrumentRejected&&f.instrumentRejected(a,!!w);h(a);this.results=[null,a]};this.progress=function(a){for(var b=w;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(b,c){this.then(b,c,a);return this};x.then=this.then=function(b,c,d){var k=d==a?this:new l(x.cancel);b={resolved:b,error:c,progress:d,deferred:k};w?v=v.next=b:w=v=b;r&&n();return k.promise};var B=this;x.cancel=this.cancel=function(){if(!r){var a=b&&b(B);r||(a instanceof Error||(a=new e(a)),a.log=!1,B.reject(a))}s=!0};
k(x)};c.extend(l,{addCallback:function(a){return this.addCallbacks(c.hitch.apply(h,arguments))},addErrback:function(a){return this.addCallbacks(null,c.hitch.apply(h,arguments))},addBoth:function(a){var b=c.hitch.apply(h,arguments);return this.addCallbacks(b,b)},fired:-1});l.when=h.when=b;return l})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){h._xhrObj=r._create;var t=h.config;h.objectToQuery=e.objectToQuery;h.queryToObject=e.queryToObject;h.fieldToObject=c.fieldToObject;h.formToObject=c.toObject;h.formToQuery=c.toQuery;h.formToJson=c.toJson;h._blockAsync=!1;var u=h._contentHandlers=h.contentHandlers={text:function(a){return a.responseText},json:function(a){return k.fromJson(a.responseText||null)},"json-comment-filtered":function(a){a=a.responseText;var b=a.indexOf("/*"),c=a.lastIndexOf("*/");
if(-1==b||-1==c)throw Error("JSON was not comment filtered");return k.fromJson(a.substring(b+2,c))},javascript:function(a){return h.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&(f("dom-qsa2.1")&&!b.querySelectorAll&&f("dom-parser"))&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(f("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];m.some(c,function(c){try{var d=new ActiveXObject(c);
d.async=!1;d.loadXML(a.responseText);b=d}catch(k){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?u["json-comment-filtered"](a):u.json(a)}};h._ioSetArgs=function(a,k,f,g){var m={args:a,url:a.url},n=null;if(a.form){var n=d.byId(a.form),q=n.getAttributeNode("action");m.url=m.url||(q?q.value:h.doc?h.doc.URL:null);n=c.toObject(n)}q=[{}];n&&q.push(n);a.content&&q.push(a.content);a.preventCache&&q.push({"dojo.preventCache":(new Date).valueOf()});
m.query=e.objectToQuery(l.mixin.apply(null,q));m.handleAs=a.handleAs||"text";var p=new b(function(a){a.canceled=!0;k&&k(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});p.addCallback(f);var r=a.load;r&&l.isFunction(r)&&p.addCallback(function(b){return r.call(a,b,m)});var s=a.error;s&&l.isFunction(s)&&p.addErrback(function(b){return s.call(a,b,m)});var u=a.handle;u&&l.isFunction(u)&&p.addBoth(function(b){return u.call(a,b,m)});p.addErrback(function(a){return g(a,
p)});t.ioPublish&&(h.publish&&!1!==m.args.ioPublish)&&(p.addCallbacks(function(a){h.publish("/dojo/io/load",[p,a]);return a},function(a){h.publish("/dojo/io/error",[p,a]);return a}),p.addBoth(function(a){h.publish("/dojo/io/done",[p,a]);return a}));p.ioArgs=m;return p};var v=function(a){a=u[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},w=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},x=function(a){0>=B&&(B=0,t.ioPublish&&(h.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish))&&
h.publish("/dojo/io/stop"))},B=0;n.after(p,"_onAction",function(){B-=1});n.after(p,"_onInFlight",x);h._ioCancelAll=p.cancelAll;h._ioNotifyStart=function(a){t.ioPublish&&(h.publish&&!1!==a.ioArgs.args.ioPublish)&&(B||h.publish("/dojo/io/start"),B+=1,h.publish("/dojo/io/send",[a]))};h._ioWatch=function(a,b,c,d){a.ioArgs.options=a.ioArgs.args;l.mixin(a,{response:a.ioArgs,isValid:function(c){return b(a)},isReady:function(b){return c(a)},handleResponse:function(b){return d(a)}});p(a);x(a)};h._ioAddQueryToUrl=
function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};h.xhr=function(a,b,c){var d,k=h._ioSetArgs(b,function(a){d&&d.cancel()},v,w),e=k.ioArgs;"postData"in b?e.query=b.postData:"putData"in b?e.query=b.putData:"rawBody"in b?e.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&h._ioAddQueryToUrl(e);var f={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:e};"undefined"!==typeof b.headers&&(f.headers=
b.headers);"undefined"!==typeof b.contentType&&(f.headers||(f.headers={}),f.headers["Content-Type"]=b.contentType);"undefined"!==typeof e.query&&(f.data=e.query);"undefined"!==typeof b.sync&&(f.sync=b.sync);h._ioNotifyStart(k);try{d=r(e.url,f,!0)}catch(g){return k.cancel(),k}k.ioArgs.xhr=d.response.xhr;d.then(function(){k.resolve(k)}).otherwise(function(a){e.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);k.reject(a)});return k};h.xhrGet=function(a){return h.xhr("GET",
a)};h.rawXhrPost=h.xhrPost=function(a){return h.xhr("POST",a,!0)};h.rawXhrPut=h.xhrPut=function(a){return h.xhr("PUT",a,!0)};h.xhrDelete=function(a){return h.xhr("DELETE",a)};h._isDocumentOk=function(a){return s.checkStatus(a.status)};h._getText=function(a){var b;h.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};l.mixin(h.xhr,{_xhrObj:h._xhrObj,fieldToObject:c.fieldToObject,formToObject:c.toObject,objectToQuery:e.objectToQuery,formToQuery:c.toQuery,formToJson:c.toJson,queryToObject:e.queryToObject,
contentHandlers:u,_ioSetArgs:h._ioSetArgs,_ioCancelAll:h._ioCancelAll,_ioNotifyStart:h._ioNotifyStart,_ioWatch:h._ioWatch,_ioAddQueryToUrl:h._ioAddQueryToUrl,_isDocumentOk:h._isDocumentOk,_getText:h._getText,get:h.xhrGet,post:h.xhrPost,put:h.xhrPut,del:h.xhrDelete});return h.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(h){var f={};return{objectToQuery:function(g){var e=encodeURIComponent,d=[],c;for(c in g){var b=g[c];if(b!=f[c]){var a=e(c)+"\x3d";if(h.isArray(b))for(var k=0,
l=b.length;k<l;++k)d.push(a+e(b[k]));else d.push(a+e(b))}}return d.join("\x26")},queryToObject:function(f){var e=decodeURIComponent;f=f.split("\x26");for(var d={},c,b,a=0,k=f.length;a<k;++a)if(b=f[a],b.length){var l=b.indexOf("\x3d");0>l?(c=e(b),b=""):(c=e(b.slice(0,l)),b=e(b.slice(l+1)));"string"==typeof d[c]&&(d[c]=[d[c]]);h.isArray(d[c])?d[c].push(b):d[c]=b}return d}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(h,f,g,e){var d={fieldToObject:function(c){var b=
null;if(c=f.byId(c)){var a=c.name,d=(c.type||"").toLowerCase();if(a&&d&&!c.disabled)if("radio"==d||"checkbox"==d)c.checked&&(b=c.value);else if(c.multiple){b=[];for(c=[c.firstChild];c.length;)for(a=c.pop();a;a=a.nextSibling)if(1==a.nodeType&&"option"==a.tagName.toLowerCase())a.selected&&b.push(a.value);else{a.nextSibling&&c.push(a.nextSibling);a.firstChild&&c.push(a.firstChild);break}}else b=c.value}return b},toObject:function(c){var b={};c=f.byId(c).elements;for(var a=0,k=c.length;a<k;++a){var e=
c[a],g=e.name,q=(e.type||"").toLowerCase();if(g&&q&&0>"file|submit|image|reset|button".indexOf(q)&&!e.disabled){var n=b,p=g,e=d.fieldToObject(e);if(null!==e){var r=n[p];"string"==typeof r?n[p]=[r,e]:h.isArray(r)?r.push(e):n[p]=e}"image"==q&&(b[g+".x"]=b[g+".y"]=b[g].x=b[g].y=0)}}return b},toQuery:function(c){return g.objectToQuery(d.toObject(c))},toJson:function(c,b){return e.stringify(d.toObject(c),null,b?4:0)}};return d})},"dojo/json":function(){define(["./has"],function(h){var f="undefined"!=typeof JSON;
h.add("json-parse",f);h.add("json-stringify",f&&'{"a":1}'==JSON.stringify({a:0},function(e,d){return d||1}));if(h("json-stringify"))return JSON;var g=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:h("json-parse")?JSON.parse:function(e,d){if(d&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(e))throw new SyntaxError("Invalid characters in JSON");
return eval("("+e+")")},stringify:function(e,d,c){function b(k,e,f){d&&(k=d(f,k));var h;h=typeof k;if("number"==h)return isFinite(k)?k+"":"null";if("boolean"==h)return k+"";if(null===k)return"null";if("string"==typeof k)return g(k);if("function"==h||"undefined"==h)return a;if("function"==typeof k.toJSON)return b(k.toJSON(f),e,f);if(k instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,c){a=k["getUTC"+b]()+(c?1:0);return 10>a?"0"+
a:a});if(k.valueOf()!==k)return b(k.valueOf(),e,f);var n=c?e+c:"",p=c?" ":"",r=c?"\n":"";if(k instanceof Array){var p=k.length,s=[];for(f=0;f<p;f++)h=b(k[f],n,f),"string"!=typeof h&&(h="null"),s.push(r+n+h);return"["+s.join(",")+r+e+"]"}s=[];for(f in k){var t;if(k.hasOwnProperty(f)){if("number"==typeof f)t='"'+f+'"';else if("string"==typeof f)t=g(f);else continue;h=b(k[f],n,f);"string"==typeof h&&s.push(r+n+t+":"+p+h)}}return"{"+s.join(",")+r+e+"}"}var a;"string"==typeof d&&(c=d,d=null);return b(e,
"","")}}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(h,f){h.fromJson=function(f){return eval("("+f+")")};h._escapeString=f.stringify;h.toJsonIndentStr="\t";h.toJson=function(g,e){return f.stringify(g,function(d,c){if(c){var b=c.__json__||c.json;if("function"==typeof b)return b.call(c)}return c},e&&h.toJsonIndentStr)};return h})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
function(h,f,g,e,d,c){function b(){for(var b=+new Date,c=0,d;c<l.length&&(d=l[c]);c++){var e=d.response,g=e.options;if(d.isCanceled&&d.isCanceled()||d.isValid&&!d.isValid(e))l.splice(c--,1),a._onAction&&a._onAction();else if(d.isReady&&d.isReady(e))l.splice(c--,1),d.handleResponse(e),a._onAction&&a._onAction();else if(d.startTime&&d.startTime+(g.timeout||0)<b)l.splice(c--,1),d.cancel(new f("Timeout exceeded",e)),a._onAction&&a._onAction()}a._onInFlight&&a._onInFlight(d);l.length||(clearInterval(k),
k=null)}function a(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(l.push(a),k||(k=setInterval(b,50)),a.response.options.sync&&b())}var k=null,l=[];a.cancelAll=function(){try{e.forEach(l,function(a){try{a.cancel(new g("All requests canceled."))}catch(b){}})}catch(a){}};d&&(c&&d.doc.attachEvent)&&c(d.global,"unload",function(){a.cancelAll()});return a})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),
function(h,f,g,e,d,c,b,a){function k(a){return m(a)}function l(a){return void 0!==a.data?a.data:a.text}h.deepCopy=function(a,b){for(var c in b){var d=a[c],k=b[c];d!==k&&(d&&"object"===typeof d&&k&&"object"===typeof k?h.deepCopy(d,k):a[c]=k)}return a};h.deepCreate=function(a,c){c=c||{};var d=b.delegate(a),k,e;for(k in a)(e=a[k])&&"object"===typeof e&&(d[k]=h.deepCreate(e,c[k]));return h.deepCopy(d,c)};var m=Object.freeze||function(a){return a};h.deferred=function(c,d,p,r,s,t){var u=new e(function(a){d&&
d(u,c);return!a||!(a instanceof f)&&!(a instanceof g)?new g("Request canceled",c):a});u.response=c;u.isValid=p;u.isReady=r;u.handleResponse=s;p=u.then(k).otherwise(function(a){a.response=c;throw a;});h.notify&&p.then(b.hitch(h.notify,"emit","load"),b.hitch(h.notify,"emit","error"));r=p.then(l);s=new a;for(var v in r)r.hasOwnProperty(v)&&(s[v]=r[v]);s.response=p;m(s);t&&u.then(function(a){t.call(u,a)},function(a){t.call(u,c,a)});u.promise=s;u.then=s.then;return u};h.addCommonMethods=function(a,d){c.forEach(d||
["GET","POST","PUT","DELETE"],function(c){a[("DELETE"===c?"DEL":c).toLowerCase()]=function(d,k){k=b.delegate(k||{});k.method=c;return a(d,k)}})};h.parseArgs=function(a,b,c){var k=b.data,e=b.query;if(k&&!c&&"object"===typeof k&&!(k instanceof ArrayBuffer||k instanceof Blob))b.data=d.objectToQuery(k);e?("object"===typeof e&&(e=d.objectToQuery(e)),b.preventCache&&(e+=(e?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(e="request.preventCache\x3d"+ +new Date);a&&e&&(a+=(~a.indexOf("?")?
"\x26":"?")+e);return{url:a,options:b,getHeader:function(a){return null}}};h.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(h){return h("RequestError",function(f,g){this.response=g})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(h,f){return h("RequestTimeoutError",null,f,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError",
"./watch","./handlers","./util","../has"],function(h,f,g,e,d){function c(a,b){var c=a.xhr;a.status=a.xhr.status;try{a.text=c.responseText}catch(d){}"xml"===a.options.handleAs&&(a.data=c.responseXML);if(!b)try{g(a)}catch(k){b=k}var f;if(b)this.reject(b);else{try{g(a)}catch(l){f=l}e.checkStatus(c.status)?f?this.reject(f):this.resolve(a):(b=f?new h("Unable to load "+a.url+" status: "+c.status+" and an error in handleAs: transformation of response",a):new h("Unable to load "+a.url+" status: "+c.status,
a),this.reject(b))}}function b(a){return this.xhr.getResponseHeader(a)}function a(g,s,t){var x=d("native-formdata")&&s&&s.data&&s.data instanceof FormData,B=e.parseArgs(g,e.deepCreate(r,s),x);g=B.url;s=B.options;var A,D=e.deferred(B,n,l,m,c,function(){A&&A()}),F=B.xhr=a._create();if(!F)return D.cancel(new h("XHR was not created")),t?D:D.promise;B.getHeader=b;q&&(A=q(F,D,B));var H=s.data,L=!s.sync,N=s.method;try{F.open(N,g,L,s.user||p,s.password||p);s.withCredentials&&(F.withCredentials=s.withCredentials);
d("native-response-type")&&s.handleAs in k&&(F.responseType=k[s.handleAs]);var M=s.headers;g=x?!1:"application/x-www-form-urlencoded";if(M)for(var P in M)"content-type"===P.toLowerCase()?g=M[P]:M[P]&&F.setRequestHeader(P,M[P]);g&&!1!==g&&F.setRequestHeader("Content-Type",g);(!M||!("X-Requested-With"in M))&&F.setRequestHeader("X-Requested-With","XMLHttpRequest");e.notify&&e.notify.emit("send",B,D.promise.cancel);F.send(H)}catch(Q){D.reject(Q)}f(D);F=null;return t?D:D.promise}d.add("native-xhr",function(){return"undefined"!==
typeof XMLHttpRequest});d.add("dojo-force-activex-xhr",function(){return d("activex")&&"file:"===window.location.protocol});d.add("native-xhr2",function(){if(d("native-xhr")&&!d("dojo-force-activex-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});d.add("native-formdata",function(){return"undefined"!==typeof FormData});d.add("native-response-type",function(){return d("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});
d.add("native-xhr2-blob",function(){if(d("native-response-type")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var k={blob:d("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},l,m,q,n;d("native-xhr2")?(l=function(a){return!this.isFulfilled()},n=function(a,b){b.xhr.abort()},q=function(a,b,c){function d(a){b.handleResponse(c)}function k(a){a=new h("Unable to load "+c.url+" status: "+a.target.status,
c);b.handleResponse(c,a)}function e(a){a.lengthComputable?(c.loaded=a.loaded,c.total=a.total,b.progress(c)):3===c.xhr.readyState&&(c.loaded="loaded"in a?a.loaded:a.position,b.progress(c))}a.addEventListener("load",d,!1);a.addEventListener("error",k,!1);a.addEventListener("progress",e,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",k,!1);a.removeEventListener("progress",e,!1);a=null}}):(l=function(a){return a.xhr.readyState},m=function(a){return 4===a.xhr.readyState},
n=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||"object"===d||"unknown"===d)&&c.abort()});var p,r={data:null,query:null,sync:!1,method:"GET"};a._create=function(){throw Error("XMLHTTP not available");};if(d("native-xhr")&&!d("dojo-force-activex-xhr"))a._create=function(){return new XMLHttpRequest};else if(d("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),a._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(s){try{new ActiveXObject("Microsoft.XMLHTTP"),a._create=
function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}e.addCommonMethods(a);return a})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(h,f,g,e){function d(a){var b=l[a.options.handleAs];a.data=b?b(a):a.data||a.text;return a}e.add("activex","undefined"!==typeof ActiveXObject);e.add("dom-parser",function(a){return"DOMParser"in a});var c;if(e("activex")){var b=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0",
"MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],a;c=function(c){function d(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(f);k=c;a=b}catch(e){return!1}return!0}var k=c.data,f=c.text;k&&(e("dom-qsa2.1")&&!k.querySelectorAll&&e("dom-parser"))&&(k=(new DOMParser).parseFromString(f,"application/xml"));if(!k||!k.documentElement)(!a||!d(a))&&g.some(b,d);return k}}var k=function(a){return!e("native-xhr2-blob")&&"blob"===a.options.handleAs&&"undefined"!==typeof Blob?new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")}):
a.xhr.response},l={javascript:function(a){return f.eval(a.text||"")},json:function(a){return h.parse(a.text||null)},xml:c,blob:k,arraybuffer:k,document:k};d.register=function(a,b){l[a]=b};return d})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(h,f,g,e,d,c,b,a,k){g.add("dojo-preload-i18n-Api",1);b=h.i18n={};var l=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,m=function(a,b,c,d){var k=[c+d];b=b.split("-");
for(var e="",f=0;f<b.length;f++)if(e+=(e?"-":"")+b[f],!a||a[e])k.push(c+e+"/"+d),k.specificity=e;return k},q={},n=function(a,b,c){c=c?c.toLowerCase():h.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},p=h.getL10nName=function(a,b,c){return k.id+"!"+n(a,b,c)},r=function(a,b,d,k,e,f){a([b],function(g){var l=c.clone(g.root||g.ROOT),n=m(!g._v1x&&g,e,d,k);a(n,function(){for(var a=1;a<n.length;a++)l=c.mixin(c.clone(l),arguments[a]);q[b+"/"+e]=l;l.$locale=
n.specificity;f()})})},s=function(a){var b=d.extraLocale||[],b=c.isArray(b)?b:[b];b.push(a);return b},t=function(b,d,k){if(g("dojo-preload-i18n-Api")){var f=b.split("*"),m="preload"==f[1];m&&(q[b]||(q[b]=1,x(f[2],a.parse(f[3]),1,d)),k(1));if(!(f=m))v&&w.push([b,d,k]),f=v;if(f)return}b=l.exec(b);var n=b[1]+"/",p=b[5]||b[4],t=n+p,f=(b=b[5]&&b[4])||h.locale||"",u=t+"/"+f;b=b?[f]:s(f);var O=b.length,I=function(){--O||k(c.delegate(q[u]))};e.forEach(b,function(a){var b=t+"/"+a;g("dojo-preload-i18n-Api")&&
B(b);q[b]?I():r(d,t,n,p,a,I)})};g("dojo-preload-i18n-Api");var u=b.normalizeLocale=function(a){a=a?a.toLowerCase():h.locale;return"root"==a?"ROOT":a},v=0,w=[],x=b._preloadLocalizations=function(a,b,d,k){function g(a,b){k([a],b)}function l(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function m(){for(--v;!v&&w.length;)t.apply(null,w.shift())}function n(d){d=u(d);l(d,function(n){if(0<=e.indexOf(b,n)){var h=a.replace(/\./g,"/")+"_"+n;v++;g(h,function(a){for(var b in a){var e=
a[b],g=b.match(/(.+)\/([^\/]+)$/),h;if(g&&(h=g[2],g=g[1]+"/",e._localized)){var p;if("ROOT"===n){var r=p=e._localized;delete e._localized;r.root=e;q[f.toAbsMid(b)]=r}else p=e._localized,q[f.toAbsMid(g+h+"/"+n)]=e;n!==d&&function(a,b,e,g){var n=[],h=[];l(d,function(c){g[c]&&(n.push(f.toAbsMid(a+c+"/"+b)),h.push(f.toAbsMid(a+b+"/"+c)))});n.length?(v++,k(n,function(){for(var k=n.length-1;0<=k;k--)e=c.mixin(c.clone(e),arguments[k]),q[h[k]]=e;q[f.toAbsMid(a+b+"/"+d)]=c.clone(e);m()})):q[f.toAbsMid(a+b+
"/"+d)]=e}(g,h,e,p)}}m()});return!0}return!1})}k=k||f;n();e.forEach(h.config.extraLocale,n)},B=function(){};new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}");
B=function(a){for(var b,c=a.split("/"),d=h.global[c[0]],k=1;d&&k<c.length-1;d=d[c[k++]]);d&&((b=d[c[k]])||(b=d[c[k].replace(/-/g,"_")]),b&&(q[a]=b));return b};b.getLocalization=function(a,b,c){var d;a=n(a,b,c);t(a,f,function(a){d=a});return d};return c.mixin(b,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:t,cache:q,getL10nName:p})})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),
function(h,f,g,e,d,c,b,a,k){return c("dijit.layout._LayoutWidget",[f,g,e],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(d.on("resize",h.hitch(this,"resize")))}},resize:function(b,c){var d=this.domNode;b&&a.setMarginBox(d,b);var e=
c||{};h.mixin(e,b||{});if(!("h"in e)||!("w"in e))e=h.mixin(a.getMarginBox(d),e);var f=k.getComputedStyle(d),g=a.getMarginExtents(d,f),s=a.getBorderExtents(d,f),e=this._borderBox={w:e.w-(g.w+s.w),h:e.h-(g.h+s.h)},g=a.getPadExtents(d,f);this._contentBox={l:k.toPixelValue(d,f.paddingLeft),t:k.toPixelValue(d,f.paddingTop),w:e.w-g.w,h:e.h-g.h};this.layout()},layout:function(){},_setupChild:function(a){b.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,
b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){b.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(h,f){return h("dijit._Contained",null,{_getSibling:function(f){var e=this.getParent();return e&&e._getSiblingOfChild&&e._getSiblingOfChild(this,"previous"==f?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},
getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var f=this.getParent();return!f||!f.getIndexOfChild?-1:f.getIndexOfChild(this)}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(h,f,g,e,d,c,b,a){var k=f("dijit._TemplatedMixin",a,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var c=
this.declaredClass,d=this;return b.substitute(a,this,function(a,b){"!"==b.charAt(0)&&(a=e.getObject(b.substr(1),!1,d));if("undefined"==typeof a)throw Error(c+" template:"+b);return null==a?"":"!"==b.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=h(this.templatePath,
{sanitize:!0}));var a=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(e.isString(a)){if(b=g.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});k._templateCache={};k.getCachedTemplate=
function(a,c,d){var e=k._templateCache,f=a,h=e[f];if(h){try{if(!h.ownerDocument||h.ownerDocument==(d||document))return h}catch(s){}g.destroy(h)}a=b.trim(a);if(c||a.match(/\$\{([^\}]+)\}/g))return e[f]=a;c=g.toDom(a,d);if(1!=c.nodeType)throw Error("Invalid template: "+a);return e[f]=c};c("ie")&&d(window,"unload",function(){var a=k._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&g.destroy(c);delete a[b]}});return k})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(h){return h.cache})},
"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(h,f,g,e){var d;d=function(a,b,c){e(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(c)};var c={},b=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},a={},k={};h.cache=function(a,k,e){var g;"string"==typeof a?/\//.test(a)?(g=a,e=k):g=f.toUrl(a.replace(/\./g,"/")+(k?"/"+k:"")):(g=a+
"",e=k);a=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof a)return c[g]=a,e?b(a):a;if(null===a)return delete c[g],null;g in c||d(g,!0,function(a){c[g]=a});return e?b(c[g]):c[g]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(e,f,g){e=e.split("!");var n=1<e.length,h=e[0],r=f.toUrl(e[0]);e="url:"+r;var s=a,t=function(a){g(n?b(a):a)};h in c?s=c[h]:f.cache&&e in f.cache?s=f.cache[e]:r in c&&
(s=c[r]);if(s===a)if(k[r])k[r].push(t);else{var u=k[r]=[t];d(r,!f.async,function(a){c[h]=c[r]=a;for(var b=0;b<u.length;)u[b++](a);delete k[r]})}else t(s)}}})},"dojo/request":function(){define(["./request/default!"],function(h){return h})},"dojo/request/default":function(){define(["exports","require","../has"],function(h,f,g){var e=g("config-requestProvider");e||(e="./xhr");h.getPlatformDefaultId=function(){return"./xhr"};h.load=function(d,c,b,a){f(["platform"==d?"./xhr":e],function(a){b(a)})}})},
"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(h,f,g,e,d,c,b,a,k){var l=d.delegate(a,{mouseenter:c.enter,mouseleave:c.leave,keypress:g._keypress}),m;g=e("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},
_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var k=!0,e=this.attachScope||this,f=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(f)for(var g=f.split(/\s*,\s*/);f=g.shift();)d.isArray(e[f])?
e[f].push(a):e[f]=a,k="containerNode"!=f,this._attachPoints.push(f);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){f=b.split(/\s*,\s*/);for(g=d.trim;b=f.shift();)if(b){var l=null;-1!=b.indexOf(":")?(l=b.split(":"),b=g(l[0]),l=g(l[1])):b=g(b);l||(l=b);this._attachEvents.push(c(a,b,d.hitch(e,l)))}}return k},_attach:function(a,c,d){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?m||(m=h("./a11yclick")):l[c]||c;return b(a,c,d)},_detachTemplateNodes:function(){var a=this.attachScope||
this;f.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];f.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(k,{dojoAttachEvent:"",dojoAttachPoint:""});return g})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(h,f,g,e,d){return g("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var c=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);d.parse(c,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(e.hitch(this,function(b){this._startupWidgets=b;for(var a=0;a<b.length;a++)this._processTemplateNode(b[a],
function(a,b){return a[b]},function(a,b,c){return b in a?a.connect(a,b,c):a.on(b,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(c,b,a){return b(c,"dojoType")||b(c,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){h.forEach(this._startupWidgets,function(c){c&&(!c._started&&c.startup)&&c.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"MW/rtc/core/registry/PluginRegistry":function(){define("MW/rtc/clipboardservice/ClipboardProvider MW/rtc/cursor/CursorActionsProvider MW/rtc/cursor/CursorProvider MW/rtc/cursor/CursorViewProvider MW/rtc/cursor/CursorControllerProvider MW/rtc/datamodel/DefaultBackingStoreProvider MW/rtc/execution/ExecutionServiceProvider MW/rtc/model/DocumentActionsProvider MW/rtc/model/DocumentProvider MW/rtc/model/InternalDocumentProvider MW/rtc/nodes/contentconverter/ContentConverterPluginProvider MW/rtc/nodes/contentconverter/inner/LineNodeContentConverterProvider MW/rtc/nodes/contentconverter/inner/RootNodeContentConverterProvider MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverterProvider MW/rtc/events/KeyHandlerProvider MW/rtc/hyperlinkservice/HyperlinkServiceProvider MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkServiceProvider MW/rtc/model/io/serializers/providers/containers/TableOfContentsContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/TableOfContentsHeadingSerializerProvider MW/rtc/model/io/serializers/providers/containers/TableOfContentsListSerializerProvider MW/rtc/plugins/internalhyperlinkservice/AnchorProvider MW/rtc/plugins/tableofcontents/TableOfContentsProvider MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRulesProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouterProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouterProvider MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouterProvider MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverterProvider MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverterProvider MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverterProvider MW/rtc/margin/TraditionalLineNumberDecoratorProvider MW/rtc/model/io/SerializersProvider MW/rtc/model/io/serializers/providers/containers/CodeContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/ContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/HeadingContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/HyperlinkContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/ListContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/ListItemContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/RichTextContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/SectionBreakContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/TitleContainerSerializerProvider MW/rtc/model/io/serializers/providers/nodes/EquationSerializerProvider MW/rtc/model/io/serializers/providers/nodes/ImageSerializerProvider MW/rtc/model/io/serializers/providers/nodes/LiveControlSerializerProvider MW/rtc/model/io/serializers/providers/nodes/PlainTextSerializerProvider MW/rtc/model/io/serializers/providers/nodes/RichTextSerializerProvider MW/rtc/nodes/insertionrules/LineNodeInsertionRulesProvider MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRulesProvider MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRulesProvider MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRulesProvider MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecoratorProvider MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStylerProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactoryProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModelProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactoryProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecoratorProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActionsProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceProvider MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyServiceProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointMarginProvider MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManagerProvider MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManagerProvider MW/rtc/plugins/breakpoint/DummyBreakpointMarginProvider MW/rtc/plugins/buttonfactory/ButtonFactoryProvider MW/rtc/plugins/code/hover/CodeHoverServiceProvider MW/rtc/plugins/code/hover/CodeTextHoverContributorProvider MW/rtc/plugins/code/hover/LeftMarginCodeHoverContributorProvider MW/rtc/plugins/code/CodeTextServiceProvider MW/rtc/plugins/code/ExecutableLineServiceProvider MW/rtc/plugins/contextmenu/DojoContextMenuGeneratorProvider MW/rtc/plugins/contextmenu/ContextMenuProvider MW/rtc/plugins/contextmenu/DocumentContextMenuModelProvider MW/rtc/plugins/cursorgripper/CursorGripperProvider MW/rtc/plugins/cutcopypaste/CutCopyPasteProvider MW/rtc/plugins/cutcopypaste/ClipboardConverterProvider MW/rtc/plugins/cutcopypaste/DefaultMIMEConverterProvider MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverterProvider MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverterProvider MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverterProvider MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverterProvider MW/rtc/plugins/cutcopypaste/PlainTextMimeGeneratorProvider MW/rtc/plugins/cutcopypaste/HTMLGeneratorProvider MW/rtc/plugins/cutcopypaste/InternalSerializationGeneratorProvider MW/rtc/plugins/cutcopypaste/PlainTextNodeConverterProvider MW/rtc/plugins/cutcopypaste/RTFGeneratorProvider MW/rtc/plugins/datatip/DataTipProvider MW/rtc/plugins/draganddrop/DragAndDropProvider MW/rtc/plugins/draganddrop/DragAndDropNotifierProvider MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackProvider MW/rtc/plugins/debug/executionarrow/ExecutionArrowDecoratorProvider MW/rtc/plugins/debug/executionlines/ExecutionLinesPluginProvider MW/rtc/plugins/debug/DatatipPluginProvider MW/rtc/plugins/debug/DebuggerManagerProvider MW/rtc/plugins/debug/DebugLineFocusPluginProvider MW/rtc/plugins/debug/DebugStackModelProvider MW/rtc/plugins/debug/DocumentDebugServicesProvider MW/rtc/plugins/debug/DocumentLoadedServiceProvider MW/rtc/plugins/debug/RunToLineServiceProvider MW/rtc/plugins/debug/DocumentDirtyDebugServiceProvider MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactoryProvider MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModelProvider MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewProvider MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactoryProvider MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManagerProvider MW/rtc/plugins/debug/contextualbuttons/stepin/StepInViewProvider MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBarProvider MW/rtc/plugins/editordataservice/EditorDataServiceProvider MW/rtc/plugins/editordataservice/EditorDataServiceManagerProvider MW/rtc/plugins/embeddedoutputs/EvalTextCacheProvider MW/rtc/plugins/embeddedoutputs/ClearOutputsCacheProvider MW/rtc/plugins/embeddedoutputs/CurrentOutputServiceProvider MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsProvider MW/rtc/plugins/embeddedoutputs/OutputHandlerProvider MW/rtc/plugins/embeddedoutputs/LineNumberTrackerProvider MW/rtc/plugins/embeddedoutputs/LineContinuationTrackerProvider MW/rtc/plugins/embeddedoutputs/StateHandlerProvider MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandlerProvider MW/rtc/plugins/embeddedoutputs/OutputRemoverProvider MW/rtc/plugins/embeddedoutputs/CopyOutputsProvider MW/rtc/plugins/embeddedoutputs/ExecutionManagerProvider MW/rtc/plugins/embeddedoutputs/ExecutionDataManagerProvider MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModelProvider MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModelProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManagerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandlerProvider MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlertProvider MW/rtc/plugins/embeddedoutputs/view/HitLineIndicatorProvider MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewServiceProvider MW/rtc/plugins/embeddedoutputs/triggers/TriggersProvider MW/rtc/plugins/embeddedoutputs/triggers/InterruptActionProvider MW/rtc/plugins/export/ExportNotifierProvider MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeServiceProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/syntax/mtree/MTreeServiceProvider MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServicesProvider MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructureProvider MW/rtc/plugins/language/matlab/syntaxhighlighting/SyntaxHighlightingProvider MW/rtc/plugins/equations/equationcontroller/EquationControllerProvider MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverterProvider MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverterProvider MW/rtc/plugins/equations/equationcontroller/view/EquationLayouterProvider MW/rtc/plugins/equations/equationeditor/EquationEditorProvider MW/rtc/plugins/equations/equationeditor/MathMLMimeConverterProvider MW/rtc/plugins/equations/latexeditor/LaTeXEditorProvider MW/rtc/plugins/events/EventHandlerProvider MW/rtc/plugins/execution/ExecutionActionsProvider MW/rtc/plugins/execution/BusyIdleServicesProvider MW/rtc/plugins/find/FindProvider MW/rtc/plugins/find/ReplaceProvider MW/rtc/plugins/formatcode/FormatCodePluginProvider MW/rtc/plugins/goto/GotoProvider MW/rtc/plugins/htmlmime/HTMLMimeConverterProvider MW/rtc/plugins/hyperlink/HyperlinkProvider MW/rtc/plugins/hyperlink/HyperlinkEditorProvider MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandlerProvider MW/rtc/plugins/hyperlink/HyperlinkMIMEConverterProvider MW/rtc/plugins/hyperlink/HyperlinkTooltipProvider MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverterProvider MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverterProvider MW/rtc/plugins/hyperlink/view/HyperlinkLayouterProvider MW/rtc/plugins/images/HTMLImageElementHandlerProvider MW/rtc/plugins/images/ImagesProvider MW/rtc/plugins/images/ImageMimeConverterProvider MW/rtc/plugins/images/InsertImageProvider MW/rtc/plugins/images/InlineResizeImageProvider MW/rtc/plugins/images/model/ImageNodeContentConverterProvider MW/rtc/plugins/images/view/ImageCoordinateConverterProvider MW/rtc/plugins/images/view/ImageLayouterProvider MW/rtc/plugins/imeinput/IMEInputProvider MW/rtc/plugins/indentation/IndentationProvider MW/rtc/plugins/indentutilities/IndentUtilitiesProvider MW/rtc/plugins/hyperlink/HyperlinkInsertionRulesProvider MW/rtc/plugins/insertionrules/InsertionRuleServiceProvider MW/rtc/plugins/lists/model/ListParagraphContentConverterProvider MW/rtc/plugins/lists/model/ListItemContentConverterProvider MW/rtc/plugins/lists/ListParagraphInsertionRulesProvider MW/rtc/plugins/lists/ListItemInsertionRulesProvider MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverterProvider MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverterProvider MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouterProvider MW/rtc/plugins/codeexample/view/CodeExampleLineLayouterProvider MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverterProvider MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRulesProvider MW/rtc/plugins/codeexample/CodeExampleLineInsertionRulesProvider MW/rtc/model/io/serializers/providers/containers/CodeExampleBlockContainerSerializerProvider MW/rtc/model/io/serializers/providers/containers/CodeExampleLineContainerSerializerProvider MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandlerProvider MW/rtc/plugins/codeexample/CodeExampleProvider MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighterProvider MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/tokenizer/MatlabTokensPluginProvider MW/rtc/plugins/resizer/ResizerProvider MW/rtc/plugins/richtext/RichTextNodeInsertionRulesProvider MW/rtc/plugins/richtext/RichTextParagraphInsertionRulesProvider MW/rtc/plugins/richtext/view/HeadingLayouterProvider MW/rtc/plugins/richtext/view/RichTextLayouterProvider MW/rtc/plugins/richtext/view/RichTextParagraphLayouterProvider MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverterProvider MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverterProvider MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverterProvider MW/rtc/plugins/sectionbreak/SectionBreakInsertionRulesProvider MW/rtc/plugins/undoredo/UndoRedoControllerProvider MW/rtc/plugins/undoredo/EditBlockControllerProvider MW/rtc/plugins/undoredo/UndoRedoActionProvider MW/rtc/plugins/undoredo/UndoRedoCursorProvider MW/rtc/plugins/language/matlab/alert/AlertControllerProvider MW/rtc/plugins/language/matlab/alert/AlertModelProvider MW/rtc/plugins/language/matlab/alert/AlertViewProvider MW/rtc/plugins/language/matlab/alert/AlertWidgetFactoryProvider MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatterProvider MW/rtc/plugins/language/matlab/autoindent/AutoIndentProvider MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreferenceProvider MW/rtc/plugins/language/matlab/code/CodeChangeServiceProvider MW/rtc/plugins/language/matlab/codecontent/CodeContentProvider MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModelProvider MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipProvider MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerViewProvider MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPluginProvider MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFixProvider MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayerProvider MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandlerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIContextManagerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIProvider MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandlerProvider MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBusProvider MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProvider MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelectionProvider MW/rtc/plugins/language/matlab/contextualselection/OpenSelectionProvider MW/rtc/plugins/language/matlab/commentCode/CommentCodeProvider MW/rtc/plugins/language/matlab/filetype/FileTypeProvider MW/rtc/plugins/language/matlab/functionhints/FunctionHintsProvider MW/rtc/plugins/language/matlab/syntax/functions/FunctionServiceProvider MW/rtc/plugins/functionnotifier/FunctionArgumentNotifierProvider MW/rtc/plugins/functionnotifier/LocalFunctionNotifierProvider MW/rtc/plugins/functionnotifier/AllFunctionNotifierProvider MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifierProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandlerProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManagerProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecutionProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertionProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActionsProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandlerProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverterProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverterProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverterProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModelProvider MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouterProvider MW/rtc/plugins/language/matlab/functions/LocalFunctionsProvider MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributorProvider MW/rtc/plugins/language/matlab/functions/TopLevelFunctionProvider MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributorProvider MW/rtc/plugins/language/matlab/section/SectionPluginProvider MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributorProvider MW/rtc/plugins/language/matlab/sections/CurrentSectionViewProvider MW/rtc/plugins/language/matlab/sections/InsertSectionProvider MW/rtc/plugins/language/matlab/sections/NavigateSectionProvider MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributorProvider MW/rtc/plugins/language/matlab/sections/SectionModelProvider MW/rtc/plugins/language/matlab/sections/SectionContainerUtilityProvider MW/rtc/plugins/language/matlab/sections/StaleSectionModelProvider MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPluginProvider MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlightingProvider MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlightProvider MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingControllerProvider MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelProvider MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtilityProvider MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingViewProvider MW/rtc/plugins/language/matlab/variableservice/VariableServiceProvider MW/rtc/plugins/lists/ListsProvider MW/rtc/plugins/lists/HTMLListElementHandlerProvider MW/rtc/plugins/lists/HTMLWordStyleListHandlerProvider MW/rtc/plugins/lists/view/ListParagraphCoordinateConverterProvider MW/rtc/plugins/lists/view/ListItemLayouterProvider MW/rtc/plugins/lists/view/ListParagraphLayouterProvider MW/rtc/plugins/smoothscrolling/SmoothScrollingPluginProvider MW/rtc/plugins/margin/TraditionalLineNumberMarginProvider MW/rtc/plugins/margin/MarginContainerProvider MW/rtc/plugins/margin/RightMarginButtonProvider MW/rtc/plugins/margin/RightMarginContainerProvider MW/rtc/plugins/margin/SeverityStatusButtonProvider MW/rtc/plugins/messagebar/MessageBarModelProvider MW/rtc/plugins/messagebar/MessageBarServiceProvider MW/rtc/plugins/messagebar/MessageBarViewProvider MW/rtc/plugins/richtext/RichTextProvider MW/rtc/plugins/richtext/CodeTextToggleShortcutsProvider MW/rtc/plugins/richtext/MatlabJSONMimeConverterProvider MW/rtc/plugins/richtext/HTMLRichTextElementHandlerProvider MW/rtc/plugins/richtext/view/RichTextCoordinateConverterProvider MW/rtc/plugins/richtext/view/RichTextRangeConverterProvider MW/rtc/plugins/saveaspdf/SaveAsPDFProvider MW/rtc/plugins/saveaspdf/document/BaseDocumentWriterProvider MW/rtc/plugins/saveaspdf/document/EquationWriterProvider MW/rtc/plugins/saveaspdf/document/HyperlinkWriterProvider MW/rtc/plugins/saveaspdf/document/ImageWriterProvider MW/rtc/plugins/saveaspdf/document/LiveControlWriterProvider MW/rtc/plugins/saveaspdf/document/ListWriterProvider MW/rtc/plugins/saveaspdf/document/ParagraphWriterProvider MW/rtc/plugins/saveaspdf/document/TableOfContentWriterProvider MW/rtc/plugins/saveaspdf/outputs/FigureWriterProvider MW/rtc/plugins/saveaspdf/outputs/MatrixWriterProvider MW/rtc/plugins/saveaspdf/outputs/TableWriterProvider MW/rtc/plugins/saveaspdf/outputs/OutputWriterProvider MW/rtc/plugins/saveaspdf/outputs/SymEquationWriterProvider MW/rtc/plugins/saveaspdf/outputs/TextWriterProvider MW/rtc/plugins/saveaspdf/outputs/VariableWriterProvider MW/rtc/plugins/service/CodingUIBackendServiceProvider MW/rtc/plugins/service/FocusServiceProvider MW/rtc/plugins/service/LineNumberServiceProvider MW/rtc/plugins/service/OutputHandlerServiceProvider MW/rtc/plugins/service/TooltipServiceProvider MW/rtc/plugins/shadowtext/ShadowTextServiceProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatterProvider MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatterProvider MW/rtc/plugins/smartformatting/BackspaceUndoHandlerProvider MW/rtc/plugins/smartformatting/SmartFormattingProvider MW/rtc/plugins/smarttab/SmartTabProvider MW/rtc/plugins/statusactionbar/StatusActionBarProvider MW/rtc/plugins/statusactionbar/decorators/SectionsDecoratorProvider MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecoratorProvider MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluationProvider MW/rtc/plugins/sectionbreak/SectionBreakProvider MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverterProvider MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverterProvider MW/rtc/plugins/sectionbreak/view/SectionBreakLayouterProvider MW/rtc/plugins/tabcompletion/CompletionHandlerProvider MW/rtc/plugins/tabcompletion/TabCompletionProvider MW/rtc/plugins/templates/TemplateServiceProvider MW/rtc/plugins/text/parenmatch/ParenMatchingPluginProvider MW/rtc/plugins/text/syntaxhighlighter/SyntaxHighlighterProvider MW/rtc/plugins/textnodeservice/TextNodeServiceProvider MW/rtc/plugins/tooltip/TooltipPluginContainerProvider MW/rtc/plugins/typocorrection/TypoSuggestionFeatureProvider MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactoryProvider MW/rtc/plugins/view/divcaret/DivCaretPluginProvider MW/rtc/plugins/view/divselection/DivSelectionPluginProvider MW/rtc/plugins/view/layoutmanager/LayoutManagerProvider MW/rtc/plugins/view/layoutmanager/layouters/LineLayouterProvider MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouterProvider MW/rtc/plugins/view/layoutmanager/layouters/RootLayouterProvider MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRuleProvider MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRuleProvider MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRuleProvider MW/rtc/plugins/view/layoutmanager/rules/DefaultRuleProvider MW/rtc/plugins/view/layoutmanager/rules/ExpandableRuleProvider MW/rtc/plugins/view/layoutmanager/rules/OutputRuleProvider MW/rtc/plugins/view/layoutmanager/rules/WrappableRuleProvider MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCaptureProvider MW/rtc/preferences/PreferencesServiceProvider MW/rtc/view/ViewModelProvider MW/rtc/view/ViewLinesTestHelper MW/rtc/view/ViewSectionsTestHelper MW/rtc/view/ViewProvider MW/rtc/view/VisibilityNotifierProvider MW/rtc/view/coordinateconverter/PlainTextCoordinateConverterProvider MW/rtc/view/coordinateconverter/RootCoordinateConverterProvider MW/rtc/view/coordinateconverter/CoordinateConverterProvider MW/rtc/view/decoration/DecorationProvider MW/rtc/view/decoration/LayerDecoratorMarginDecoratorProvider MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStoreProvider MW/rtc/view/decoration/viewmodel/DecorationViewModelProvider MW/rtc/view/rangeconverter/PlainTextRangeConverterProvider MW/rtc/view/rangeconverter/RangeConverterProvider".split(" "),
function(){return{plugins:[{id:"rtc.embeddedoutputs.hitlineindicator",path:"MW/rtc/plugins/embeddedoutputs/view/HitLineIndicatorProvider"},{id:"matlab.tokens",path:"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPluginProvider"},{id:"debug.margin.matlab.breakpoint",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecoratorProvider"},{id:"debug.breakpoint.temporary",path:"MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManagerProvider"},{id:"debug.breakpoint.promise",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManagerProvider"},
{id:"debug.breakpointmodel",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModelProvider"},{id:"debug.breakpointfactory",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactoryProvider"},{id:"debug.breakpointactions",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActionsProvider",family:"debugging"},{id:"debug.breakpoint.dataservice",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceProvider",family:"debugging"},{id:"debug.breakpointdirtyservice",path:"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyServiceProvider",
family:"debugging"},{id:"debug.margin.matlab.breakpointstyler",path:"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStylerProvider"},{id:"debug.contextmenumodelfactory",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactoryProvider"},{id:"rtc.debug.breadcrumbstackbanner",path:"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackProvider"},{id:"debug.margin.executionarrow",path:"MW/rtc/plugins/debug/executionarrow/ExecutionArrowDecoratorProvider",subsystem:"rtc.left.margin"},
{id:"debug.executionlines",path:"MW/rtc/plugins/debug/executionlines/ExecutionLinesPluginProvider"},{id:"margin.debug",path:"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointMarginProvider",subsystem:"rtc.left.margin",family:"debugging",label:"MATLAB Breakpoint Margin",description:"The Left Margin contribution of the MATLAB Breakpoint Margin for  creating and viewing MATLAB Breakpoints."},{id:"margin.debug",path:"MW/rtc/plugins/breakpoint/DummyBreakpointMarginProvider",subsystem:"rtc.left.margin"},
{id:"margin.linenumber",path:"MW/rtc/plugins/margin/TraditionalLineNumberMarginProvider",subsystem:"rtc.left.margin"},{id:"rtc.code.parenmatch",path:"MW/rtc/plugins/text/parenmatch/ParenMatchingPluginProvider"},{id:"rtc.code.syntaxhighlighter",path:"MW/rtc/plugins/text/syntaxhighlighter/SyntaxHighlighterProvider"},{id:"rtc.code.serversidesyntaxhighlighter",path:"MW/rtc/plugins/language/matlab/syntaxhighlighting/SyntaxHighlightingProvider"},{id:"rtc.code.formatcode",path:"MW/rtc/plugins/formatcode/FormatCodePluginProvider"},
{id:"rtc.code.codeanalyzermodel",path:"MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModelProvider"},{id:"rtc.code.codeanalyzerautofix",path:"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFixProvider",family:"codeanalyzer"},{id:"rtc.code.alertmessagelayer",path:"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayerProvider",subsystem:"messagebarlayer"},{id:"rtc.code.codeanalyzermessagelayer",path:"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayerProvider",
family:"codeanalyzer",subsystem:"messagebarlayer"},{id:"rtc.code.codeanalyzerview",path:"MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerViewProvider"},{id:"rtc.code.codeanalyzer",path:"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPluginProvider",family:"codeanalyzer"},{id:"rtc.functionservice",path:"MW/rtc/plugins/language/matlab/syntax/functions/FunctionServiceProvider"},{id:"rtc.functionargumentnotifier",path:"MW/rtc/plugins/functionnotifier/FunctionArgumentNotifierProvider"},
{id:"rtc.allfunctionnotifier",path:"MW/rtc/plugins/functionnotifier/AllFunctionNotifierProvider"},{id:"rtc.localfunctionnotifier",path:"MW/rtc/plugins/functionnotifier/LocalFunctionNotifierProvider"},{id:"rtc.toplevelfunctionnotifier",path:"MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifierProvider"},{id:"rtc.code.functionhints",path:"MW/rtc/plugins/language/matlab/functionhints/FunctionHintsProvider"},{id:"rtc.code.datatip",path:"MW/rtc/plugins/datatip/DataTipProvider",subsystem:"hoverabletooltip"},
{id:"rtc.livecontrols.actionhandler",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandlerProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.contextmanager",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManagerProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.execution",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecutionProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.insertion",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertionProvider",
family:"rtc.livecontrols"},{id:"rtc.livecontrols.toolstrip",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActionsProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.widgethandler",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandlerProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.contentconverter",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverterProvider",family:"rtc.livecontrols",
subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.livecontrols.executablecodeconverter",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverterProvider",family:"rtc.livecontrols",subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},{id:"rtc.livecontrols.coordinateconverter",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverterProvider",family:"rtc.livecontrols",subsystem:"rtc.view.coordinateconverter.converter"},
{id:"rtc.livecontrols.viewmodel",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModelProvider",family:"rtc.livecontrols"},{id:"rtc.livecontrols.layouter",path:"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouterProvider",family:"rtc.livecontrols",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.livecontrols.insertionrule",path:"MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRulesProvider",family:"rtc.livecontrols",subsystem:"rtc.insertionrule"},
{id:"rtc.code.localfunctions.controller",path:"MW/rtc/plugins/language/matlab/functions/LocalFunctionsProvider",family:"rtc.code.localfunctions"},{id:"rtc.code.sections.attribute.localfunctions",path:"MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributorProvider",family:"rtc.code.localfunctions"},{id:"rtc.code.functions.controller",path:"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionProvider",family:"rtc.code.localfunctions"},{id:"rtc.code.sections.attribute.toplevelfunction",
path:"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributorProvider",family:"rtc.code.localfunctions"},{id:"matlab.code.mtree",path:"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeServiceProvider"},{id:"matlab.code.codeblocks",path:"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServicesProvider"},{id:"matlab.code.codeblocks.structure",path:"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructureProvider"},{id:"matlab.code.variables.nonlocalhighlighting",
path:"MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlightingProvider",family:"matlab.code.variables.highlighting"},{id:"matlab.code.variables.plugin",path:"MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlightProvider",family:"matlab.code.variables.highlighting"},{id:"matlab.code.variables.rename.controller",path:"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingControllerProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.rename.model",
path:"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.rename.utility",path:"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtilityProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.rename.view",path:"MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingViewProvider",family:"matlab.code.variables.rename"},{id:"matlab.code.variables.service",
path:"MW/rtc/plugins/language/matlab/variableservice/VariableServiceProvider"},{id:"rtc.backingstore",path:"MW/rtc/datamodel/DefaultBackingStoreProvider"},{id:"matlab.tabcompletion",path:"MW/rtc/plugins/tabcompletion/TabCompletionProvider"},{id:"matlab.tabcompletion.completionhandler",path:"MW/rtc/plugins/tabcompletion/CompletionHandlerProvider"},{id:"matlab.templateservice",path:"MW/rtc/plugins/templates/TemplateServiceProvider"},{id:"rtc.contextualselection.evaluateselection",path:"MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelectionProvider"},
{id:"rtc.navigate.find",path:"MW/rtc/plugins/find/FindProvider",family:"rtc.findandreplace"},{id:"rtc.navigate.replace",path:"MW/rtc/plugins/find/ReplaceProvider",family:"rtc.findandreplace"},{id:"rtc.navigate.goto",path:"MW/rtc/plugins/goto/GotoProvider"},{id:"rtc.contextualselection.openselection",path:"MW/rtc/plugins/language/matlab/contextualselection/OpenSelectionProvider"},{id:"rtc.code.sections",path:"MW/rtc/plugins/language/matlab/section/SectionPluginProvider"},{id:"debug.control",path:"MW/rtc/plugins/debug/DebuggerManagerProvider",
family:"debugging"},{id:"debug.linefocus",path:"MW/rtc/plugins/debug/DebugLineFocusPluginProvider",family:"debugging"},{id:"debug.stack.model",path:"MW/rtc/plugins/debug/DebugStackModelProvider",family:"debugging"},{id:"debug.documentdebugservices",path:"MW/rtc/plugins/debug/DocumentDebugServicesProvider",family:"debugging"},{id:"debug.runtolineservice",path:"MW/rtc/plugins/debug/RunToLineServiceProvider"},{id:"debug.documentdirtyservice",path:"MW/rtc/plugins/debug/DocumentDirtyDebugServiceProvider"},
{id:"debug.contextualbuttons.buttonfactory",path:"MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactoryProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.runtohere.viewmodel",path:"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModelProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.runtohere.view",path:"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.stepin.functioncallsitefactory",
path:"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactoryProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.stepin.manager",path:"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManagerProvider",family:"executioncontrols"},{id:"debug.contextualbuttons.stepin.view",path:"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInViewProvider",family:"executioncontrols"},{id:"debug.datatips",path:"MW/rtc/plugins/debug/DatatipPluginProvider",subsystem:"hoverabletooltip",
family:"debugging"},{id:"rtc.code.codeanalyzer.tooltip",path:"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipProvider",subsystem:"hoverabletooltip",family:"codeanalyzer"},{id:"rtc.tooltip",path:"MW/rtc/plugins/tooltip/TooltipPluginContainerProvider"},{id:"matlab.executable.line",path:"MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecoratorProvider",subsystem:"rtc.left.margin"},{id:"rtc.internaldocument",path:"MW/rtc/model/InternalDocumentProvider"},{id:"rtc.linenumberservice",
path:"MW/rtc/plugins/service/LineNumberServiceProvider"},{id:"rtc.buttonfactory",path:"MW/rtc/plugins/buttonfactoryButtonFactoryProvider"},{id:"rtc.code.codetextservice",path:"MW/rtc/plugins/code/CodeTextServiceProvider"},{id:"rtc.code.executablelines",path:"MW/rtc/plugins/code/ExecutableLineServiceProvider"},{id:"rtc.code.hover",path:"MW/rtc/plugins/code/hover/CodeHoverServiceProvider"},{id:"rtc.code.hover.text",path:"MW/rtc/plugins/code/hover/CodeTextHoverContributorProvider",subsystem:"rtc.code.hover.contributors",
requiredForSubsystem:!0},{id:"rtc.code.hover.leftmargin",path:"MW/rtc/plugins/code/hover/LeftMarginCodeHoverContributorProvider",subsystem:"rtc.code.hover.contributors",requiredForSubsystem:!0},{id:"rtc.nodes.contentconverter",path:"MW/rtc/nodes/contentconverter/ContentConverterPluginProvider"},{id:"rtc.nodes.contentconverter.rootnodeconverter",path:"MW/rtc/nodes/contentconverter/inner/RootNodeContentConverterProvider",subsystem:"rtc.nodes.contentconverter.converter",requiredForSubsystem:!0},{id:"rtc.nodes.contentconverter.linenodeconverter",
path:"MW/rtc/nodes/contentconverter/inner/LineNodeContentConverterProvider",subsystem:"rtc.nodes.contentconverter.converter",requiredForSubsystem:!0},{id:"rtc.nodes.contentconverter.plaintextnodeconverter",path:"MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverterProvider",subsystem:"rtc.nodes.contentconverter.converter",requiredForSubsystem:!0},{id:"rtc.insertionruleservice",path:"MW/rtc/plugins/insertionrules/InsertionRuleServiceProvider"},{id:"rtc.insertionrules.linenode",path:"MW/rtc/nodes/insertionrules/LineNodeInsertionRulesProvider",
subsystem:"rtc.insertionrule",requiredForSubsystem:!0},{id:"rtc.insertionrules.plaintextnode",path:"MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRulesProvider",subsystem:"rtc.insertionrule",requiredForSubsystem:!0},{id:"rtc.insertionrules.opaque",path:"MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRulesProvider",subsystem:"rtc.insertionrule",requiredForSubsystem:!0},{id:"rtc.textnodeservice",path:"MW/rtc/plugins/textnodeservice/TextNodeServiceProvider"},{id:"rtc.actions.document",path:"MW/rtc/model/DocumentActionsProvider",
family:"document"},{id:"rtc.document",path:"MW/rtc/model/DocumentProvider",family:"document"},{id:"rtc.actions.cursor",path:"MW/rtc/cursor/CursorActionsProvider",family:"cursor"},{id:"rtc.cursor",path:"MW/rtc/cursor/CursorProvider",family:"cursor"},{id:"rtc.cursor.view",path:"MW/rtc/cursor/CursorViewProvider"},{id:"rtc.cursorcontroller",path:"MW/rtc/cursor/CursorControllerProvider",family:"cursor"},{id:"rtc.indentutilities",path:"MW/rtc/plugins/indentutilities/IndentUtilitiesProvider"},{id:"rtc.indent",
path:"MW/rtc/plugins/indentation/IndentationProvider"},{id:"rtc.clipboard",path:"MW/rtc/clipboardservice/ClipboardProvider"},{id:"rtc.cutcopypaste",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/CutCopyPasteProvider"},{id:"rtc.code.codingui.actionhandler",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandlerProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.plugin",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.contextmanager",
path:"MW/rtc/plugins/language/matlab/codingui/CodingUIContextManagerProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.requesthandler",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandlerProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.eventbus",path:"MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBusProvider",family:"rtc.code.codingui"},{id:"rtc.code.codingui.view",path:"MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProvider",family:"rtc.code.codingui"},
{id:"rtc.cutcopypaste.converter",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/ClipboardConverterProvider"},{id:"rtc.cutcopypaste.defaultmimeconverterprovider",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/DefaultMIMEConverterProvider"},{id:"rtc.plaintextmimeconverter",path:"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverterProvider",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.plaintextmimeincodeconverter",path:"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverterProvider",
subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.unicodestringmimeconverter",path:"MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverterProvider",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.cutcopypaste.promptlesstextmimeconverter",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverterProvider",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.cutcopypaste.htmlmimeconverter",path:"MW/rtc/plugins/htmlmime/HTMLMimeConverterProvider",family:"rtc.cutcopypaste",
subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.plaintextmimegeneratorprovider",path:"MW/rtc/plugins/cutcopypaste/PlainTextMimeGeneratorProvider"},{id:"rtc.cutcopypaste.htmlgenerator",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/HTMLGeneratorProvider"},{id:"rtc.cutcopypaste.plaintextnodeconverter",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/PlainTextNodeConverterProvider"},{id:"rtc.cutcopypaste.rtfgenerator",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/RTFGeneratorProvider"},
{id:"rtc.cutcopypaste.internalserializationgenerator",family:"rtc.cutcopypaste",path:"MW/rtc/plugins/cutcopypaste/InternalSerializationGeneratorProvider"},{id:"rtc.draganddrop",path:"MW/rtc/plugins/draganddrop/DragAndDropProvider",family:"draganddrop"},{id:"rtc.draganddropnotifier",path:"MW/rtc/plugins/draganddrop/DragAndDropNotifierProvider",family:"draganddrop"},{id:"rtc.alert.controller",path:"MW/rtc/plugins/language/matlab/alert/AlertControllerProvider",family:"rtc.alert"},{id:"rtc.alert.model",
path:"MW/rtc/plugins/language/matlab/alert/AlertModelProvider",family:"rtc.alert"},{id:"rtc.alert.widgetfactory",path:"MW/rtc/plugins/language/matlab/alert/AlertWidgetFactoryProvider",family:"rtc.alert"},{id:"rtc.visual.alert",path:"MW/rtc/plugins/language/matlab/alert/AlertViewProvider",family:"rtc.alert"},{id:"rtc.diagnosticmessage",path:"MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatterProvider"},{id:"rtc.code.matlabfiletype",path:"MW/rtc/plugins/language/matlab/filetype/FileTypeProvider"},
{id:"rtc.code.codecontent",path:"MW/rtc/plugins/language/matlab/codecontent/CodeContentProvider"},{id:"rtc.code.autoindent",path:"MW/rtc/plugins/language/matlab/autoindent/AutoIndentProvider"},{id:"rtc.code.autoindentpreference",path:"MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreferenceProvider"},{id:"rtc.richtext.lists",family:"rtc.richtext.lists",path:"MW/rtc/plugins/lists/ListsProvider"},{id:"rtc.richtext.lists.htmllisthandler",family:"rtc.richtext.lists",path:"MW/rtc/plugins/lists/HTMLListElementHandlerProvider"},
{id:"rtc.richtext.lists.htmlwordstylelist",family:"rtc.richtext.lists",path:"MW/rtc/plugins/lists/HTMLWordStyleListHandlerProvider"},{id:"rtc.richtext.list.coordinateconverter",path:"MW/rtc/plugins/lists/view/ListParagraphCoordinateConverterProvider",family:"rtc.richtext.lists",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.list.listparagraph.contentconverter",path:"MW/rtc/plugins/lists/model/ListParagraphContentConverterProvider",family:"rtc.richtext.lists",subsystem:"rtc.nodes.contentconverter.converter"},
{id:"rtc.richtext.list.listparagraph.insertionrules",path:"MW/rtc/plugins/lists/ListParagraphInsertionRulesProvider",family:"rtc.richtext.lists",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.list.listparagraph.layouter",path:"MW/rtc/plugins/lists/view/ListParagraphLayouterProvider",family:"rtc.richtext.lists",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.list.listitem.contentconverter",path:"MW/rtc/plugins/lists/model/ListItemContentConverterProvider",family:"rtc.richtext.lists",
subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.list.listitem.insertionrules",path:"MW/rtc/plugins/lists/ListItemInsertionRulesProvider",family:"rtc.richtext.lists",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.list.listitem.layouter",path:"MW/rtc/plugins/lists/view/ListItemLayouterProvider",family:"rtc.richtext.lists",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.codeexample",family:"rtc.richtext.codeexample",path:"MW/rtc/plugins/codeexample/CodeExampleProvider"},
{id:"rtc.richtext.codeexample.block.contentconverter",path:"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.codeexample.block.layouter",path:"MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.codeexample.coordinateconverter",path:"MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverterProvider",
family:"rtc.richtext.codeexample",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.codeexample.block.insertionrules",path:"MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRulesProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.codeexample.line.contentconverter",path:"MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.codeexample.line.layouter",
path:"MW/rtc/plugins/codeexample/view/CodeExampleLineLayouterProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.codeexample.line.insertionrules",path:"MW/rtc/plugins/codeexample/CodeExampleLineInsertionRulesProvider",family:"rtc.richtext.codeexample",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.codeexample.matlab.syntaxhighlighter",path:"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighterProvider",family:"rtc.richtext.codeexample"},
{id:"rtc.richtext.codeexample.matlab.tokens",path:"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/tokenizer/MatlabTokensPluginProvider",family:"rtc.richtext.codeexample"},{id:"rtc.serializers.containers.codeexample.blockcontainer",path:"MW/rtc/model/io/serializers/providers/containers/CodeExampleBlockContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.codeexample"},{id:"rtc.serializers.containers.codeexample.linecontainer",path:"MW/rtc/model/io/serializers/providers/containers/CodeExampleLineContainerSerializerProvider",
subsystem:"rtc.serializer",family:"rtc.richtext.codeexample"},{id:"rtc.richtext.codeexample.block.keyhandler",path:"MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandlerProvider",family:"rtc.richtext.codeexample"},{id:"rtc.richtext.hyperlink",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkProvider"},{id:"rtc.richtext.hyperlinkeditor",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkEditorProvider"},{id:"rtc.richtext.hyperlink.htmlhyperlinkhandler",family:"rtc.richtext.hyperlink",
path:"MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandlerProvider"},{id:"rtc.richtext.hyperlink.mimeconverter",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkMIMEConverterProvider"},{id:"rtc.richtext.hyperlink.tooltip",family:"rtc.richtext.hyperlink",path:"MW/rtc/plugins/hyperlink/HyperlinkTooltipProvider"},{id:"rtc.richtext.hyperlink.coordinateconverter",path:"MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverterProvider",family:"rtc.richtext.hyperlink",subsystem:"rtc.view.coordinateconverter.converter"},
{id:"rtc.richtext.hyperlink.contentconverter",path:"MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverterProvider",family:"rtc.richtext.hyperlink",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.hyperlink.insertionrules",path:"MW/rtc/plugins/hyperlink/HyperlinkInsertionRulesProvider",family:"rtc.richtext.hyperlink",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.hyperlink.layouter",path:"MW/rtc/plugins/hyperlink/view/HyperlinkLayouterProvider",family:"rtc.richtext.hyperlink",
subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.equationcontroller",family:"rtc.richtext.equations",path:"MW/rtc/plugins/equations/equationcontroller/EquationControllerProvider"},{id:"rtc.richtext.equationeditor",family:"rtc.richtext.equations",path:"MW/rtc/plugins/equations/equationeditor/EquationEditorProvider"},{id:"rtc.richtext.mathmlconverter",family:"rtc.richtext.equations",path:"MW/rtc/plugins/equations/equationeditor/MathMLMimeConverterProvider"},{id:"rtc.richtext.latexeditor",
family:"rtc.richtext.equations",path:"MW/rtc/plugins/equations/latexeditor/LaTeXEditorProvider"},{id:"rtc.richtext.equations.contentconverter",path:"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverterProvider",family:"rtc.richtext.equations",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.equations.coordinateconverter",path:"MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverterProvider",family:"rtc.richtext.equations",subsystem:"rtc.view.coordinateconverter.converter"},
{id:"rtc.richtext.equations.layouter",path:"MW/rtc/plugins/equations/equationcontroller/view/EquationLayouterProvider",family:"rtc.richtext.equations",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext",path:"MW/rtc/plugins/richtext/RichTextProvider",family:"rtc.richtext"},{id:"rtc.richtext.toggleshortcuts",path:"MW/rtc/plugins/richtext/CodeTextToggleShortcutsProvider",family:"rtc.richtext"},{id:"rtc.richtext.matlabjsonmimeconverter",path:"MW/rtc/plugins/richtext/MatlabJSONMimeConverterProvider",
family:"rtc.richtext",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.richtext.htmlhandler",path:"MW/rtc/plugins/richtext/HTMLRichTextElementHandlerProvider",family:"rtc.richtext"},{id:"rtc.richtext.coordinateconverter",path:"MW/rtc/plugins/richtext/view/RichTextCoordinateConverterProvider",family:"rtc.richtext",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.richtext.rangeconverter",path:"MW/rtc/plugins/richtext/view/RichTextRangeConverterProvider",family:"rtc.richtext",subsystem:"rtc.view.rangeconverter.converter"},
{id:"rtc.richtext.richtextparagraph.contentconverter",path:"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverterProvider",family:"rtc.richtext",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.richtextparagraph.insertionrules",path:"MW/rtc/plugins/richtext/RichTextParagraphInsertionRulesProvider",family:"rtc.richtext",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.richtextparagraph.layouter",path:"MW/rtc/plugins/richtext/view/RichTextParagraphLayouterProvider",
family:"rtc.richtext",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.heading.contentconverter",path:"MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverterProvider",family:"rtc.richtext",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.heading.layouter",path:"MW/rtc/plugins/richtext/view/HeadingLayouterProvider",family:"rtc.richtext",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.richtextnode.contentconverter",path:"MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverterProvider",
family:"rtc.richtext",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.richtextnode.insertionrules",path:"MW/rtc/plugins/richtext/RichTextNodeInsertionRulesProvider",family:"rtc.richtext",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.richtextnode.layouter",path:"MW/rtc/plugins/richtext/view/RichTextLayouterProvider",family:"rtc.richtext",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.code.codingui.backendservice",path:"MW/rtc/plugins/service/CodingUIBackendServiceProvider"},
{id:"rtc.focusservice",path:"MW/rtc/plugins/service/FocusServiceProvider"},{id:"rtc.outputhandlerservice",path:"MW/rtc/plugins/service/OutputHandlerServiceProvider"},{id:"rtc.tooltipservice",path:"MW/rtc/plugins/service/TooltipServiceProvider"},{id:"rtc.richtext.images.htmlhandler",path:"MW/rtc/plugins/images/HTMLImageElementHandlerProvider",family:"rtc.richtext.images"},{id:"rtc.richtext.images",path:"MW/rtc/plugins/images/ImagesProvider",family:"rtc.richtext.images"},{id:"rtc.richtext.images.imagemimeconverter",
path:"MW/rtc/plugins/images/ImageMimeConverterProvider",family:"rtc.richtext.images",subsystem:"rtc.cutcopypaste.mimeconverters"},{id:"rtc.richtext.images.contentconverter",path:"MW/rtc/plugins/images/model/ImageNodeContentConverterProvider",family:"rtc.richtext.images",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.images.coordinateconverter",path:"MW/rtc/plugins/images/view/ImageCoordinateConverterProvider",family:"rtc.richtext.images",subsystem:"rtc.view.coordinateconverter.converter"},
{id:"rtc.richtext.images.layouter",path:"MW/rtc/plugins/images/view/ImageLayouterProvider",family:"rtc.richtext.images",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.insertimage",path:"MW/rtc/plugins/images/InsertImageProvider"},{id:"rtc.richtext.resizeimage",path:"MW/rtc/plugins/images/InlineResizeImageProvider"},{id:"rtc.richtext.resizer",path:"MW/rtc/plugins/resizer/ResizerProvider"},{id:"rtc.export.pdf",path:"MW/rtc/plugins/saveaspdf/SaveAsPDFProvider"},{id:"rtc.richtext.export.pdf.basedocumentwriter",
path:"MW/rtc/plugins/saveaspdf/document/BaseDocumentWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext"},{id:"rtc.richtext.export.pdf.equationwriter",path:"MW/rtc/plugins/saveaspdf/document/EquationWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.equations"},{id:"rtc.richtext.export.pdf.hyperlinkwriter",path:"MW/rtc/plugins/saveaspdf/document/HyperlinkWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.hyperlink"},{id:"rtc.richtext.export.pdf.imagewriter",path:"MW/rtc/plugins/saveaspdf/document/ImageWriterProvider",
subsystem:"rtc.pdfwriters",family:"rtc.richtext.images"},{id:"rtc.richtext.export.pdf.livecontrolwriter",path:"MW/rtc/plugins/saveaspdf/document/LiveControlWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.livecontrols"},{id:"rtc.richtext.export.pdf.listwriter",path:"MW/rtc/plugins/saveaspdf/document/ListWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.lists"},{id:"rtc.richtext.export.pdf.paragraphwriter",path:"MW/rtc/plugins/saveaspdf/document/ParagraphWriterProvider",subsystem:"rtc.pdfwriters",
family:"rtc.richtext"},{id:"rtc.richtext.export.pdf.tableofcontentswriter",path:"MW/rtc/plugins/saveaspdf/document/TableOfContentWriterProvider",subsystem:"rtc.pdfwriters",family:"rtc.richtext.tableofcontents"},{id:"rtc.richtext.export.pdf.figurewriter",path:"MW/rtc/plugins/saveaspdf/outputs/FigureWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.matrixwriter",path:"MW/rtc/plugins/saveaspdf/outputs/MatrixWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},
{id:"rtc.richtext.export.pdf.tablewriter",path:"MW/rtc/plugins/saveaspdf/outputs/TableWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.outputwriter",path:"MW/rtc/plugins/saveaspdf/outputs/OutputWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.symequationwriter",path:"MW/rtc/plugins/saveaspdf/outputs/SymEquationWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.textwriter",
path:"MW/rtc/plugins/saveaspdf/outputs/TextWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.richtext.export.pdf.variablewriter",path:"MW/rtc/plugins/saveaspdf/outputs/VariableWriterProvider",subsystem:"rtc.pdfwriters",family:"embeddedoutputs"},{id:"rtc.shadowtextservice",path:"MW/rtc/plugins/shadowtext/ShadowTextServiceProvider"},{id:"rtc.smartformatting.formatter.automaticcoding.splitcomment",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.roundpareninsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.roundparendelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},
{id:"rtc.smartformatting.formatter.automaticcoding.squarepareninsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.squareparendelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.curlypareninsert",
path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.curlyparendelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.singlequoteinsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.singlequotedelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.doublequoteinsert",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},
{id:"rtc.smartformatting.formatter.automaticcoding.doublequotedelete",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.roundparenoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.curlyparenoverwrite",
path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.squareparenoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.singlequoteoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.doublequoteoverwrite",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.splitdoublequotestring",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatterProvider",subsystem:"rtc.smartformatter",
family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.splitsinglequotestring",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endclassdefblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endenumerationblock",
path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endeventsblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endforblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endfunctionblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endifblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},
{id:"rtc.smartformatting.formatter.automaticcoding.endmethodsblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endparforblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endpropertiesblock",
path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endspmdblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endswitchblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endtryblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.automaticcoding.endwhileblock",path:"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.bulletedlist",
path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.heading",path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.numberedlist",path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.title",path:"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.bold2",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.bold",
path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.hyperlink.labelurl",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.hyperlink.urltag",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.italic2",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.italicbold2",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.italicbold",
path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.italic",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markdown.monospace",path:"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.matlab.monospace",path:"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.matlab.sectionbreak.heading",path:"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.matlab.sectionbreak.separator",
path:"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.symbol.trademarkcopyright",path:"MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.hyperlink",path:"MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatterProvider",
subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.formatter.markup.equation",path:"MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatterProvider",subsystem:"rtc.smartformatter",family:"smartformatting"},{id:"rtc.smartformatting.backspaceundohandler",path:"MW/rtc/plugins/smartformatting/BackspaceUndoHandlerProvider"},{id:"rtc.smartformatting",path:"MW/rtc/plugins/smartformatting/SmartFormattingProvider",family:"smartformatting"},{id:"rtc.smarttab",path:"MW/rtc/plugins/smarttab/SmartTabProvider"},
{id:"rtc.code.codechange",path:"MW/rtc/plugins/language/matlab/code/CodeChangeServiceProvider"},{id:"rtc.serializers.containers.codecontainer",path:"MW/rtc/model/io/serializers/providers/containers/CodeContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.serializers.serialize"},{id:"rtc.serializers.containers.container",path:"MW/rtc/model/io/serializers/providers/containers/ContainerSerializerProvider"},{id:"rtc.serializers.containers.headingcontainer",path:"MW/rtc/model/io/serializers/providers/containers/HeadingContainerSerializerProvider",
subsystem:"rtc.serializer",family:"rtc.richtext"},{id:"rtc.serializers.containers.hyperlinkcontainer",path:"MW/rtc/model/io/serializers/providers/containers/HyperlinkContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.hyperlink"},{id:"rtc.serializers.containers.listcontainer",path:"MW/rtc/model/io/serializers/providers/containers/ListContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.lists"},{id:"rtc.serializers.containers.listitemcontainer",path:"MW/rtc/model/io/serializers/providers/containers/ListItemContainerSerializerProvider",
subsystem:"rtc.serializer",family:"rtc.richtext.lists"},{id:"rtc.serializers.containers.richtextcontainer",path:"MW/rtc/model/io/serializers/providers/containers/RichTextContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext"},{id:"rtc.serializers.containers.sectionbreakcontainer",path:"MW/rtc/model/io/serializers/providers/containers/SectionBreakContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.sectionbreak"},{id:"rtc.serializers.containers.titlecontainer",
path:"MW/rtc/model/io/serializers/providers/containers/TitleContainerSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext"},{id:"rtc.serializers.nodes.equation",path:"MW/rtc/model/io/serializers/providers/nodes/EquationSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.equations"},{id:"rtc.serializers.nodes.image",path:"MW/rtc/model/io/serializers/providers/nodes/ImageSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext.images"},{id:"rtc.serializers.nodes.livecontrol",
path:"MW/rtc/model/io/serializers/providers/nodes/LiveControlSerializerProvider",subsystem:"rtc.serializer",family:"rtc.livecontrols"},{id:"rtc.serializers.nodes.plaintext",path:"MW/rtc/model/io/serializers/providers/nodes/PlainTextSerializerProvider",subsystem:"rtc.serializer",family:"rtc.serializers.serialize"},{id:"rtc.serializers.nodes.richtext",path:"MW/rtc/model/io/serializers/providers/nodes/RichTextSerializerProvider",subsystem:"rtc.serializer",family:"rtc.richtext"},{id:"rtc.serializers",
path:"MW/rtc/model/io/SerializersProvider"},{id:"rtc.view.decoration",path:"MW/rtc/view/decoration/DecorationProvider"},{id:"rtc.view.decoration.margindecorator",path:"MW/rtc/view/decoration/LayerDecoratorMarginDecoratorProvider"},{id:"rtc.view.decoration.viewmodel",path:"MW/rtc/view/decoration/viewmodel/DecorationViewModelProvider"},{id:"rtc.view.decoration.descriptorsstore",path:"MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStoreProvider"},{id:"rtc.view.layoutmanager",path:"MW/rtc/plugins/view/layoutmanager/LayoutManagerProvider"},
{id:"rtc.view.layoutmanager.rules.default",path:"MW/rtc/plugins/view/layoutmanager/rules/DefaultRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.containmentgrouping",path:"MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.contiguousgrouping",path:"MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRuleProvider",subsystem:"rtc.view.layoutmanager.rule",
family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.basegrouping",path:"MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.wrappable",path:"MW/rtc/plugins/view/layoutmanager/rules/WrappableRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.output",path:"MW/rtc/plugins/view/layoutmanager/rules/OutputRuleProvider",subsystem:"rtc.view.layoutmanager.rule",
family:"layoutrules"},{id:"rtc.view.layoutmanager.rules.expandable",path:"MW/rtc/plugins/view/layoutmanager/rules/ExpandableRuleProvider",subsystem:"rtc.view.layoutmanager.rule",family:"layoutrules"},{id:"rtc.view.layoutmanager.layouters.line",path:"MW/rtc/plugins/view/layoutmanager/layouters/LineLayouterProvider",subsystem:"rtc.view.layoutmanager.layouter",requiredForSubsystem:!0},{id:"rtc.view.layoutmanager.layouters.plaintext",path:"MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouterProvider",
subsystem:"rtc.view.layoutmanager.layouter",requiredForSubsystem:!0},{id:"rtc.view.layoutmanager.layouters.root",path:"MW/rtc/plugins/view/layoutmanager/layouters/RootLayouterProvider",subsystem:"rtc.view.layoutmanager.layouter",requiredForSubsystem:!0},{id:"rtc.view.smoothscrolling",path:"MW/rtc/plugins/smoothscrolling/SmoothScrollingPluginProvider"},{id:"rtc.view.testhelper.lines",path:"MW/rtc/view/ViewLinesTestHelper",family:"testerhelpers"},{id:"rtc.view.testhelper.sections",path:"MW/rtc/view/ViewSectionsTestHelper",
family:"testerhelpers"},{id:"rtc.view",path:"MW/rtc/view/ViewProvider"},{id:"rtc.view.viewmodel",path:"MW/rtc/view/ViewModelProvider"},{id:"rtc.view.visibility",path:"MW/rtc/view/VisibilityNotifierProvider"},{id:"rtc.preferences.service",path:"MW/rtc/preferences/PreferencesServiceProvider"},{id:"margin.linenumberdecorator",path:"MW/rtc/margin/TraditionalLineNumberDecoratorProvider"},{id:"rtc.divcaret",path:"MW/rtc/plugins/view/divcaret/DivCaretPluginProvider"},{id:"rtc.divselection",path:"MW/rtc/plugins/view/divselection/DivSelectionPluginProvider"},
{id:"rtc.code.comment",path:"MW/rtc/plugins/language/matlab/commentCode/CommentCodeProvider"},{id:"rtc.hyperlinkservice",path:"MW/rtc/hyperlinkservice/HyperlinkServiceProvider"},{id:"rtc.internalhyperlinkservice",path:"MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkServiceProvider"},{id:"rtc.richtext.anchor",path:"MW/rtc/plugins/internalhyperlinkservice/AnchorProvider"},{id:"rtc.richtext.tableofcontents",family:"rtc.richtext.tableofcontents",path:"MW/rtc/plugins/tableofcontents/TableOfContentsProvider"},
{id:"rtc.richtext.tableofcontents.layouter",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.tableofcontentsheading.layouter",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.tableofcontentscontainer.layouter",path:"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouterProvider",
family:"rtc.richtext.tableofcontents",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.richtext.tableofcontents.insertionrules",path:"MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRulesProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.insertionrule"},{id:"rtc.richtext.tableofcontentscontainer.contentconverter",path:"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.nodes.contentconverter.converter"},
{id:"rtc.richtext.tableofcontentsheading.contentconverter",path:"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.richtext.tableofcontents.contentconverter",path:"MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverterProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.serializers.containers.tableofcontentscontainer",
path:"MW/rtc/model/io/serializers/providers/containers/TableOfContentsContainerSerializerProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.serializer"},{id:"rtc.serializers.containers.tableofcontentsheading",path:"MW/rtc/model/io/serializers/providers/containers/TableOfContentsHeadingSerializerProvider",family:"rtc.richtext.tableofcontents",subsystem:"rtc.serializer"},{id:"rtc.serializers.containers.tableofcontentslist",path:"MW/rtc/model/io/serializers/providers/containers/TableOfContentsListSerializerProvider",
family:"rtc.richtext.tableofcontents",subsystem:"rtc.serializer"},{id:"rtc.code.sections.model",path:"MW/rtc/plugins/language/matlab/sections/SectionModelProvider",family:"sections"},{id:"rtc.code.sections.view.containerutility",path:"MW/rtc/plugins/language/matlab/sections/SectionContainerUtilityProvider"},{id:"rtc.code.sections.view.currentsection",path:"MW/rtc/plugins/language/matlab/sections/CurrentSectionViewProvider"},{id:"rtc.code.sections.navigate",path:"MW/rtc/plugins/language/matlab/sections/NavigateSectionProvider"},
{id:"rtc.code.sections.insert",path:"MW/rtc/plugins/language/matlab/sections/InsertSectionProvider"},{id:"rtc.code.sections.contributor.coderegion",path:"MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributorProvider"},{id:"rtc.code.sections.stale.model",path:"MW/rtc/plugins/language/matlab/sections/StaleSectionModelProvider",family:"sections"},{id:"rtc.margin",path:"MW/rtc/plugins/margin/MarginContainerProvider"},{id:"rtc.margin.button",path:"MW/rtc/plugins/margin/RightMarginButtonProvider"},
{id:"rtc.messagebar.rightmargincontainer",path:"MW/rtc/plugins/margin/RightMarginContainerProvider",family:"messagebar"},{id:"rtc.margin.severitystatusbutton",path:"MW/rtc/plugins/margin/SeverityStatusButtonProvider"},{id:"rtc.messagebar.model",path:"MW/rtc/plugins/messagebar/MessageBarModelProvider",family:"messagebar"},{id:"rtc.messagebar.service",path:"MW/rtc/plugins/messagebar/MessageBarServiceProvider",family:"messagebar"},{id:"rtc.messagebar.view",path:"MW/rtc/plugins/messagebar/MessageBarViewProvider",
family:"messagebar"},{id:"margin.statusactionbar",path:"MW/rtc/plugins/statusactionbar/StatusActionBarProvider",subsystem:"rtc.left.margin"},{id:"margin.statusactionbar.sectionsdecorator",path:"MW/rtc/plugins/statusactionbar/decorators/SectionsDecoratorProvider"},{id:"margin.statusactionbar.stalesectionsdecorator",path:"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecoratorProvider"},{id:"margin.statusactionbar.evaluation",path:"MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluationProvider"},
{id:"rtc.embeddedoutputs",path:"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.outputhandler",path:"MW/rtc/plugins/embeddedoutputs/OutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.linenumbertracker",path:"MW/rtc/plugins/embeddedoutputs/LineNumberTrackerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.linecontinuationtracker",path:"MW/rtc/plugins/embeddedoutputs/LineContinuationTrackerProvider",family:"embeddedoutputs"},
{id:"rtc.embeddedoutputs.statehandler",path:"MW/rtc/plugins/embeddedoutputs/StateHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.syntaxerrors",path:"MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.outputremover",path:"MW/rtc/plugins/embeddedoutputs/OutputRemoverProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.model",path:"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModelProvider",family:"embeddedoutputs"},
{id:"rtc.embeddedoutputs.alert",path:"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlertProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.viewservice",path:"MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewServiceProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.triggers",path:"MW/rtc/plugins/embeddedoutputs/triggers/TriggersProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.interruptaction",path:"MW/rtc/plugins/embeddedoutputs/triggers/InterruptActionProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.copyoutputs",path:"MW/rtc/plugins/embeddedoutputs/CopyOutputsProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.executionmanager",path:"MW/rtc/plugins/embeddedoutputs/ExecutionManagerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.evaltextcache",path:"MW/rtc/plugins/embeddedoutputs/EvalTextCacheProvider",family:"executioncontrols"},{id:"rtc.embeddedoutputs.clearoutputscache",path:"MW/rtc/plugins/embeddedoutputs/ClearOutputsCacheProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.currentoutputservice",path:"MW/rtc/plugins/embeddedoutputs/CurrentOutputServiceProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.figureoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.figureconnectionmanager",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManagerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.codegen",
path:"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.matrixoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.variableoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.variablestringoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandlerProvider",
family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.symbolicoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.textoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.warningoutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandlerProvider",family:"embeddedoutputs"},
{id:"rtc.embeddedoutputs.erroroutputhandler",path:"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandlerProvider",family:"embeddedoutputs"},{id:"rtc.embeddedoutputs.executiondatamanager",path:"MW/rtc/plugins/embeddedoutputs/ExecutionDataManagerProvider",family:"embeddedoutputs"},{id:"rtc.exportnotifier",path:"MW/rtc/plugins/export/ExportNotifierProvider"},{id:"rtc.document.executablecode.executablecodeservice",path:"MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeServiceProvider",
family:"embeddedoutputs"},{id:"rtc.document.executablecode.executablecodeconverter",path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverterProvider",family:"embeddedoutputs"},{id:"rtc.document.executablecode.executablecodeconverter.rootnodeconverter",path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverterProvider",family:"embeddedoutputs",subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},
{id:"rtc.document.executablecode.executablecodeconverter.linenodeconverter",path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverterProvider",family:"embeddedoutputs",subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},{id:"rtc.document.executablecode.executablecodeconverter.plaintextnodeconverter",path:"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverterProvider",family:"embeddedoutputs",
subsystem:"rtc.document.executablecode.executablecodeconverter.converter"},{id:"rtc.typocorrection",path:"MW/rtc/plugins/typocorrection/TypoSuggestionFeatureProvider",family:"typocorrection"},{id:"rtc.typocorrection.typocorrectionhandlerfactory",path:"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactoryProvider",family:"typocorrection"},{id:"rtc.eventhandler",path:"MW/rtc/plugins/events/EventHandlerProvider"},{id:"rtc.keyhandler",path:"MW/rtc/events/KeyHandlerProvider"},{id:"rtc.contextmenu",
path:"MW/rtc/plugins/contextmenu/ContextMenuProvider",family:"contextmenu"},{id:"rtc.contextmenu.generator",path:"MW/rtc/plugins/contextmenu/DojoContextMenuGeneratorProvider",family:"contextmenu"},{id:"rtc.contextmenu.model",path:"MW/rtc/plugins/contextmenu/DocumentContextMenuModelProvider",family:"contextmenu"},{id:"rtc.code.sections.sectionbreak",path:"MW/rtc/plugins/sectionbreak/SectionBreakProvider",family:"rtc.sectionbreak"},{id:"rtc.code.sections.sectionbreak.contentconverter",path:"MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverterProvider",
family:"rtc.sectionbreak",subsystem:"rtc.nodes.contentconverter.converter"},{id:"rtc.code.sections.sectionbreak.coordinateconverter",path:"MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverterProvider",family:"rtc.sectionbreak",subsystem:"rtc.view.coordinateconverter.converter"},{id:"rtc.code.sections.sectionbreak.insertionrules",path:"MW/rtc/plugins/sectionbreak/SectionBreakInsertionRulesProvider",family:"rtc.sectionbreak",subsystem:"rtc.insertionrule"},{id:"rtc.code.sections.sectionbreak.layouter",
path:"MW/rtc/plugins/sectionbreak/view/SectionBreakLayouterProvider",family:"rtc.sectionbreak",subsystem:"rtc.view.layoutmanager.layouter"},{id:"rtc.code.sections.contributor.sectionbreak",path:"MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributorProvider"},{id:"rtc.imeinput",path:"MW/rtc/plugins/imeinput/IMEInputProvider"},{id:"rtc.view.movehiddenkeycapture",path:"MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCaptureProvider"},{id:"rtc.editordataservice",path:"MW/rtc/plugins/editordataservice/EditorDataServiceProvider"},
{id:"rtc.editordataservicemanager",path:"MW/rtc/plugins/editordataservice/EditorDataServiceManagerProvider"},{id:"rtc.undoredo.editblock",family:"undoredo",path:"MW/rtc/plugins/undoredo/EditBlockControllerProvider"},{id:"rtc.undoredo.controller",family:"undoredo",path:"MW/rtc/plugins/undoredo/UndoRedoControllerProvider"},{id:"rtc.undoredo.action",family:"undoredo",path:"MW/rtc/plugins/undoredo/UndoRedoActionProvider"},{id:"rtc.undoredo.cursor",family:"undoredo",path:"MW/rtc/plugins/undoredo/UndoRedoCursorProvider"},
{id:"rtc.view.coordinateconverter.converter.plaintext",path:"MW/rtc/view/coordinateconverter/PlainTextCoordinateConverterProvider",subsystem:"rtc.view.coordinateconverter.converter",requiredForSubsystem:!0},{id:"rtc.view.coordinateconverter.converter.root",path:"MW/rtc/view/coordinateconverter/RootCoordinateConverterProvider",subsystem:"rtc.view.coordinateconverter.converter",requiredForSubsystem:!0},{id:"rtc.view.coordinateconverter",path:"MW/rtc/view/coordinateconverter/CoordinateConverterProvider"},
{id:"rtc.view.rangeconverter.converter.plaintext",path:"MW/rtc/view/rangeconverter/PlainTextRangeConverterProvider",subsystem:"rtc.view.rangeconverter.converter",requiredForSubsystem:!0},{id:"rtc.view.rangeconverter",path:"MW/rtc/view/rangeconverter/RangeConverterProvider"},{id:"rtc.plugins.cursorgripper",path:"MW/rtc/plugins/cursorgripper/CursorGripperProvider"},{id:"rtc.plugins.device.ios.virtualkeyboardshortcutbar",path:"MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBarProvider"},{id:"rtc.executionservice",
path:"MW/rtc/execution/ExecutionServiceProvider"},{id:"rtc.embeddedoutputs.splitterpositionmodel",path:"MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModelProvider",family:"embeddedoutputs"},{id:"rtc.execution.actions",path:"MW/rtc/plugins/execution/ExecutionActionsProvider"},{id:"matlab.services.busyidle",path:"MW/rtc/plugins/execution/BusyIdleServicesProvider"},{id:"rtc.service.documentloaded",path:"MW/rtc/plugins/debug/DocumentLoadedServiceProvider"}]}})},"MW/rtc/clipboardservice/ClipboardProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/clipboardservice/ClipboardService","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return g.getInternalClipboard()}})})},"MW/rtc/clipboardservice/ClipboardService":function(){define(["mw-messageservice/MessageService","MW/rtc/clipboardservice/InternalClipboard","MW/rtc/clipboardservice/ConnectorClipboard","MW/rtc/clipboardservice/BrowserSyncedClipboard"],
function(h,f,g,e){return{_internalClipboard:null,_browserSyncedClipboard:null,getInternalClipboard:function(){this._internalClipboard||(this._internalClipboard=new f);return this._internalClipboard},getConnectorClipboard:function(){return new g(h)},getBrowserSyncedClipboard:function(){this._browserSyncedClipboard||(this._browserSyncedClipboard=new e);return this._browserSyncedClipboard},createClipboard:function(){return new f}}})},"mw-messageservice/MessageService":function(){define("dojo/_base/lang dojo/aspect ./messageserviceimpl/MessageServiceAsync ./messageserviceimpl/MessageServiceBase ./messageserviceimpl/MessageServiceReqResp mw-remote/Remote".split(" "),
function(h,f,g,e,d,c){var b=new e;e={messageService:b,subscribe:h.hitch(b,"subscribe"),unsubscribe:h.hitch(b,"unsubscribe"),publish:h.hitch(b,"publish"),start:h.hitch(b,"start"),stop:h.hitch(b,"stop"),isRunning:h.hitch(b,"isStarted"),isStarted:h.hitch(b,"isStarted"),isConnected:h.hitch(b,"isConnected"),isFatallyDisconnected:h.hitch(b,"isFatallyDisconnected"),isDisconnected:h.hitch(b,"isDisconnected"),setLatency:h.hitch(b,"setLatency"),setErrorRate:h.hitch(b,"setErrorRate"),onConnected:function(){},
onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},handleMessage:h.hitch(b,"handleMessage"),internalMotwDisableStart:function(){this._startFunction=this.start;this.start=function(){}},internalMotwEnableStart:function(){this._startFunction&&(this.start=this._startFunction,this._startFunction=null)}};f.after(b,"onConnected",h.hitch(e,"onConnected"),!0);f.after(b,"onDisconnected",h.hitch(e,"onDisconnected"),!0);f.after(b,"onReconnected",
h.hitch(e,"onReconnected"),!0);f.after(b,"onFatallyDisconnected",h.hitch(e,"onFatallyDisconnected"),!0);f.after(b,"onNotConnected",h.hitch(e,"onNotConnected"),!0);var a=c.enableServerOnWorkerAsync;c.enableServerOnWorkerAsync=function(){a();b.setDelegate(new g(c))};var k=c.disableServerOnWorkerAsync;c.disableServerOnWorkerAsync=function(){k();b.setDelegate(new d(c,b))};c.isServerOnWorkerAsyncEnabled()?c.enableServerOnWorkerAsync():c.disableServerOnWorkerAsync();return e})},"mw-messageservice/messageserviceimpl/MessageServiceAsync":function(){define("dojo/_base/declare dojo/_base/config dojo/aspect dojo/json dojo/Deferred dojox/cometd/cometd dojox/cometd/AckExtension mw-log/Log mw-remote/iframeproxy/IframeProxyClient".split(" "),
function(h,f,g,e,d,c,b,a,k){var l;c.JSON.toJSON=e.stringify;c.JSON.fromJSON=e.parse;var m=0,q=0,n={};setInterval(function(){m+=200;Object.keys(n).forEach(function(a){var b=n[a];b.execTime<=m&&(b.func(),delete n[a])})},200);var p=function(a,d,e){var f=new c.LongPollingTransport,f=c.Transport.derive(f);f.xhrSend=function(a){var b=d.sendMessage(a.body,a.url,{headers:a.headers});b.then(a.onSuccess,function(b){a.onError(b,b)});return{abort:function(){b.cancel()}}};var g=new c.Cometd(a),l=c.Utils.setTimeout;
c.Utils.setTimeout=function(a,b,c){if(0===c)return l(a,b,c);q+=1;n[q]={func:function(){try{b()}catch(a){g._debug("Exception invoking timed function",b,a)}},execTime:m+c};return q};c.Utils.clearTimeout=function(a){delete n[a]};c.WebSocket=k.WebSocket;k.WebSocket.proxyClient=d;g.registerExtension("ack",new b);e.websocket&&g.registerTransport("websocket",new c.WebSocketTransport,0);g.registerTransport("long-polling",f,1);return g};l=h([],{BASE_PREFIX:"/matlab",BASE_END_POINT:"messageservice/async",logCometdLifecycle:!1,
logCometdSubscriptions:!1,constructor:function(b,c,d,e){this.remote=b;this.constructCometD=c||p;this.cometdProperties=e||{connectTimeout:5E3,maxBackoff:1E4,logLevel:"info",maxNetworkDelay:2E4,appendMessageTypeToURL:!1,autoBatch:!0};this._webSocket={"try":!0,connectedAtLeastOnce:!1};b=["maxNetworkDelay","connectTimeout","logLevel"];if(c=f.cometdProperties)for(e=0;e<b.length;e+=1){var l=b[e];void 0!==c[l]&&(this.cometdProperties[l]=c[l])}this.workerProxyAsyncClient=d||new k("remoteWorkerAsyncProducer");
var m=this;g.after(this.workerProxyAsyncClient,"onError",function(b){m.cometd&&(m.logCometdLifecycle&&a.info("MessageServiceAsync disconnecting cometd due to IFrame error."),m.cometd.disconnect());m.onConnectionError(b)},!0);this.subscriptions={};this.recentMessages=[];this._deferredCleanupFunction=function(){m._deferredCleanup=!1;m.recentMessages=[]}},onMessage:function(a){},onConnectionError:function(a){},connect:function(){this.routingHost=l.workerHostOverride||this.remote.getWorkerRoutingHost();
this.routingKey=this.remote.getWorkerRoutingKey();this.computeToken=this.remote.getComputeSessionId();this.workerProxyAsyncClient.setRemotePageHost(this.routingHost,this.routingKey,this.computeToken);var b={};l.enableWebsocket&&this._webSocket.try?b.websocket=!0:(b.websocket=!1,this._webSocket.try=!1);var c=this.constructCometD("messageService",this.workerProxyAsyncClient,b);this.cometd=c;this.logCometdLifecycle&&a.info("MessageServiceAsync constructing new cometd instance.");b=this._createOneShotMessagePromise("/meta/handshake");
this._createListenerForUnknownClient();var k=this,e=new d;b.then(function(b){k.logCometdLifecycle&&a.info("MessageServiceAsync cometd handshake successful.",b,c.getClientId(),c);c.isDisconnected()?(a.error("MessageServiceAsync cometd handshake successful but still disconnected!"),c.disconnect(),e.reject(b)):("websocket"===c.getTransport().getType()&&(k._webSocket.connectedAtLeastOnce=!0),e.resolve(b))},function(b){k.logCometdLifecycle&&a.info("MessageServiceAsync disconnecting cometd due to handshake failure.",
b,c.getClientId(),c);c.disconnect();if(b.request&&b.request.supportedConnectionTypes){var d=b.request.supportedConnectionTypes;1<d.length&&("websocket"===d[0]&&!k._webSocket.connectedAtLeastOnce)&&(k._webSocket.try=!1)}e.reject(b)});this.cometdProperties.url=this._getEndpoint();c.init(this.cometdProperties);return e.promise},disconnect:function(){this.logCometdLifecycle&&a.info("MessageServiceAsync disconnecting cometd due to disconnect call.",this.cometd.getClientId());var b=this._createOneShotMessagePromise("/meta/disconnect");
this.cometd.disconnect();return b},cleanup:function(){this.cometd&&(this.logCometdLifecycle&&a.info("MessageServiceAsync disconnecting cometd due to cleanup call.",this.cometd,this.cometd&&this.cometd.getClientId()),this.cometd.disconnect(),this.cometd=null)},delegateConnected:function(){return this.cometd?!this.cometd.isDisconnected():!1},doPublish:function(a,b){var c=this._createOneShotMessagePromise("/meta/publish");this.cometd.publish(this._getRequestChannel(a),b);return c},doSubscribe:function(b){this.logCometdSubscriptions&&
a.info("MessageServiceAsync subscribing cometd to channel: "+b);var c=this._createOneShotMessagePromise("/meta/subscribe");this.subscriptions[b]=this.cometd.subscribe(this._getRequestChannel(b),this,this._handleCometResponse);return c},doUnsubscribe:function(b){if(this.subscriptions[b]){this.logCometdSubscriptions&&a.info("MessageServiceAsync unsubscribing cometd from channel: "+b);var c=this._createOneShotMessagePromise("/meta/unsubscribe");this.cometd.unsubscribe(this.subscriptions[b]);delete this.subscriptions[b];
return c}return(new d).resolve({successful:!0})},doStartBatch:function(){this.cometd.startBatch()},doEndBatch:function(){this.cometd.endBatch()},doSetLatency:function(a){this.workerProxyAsyncClient.setLatency(a)},doSetErrorRate:function(a){this.workerProxyAsyncClient.setErrorRate(a)},_handleCometResponse:function(a){if(this._shouldHandleMessage(a))this.onMessage(this._stripBasePrefixAndConvertToJson(a))},_shouldHandleMessage:function(a){return!a.id&&0>this.recentMessages.indexOf(a)?(this.recentMessages.push(a),
this._deferRecentMessagesCleanup(),!0):!1},_deferRecentMessagesCleanup:function(){this._deferredCleanup||(this._deferredCleanup=setTimeout(this._deferredCleanupFunction,0))},_createOneShotMessagePromise:function(b){var c=new d;this._addOneShotListener(b,function(b){b.successful?c.resolve(b):(a.warn("Message failed: ",b),c.reject(b))});return c.promise},_addOneShotListener:function(a,b){var c=this,d=this.cometd,k;k=this.cometd.addListener(a,function(a){d.removeListener(k);b.apply(c,arguments)})},_createListenerForUnknownClient:function(){var a=
this.cometd,b=this;a.addListener("/meta/connect",function(c){!c.successful&&(c.advice&&"handshake"===c.advice.reconnect)&&(a.disconnect(),b.onConnectionError(c.error))})},_getEndpoint:function(){return this.routingHost+this.BASE_END_POINT+"?routingkey\x3d"+this.routingKey},_getRequestChannel:function(a){return this.BASE_PREFIX+a},_stripBasePrefixAndConvertToJson:function(a){return{channel:a.channel.substring(this.BASE_PREFIX.length),data:a.data}}});l.enableWebsocket=!1;l.workerHostOverride=!1;0<=
location.search.indexOf("websocket\x3don")&&(l.enableWebsocket=!0);return l})},"dojox/cometd/cometd":function(){define(function(){var h=this.org=this.org||{};h.cometd={};h.cometd.JSON={};h.cometd.JSON.toJSON=h.cometd.JSON.fromJSON=function(f){throw"Abstract";};h.cometd.Utils={};h.cometd.Utils.isString=function(f){return void 0===f||null===f?!1:"string"===typeof f||f instanceof String};h.cometd.Utils.isArray=function(f){return void 0===f||null===f?!1:f instanceof Array};h.cometd.Utils.inArray=function(f,
g){for(var e=0;e<g.length;++e)if(f===g[e])return e;return-1};h.cometd.Utils.setTimeout=function(f,g,e){return window.setTimeout(function(){try{g()}catch(d){f._debug("Exception invoking timed function",g,d)}},e)};h.cometd.Utils.clearTimeout=function(f){window.clearTimeout(f)};h.cometd.TransportRegistry=function(){var f=[],g={};this.getTransportTypes=function(){return f.slice(0)};this.findTransportTypes=function(e,d,c){for(var b=[],a=0;a<f.length;++a){var k=f[a];!0===g[k].accept(e,d,c)&&b.push(k)}return b};
this.negotiateTransport=function(e,d,c,b){for(var a=0;a<f.length;++a)for(var k=f[a],l=0;l<e.length;++l)if(k===e[l]){var m=g[k];if(!0===m.accept(d,c,b))return m}return null};this.add=function(e,d,c){for(var b=!1,a=0;a<f.length;++a)if(f[a]===e){b=!0;break}b||("number"!==typeof c?f.push(e):f.splice(c,0,e),g[e]=d);return!b};this.find=function(e){for(var d=0;d<f.length;++d)if(f[d]===e)return g[e];return null};this.remove=function(e){for(var d=0;d<f.length;++d)if(f[d]===e)return f.splice(d,1),d=g[e],delete g[e],
d;return null};this.clear=function(){f=[];g={}};this.reset=function(){for(var e=0;e<f.length;++e)g[f[e]].reset()}};h.cometd.Transport=function(){var f,g;this.registered=function(e,d){f=e;g=d};this.unregistered=function(){g=f=null};this._debug=function(){g._debug.apply(g,arguments)};this._mixin=function(){return g._mixin.apply(g,arguments)};this.getConfiguration=function(){return g.getConfiguration()};this.getAdvice=function(){return g.getAdvice()};this.setTimeout=function(e,d){return h.cometd.Utils.setTimeout(g,
e,d)};this.clearTimeout=function(e){h.cometd.Utils.clearTimeout(e)};this.convertToMessages=function(e){if(h.cometd.Utils.isString(e))try{return h.cometd.JSON.fromJSON(e)}catch(d){throw this._debug("Could not convert to JSON the following string",'"'+e+'"'),d;}if(h.cometd.Utils.isArray(e))return e;if(void 0===e||null===e)return[];if(e instanceof Object)return[e];throw"Conversion Error "+e+", typeof "+typeof e;};this.accept=function(e,d,c){throw"Abstract";};this.getType=function(){return f};this.send=
function(e,d){throw"Abstract";};this.reset=function(){this._debug("Transport",f,"reset")};this.abort=function(){this._debug("Transport",f,"aborted")};this.toString=function(){return this.getType()}};h.cometd.Transport.derive=function(f){function g(){}g.prototype=f;return new g};h.cometd.RequestTransport=function(){function f(a){for(;0<m.length;){var b=m[0],c=b[0],b=b[1];if(c.url===a.url&&c.sync===a.sync)m.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",
b.id);else break}}function g(a,b){this.transportSend(a,b);b.expired=!1;if(!a.sync){var c=this.getConfiguration().maxNetworkDelay,d=c;!0===b.metaConnect&&(d+=this.getAdvice().timeout);this._debug("Transport",this.getType(),"waiting at most",d,"ms for the response, maxNetworkDelay",c);var k=this;b.timeout=this.setTimeout(function(){b.expired=!0;b.xhr&&b.xhr.abort();var c="Request "+b.id+" of transport "+k.getType()+" exceeded "+d+" ms max network delay";k._debug(c);k.complete(b,!1,b.metaConnect);a.onFailure(b.xhr,
a.messages,"timeout",c)},d)}}function e(b){var c=++a,d={id:c,metaConnect:!1};l.length<this.getConfiguration().maxConnections-1?(l.push(d),g.call(this,b,d)):(this._debug("Transport",this.getType(),"queueing request",c,"envelope",b),m.push([b,d]))}function d(a,b){var c=h.cometd.Utils.inArray(a,l);0<=c&&l.splice(c,1);if(0<m.length){var c=m.shift(),d=c[0],k=c[1];this._debug("Transport dequeued request",k.id);if(b)this.getConfiguration().autoBatch&&f.call(this,d),e.call(this,d),this._debug("Transport completed request",
a.id,d);else{var g=this;this.setTimeout(function(){g.complete(k,!1,k.metaConnect);d.onFailure(k.xhr,d.messages,"error","Previous request failed")},0)}}}var c=new h.cometd.Transport,b=h.cometd.Transport.derive(c),a=0,k=null,l=[],m=[];b.complete=function(a,b,c){if(c){a=a.id;this._debug("Transport",this.getType(),"metaConnect complete, request",a);if(null!==k&&k.id!==a)throw"Longpoll request mismatch, completing request "+a;k=null}else d.call(this,a,b)};b.transportSend=function(a,b){throw"Abstract";
};b.transportSuccess=function(a,b,c){if(!b.expired)if(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&0<c.length)a.onSuccess(c);else a.onFailure(b.xhr,a.messages,"Empty HTTP response")};b.transportFailure=function(a,b,c,d){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c,d))};b.send=function(b,c){if(c){if(null!==k)throw"Concurrent metaConnect requests not allowed, request id\x3d"+k.id+" not yet completed";var d=++a;this._debug("Transport",
this.getType(),"metaConnect send, request",d,"envelope",b);d={id:d,metaConnect:!0};g.call(this,b,d);k=d}else e.call(this,b)};b.abort=function(){c.abort();for(var a=0;a<l.length;++a){var b=l[a];this._debug("Aborting request",b);b.xhr&&b.xhr.abort()}k&&(this._debug("Aborting metaConnect request",k),k.xhr&&k.xhr.abort());this.reset()};b.reset=function(){c.reset();k=null;l=[];m=[]};return b};h.cometd.LongPollingTransport=function(){var f=new h.cometd.RequestTransport,g=h.cometd.Transport.derive(f),e=
!0;g.accept=function(d,c,b){return e||!c};g.xhrSend=function(d){throw"Abstract";};g.transportSend=function(d,c){this._debug("Transport",this.getType(),"sending request",c.id,"envelope",d);var b=this;try{var a=!0;c.xhr=this.xhrSend({transport:this,url:d.url,sync:d.sync,headers:this.getConfiguration().requestHeaders,body:h.cometd.JSON.toJSON(d.messages),onSuccess:function(a){b._debug("Transport",b.getType(),"received response",a);var k=!1;try{var f=b.convertToMessages(a);0===f.length?(e=!1,b.transportFailure(d,
c,"no response",null)):(k=!0,b.transportSuccess(d,c,f))}catch(g){b._debug(g),k||(e=!1,b.transportFailure(d,c,"bad response",g))}},onError:function(k,f){e=!1;a?b.setTimeout(function(){b.transportFailure(d,c,k,f)},0):b.transportFailure(d,c,k,f)}});a=!1}catch(k){e=!1,this.setTimeout(function(){b.transportFailure(d,c,"error",k)},0)}};g.reset=function(){f.reset();e=!0};return g};h.cometd.CallbackPollingTransport=function(){var f=new h.cometd.RequestTransport,f=h.cometd.Transport.derive(f);f.accept=function(f,
e,d){return!0};f.jsonpSend=function(f){throw"Abstract";};f.transportSend=function(f,e){for(var d=this,c=0,b=f.messages.length,a=[];0<b;){var k=h.cometd.JSON.toJSON(f.messages.slice(c,c+b)),k=f.url.length+encodeURI(k).length;if(2E3<k){if(1===b){var l="Bayeux message too big ("+k+" bytes, max is 2000) for transport "+this.getType();this.setTimeout(function(){d.transportFailure(f,e,"error",l)},0);return}--b}else a.push(b),c+=b,b=f.messages.length-c}var m=f;if(1<a.length){c=0;b=a[0];this._debug("Transport",
this.getType(),"split",f.messages.length,"messages into",a.join(" + "));m=this._mixin(!1,{},f);m.messages=f.messages.slice(c,b);m.onSuccess=f.onSuccess;m.onFailure=f.onFailure;for(k=1;k<a.length;++k){var q=this._mixin(!1,{},f),c=b,b=b+a[k];q.messages=f.messages.slice(c,b);q.onSuccess=f.onSuccess;q.onFailure=f.onFailure;this.send(q,e.metaConnect)}}this._debug("Transport",this.getType(),"sending request",e.id,"envelope",m);try{var n=!0;this.jsonpSend({transport:this,url:m.url,sync:m.sync,headers:this.getConfiguration().requestHeaders,
body:h.cometd.JSON.toJSON(m.messages),onSuccess:function(a){var b=!1;try{var c=d.convertToMessages(a);0===c.length?d.transportFailure(m,e,"no response"):(b=!0,d.transportSuccess(m,e,c))}catch(k){d._debug(k),b||d.transportFailure(m,e,"bad response",k)}},onError:function(a,b){n?d.setTimeout(function(){d.transportFailure(m,e,a,b)},0):d.transportFailure(m,e,a,b)}});n=!1}catch(p){this.setTimeout(function(){d.transportFailure(m,e,"error",p)},0)}};return f};h.cometd.WebSocketTransport=function(){function f(){var a=
b.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);var c=this,d=null,k=b.getConfiguration().connectTimeout;0<k&&(d=this.setTimeout(function(){d=null;n||(c._debug("Transport",c.getType(),"timed out while connecting to URL",a,":",k,"ms"),c.onClose(1002,"Connect Timeout"))},k));var e=new h.cometd.WebSocket(a),f=function(a){var b=a?a.code:1E3;a=a?a.reason:void 0;c._debug("WebSocket closed",b,"/",a,e);d&&(c.clearTimeout(d),d=null);if(e!==q)c._debug("Ignoring close event, WebSocket",
q);else c.onClose(b,a)};e.onopen=function(){c._debug("WebSocket opened",e);d&&(c.clearTimeout(d),d=null);if(e!==q)c._debug("Ignoring open event, WebSocket",q);else c.onOpen()};e.onclose=f;e.onerror=function(){f({code:1002})};e.onmessage=function(a){c._debug("WebSocket message",a,e);if(e!==q)c._debug("Ignoring message event, WebSocket",q);else c.onMessage(a)};q=e;this._debug("Transport",this.getType(),"configured callbacks on",e)}function g(a,b){var c=h.cometd.JSON.toJSON(a.messages);q.send(c);this._debug("Transport",
this.getType(),"sent",a,"metaConnect \x3d",b);var d=c=this.getConfiguration().maxNetworkDelay;b&&(d+=this.getAdvice().timeout,p=!0);for(var k=[],e=0;e<a.messages.length;++e){var f=a.messages[e];if(f.id){k.push(f.id);var g=q;m[f.id]=this.setTimeout(function(){g&&g.close(1E3,"Timeout")},d)}}this._debug("Transport",this.getType(),"waiting at most",d,"ms for messages",k,"maxNetworkDelay",c,", timeouts:",m)}function e(a,b){try{null===q?f.call(this):n&&g.call(this,a,b)}catch(c){var d=q;this.setTimeout(function(){a.onFailure(d,
a.messages,"error",c)},0)}}var d=new h.cometd.Transport,c=h.cometd.Transport.derive(d),b,a=!0,k=!1,l={},m={},q=null,n=!1,p=!1,r;c.onOpen=function(){this._debug("Transport",this.getType(),"opened",q);k=n=!0;this._debug("Sending pending messages",l);for(var a in l){var b=l[a],c=b[0],b=b[1];r=c.onSuccess;g.call(this,c,b)}};c.onMessage=function(a){this._debug("Transport",this.getType(),"received websocket message",a,q);var b=!1;a=this.convertToMessages(a.data);for(var c=[],d=0;d<a.length;++d){var k=a[d];
if((/^\/meta\//.test(k.channel)||void 0===k.data)&&k.id){c.push(k.id);var e=m[k.id];e&&(this.clearTimeout(e),delete m[k.id],this._debug("Transport",this.getType(),"removed timeout for message",k.id,", timeouts",m))}"/meta/connect"===k.channel&&(p=!1);"/meta/disconnect"===k.channel&&!p&&(b=!0)}d=!1;for(k=0;k<c.length;++k){var f=c[k],g;for(g in l){var e=g.split(","),n=h.cometd.Utils.inArray(f,e);if(0<=n){d=!0;e.splice(n,1);f=l[g][0];n=l[g][1];delete l[g];0<e.length&&(l[e.join(",")]=[f,n]);break}}}d&&
this._debug("Transport",this.getType(),"removed envelope, envelopes",l);r.call(this,a);b&&q.close(1E3,"Disconnect")};c.onClose=function(b,c){this._debug("Transport",this.getType(),"closed",b,c,q);a=k;for(var d in m)this.clearTimeout(m[d]);m={};for(var e in l)d=l[e][0],l[e][1]&&(p=!1),d.onFailure(q,d.messages,"closed "+b+"/"+c);l={};null!==q&&n&&q.close(1E3,"Close");n=!1;q=null};c.registered=function(a,c){d.registered(a,c);b=c};c.accept=function(c,d,k){return a&&!!h.cometd.WebSocket&&!1!==b.websocketEnabled};
c.send=function(a,b){this._debug("Transport",this.getType(),"sending",a,"metaConnect \x3d",b);for(var c=[],d=0;d<a.messages.length;++d){var k=a.messages[d];k.id&&c.push(k.id)}l[c.join(",")]=[a,b];this._debug("Transport",this.getType(),"stored envelope, envelopes",l);e.call(this,a,b)};c.abort=function(){d.abort();if(null!==q)try{q.close(1001)}catch(a){this._debug(a)}this.reset()};c.reset=function(){d.reset();null!==q&&n&&q.close(1E3,"Reset");a=!0;k=!1;m={};l={};q=null;n=!1;r=null};return c};h.cometd.Cometd=
function(f){function g(a){return h.cometd.Utils.isString(a)}function e(a){return void 0===a||null===a?!1:"function"===typeof a}function d(a,b){if(window.console){var c=window.console[a];e(c)&&c.apply(window.console,b)}}function c(){for(var a in ba)for(var b=ba[a],c=b.length-1;0<=c;--c){var d=b[c];d&&!d.listener&&(b.splice(c,1),E._debug("Removed subscription",d,"for channel",a))}}function b(a){V!==a&&(E._debug("Status",V,"-\x3e",a),V=a)}function a(){return"disconnecting"===V||"disconnected"===V}function k(a,
b,c,d,k){try{return b.call(a,d)}catch(f){E._debug("Exception during execution of extension",c,f);a=E.onExtensionException;if(e(a)){E._debug("Invoking extension exception callback",c,f);try{a.call(E,f,c,k,d)}catch(g){E._info("Exception during execution of exception callback in extension",c,g)}}return d}}function l(a){for(var b=0;b<da.length&&!(void 0===a||null===a);++b){var c=da[b],d=c.extension.outgoing;e(d)&&(c=k(c.extension,d,c.name,a,!0),a=void 0===c?a:c)}return a}function m(a,b){var c=ba[a];if(c&&
0<c.length)for(var d=c.length-1;0<=d;--d){var k=c[d];try{k.callback.call(k.scope,b)}catch(f){E._debug("Exception during notification",k,b,f);var g=E.onListenerException;if(e(g)){E._debug("Invoking listener exception callback",k,f);try{g.call(E,f,k.handle,k.listener,b)}catch(l){E._info("Exception during execution of listener callback",k,l)}}}}}function q(a,b){m(a,b);for(var c=a.split("/"),d=c.length-1,k=d;0<k;--k){var e=c.slice(0,k).join("/")+"/*";k===d&&m(e,b);e+="*";m(e,b)}}function n(){null!==ka&&
h.cometd.Utils.clearTimeout(ka);ka=null}function p(a){n();var b=fa.interval+$;E._debug("Function scheduled in",b,"ms, interval \x3d",fa.interval,"backoff \x3d",$,a);ka=h.cometd.Utils.setTimeout(E,a,b)}function r(a,b,c,d){for(var k=0;k<b.length;++k){var f=b[k];f.id=""+ ++ha;U&&(f.clientId=U);var g=void 0;e(f._callback)&&(g=f._callback,delete f._callback);f=l(f);void 0!==f&&null!==f?(b[k]=f,g&&(T[f.id]=g)):b.splice(k--,1)}0!==b.length&&(k=X.url,X.appendMessageTypeToURL&&(k.match(/\/$/)||(k+="/"),d&&
(k+=d)),a={url:k,sync:a,messages:b,onSuccess:function(a){try{va.call(E,a)}catch(b){E._debug("Exception during handling of messages",b)}},onFailure:function(a,b,c,d){try{xa.call(E,a,b,c,d)}catch(k){E._debug("Exception during handling of failure",k)}}},E._debug("Send",a),S.send(a,c))}function s(a){0<ea||!0===aa?W.push(a):r(!1,[a],!1)}function t(){var a=W;W=[];0<a.length&&r(!1,a,!1)}function u(){b("connecting");p(function(){if(!a()){var c={channel:"/meta/connect",connectionType:S.getType()};ua||(c.advice=
{timeout:0});b("connecting");E._debug("Connect sent",c);r(!1,[c],!0,"connect");b("connected")}})}function v(a){a&&(fa=E._mixin(!1,{},X.advice,a),E._debug("New advice",fa))}function w(a){n();a&&S.abort();U=null;b("disconnected");$=ea=0;0<W.length&&(xa.call(E,void 0,W,"error","Disconnected"),W=[])}function x(d){U=null;c();a()?(Z.reset(),v(X.advice)):v(E._mixin(!1,fa,{reconnect:"retry"}));ea=0;aa=!0;qa=d;d=Z.findTransportTypes("1.0",Y,X.url);var k=E._mixin(!1,{},qa,{version:"1.0",minimumVersion:"0.9",
channel:"/meta/handshake",supportedConnectionTypes:d,advice:{timeout:fa.timeout,interval:fa.interval}});S=Z.negotiateTransport(d,"1.0",Y,X.url);E._debug("Initial transport is",S.getType());b("handshaking");E._debug("Handshake sent",k);r(!1,[k],!1,"handshake")}function B(){b("handshaking");aa=!0;p(function(){x(qa)})}function A(b){q("/meta/handshake",b);q("/meta/unsuccessful",b);!a()&&"none"!==fa.reconnect?($<X.maxBackoff&&($+=X.backoffIncrement),B()):w(!1)}function D(b){q("/meta/connect",b);q("/meta/unsuccessful",
b);b=a()?"none":fa.reconnect;switch(b){case "retry":u();$<X.maxBackoff&&($+=X.backoffIncrement);break;case "handshake":Z.reset();$=0;B();break;case "none":w(!1);break;default:throw"Unrecognized advice action"+b;}}function F(a){w(!0);q("/meta/disconnect",a);q("/meta/unsuccessful",a)}function H(a){q("/meta/subscribe",a);q("/meta/unsuccessful",a)}function L(a){q("/meta/unsubscribe",a);q("/meta/unsuccessful",a)}function N(a){var b=T[a.id];e(b)&&(delete T[a.id],b.call(E,a))}function M(a){N(a);q("/meta/publish",
a);q("/meta/unsuccessful",a)}function P(b){for(var c=0;c<da.length&&!(void 0===b||null===b);++c){var d=da[X.reverseIncomingExtensions?da.length-1-c:c],f=d.extension.incoming;e(f)&&(d=k(d.extension,f,d.name,b,!1),b=void 0===d?b:d)}if(!(void 0===b||null===b))switch(v(b.advice),b.channel){case "/meta/handshake":if(b.successful){U=b.clientId;c=Z.negotiateTransport(b.supportedConnectionTypes,b.version,Y,X.url);if(null===c)throw"Could not negotiate transport with server; client "+Z.findTransportTypes(b.version,
Y,X.url)+", server "+b.supportedConnectionTypes;S!==c&&(E._debug("Transport",S,"-\x3e",c),S=c);aa=!1;t();b.reestablish=la;la=!0;q("/meta/handshake",b);b=a()?"none":fa.reconnect;switch(b){case "retry":$=0;u();break;case "none":w(!1);break;default:throw"Unrecognized advice action "+b;}}else A(b);break;case "/meta/connect":if(ua=b.successful)switch(q("/meta/connect",b),b=a()?"none":fa.reconnect,b){case "retry":$=0;u();break;case "none":w(!1);break;default:throw"Unrecognized advice action "+b;}else D(b);
break;case "/meta/disconnect":b.successful?(w(!1),q("/meta/disconnect",b)):F(b);break;case "/meta/subscribe":b.successful?q("/meta/subscribe",b):H(b);break;case "/meta/unsubscribe":b.successful?q("/meta/unsubscribe",b):L(b);break;default:void 0===b.successful?void 0!==b.data&&null!==b.data?q(b.channel,b):E._debug("Unknown message",b):b.successful?(N(b),q("/meta/publish",b)):M(b)}}function Q(a){if(a=ba[a])for(var b=0;b<a.length;++b)if(a[b])return!0;return!1}function O(a,b){var c={scope:a,method:b};
if(e(a))c.scope=void 0,c.method=a;else if(g(b)){if(!a)throw"Invalid scope "+a;c.method=a[b];if(!e(c.method))throw"Invalid callback "+b+" for scope "+a;}else if(!e(b))throw"Invalid callback "+b;return c}function I(a,b,c,d){b=O(b,c);E._debug("Adding listener on",a,"with scope",b.scope,"and callback",b.method);d={channel:a,scope:b.scope,callback:b.method,listener:d};b=ba[a];b||(b=[],b.subscriptionCounter=0,ba[a]=b);b.push(d);c=b.subscriptionCounter;b.subscriptionCounter+=1;d.id=c;d.handle=[a,c];E._debug("Added listener",
d,"for channel",a,"having id \x3d",c);return d.handle}var E=this,K=f||"default",Y=!1,Z=new h.cometd.TransportRegistry,S,V="disconnected",ha=0,U=null,ea=0,W=[],aa=!1,ba={},$=0,ka=null,da=[],fa={},qa,T={},la=!1,ua=!1,X={connectTimeout:0,maxConnections:2,backoffIncrement:1E3,maxBackoff:6E4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1E4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6E4,interval:0,reconnect:"retry"}};this._mixin=function(a,b,c){for(var d=b||
{},k=2;k<arguments.length;++k){var e=arguments[k];if(!(void 0===e||null===e))for(var f in e){var g=e[f],l=d[f];g!==b&&void 0!==g&&(d[f]=a&&"object"===typeof g&&null!==g?g instanceof Array?this._mixin(a,l instanceof Array?l:[],g):this._mixin(a,"object"===typeof l&&!(l instanceof Array)?l:{},g):g)}}return d};this._warn=function(){d("warn",arguments)};this._info=function(){"warn"!==X.logLevel&&d("info",arguments)};this._debug=function(){"debug"===X.logLevel&&d("debug",arguments)};this._isCrossDomain=
function(a){return a&&a!==window.location.host};var va,xa;this.send=s;this.receive=P;va=function(a){E._debug("Received",a);for(var b=0;b<a.length;++b)P(a[b])};xa=function(a,b,c,d){E._debug("handleFailure",a,b,c,d);for(c=0;c<b.length;++c){var k=b[c];switch(k.channel){case "/meta/handshake":A({successful:!1,failure:!0,channel:"/meta/handshake",request:k,xhr:a,advice:{reconnect:"retry",interval:$}});break;case "/meta/connect":d=a;ua=!1;D({successful:!1,failure:!0,channel:"/meta/connect",request:k,xhr:d,
advice:{reconnect:"retry",interval:$}});break;case "/meta/disconnect":F({successful:!1,failure:!0,channel:"/meta/disconnect",request:k,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/subscribe":H({successful:!1,failure:!0,channel:"/meta/subscribe",request:k,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/unsubscribe":L({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:k,xhr:a,advice:{reconnect:"none",interval:0}});break;default:M({successful:!1,failure:!0,
channel:k.channel,request:k,xhr:a,advice:{reconnect:"none",interval:0}})}}};this.registerTransport=function(a,b,c){if(c=Z.add(a,b,c))this._debug("Registered transport",a),e(b.registered)&&b.registered(a,this);return c};this.getTransportTypes=function(){return Z.getTransportTypes()};this.unregisterTransport=function(a){var b=Z.remove(a);null!==b&&(this._debug("Unregistered transport",a),e(b.unregistered)&&b.unregistered());return b};this.unregisterTransports=function(){Z.clear()};this.findTransport=
function(a){return Z.find(a)};this.configure=function(a){E._debug("Configuring cometd object with",a);g(a)&&(a={url:a});a||(a={});X=E._mixin(!1,X,a);if(!X.url)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var b=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(X.url);a=b[8];var c=b[9];Y=E._isCrossDomain(b[2]);X.appendMessageTypeToURL&&(void 0!==c&&0<c.length?(E._info("Appending message type to URI "+a+c+" is not supported, disabling 'appendMessageTypeToURL' configuration"),
X.appendMessageTypeToURL=!1):(b=a.split("/"),c=b.length-1,a.match(/\/$/)&&(c-=1),0<=b[c].indexOf(".")&&(E._info("Appending message type to URI "+a+" is not supported, disabling 'appendMessageTypeToURL' configuration"),X.appendMessageTypeToURL=!1)))};this.init=function(a,b){this.configure(a);this.handshake(b)};this.handshake=function(a){b("disconnected");la=!1;x(a)};this.disconnect=function(c,d){if(!a()){void 0===d&&"boolean"!==typeof c&&(d=c,c=!1);var k=this._mixin(!1,{},d,{channel:"/meta/disconnect"});
b("disconnecting");r(!0===c,[k],!1,"disconnect")}};this.startBatch=function(){++ea};this.endBatch=function(){--ea;if(0>ea)throw"Calls to startBatch() and endBatch() are not paired";0===ea&&(!a()&&!aa)&&t()};this.batch=function(a,b){var c=O(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(d){throw this._debug("Exception during execution of batch",d),this.endBatch(),d;}};this.addListener=function(a,b,c){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;
if(!g(a))throw"Illegal argument type: channel must be a string";return I(a,b,c,!0)};this.removeListener=function(a){if(!h.cometd.Utils.isArray(a))throw"Invalid argument: expected subscription, not "+a;var b=ba[a[0]],c;if(0<b.length){c=a[1];a:{for(var d=0;d<b.length;){if(b[d].id===c){c=d;break a}d+=1}c=-1}-1!==c&&(b.splice(c,1),E._debug("Removed listener",a))}};this.clearListeners=function(){ba={}};this.subscribe=function(b,c,d,k){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+
arguments.length;if(!g(b))throw"Illegal argument type: channel must be a string";if(a())throw"Illegal state: already disconnected";e(c)&&(k=d,d=c,c=void 0);var f=!Q(b),l=I(b,c,d,!1);f&&(f=this._mixin(!1,{},k,{channel:"/meta/subscribe",subscription:b}),s(f));return l};this.unsubscribe=function(b,c){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(a())throw"Illegal state: already disconnected";this.removeListener(b);var d=b[0];Q(d)||(d=this._mixin(!1,{},c,
{channel:"/meta/unsubscribe",subscription:d}),s(d))};this.clearSubscriptions=function(){c()};this.publish=function(b,c,d,k){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(!g(b))throw"Illegal argument type: channel must be a string";if(a())throw"Illegal state: already disconnected";e(c)?(k=c,c=d={}):e(d)&&(k=d,d={});var f=this._mixin(!1,{},d,{channel:b,data:c,_callback:k});s(f)};this.getStatus=function(){return V};this.isDisconnected=a;this.setBackoffIncrement=
function(a){X.backoffIncrement=a};this.getBackoffIncrement=function(){return X.backoffIncrement};this.getBackoffPeriod=function(){return $};this.setLogLevel=function(a){X.logLevel=a};this.registerExtension=function(a,b){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: extension name must be a string";for(var c=!1,d=0;d<da.length;++d)if(da[d].name===a){c=!0;break}if(c)return this._info("Could not register extension with name",
a,"since another extension with the same name already exists"),!1;da.push({name:a,extension:b});this._debug("Registered extension",a);e(b.registered)&&b.registered(a,this);return!0};this.unregisterExtension=function(a){if(!g(a))throw"Illegal argument type: extension name must be a string";for(var b=!1,c=0;c<da.length;++c){var d=da[c];if(d.name===a){da.splice(c,1);b=!0;this._debug("Unregistered extension",a);a=d.extension;e(a.unregistered)&&a.unregistered();break}}return b};this.getExtension=function(a){for(var b=
0;b<da.length;++b){var c=da[b];if(c.name===a)return c.extension}return null};this.getName=function(){return K};this.getClientId=function(){return U};this.getURL=function(){return X.url};this.getTransport=function(){return S};this.getConfiguration=function(){return this._mixin(!0,{},X)};this.getAdvice=function(){return this._mixin(!0,{},fa)};h.cometd.WebSocket=window.WebSocket;h.cometd.WebSocket||(h.cometd.WebSocket=window.MozWebSocket)};return h.cometd})},"dojox/cometd/AckExtension":function(){define(["./cometd"],
function(h){return h.AckExtension=function(){var f,g=!1,e=-1;this.registered=function(d,c){f=c;f._debug("AckExtension: executing registration callback",void 0)};this.unregistered=function(){f._debug("AckExtension: executing unregistration callback",void 0);f=null};this.incoming=function(d){var c=d.channel;if("/meta/handshake"==c)g=d.ext&&d.ext.ack,f._debug("AckExtension: server supports acks",g);else if(g&&"/meta/connect"==c&&d.successful&&(c=d.ext)&&"number"===typeof c.ack)e=c.ack,f._debug("AckExtension: server sent ack id",
e);return d};this.outgoing=function(d){var c=d.channel;"/meta/handshake"==c?(d.ext||(d.ext={}),d.ext.ack=f&&!1!==f.ackEnabled,e=-1):g&&"/meta/connect"==c&&(d.ext||(d.ext={}),d.ext.ack=e,f._debug("AckExtension: client sending ack id",e));return d}}})},"mw-log/Log":function(){define(["dojo/date/locale"],function(h){return function(){function f(b){a&&(k||!c||!c.log)&&a.apply(d,b)}function g(a){b[a]=function(){if(0!==l&&c&&c[a])if("assert"===a){if(!arguments[0])if(d.ScriptEngine){var b=Array.prototype.slice.call(arguments);
b.shift();c[a](!1,b)}else c[a].apply(c,arguments)}else if(d.ScriptEngine)if(-1!==a.indexOf("profile"))c[a]();else c[a](arguments[0]);else c[a].apply(c,arguments)}}function e(a,k){b[k]=function(){var b=Array.prototype.slice.call(arguments),e=h.format(new Date,{selector:"date",datePattern:"h:m:s.SSS"}),g=[k].concat(b),b=[e].concat(b);m.push(g);m.length>q&&m.shift();f(g);if(c&&(0<l?l>a:n.length+l<=a))if(c.firebug&&"error"!==k)c[k].apply(d,b);else if(c[k])c[k](b);else c.log(b)}}var d=this,c=d.console,
b={},a,k,l=9,m=[],q=25,n=["error","warn","info","debug","log"],p="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),r;for(r=p.length;0<=(r-=1);)g(p[r]);for(r=n.length;0<=(r-=1);)e(r,n[r]);b.setLevel=function(a){l="number"===typeof a?a:9};b.setCallback=function(b,c,d){var e=m.length;a=b||null;k="boolean"===typeof c?c:!1;for(b=e-("number"===d?d:e);b<e;)f(m[b+=1])};return b}()})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
function(h,f,g,e,d,c,b,a,k){function l(a,c,d,k){return k.replace(/([a-z])\1*/ig,function(f){var g,l,m=f.charAt(0);f=f.length;var h=["abbr","wide","narrow"];switch(m){case "G":g=c[4>f?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":g=a.getFullYear();switch(f){case 1:break;case 2:if(!d.fullYear){g=String(g);g=g.substr(g.length-2);break}default:l=!0}break;case "Q":case "q":g=Math.ceil((a.getMonth()+1)/3);l=!0;break;case "M":case "L":g=a.getMonth();3>f?(g+=1,l=!0):(m=["months","L"==m?"standAlone":
"format",h[f-3]].join("-"),g=c[m][g]);break;case "w":g=n._getWeekOfYear(a,0);l=!0;break;case "d":g=a.getDate();l=!0;break;case "D":g=n._getDayOfYear(a);l=!0;break;case "e":case "c":if(g=a.getDay(),2>f){g=(g-e.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":g=a.getDay();3>f?(g+=1,l=!0):(m=["days","c"==m?"standAlone":"format",h[f-3]].join("-"),g=c[m][g]);break;case "a":m=12>a.getHours()?"am":"pm";g=d[m]||c["dayPeriods-format-wide-"+m];break;case "h":case "H":case "K":case "k":l=a.getHours();switch(m){case "h":g=
l%12||12;break;case "H":g=l;break;case "K":g=l%12;break;case "k":g=l||24}l=!0;break;case "m":g=a.getMinutes();l=!0;break;case "s":g=a.getSeconds();l=!0;break;case "S":g=Math.round(a.getMilliseconds()*Math.pow(10,f-3));l=!0;break;case "v":case "z":if(g=n._getZone(a,!0,d))break;f=4;case "Z":m=n._getZone(a,!1,d);m=[0>=m?"+":"-",b.pad(Math.floor(Math.abs(m)/60),2),b.pad(Math.abs(m)%60,2)];4==f&&(m.splice(0,0,"GMT"),m.splice(3,0,":"));g=m.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
k);}l&&(g=b.pad(g,f));return g})}function m(a,b,c,d){var k=function(a){return a};b=b||k;c=c||k;d=d||k;var e=a.match(/(''|[^'])+/g),g="'"==a.charAt(0);f.forEach(e,function(a,d){a?(e[d]=(g?c:b)(a.replace(/''/g,"'")),g=!g):e[d]=""});return d(e.join(""))}function q(a,b,d,k){k=c.escapeString(k);d.strict||(k=k.replace(" a"," ?a"));return k.replace(/([a-z])\1*/ig,function(c){var k;k=c.charAt(0);var e=c.length,f="",g="";d.strict?(1<e&&(f="0{"+(e-1)+"}"),2<e&&(g="0{"+(e-2)+"}")):(f="0?",g="0{0,2}");switch(k){case "y":k=
"\\d{2,4}";break;case "M":case "L":k=2<e?"\\S+?":"1[0-2]|"+f+"[1-9]";break;case "D":k="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+f+"[1-9][0-9]|"+g+"[1-9]";break;case "d":k="3[01]|[12]\\d|"+f+"[1-9]";break;case "w":k="[1-4][0-9]|5[0-3]|"+f+"[1-9]";break;case "E":case "e":case "c":k=".+?";break;case "h":k="1[0-2]|"+f+"[1-9]";break;case "k":k="1[01]|"+f+"\\d";break;case "H":k="1\\d|2[0-3]|"+f+"\\d";break;case "K":k="1\\d|2[0-4]|"+f+"[1-9]";break;case "m":case "s":k="[0-5]\\d";break;case "S":k="\\d{"+e+"}";
break;case "a":e=d.am||b["dayPeriods-format-wide-am"];f=d.pm||b["dayPeriods-format-wide-pm"];k=e+"|"+f;d.strict||(e!=e.toLowerCase()&&(k+="|"+e.toLowerCase()),f!=f.toLowerCase()&&(k+="|"+f.toLowerCase()),-1!=k.indexOf(".")&&(k+="|"+k.replace(/\./g,"")));k=k.replace(/\./g,"\\.");break;default:k=".*"}a&&a.push(c);return"("+k+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var n={};h.setObject(k.id.replace(/\//g,"."),n);n._getZone=function(a,b,c){return b?g.getTimezoneName(a):a.getTimezoneOffset()};n.format=
function(a,b){b=b||{};var c=d.normalizeLocale(b.locale),k=b.formatLength||"short",c=n._getGregorianBundle(c),e=[],f=h.hitch(this,l,a,c,b);if("year"==b.selector)return m(c["dateFormatItem-yyyy"]||"yyyy",f);var g;"date"!=b.selector&&(g=b.timePattern||c["timeFormat-"+k])&&e.push(m(g,f));"time"!=b.selector&&(g=b.datePattern||c["dateFormat-"+k])&&e.push(m(g,f));return 1==e.length?e[0]:c["dateTimeFormat-"+k].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return e[b]})};n.regexp=function(a){return n._parseInfo(a).regexp};
n._parseInfo=function(a){a=a||{};var b=d.normalizeLocale(a.locale),b=n._getGregorianBundle(b),c=a.formatLength||"short",k=a.datePattern||b["dateFormat-"+c],e=a.timePattern||b["timeFormat-"+c],c="date"==a.selector?k:"time"==a.selector?e:b["dateTimeFormat-"+c].replace(/\{(\d+)\}/g,function(a,b){return[e,k][b]}),f=[];return{regexp:m(c,h.hitch(this,q,f,b,a)),tokens:f,bundle:b}};n.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,d=n._parseInfo(b),k=d.tokens,e=d.bundle,c=RegExp("^"+d.regexp.replace(c,
"")+"$",d.strict?"":"i").exec(a&&a.replace(c,""));if(!c)return null;var l=["abbr","wide","narrow"],m=[1970,0,1,0,0,0,0],h="",c=f.every(c,function(a,c){if(!c)return!0;var d=k[c-1],g=d.length,d=d.charAt(0);switch(d){case "y":if(2!=g&&b.strict)m[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),g=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),m[0]=a<d?g+a:g-100+a;else{if(b.strict)return!1;m[0]=a}break;case "M":case "L":if(2<g){if(g=e["months-"+("L"==d?"standAlone":"format")+
"-"+l[g-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),g=f.map(g,function(a){return a.replace(".","").toLowerCase()})),a=f.indexOf(g,a),-1==a)return!1}else a--;m[1]=a;break;case "E":case "e":case "c":g=e["days-"+("c"==d?"standAlone":"format")+"-"+l[g-3]].concat();b.strict||(a=a.toLowerCase(),g=f.map(g,function(a){return a.toLowerCase()}));a=f.indexOf(g,a);if(-1==a)return!1;break;case "D":m[1]=0;case "d":m[2]=a;break;case "a":g=b.am||e["dayPeriods-format-wide-am"];d=b.pm||e["dayPeriods-format-wide-pm"];
if(!b.strict){var n=/\./g;a=a.replace(n,"").toLowerCase();g=g.replace(n,"").toLowerCase();d=d.replace(n,"").toLowerCase()}if(b.strict&&a!=g&&a!=d)return!1;h=a==d?"p":a==g?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;m[3]=a;break;case "m":m[4]=a;break;case "s":m[5]=a;break;case "S":m[6]=a}return!0}),d=+m[3];"p"===h&&12>d?m[3]=d+12:"a"===h&&12==d&&(m[3]=0);d=new Date(m[0],m[1],m[2],m[3],m[4],m[5],m[6]);b.strict&&d.setFullYear(m[0]);var q=k.join(""),p=-1!=q.indexOf("d"),
q=-1!=q.indexOf("M");if(!c||q&&d.getMonth()>m[1]||p&&d.getDate()>m[2])return null;if(q&&d.getMonth()<m[1]||p&&d.getDate()<m[2])d=g.add(d,"hour",1);return d};var p=[],r={};n.addCustomFormats=function(a,b){p.push({pkg:a,name:b});r={}};n._getGregorianBundle=function(a){if(r[a])return r[a];var b={};f.forEach(p,function(c){c=d.getLocalization(c.pkg,c.name,a);b=h.mixin(b,c)},this);return r[a]=b};n.addCustomFormats(k.id.replace(/\/date\/locale$/,".cldr"),"gregorian");n.getNames=function(a,b,c,d){var k;d=
n._getGregorianBundle(d);a=[a,c,b];"standAlone"==c&&(c=a.join("-"),k=d[c],1==k[0]&&(k=void 0));a[1]="format";return(k||d[a.join("-")]).concat()};n.isWeekend=function(a,b){var c=e.getWeekend(b),d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));return d>=c.start&&d<=c.end};n._getDayOfYear=function(a){return g.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};n._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((n._getDayOfYear(a)+
(c-b+7)%7-1)/7);c==b&&d++;return d};return n})},"dojo/date":function(){define(["./has","./_base/lang"],function(h,f){var g={getDaysInMonth:function(e){var d=e.getMonth();return 1==d&&g.isLeapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][d]},isLeapYear:function(e){e=e.getFullYear();return!(e%400)||!(e%4)&&!!(e%100)},getTimezoneName:function(e){var d=e.toString(),c="",b=d.indexOf("(");if(-1<b)c=d.substring(++b,d.indexOf(")"));else if(b=/([A-Z\/]+) \d{4}$/,d=d.match(b))c=d[1];else if(d=e.toLocaleString(),
b=/ ([A-Z\/]+)$/,d=d.match(b))c=d[1];return"AM"==c||"PM"==c?"":c},compare:function(e,d,c){e=new Date(+e);d=new Date(+(d||new Date));"date"==c?(e.setHours(0,0,0,0),d.setHours(0,0,0,0)):"time"==c&&(e.setFullYear(0,0,0),d.setFullYear(0,0,0));return e>d?1:e<d?-1:0},add:function(e,d,c){var b=new Date(+e),a=!1,k="Date";switch(d){case "day":break;case "weekday":var f;(d=c%5)?f=parseInt(c/5):(d=0<c?5:-5,f=0<c?(c-5)/5:(c+5)/5);var g=e.getDay(),h=0;6==g&&0<c?h=1:0==g&&0>c&&(h=-1);g+=d;if(0==g||6==g)h=0<c?2:
-2;c=7*f+d+h;break;case "year":k="FullYear";a=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":a=!0;k="Month";break;default:k="UTC"+d.charAt(0).toUpperCase()+d.substring(1)+"s"}if(k)b["set"+k](b["get"+k]()+c);a&&b.getDate()<e.getDate()&&b.setDate(0);return b},difference:function(e,d,c){d=d||new Date;c=c||"day";var b=d.getFullYear()-e.getFullYear(),a=1;switch(c){case "quarter":e=e.getMonth();d=d.getMonth();e=Math.floor(e/3)+1;d=Math.floor(d/3)+1;a=d+4*b-e;break;case "weekday":b=Math.round(g.difference(e,
d,"day"));c=parseInt(g.difference(e,d,"week"));a=b%7;if(0==a)b=5*c;else{var k=0,f=e.getDay();d=d.getDay();c=parseInt(b/7);a=b%7;e=new Date(e);e.setDate(e.getDate()+7*c);e=e.getDay();if(0<b)switch(!0){case 6==f:k=-1;break;case 0==f:k=0;break;case 6==d:k=-1;break;case 0==d:k=-2;break;case 5<e+a:k=-2}else if(0>b)switch(!0){case 6==f:k=0;break;case 0==f:k=1;break;case 6==d:k=2;break;case 0==d:k=1;break;case 0>e+a:k=2}b=b+k-2*c}a=b;break;case "year":a=b;break;case "month":a=d.getMonth()-e.getMonth()+12*
b;break;case "week":a=parseInt(g.difference(e,d,"day")/7);break;case "day":a/=24;case "hour":a/=60;case "minute":a/=60;case "second":a/=1E3;case "millisecond":a*=d.getTime()-e.getTime()}return Math.round(a)}};f.mixin(f.getObject("dojo.date",!0),g);return g})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(h,f){var g={};h.setObject("dojo.cldr.supplemental",g);g.getFirstDayOfWeek=function(e){e={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,
qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[g._region(e)];return void 0===e?1:e};g._region=function(e){e=f.normalizeLocale(e);e=e.split("-");var d=e[1];d?4==d.length&&(d=e[2]):d={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",
as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",
ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",
sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",
bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",
guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",
luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",
sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",
yav:"cm",zza:"tr"}[e[0]];return d};g.getWeekend=function(e){var d=g._region(e);e={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[d];d={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[d];void 0===e&&(e=6);void 0===d&&(d=0);return{start:e,end:d}};return g})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(h,f){var g={};f.setObject("dojo.regexp",g);g.escapeString=function(e,
d){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(c){return d&&-1!=d.indexOf(c)?c:"\\"+c})};g.buildGroupRE=function(e,d,c){if(!(e instanceof Array))return d(e);for(var b=[],a=0;a<e.length;a++)b.push(d(e[a]));return g.group(b.join("|"),c)};g.group=function(e,d){return"("+(d?"?:":"")+e+")"};return g})},"mw-remote/iframeproxy/IframeProxyClient":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang dojo/aspect dojo/dom-construct require mw-log/Log ./CheckUrlService".split(" "),
function(h,f,g,e,d,c,b,a,k,l){var m=this,q=f([],{IFRAME_TIMEOUT:2E4,LATEST_VERSION:"1.5",REMOTE_PROXY:"/remote/proxy/",constructor:function(a){this.iframeId=a||"remoteProducer";this._messageId=0;this._loaded=!1;this._pendingQueue=[];this._transactions={};this._uploadTargetCallbacks={};this._loadTimeoutHandle=this._checkUrl=null;this._errorRate=0},setRemotePageHost:function(a,b,c,d,k){a=this._combineUriPaths(a||"","/");b=b||"";k=k||this.LATEST_VERSION;d=d||"";this.computeToken=c;a===this._host&&b===
this._key&&d===this._proxyUrl&&k===this._version||(this._errorLoading=this._loaded=!1,this._host=a,this._key=b,this._version=k,this._proxyUrl=d,a=this._calculateUrls(a,b,k,d),this._createIframe(a))},_calculateUrls:function(a,b,c,d){var k=this.REMOTE_PROXY+c+"/iframeProxyRelease.html";c=this.REMOTE_PROXY+c+"/CheckJsFile.js";d&&(k=d);k=this._combineUriPaths(a,k).split("?")[0];k+=b?"?routingkey\x3d"+b:"";c=this._combineUriPaths(a,c);c=b?c+("?routingkey\x3d"+b):c+("?time\x3d"+(new Date).getTime());return{fastFailUrl:c,
iFrameUrl:k}},_createIframe:function(a){var c=a.fastFailUrl,e=this;this._url=a.iFrameUrl;this.remoteIframe&&b.destroy(this.remoteIframe);k.info("Creating iframe ["+this.iframeId+"] for "+this._url+" at "+new Date);this.remoteIframe=b.create("iframe",{id:this.iframeId,src:this._url,width:0,height:0,style:"visibility: hidden; display: none;"});this._checkUrl=(new l(c)).then(function(){},d.hitch(e,"_handleLoadTimeoutHitch"));this._loadTimeoutHandle=setTimeout(function(){e._handleLoadTimeoutHitch()},
this.IFRAME_TIMEOUT);document.body.appendChild(this.remoteIframe);this._messageConnection||(this._messageConnection=h.connect(m,"message",this,this._handleMessage))},_handleLoadTimeoutHitch:function(){if(!this._loaded)if("1.0"===this._version)this._handleLoadTimeout();else{clearTimeout(this._loadTimeoutHandle);var a=(parseFloat(this._version)-0.1).toFixed(1).toString();k.info("Unable to load proxy version "+this._version+", trying "+a+".");this.setRemotePageHost(this._host,this._key,this.computeToken,
this._proxyUrl,a)}},createUploadIframeTarget:function(a,b,c){this._uploadTargetCallbacks[a]=d.hitch(c||this,b);this._postMessage("createUploadIframe;"+a)},cancelUpload:function(a){this._postMessage("cancelUpload;"+a)},getUploadIframeProxyUrlPath:function(){return this.REMOTE_PROXY+this._version+"/uploadIframeProxy.html"},sendMessage:function(a,b,c){var d=this,f;this.computeToken&&(c=c||{},c.headers=c.headers||{},c.headers.computeToken=this.computeToken);f=this._getNewMessageId();b="sendMessage;"+
f+";"+b+";"+(c?e.toJson(c):"{}");b+=";"+a;a={deferred:new g(function(){"1.0"===d._version?k.warn("Cancelling is not supported by the 1.0 remote proxy."):d._postMessage("abort;"+f)}),id:f};this._errorLoading?a.deferred.reject("The iFrame did not load properly: "+this._url):(this._transactions[f]=a,this._postMessage(b));return a.deferred},setLatency:function(a){this._latency=a},setErrorRate:function(a){this._errorRate=a},_postMessage:function(a){this._loaded?this._postMessageNow(a):this._pendingQueue.push(a)},
_handleMessage:function(a){var b,c;if(a.source===this.remoteIframe.contentWindow){c=a.data.indexOf(";");b=a.data.substring(0,c);if(!b)throw Error("Client unable to parse message, no action specified: "+a.data);switch(b){case "ready":this._cleanupFailureChecks();this._loaded=!0;this._flushPending();break;case "sendMessageResponse":this._sendMessageResponse(a,c);break;case "uploadIframeMessage":b=a.data.indexOf(";",c+1);c=a.data.substring(c+1,b);a=a.data.substring(b+1,a.data.length);this._uploadTargetCallbacks[c](a);
break;case "websocketOpened":this.onWebsocketOpen();break;case "websocketClosed":a=a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketClose(a);break;case "websocketMsg":a=a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketMsg(a);break;case "websocketError":this.onWebsocketError();break;default:throw Error("Unknown action: "+b+", data: "+a.data);}}},_sendMessageResponse:function(a,b){var c,d,k=a.data.indexOf(";",b+1);c=a.data.indexOf(";",k+1);var f=a.data.substring(b+
1,k),g=a.data.substring(k+1,c),k=a.data.substring(c+1,a.data.length);if(!f||!g)throw Error("Invalid message from remote iframe: "+a.data);c=this._transactions[f];if(!c)throw Error("Unknown transaction id: "+f+", from remote iframe: "+a.data);delete this._transactions[f];if(!c.deferred.isCanceled())if("success"===g){try{d=k&&e.fromJson(k)}catch(l){d=k}d=""===d?{}:d;c.deferred.resolve(d)}else"fault"===g&&k&&(d=k.split(";"),f=d.length-1,1<=f&&(k.statusCode=d[f])),this.onError(k),c.deferred.reject(k)},
_cleanupFailureChecks:function(){this._checkUrl&&!this._checkUrl.isFulfilled&&this._checkUrl.cancel("iFrame loaded...cancel URL check",!1);this._loadTimeoutHandle&&clearTimeout(this._loadTimeoutHandle);this._checkUrl=this._loadTimeoutHandle=null},_handleLoadTimeout:function(){var a,b;this._cleanupFailureChecks();if(!this._loaded)for(b in a={code:"IframeLoadTimeout",description:"Iframe proxy loading failed due to an HTTP error",message:""},this.onError(a),this._errorLoading=!0,a=this._transactions,
this._transactions={},a)a.hasOwnProperty(b)&&a[b].deferred.reject("Timeout while loading the iFrame "+this._url+" at "+new Date)},_postMessageNow:function(a){function b(){if(0<c._errorRate&&Math.random()<c._errorRate&&0===a.indexOf("sendMessage;")){if(d=a.split(";",2)[1],e=c._transactions[d])delete c._transactions[d],k.error("Generating simulated error. Request was: ",a),c.onError("403 Forbidden;403"),e.deferred.reject("403 Forbidden;403")}else c.remoteIframe.contentWindow.postMessage(a,c._url)}var c=
this,d,e;this._latency?setTimeout(b,this._latency):b()},_flushPending:function(){this._pendingQueue.forEach(this._postMessageNow,this);this._pendingQueue=[]},_getNewMessageId:function(){this._messageId+=1;return this._messageId.toString()},onError:function(){},onWebsocketOpen:function(){},onWebsocketMsg:function(){},onWebsocketClose:function(){},onWebsocketError:function(){},_combineUriPaths:function(){return Array.prototype.slice.call(arguments).reduce(function(a,b){if(0===a.length)return b;0<b.length&&
("/"===b[0]&&a.lastIndexOf("/")===a.length-1?b=b.substring(1):"/"!==b[0]&&a.lastIndexOf("/")!==a.length-1&&(a+="/"));return a+b})}});q.WebSocket=f([],{constructor:function(a){var b=this;this.proxyClient=q.WebSocket.proxyClient;this.proxyClient.computeToken&&0<=a.indexOf("?")&&(a=a+"\x26computeToken\x3d"+this.proxyClient.computeToken);this.proxyClient._postMessage("connectWebsocket;"+a);c.after(this.proxyClient,"onWebsocketOpen",function(){b.onopen.apply(b,arguments)},!0);c.after(this.proxyClient,
"onWebsocketMsg",function(){b.onmessage.apply(b,arguments)},!0);c.after(this.proxyClient,"onWebsocketClose",function(){b.onclose.apply(b,arguments)},!0);c.after(this.proxyClient,"onWebsocketError",function(){b.onerror.apply(b,arguments)},!0)},onopen:function(){},onmessage:function(){},onclose:function(){},onerror:function(){},send:function(a){this.proxyClient._postMessage("websocketSend;"+a)},close:function(){this.proxyClient._postMessage("closeWebsocket;")}});return q})},"mw-remote/iframeproxy/CheckUrlService":function(){define(["dojo/_base/declare",
"dojo/dom","dojo/on","dojo/request/script","mw-log/Log"],function(h,f,g,e,d){return function(c){var b,a,k;if(!c)throw Error("Expected a valid url in urlToEmptyJsFile");b={framedoc:null};a=e.get(c,b,!0);b=f.byId(a.id,b.frameDoc);k=g(b,"error",function(b){d.info("CheckUrlService detected an error accessing url: "+c);a.handleResponse(null,b);k.remove()});return a.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){function q(a,b){a.canDelete&&t._remove(a.id,b.options.frameDoc,!0)}function n(a){A&&A.length&&(d.forEach(A,function(a){t._remove(a.id,a.frameDoc);a.frameDoc=null}),A=[]);return a.options.jsonp?!a.data:!0}function p(a){return!!this.scriptLoaded}function r(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function s(a,b){if(this.canDelete){var c=this.response.options;A.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&
(c.ioArgs.frameDoc=null);c.frameDoc=null}b?this.reject(b):this.resolve(a)}function t(a,d,k){var e=g.parseArgs(a,g.deepCopy({},d));a=e.url;d=e.options;var l=g.deferred(e,q,n,d.jsonp?null:d.checkString?r:p,s);c.mixin(l,{id:u+v++,canDelete:!1});d.jsonp&&(RegExp("[?\x26]"+d.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+d.jsonp+"\x3d"+(d.frameDoc?"parent.":"")+u+"_callbacks."+l.id),l.canDelete=!0,B[l.id]=function(a){e.data=a;l.handleResponse(e)});g.notify&&g.notify.emit("send",e,l.promise.cancel);
if(!d.canAttach||d.canAttach(l)){var m=t._attach(l.id,a,d.frameDoc);if(!d.jsonp&&!d.checkString)var h=b(m,w,function(a){if("load"===a.type||x.test(m.readyState))h.remove(),l.scriptLoaded=a})}b.once(m,"error",function(a){l.reject(a);t._remove(l.id,d.frameDoc,!0)});f(l);return k?l:l.promise}l.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var u=h.id.replace(/[\/\.\-]/g,
"_"),v=0,w=l("script-readystatechange")?"readystatechange":"load",x=/complete|loaded/,B=e.global[u+"_callbacks"]={},A=[];t.get=t;t._attach=function(a,b,c){c=c||m.doc;var d=c.createElement("script");d.type="text/javascript";d.src=b;d.id=a;d.async=!0;d.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(d)};t._remove=function(b,c,d){k.destroy(a.byId(b,c));B[b]&&(d?B[b]=function(){delete B[b]}:delete B[b])};t._callbacksProperty=u+"_callbacks";return t})},"mw-messageservice/messageserviceimpl/MessageServiceBase":function(){define("dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/aspect dojo/Deferred mw-statemachine/StateMachine mw-log/Log ./MessageServiceState".split(" "),
function(h,f,g,e,d,c,b,a){return h([a],{logSubscriptions:!1,constructor:function(){this.batching=!0;this.typeSerializers=[];this.typeDeserializers={};this.channelSubscriptions={}},setDelegate:function(a){this.inherited(arguments);e.after(this._delegate,"onMessage",g.hitch(this,this.handleMessage),!0)},publish:function(a,b){if(this.isConnected()||"resubscribing"===this._currentState){var c=this._queuePublish(a,this.serialize(b));this._deferProcessQueue();return c}return this._queuePublish(a,this.serialize(b))},
subscribe:function(a,c,d){this.logSubscriptions&&b.info("MessageService subscribe: "+a,c,d);this._addHandler(this.channelSubscriptions,a,c,d);return this.isConnected()||"resubscribing"===this._currentState?(a=this._queueSubscribe(a,c,d),this._deferProcessQueue(),a):this._queueSubscribe(a,c,d)},unsubscribe:function(a,c,e){this.logSubscriptions&&b.info("MessageService unsubscribe: "+a,c,e);if(this._removeHandler(this.channelSubscriptions,a,c,e))return this.isConnected()||"resubscribing"===this._currentState?
(a=this._queueUnsubscribe(a,c,e),this._deferProcessQueue(),a):(new d).resolve();b.error("Not subscribed to channel: "+a+", can't unsubscribe.");return(new d).reject("Not subscribed to channel: "+a+", can't unsubscribe.")},flush:function(){if(this.isConnected())this._processQueue();else throw Error("Can only manually flush the queue when connected.");},setLatency:function(a){this._delegate&&this._delegate.doSetLatency&&this._delegate.doSetLatency(a)},setErrorRate:function(a){this._delegate&&this._delegate.doSetErrorRate&&
this._delegate.doSetErrorRate(a)},_enterDisconnected:function(){this.inherited("_enterDisconnected",arguments);this._queuedOps=[]},_enterConnecting:function(){this.inherited("_enterConnecting",arguments);Object.keys(this.channelSubscriptions).forEach(function(a){a.subscribed=!1})},_enterConnected:function(){this.inherited("_enterConnected",arguments);this._processQueue()},_enterDisconnecting:function(){this._processQueue();this.inherited("_enterDisconnecting",arguments)},_queuePublish:function(a,
b){var c=new d;this._queuedOps.push({type:"publish",channel:a,data:b,deferred:c});return c.promise},_queueSubscribe:function(a,b,c){var e=new d;this._queuedOps.push({type:"subscribe",channel:a,handler:b,scope:c,deferred:e});return e.promise},_queueUnsubscribe:function(a,b,c){for(var e=new d,f,g=0;g<this._queuedOps.length;g++)if(f=this._queuedOps[g],"subscribe"===f.type&&f.channel===a&&f.handler===b&&f.scope===c)return this._queuedOps.splice(g,1),f.deferred.resolve(),(new d).resolve();this._queuedOps.push({type:"unsubscribe",
channel:a,handler:b,scope:c,deferred:e});return e.promise},_processQueue:function(){var a=this._delegate&&this._delegate.delegateConnected();(!this.isConnected()||!a)&&"disconnecting"!==this._currentState||(this._delegate.doStartBatch(),a=this._queuedOps,this._queuedOps=[],a.forEach(function(a){var b;"publish"===a.type?b=this._delegate.doPublish(a.channel,a.data):"subscribe"===a.type?b=this._doSubscribe(a.channel,a.handler,a.scope):"unsubscribe"===a.type&&(b=this._doUnsubscribe(a.channel,a.handler,
a.scope));b.then(a.deferred.resolve,a.deferred.reject)},this),this._delegate.doEndBatch())},_deferProcessQueue:function(){if(this.batching&&!this._deferredTimeout){var a=this;this._deferredTimeout=setTimeout(function(){a._deferredTimeout=!1;a._processQueue()},0)}else this.batching||this._processQueue()},_doSubscribe:function(a){if(this.channelSubscriptions[a].subscribed)return(new d).resolve();var b=this._delegate.doSubscribe(a);this.channelSubscriptions[a].subscribed=!0;return b},_doUnsubscribe:function(a){return this.channelSubscriptions[a]?
(new d).resolve():this._delegate.doUnsubscribe(a)},handleMessage:function(a){var b;if(a&&a.channel){a.data&&(a.data=this.deserialize(a.data));var c=a.channel.split("/");for(b=1;b<=c.length;b+=1)this._callHandlers(this.channelSubscriptions,c.slice(0,b).concat("**").join("/"),a);this._callHandlers(this.channelSubscriptions,c.slice(0,c.length-1).concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,c.concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,a.channel,a)}},
registerMessageHandler:function(a,c,d){b.error("registerMessageHandler is not supported any more.")},deregisterMessageHandler:function(a,c,d){b.error("deregisterMessageHandler is not supported any more.")},registerTypeSerializer:function(a,b,c){this.typeSerializers.push({typeMatcher:a,type:b,serializer:c})},registerTypeDeserializer:function(a,b){this.typeDeserializers[a]=b},serialize:function(a){return g.isArray(a)?this._serializeArray(a):a instanceof Number||a instanceof Boolean||g.isString(a)?a:
this._serializeObject(a)},deserialize:function(a){return g.isArray(a)?this._deserializeArray(a):a instanceof Number||a instanceof Boolean||g.isString(a)?a:this._deserializeObject(a)},_addHandler:function(a,c,d,e){var f;e=e||this;"string"===typeof d&&"function"!==typeof e[d]?b.warn("Not adding invalid handler: "+d):(f=a[c],f||(f=[],a[c]=f),a={channel:c,handler:d,scope:e},f.push(a),f.sort(function(a){return a.exclusive?-1:0}))},_removeHandler:function(a,b,c,d){var e;e=a[b];c=this._getHandlerIndex(e,
{handler:c,scope:d||this});0<=c&&e.splice(c,1);(!e||0===e.length)&&delete a[b];return 0<=c},_callHandlers:function(a,c,d){var e;if(a.hasOwnProperty(c)){a=a[c];for(e=0;e<a.length;e+=1)try{"string"===typeof a[e].handler?a[e].scope[a[e].handler].call(a[e].scope,d):a[e].handler.call(a[e].scope,d)}catch(g){b.error("Error while executing message handler on channel: "+c+", message: "+f.toJson(d)+", error: "+g)}}},_getHandlerIndex:function(a,b){if(!a)return-1;var c;for(c=0;c<a.length;c+=1)if(b.handler===
a[c].handler&&b.scope===a[c].scope)return c;return-1},_serializeObject:function(a){var b,c;for(c=0;c<this.typeSerializers.length;c+=1){var d=this.typeSerializers[c];if(d.typeMatcher(a))return{__type__:d.type,__value__:d.serializer.call(this,a)}}if(a instanceof Image)return a;for(b in a)a.hasOwnProperty(b)&&(a[b]=this.serialize(a[b]));return a},_serializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.serialize(a[b]);return a},_deserializeObject:function(a){var c;if(void 0===a||null===
a)return null;if(a.hasOwnProperty("__type__")&&a.hasOwnProperty("__value__"))try{return this.typeDeserializers[a.__type__].call(this,a.__value__)}catch(d){b.error("Error while trying to deserialize: ",a)}for(c in a)a.hasOwnProperty(c)&&(null!==a[c]&&void 0!==a[c])&&(a[c]=this.deserialize(a[c]));return a},_deserializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.deserialize(a[b]);return a}})})},"mw-statemachine/StateMachine":function(){define(["dojo/_base/declare","./statemachineimpl/State"],
function(h,f){return h([],{constructor:function(g){g.stateMachine=this;this.state=new f(g)},start:function(){this.state.enter()},stop:function(){this.state.exit()},_changeState:function(f,e){this.state.enter(f,e)},onEnterState:function(f){},onExitState:function(f){}})})},"mw-statemachine/statemachineimpl/State":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log ./EventTrigger ./MessageTrigger ./RemoteTrigger ./TimeoutTrigger ./Transition".split(" "),function(h,f,g,e,d,c,b,a){var k;return k=
h([],{constructor:function(a){this.stateMachine=a.stateMachine||{_changeState:function(){},onEnterState:function(){},onExitState:function(){}};this.namespace=a.namespace||"";this.name=a.name||this.getDefaultName();this.context=a.context||{};this.data=a.data||{};this.composition=a.composition||"XOR";this.defaultSubstate=a.defaultSubstate||"";this.constructSubstates(a.substates);this.constructTriggersAndTransitions(a.transitions);this.active=a.active||!1},getDefaultName:function(){var a;0<this.namespace.length?
(a=this.namespace.split("."),a=a.pop()):g.warn("State: state name is not specified.");return a||""},constructSubstates:function(a){var b={},c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c],d.name&&d.name!==c&&g.error("State: error constructing substate: "+c+", the specified names don't match: "+d.name),d.name=c,d.namespace=d.namespace||[this.namespace,this.name].join("."),d.stateMachine=d.stateMachine||this.stateMachine,d.context=d.context||this.context,b[d.name]=new k(d));this.substates=b},constructTriggersAndTransitions:function(a){var b,
c={},d=[],k;for(b in a)a.hasOwnProperty(b)&&((k=this.constructTrigger(b))&&d.push(k),c[b]=this.constructTransition(b,a[b]));this.transitions=c;this.triggers=d},constructTrigger:function(a){var k,g,n;k=a.split(" ");if(2===k.length)"subscribe"===k[0]?n=d:"response"===k[0]||"fault"===k[0]?n=c:"timeout"===k[0]&&(n=b);else if("onEnterState"!==a||"onExitState"!==a)n=e;n&&(g=new n({name:a,context:this.context,triggerHandler:f.hitch(this,this.handleTrigger)}));return g},constructTransition:function(b,c){var d;
if(f.isFunction(c)||f.isString(c)||f.isArray(c))"onEnterState"===b||"onExitState"===b?(d=c,c={},c.action=d,c.target=""):(d=c,c={},c.target=d);c.state=this;return new a(c)},enter:function(a,b){this.active||(this.active=!0,this.enableTriggers(),this.stateMachine.onEnterState(this.name),this.handleTrigger.apply(this,["onEnterState"].concat(b)));a?this.changeSubstates(a,b):this.changeToDefaultSubstate(b)},exit:function(){var a=this.activeSubstates();this.active=!1;this.disableTriggers();a.forEach(function(a){a.exit()});
this.handleTrigger("onExitState");this.stateMachine.onExitState(this.name)},enableTriggers:function(){this.triggers.forEach(function(a){a.enable()})},disableTriggers:function(){this.triggers.forEach(function(a){a.disable()})},handleTrigger:function(a){var b,c;if(this.transitions[a]&&(c=Array.prototype.slice.call(arguments,1,arguments.length),b=this.transitions[a].handleTrigger(a,c)))f.isString(b)||(c=b.args,b=b.target),this.stateMachine._changeState(b,c)},changeSubstates:function(a,b){var c=this.activeSubstates();
this.substates[a]&&(0<=c.length&&c[0].name!==a&&c.forEach(function(a){a.exit()}),this.substates[a].enter(void 0,b))},changeToDefaultSubstate:function(a){0===this.activeSubstates().length&&this.substates[this.defaultSubstate]&&this.substates[this.defaultSubstate].enter(void 0,a)},activeSubstates:function(){var a=[],b;for(b in this.substates)this.substates.hasOwnProperty(b)&&this.substates[b].active&&a.push(this.substates[b]);return a}})})},"mw-statemachine/statemachineimpl/EventTrigger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","mw-log/Log","./Trigger"],function(h,f,g,e,d){return h(d,{constructor:function(){this.connection={}},enable:function(){f.isFunction(this.context[this.name])&&(this.cachedFunction=this.context[this.name]);this.connection=g.after(this.context,this.name,f.hitch(null,this.triggerHandler,this.name),!0)},disable:function(){this.connection.remove();this.cachedFunction&&(this.context[this.name]=this.cachedFunction)}})})},"mw-statemachine/statemachineimpl/Trigger":function(){define(["dojo/_base/declare"],
function(h){return h([],{constructor:function(f){this.name="";this.context={};this.triggerHandler=f.triggerHandler||function(){};h.safeMixin(this,f)},enable:function(){},disable:function(){}})})},"mw-statemachine/statemachineimpl/MessageTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","mw-log/Log","./Trigger"],function(h,f,g,e,d){return h(d,{constructor:function(){var c=this.name.split(" ");(2>c.length||"subscribe"!==c[0])&&e.error("Invalid trigger name for a MessageTrigger. Could not parse out the message name.");
this.messageId=c[1]||"";this.subscrition={}},enable:function(){this.subscription=g.subscribe(this.messageId,f.hitch(null,this.triggerHandler,this.name))},disable:function(){this.subscription.remove()}})})},"mw-statemachine/statemachineimpl/RemoteTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-remote/Remote","./Trigger"],function(h,f,g,e,d){return h(d,{constructor:function(){var c=this.name.split(" ");(2>c.length||"response"!==c[0]&&"fault"!==c[0])&&g.error("Invalid trigger name for a RemoteTrigger. Could not parse out the type of handler.");
(!e.registerResponseHandler||!e.registerFaultHandler)&&g.error("The remote package is not available, this type of trigger will not work.");this.messageId=c[1]||"";this.handlerType=c[0]},enable:function(){"response"===this.handlerType?e.registerResponseHandler(this.messageId,f.hitch(null,this.triggerHandler,this.name)):e.registerFaultHandler(this.messageId,f.hitch(null,this.triggerHandler,this.name))},disable:function(){"response"===this.handlerType?e.deregisterResponseHandler(this.messageId):e.deregisterFaultHandler(this.messageId)}})})},
"mw-remote/Remote":function(){define("dojo/_base/lang dojo/aspect ./iframeproxy/IframeProxyClient ./iframeproxy/IframeJsonTransaction ./impl/FaultManager ./impl/RequestManager ./impl/ResponseManager ./impl/Transaction ./RemoteEndPointsManager mw-log/Log ./serviceRegistryLookup!".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){var q=this,n;n={reset:function(){var p=[],r=new d,s=new b({faultManager:r}),t=new c({responseManager:s});n.faultManager=r;n.responseManager=s;n.requestManager=t;n._serviceRegistryLookup=
m;n._uploadIframeProxyUrlParameters=["?computeToken\x3d","","\x26routingkey\x3d",""];var u=n.proxyClient=new g;n.createUploadIframeTarget=h.hitch(u,u.createUploadIframeTarget);n.cancelUpload=h.hitch(u,u.cancelUpload);k.setIframeProxyClientForEndPoint(k.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,u);k.setIframeProxyClientForEndPoint(k.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,u);a.construct=function(a){a=a||{};k.getRoutingHost(k.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT)||n.setEndpoint();
a.allowedMessages=p;a.sendMessage=n.sendMessage;a.computeSessionId=n.getComputeSessionId;return new e(a)};n.registerEndpointLevelFaultHandler=h.hitch(r,r.registerEndpointLevelFaultHandler);n.sendMessage=h.hitch(t,t.sendMessage);n.registerDefaultMessageFactory=h.hitch(t,t.registerDefaultMessageFactory);n.deregisterDefaultMessageFactory=h.hitch(t,t.deregisterDefaultMessageFactory);n.registerResponseHandler=h.hitch(s,s.registerResponseHandler);n.deregisterResponseHandler=h.hitch(s,s.deregisterResponseHandler);
n.registerFaultHandler=h.hitch(r,r.registerFaultHandler);n.deregisterFaultHandler=h.hitch(r,r.deregisterFaultHandler);n.registerTopLevelFaultHandler=h.hitch(r,r.registerTopLevelFaultHandler);n.deregisterTopLevelFaultHandler=h.hitch(r,r.deregisterTopLevelFaultHandler);n.setServiceEndPoint=function(a,b,c){k.setRoutingHostAndRoutingKey(a,b,c)};n.setServicePathSuffixForEndPoint=function(a,b){k.setPathSuffixForEndPoint(a,b)};n.ignoreTopLevelFault=n.registerTopLevelFaultHandler;n.setComputeToken=function(a){n._uploadIframeProxyUrlParameters[1]=
a.computeSessionId;t.computeToken=a};n.setWorkerEndpoint=function(a,b){n._uploadIframeProxyUrlParameters[3]=b;k.setRoutingHostAndRoutingKey(k.getEndPointNames().WORKER_ENDPOINT,a,b)};n.setEndpoint=function(a){a||(a=n._serviceRegistryLookup.getServiceRegistryEndpoint("primary"),a||(l.info("ServiceRegistryLookup is empty, falling back to localhost"),a="/"));if(!a||"/"===a)a=q.location.protocol+"//"+q.location.host+"/";k.setRoutingHostAndRoutingKey(k.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,a);
k.setRoutingHostAndRoutingKey(k.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,a);u.setRemotePageHost(a)};n.setAllowedMessages=function(a){p=a};n.allowAllMessages=function(){p=[]};n.getEndPoint=function(){return k.getRoutingHost(k.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT)};n.getUploadIframeProxyUrl=function(){var a=n.getWorkerRoutingHost();"/"===a.slice(-1)&&(a=a.slice(0,-1));return a+u.getUploadIframeProxyUrlPath()+n._uploadIframeProxyUrlParameters.join("")};n.getComputeSessionId=function(){return t.computeToken?
t.computeToken.computeSessionId:12345};n.getWorkerRoutingHost=function(){var a=k.getRoutingHost(k.getEndPointNames().WORKER_ENDPOINT);return a?a:location.protocol+"//"+location.host+"/"};n.getWorkerRoutingKey=function(){return k.getRoutingKey(k.getEndPointNames().WORKER_ENDPOINT)};n.getServiceRegistryEndpoint=function(a){return n._serviceRegistryLookup.getServiceRegistryEndpoint(a)};n.enableServerOnWorkerAsync=function(){k.enableEndPoint(k.getEndPointNames().WORKER_ASYNC_ENDPOINT)};n.disableServerOnWorkerAsync=
function(){k.disableEndPoint(k.getEndPointNames().WORKER_ASYNC_ENDPOINT)};n.isServerOnWorkerAsyncEnabled=function(){return k.isEndPointEnabled(k.getEndPointNames().WORKER_ASYNC_ENDPOINT)};n.enableServerOnWorker=function(){k.enableEndPoint(k.getEndPointNames().WORKER_ENDPOINT)};n.disableServerOnWorker=function(){k.disableEndPoint(k.getEndPointNames().WORKER_ENDPOINT)};n.isWorkerEndpointEnabled=function(){return k.isEndPointEnabled(k.getEndPointNames().WORKER_ENDPOINT)};n.setWorkerOnlyMessageTypes=
function(a){k.setMessageTypesToEndPoint(k.getEndPointNames().WORKER_ENDPOINT,a)};f.after(u,"onError",function(a){a&&r.handleNonTransactionFault(a)},!0)}};n.reset();return n})},"mw-remote/iframeproxy/IframeJsonTransaction":function(){define(["dojo/_base/declare","mw-remote/impl/JsonTransaction","mw-remote/RemoteEndPointsManager"],function(h,f,g){return h([f],{constructor:function(e){e=e||{};this.proxyClient=e.proxyClient;this.workerProxyClient=e.workerProxyClient;this.routingHost=e.routingHost;this.routingKey=
e.routingKey;this.computeSessionId=e.computeSessionId},_doSend:function(e){return g.getIframeProxyClientForEndPoint(this.endPointName).sendMessage(e,g.getRemoteUrlForEndPoint(this.endPointName))}})})},"mw-remote/impl/JsonTransaction":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/json dojo/_base/lang mw-remote/RemoteEndPointsManager ./Transaction".split(" "),function(h,f,g,e,d,c){return h(c,{constructor:function(b){b=b||{};this.uuid=b.uuid||this._generateUuid()},_getRequest:function(b){var a=
null;d.isEndpointMessageContainerBased(this.endPointName)?(a={uuid:this.uuid,messages:b},this.computeToken&&(a.computeToken=this.computeToken)):Object.keys(b).forEach(function(c){a=b[c]});this._sanitizeForJson(a);return g.toJson(a)},_sanitizeForJson:function(b){var a;if(e.isArray(b))b.forEach(this._sanitizeForJson,this);else if(e.isObject(b))for(a in b)b.hasOwnProperty(a)&&(void 0===b[a]?delete b[a]:(e.isObject(b[a])||e.isArray(b[a]))&&this._sanitizeForJson(b[a]))},_doSend:function(b){return f.post({url:this._getEndpoint(),
contentType:"application/json",handleAs:"json",postData:b})},_processResponse:function(b){this.stopTime=(new Date).getTime();b?(b.fault&&(this.fault=b.fault),this.responseMessages=b.messages?b.messages:b):this.fault={faultCode:"Connection.Fault",message:"Unable to communicate with server, no response."}},_processFault:function(b){this.stopTime=(new Date).getTime();this.fault={faultCode:"Connection.Fault",message:b}}})})},"mw-remote/RemoteEndPointsManager":function(){define(["./EndPointsManager"],
function(h){var f=null;null===f&&(f=new h);return f})},"mw-remote/EndPointsManager":function(){define(["dojo/_base/declare","dojo/_base/array","./iframeproxy/IframeProxyClient"],function(h,f,g){return h([],{constructor:function(){this._initializeEndPointsCollection()},_initializeEndPointsCollection:function(){this.endPointsCollection={ROUTER_LEAF_INSECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json",messages:"RouterLogin CreateAccount CurrentUser Login UpdateAccount ServiceRegistry ClientType AuthorizationDetails".split(" "),
iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},ROUTER_LEAF_SECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},WORKER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!1,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteWorkerProducer",acceptsMessageContainerMessages:!0},
WORKER_ASYNC_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/async",messages:[],acceptsMessageContainerMessages:!0},USAGE_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"udc/service/v1/events",messages:["UsageDataEventCollection"],iframeProxyName:"remoteUDCProducer",acceptsMessageContainerMessages:!1},HELP_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,
enabled:!0,iframeProxyUrl:"",pathSuffix:"",messages:["HelpDataEventCollection"],iframeProxyName:"doc_center",acceptsMessageContainerMessages:!1}}},reset:function(){this._initializeEndPointsCollection()},setUpNewEndPoint:function(e,d,c,b,a){this.endPointsCollection[e]={routingHost:"",routingKey:"",pathSuffix:c,enabled:d,messages:[],iframeProxy:null,iframeProxyName:b,acceptsMessageContainerMessages:a}},getPathSuffixForEndPoint:function(e){return this.endPointsCollection[e].pathSuffix},setPathSuffixForEndPoint:function(e,
d){this.endPointsCollection[e].pathSuffix=d},getEndPointNames:function(){var e={},d;for(d in this.endPointsCollection)this.endPointsCollection.hasOwnProperty(d)&&(e[d]=d);return e},setRoutingHostAndRoutingKey:function(e,d,c){d&&d.lastIndexOf("/")!==d.length-1&&(d+="/");this.endPointsCollection[e].routingHost=d;c&&(this.endPointsCollection[e].routingKey=c);d&&this._setIframeRoutingHostAndRoutingkey(e)},_setIframeRoutingHostAndRoutingkey:function(e){var d=this.getIframeProxyClientForEndPoint(e);d&&
d.setRemotePageHost(this.endPointsCollection[e].routingHost,this.endPointsCollection[e].routingKey,null,this.endPointsCollection[e].iframeProxyUrl)},getRoutingHost:function(e){return this.endPointsCollection[e].routingHost},getRoutingKey:function(e){return this.endPointsCollection[e].routingKey},getMessageTypesMappedToEndPoint:function(e){return this.endPointsCollection[e].messages},isEndPointEnabled:function(e){return this.endPointsCollection[e].enabled},setMessageTypesToEndPoint:function(e,d){this.endPointsCollection[e].messages=
d},enableEndPoint:function(e){this.endPointsCollection[e].enabled=!0},disableEndPoint:function(e){this.endPointsCollection[e].enabled=!1},getEndPointForMessageType:function(e){var d=null,c;for(c in this.endPointsCollection)if(this.endPointsCollection.hasOwnProperty(c)&&(d=-1<f.lastIndexOf(this.endPointsCollection[c].messages,e)?c:d))if(this.isEndPointEnabled(d))break;else d=null;return d?d:this.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT},getRemoteUrlForEndPoint:function(e){var d=this.endPointsCollection[e].routingHost+
this.endPointsCollection[e].pathSuffix;this.endPointsCollection[e].routingKey&&(d=d+"?routingkey\x3d"+this.endPointsCollection[e].routingKey);return d},setIframeProxyClientForEndPoint:function(e,d){this.endPointsCollection[e].iframeProxy=d},getIframeProxyClientForEndPoint:function(e){var d=this.endPointsCollection[e].iframeProxy;d||(d=new g(this.endPointsCollection[e].iframeProxyName),this.endPointsCollection[e].iframeProxy=d);return d},isEndpointMessageContainerBased:function(e){return e&&this.endPointsCollection[e]?
this.endPointsCollection[e].acceptsMessageContainerMessages:!0},addMessagesTypesToEndPoint:function(e,d){this.endPointsCollection[e]&&-1===this.endPointsCollection[e].messages.indexOf(d)&&this.endPointsCollection[e].messages.push(d)},removeMessageTypesFromEndPoint:function(e,d){if(this.endPointsCollection[e]){var c=this.endPointsCollection[e].messages.indexOf(d);-1<c&&this.endPointsCollection[e].messages.splice(c,1)}}})})},"mw-remote/impl/Transaction":function(){define(["dojo/_base/declare","dojo/_base/Deferred",
"dojo/_base/lang","mw-remote/RemoteEndPointsManager","mw-utils/Utils"],function(h,f,g,e,d){return h([],{constructor:function(c){c=c||{};this.requestMessages=c.requestMessages||{};this.responseMessages=c.responseMessages||{};this.context=c.context;this.computeToken=c.computeToken;this.uuidClassifierMap=c.uuidClassifierMap||{};this.endPointName=c.endPointName||null;this.allowedMessages=c.allowedMessages||[];this.ignoreMessageTypes=c.ignoreMessageTypes||[];this.sendMessage=c.sendMessage},addRequestMessage:function(c,
b,a){if(b){var d=e.isEndpointMessageContainerBased(this.endPointName);this.requestMessages[c]||(this.requestMessages[c]=[]);g.isArray(b)?b.forEach(function(b){this.addRequestMessage(c,b,a)},this):d?(b.uuid=b.uuid||this._generateUuid(),a&&(this.uuidClassifierMap[b.uuid]=a),this.requestMessages[c].push(b)):this.requestMessages[c]=b;this.requestMessages=this._filterMessages(this.requestMessages)}},_filterMessages:function(c){var b={};this.getRequestMessageTypes().forEach(function(a){if(0===this.allowedMessages.length||
0<=this.allowedMessages.indexOf(a))b[a]=c[a]},this);return b},getResponseMessageTypes:function(){var c,b=[];for(c in this.responseMessages)this.responseMessages.hasOwnProperty(c)&&b.push(c);return b},getRequestMessageTypes:function(){var c,b=[];for(c in this.requestMessages)this.requestMessages.hasOwnProperty(c)&&b.push(c);return b},getMessageClassifier:function(c){return c&&c.uuid&&this.uuidClassifierMap.hasOwnProperty(c.uuid)?this.uuidClassifierMap[c.uuid]:""},send:function(){this._removeEmptyMessages();
this._isEmpty(this.requestMessages)?(this.deferred=new f,this.deferred.callback()):(this.startTime=(new Date).getTime(),this.deferred=this._doSend(this._getRequest(this.requestMessages)),this.deferred.addCallback(this,this._processResponse),this.deferred.addErrback(this,this._processFault))},addIgnoreMessageType:function(c,b){if(-1<this.getRequestMessageTypes().indexOf(c))if(b)for(var a in this.uuidClassifierMap)this.uuidClassifierMap.hasOwnProperty(a)&&(b&&this.uuidClassifierMap[a]===b)&&this.ignoreMessageTypes.push(c+
":"+b);else this.ignoreMessageTypes.push(c)},_removeEmptyMessages:function(){if(!this._isEmpty(this.requestMessages))for(var c in this.requestMessages)this.requestMessages.hasOwnProperty(c)&&g.isArray(this.requestMessages[c])&&0===d.getArrayLength(this.requestMessages[c])&&delete this.requestMessages[c]},_isEmpty:function(c){for(var b in c)if(c.hasOwnProperty(b))return!1;return!0},_generateUuid:function(){return d.generateUuid()}})})},"mw-utils/Utils":function(){define(["dojo/_base/lang","dojo/_base/window",
"mw-utils/deprecation"],function(h,f,g){return{generateUuid:function(){return"xxxxxxxx".replace(/[xy]/g,function(e){var d=16*Math.random()|0;return("x"===e?d:d&3|8).toString(16)}).toUpperCase()},isImageData:function(e){return!!e&&(f.global.ImageData&&e instanceof f.global.ImageData||e.hasOwnProperty("width")&&e.hasOwnProperty("height")&&e.hasOwnProperty("data"))},isArray:function(e){g.deprecated({deprecated:{module:"MW/utils/Utils",method:"isArray"},geckNumber:1444368});return Array.isArray(e)},getArrayLength:function(e){var d=
0;if(!h.isArray(e))return!1;e.forEach(function(c){c&&(d+=1)});return d},isWhitespace:function(e){return/^\s+$/.test(e)},removeSurroundingNewLines:function(e){for(;"\n"===e.charAt(0);)e=e.substring(1);for(;"\n"===e.charAt(e.length-1);)e=e.substring(0,e.length-1);return e},getFirstUniqueElement:function(e,d){var c=null;d.some(function(b){if(-1===e.indexOf(b))return c=b,!0});return c},unionOfWordSets:function(e,d,c){e=this._stringToArray(e);d=this._stringToArray(d);e=this.unionOfArrays(e,d);return c?
e.join(" "):e},intersectionOfWordSets:function(e,d,c){e=this._stringToArray(e);d=this._stringToArray(d);e=this.intersectionOfArrays(e,d);return c?e.join(" "):e},differenceOfWordSets:function(e,d,c){e=this._stringToArray(e);d=this._stringToArray(d);e=this.unique(this.differenceOfArrays(e,d));return c?e.join(" "):e},unionOfArrays:function(e,d){return this.unique(e.concat(d))},intersectionOfArrays:function(e,d){return this.nonunique(e.concat(d))},differenceOfArrays:function(e,d){if(void 0===window.Map)return this._legacyDifferenceOfArrays(e,
d);var c,b,a,k=new Map,f=[];for(a=0;a<d.length;a++)k.set(d[a],null);for(a=0;a<e.length;a++)b=e[a],(c=k.has(b))||f.push(b);return f},_legacyDifferenceOfArrays:function(e,d){return this.unique(e.filter(function(c){return-1===d.indexOf(c)}))},unique:function(e){return e.filter(function(d,c){return e.indexOf(d)===c})},nonunique:function(e){return this.unique(e.filter(function(d,c){return e.indexOf(d)!==c}))},arrayEquals:function(e,d,c){if(e===d)return!0;if(e.length!==d.length)return!1;c||(c=function(a,
b){return a===b});for(var b=0,a=e.length;b<a;b++)if(!c(e[b],d[b]))return!1;return!0},removeEmptyElements:function(e){return e.filter(function(d){return!(""===d||null===d||void 0===d)})},_stringToArray:function(e){return!this._isString(e)?e:this.removeEmptyElements(e.split(" "))},_isString:function(e){return"string"===typeof e||e instanceof String}}})},"mw-utils/deprecation":function(){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&
"function"===typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};define(["dojo/_base/config","mw-log/Log"],function(f,g){var e={deprecated:function(d){var c,b;if((f.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(d))b=window.showDeprecationsAsErrors||d.deprecationLevel===this.ERROR?this.ERROR:this.WARN,c="DEPRECATED: ",d.deprecated&&(c+=d.deprecated.module,d.deprecated.method&&(c+="."+d.deprecated.method+"()"),c+="."),d.replacement&&(c+=" Use "+d.replacement.module,
d.replacement.method&&(c+="."+d.replacement.method+"()"),c+=" instead."),d.removalVersion&&(c+=" Will be removed in version: "+d.removalVersion+"."),d.geckNumber&&(c+=" Please use g"+d.geckNumber+" to track latest information regarding this deprecation"),d.additionalInformation&&(c+=" "+d.additionalInformation),g[b](c)},_isConfigValid:function(d){var c=!!d.deprecated&&"object"===h(d.deprecated)&&d.deprecated.hasOwnProperty("module");d.replacement&&(c=c&&"object"===h(d.replacement)&&d.replacement.hasOwnProperty("module"));
d.geckNumber&&(c=c&&"number"===typeof d.geckNumber);c||g.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");return c}};Object.defineProperties(e,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return e})},"mw-remote/impl/FaultManager":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","mw-remote/RemoteEndPointsManager"],function(h,f,g,e){return f([],
{constructor:function(d){d=d||{};this.faultHandlers=d.faultHandlers||{};this.topLevelHandlers=d.topLevelHandlers||[];this.endPointLevelHandlers=d.endPointLevelHandlers||{}},registerFaultHandler:function(d,c,b){b&&(c=g.hitch(b,c));this.faultHandlers[d]=c},deregisterFaultHandler:function(d){delete this.faultHandlers[d]},registerTopLevelFaultHandler:function(d,c,b){b&&(c=g.hitch(b,c));if(g.isString(d)){if("*"===d)return d={matcher:d,handler:c},this.defaultTopLevelHandler=c,d;d=this._constructMatcherFromQuery(d)}d=
{matcher:d,handler:c};this.topLevelHandlers.push(d);return d},registerEndpointLevelFaultHandler:function(d,c,b,a){a&&(b=g.hitch(a,b));g.isString(c)&&(c=this._constructMatcherFromQuery(c));c={matcher:c,handler:b};this.endPointLevelHandlers[d]||(this.endPointLevelHandlers[d]=[]);this.endPointLevelHandlers[d].push(c);return c},deregisterTopLevelFaultHandler:function(d){var c=this.topLevelHandlers.indexOf(d);-1<c?this.topLevelHandlers.splice(c,1):"*"===d.matcher&&delete this.defaultTopLevelHandler},_constructMatcherFromQuery:function(d){var c=
[];d.split("||").forEach(function(b){b=g.trim(b);b=b.replace(/([\.])/g,"\\$1");b=b.replace(/\*/g,".*");c.push(RegExp("^"+b+"$"))});return function(b){return h.some(c,function(a){return a.test(b.faultCode||b.code||"")})}},handleFault:function(d){var c,b=function(a,b){var c;if(c=d.getMessageClassifier(b))if(c=[a,c].join(":"),this.faultHandlers[c])this.faultHandlers[c](d.fault,d.context)};for(c in d.requestMessages)if(d.requestMessages.hasOwnProperty(c)){if(this.faultHandlers[c])this.faultHandlers[c](d.fault,
d.context);var a=d.requestMessages[c];Array.isArray(a)&&a.forEach(g.hitch(this,b,c))}if(this.faultHandlers["*"])this.faultHandlers["*"](d.fault,d.context);this.endPointLevelHandlers[d.endPointName]?this._handleEndpointLevelFault(d):this._handleTopLevelFault(d)},_handleEndpointLevelFault:function(d){var c=!1,b=h.filter(this.endPointLevelHandlers[d.endPointName],function(a){return a.matcher.call(this,d.fault,d.context)},this);0<b.length&&b[0].handler&&(c=!0,b[0].handler.call(this,d.fault,d.context,
d));return c},_handleTopLevelFault:function(d){var c=h.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,d.fault,d.context)},this);(c=0<c.length?c[0].handler:this.defaultTopLevelHandler)&&c.call(this,d.fault,d.context,d)},handleNonTransactionFault:function(d){var c=h.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,d)},this);(c=0<c.length?c[0].handler:this.defaultTopLevelHandler)&&c.call(this,d)}})})},"mw-remote/impl/RequestManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang mw-remote/RemoteEndPointsManager mw-remote/defaultMessageMapping ./Transaction".split(" "),
function(h,f,g,e,d,c,b){return f([],{defaultMapping:c,constructor:function(a){a=a||{};this.defaultFactories=a.defaultFactories||{};this.mockHandlers=a.mockHandlers||{};this.mapping=a.mapping||this.defaultMapping;this.responseManager=a.responseManager},registerDefaultMessageFactory:function(a,b,c){c&&(b=e.hitch(c,b));this.defaultFactories[a]=b},deregisterDefaultMessageFactory:function(a){delete this.defaultFactories[a]},registerMockResponseGenerator:function(a,c,d){var f=this;c=e.hitch(d||this,c);
this.mockHandlers[a]=function(a,d){var e,l=b.construct(d);e=c(a,l);e||(e=new g,e.callback());e.addCallback(function(){f.responseManager._processResult(l)})}},deregisterMockResponseGenerator:function(a){delete this.mockHandlers[a]},sendMessage:function(a,b,c){var d={},e={};b=b||{};this._createAndFillTransactions(a,b,c,d,e);a=Object.keys(d);for(b=0;b<a.length;b+=1)c=a[b],this._callMocks(e[c]),d[c].send(),this.responseManager.handleTransaction(d[c])},_getTransaction:function(a,c){return b.construct({context:c,
computeToken:this.computeToken,endPointName:a})},_getMockTransaction:function(a,c,d){return b.construct({context:c,computeToken:this.computeToken,endPointName:a,uuid:d})},_createAndFillTransactions:function(a,b,c,e,f){var g,h,r=function(a){var c,g,l,n,h;c=d.getEndPointForMessageType(a);n=e[c];h=f[c];n||(n=this._getTransaction(c,b),h=this._getMockTransaction(c,b,n.uuid),e[c]=n,f[c]=h);if(this.defaultFactories[a]&&(c=this.defaultFactories[a](n.context)))g=a.split(":"),l=g[0],g=g.slice(1,g.length).join(":"),
this.mockHandlers[a]||n.addRequestMessage(l,c,g),h.addRequestMessage(l,c,g)},s,t;for(g in a)a.hasOwnProperty(g)&&(h=d.getEndPointForMessageType(g),s=f[h],t=e[h],e[h]||(t=this._getTransaction(h,b),s=this._getMockTransaction(h,b,t.uuid),e[h]=t,f[h]=s),h=[g,c].join(":"),!this.mockHandlers[g]&&!this.mockHandlers[h]&&t.addRequestMessage(g,a[g],c),s.addRequestMessage(g,a[g],c),this.mapping[h]?this.mapping[h].forEach(r,this):this.mapping[g]&&this.mapping[g].forEach(r,this))},_callMocks:function(a){var b,
c,d=a.context;delete a.context;var f=function(a,c){var d;if(d=b.getMessageClassifier(c))if(d=[a,d].join(":"),this.mockHandlers[d])this.mockHandlers[d]([c],b)};for(c in a.requestMessages)if(a.requestMessages.hasOwnProperty(c)){b=e.mixin({},a);b.context=d;if(this.mockHandlers.hasOwnProperty(c))this.mockHandlers[c](b.requestMessages[c],b);Array.isArray(b.requestMessages[c])?b.requestMessages[c].forEach(e.hitch(this,f,c)):f(c,b.requestMessages[c])}if(this.mockHandlers["*"])this.mockHandlers["*"](c,b.requestMessages[c],
b)}})})},"mw-remote/defaultMessageMapping":function(){define([],function(){return{Eval:["CurrentFolder","ListFolder"],"Eval:Ping":[],"Eval:RunFile":["UpdateFile","CurrentFolder","ListFolder"],"Eval:MlsPublishPre":["UpdateFile"],"FEval:liveEvalInstrumentCode":[],Interrupt:[],"FEval:GetFigures":["CurrentFolder","ListFolder"],"FEval:CloseFigure":["FEval:GetFigures"],"FEval:SelectFigure":["FEval:GetFigures"],"FEval:ResetAxes":["FEval:GetFigures"],"FEval:ResizeFigure":["FEval:GetFigures"],"FEval:AxesInteraction2D":["FEval:GetFigures"],
"FEval:AxesInteraction3D":["FEval:GetFigures"],CurrentUser:["ServiceRegistry"],RouterLogin:["ServiceRegistry"],CurrentFolder:["ListFolder"],MoveFile:["CurrentFolder"],Variable:[],CloseFile:["SaveSession"],UpdateFile:["SaveSession"],SaveSession:["UpdateFile"],Logout:["CloseFile"],UpdateShare:["ListFolder"]}})},"mw-remote/impl/ResponseManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang mw-log/Log mw-remote/RemoteEndPointsManager".split(" "),
function(h,f,g,e,d,c,b){return f([],{constructor:function(a){a=a||{};this.responseHandlers=a.responseHandlers||{};this.faultManager=a.faultManager;this.transactions=a.transactions||[]},registerResponseHandler:function(a,b,c){c&&(b=d.hitch(c,b));this.responseHandlers[a]=b},deregisterResponseHandler:function(a){delete this.responseHandlers[a]},handleTransaction:function(a){this.transactions.push(a);a.deferred.addCallback(d.hitch(this,this._processAll,a));a.deferred.addCallback(d.hitch(this,this._processResult,
a));a.deferred.addErrback(d.hitch(this,this._processAll,a));a.deferred.addErrback(d.hitch(this,this._processFault,a))},_processAll:function(a){a=this.transactions.indexOf(a);0<=a&&this.transactions.splice(a,1)},_processResult:function(a){a.getResponseMessageTypes().forEach(function(b){var d=a.responseMessages[b],f=[];try{if(Array.isArray(d)){d.forEach(function(c){var d,e=a.getMessageClassifier(c);if(e){d=[b,e].join(":");var g=this,l=!1;a.getRequestMessageTypes().forEach(function(b){b=a.requestMessages[b];
Array.isArray(b)?b.forEach(function(b){g.responseHandlers[d]&&b.uuid===c.uuid&&(g.responseHandlers[d]([c],a.context),l=!0)}):g.responseHandlers[d]&&b.uuid===c.uuid&&(g.responseHandlers[d]([c],a.context),l=!0)});l||f.push(c)}else f.push(c)},this);if(0<f.length&&this.responseHandlers[b])this.responseHandlers[b](f,a.context);if(this.responseHandlers["*"])this.responseHandlers["*"](b,a.responseMessages[b],a.context)}}catch(g){c.error("Remote: Fault occurred while processing response.\nMessage: "+g.message+
"\nType: "+b+"\nResponse: "+e.toJson(d))}},this);this._processUdcResponses(a);a.fault&&this.faultManager.handleFault(a)},_processUdcResponses:function(a){if(!b.isEndpointMessageContainerBased(a.endPointName)){var c=Object.keys(a.requestMessages)[0];if(this.responseHandlers[c])this.responseHandlers[c](a.responseMessages)}},_processFault:function(a){this.faultManager.handleFault(a)}})})},"mw-remote/serviceRegistryLookup":function(){define(["dojo/request/xhr","require"],function(h,f){var g=!1,e={_serviceData:{},
getServiceRegistryEndpoint:function(d){if(e._serviceData.serviceregistry){var c,b;c=e._serviceData.serviceregistry.length;for(b=0;b<c;b+=1)if(e._serviceData.serviceregistry[b].name===d)return e._serviceData.serviceregistry[b].endpoint}return""}};return{load:function(d,c,b){g?b(e):h("/serviceregistrylookup/1/service",{handleAs:"json",failOk:!0,method:"GET",timeout:15E3,sync:!c.async}).then(function(a){e._serviceData=a;g=!0;b(e)},function(a){e._serviceData={};g=!0;b(e)})}}})},"mw-statemachine/statemachineimpl/TimeoutTrigger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-log/Log","./Trigger"],function(h,f,g,e){return h(e,{constructor:function(){var d=this.name.split(" ");(2>d.length||"timeout"!==d[0])&&g.error("Invalid trigger name for a TimeoutTrigger. Could not parse out the type of handler.");this.timeoutInSeconds=parseFloat(d[1]);this.handlerType=d[0]},enable:function(){this.disable();this.timeoutHandle=setTimeout(f.hitch(null,this.triggerHandler,this.name),1E3*this.timeoutInSeconds)},disable:function(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),
this.timeoutHandle=null)}})})},"mw-statemachine/statemachineimpl/Transition":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log"],function(h,f,g){return h([],{constructor:function(e){this.state={};this.target="";this.action=this.condition=null;h.safeMixin(this,e)},handleTrigger:function(e,d){var c="";this.checkCondition(e,d)&&(this.runAction(e,d),c=this.getTarget(e,this.target,d));return c},checkCondition:function(e,d){return!this.condition?!0:f.hitch(this.state.context,this.condition).apply(null,
[e,this.state.data].concat(d))},runAction:function(e,d){var c;this.action&&(c=f.hitch(this.state.context,this.action),c.apply(null,[e,this.state.data].concat(d)))},getTarget:function(e,d,c){var b,a,k;if(f.isString(d))a=d;else if(f.isFunction(d))d=f.hitch(this.state.context,d),a=d.apply(null,[e,this.state.data].concat(c));else if(f.isArray(d))for(b=0;b<d.length;b+=1){a=this.getTarget(e,d[b],c);if(f.isString(a)){a={target:a};f.mixin(a,k);break}if(a&&a.target){f.mixin(a,k);break}k=a||{}}else g.warn("Transition: improper target: ",
d);return a}})})},"mw-messageservice/messageserviceimpl/MessageServiceState":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/promise/all mw-statemachine/StateMachine mw-log/Log".split(" "),function(h,f,g,e,d,c,b){return h([],{_MAX_RETRIES:30,logStateChanges:!1,constructor:function(){this._stateOptions={context:this,name:"WraDataService",namespace:"MOTW.wra",defaultSubstate:"disconnected",substates:{disconnected:{transitions:{onEnterState:this._enterDisconnected,
start:"connecting"}},connecting:{transitions:{onEnterState:this._enterConnecting,_connectSuccess:"resubscribing",_connectFailure:"reconnecting",stop:"disconnected"}},reconnecting:{transitions:{onEnterState:this._enterReconnecting,_connectSuccess:"resubscribing",_connectFailure:[this._retryFailure,"retryDelay"],stop:"disconnected"}},retryDelay:{transitions:{"timeout 2":"reconnecting",_reconnect:"reconnecting",stop:"disconnected"}},resubscribing:{transitions:{onEnterState:this._enterResubscribing,_resubscribeSuccess:"connected",
_resubscribeFailure:"reconnecting",stop:"disconnecting"}},connected:{transitions:{onEnterState:this._enterConnected,_reconnect:"reconnecting",stop:"disconnecting"}},disconnecting:{transitions:{onEnterState:this._enterDisconnecting,_disconnectSuccess:"disconnected",_disconnectFailure:"disconnected","timeout 2":"disconnected"}},fatallyDisconnected:{transitions:{onEnterState:this._enterFatallyDisconnected,stop:"disconnected"}}}}},setDelegate:function(a){if(this._delegate!==a){this._delegate=a;var d=
this;g.after(a,"onConnectionError",function(){b.warn("MessageService received connection error, reconnecting");d._reconnect()},!0);this._states=new c(this._stateOptions);g.after(this._states,"onEnterState",f.hitch(this,this._enterState),!0);this._states.start()}},onConnected:function(){},onNewlyConnected:function(){},onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},isStarted:function(){return"disconnecting"!==this._currentState&&
"disconnected"!==this._currentState},isConnected:function(){return"connected"===this._currentState},isFatallyDisconnected:function(){return"fatallyDisconnected"===this._currentState},isDisconnected:function(){return"disconnected"===this._currentState},start:function(){},stop:function(){},_enterState:function(a){var c=this._currentState;this._currentState=a;this.logStateChanges&&b.info("MessageService state change: "+c+" -\x3e "+a);if("connected"===c)this.onNotConnected();if("connected"===a&&this._previouslyConnected)this.onReconnected();
else if("connected"===a&&!this._previouslyConnected)this.onNewlyConnected()},_enterDisconnected:function(){this._previouslyConnected=!1;this._delegate.cleanup();this.onDisconnected()},_enterConnecting:function(){this._retryCount=0;this._delegate.connect().then(this._connectSuccess,this._connectFailure)},_enterReconnecting:function(){this._retryCount+=1;b.info("Reconnecting message service. Attempt "+this._retryCount,arguments);this._delegate.cleanup();this._delegate.connect().then(this._connectSuccess,
this._connectFailure)},_reconnect:function(){},_connectSuccess:function(){},_connectFailure:function(){},_timeoutAction:function(){this.logStateChanges&&b.info("MessageService timeout:",arguments)},_retryFailure:function(){var a;this._retryCount>=this._MAX_RETRIES&&(b.error("Message service fatally disconnected."),a="fatallyDisconnected");return a},_enterResubscribing:function(){function a(a){e.push(this._delegate.doSubscribe(a.channel))}var b,c,e=[];this._delegate.doStartBatch();for(b in this.channelSubscriptions)this.channelSubscriptions.hasOwnProperty(b)&&
(c=this.channelSubscriptions[b],c.forEach(a,this),this.channelSubscriptions[b].subscribed=!0);this._delegate.doEndBatch();d(e).then(this._resubscribeSuccess,this._resubscribeFailure)},_resubscribeSuccess:function(){},_resubscribeFailure:function(){},_enterConnected:function(){this._delegate.delegateConnected()?(this._retryCount=0,this._previouslyConnected&&b.info("Successfully connected."),this._previouslyConnected=!0,this.onConnected()):this._reconnect()},_enterFatallyDisconnected:function(){this.onFatallyDisconnected()},
_enterDisconnecting:function(){this._delegate.disconnect().then(this._disconnectSuccess,this._disconnectFailure)},_disconnectSuccess:function(){},_disconnectFailure:function(){}})})},"mw-messageservice/messageserviceimpl/MessageServiceReqResp":function(){define(["dojo/_base/declare","dojo/Deferred","mw-log/Log"],function(h,f,g){return h([],{pollDelay:50,constructor:function(e,d){this.remote=e;this.messageService=d;this.pending=0;e.registerDefaultMessageFactory("OpaqueMessage",function(){this.pending+=
1;return{opaqueMessageDOs:[]}},this);e.registerResponseHandler("OpaqueMessageResponse",function(c){this.pending-=1;c.forEach(function(b){try{b.opaqueMessageDOs&&b.opaqueMessageDOs.forEach(d.handleMessage,d)}catch(a){g.error("Error while handling message: "+a)}});this.poll()},this)},onMessage:function(e){},onConnectionError:function(e){},connect:function(){this.enabled=!0;this.poll();return(new f).resolve()},disconnect:function(){this.enabled=!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=
null);return(new f).resolve()},cleanup:function(){},poll:function(){if(this.enabled&&0===this.pending){var e=this;this.timeout=setTimeout(function(){e.pending+=1;e.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[]}});e.timeout=null},this.pollDelay)}},doPublish:function(e,d){clearTimeout(this.timeout);this.timeout=null;this.pending+=1;this.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[{channel:e,data:d}]}})},doSubscribe:function(e){},doUnsubscribe:function(e){},doStartBatch:function(){},
doEndBatch:function(){}})})},"MW/rtc/clipboardservice/InternalClipboard":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","MW/rtc/clipboardservice/Clipboard"],function(h,f,g,e){return h(e,{constructor:function(){this._clipboardData={}},setClipboardData:function(d){var c=new g,b=this.getAllFlavors();try{d&&(this._clipboardData={},d.forEach(f.hitch(this,function(a){this._setData(a.flavor,a.content)}))),c.resolve(),this.onClipboardDataChange(b,this.getAllFlavors())}catch(a){this._clipboardData=
{},c.reject()}return c.promise},_setData:function(d,c){return d&&c?(this._clipboardData[d]=c,!0):!1},getClipboardData:function(d){var c={},b=new g;d.forEach(f.hitch(this,function(a){c[a]=this._clipboardData[a]}));b.resolve(c);return b.promise},clearClipboardData:function(){var d=this.getAllFlavors();this._clipboardData={};this.onClipboardDataChange(d,this.getAllFlavors())},getAllFlavors:function(){var d=[];this._clipboardData&&(d=Object.keys(this._clipboardData));return d}})})},"MW/rtc/clipboardservice/Clipboard":function(){define(["dojo/_base/declare"],
function(h){return h(null,{setClipboardData:function(f){throw Error("Unimplemented method : setClipboardData");},getClipboardData:function(){throw Error("Unimplemented method : getClipboardData");},clearClipboardData:function(){throw Error("Unimplemented method : clearClipboard");},getAllFlavors:function(){throw Error("Unimplemented method : getAllFlavors");},onClipboardDataChange:function(f,g){}})})},"MW/rtc/clipboardservice/ConnectorClipboard":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/Deferred MW/rtc/clipboardservice/Clipboard MW/rtc/clipboardservice/ClipboardMessageServiceChannels mw-utils/Utils".split(" "),
function(h,f,g,e,d,c,b){return h(d,{REQUEST_ID:"requestId",RESPONSE_ID:"responseId",CONTENTS:"contents",SUCCESS_FLAG:"success",DUMMY_FLAVOR:"dummyFlavor",constructor:function(a){this._getDataPromise={};this._setDataPromise={};this._listOfAvaialableFlavors=[];this._messageService=a;this.installListeners()},installListeners:function(){this._messageService.subscribe(c.RECEIVE_AVAILABLE_DATA_FLAVORS,"_handleAvailableDataFlavors",this);this._messageService.publish(c.REQUEST_AVAILABLE_DATA_FLAVORS,{});
this._messageService.subscribe(c.GET_CLIPBOARD_DATA_RESPONSE,"_handleGetClipboardData",this);this._messageService.subscribe(c.SET_CLIPBOARD_DATA_RESPONSE,"_handleSetClipboardDataResponse",this)},setClipboardData:function(a){var d=new e,f=b.generateUuid();this._setDataPromise[f]=d;this._messageService.publish(c.SET_CLIPBOARD_DATA_REQUEST,{requestId:f,contents:a});return d.promise},_handleSetClipboardDataResponse:function(a){var b=a.data;a=b[this.SUCCESS_FLAG];(b=this._setDataPromise[b[this.RESPONSE_ID]])&&
(a?b.resolve():b.reject())},getClipboardData:function(a){var d=new e,f=b.generateUuid();this._getDataPromise[f]=d;this._messageService.publish(c.GET_CLIPBOARD_DATA_REQUEST,{requestId:f,flavors:a});return d.promise},_handleGetClipboardData:function(a){var b=a.data;a=b[this.CONTENTS];var b=b[this.RESPONSE_ID],c=this._getDataPromise[b];c&&(delete this._getDataPromise[b],a?c.resolve(a):c.reject(" [Clipboard Error] The data could not be retrieved "))},clearClipboardData:function(){var a=this.getAllFlavors();
this._listOfAvaialableFlavors=[];this.onClipboardDataChange(a,[])},getAllFlavors:function(){!g("windows")&&0===this._listOfAvaialableFlavors.length&&(this._listOfAvaialableFlavors=[this.DUMMY_FLAVOR]);return this._listOfAvaialableFlavors},_handleAvailableDataFlavors:function(a){var b=this.getAllFlavors();this._listOfAvaialableFlavors=a.data;this.onClipboardDataChange(b,this.getAllFlavors())}})})},"MW/rtc/clipboardservice/ClipboardMessageServiceChannels":function(){define([],function(){return{SET_CLIPBOARD_DATA_REQUEST:"/clipboardservice/setClipboardDataRequest",
GET_CLIPBOARD_DATA_REQUEST:"/clipboardservice/getClipboardDataRequest",REQUEST_AVAILABLE_DATA_FLAVORS:"/clipboardservice/requestAvailableDataFlavors",SET_CLIPBOARD_DATA_RESPONSE:"/clipboardservice/setClipboardDataResponse",GET_CLIPBOARD_DATA_RESPONSE:"/clipboardservice/getClipboardDataResponse",RECEIVE_AVAILABLE_DATA_FLAVORS:"/clipboardservice/sendAvailableDataFlavors"}})},"MW/rtc/clipboardservice/BrowserSyncedClipboard":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred mw-log/Log MW/rtc/clipboardservice/Clipboard MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,f,g,e,d,c){return h(d,{DUMMY_FLAVOR:"dummyFlavor",IE_TEXT_FLAVOR:"text",constructor:function(){this._availableFlavors=[];this._setDataPromise=this._getDataPromise=null},getCopyPasteHandlers:function(){return{cut:f.hitch(this,this._copyHandler),copy:f.hitch(this,this._copyHandler),paste:f.hitch(this,this._pasteHandler)}},setClipboardData:function(b){var a=new g;this._setDataPromise={object:a,data:b};return a.promise},_copyHandler:function(b){b.preventDefault();if(null!==this._setDataPromise){var a=
this._setDataPromise.data,d=[];if(b.clipboardData&&b.clipboardData.setData)a.forEach(function(a){try{b.clipboardData.setData(a.flavor,a.content),d.push(a.flavor)}catch(c){e.warn("Custom flavors could not be copied")}});else if(window.clipboardData){e.warn(!1,"Non-plaintext flavors could not be copied");var f=this.IE_TEXT_FLAVOR;a.forEach(function(a){a.flavor===c.TEXT&&window.clipboardData.setData(f,a.content)})}this._availableFlavors=d;this._setDataPromise.object.resolve();this._setDataPromise=null}},
getClipboardData:function(b){var a=new g;this._getDataPromise={object:a,data:b};return a.promise},_pasteHandler:function(b){b.preventDefault();var a={};if(b.clipboardData&&b.clipboardData.getData&&b.clipboardData.types)for(var c=b.clipboardData.types,d=this._getDataPromise.data,f=0;f<c.length;f+=1){var g=c[f];-1<d.indexOf(g)&&(a[g]=b.clipboardData.getData(g))}else window.clipboardData&&(e.warn(b.clipboardData&&b.clipboardData.getData,"Non-plaintext flavors could not be accessed"),a={"text/plain":window.clipboardData.getData(this.IE_TEXT_FLAVOR)});
this._availableFlavors=Object.keys(a);this._getDataPromise.object.resolve(a)},clearClipboardData:function(){this._availableFlavors=[]},getAllFlavors:function(){return 0==this._availableFlavors.length?[this.DUMMY_FLAVOR]:this._availableFlavors}})})},"MW/rtc/plugins/cutcopypaste/MIMETypes":function(){define([],function(){return{COPY_FOR_COMMAND_WINDOW:"application/x-java-serialized-object",HTML:"text/html",RTF:"text/rtf",IMAGE_LIST:"application/liveeditor_internal_imagelist",MATLAB_RICHTEXT:"application/matlab_json",
MATHML:"application/mathml+xml",MATHML_PRESENTATION:"application/mathml-presentation+xml",TEXT:"text/plain",UNICODE_STRING:"Unicode String",PROMPTLESS_STRING:"application/x-matlab-promptless-string"}})},"MW/rtc/core/provider/PluginProvider":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(null,{isApplicable:function(){return!0},requires:function(){},createInstance:function(){throw Error("Unimplemented API: createInstance");},destroyInstance:function(g){g&&
(g.isInstanceOf&&g.isInstanceOf(f))&&g.destroy()},priority:function(){return 1}})})},"MW/rtc/abstract/AbstractPlugin":function(){define(["dojo/_base/declare","dijit/Destroyable"],function(h,f){return h(f,{})})},"MW/rtc/cursor/CursorActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/CursorActions"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice","rtc.keyhandler",
"rtc.cursorcontroller"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/cursor/CursorActions":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{constructor:function(f,e,d){f.loadActions(this._getActions(d));e.addBindings(this._getAdditionalKeyBindings())},_getActions:function(g){return[{id:"rtc_move_left",enabled:!0,key:"left",callback:f.hitch(g,"movePosition",g.LEFT)},{id:"rtc_move_right",enabled:!0,key:"right",callback:f.hitch(g,"movePosition",
g.RIGHT)},{id:"rtc_move_up",enabled:!0,key:"up",callback:f.hitch(g,"movePosition",g.UP)},{id:"rtc_move_down",enabled:!0,key:"down",callback:f.hitch(g,"movePosition",g.DOWN)},{id:"rtc_move_word_left",enabled:!0,key:"ctrl_left",platformKey:{mac:"alt_left"},callback:f.hitch(g,"movePosition",g.WORD_LEFT)},{id:"rtc_move_word_right",enabled:!0,key:"ctrl_right",platformKey:{mac:"alt_right"},callback:f.hitch(g,"movePosition",g.WORD_RIGHT)},{id:"rtc_move_line_end",enabled:!0,key:"end",platformKey:{mac:"meta_right"},
callback:f.hitch(g,"movePosition",g.LINE_END)},{id:"rtc_move_line_start",enabled:!0,key:"home",platformKey:{mac:"meta_left"},callback:f.hitch(g,"movePosition",g.LINE_START)},{id:"rtc_move_start",enabled:!0,key:"ctrl_home",platformKey:{mac:"home"},callback:f.hitch(g,"movePosition",g.START)},{id:"rtc_move_end",enabled:!0,key:"ctrl_end",platformKey:{mac:"end"},callback:f.hitch(g,"movePosition",g.END)},{id:"rtc_select_left",enabled:!0,key:"shift_left",callback:f.hitch(g,"movePosition",g.LEFT,g.KEEP_ANCHOR)},
{id:"rtc_select_right",enabled:!0,key:"shift_right",callback:f.hitch(g,"movePosition",g.RIGHT,g.KEEP_ANCHOR)},{id:"rtc_select_up",enabled:!0,key:"shift_up",callback:f.hitch(g,"movePosition",g.UP,g.KEEP_ANCHOR)},{id:"rtc_select_down",enabled:!0,key:"shift_down",callback:f.hitch(g,"movePosition",g.DOWN,g.KEEP_ANCHOR)},{id:"rtc_select_word_left",enabled:!0,key:"ctrl_shift_left",platformKey:{mac:"alt_shift_left"},callback:f.hitch(g,"movePosition",g.WORD_LEFT,g.KEEP_ANCHOR)},{id:"rtc_select_word_right",
enabled:!0,key:"ctrl_shift_right",platformKey:{mac:"alt_shift_right"},callback:f.hitch(g,"movePosition",g.WORD_RIGHT,g.KEEP_ANCHOR)},{id:"rtc_select_line_start",enabled:!0,key:"shift_home",platformKey:{mac:"meta_shift_left"},callback:f.hitch(g,"movePosition",g.LINE_START,g.KEEP_ANCHOR)},{id:"rtc_select_line_end",enabled:!0,key:"shift_end",platformKey:{mac:"meta_shift_right"},callback:f.hitch(g,"movePosition",g.LINE_END,g.KEEP_ANCHOR)},{id:"rtc_select_start",enabled:!0,key:"ctrl_shift_home",platformKey:{mac:"alt_shift_home"},
callback:f.hitch(g,"movePosition",g.START,g.KEEP_ANCHOR)},{id:"rtc_select_end",enabled:!0,key:"ctrl_shift_end",platformKey:{mac:"alt_shift_end"},callback:f.hitch(g,"movePosition",g.END,g.KEEP_ANCHOR)},{id:"rtc_move_page_up",enabled:!0,key:"pageup",callback:f.hitch(g,"movePosition",g.PAGE_UP)},{id:"rtc_move_page_down",enabled:!0,key:"pagedown",callback:f.hitch(g,"movePosition",g.PAGE_DOWN)},{id:"rtc_select_page_up",enabled:!0,key:"shift_pageup",callback:f.hitch(g,"movePosition",g.PAGE_UP,g.KEEP_ANCHOR)},
{id:"rtc_select_page_down",enabled:!0,key:"shift_pagedown",callback:f.hitch(g,"movePosition",g.PAGE_DOWN,g.KEEP_ANCHOR)},{id:"rtc_select_all",key:"ctrl_a",platformKey:{mac:"meta_a"},enabled:!0,callback:f.hitch(g,"selectAll")},{id:"rtc_clear_selection",enabled:!0,key:"escape",callback:f.hitch(g,"clearSelection")}]},_getAdditionalKeyBindings:function(){return[{platformKey:{mac:"ctrl_b"},action:"rtc_move_left"},{platformKey:{mac:"ctrl_f"},action:"rtc_move_right"},{platformKey:{mac:"ctrl_p"},action:"rtc_move_up"},
{platformKey:{mac:"ctrl_n"},action:"rtc_move_down"},{platformKey:{mac:"ctrl_a"},action:"rtc_move_line_start"},{platformKey:{mac:"ctrl_e"},action:"rtc_move_line_end"},{platformKey:{mac:"meta_up"},action:"rtc_move_start"},{platformKey:{mac:"meta_down"},action:"rtc_move_end"},{platformKey:{mac:"meta_shift_up"},action:"rtc_select_start"},{platformKey:{mac:"shift_home"},action:"rtc_select_start"},{platformKey:{mac:"meta_shift_down"},action:"rtc_select_end"},{platformKey:{mac:"shift_end"},action:"rtc_select_end"}]}})})},
"MW/rtc/cursor/CursorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/Cursor"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view","rtc.fileendselectable"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/cursor/Cursor":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/mouse MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/Range MW/rtc/model/RangeUtilities MW/rtc/model/Selection MW/rtc/model/SelectionUtilities MW/rtc/view/PositionMoveUtilities mw-log/Log".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){return h(c,{_MISSING_SELECTION_ERROR:"Expected a selection when using this API.",NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,START:5,END:6,LINE_START:7,LINE_START_POS1:8,LINE_END:9,WORD_LEFT:10,WORD_RIGHT:11,WORD_RIGHT_EXCL:12,PAGE_UP:13,PAGE_DOWN:14,KEEP_ANCHOR:15,KEYBOARD_SELECT:16,MOUSE_SELECT:20,MOUSE_DSELECT:21,MOUSE_TSELECT:22,DELETE:23,EVENT_OUTSIDE:24,DOUBLE_CLICK_TIME:400,constructor:function(b,c,d){this._internalDocument=b;this._view=c;this.position=new a;this.anchor=
new a;this._offsetInLine=null;this._pageYOffset={dir:this.NONE,offset:-1};this._preservedSelection={};this._fileEndSelected=d?!1:null;this._selectionAutoScrollTimer=this._currentAction=null;this._pendingChangeEvent=this._suspendChangeEvent=this._scrollLater=!1;this.own(e.after(this._internalDocument,"onDocumentReset",f.hitch(this,"initialize")))},initialize:function(){this.movePosition(this.START);this.position.setLive(!0);this.own(e.after(this.position,"onChange",f.hitch(this,"_onPositionChange")));
this._clearCurrentAction()},onChange:function(){},onUpdate:function(a,b){if(!a){if(this.isHidden()){this._scrollLater=!0;return}this._scrollLater=!1}if(this.position.isValid()&&!1!==b&&(this._positionHasChanged||this._selectionHasChanged||b)){if(this._suspendChangeEvent)this._pendingChangeEvent=!0;else this.onChange();this._selectionHasChanged=this._positionHasChanged=!1}},suspendChangeEvent:function(){this._suspendChangeEvent=!0},activateChangeEvent:function(a){this._suspendChangeEvent=!1;if(this._pendingChangeEvent&&
!a)this.onChange();this._pendingChangeEvent=!1},_onPositionChange:function(){this._positionHasChanged=!0},hide:function(){this._clearCurrentAction();this._hidden=!0;this.onUpdate(!0)},show:function(a,b){a=a||!this._scrollLater;this._hidden&&(this._hidden=!1,this._clearCurrentAction(),this.onUpdate(a,b))},adjustSelection:function(b,c){if(!b.isLocal&&(!0===c||b.startNode.textContainer()===b.endNode.textContainer())){var d;if(0<b.startPos&&b.startPos===b.startNode.maxOffset()&&(d=c||b.startNode.parent.containsTextNodes()?
b.startNode.nextNode():b.startNode.nextSibling()))if(d.containsTextNodes()&&(d=d.startNode()),0<b.endPos||d!==b.endNode)b.startNode=d,b.startPos=0;if(0===b.endPos&&!this._fileEndSelected&&(d=c||b.endNode.parent.containsTextNodes()?b.endNode.prevNode():b.endNode.previousSibling()))d.containsTextNodes()&&(d=d.endNode()),b.endNode=d,b.endPos=d.maxOffset();b.isLocal=b.startNode===b.endNode}b.startPosition=new a(b.startNode,b.startPos);b.endPosition=new a(b.endNode,b.endPos);return b},collapseSelection:function(){this.hasSelection()&&
(this.releaseAnchor(),this.onUpdate(!0))},fixAnchor:function(a){if(!0===a||!this.anchor.getNode())this.anchor.setPosition(this.getNode(),this.getOffset()),this.anchor.setLive(!0)},hideSelection:function(){this._hideSelection=!0;this.onUpdate()},internalCollapseSelection:function(a){if(this.hasSelection()){var b=!this.isReversed();(b&&a===this.LEFT||!b&&a===this.RIGHT)&&this._setPosition(this.anchor)}this.releaseAnchor()},onDoubleClick:function(){this.selectWordUnderCursor()},onTripleClick:function(){this.selectLine(-1,
!0)},releaseAnchor:function(){if(this.anchor.node){this.anchor.setLive(!1);var a=this.anchor.node!==this.position.node||this.anchor.offset!==this.position.offset;this._selectionHasChanged=this._selectionHasChanged||a}this.anchor.node=null;this.anchor.offset=0;null!==this._fileEndSelected&&(this._fileEndSelected&&(this._selectionHasChanged=!0),this._fileEndSelected=!1)},selectAll:function(){var a=this._internalDocument.startNode(),b=this._internalDocument.endNode();if(a&&b){if(null===this._fileEndSelected&&
a===b&&a.isEmpty())return!1;this.hasSelection()&&this.internalCollapseSelection(!1);this.setPosition(a,0);this.fixAnchor();null!==this._fileEndSelected&&(this._fileEndSelected||(this._selectionHasChanged=!0),this._fileEndSelected=!0);this.setPosition(b,b.maxOffset(),!0);return!0}return!1},selectLine:function(a,b){this.suspendChangeEvent();0<a&&this.setLineColumn(a,1);this.movePosition(this.LINE_START_POS1);b?(this._offsetInLine=0,this.movePosition(this.DOWN,this.KEEP_ANCHOR)):this.movePosition(this.LINE_END,
this.KEEP_ANCHOR);this.activateChangeEvent()},selectWordUnderCursor:function(){this.suspendChangeEvent();var a=this.getOffset(),c=this.getNode().getText();null!==this._fileEndSelected&&0===a&&b.isAtEndOfFile(this.position)?(this._fileEndSelected||(this._selectionHasChanged=!0),this._fileEndSelected=!0):(0!==c.trim().length||!this.getNode().isTextNode())&&this._selectWordUnderCursor();this.activateChangeEvent()},setSelection:function(a){var b=a.getStartPosition(),c=a.getEndPosition();if(a.isReversed())var d=
b,b=c,c=d;this.setPosition(b.getNode(),b.getOffset(),!1);this.fixAnchor(!0);this._setFileEndSelected(a.fileEndSelected());this.setPosition(c.getNode(),c.getOffset(),!1)},setSelectionFromCoordinates:function(a){var b=this._view.getLineColumnFromCoordinate(a.startCoords);a=this._view.getLineColumnFromCoordinate(a.endCoords);this.setSelectionLineColumn(b.line,b.column,a.line,a.column)},setSelectionInfo:function(a){this._setSelection({startNode:a.startNode,startOffset:{posInNode:a.startPos},endNode:a.endNode,
endOffset:{posInNode:a.endPos},fileEndSelected:a.fileEndSelected})},setSelectionLineColumn:function(a,c,d,k){b.checkLineColumnExists(this._internalDocument,a,c);b.checkLineColumnExists(this._internalDocument,d,k);this._setSelection({startNode:this._internalDocument.root,startOffset:{line:a-1,column:c-1},endNode:this._internalDocument.root,endOffset:{line:d-1,column:k-1}})},shiftSelectionBounds:function(b,c){var d=this.selectionInfo(),k=!1,e=null,f=d.startNode,g=b;g&&(0<g?e=f.movePositionRight(d.startPosition):
0>g&&(e=f.movePositionLeft(d.startPosition)),e.isValid()&&(d.isReversed?this.position=e:this.anchor=e,k=!0));f=d.endNode;if(g=c)0<g?e=f.movePositionRight(d.endPosition):0>g&&(e=f.movePositionLeft(new a(f,-d.endPos))),e.isValid()&&(d.isReversed?this.anchor=e:this.position=e,k=!0);return k},showSelection:function(){this._hideSelection=!1;this.onUpdate()},_isAtNextWord:function(){var a=this.getOffset(),b=this.getNode().getText(),c=0===a,d=this.getNode().previousSibling(),k=this.getNode().isOpaqueNode(),
e=this.getNode().textContainer(),f=e.getText(),a=0===b.length?0:a,a=this.getNode().offsetInContainer(e)+a,e=f.substring(a-1,a).match(/\s/),f=f.substring(a,a+1).match(/\S/);return c&&(!d||k)||!c&&e&&f},_releaseAnchorIfNoSelection:function(){this.hasAnchor()&&this.position.isEqualTo(this.anchor)&&!this._fileEndSelected&&this.releaseAnchor()},_selectWordUnderCursor:function(){this._isAtNextWord()&&this.movePosition(this.WORD_RIGHT);this.movePosition(this.WORD_LEFT);this.movePosition(this.WORD_RIGHT_EXCL,
this.KEEP_ANCHOR)},_setAnchor:function(a){r.assert(a.getNode&&a.isLive,"Cursor._setAnchor called without Position!");this.anchor.setPosition(a.getNode(),a.getOffset())},_setFileEndSelected:function(a){null!==this._fileEndSelected&&(this._selectionHasChanged=this._selectionHasChanged||this._fileEndSelected!==a,this._fileEndSelected=a)},_setSelection:function(a){this.setPosition(a.startNode,a.startOffset,!1);this.fixAnchor(!0);a.hasOwnProperty("fileEndSelected")&&this._setFileEndSelected(a.fileEndSelected);
this.setPosition(a.endNode,a.endOffset,!1)},_updateGroupedSelectionBasedOnCurrentPosition:function(a,c){var d,k,e=a.start,f=a.end,g=!1;d=b.nodesInOrder(this.getNode(),a.start.getNode());k=0<d||0===d&&this.getOffset()<a.start.getOffset();d=b.nodesInOrder(a.end.getNode(),this.getNode());d=0<d||0===d&&this.getOffset()>a.end.getOffset();k?(c?this.movePosition(this.WORD_LEFT,!0):this.movePosition(this.LINE_START_POS1,!0),g=!0,e=this.position):d&&(c?this.movePosition(this.WORD_RIGHT_EXCL,!0):(this.movePosition(this.LINE_END,
!0),this.movePosition(this.RIGHT,!0)),f=this.position);this._setAnchor(g?f:e);this._setPosition(g?e:f)},_updateFileEndSelection:function(a){if(null!==this._fileEndSelected){var c=!1;b.isAtEndOfFile(this.position)&&(c=this.getNode().getBottom()-this._view.getScrollTop(),c=a>c);this._selectionHasChanged=this._selectionHasChanged||this._fileEndSelected!==c;this._fileEndSelected=c}},autoScroll:function(a,b){this._offsetInLine=this._view.getCoordinateForPosition(this.position).x;0>a.y?this.movePosition(this.UP,
b):0<a.y&&this.movePosition(this.DOWN,b)},movePosition:function(a,c,d){var k=!1,e;if(d&&1<d){for(e=1;e<=d;e+=1)k=this.movePosition(a,c)||k;return k}if(0===d)return k;d=!1;c===this.KEEP_ANCHOR||!0===c?this.fixAnchor():this.hasAnchor()&&(this.internalCollapseSelection(a),k=d=!0);e=null;var f=!1,g=!1;switch(a){case this.START:e=this._internalDocument.startNode().startPosition();break;case this.END:e=this._internalDocument.endNode().endPosition();break;case this.PAGE_UP:e=this._movePage(a,c);g=!0;break;
case this.PAGE_DOWN:e=this._movePage(a,c);g=!0;break;default:f=!0}if((a===this.UP||a===this.DOWN)&&null===this._offsetInLine)this._offsetInLine=this._view.getCoordinateForPosition(this.position).x;if(f)switch(a){case this.LEFT:d||(e=this.hasAnchor()&&b.isAtEndOfFile(this.position)&&this._fileEndSelected?this.position:p.movePositionLeft(this.position));break;case this.RIGHT:d||(e=p.movePositionRight(this.position));break;case this.UP:e=p.movePositionUp(this.position,this._view,this._offsetInLine);
break;case this.DOWN:e=p.movePositionDown(this.position,this._view,this._offsetInLine);break;case this.LINE_START:e=p.movePositionLineStart(this.position,this._view);break;case this.LINE_START_POS1:e=p.movePositionLineStart(this.position,this._view,!0);break;case this.LINE_END:e=p.movePositionLineEnd(this.position,this._view);break;case this.WORD_LEFT:k=this._moveWord(-1,c);break;case this.WORD_RIGHT:k=this._moveWord(1,c);break;case this.WORD_RIGHT_EXCL:k=this._moveWord(1,c,!0)}e?(this._setFileEndSelected(!1),
this._setPosition(e),k=!0):null!==this._fileEndSelected&&this.hasAnchor()&&b.isAtEndOfFile(this.position)?((a===this.RIGHT||a===this.DOWN)&&this._setFileEndSelected(!0),k=!0):a===this.DOWN&&c===this.KEEP_ANCHOR&&(e=p.movePositionLineEnd(this.position,this._view),this._setFileEndSelected(!0),this._setPosition(e),this._offsetInLine=null,k=!0);null===this._selectionAutoScrollTimer&&(this.position.isEqualTo(this.anchor)&&!this._fileEndSelected)&&this.releaseAnchor();if(!0===k)this.onUpdate(g);if(a!==
this._pageYOffset.dir||a!==this.PAGE_UP&&a!==this.PAGE_DOWN)this._pageYOffset.dir=this.NONE,this._pageYOffset.offset=-1,a!==this.UP&&a!==this.DOWN&&(this._offsetInLine=null);return k},setCursorToCoordinates:function(a,b){var c=this._view.getPositionFromCoordinate(a);this._setPosition(c);this.onUpdate(!b)},setCursorToEvent:function(a){a=this._view.fixEvent(a);if(a=this._view.getPositionFromEvent(a))a=a.getLineColumn(),this.setLineColumn(a.line,a.column)},setCursorToRange:function(a,b){var c=a.getStartPosition().getLineColumn();
if(a.getStartPosition().isEqualTo(a.getEndPosition()))this.setLineColumn(c.line,c.column,b);else{var d=a.getEndPosition().getLineColumn();this.setSelectionLineColumn(c.line,c.column,d.line,d.column)}},setLineColumn:function(a,c,d){b.checkLineColumnExists(this._internalDocument,a,c);this.setPosition(this._internalDocument.root,{line:a-1,column:c-1,anchor:{}},d)},setPosition:function(a,b,c){if(1===arguments.length)if(a&&a.isTextNode)b={posInNode:0};else if(a&&"object"===typeof a)a.getNode&&a.getOffset?
(b=a.getOffset(),a=a.getNode()):(b=a,a=this._internalDocument.root);else return!1;"number"===typeof b&&(b={posInNode:b});var d=this._suspendChangeEvent;this._suspendChangeEvent=!0;var k=null;if(b.hasOwnProperty("line")||b.hasOwnProperty("column")){k=null;if(b.anchor){var e=b.anchor;this.releaseAnchor();e.hasOwnProperty("line")&&e.hasOwnProperty("column")?this.setPosition(e.node,{line:e.line,column:e.column})&&this.fixAnchor(!0):e.node&&this.setPosition(e.node,{posInNode:e.posInNode||0})&&this.fixAnchor(!0)}b.hasOwnProperty("line")?
k=this._internalDocument.getLineNode(b.line,a):a&&(k=a.rootContainer());if(!k)return this._suspendChangeEvent=d,!1;e=0;b.hasOwnProperty("column")&&(e=b.column);k=k.getPositionFromOffset(e)}else{if(!a)return this._suspendChangeEvent=d,!1;k=a.getPositionFromOffset(b.posInNode)}k&&this._setPosition(k);null!==this._fileEndSelected&&(b.fileEndSelected&&b.anchor)&&(this._fileEndSelected||(this._selectionHasChanged=!0),this._fileEndSelected=!0);this._suspendChangeEvent=d;this._offsetInLine=null;this.onUpdate(!c);
return!0},shiftPosition:function(a){this.position=a},_moveWord:function(a,c,d){var k=this.getNode(),e=this.getOffset();return a===this.WORD_LEFT&&0===e&&!k.previousSibling()?this.movePosition(this.LEFT,c):a===this.WORD_RIGHT&&e>=k.maxOffset()&&!k.nextSibling()?this.movePosition(this.RIGHT,c):(d=b.getWordBoundary(a,k,e,d))?this.setPosition(d.node,d):this.movePosition(0<a?this.RIGHT:this.LEFT,c)},_movePage:function(a){this.isInVisualBounds(0,100)||this._view.scrollPositionIntoView(this.position);var b=
this._view.getCoordinateForPosition(this.position),c=this._view.getDomTargetPosition(),d=c.scrollHeight,c=(a===this.PAGE_UP?-1:1)*c.clientHeight;null===this._offsetInLine&&(this._offsetInLine=b.x);this._pageYOffset.dir=a;0>this._pageYOffset.offset&&(this._pageYOffset.offset=b.y);this._pageYOffset.offset+=c;this._pageYOffset.offset=Math.min(Math.max(0,this._pageYOffset.offset),d);a=this._view.getPositionFromCoordinate({x:this._offsetInLine,y:this._pageYOffset.offset});b=this._view.getCoordinateForPosition(a).y-
b.y;this._view.offsetScrollTop(b);return a},_setNode:function(a){this.position.getNode()&&this.position.setLive(!1);this.position.node=a;this.position.setLive(!0)},_setPosition:function(a){r.assert(a.getNode&&a.isLive,"Cursor._setPosition called without Position!");if(this.position.getNode()!==a.getNode()||this.position.getOffset()!==a.getOffset()||this.position.isRightAligned()!==a.isRightAligned())this._positionHasChanged=!0;this._setNode(a.getNode());this.position.offset=a.getOffset();this.position.setRightAligned(a.isRightAligned())},
_startAutoScroll:function(a,b){var c=this;this._selectionAutoScrollTimer=setInterval(function(){c.autoScroll(a,b)},20)},_stopAutoScroll:function(){this._selectionAutoScrollTimer&&(clearTimeout(this._selectionAutoScrollTimer),this._selectionAutoScrollTimer=null)},charAtCursor:function(a){if(!this.getNode())return null;var b="";if(this.hasSelection())return this.anchor.getNode()===this.getNode()&&(b=this.selectedText()),1===b.length?b:"";b=this.getNode().getTextForPositioning();a=-1===a?-1:0;var c=
this.getOffset();if(-1===a&&0<c||c<b.length)return b.substring(c+a,c+a+1);if(b=-1===a?this.getNode().previousSibling():this.getNode().nextSibling())if(b=b.getTextForPositioning())return-1===a?b.substring(b.length-1):b.substring(0,1);return null},expandCursorPos:function(a){var b=a.line,c=a.column;a.anchor&&("number"===typeof a.anchor.line&&(b=a.anchor.line),"number"===typeof a.anchor.column&&(c=a.anchor.column));a.isReversed=!1;b&&b>a.line&&(isReversed=!0);!a.isReversed&&b===a.line&&(a.isReversed=
c>a.column);a.isNull=b===a.line&&c===a.column;a.isReversed?(a.startLine=a.line,a.startColumn=a.column,a.endLine=b,a.endColumn=c):(a.startLine=b,a.startColumn=c,a.endLine=a.line,a.endColumn=a.column);return a},getCursorAsLiveRange:function(){var b,c;this.hasSelection()?(b=new a(this.anchor.getNode(),this.anchor.getOffset(),!0),c=new a(this.position.getNode(),this.position.getOffset(),!0)):c=b=new a(this.position.getNode(),this.position.getOffset(),!0);b.setLive();c.setLive();return new l(b,c)},getCursorCoordinates:function(){return this._view.getCoordinateForPosition(this.position)},
getCoordinatesOfSelection:function(){var a=this.getSelectionLineColumn(),b=a.start,a=a.end,b=this._view.getCoordinateForLineColumn(b.line,b.column),a=this._view.getCoordinateForLineColumn(a.line,a.column);return{startCoords:b,endCoords:a}},getLineColumn:function(){var a=this.getPosition();return{line:a.line+1,column:a.column+1}},getNode:function(){return this.position.getNode()},getOffset:function(){return this.position.getOffset()},getCursorPosition:function(){return this.position},getPosition:function(){var a=
this.getNode();if(!a)return null;var b=a.rootContainer();r.assert(b,"Cursor.getPosition() called on node without container!");var c={};c.line=this._internalDocument.getLineNumber(b);c.posInNode=this.getOffset();c.column=a.offsetInContainer()+c.posInNode;a={};if(this.hasSelection()&&(b=this.anchor.getNode().rootContainer()))a.posInNode=this.anchor.getOffset(),a.line=this._internalDocument.getLineNumber(b),a.column=this.anchor.getNode().offsetInContainer()+a.posInNode;c.anchor=a;null!==this._fileEndSelected&&
(c.fileEndSelected=this._fileEndSelected);return c},getSelection:function(){if(!this.hasSelection())return null;var b,c;this.anchor.getNode()?(b=this.anchor.getNode(),c=this.anchor.getOffset()):(b=this.getNode(),c=this.getOffset());var d=this.getNode(),k=this.getOffset(),e=this.isReversed(),f=!!this._fileEndSelected;b=new a(b,c);d=new a(d,k);e&&(k=b,b=d,d=k);e=new q(b,d,e,f);return n.trimSelection(e)},getSelectionLineColumn:function(){b.assert(this.hasSelection(),this._MISSING_SELECTION_ERROR);var a=
this.getPosition().anchor,c=this.getPosition();return{start:{line:a.line+1,column:a.column+1},end:{line:c.line+1,column:c.column+1}}},getSelectionStartContainer:function(){return this.getSelectionStartNode().rootContainer()},getSelectionStartNode:function(){return this.hasSelection()&&!this.isReversed()?this.anchor.getNode():this.getNode()},getSelectionEndContainer:function(){return this.getSelectionEndNode().rootContainer()},getSelectionEndNode:function(){return this.hasSelection()&&this.isReversed()?
this.anchor.getNode():this.getNode()},hasAnchor:function(){return this.anchor.isValid()},hasSelection:function(){return this._fileEndSelected?!0:this.anchor.isValid()?this.anchor.getNode()!==this.getNode()||this.anchor.getOffset()!==this.getOffset():!1},isHidden:function(){return this._hidden},isSelectionHidden:function(){return this._hideSelection},isCursorReadOnly:function(){if(this.hasSelection()){var a=n.trimTrailingLineBreak(this.getSelection());return m.isRangeReadOnly(a)}return(a=this.position.getNode())&&
a.isReadOnly()},isEventInSelection:function(a){return this._isEventInSelectionRange(a)},isInRange:function(a,b){if(!this.hasSelection())return!0;var c=this.getPosition().anchor.line,d=this.getPosition().anchor.column,d=d>=a.column&&d<=b.column;return c>=a.line&&c<=b.line&&d?!0:!1},isInNodeRange:function(a,b){var c=this._internalDocument.getLineNumber(a),d=this._internalDocument.getLineNumber(b),k=b.maxOffset();return this.isInRange({line:c,column:0},{line:d,column:k})},isInVisualBounds:function(a,
c){b.assert(a<c,"top must be less than bottom");var d=this.getLineColumn().line;if(!this._view.isLineInView(d))return!1;d=this._view.getLinePercentScrolled(d);return d>=a&&d<=c},isPositionInSelectionRange:function(a){var b=this.getSelection(),b=b||new l(this.position,this.position);return k.isPositionInRange(a,b)},isFileEndSelected:function(){return this._fileEndSelected},isReversed:function(){return!this.hasSelection()?!1:this.getNode()===this.anchor.getNode()?this.getOffset()<this.anchor.getOffset():
0>b.nodesInOrder(this.anchor.getNode(),this.getNode())},selectedText:function(){if(!this.hasSelection())return"";var a=this.anchor.getNode(),b=this.anchor.getOffset(),c=this.getNode(),d=this.getOffset();this.isReversed()&&(c=a,d=b,a=this.getNode(),b=this.getOffset());return this._internalDocument.getTextInRange(a,b,c,d)},selectionInfo:function(c){r.assert(void 0===c,"The autoAdjustSelection parameter has been removed from Cursor.selectionInfo().");if(this.hasSelection())return c=this.getSelection(),
{startNode:c.getStartPosition().getNode(),startPos:c.getStartPosition().getOffset(),endNode:c.getEndPosition().getNode(),endPos:c.getEndPosition().getOffset(),isReversed:c.isReversed(),isLocal:m.rangeIsInsideOneNode(c),isInTextContainer:m.rangeIsInsideOneTextContainer(c),isInRootContainer:m.rangeIsInsideOneRootContainer(c),fileEndSelected:c.fileEndSelected(),isNull:!1,startPosition:c.getStartPosition(),endPosition:c.getEndPosition()};c={};var d;c.endNode=this.getNode();c.endPos=this.getOffset();if(0===
c.endPos&&(d=c.endNode.previousSibling())&&!b.isTextLevelContainer(d))c.endNode=d,c.endPos=d.maxOffset();c.startNode=c.endNode;c.startPos=c.endPos;c.isNull=!0;c.isLocal=!0;c.isInTextContainer=!0;c.isInRootContainer=!0;c.isReversed=!1;null!==this._fileEndSelected&&(c.fileEndSelected=this._fileEndSelected);c.fileEndSelected&&(c.isLocal=!1);c.startPosition=new a(c.startNode,c.startPos);c.endPosition=new a(c.endNode,c.endPos);return c},selectionInfo2cursorPos:function(a){var b={},c=!a.isNull&&!a.isReversed?
a.endNode:a.startNode,d=!a.isNull&&!a.isReversed?a.endPos:a.startPos;b.line=this._internalDocument.getLineNumber(c.rootContainer());b.column=c.offsetInContainer()+d;b.posInNode=d;b.anchor={};a.isNull||(c=a.isReversed?a.endNode:a.startNode,d=a.isReversed?a.endPos:a.startPos,b.anchor.line=a.isLocal?b.line:this._internalDocument.getLineNumber(c.rootContainer()),b.anchor.column=c.offsetInContainer()+d,b.anchor.posInNode=d);null!==this._fileEndSelected&&(b.fileEndSelected=a.fileEndSelected);return b},
cursorPos2selectionInfo:function(c){var d={isLocal:!1,isNull:!1,isReversed:!1};null!==this._fileEndSelected&&(d.fileEndSelected=c.fileEndSelected);var k=this._internalDocument.getLineNode(c.line),k=k.getPositionFromOffset(c.column);d.endNode=k.getNode();d.endPos=k.getOffset();c.anchor&&c.anchor.hasOwnProperty("line")&&c.anchor.hasOwnProperty("column")?(k=this._internalDocument.getLineNode(c.anchor.line),k=k.getPositionFromOffset(c.anchor.column),d.startNode=k.getNode(),d.startPos=k.getOffset()):(d.startNode=
k.getNode(),d.startPos=c.column,d.isLocal=!0,d.isNull=!0);c=b.nodesInOrder(d.startNode,d.endNode);0>c?(c=d.startNode,d.startNode=d.endNode,d.endNode=c,k=d.startPos,d.startPos=d.endPos,d.endPos=k,d.isReversed=!0):0===c&&(d.isLocal=!0,d.startPos===d.endPos&&(d.isNull=!0),d.startPos>d.endPos&&(k=d.startPos,d.startPos=d.endPos,d.endPos=k,d.isReversed=!0));d.startPosition=new a(d.startNode,d.startPos);d.endPosition=new a(d.endNode,d.endPos);return d},_isEventInSelectionRange:function(a){if(!this.hasSelection())return!1;
a=this._view.fixEvent(a);if(this._view.isFixedEventOutside(a))return!1;a=this._view.getPositionFromEvent(a);return!a?!1:this.isPositionInSelectionRange(a)},_snapshotSelection:function(){return{start:new a(this.anchor.getNode(),this.anchor.getOffset()),end:new a(this.getNode(),this.getOffset())}},externalMouseDown:function(){this._clearCurrentAction()},resetAction:function(){this._clearCurrentAction()},startDragAction:function(){var a=this,b=this._startNewAction();f.mixin(b,{onUp:function(c){if(!b.isFulfilled()&&
(a.hasAnchor()||a._fileEndSelected)&&c&&a.isPositionInSelectionRange(c))a.releaseAnchor(),a._setPosition(c),a.onUpdate()}});return b},startGroupedSelectionAction:function(a,b,c,d){var k=this,e=this._startNewAction();f.mixin(e,{_preservedSelection:null,onMove:function(a,b,c){e.isFulfilled()||(k._modifyPositionBasedOnMoveEvent(a,b,c),k._updateGroupedSelectionBasedOnCurrentPosition(e._preservedSelection,d),k.onUpdate())}});e.promise.always(f.hitch(this,function(){this._releaseAnchorIfNoSelection();this._stopAutoScroll();
this.onUpdate()}));k._modifyPositionBasedOnDownEvent(a,b,c);if(d)k.onDoubleClick();else k.onTripleClick();e._preservedSelection=k._snapshotSelection();return e},startSecondarySelectionAction:function(a,b,c){var d=this._startNewAction();this._modifyPositionBasedOnSecondaryDownEvent(a,b,c);this.onUpdate();return d},startSelectionAction:function(a,b,c){var d=this,k=this._startNewAction();f.mixin(k,{onMove:function(a,b,c){k.isFulfilled()||(d._modifyPositionBasedOnMoveEvent(a,b,c),d.onUpdate())}});k.promise.always(f.hitch(this,
function(){this._releaseAnchorIfNoSelection();this._stopAutoScroll()}));d._modifyPositionBasedOnDownEvent(a,b,c);d.onUpdate();return k},_clearCurrentAction:function(){this._currentAction&&!this._currentAction.isFulfilled()&&this._currentAction.cancel()},_modifyPositionBasedOnDownEvent:function(a,b,c){var d=(this.hasAnchor()||this._fileEndSelected)&&!b;a?(!this.hasAnchor()&&b&&this.fixAnchor(),this._setPosition(a),d&&this.releaseAnchor(),this.hasAnchor()||this.fixAnchor(),this._offsetInLine=null,this._pageYOffset.dir=
this.NONE,this._pageYOffset.offset=-1,b&&this._updateFileEndSelection(c)):d&&this.releaseAnchor()},_modifyPositionBasedOnMoveEvent:function(a,b,c){a&&(this._stopAutoScroll(),this.hasAnchor()&&(b&&this._startAutoScroll(b,!0),this._setPosition(a),this._updateFileEndSelection(c)))},_modifyPositionBasedOnSecondaryDownEvent:function(a,b,c){if(a){var d=(this.hasAnchor()||this._fileEndSelected)&&!b;!this.hasAnchor()&&b&&this.fixAnchor();this.isPositionInSelectionRange(a)||(this._setPosition(a),d&&this.releaseAnchor());
b&&this._updateFileEndSelection(c);this.onUpdate()}},_setCurrentAction:function(a){this._clearCurrentAction();this._currentAction=a;this._currentAction.promise.always(f.hitch(this,function(){this._currentAction=null}))},_startNewAction:function(){var a=new g;this._setCurrentAction(a);return a}})})},"MW/rtc/model/DocumentUtilities":function(){define(["dojo/_base/lang","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/Position","MW/rtc/model/Range","./UnicodeCategories"],function(h,f,g,
e,d){var c;return c={_LINE_COLUMN_GREATER_THAN_ZERO:"Line and column must be greater than zero",_LINE_MUST_EXIST_IN_DOCUMENT:"Line must be a valid line in the document",_COLUMN_MUST_EXIST_ON_LINE:"Column must be valid for the specified line",_SELECTION_START_LESS_THAN_END:"Text replacement start position must not be greater than end position",_WORD_SEARCH_PATTERN:/\W/,reverseString:function(b){return b.split("").reverse().join("")},isSingleCharOrSpaces:function(b){return 1>=b.trim().length},assert:function(b,
a){if(!b)throw Error(a);},checkLineExists:function(b,a){this.assert(0<a,this._LINE_COLUMN_GREATER_THAN_ZERO+", lineNumber \x3d "+a);this.assert(a<=b.getMaxLineNumber(),this._LINE_MUST_EXIST_IN_DOCUMENT)},checkLineColumnExists:function(b,a,c){this.checkLineExists(b,a);this.assert(0<c,this._LINE_COLUMN_GREATER_THAN_ZERO+", lineNumber \x3d "+a+", column \x3d "+c);b=b.getLineNode(a-1);this.assert(b,this._LINE_MUST_EXIST_IN_DOCUMENT);this.assert(b.getText,this._LINE_MUST_EXIST_IN_DOCUMENT);b=b.getTextForPositioning().length+
1;this.assert(c<=b,this._COLUMN_MUST_EXIST_ON_LINE)},checkLineColumnIsValid:function(b,a,c){if(a>b.getMaxLineNumber())return!1;b=b.getLineNode(a);if(!b)return!1;b=b.getTextForPositioning().length;return c>b?!1:!0},checkOneDirectionalSelection:function(b,a,c,d){this.assert(b<=c,this._SELECTION_START_LESS_THAN_END);b===c&&this.assert(a<=d,this._SELECTION_START_LESS_THAN_END)},isAtStartOfContainer:function(b,a){var c=b.getNode(),d=a||c.textContainer();return 0===b.getOffset()&&c===d.startNode()},isAtStartOfReadOnlyContainer:function(b){return b.getNode().isReadOnly()&&
c.isAtStartOfContainer(b)},isAtEndOfContainer:function(b,a){var c=b.getNode(),d=b.getOffset(),e=a||c.textContainer();return d===c.maxOffset()&&c===e.endNode()},isAtEndOfReadOnlyContainer:function(b){return b.getNode().isReadOnly()&&c.isAtEndOfContainer(b)},isInLastLine:function(b){return!b.getNode().rootContainer().nextSibling()},isAtEndOfFile:function(b){return c.isInLastLine(b)&&c.isAtEndOfContainer(b)},isTextLevelContainer:function(b){return b.isTextNode()&&b.containsTextNodes()},isInTextLevelContainer:function(b){return b.parent&&
c.isTextLevelContainer(b.parent)},isEdgeOfTextLevelContainer:function(b,a){if(c.isInTextLevelContainer(b)){var d=b.parent;if(0===a&&b===d.firstChild()||a===b.maxOffset()&&b===d.lastChild())return!0}return c.isTextLevelContainer(b)?0===a||a===b.maxOffset():!1},isInWord:function(b){var a=b.getNode(),c=b.getOffset();b="";0===c?((b=a.previousSibling())?(b=b.getTextForPositioning(),b=b.substring(b.length-1)):b=" ",b+=a.getTextForPositioning().substring(0,1)):c===b.length?(b=a.getTextForPositioning(),b=
b.substring(b.length-1),b=(a=a.nextSibling())?b+a.getTextForPositioning().substring(0,1):b+" "):b=a.getTextForPositioning().substring(c-1,c+1);return b.match(/\w\w/)?!0:b.match(/\w\W/)?-1:b.match(/\W\w/)?0:!1},getWordBoundary:function(b,a,k,e){if(a.isOpaqueNode()){if(0===k&&0<b)return{node:a,posInNode:1};if(0<k&&0>b)return{node:a,posInNode:0};a=0<b?a.nextSibling():a.previousSibling();if(!a)return null;k=0<b?0:a.maxOffset()}var f,g;0<a.offsetInContainer()?(f=a.rootContainer(),g=a.offsetInContainer()+
k):(f=a.textContainer(),g=k);var n=f.getTextForPositioning(),n=0>b?c.reverseString(n.substring(0,g)):n.substring(g),h=d.unicodeWordCharacters(),r=RegExp("["+(h+"_")+"]+|\\s+|[!\\(\\)\\[\\]\\{\\}\\-\\+\\*,\x3d\\.\\?\\/\\:;%'\"\x26\x3c\x3e\\|\\^]+|"),s=/\s*/,t;t=0<b?r.exec(n):s.exec(n);h=0;t&&0<t.index+t[0].length&&(h=t.index+t[0].length,n=n.substring(h));t=null;0<b?e||(t=s.exec(n)):t=r.exec(n);t&&0<t.index+t[0].length&&(h+=t.index+t[0].length);if(1>h)return null;if(1===h)return{node:f,column:g+b};
e=g+b*h;if(0>b&&h<=k||0<b&&k+h<=a.maxOffset())return{node:a,posInNode:k+b*h};for(g=0<b?h-a.maxOffset()-k:h-k;0<g&&a;){a=0<b?a.nextSibling():a.previousSibling();if(!a)break;if(a.isOpaqueNode())return{node:a,posInNode:0<b?0:1};g=0<b?h-a.maxOffset()-k:h-k;if(0>=g)break}return{node:f,column:e}},getCommonParent:function(b,a){if(b===a)return b;var c=b.depth(),d=a.depth();if(c>d)for(;c>d;)b=b.parent,c-=1;else for(;d>c;)a=a.parent,d-=1;for(;b.parent;)if(b.parent!==a.parent)b=b.parent,a=a.parent;else break;
return b.parent},nodesInOrder:function(b,a){if(b===a)return 0;var c=b.depth(),d=a.depth();if(c>d){for(;c>d;)b=b.parent,c-=1;if(b===a)return-1}else if(d>c){for(;d>c;)a=a.parent,d-=1;if(b===a)return 1}for(;b.parent&&a.parent&&b.parent!==a.parent;)b=b.parent,a=a.parent;return f.indexOf(b.parent.children,b)<f.indexOf(b.parent.children,a)?1:-1},getWritableChunksInRange:function(b,a){for(var c=b.getLineNumber(a[0]),d=c,e=c,f=[],c=0;c<a.length;c++){var e=a[c],g=a[c+1];e.isReadOnly()&&(g&&!g.isReadOnly())&&
(d=b.getLineNumber(g));if(!e.isReadOnly()&&(!g||g.isReadOnly()))e=b.getLineNumber(e),f.push({startLine:d,endLine:e})}return f},getWhitespaceStringOfLength:function(b){for(var a="",c=0;c<b;c++)a+=" ";return a},textLineArray:function(b){return b.split(c.NewLineRegex)},textToContent:function(b,a){var d,e=[],f=c.textLineArray(b),g,n,p;a?(n=a.textContainer().serialize(),a.textContainer().isRootContainer()||(p=a.rootContainer().serialize()),g=a.isTextNode()?a.serialize():a.textContainer().defaultTextNode()):
(g=c.DEFAULT_TEXT_NODE,n=c.DEFAULT_CONTAINER_NODE);for(d=0;d<f.length;d+=1){var r=h.clone(g);r.text=f[d];if(1===f.length)return[r];var s=h.clone(n);s.children=[r];e.push(s)}return p?(d=h.clone(p),d.children=e,[d]):e},DEFAULT_TEXT_NODE:{className:"PlainTextNode",text:""},DEFAULT_CONTAINER_NODE:{className:"LineNode",children:[]},DEFAULT_TAB_STRING:"    ",getWordAtPosition:function(b,a){return this.getStringAtPosition(b,a,this._WORD_SEARCH_PATTERN)},getStringAtPosition:function(b,a,c){if(!a.isValid())return null;
b=this._getLineColumnAtPosition(b,a.getNode(),a.getOffset());a=a.getNode().rootContainer().getTextForPositioning();return this._getStringStartEndPositions(a,b,c)},_getLineColumnAtPosition:function(b,a,c){var d=a.rootContainer();b=b.getLineNumber(d);a=a.offsetInContainer(d)+c;return{line:b,column:a}},_getStringStartEndPositions:function(b,a,c){this.assert(a&&0<=a.column&&a.column<=b.length);var d=a.column,e=this.reverseString(b.substring(0,d)),f=b.substring(d),g=e.search(c);-1===g&&(g=e.length);e=
d-g;c=f.search(c);-1===c&&(c=f.length);d+=c;b=b.substring(e,d);return 0===b.length?null:{text:b,startLineCol:{line:a.line,column:e},endLineCol:{line:a.line,column:d}}},checkOverlapsWithRange:function(b,a,c){var d,e,f,g;return c.some(function(c){d=b.line===c.startLine;e=b.column===c.startColumn;f=a.line===c.endLine;g=a.column===c.endColumn;return d&&f&&(e||g)})},getTextRangeFromLeftToPosition:function(b){var a=b.getNode();if(!a.isTextNode())return null;for(var c=a,d=b.getOffset(),d=a.getText().slice(0,
d),e=a.textContainer(),a=a.prevNode();a&&a.isTextNode()&&a.textContainer()===e;)c=a,d=a.getText()+d,a=a.prevNode();return{startPos:new g(c,0),endPos:b,text:d}},getRangeOfTargetOnLine:function(b,a,c){c=RegExp(c);b=b.getLineNode(a-1).getTextForPositioning();return(c=c.exec(b))?{start:c.index+1,end:c.index+c[0].length+1}:null},isInDocument:function(b){return!b||!b.rootContainer()||!b.rootContainer().parent?!1:!0},createFullFileRange:function(b,a){var c=b.createLinePositionInLine(0,!1),d=a.getMaxLineNumber()-
1,d=b.createLinePositionInLine(d,!1);return new e(c,d)},NewLineRegex:/\r\n|\r|\n/}})},"MW/rtc/browsersupport/BrowserSupportUtilities":function(){define(["dojo/_base/array","dojo/has","MW/rtc/browsersupport/PseudoMap","MW/rtc/browsersupport/PseudoSet"],function(h,f,g,e){var d;d={createMap:function(){return this.isES6MapSupported()?new Map:new g},isES6MapSupported:function(){return void 0!==window.Map},createSet:function(){return this._isES6SetSupported()?new Set:new e},_isES6SetSupported:function(){return void 0!==
window.Set},indexOf:function(c,b){return h.indexOf(c,b)}};52<=f("chrome")&&(d.indexOf=function(c,b){return c.indexOf(b)});return d})},"MW/rtc/browsersupport/PseudoMap":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){this._elements=[];this.size=0},set:function(f,g){var e=this._getElement(f);e?e.value=g:(this._elements.push({key:f,value:g}),this.size+=1);return this},get:function(f){if(f=this._getElement(f))return f.value},has:function(f){return!!this._getElement(f)},
clear:function(){this._elements=[];this.size=0},"delete":function(f){f=this._findElement(f);return 0<=f?(this._elements.splice(f,1),this.size-=1,!0):!1},forEach:function(f){for(var g,e=0;e<this._elements.length;e++)g=this._elements[e],f(g.value,g.key)},_getElement:function(f){f=this._findElement(f);return 0<=f?this._elements[f]:null},_findElement:function(f){for(var g=0;g<this._elements.length;g++)if(this._elements[g].key===f)return g;return-1}})})},"MW/rtc/browsersupport/PseudoSet":function(){define(["dojo/_base/declare",
"./PseudoMap"],function(h,f){return h(null,{constructor:function(){this._map=new f;this.size=0},add:function(f){this._map.set(f,f);this.size=this._map.size;return this},has:function(f){return this._map.has(f)},clear:function(){this.size=0;return this._map.clear()},"delete":function(f){f=this._map.delete(f);this.size=this._map.size;return f},forEach:function(f){this._map.forEach(f)}})})},"MW/rtc/model/Position":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/PositionUtilities MW/rtc/model/events/nodechange/NodeChangeEventTypes mw-log/Log".split(" "),
function(h,f,g,e,d,c){return h(null,{constructor:function(b,a,c){this.node=b||null;this.offset=a||0;this.setRightAligned(c)},destroy:function(){this.isValid()&&this.isLive()&&e.detachPosition(this.node,this);this.node=null},_ignoreOffset:!1,setIgnoreOffset:function(){this._ignoreOffset=!0},isLinePosition:function(){return this._ignoreOffset},onChange:function(b){},getNode:function(){return this.node},getOffset:function(){return this.offset},setPosition:function(b,a){var c=this.isLive();c&&e.detachPosition(this.node,
this);this.node=b;this.offset=a;c&&e.attachPosition(this.node,this)},isAtEdge:function(){return this.isAtLeftEdge()||this.isAtRightEdge()},isAtLeftEdge:function(){return 0===this.offset},isAtRightEdge:function(){return this.offset===this.node.maxOffset()},setRightAligned:function(b){this.align=b?1:0},isRightAligned:function(){return 1===this.align},isValid:function(){return this.node&&this.node.rootContainer()&&0<=this.offset&&this.offset<=this.node.maxOffset()},isEqualTo:function(b){return b&&this.offset===
b.offset&&this.node===b.node},setLive:function(b){this.node&&(!1!==b?this.isLive()||e.attachPosition(this.node,this):e.detachPosition(this.node,this))},isLive:function(){return e.isPositionAttached(this)},print:function(b){var a=this.node.getText(),a=a.substring(0,this.offset)+"|"+a.substring(this.offset);b&&(this.offset<b-1?a=a.substring(0,b)+"...":(b=Math.floor(b/2),a="..."+a.substring(this.offset-b,this.offset+b)+(this.offset+b<a.length?"":"...")));return a},getLineColumn:function(){return{line:this.getLine(),
column:this.getColumn()}},getLine:function(){if(!this.isValid())return-1;var b=this.getNode().rootContainer(),b=this._getLine(b);return 0<=b?b+1:-1},_getLine:function(b){return g.indexOf(b.parent.children,b)},getColumn:function(){if(!this.isValid())return-1;var b=this.getNode(),a=1;b.offsetInContainer&&(a+=b.offsetInContainer()+this.getOffset());return a},handleNodeChange:function(b){if(this.node&&b.node===this.node){var a;switch(b.type){case d.INSERT_TEXT:a=this._handleInsertTextNodeEvent(b);break;
case d.DELETE_TEXT:a=this._handleDeleteTextNodeEvent(b);break;case d.SPLIT_NODE:a=this._handleSplitNodeEvent(b);break;case d.MERGE_NODE:a=this._handleMergeNodeEvent(b);break;case d.DELETE_NODE:a=this._handleDeleteNodeEvent(b);break;case d.UPDATE_ATTRIBUTES:a=this._handleUpdateAttributesEvent(b)}c.assert(this.isValid(),"Position invalid after handleNodeChange("+b.type+")!");a&&this._notifyChange(b.type,a.nodeHasChanged,a.offsetHasChanged);return this.node}},_handleInsertTextNodeEvent:function(b){var a=
!1;b.offset-this.align<this.offset&&(this.offset+=b.length,a=!0);return{nodeHasChanged:!1,offsetHasChanged:a}},_handleDeleteTextNodeEvent:function(b){var a=!1;b.offset<this.offset&&(this.offset=b.offset+b.length>this.offset?b.offset:this.offset-b.length,a=!0);return{nodeHasChanged:!1,offsetHasChanged:a}},_handleSplitNodeEvent:function(b){var a=!1,c=!1;this._ignoreOffset?a=b.nodeChanged&&!(b.lineStartOrEnd<this.align):b.offset-this.align<this.offset?(this.offset-=b.offset,c=!0,a=!b.nodeChanged):a=
b.nodeChanged;a&&(this.node=b.newNode);return{nodeHasChanged:a,offsetHasChanged:c}},_handleMergeNodeEvent:function(b){var a=!1;!this._ignoreOffset&&b.hasOwnProperty("offset")&&(this.offset+=b.offset,a=0<b.offset);c.assert(b.newNode,"New node missing in Position.handleNodeChange(MERGE_NODE).");this.node=b.newNode&&this._ignoreOffset?b.newNode.rootContainer():b.newNode;return{nodeHasChanged:!0,offsetHasChanged:a}},_handleDeleteNodeEvent:function(b){c.assert(b.newNode,"New node missing in Position.handleNodeChange(DELETE_NODE).");
if(this.align&&b.newEndNode)this.node=b.newEndNode,this.offset=b.newEndOffset;else{var a=b.newNode;this.node=a&&a.children&&0<a.children.length?a.children[0]:a;this.offset=b.newOffset}this._ignoreOffset&&(this.node=this.node.rootContainer(),this.offset=0);return{nodeHasChanged:!0,offsetHasChanged:!1}},_handleUpdateAttributesEvent:function(b){b=b.node.maxOffset();var a=!1;this.offset>b&&(a=!0,this.offset=b);return{nodeHasChanged:!1,offsetHasChanged:a}},handleSiblingNodeChange:function(b,a){var c=!1,
d=!1;if(this._ignoreOffset)throw Error("MW.rtc.model.Position.handleSiblingNodeChange does not support Line Positions");if(!a&&this.isAtLeftEdge()&&!this.isRightAligned()){var e=b.newNode.startNode();e&&(this.node=e,c=!0)}else if(a&&(this.isAtRightEdge()&&this.isRightAligned())&&(e=b.newNode.endNode()))this.node=e,this.offset=this.node.maxOffset(),c=d=!0;this._notifyChange(b.type,c,d);return this.node},_notifyChange:function(b,a,c){if(c||a)b=f.hitch(this,"onChange",{type:b,nodeHasChanged:a,offsetHasChanged:c}),
e.queueEvent(b)}})})},"MW/rtc/model/PositionUtilities":function(){define(["MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/events/nodechange/NodeChangeEventTypes"],function(h,f){var g;return g={pendingEvents:[],updatePositions:function(e){var d=e.node;if(d)if(e.type===f.INSERT_NODE)g._updatePositionsForInsertNodeEvent(e);else{var c=g.getPositions(d),b=c.length;if(b)for(b-=1;0<=b;b-=1){var a=c[b],k=a.handleNodeChange(e);k?d!==k&&(g.detachPosition(d,a),g.attachPosition(k,a)):g.detachPosition(d,
a)}}},_updatePositionsForInsertNodeEvent:function(e){var d=e.newNode.previousSibling(),c=e.newNode.nextSibling(),b=e.newNode.isRootContainer(),a=b&&e.referenceSibling!==d,b=b&&e.referenceSibling!==c;d&&!a&&g._updateAdjacentPositions(d.endNode(),e,!0);c&&!b&&g._updateAdjacentPositions(c.startNode(),e,!1)},_updateAdjacentPositions:function(e,d,c){var b=g.getPositions(e);if(b.length)for(var a=b.length-1;0<=a;a-=1){var k=b[a],f=k.handleSiblingNodeChange(d,c);e!==f&&(g.detachPosition(e,k),g.attachPosition(f,
k))}},queueEvent:function(e){g.pendingEvents.push(e)},firePendingEvents:function(){for(;0<g.pendingEvents.length;){var e=g.pendingEvents;g.pendingEvents=[];for(var d=0;d<e.length;d++)e[d]()}},attachPosition:function(e,d){e.positionsSet||(e.positionsSet=h.createSet());e.positionsSet.add(d)},detachPosition:function(e,d){e.positionsSet.delete(d)},isPositionAttached:function(e){var d=e.getNode();return d&&d.positionsSet&&d.positionsSet.has(e)},getPositions:function(e){var d=[];(e=e&&e.positionsSet)&&
e.forEach(function(c){d.push(c)});return d},isPositionInRange:function(e,d){var c=e.getLineColumn(),b=c.line,c=c.column,a=d.getStartPosition().getLineColumn(),k=a.line,a=a.column,f=d.getEndPosition().getLineColumn(),g=f.line,f=f.column;return(b>k||b===k&&c>=a)&&(b<g||b===g&&c<=f)},comparePositions:function(e,d){var c=e.getLineColumn(),b=d.getLineColumn();return c.line===b.line?c.column-b.column:c.line-b.line}}})},"MW/rtc/model/events/nodechange/NodeChangeEventTypes":function(){define([],function(){return{DELETE_NODE:"deleteNode",
DELETE_TEXT:"deleteText",INSERT_NODE:"insertNode",INSERT_TEXT:"insertText",MERGE_NODE:"mergeNode",SPLIT_NODE:"splitNode",UPDATE_ATTRIBUTES:"updateAttributes"}})},"MW/rtc/model/Range":function(){define(["dojo/_base/declare"],function(h){return h(null,{_startPosition:null,_endPosition:null,constructor:function(f,g){this._startPosition=f;this._endPosition=g},destroy:function(){this._startPosition.destroy();this._endPosition.destroy()},getStartPosition:function(){return this._startPosition},getEndPosition:function(){return this._endPosition},
isEqualTo:function(f){return!!f&&this.constructor===f.constructor&&this._startPosition.isEqualTo(f._startPosition)&&this._endPosition.isEqualTo(f._endPosition)}})})},"MW/rtc/model/UnicodeCategories":function(){define([],function(){var h;return h={unicodeCategories:{Cn:"\u0378\u0379\u037f-\u0383\u038b\u038d\u03a2\u0528-\u0530\u0557\u0558\u0560\u0588\u058b-\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u05ff\u0604\u0605\u061c\u061d\u070e\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u08ff\u0978\u0980\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af0\u0af2-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0c00\u0c04\u0c0d\u0c11\u0c29\u0c34\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5a-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c81\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d01\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5f\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ede-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6-\u10cf\u10fd-\u10ff\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f5-\u13ff\u169d-\u169f\u16f1-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191d-\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bab-\u1bad\u1bba-\u1bbf\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1ccf\u1cf3-\u1cff\u1de7-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u2065-\u2069\u2072\u2073\u208f\u209d-\u209f\u20ba-\u20cf\u20f1-\u20ff\u218a-\u218f\u23f4-\u23ff\u2427-\u243f\u244b-\u245f\u2700\u27cb\u27cd\u2b4d-\u2b4f\u2b5a-\u2bff\u2c2f\u2c5f\u2cf2-\u2cf8\u2d26-\u2d2f\u2d66-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e32-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fcc-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua674-\ua67b\ua698-\ua69f\ua6f8-\ua6ff\ua78f\ua792-\ua79f\ua7aa-\ua7f9\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fc-\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9e0-\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaa7c-\uaa7f\uaac3-\uaada\uaae0-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f-\uabbf\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\ud7ff\ufa2e\ufa2f\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe27-\ufe2f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd\ufefe\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufff8\ufffe\uffff",
Lu:"A-Z\u00c0-\u00d6\u00d8-\u00de\u0100\u0102\u0104\u0106\u0108\u010a\u010c\u010e\u0110\u0112\u0114\u0116\u0118\u011a\u011c\u011e\u0120\u0122\u0124\u0126\u0128\u012a\u012c\u012e\u0130\u0132\u0134\u0136\u0139\u013b\u013d\u013f\u0141\u0143\u0145\u0147\u014a\u014c\u014e\u0150\u0152\u0154\u0156\u0158\u015a\u015c\u015e\u0160\u0162\u0164\u0166\u0168\u016a\u016c\u016e\u0170\u0172\u0174\u0176\u0178\u0179\u017b\u017d\u0181\u0182\u0184\u0186\u0187\u0189-\u018b\u018e-\u0191\u0193\u0194\u0196-\u0198\u019c\u019d\u019f\u01a0\u01a2\u01a4\u01a6\u01a7\u01a9\u01ac\u01ae\u01af\u01b1-\u01b3\u01b5\u01b7\u01b8\u01bc\u01c4\u01c7\u01ca\u01cd\u01cf\u01d1\u01d3\u01d5\u01d7\u01d9\u01db\u01de\u01e0\u01e2\u01e4\u01e6\u01e8\u01ea\u01ec\u01ee\u01f1\u01f4\u01f6-\u01f8\u01fa\u01fc\u01fe\u0200\u0202\u0204\u0206\u0208\u020a\u020c\u020e\u0210\u0212\u0214\u0216\u0218\u021a\u021c\u021e\u0220\u0222\u0224\u0226\u0228\u022a\u022c\u022e\u0230\u0232\u023a\u023b\u023d\u023e\u0241\u0243-\u0246\u0248\u024a\u024c\u024e\u0370\u0372\u0376\u0386\u0388-\u038a\u038c\u038e\u038f\u0391-\u03a1\u03a3-\u03ab\u03cf\u03d2-\u03d4\u03d8\u03da\u03dc\u03de\u03e0\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03f9\u03fa\u03fd-\u042f\u0460\u0462\u0464\u0466\u0468\u046a\u046c\u046e\u0470\u0472\u0474\u0476\u0478\u047a\u047c\u047e\u0480\u048a\u048c\u048e\u0490\u0492\u0494\u0496\u0498\u049a\u049c\u049e\u04a0\u04a2\u04a4\u04a6\u04a8\u04aa\u04ac\u04ae\u04b0\u04b2\u04b4\u04b6\u04b8\u04ba\u04bc\u04be\u04c0\u04c1\u04c3\u04c5\u04c7\u04c9\u04cb\u04cd\u04d0\u04d2\u04d4\u04d6\u04d8\u04da\u04dc\u04de\u04e0\u04e2\u04e4\u04e6\u04e8\u04ea\u04ec\u04ee\u04f0\u04f2\u04f4\u04f6\u04f8\u04fa\u04fc\u04fe\u0500\u0502\u0504\u0506\u0508\u050a\u050c\u050e\u0510\u0512\u0514\u0516\u0518\u051a\u051c\u051e\u0520\u0522\u0524\u0526\u0531-\u0556\u10a0-\u10c5\u1e00\u1e02\u1e04\u1e06\u1e08\u1e0a\u1e0c\u1e0e\u1e10\u1e12\u1e14\u1e16\u1e18\u1e1a\u1e1c\u1e1e\u1e20\u1e22\u1e24\u1e26\u1e28\u1e2a\u1e2c\u1e2e\u1e30\u1e32\u1e34\u1e36\u1e38\u1e3a\u1e3c\u1e3e\u1e40\u1e42\u1e44\u1e46\u1e48\u1e4a\u1e4c\u1e4e\u1e50\u1e52\u1e54\u1e56\u1e58\u1e5a\u1e5c\u1e5e\u1e60\u1e62\u1e64\u1e66\u1e68\u1e6a\u1e6c\u1e6e\u1e70\u1e72\u1e74\u1e76\u1e78\u1e7a\u1e7c\u1e7e\u1e80\u1e82\u1e84\u1e86\u1e88\u1e8a\u1e8c\u1e8e\u1e90\u1e92\u1e94\u1e9e\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1eec\u1eee\u1ef0\u1ef2\u1ef4\u1ef6\u1ef8\u1efa\u1efc\u1efe\u1f08-\u1f0f\u1f18-\u1f1d\u1f28-\u1f2f\u1f38-\u1f3f\u1f48-\u1f4d\u1f59\u1f5b\u1f5d\u1f5f\u1f68-\u1f6f\u1fb8-\u1fbb\u1fc8-\u1fcb\u1fd8-\u1fdb\u1fe8-\u1fec\u1ff8-\u1ffb\u2102\u2107\u210b-\u210d\u2110-\u2112\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u2130-\u2133\u213e\u213f\u2145\u2183\u2c00-\u2c2e\u2c60\u2c62-\u2c64\u2c67\u2c69\u2c6b\u2c6d-\u2c70\u2c72\u2c75\u2c7e-\u2c80\u2c82\u2c84\u2c86\u2c88\u2c8a\u2c8c\u2c8e\u2c90\u2c92\u2c94\u2c96\u2c98\u2c9a\u2c9c\u2c9e\u2ca0\u2ca2\u2ca4\u2ca6\u2ca8\u2caa\u2cac\u2cae\u2cb0\u2cb2\u2cb4\u2cb6\u2cb8\u2cba\u2cbc\u2cbe\u2cc0\u2cc2\u2cc4\u2cc6\u2cc8\u2cca\u2ccc\u2cce\u2cd0\u2cd2\u2cd4\u2cd6\u2cd8\u2cda\u2cdc\u2cde\u2ce0\u2ce2\u2ceb\u2ced\ua640\ua642\ua644\ua646\ua648\ua64a\ua64c\ua64e\ua650\ua652\ua654\ua656\ua658\ua65a\ua65c\ua65e\ua660\ua662\ua664\ua666\ua668\ua66a\ua66c\ua680\ua682\ua684\ua686\ua688\ua68a\ua68c\ua68e\ua690\ua692\ua694\ua696\ua722\ua724\ua726\ua728\ua72a\ua72c\ua72e\ua732\ua734\ua736\ua738\ua73a\ua73c\ua73e\ua740\ua742\ua744\ua746\ua748\ua74a\ua74c\ua74e\ua750\ua752\ua754\ua756\ua758\ua75a\ua75c\ua75e\ua760\ua762\ua764\ua766\ua768\ua76a\ua76c\ua76e\ua779\ua77b\ua77d\ua77e\ua780\ua782\ua784\ua786\ua78b\ua78d\ua790\ua7a0\ua7a2\ua7a4\ua7a6\ua7a8\uff21-\uff3a",
Ll:"a-z\u00aa\u00b5\u00ba\u00df-\u00f6\u00f8-\u00ff\u0101\u0103\u0105\u0107\u0109\u010b\u010d\u010f\u0111\u0113\u0115\u0117\u0119\u011b\u011d\u011f\u0121\u0123\u0125\u0127\u0129\u012b\u012d\u012f\u0131\u0133\u0135\u0137\u0138\u013a\u013c\u013e\u0140\u0142\u0144\u0146\u0148\u0149\u014b\u014d\u014f\u0151\u0153\u0155\u0157\u0159\u015b\u015d\u015f\u0161\u0163\u0165\u0167\u0169\u016b\u016d\u016f\u0171\u0173\u0175\u0177\u017a\u017c\u017e-\u0180\u0183\u0185\u0188\u018c\u018d\u0192\u0195\u0199-\u019b\u019e\u01a1\u01a3\u01a5\u01a8\u01aa\u01ab\u01ad\u01b0\u01b4\u01b6\u01b9\u01ba\u01bd-\u01bf\u01c6\u01c9\u01cc\u01ce\u01d0\u01d2\u01d4\u01d6\u01d8\u01da\u01dc\u01dd\u01df\u01e1\u01e3\u01e5\u01e7\u01e9\u01eb\u01ed\u01ef\u01f0\u01f3\u01f5\u01f9\u01fb\u01fd\u01ff\u0201\u0203\u0205\u0207\u0209\u020b\u020d\u020f\u0211\u0213\u0215\u0217\u0219\u021b\u021d\u021f\u0221\u0223\u0225\u0227\u0229\u022b\u022d\u022f\u0231\u0233-\u0239\u023c\u023f\u0240\u0242\u0247\u0249\u024b\u024d\u024f-\u0293\u0295-\u02af\u0371\u0373\u0377\u037b-\u037d\u0390\u03ac-\u03ce\u03d0\u03d1\u03d5-\u03d7\u03d9\u03db\u03dd\u03df\u03e1\u03e3\u03e5\u03e7\u03e9\u03eb\u03ed\u03ef-\u03f3\u03f5\u03f8\u03fb\u03fc\u0430-\u045f\u0461\u0463\u0465\u0467\u0469\u046b\u046d\u046f\u0471\u0473\u0475\u0477\u0479\u047b\u047d\u047f\u0481\u048b\u048d\u048f\u0491\u0493\u0495\u0497\u0499\u049b\u049d\u049f\u04a1\u04a3\u04a5\u04a7\u04a9\u04ab\u04ad\u04af\u04b1\u04b3\u04b5\u04b7\u04b9\u04bb\u04bd\u04bf\u04c2\u04c4\u04c6\u04c8\u04ca\u04cc\u04ce\u04cf\u04d1\u04d3\u04d5\u04d7\u04d9\u04db\u04dd\u04df\u04e1\u04e3\u04e5\u04e7\u04e9\u04eb\u04ed\u04ef\u04f1\u04f3\u04f5\u04f7\u04f9\u04fb\u04fd\u04ff\u0501\u0503\u0505\u0507\u0509\u050b\u050d\u050f\u0511\u0513\u0515\u0517\u0519\u051b\u051d\u051f\u0521\u0523\u0525\u0527\u0561-\u0587\u1d00-\u1d2b\u1d62-\u1d77\u1d79-\u1d9a\u1e01\u1e03\u1e05\u1e07\u1e09\u1e0b\u1e0d\u1e0f\u1e11\u1e13\u1e15\u1e17\u1e19\u1e1b\u1e1d\u1e1f\u1e21\u1e23\u1e25\u1e27\u1e29\u1e2b\u1e2d\u1e2f\u1e31\u1e33\u1e35\u1e37\u1e39\u1e3b\u1e3d\u1e3f\u1e41\u1e43\u1e45\u1e47\u1e49\u1e4b\u1e4d\u1e4f\u1e51\u1e53\u1e55\u1e57\u1e59\u1e5b\u1e5d\u1e5f\u1e61\u1e63\u1e65\u1e67\u1e69\u1e6b\u1e6d\u1e6f\u1e71\u1e73\u1e75\u1e77\u1e79\u1e7b\u1e7d\u1e7f\u1e81\u1e83\u1e85\u1e87\u1e89\u1e8b\u1e8d\u1e8f\u1e91\u1e93\u1e95-\u1e9d\u1e9f\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9\u1efb\u1efd\u1eff-\u1f07\u1f10-\u1f15\u1f20-\u1f27\u1f30-\u1f37\u1f40-\u1f45\u1f50-\u1f57\u1f60-\u1f67\u1f70-\u1f7d\u1f80-\u1f87\u1f90-\u1f97\u1fa0-\u1fa7\u1fb0-\u1fb4\u1fb6\u1fb7\u1fbe\u1fc2-\u1fc4\u1fc6\u1fc7\u1fd0-\u1fd3\u1fd6\u1fd7\u1fe0-\u1fe7\u1ff2-\u1ff4\u1ff6\u1ff7\u210a\u210e\u210f\u2113\u212f\u2134\u2139\u213c\u213d\u2146-\u2149\u214e\u2184\u2c30-\u2c5e\u2c61\u2c65\u2c66\u2c68\u2c6a\u2c6c\u2c71\u2c73\u2c74\u2c76-\u2c7c\u2c81\u2c83\u2c85\u2c87\u2c89\u2c8b\u2c8d\u2c8f\u2c91\u2c93\u2c95\u2c97\u2c99\u2c9b\u2c9d\u2c9f\u2ca1\u2ca3\u2ca5\u2ca7\u2ca9\u2cab\u2cad\u2caf\u2cb1\u2cb3\u2cb5\u2cb7\u2cb9\u2cbb\u2cbd\u2cbf\u2cc1\u2cc3\u2cc5\u2cc7\u2cc9\u2ccb\u2ccd\u2ccf\u2cd1\u2cd3\u2cd5\u2cd7\u2cd9\u2cdb\u2cdd\u2cdf\u2ce1\u2ce3\u2ce4\u2cec\u2cee\u2d00-\u2d25\ua641\ua643\ua645\ua647\ua649\ua64b\ua64d\ua64f\ua651\ua653\ua655\ua657\ua659\ua65b\ua65d\ua65f\ua661\ua663\ua665\ua667\ua669\ua66b\ua66d\ua681\ua683\ua685\ua687\ua689\ua68b\ua68d\ua68f\ua691\ua693\ua695\ua697\ua723\ua725\ua727\ua729\ua72b\ua72d\ua72f-\ua731\ua733\ua735\ua737\ua739\ua73b\ua73d\ua73f\ua741\ua743\ua745\ua747\ua749\ua74b\ua74d\ua74f\ua751\ua753\ua755\ua757\ua759\ua75b\ua75d\ua75f\ua761\ua763\ua765\ua767\ua769\ua76b\ua76d\ua76f\ua771-\ua778\ua77a\ua77c\ua77f\ua781\ua783\ua785\ua787\ua78c\ua78e\ua791\ua7a1\ua7a3\ua7a5\ua7a7\ua7a9\ua7fa\ufb00-\ufb06\ufb13-\ufb17\uff41-\uff5a",
Lt:"\u01c5\u01c8\u01cb\u01f2\u1f88-\u1f8f\u1f98-\u1f9f\u1fa8-\u1faf\u1fbc\u1fcc\u1ffc",Lm:"\u02b0-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0374\u037a\u0559\u0640\u06e5\u06e6\u07f4\u07f5\u07fa\u081a\u0824\u0828\u0971\u0e46\u0ec6\u10fc\u17d7\u1843\u1aa7\u1c78-\u1c7d\u1d2c-\u1d61\u1d78\u1d9b-\u1dbf\u2071\u207f\u2090-\u209c\u2c7d\u2d6f\u2e2f\u3005\u3031-\u3035\u303b\u309d\u309e\u30fc-\u30fe\ua015\ua4f8-\ua4fd\ua60c\ua67f\ua717-\ua71f\ua770\ua788\ua9cf\uaa70\uaadd\uff70\uff9e\uff9f",Lo:"\u01bb\u01c0-\u01c3\u0294\u05d0-\u05ea\u05f0-\u05f2\u0620-\u063f\u0641-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u0800-\u0815\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0972-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e45\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0edc\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10d0-\u10fa\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17dc\u1820-\u1842\u1844-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c77\u1ce9-\u1cec\u1cee-\u1cf1\u2135-\u2138\u2d30-\u2d65\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3006\u303c\u3041-\u3096\u309f\u30a1-\u30fa\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcb\ua000-\ua014\ua016-\ua48c\ua4d0-\ua4f7\ua500-\ua60b\ua610-\ua61f\ua62a\ua62b\ua66e\ua6a0-\ua6e5\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa6f\uaa71-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb\uaadc\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff66-\uff6f\uff71-\uff9d\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
Mn:"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26",
Nd:"0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",Nl:"\u16ee-\u16f0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303a\ua6e6-\ua6ef",
No:"\u00b2\u00b3\u00b9\u00bc-\u00be\u09f4-\u09f9\u0b72-\u0b77\u0bf0-\u0bf2\u0c78-\u0c7e\u0d70-\u0d75\u0f2a-\u0f33\u1369-\u137c\u17f0-\u17f9\u19da\u2070\u2074-\u2079\u2080-\u2089\u2150-\u215f\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3192-\u3195\u3220-\u3229\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua830-\ua835",Sk:"^`\u00a8\u00af\u00b4\u00b8\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u309b\u309c\ua700-\ua716\ua720\ua721\ua789\ua78a\ufbb2-\ufbc1\uff3e\uff40\uffe3"},
unicodeWordCharacters:function(){return"Lu Ll Lt Lm Lo Mn Nd Nl No Sk".split(" ").reduce(function(f,g){return f+h.unicodeCategories[g]},"")}}})},"MW/rtc/model/RangeUtilities":function(){define(["mw-log/Log","./NodeUtilities","./Position","./PositionUtilities","./Range"],function(h,f,g,e,d){return{rangeIsInsideOneNode:function(c){return c.getStartPosition().getNode()===c.getEndPosition().getNode()},rangeIsInsideOneTextContainer:function(c){return c.getStartPosition().getNode().textContainer()===c.getEndPosition().getNode().textContainer()},
nodesInRange:function(c){var b=c.getStartPosition().getNode();c=c.getEndPosition().getNode();return f.getNodesInRange(b,c)},isRangeReadOnly:function(c){var b=c.getStartPosition().getNode();c=c.getEndPosition().getNode();var a=!1;f.leafNodesInRangeIterator(b,c,function(b){if(b.isReadOnly())return a=!0});return a},_hasTrailingLineBreak:function(c){var b=c.getStartPosition();c=c.getEndPosition();return 0===e.comparePositions(b,c)?!1:1===c.getLineColumn().column},trimTrailingLineBreak:function(c){var b=
c,a=c.getStartPosition(),e=c.getEndPosition();this._hasTrailingLineBreak(c)&&(c=e.getNode().rootContainer().previousSibling().endNode(),e=new g(c,c.maxOffset()),b=new d(a,e));return b},rangeIsInsideOneRootContainer:function(c){return c.getStartPosition().getNode().rootContainer()===c.getEndPosition().getNode().rootContainer()},trimRange:function(c){if(this.rangeIsInsideOneNode(c)||!this.rangeIsInsideOneTextContainer(c))return c;c=this._trimStartPosition(c);return this._trimEndPosition(c)},_trimStartPosition:function(c){var b=
c.getStartPosition(),a=b.getOffset();if(0===a||a!==b.getNode().maxOffset())return c;b=b.getNode();b=b.parent.containsTextNodes()?b.nextNode():b.nextSibling();if(!b)return c;b=b.containsTextNodes()?b.startNode():b;return b===c.getEndPosition().getNode()&&0===c.getEndPosition().getOffset()?c:new d(new g(b,0),c.getEndPosition())},_trimEndPosition:function(c){var b=c.getEndPosition();if(0!==b.getOffset())return c;b=b.getNode();b=b.parent.containsTextNodes()?b.prevNode():b.previousSibling();if(!b)return c;
b=b.containsTextNodes()?b.endNode():b;return new d(c.getStartPosition(),new g(b,b.maxOffset()))},expandRangeToFullLines:function(c){var b=c.getStartPosition().getNode();c=c.getEndPosition().getNode();return new d(b.rootContainer().startPosition(),c.rootContainer().endPosition())},isNodeTypeInRange:function(c,b){var a=this._getStartEndNodes(c),d=!1;f.leafNodesInRangeIterator(a.startNode,a.endNode,function(a){if(a instanceof b)return d=!0}.bind(this));return d},getNodesInRangeOfNodeType:function(c,
b){var a=this._getStartEndNodes(c),d=[];f.leafNodesInRangeIterator(a.startNode,a.endNode,function(a){a instanceof b&&d.push(a)}.bind(this));return d},_getStartEndNodes:function(c){var b=c.getStartPosition(),a=b.getNode(),d=c.getEndPosition();c=d.getNode();0<e.comparePositions(b,d)?b=c:(b=a,a=c);return{startNode:b,endNode:a}}}})},"MW/rtc/model/NodeUtilities":function(){define(["dojo/_base/array","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/nodes/Node"],function(h,f,g){return{getStyleAttributesFromRange:function(e,
d){var c={};this.leafNodesInRangeIterator(e,d,function(b){b=b.getStyleAttributes();for(var a in b)b.hasOwnProperty(a)&&(c.hasOwnProperty(a)?c[a]!==b[a]&&(c[a]=void 0):c[a]=b[a])});return c},getLineage:function(e){for(var d=[];e;)d.unshift(e),e=e.parent;return d},getCommonAncestors:function(e,d){for(var c=this.getLineage(e),b=this.getLineage(d),a=0;a<c.length;a+=1)if(c[a]!==b[a])return c.slice(0,a);return c},getParagraphNodesInRange:function(e,d){e=e.rootContainer();d=d.rootContainer();var c=[];this.siblingNodesInRangeIterator(e,
d,function(b){c.push(b)});return c},getNodesInRange:function(e,d){var c=[];this.leafNodesInRangeIterator(e,d,function(b){c.push(b)});return c},getParagraphNodesInRangeAsSet:function(e,d){e=e.rootContainer();d=d.rootContainer();var c=f.createSet();this.siblingNodesInRangeIterator(e,d,function(b){c.add(b)});return c},getParagraphFormat:function(e){var d=e.startNode.rootContainer();e=e.endNode.rootContainer();var c=d.containerType();if(e.containerType()!==c)return"none";this.siblingNodesInRangeIterator(d,
e,function(b){if(b.isTextContainerNode()&&b.containerType()!==c)return c="none",!0});return c},getLineNumberForNode:function(e,d){return d.getLineNumber(e.rootContainer())},getContainersOfNodeType:function(e,d){var c=[];d.root.children.forEach(function(b){this.isInType(b,e)&&c.push(b)},this);return c},getFullRange:function(e,d){e.isTextContainerNode()&&(e=e.startNode());d.isTextContainerNode()&&(d=d.endNode());var c=d.maxOffset();return{start:{node:e,offset:0},end:{node:d,offset:c}}},searchNodeById:function(e,
d){var c;if(d.uid===e)return d;var b;if(d.children)for(b=0;b<d.children.length&&!(c=this.searchNodeById(e,d.children[b]));b+=1);return c},isContinuousFormat:function(e){return"none"!==this.getParagraphFormat(e)},isInType:function(e,d){return!e?!1:e.isInstanceOf(d)?!0:e.parent?this.isInType(e.parent,d):!1},getClosestAncestorOfType:function(e,d){return!e?null:e.isInstanceOf(d)?e:e.parent?this.getClosestAncestorOfType(e.parent,d):null},isRangeNodeType:function(e,d,c){d=d.rootContainer();if(!(d instanceof
c))return!1;var b=!0;e=e.rootContainer();this.siblingNodesInRangeIterator(e,d,function(a){if(!(a instanceof c))return b=!1,!0});return b},isNodeTypeInRange:function(e,d,c){d=d.rootContainer();if(d instanceof c)return!0;var b=!1;e=e.rootContainer();this.siblingNodesInRangeIterator(e,d,function(a){if(a instanceof c)return b=!0});return b},isFreestandingOpaque:function(e){if(e.getText().trim()!==e.textContainer().getText().trim())return!1;var d=e.textContainer(),c,b;for(c=0;c<d.children.length;c+=1)if(b=
d.children[c],b.containsTextNodes()||!b.isTextNode()&&b.className!==e.className)return!1;return!0},isNode:function(e,d){d=d||g;return e&&e.isInstanceOf(d)},isConvertable:function(e,d){var c=!0,b=e.selectionInfo();if(b)this.leafNodesInRangeIterator(b.startNode,b.endNode,function(a){a=a.textContainer();if(a.isInstanceOf(d)&&!a.isConvertable())return c=!1,!0});else if(b=e.getNode().textContainer(),b.isInstanceOf(d)&&!b.isConvertable())return!1;return c},forAllDescendants:function(e,d){e.forEach(function(c){d(c);
c.children&&this.forAllDescendants(c.children,d)},this)},siblingNodesInRangeIterator:function(e,d,c){this._assert(e&&d,"Start node or end node not provided");this._assert(e.parent===d.parent,"Start node and end node should be in the same layer");if(e===d)c(e);else{for(var b=e.parent.children,a=f.indexOf(b,e);e;){if(c(e))return!0;if(e===d)break;a+=1;e=b[a]}return!1}},leafNodesInRangeIterator:function(e,d,c){this._assert(e&&d,"Start node or end node not provided");var b=e.rootContainer(),a=d.rootContainer();
!b||!a?this._leafNodesInRangeIterator(e,d,c):this.siblingNodesInRangeIterator(b,a,function(k){if(k.children&&0<k.children.length){var f=e,g=d;k===b&&k!==a?g=b.endNode():k!==b&&k===a?f=a.startNode():b!==a&&(f=k.startNode(),g=k.endNode());return this._leafNodesInRangeIterator(f,g,c)}}.bind(this))},_leafNodesInRangeIterator:function(e,d,c){for(;e;){if(c(e))return!0;if(e===d)break;e=e.nextNode()}return!1},setNodeAttributes:function(e,d){for(var c in d)e.hasOwnProperty(c)&&(e[c]=d[c]);return e},setAttributesForNodes:function(e,
d){e.forEach(function(c){return this.setNodeAttributes(c,d)},this)},prevNode:function(e){return e?e.prevNode():null},nextNode:function(e){return e?e.nextNode():null},prevContainer:function(e){return e?e.rootContainer().previousSibling():null},nextContainer:function(e){return e?e.rootContainer().nextSibling():null},_assert:function(e,d){if(!e)throw Error(d);}}})},"MW/rtc/nodes/Node":function(){define("dojo/_base/declare mw-log/Log MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/Position MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule mw-utils/Utils".split(" "),
function(h,f,g,e,d,c){return h(null,{constructor:function(){this.box=this.parent=null;this.readOnly=!1;this.uid=c.generateUuid();this.groupingType=d().groupingType},className:"Node",isRootNode:function(){return!1},isRootContainer:function(){return this.parent&&this.parent.isRootNode()},rootContainer:function(){for(var b=this,a=null;b.parent;)if(a=b,b=b.parent,b.isRootNode())return a;return null},isTextContainerNode:function(){return!1},isOpaqueNode:function(){return!1},isTextNode:function(){return!1},
textContainer:function(){for(var b=this;!b.isTextContainerNode();)if(b.parent)b=b.parent;else break;return b},isEmpty:function(){var b;if(this.children)for(b=0;b<this.children.length;b+=1)if(!this.children[b].isEmpty())return!1;return!0},containsTextNodes:function(){return!1},isReadOnly:function(){for(var b=this.readOnly,a=this;!b;)if(a.parent)a=a.parent,b=a.readOnly;else break;return b},isSameTypeAs:function(b){return this.className===b.className},updateAttributes:function(b){var a,c={};for(a in b)b.hasOwnProperty(a)&&
(c[a]=this[a],this[a]=b[a]);return c},deleteNode:function(){if(this.parent){var b=g.indexOf(this.parent.children,this);this.parent.removeChild(b)}},serialize:function(b){var a={className:this.className};this._serializeAttributes(a);if(b)return a;this.children&&(a.children=this.children.map(function(a){return a.serialize()}));return a},_serializeAttributes:function(b){},nextSibling:function(){var b=this.parent;if(!b)return null;var b=b.children,a=g.indexOf(b,this);return-1===a?null:b[a+1]||null},previousSibling:function(){var b=
this.parent;if(!b)return null;var b=b.children,a=g.indexOf(b,this);return-1===a?null:b[a-1]||null},nextNode:function(){var b=this.nextSibling();return b&&b.startNode()?b.startNode():this.parent?this.parent.nextNode():null},prevNode:function(){var b=this.previousSibling();return b&&b.endNode()?b.endNode():this.parent?this.parent.prevNode():null},depth:function(){return this.parent?this.parent.depth()+1:0},getTop:function(){return this.box?this.box.offsetTop:0},defaultHeight:18,getHeight:function(){if(this.box){var b=
this.box.offsetHeight;return 0<b?b:this.defaultHeight}return 0},getLeft:function(){return this.box?this.box.offsetLeft:0},getWidth:function(){return this.box?this.box.offsetWidth:0},getRight:function(b){b=b||this.getLeft();return this.box?b+this.getWidth():0},getBottom:function(b){b=b||this.getTop();return this.box?b+this.getHeight():0},getPositionFromOffset:function(b){f.assert(0<=b&&b<=this.maxOffset(),"Invalid offset");return new e(this,b)},startPosition:function(){return this.getPositionFromOffset(0)},
endPosition:function(){return this.getPositionFromOffset(this.maxOffset())},getEquivalentChildPositions:function(b){f.error("Unimplemented API: MW.rtc.nodes.Node.getEquivalentChildPositions");return[]},isSplittable:function(b){f.error("Unimplemented API: MW.rtc.nodes.Node.isSplittable");return!1},resetUniqueAttributes:function(){},_childrenAlign:"vertical"})})},"MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/BaseRule"],
function(h,f){return h(f,{groupingType:"base",constructor:function(){},getOperationsForLayout:function(f,e,d){if(this._isApplicable(e))return{nodeToPlace:f}},getOperationsForRemove:function(f,e){if(this._isApplicable(f))return{nodeToRemove:this._getDomNode(f)}},_canMergeBlocks:function(f,e){return!1},_canGroupTogether:function(f,e){return!1},_isApplicable:function(f){return f&&f.box&&f.groupingType===this.groupingType},getRefDomNode:function(f,e,d){return!this._isApplicable(e)?null:this.inherited(arguments)},
_hasToRedrawNeighboringBlocks:function(f){return!1},_getNodesToRedraw:function(f,e){for(var d=[],c=f,b=e?"unshift":"push",a=e?"previousSibling":"nextSibling";c&&this._canGroupTogether(f,c);){if(this._getDomNode(c))d[b](c);c=c[a]()}return d},priority:function(){return 0}})})},"MW/rtc/plugins/view/layoutmanager/abstract/BaseRule":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/view/layoutmanager/LayoutConstants"],function(h,f,g,e){return h(null,
{constructor:function(){},getOperationsForLayout:function(d,c,b){return null},getOperationsForRemove:function(d,c){return null},getOperationsForResize:function(){return null},reset:function(){},getRefDomNode:function(d,c,b){d=this._getRefPosition(d,c);return!d?null:{domNode:this._getDomNode(c),position:d,base:!0}},_getRefPosition:function(d,c){var b=this._getDomNode(c);return!b||!b.parentElement?null:1===g.nodesInOrder(d,c)?"before":"after"},_isApplicable:function(d){return!0},_getDomNode:function(d){if(d=
d.box){var c=d.parentElement;return c&&f.contains(c,e.LINENODE_WRAPPER_CLASS)?c:d}},priority:function(){throw Error("Unimplemented API: MW.rtc.plugins.view.layoutmanager.BaseRule.priority");}})})},"MW/rtc/plugins/view/layoutmanager/LayoutConstants":function(){define([],function(){return{LINENODE_WRAPPER_CLASS:"inlineWrapper",ROOTNODE_CLASS:"rootNode",RIGHT_MARGIN_WIDTH:30}})},"MW/rtc/model/Selection":function(){define(["dojo/_base/declare","./Range"],function(h,f){return h(f,{_isReversed:!1,_fileEndSelected:!1,
constructor:function(f,e,d,c){this._isReversed=d;this._fileEndSelected=c},isReversed:function(){return this._isReversed},fileEndSelected:function(){return this._fileEndSelected},isEqualTo:function(f){return this.inherited(arguments)&&this._isReversed===f._isReversed&&this._fileEndSelected===f._fileEndSelected}})})},"MW/rtc/model/SelectionUtilities":function(){define(["MW/rtc/model/DocumentUtilities","./RangeUtilities","./Selection"],function(h,f,g){return{trimSelection:function(e){var d=f.trimRange(e),
c=e.fileEndSelected()?e.getEndPosition():d.getEndPosition();return new g(d.getStartPosition(),c,e.isReversed(),e.fileEndSelected())},trimTrailingLineBreak:function(e){var d=f.trimTrailingLineBreak(e);d.isEqualTo(e)||(d=new g(d.getStartPosition(),d.getEndPosition(),e.isReversed,!1));return d},isInSelection:function(e,d){if(!d)return!1;for(var c=d.getEndPosition().getNode().rootContainer();c;){if(c instanceof e)return c;if(c===d.getStartPosition().getNode().rootContainer())return!1;c=c.prevNode().rootContainer()}},
isInFullSelection:function(e,d,c){if(!e.getSelection())return!1;e=e.selectionInfo();var b=d.getLineNumber(c)+1,a=d.getLineNumber(e.startNode.rootContainer())+1;d=d.getLineNumber(e.endNode.rootContainer())+1;return b<d&&b>a?!0:b===d&&b>a&&h.isAtEndOfContainer(e.endPosition,c)?!0:b<d&&b===a&&h.isAtStartOfContainer(e.startPosition,c)?!0:h.isAtEndOfContainer(e.endPosition,c)&&h.isAtStartOfContainer(e.startPosition,c)?!0:!1},checkFullSelection:function(e,d,c){var b=e.selectionInfo();h.isAtEndOfContainer(b.endPosition,
d)&&h.isAtStartOfContainer(b.startPosition,d)&&this.setContainerSelection(e,c,d)},updateSelection:function(e,d,c,b){b=e.selectionInfo();e=e.adjustSelection(e.selectionInfo(),!0);h.isAtStartOfContainer(b.startPosition,d)&&h.isAtEndOfContainer(e.endPosition,d)&&c.updateContainerFullSelection()},setContainerSelection:function(e,d,c){d=d.getLineNumber(c)+1;e.selectionInfo();e.suspendChangeEvent();e.collapseSelection();h.isAtEndOfContainer(e.position,c)?e.setSelectionLineColumn(d,1,d+1,1):e.setSelectionLineColumn(d+
1,1,d,1);e.activateChangeEvent()}}})},"MW/rtc/view/PositionMoveUtilities":function(){define(["MW/rtc/model/CodeUtilities","MW/rtc/model/PositionUtilities"],function(h,f){return{movePositionLineStart:function(f,e,d){var c=f.getNode();if(!0!==d&&h.isCodeContainer(c)){d=c.rootContainer();var b=d.getText().search(/\S|$/);if(0<b&&c.offsetInContainer()+f.getOffset()!==b)return d.getPositionFromOffset(b)}c=c.textContainer();return c.wrappable?(f=e.getCoordinateForPosition(f),e.getPositionFromCoordinate({x:0,
y:f.y+f.height/2})):c.startPosition()},movePositionLineEnd:function(f,e){var d=f.getNode().textContainer();if(d.wrappable){var d=e.getCoordinateForPosition(f),c=e.getDomTargetPosition();return e.getPositionFromCoordinate({x:c.scrollWidth,y:d.y+d.height/2})}return d.endPosition()},movePositionLeft:function(f){return f.getNode().movePositionLeft(f)},movePositionRight:function(f){return f.getNode().movePositionRight(f)},movePositionUp:function(f,e,d){var c=e.getCoordinateForPosition(f).y-1;return this._findPosition(f,
e,d,c,0)},movePositionDown:function(f,e,d){var c=e.getCoordinateForPosition(f),b=e.getDocumentDimension();return this._findPosition(f,e,d,c.y+c.height,b.height)},_findPosition:function(g,e,d,c,b){var a=c<=b?1:-1;for(c*=a;c<=b*a;c+=1){var k=e.getPositionFromCoordinate({x:d,y:Math.abs(c)});if(k&&0!==f.comparePositions(k,g))return k}return null}}})},"MW/rtc/model/CodeUtilities":function(){define(["MW/rtc/model/NodeUtilities","MW/rtc/nodes/inner/LineNode"],function(h,f){return{isCodeContainer:function(g,
e){if(!g)return!1;if(e)return g.isInstanceOf(f)&&"code"===g.containerType();var d=h.getClosestAncestorOfType(g,f);return d?"code"===d.containerType():!1},isNonExecutableCodeContainer:function(g){return!g?!1:(g=h.getClosestAncestorOfType(g,f))?"code"!==g.containerType():!1},isCodeRange:function(g,e){return h.isRangeNodeType(g,e,f)},isCodeInRange:function(g,e){return h.isNodeTypeInRange(g,e,f)},getCodeLineNodes:function(g){return h.getContainersOfNodeType(f,g)},getAbsoluteCodeOffsetFromPosition:function(f,
e){h._assert(this.isCodeContainer(e.getNode()),"Invalid node.  Node must be a code line.");var d=this.getCodeLineNodes(f),c=this.getCodeLineNumberFromPosition(f,e)-1,b=0;d.some(function(a,d){if(d===c)return b+=e.getOffset(),!0;b+=a.getText().length;b+=1});return b},getCodeLineNumberFromPosition:function(f,e){var d;d=e.getNode();h._assert(this.isCodeContainer(d),"Invalid node.  Node must be a code line.");d=this.getCodeLineNodes(f).indexOf(d)+1;return 0<d?d:-1},getCodeNodesInNodeRange:function(f,e){return h.getParagraphNodesInRange(f,
e).filter(function(d){return this.isCodeContainer(d,!0)},this)},getCodePositionsInNodeRange:function(f,e,d){return this.getCodeNodesInNodeRange(e,d).map(function(c){return f.createLinePosition(c,!1)},this)}}})},"MW/rtc/nodes/inner/LineNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode","MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRule"],function(h,f,g){return h([f],{constructor:function(e){this.groupingType=g().groupingType},className:"LineNode",groupingName:"CodeBlock",
_childrenAlign:"horizontal",containerType:function(){return"code"},defaultTextNode:function(){return{className:"PlainTextNode",text:""}},isTextContainerNode:function(){return!0},containsTextNodes:function(){return!0},getCodeText:function(){return this.getCodeTextOfChildren()}})})},"MW/rtc/nodes/InnerNode":function(){define(["dojo/_base/declare","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/Position","MW/rtc/nodes/Node","mw-log/Log"],function(h,f,g,e,d){return h(e,{constructor:function(c){this.children=
c;this.children.forEach(function(b){b.parent=this},this)},className:"InnerNode",defaultTextNode:function(){d.assert("NdefaultTextNode() has to be overloaded in "+this.className+".")},_childOffset:function(c){var b=this.startNode();if(b){if(c===b)return 0;for(var a=0,d=b.textContainer();b!==c;){a+=b.maxOffset();b=b.nextNode();if(!b)break;b.textContainer()!==d&&b.textContainer()!==d.textContainer()&&(a+=this.CHILD_TEXT_SEPARATOR.length);d=b.textContainer()}return a}return 0},firstChild:function(){if(0<
this.children.length)return this.children[0];d.assert("InnerNode must have at least one child")},lastChild:function(){if(0<this.children.length)return this.children[this.children.length-1];d.assert("InnerNode must have at least one child")},addChild:function(c,b){c&&(1===arguments.length&&(b=this.children.length),c.parent=this,this.children.splice(b,0,c))},replaceChild:function(c,b){c&&(c.parent=this,this.children.splice(b,1,c))},removeChild:function(c){var b=f.indexOf(this.children,c);c.parent=null;
this.children.splice(b,1)},empty:function(){var c=this.children.length,b;for(b=0;b<c;b+=1)this.children[b].parent=null;this.children=[]},startNode:function(){return 0<this.children.length?this.children[0].startNode():null},endNode:function(){return 0<this.children.length?this.children[this.children.length-1].endNode():null},CHILD_TEXT_SEPARATOR:"",getText:function(){return this._getTextRepresentation(function(c){return c.getText()})},getTextForPositioning:function(){return this._getTextRepresentation(function(c){return c.getTextForPositioning()})},
getCodeText:function(){return""},getCodeTextOfChildren:function(){return this._getTextRepresentation(function(c){return c.getCodeText()})},_getTextRepresentation:function(c){return this.children.map(c).join(this.CHILD_TEXT_SEPARATOR)},maxOffset:function(){var c=0;if(this.children&&0<this.children.length){var b=this.CHILD_TEXT_SEPARATOR.length;this.children.forEach(function(a,d){c+=a.maxOffset()+(0<d?b:0)})}return c},childrenAreContainers:!1,getPositionFromOffset:function(c){if(!(this.children&&0<
this.children.length))return null;for(var b=this.startNode(),a=this.endNode(),d=b.textContainer();c>b.maxOffset();){if(b===a)return b.endPosition();c-=b.maxOffset();b=b.nextNode();b.textContainer()!==d&&b.textContainer()!==d.textContainer()&&(c-=b.rootContainer().CHILD_TEXT_SEPARATOR.length);d=b.textContainer()}return b.getPositionFromOffset(c)},startPosition:function(){return this.startNode()&&this.startNode().startPosition()},endPosition:function(){return this.endNode()&&this.endNode().endPosition()},
getEquivalentChildPositions:function(c){for(var b,a,d=[],e=a=0,f=0;f<this.children.length;f++)b=this.children[f],a=e,e+=b.maxOffset(),0<f&&(a+=this.CHILD_TEXT_SEPARATOR.length,e+=this.CHILD_TEXT_SEPARATOR.length),a<=c&&c<=e&&(a=c-a,d.push(new g(b,a)));return d},isSplittable:function(c){if(0===c||c===this.maxOffset())return!1;c=this.getEquivalentChildPositions(c)[0];return c.isAtEdge()?!0:c.getNode().isSplittable(c.getOffset())}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRule":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/dom-construct","MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule"],function(h,f,g,e){return h(e,{groupingType:"contiguous",_BLOCK_SUFFIX:"Block",_BLOCK_CLASS:"contiguous",constructor:function(d){this._domTarget=d},getOperationsForLayout:function(d,c,b){var a={};a.nodeToPlace=d;if(this._isApplicable(c)){var k=this._getSiblingBlockReference(c,b);if(k)return a.nodeToPlaceRefNode=k.domNode,a.nodeToPlaceRefPos=k.position,a;k=this._createBlock(c);g.place(d,k);a.nodeToPlace=
k}if(this._domTarget.contains(b)&&c.isRootContainer()&&(c.groupingType===e().groupingType||c.groupingType===this.groupingType))if(d=c.previousSibling(),c=c.nextSibling(),b=this._getBlock(d),k=this._getBlock(c),b||k)d=this._getNodesToRedraw(d,!0),c=this._getNodesToRedraw(c,!1),a.prevBlock=this._getBlockByNodes(d),a.nextBlock=this._getBlockByNodes(c);return a},_getSiblingBlockReference:function(d,c){var b={currentNode:d,iterator:"previousSibling"},a={currentNode:d,iterator:"nextSibling"};do{if((b=b&&
this._stepSearchForSiblingBlockReference(d,b))&&b.domNode)return{domNode:b.domNode,position:"after"};if((a=a&&this._stepSearchForSiblingBlockReference(d,a))&&a.domNode)return{domNode:a.domNode,position:"before"};if(!this._domTarget.contains(c))break}while(b||a);return null},_stepSearchForSiblingBlockReference:function(d,c){var b=c.currentNode[c.iterator]();if(!b||b.groupingType!==this.groupingType&&b.box&&b.box.parentElement)return null;var a=this._getBlock(b);a&&(a.parentElement&&f.contains(a,this._getBlockClass(d)))&&
(c.domNode=this._getDomNode(b));c.currentNode=b;return c},_getBlockByNodes:function(d){var c;d&&d.length&&(c={container:this._createBlock(d[0]),childNodes:d.map(function(b){return this._getDomNode(b)},this)});return c},getOperationsForRemove:function(d,c){return this._isApplicable(d)?this._removeNodeAndBlock(d):this._mergeSiblingBlocks(d)},_removeNodeAndBlock:function(d){var c=this._getDomNode(d);d={nodeToMerge:[]};d.nodeToRemove=c;var b;if((b=c.parentElement)&&1===b.childElementCount)d.nodeToRemove=
b,c=b.previousElementSibling,b=b.nextElementSibling,this._canMergeBlocks(c,b)&&d.nodeToMerge.push([c,b]);return d},_mergeSiblingBlocks:function(d){var c=this._getDomNode(d);d={nodeToMerge:[]};d.nodeToRemove=c;var b=c.previousElementSibling,c=c.nextElementSibling;b&&(c&&b.childElementCount&&c.childElementCount&&this._canMergeBlocks(b.lastChild,c.firstChild))&&d.nodeToMerge.push([b.lastChild,c.firstChild]);this._canMergeBlocks(b,c)&&d.nodeToMerge.push([b,c]);return d},getRefDomNode:function(d,c,b){if(!this._isApplicable(c))return null;
b=this._getRefPosition(d,c);if(!b)return null;var a=this._getDomNode(c);this._canGroupTogether(d,c)&&(d.nextSibling()===c||d.previousSibling()===c)?c=a:(c=a.parentElement,b=this._getRefPositionForParentOfTarget(b,c,d,a));return{domNode:c,position:b}},_getRefPositionForParentOfTarget:function(d,c,b,a){if(c.firstChild===c.lastChild)return d;"before"===d&&this._shouldPlaceAfterRefDomNode(c,b,a)?d="after":"after"===d&&this._shouldPlaceBeforeRefDomNode(c,b,a)&&(d="before");return d},_shouldPlaceAfterRefDomNode:function(d,
c,b){if(b===d.firstChild)return!1;c=this._getNodesToRedraw(c.nextSibling(),!1);if(0===c.length)return!1;c=c[c.length-1];if(this._getDomNode(c)===d.lastChild)return!0;c=c.nextSibling();return!c||this._getDomNode(c)===d.nextElementSibling?!0:!1},_shouldPlaceBeforeRefDomNode:function(d,c,b){if(b===d.lastChild)return!1;c=this._getNodesToRedraw(c.previousSibling(),!0);if(0===c.length)return!1;c=c[0];if(this._getDomNode(c)===d.firstChild)return!0;c=c.previousSibling();return!c||this._getDomNode(c)===d.previousElementSibling?
!0:!1},_getBlock:function(d){if(d){var c=this._getDomNode(d);return(c=c&&c.parentElement)&&f.contains(c,this._getBlockClass(d))?c:null}},_createBlock:function(d){return g.create("div",{"class":this._getBlockClass(d)+" "+this._BLOCK_CLASS})},_getBlockClass:function(d){return d.groupingName?d.groupingName:d.className+this._BLOCK_SUFFIX},_isBlockElement:function(d){return!!d&&f.contains(d,this._BLOCK_CLASS)},_canMergeBlocks:function(d,c){if(!d||!c||!d.className||!c.className)return!1;var b=d.className.split(" "),
a=c.className.split(" ");return b[0]===a[0]&&b[1]===a[1]&&b[1]===this.groupingType},_canGroupTogether:function(d,c){return d.groupingType===this.groupingType&&d.groupingType===c.groupingType&&this._getBlockClass(d)===this._getBlockClass(c)},priority:function(){return 1}})})},"MW/rtc/cursor/CursorViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/CursorView"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.cursor","rtc.view","rtc.cursorcontroller"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/cursor/CursorView":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/view/ViewEventUtilities"],function(h,f,g,e,d){return h(e,{constructor:function(c,b,a){this._cursor=c;this._view=b;this._cursorController=a;this.own(g.before(c,"onUpdate",f.hitch(this,"_handleCursorUpdate"),!0));this.own(g.after(c,"onChange",
f.hitch(this,"_handleCursorChange")));this.own(g.after(b,"onViewUpdated",f.hitch(this,"_handleViewUpdated"),!0));this.own(g.after(a,"onUpdate",f.hitch(this,"_handleCursorUpdate",!0)));this._changeScheduled=this._updateScheduled=this._scrollScheduled=!1},_handleCursorUpdate:function(c){var b=this._view.isLayoutPending();if(!c)if(b)this._scrollScheduled=!0;else this.onScrollCursorIntoView();if(b)this._updateScheduled=!0;else this.onUpdate()},_handleCursorChange:function(){if(this._view.isLayoutPending())this._changeScheduled=
!0;else this.onChange()},_handleViewUpdated:function(c){if(this._cursor.position.isValid()){this._scrollScheduled&&(this._scrollScheduled=!1,this.onScrollCursorIntoView());if(this._updateScheduled||this._needsUpdateFromViewEvents(c))this._updateScheduled=!1,this.onUpdate();this._changeScheduled&&(this._changeScheduled=!1,this.onChange())}},_needsUpdateFromViewEvents:function(c){return d.hasSizingEvent(c)||d.hasLayoutEvent(c)||d.hasRenderEvent(c)},onScrollCursorIntoView:function(){},onUpdate:function(){},
onChange:function(){}})})},"MW/rtc/view/ViewEventUtilities":function(){define(["MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities"],function(h,f){return{EVENTS:{scrollTop:1,scrollLeft:2,scrollHeight:3,scrollWidth:4,clientHeight:5,clientWidth:6,offsetHeight:7,offsetWidth:8,layoutChange:9,renderUpdate:10},_DOCUMENT_EVENTS_TO_PATCH:[h.FORMAT_CHANGE_EVENT],createEvent:function(f){return{type:f}},hasScrollEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===
this.EVENTS.scrollTop||e.type===this.EVENTS.scrollLeft},this)},hasVerticalScrollEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.scrollTop},this)},isOnlyHorizontalEvents:function(f){this._assertValidEvents(f);return f.every(function(e){return e.type===this.EVENTS.scrollWidth||e.type===this.EVENTS.clientWidth||e.type===this.EVENTS.offsetWidth||e.type===this.EVENTS.scrollLeft},this)},isOnlyScrollHeightChange:function(f){this._assertValidEvents(f);return f.every(function(e){return e.type===
this.EVENTS.scrollHeight},this)},isOnlyClientOrOffsetHeightChange:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.clientHeight||e.type===this.EVENTS.offsetHeight},this)},hasSizingEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.scrollHeight||e.type===this.EVENTS.scrollWidth||e.type===this.EVENTS.clientHeight||e.type===this.EVENTS.clientWidth||e.type===this.EVENTS.offsetHeight||e.type===this.EVENTS.offsetWidth},
this)},hasHeightEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.clientHeight||e.type===this.EVENTS.offsetHeight||e.type===this.EVENTS.scrollHeight},this)},hasOffsetHeightEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.offsetHeight},this)},hasWidthEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.clientWidth||e.type===this.EVENTS.offsetWidth||e.type===
this.EVENTS.scrollWidth},this)},hasLayoutEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.layoutChange},this)},hasRenderEvent:function(f){this._assertValidEvents(f);return f.some(function(e){return e.type===this.EVENTS.renderUpdate},this)},isLayoutChangeEventToPatch:function(g,e){return f.isMultiLineEvent(g,e)||this._hasDocumentEventToPatch(g)},_assertValidEvents:function(f){if(!(f&&0<f.length))throw Error("View events payload cannot be empty");},
_hasDocumentEventToPatch:function(g){return this._DOCUMENT_EVENTS_TO_PATCH.some(function(e){return f.hasEventType(g,e)})}}})},"MW/rtc/model/DocumentConstants":function(){define([],function(){return{INSERT_TEXT:"insertText",INSERT_BREAK_EVENT:"insertBreak",DELETION_EVENT:"deleteSelection",FORMAT_CHANGE_EVENT:"formatChange",NUMBER_OF_LINES_CHANGED:"numberOfLinesChanged",READONLY_STATE_CHANGE_EVENT:"readOnlyStateChange",FORWARD_DELETE:1,BACKWARD_DELETE:-1}})},"MW/rtc/model/DocumentEventUtilities":function(){define(["dojo/_base/lang",
"MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentUtilities","MW/rtc/model/events/DocumentEventBase","MW/rtc/model/events/UndoableEvent"],function(h,f,g,e,d){return{_INVALID_START_LINE:"Invalid start line provided for ",_INVALID_END_LINE:"Invalid end line provided for ",_EVENT_PAYLOAD_SHOULD_BE_ARRAY:"Event payload should be an array",_EVENT_ARRAY_NON_EMPTY:"Event array should be non-empty",_EVENT_NOT_DOCUMENT_EVENT_BASE:"Event object not an instance of DocumentEventBase",hasEventType:function(c,
b){return!c||1>c.length||!b?!1:c.some(function(a){return a&&a.type===b})},getEventsOfType:function(c,b){return!c||1>c.length||!b?[]:c.filter(function(a){return a&&a.type===b})},isMultiLineEvent:function(c,b){if(!c||1>c.length||!b)return!1;var a=[];return c.some(function(b){if(!b)return!1;if(b.type===f.INSERT_BREAK_EVENT)return!0;if(b.type!==f.INSERT_TEXT)return!1;if(b.startLine!==b.endLine)return!0;if(0===a.length)return a.push(b.startLine),!1;if(0>a.indexOf(b.startLine))return!0})},getLineNodesFromEvents:function(c,
b){if(!c||1>c.length||!b)return[];var a=c.map(function(a){if(!a)return[];switch(a.type){case f.FORMAT_CHANGE_EVENT:return this._getLineNodesFromEvent(a,b);case f.DELETION_EVENT:return[b.getLineNode(a.startLine)];case f.INSERT_TEXT:if(a.position&&a.position.isValid()){for(var c=[],d=a.position.getNode().rootContainer(),e=a.startLine;e<=a.endLine&&d;e+=1)c.push(d),d=d.nextSibling();return c}return this._getLineNodesFromEvent(a,b);case f.INSERT_BREAK_EVENT:c=[];for(e=0;e<=a.numberOfLines;e+=1)c.push(b.getLineNode(a.line+
e));return c;default:return[]}},this).reduce(function(a,b){return a.concat(b)});return!a?[]:a.filter(function(b,c){return a.indexOf(b)===c})},_getLineNodesFromEvent:function(c,b){for(var a=[],d=c.startLine;d<=c.endLine;d+=1)a.push(b.getLineNode(d));return a},toLengthChangeEvent:function(c){var b=this.getEventsOfType(c,f.INSERT_BREAK_EVENT);c=this.getEventsOfType(c,f.DELETION_EVENT);b=b.map(function(a){return a.numberOfLines});b=b.reduce(function(a,b){return a+b},0);c=c.map(function(a){return a.endLine-
a.startLine});c=c.reduce(function(a,b){return a+b},0);b-=c;return!b?null:{type:f.NUMBER_OF_LINES_CHANGED,change:b}},assertValidEventPayload:function(c){g.assert(Array.isArray(c),this._EVENT_PAYLOAD_SHOULD_BE_ARRAY);g.assert(0<c.length,this._EVENT_ARRAY_NON_EMPTY);c.forEach(function(b){g.assert(b.isInstanceOf(e),this._EVENT_NOT_DOCUMENT_EVENT_BASE)},this)},assertValidLines:function(c,b,a){g.assert(this._isValidLine(c),this._INVALID_START_LINE+a);g.assert(this._isValidLine(b),this._INVALID_END_LINE+
a)},_isValidLine:function(c){return"number"===typeof c&&-1<c},lineRangeFromEvents:function(c){var b,a;if(h.isArray(c))for(var d=0;d<c.length;d+=1){if(void 0!==c[d].startLine&&(void 0===b||b>c[d].startLine))b=c[d].startLine;if(void 0!==c[d].endLine&&(void 0===a||a<c[d].endLine))a=c[d].endLine}return{startLine:b,endLine:a}},translateEventsForUndo:function(c){this.assertValidEventPayload(c);return c.map(this._translateEventForUndo,this)},_translateEventForUndo:function(c){return!c.isInstanceOf(d)?c:
c.getUndoEvent()}}})},"MW/rtc/model/events/DocumentEventBase":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g){this.startLine=f;this.endLine=g},destroy:function(){this.endLine=this.startLine=-1}})})},"MW/rtc/model/events/UndoableEvent":function(){define(["dojo/_base/declare","./DocumentEventBase"],function(h,f){return h(f,{getUndoEvent:function(){throw Error("Unimplemented API: MW.rtc.model.events.UndoableEvent.getUndoEvent");}})})},"MW/rtc/cursor/CursorControllerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/cursor/CursorController"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view","rtc.fileendselectable","rtc.cursor","rtc.columnselection.enabled"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/cursor/CursorController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred MW/rtc/abstract/AbstractPlugin MW/rtc/cursor/Cursor MW/rtc/cursor/CursorUtilities MW/rtc/model/CodeUtilities MW/rtc/model/Selection".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(d,{LEFT:1,RIGHT:2,UP:3,DOWN:4,START:5,END:6,LINE_START:7,LINE_END:9,WORD_LEFT:10,WORD_RIGHT:11,PAGE_UP:13,PAGE_DOWN:14,KEEP_ANCHOR:15,constructor:function(a,b,c,d,e){this._internalDocument=a;this._view=b;this._fileEndSelectable=c;this._cursor=d;this._columnSelectionEnabled=e;this._currentAction=null;this._suspended=0;this._hidden=!1;this._initializeController();this._initializeOriginalCursor()},holdCursors:function(){this._heldCursors?this._holdCount++:(this._holdCount=
1,this._heldCursors=[],this._getCursorIDs().forEach(function(a){this._heldCursors[a]=this._cursors[a].getCursorAsLiveRange()},this))},resetCursors:function(a){!this._heldCursors||1<this._holdCount?this._holdCount--:(this._backupCursors&&(this._cursors=this._backupCursors,this._backupCursors=null),this._getCursorIDs().forEach(function(b){var c=this._heldCursors[b];a||this._cursors[b].setCursorToRange(c);c.destroy()},this),this._heldCursors=null,this.onUpdate())},scrollIntoView:function(){1===this._getCursorIDs().length&&
(this._cursor.suspendChangeEvent(),this._cursor.onUpdate(!1),this._cursor.activateChangeEvent(!0))},setTemporaryLineColumn:function(a,b,c){this._backupCursors=this._cursors;this._cursors={};this._initializeOriginalCursor();this._cursor.setLineColumn(a,b,c)},setTemporarySelectionLineColumn:function(a,b,c,d){this._backupCursors=this._cursors;this._cursors={};this._initializeOriginalCursor();this._cursor.setSelectionLineColumn(a,b,c,d)},selectLine:function(a,b){this._removeExtraCursors();this._cursor.selectLine(a,
b)},isEventInSelection:function(a){return this.getCursors().some(function(b){return b.isEventInSelection(a)})},areCursorsReadOnly:function(){return this.getCursors().reduce(function(a,b){return a||b.isCursorReadOnly()},!1)},reinitializeCursors:function(){this.suspendUpdates();this._removeExtraCursors();this._cursor.movePosition(this._cursor.START,!1,!1);this.activateUpdates();this.onUpdate()},selectedText:function(){var a="";this.getCursors(!0).forEach(function(b){a=a+b.selectedText()+"\n"});return a.substring(0,
a.length-1)},getCursors:function(a){var c=this._getCursorIDs().map(function(a){return this._cursors[a]},this);a&&c.sort(f.hitch(b,b.cursorSortFunc));return c},getPositions:function(a){return this.getCursors(a).map(function(a){return a.hasSelection()?a.getSelection():a.getPosition()})},setPositions:function(a){this.suspendUpdates();this._ensureCorrectNumberOfCursorsAvailable(a.length);var b=this.getCursors();a.forEach(function(a,c){var d=b[c];a.isInstanceOf&&a.isInstanceOf(k)?d.setSelection(a):(d.collapseSelection(),
d.setPosition(a))},this);this.activateUpdates();this.onUpdate()},hasSelection:function(){return this.getCursors().some(function(a){return a.hasSelection()},this)},getSelection:function(){return this._getCursorsWithSelection().map(function(a){return a.getSelection()})},setSelection:function(a){this.suspendUpdates();this.clearSelection();a.forEach(function(a,b){(0===b?this._cursor:this._getCursor(this._addCursor(1,1))).setSelection(a)},this);this.activateUpdates();this.onUpdate()},getSelectionLineColumn:function(){return this._getCursorsWithSelection().map(function(a){return a.getSelectionLineColumn()})},
movePosition:function(a,b,c){this.suspendUpdates();this._forEachCursor(f.hitch(this,function(d){this._disallowCursorMovement(a,d)||d.movePosition(a,b,c)}));this.activateUpdates();this.onUpdate()},onUpdate:function(a,b){1<this.getCursors().length&&this._mergeCursors();a&&this.scrollIntoView();b&&this.getCursors().forEach(function(a){a.onChange()})},setCursorToEvent:function(a){this.suspendUpdates();this.clearSelection();this._cursor.setCursorToEvent(a);this.activateUpdates();this.onUpdate()},clearSelection:function(){this.suspendUpdates();
this._removeExtraCursors();this._cursor.collapseSelection();this.activateUpdates();this.onUpdate()},selectAll:function(){this.suspendUpdates();this._removeExtraCursors();this._cursor.selectAll();this.activateUpdates();this.onUpdate()},positionsAreValid:function(){return this.getCursors().every(function(a){return a.position.isValid()})},show:function(a,b){this._hidden&&(this._hidden=!1,this.suspendUpdates(),this._forEachCursor(function(c){c.show(a,b)}),this.activateUpdates(),this.onUpdate())},hide:function(){this._hidden||
(this._hidden=!0,this.suspendUpdates(),this._forEachCursor(function(a){a.hide()}),this.activateUpdates(),this.onUpdate())},isPositionInSelectionRange:function(a){return this.getCursors().some(function(b){return b.isPositionInSelectionRange(a)})},getScrollIntoViewPosition:function(){return this._cursor.position},suspendUpdates:function(){this._suspended++;this._forEachCursor(function(a){a.suspendChangeEvent()})},activateUpdates:function(){this._suspended--;0<this._suspended||this._forEachCursor(function(a){a.activateChangeEvent()})},
_ensureCorrectNumberOfCursorsAvailable:function(a){var b=this._getCursorIDs(),c=a-b.length;if(0<c)for(a=0;a<c;a+=1)this._addCursor(1,1);else 0>c&&b.slice(a).forEach(function(a){this._removeCursor(a)},this)},_getRemovableCursorIDs:function(a){a=a||this._getCursorIDs();-1<a.indexOf("0")&&a.splice(a.indexOf("0"),1);return a},_getCursor:function(a){return this._cursors[a]},_getCursorsWithSelection:function(){return this.getCursors().filter(function(a){return a.hasSelection()})},_disallowCursorMovement:function(a,
b){var c=1<this._getCursorIDs().length,d=b.getLineColumn(),e=1===d.column,k=a===this.LEFT||a===this.WORD_LEFT,f=this._internalDocument.getLineNode(d.line-1).maxOffset()+1,d=d.column===f,f=a===this.RIGHT||a===this.WORD_RIGHT;return c&&(e&&k||d&&f)},_getCursorIDs:function(){return Object.keys(this._cursors)},_initializeOriginalCursor:function(){var a=this._getNextCursorID();this._cursors[a]=this._cursor;this._addListeners(this._cursor,a)},_addCursor:function(a,b){var c=this._getNextCursorID(),d=this._createCursorAtLineColumn(a,
b);this._cursors[c]=d;this._addListeners(d,c);if(0===this._suspended)this.onUpdate();return c},_removeCursor:function(a){if(!this._cursors[a])return!1;this._cursorListeners[a].forEach(function(a){a.remove()},this);delete this._cursorListeners[a];this._cursors[a]!==this._cursor&&this._cursors[a].destroy();delete this._cursors[a];if(0===this._suspended)this.onUpdate();return!0},_removeExtraCursors:function(){1!==this._getCursorIDs().length&&(this.suspendUpdates(),this._getRemovableCursorIDs().forEach(f.hitch(this,
"_removeCursor")),this.activateUpdates(),this.onUpdate())},_addListeners:function(a,b){this._cursorListeners[b]=[g.after(a,"onUpdate",f.hitch(this,function(){if(0===this._suspended)this.onUpdate()}))]},_createCursorAtLineColumn:function(a,b){var d=new c(this._internalDocument,this._view,this._fileEndSelectable);0!==this._suspended&&d.suspendChangeEvent();d.setLineColumn(a,b);return d},_forEachCursor:function(a){this.getCursors().forEach(a)},_getNextCursorID:function(){return this._cursorID++},_initializeController:function(){this._cursors=
{};this._cursorListeners={};this._cursorID=0},_mergeCursors:function(){this.suspendUpdates();var a=this._getCursorsToMerge().reduce(f.hitch(this,function(a,b){return this._mergeCursorSet(b)||a}),!1);this.activateUpdates();if(a)this.onUpdate()},_getCursorsToMerge:function(){var a=[];this._getCursorIDs().forEach(function(b){var c=this._getCursor(b),d=this._getLineColPair(c),e=c.isFileEndSelected();a.some(function(a){if(this._cursorMergeableWithSet(d,a))return a.push({id:b,lineColPair:d,fileEndSelected:e}),
!0},this)||a.push([{id:b,lineColPair:d,fileEndSelected:e}])},this);return a},_cursorMergeableWithSet:function(a,b){return b.some(function(b){return this._lineColInRange(a.start,b.lineColPair)||this._lineColInRange(b.lineColPair.start,a)||this._lineColInRange(a.end,b.lineColPair)||this._lineColInRange(b.lineColPair.end,a)},this)},_lineColInRange:function(a,b){var c=a.line,d=a.column,e=b.start.line,k=b.start.column,f=b.end.line,g=b.end.column,h=(c<f||c===f&&d<=g)&&(c>e||c===e&&d>=k);return c===e&&d===
k||c===f&&d===g||c>e&&c<f||h},_mergeCursorSet:function(a){if(1===a.length)return!1;var b=this._getRangeFromCursors(a),c=this._getMergedCursorFromCursorIDs(a.map(function(a){return a.id}));if(b.start.line===b.end.line&&b.start.column===b.end.column)c.setLineColumn(b.start.line,b.start.column);else{var d=this._internalDocument.getPositionForLineColumn(b.start.line,b.start.column),b=this._internalDocument.getPositionForLineColumn(b.end.line,b.end.column);a=new k(d,b,!1,this._isFileEndSelectedInCursorSet(a));
c.setSelection(a)}return!0},_getRangeFromCursors:function(a){var b={line:Number.POSITIVE_INFINITY,column:Number.POSITIVE_INFINITY},c={line:Number.NEGATIVE_INFINITY,column:Number.NEGATIVE_INFINITY},d;a.forEach(function(a){d=a.lineColPair;if(d.start.line<b.line||d.start.line===b.line&&d.start.column<b.column)b=d.start;if(d.end.line>c.line||d.end.line===c.line&&d.end.column>c.column)c=d.end});return{start:b,end:c}},_getMergedCursorFromCursorIDs:function(a){var b;0>a.indexOf("0")?b=this._getCursor(this._addCursor(1,
1)):(this._cursor.releaseAnchor(),b=this._cursor);this._getRemovableCursorIDs(a).forEach(f.hitch(this,"_removeCursor"));return b},_isFileEndSelectedInCursorSet:function(a){return a.some(function(a){return a.fileEndSelected})},_getLineColPair:function(a){if(a.hasSelection())return this._normalizeSelection(a.getSelectionLineColumn());a=a.getLineColumn();return{start:a,end:a}},_normalizeSelection:function(a){return a.start.line<a.end.line?a:a.start.line>a.end.line||a.start.column>a.end.column?{start:a.end,
end:a.start}:a},startDragAction:function(){var a=this._startNewAction();f.mixin(a,{onUp:f.hitch(this,function(b){if(!a.isFulfilled()&&(this.hasSelection()||this._cursor._fileEndSelected)&&b&&this.isPositionInSelectionRange(b))this._removeExtraCursors(),this._cursor.releaseAnchor(),this._cursor._setPosition(b),this._cursor.onUpdate()})});return a},startSelectionAction:function(a,b,c){this._removeExtraCursors();var d=this._startNewAction();f.mixin(d,{onMove:f.hitch(this,function(a,b,c){d.isFulfilled()||
(this._cursor._modifyPositionBasedOnMoveEvent(a,b,c),this._cursor.onUpdate())})});d.promise.always(f.hitch(this,function(){this._releaseAnchorIfNoSelection();this._stopAutoScroll()}));this._cursor._modifyPositionBasedOnDownEvent(a,b,c);this._cursor.onUpdate();return d},startBlockSelectionAction:function(b,c,d,e){if(!this._columnSelectionEnabled)return this.startSelectionAction(b,c,d);this._removeExtraCursors();var k=this._startNewAction(),g=b.getLineColumn().line;f.mixin(k,{onMove:f.hitch(this,function(b,
c,d,f){if(!k.isFulfilled()){this.suspendUpdates();this._removeExtraCursors();c=b.getLineColumn().line;b=Math.min(c,g);c=Math.max(c,g);for(d=b;d<=c;d+=1)if(a.isCodeContainer(this._internalDocument.getLineNode(d-1))){var l=this._view.getCoordinateForLineColumn(d,1).y,m=this._view.getPositionFromCoordinate({x:e,y:l}).getLineColumn().column,l=this._view.getPositionFromCoordinate({x:f,y:l}).getLineColumn().column,h;d===b?(this._cursor.releaseAnchor(),h=this._cursor):h=this._getCursor(this._addCursor(1,
1));m===l?h.setLineColumn(d,m):h.setSelectionLineColumn(d,m,d,l)}this.activateUpdates();this.onUpdate()}})});k.promise.always(f.hitch(this,function(){this._stopAutoScroll();this.onUpdate()}));this._cursor._modifyPositionBasedOnDownEvent(b,!1,d);this.onUpdate();return k},startGroupedSelectionAction:function(a,b,c,d){this.clearSelection();return this._cursor.startGroupedSelectionAction(a,b,c,d)},startSecondarySelectionAction:function(a,b,c){1<this._getCursorIDs().length&&!this.isPositionInSelectionRange(a)&&
this.clearSelection();return 1===this._getCursorIDs().length?this._cursor.startSecondarySelectionAction(a,b,c):this._startNewAction()},_startNewAction:function(){var a=new e;this._setCurrentAction(a);return a},_stopAutoScroll:function(){this._forEachCursor(function(a){a._stopAutoScroll()})},_releaseAnchorIfNoSelection:function(){this._forEachCursor(function(a){a.hasAnchor()&&a.position.isEqualTo(a.anchor)&&!a._fileEndSelected&&a.releaseAnchor()})},_setCurrentAction:function(a){this._clearCurrentAction();
this._currentAction=a;this._currentAction.promise.always(f.hitch(this,function(){this._currentAction=null}))},_clearCurrentAction:function(){this._currentAction&&!this._currentAction.isFulfilled()&&this._currentAction.cancel()}})})},"MW/rtc/cursor/CursorUtilities":function(){define([],function(){return{cursorSortFunc:function(h,f){return this._firstCursorBeforeSecond(h,f)?-1:this._firstCursorBeforeSecond(f,h)?1:0},_firstCursorBeforeSecond:function(h,f){var g=h.getLineColumn(),e=f.getLineColumn();
return g.line<e.line?!0:g.line>e.line?!1:g.column<e.column?!0:!1}}})},"MW/rtc/datamodel/DefaultBackingStoreProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/datamodel/InMemoryBackingStore","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/datamodel/InMemoryBackingStore":function(){define(["dojo/_base/declare",
"MW/rtc/datamodel/BackingStore","mw-utils/Utils"],function(h,f,g){return h(f,{constructor:function(){this.uniqueId=g.generateUuid()},getUniqueId:function(){return this.uniqueId}})})},"MW/rtc/datamodel/BackingStore":function(){define(["dojo/_base/declare"],function(h){return h(null,{getStorageData:function(){return""},getUniqueId:function(){throw Error("Unimplemented API: MW.rtc.datamodel.AbstractBackingStore.getUniqueId");}})})},"MW/rtc/execution/ExecutionServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/execution/MatlabExecutionDataService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){}})})},"MW/rtc/execution/MatlabExecutionDataService":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-messageservice/MessageService"],function(h,f,g,e){return h([],{constructor:function(d){this._messageService=d||e;this.streamingEval=!1},authoringEval:function(d){this._messageService.publish("/editor/executionservice/authoringEval",
d)},executionEval:function(d){this._messageService.publish("/editor/executionservice/executionEval",d)},isMessageServiceRunning:function(){return this._messageService.isRunning()}})})},"MW/rtc/model/DocumentActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/DocumentActions"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.actionservice","rtc.keyhandler"]}},
createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/model/DocumentActions":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentConstants"],function(h,f,g){return h(null,{constructor:function(e,d,c){d.loadActions(this._getActions(e));c.addBindings(this._getAdditionalKeyBindings())},_getActions:function(e){return[{id:"rtc_insert_break",enabled:!0,key:"enter",callback:f.hitch(e,"insertBreak")},{id:"rtc_tab",enabled:!0,key:"tab",callback:f.hitch(e,"insertTab")},
{id:"rtc_delete_backward",enabled:!0,key:"backspace",callback:f.hitch(e,"deleteTextAtCurrentPosition",g.BACKWARD_DELETE)},{id:"rtc_delete_forward",enabled:!0,key:"delete",callback:f.hitch(e,"deleteTextAtCurrentPosition",g.FORWARD_DELETE)},{id:"rtc_delete_previous_word",enabled:!0,key:"ctrl_backspace",platformKey:{mac:"alt_backspace"},callback:f.hitch(e,"deleteWord",-1)},{id:"rtc_delete_next_word",enabled:!0,key:"ctrl_delete",platformKey:{mac:"alt_delete"},callback:f.hitch(e,"deleteWord",1)}]},_getAdditionalKeyBindings:function(){return[{key:"shift_backspace",
action:"rtc_delete_backward"},{key:"shift_enter",action:"rtc_insert_break"}]}})})},"MW/rtc/model/DocumentProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/Document"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.cursorcontroller rtc.internaldocument rtc.undoredo.editblock rtc.textnodeservice rtc.code.codetextservice rtc.linenumberservice".split(" ")}},createInstance:function(e,
d,c,b,a,k){return new g(e,d,c,b,a,k)}})})},"MW/rtc/model/Document":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/ActivePosition MW/rtc/model/CodeUtilities MW/rtc/model/CodeTextGeneratorVisitor MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/PositionUtilities MW/rtc/model/Range MW/rtc/model/RangeUtilities MW/rtc/model/SelectionUtilities MW/rtc/model/TreeWalker MW/rtc/model/events/DocumentEvent MW/rtc/model/events/InsertTextEvent MW/rtc/model/events/ReadOnlyChangeEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/undoredo/EditBlockConstants".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D){return h(c,{constructor:function(a,c,d,k,f,l){this._cursorController=a;this._internalDocument=c;this._editBlockController=d;this._textNodeService=k;this._codeTextService=f;this._lineNumberService=l;this._positions=b.createSet();this.own(e.after(this._internalDocument,"onNodeChange",r.updatePositions,!0));this.own(e.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChanged"),!0))},onChange:function(){},onPreInsertText:function(a){},
_handleDocumentChanged:function(a){this._updatePositionsAndEmitChangeEvents();r.firePendingEvents();this._emitTranslatedDocumentChangeEvents(a)},_updatePositionsAndEmitChangeEvents:function(){this._positions.forEach(function(a){a.updateLineColumn()},this)},_emitTranslatedDocumentChangeEvents:function(a){a=a||[];var b=[],c=q.toLengthChangeEvent(a);null!==c&&b.push(c);c=q.getEventsOfType(a,m.READONLY_STATE_CHANGE_EVENT);b=b.concat(c);a=q.lineRangeFromEvents(a);b.push(w.create(a.startLine,a.endLine));
this.onChange(b)},_emitOnChange:function(a){this._internalDocument.emitDocumentEvents(a)},startBlockEdit:function(a){this._cursorController.suspendUpdates();a=this.startEdit(a);this._internalDocument.startBlockEdit(a);return a},endBlockEdit:function(a){this.endEdit();this._internalDocument.endBlockEdit(a);this._cursorController.activateUpdates()},startEdit:function(a){return this._editBlockController.startEdit(a)},endEdit:function(){this._editBlockController.endEdit()},undoable:function(a,b){try{return a(this.startEdit(b))}finally{this.endEdit()}},
insertText:function(a,b,c){if(this._documentAndLineReadOnly(b))return!1;this._cursorController.holdCursors();a=this._insertTextRespectingReplacement(a,b,c,!1);this._cursorController.resetCursors();return a},insertTextAtCurrentPosition:function(a){if(this._documentAndCursorReadOnly())return!1;var b=this.startBlockEdit(D.TYPING_TEXT),c=!1;this._cursorController.getCursors().forEach(function(b){var d=this._deleteSelectionBeforeInsertText(b),e=b.getLineColumn(),k=b.getCursorAsLiveRange();c=this._insertTextRespectingReplacement(a,
e.line,e.column,d)||c;b.setCursorToRange(k);k.destroy()},this);this._cursorController.onUpdate(!0,!0);this.endBlockEdit(b);return c},insertBreak:function(){var a=this.startBlockEdit(),b=!1;this._cursorController.getCursors().forEach(function(c){if(c=this._insertBreak(c)){a.appendRedoEvents([A.create(c.startLine,c.endLine)]);a.appendUndoEvents([A.create(c.startLine,c.endLine)]);var d=c?[].concat(c):null;this._emitOnChange(d)}b=b||!!c},this);this.endBlockEdit(a);this._cursorController.onUpdate();return b},
insertBreakAt:function(a,b){this._cursorController.holdCursors();this._cursorController.setTemporaryLineColumn(a,b,!0);var c=this.insertBreak();this._cursorController.resetCursors();return c},insertTab:function(){this.insertTextAtCurrentPosition(n.DEFAULT_TAB_STRING);return!0},insertContent:function(a,b,c){if(this.isReadOnly())return!1;var d=this.startEdit();a=this._internalDocument.insertContent(a,b);a.newPosition&&(c.setPosition(a.newPosition),c.onUpdate(!1,!0));c=a.event;if(0===c.length)return this.endEdit(),
!1;d.appendRedoEvents(c);d.appendUndoEvents(q.translateEventsForUndo(c));this.endEdit();this._emitOnChange(c);return!0},insertContentAtCurrentPosition:function(a){if(0===a.length)return!1;var b=this.startBlockEdit(),c=!1,d=this._cursorController.getCursors(!0);1===d.length||1===a.length?d.forEach(function(b){this._deleteSelectionBeforeInsertText(b);c=this.insertContent(a,b.position,b)||c},this):d.length<=a.length?d.forEach(function(b,d){this._deleteSelectionBeforeInsertText(b);c=this.insertContent([a[d]],
b.position,b)||c},this):a.forEach(function(a,b){this._deleteSelectionBeforeInsertText(d[b]);c=this.insertContent([a],d[b].position,d[b])||c},this);this.endBlockEdit(b);this._cursorController.onUpdate();return c},_insertBreak:function(a){if(a.hasSelection()&&!1===this._deleteText(null,a))return!1;var b,c=null;b=a.position;var d=a.getNode(),e=d.rootContainer(),k=n.isAtStartOfContainer(b,e),f=n.isAtEndOfContainer(b,e),g="\n"===e.CHILD_TEXT_SEPARATOR;if((k||f)&&!g&&!e.isEmpty()){e=this._internalDocument.cloneNodeWithoutChildren(e);
g=this._textNodeService.createTextNodeForContainer("",e);d=d.getStyleAttributes();this._internalDocument.changeNodeAttributes(g,d);e.addChild(g);b=this._internalDocument.insertAtPosition(e,b);if(b.insertionNotAllowed)return!1;f?c=b.insertedRange.getStartPosition():k&&(c=b.insertedRange.getEndPosition());b=b.events[0]}else{c=a.getNode();k=a.getOffset();d.isTextNode()||(c=this._textNodeService.createTextNodeForPosition("",b),b=this._internalDocument.insertAtPosition(c,b),b=b.insertedRange.getEndPosition(),
c=b.getNode(),k=b.getOffset());b=this._internalDocument.insertBreakInTextNode(c,k);if(!b||!b.newNode)return!1;c=b.newNode.startPosition();b=b.event}c&&a.setPosition(c);a.onUpdate(!1,!0);return b},_insertText:function(a,b,c){var d=this.onPreInsertText(a);return d||0<=a.search(n.NewLineRegex)?this._insertMultilineText(a,b,d):this._insertPlainText(a,b,c)},_insertTextRespectingReplacement:function(a,b,c,d){var e=this.startEdit();b=this._internalDocument.getPositionForLineColumn(b,c);a=this._insertText(a,
b,d);if(!a)return this.endEdit(),!1;e.appendUndoEvents(a.event);e.appendRedoEvents(a.event);this.endEdit();this._emitOnChange(a.event);return!0},_insertMultilineText:function(a,b,c){var d={};c||(c=n.textToContent(a,b.getNode()));a=this._internalDocument.insertContent(c,b);d.newPosition=a.newPosition;d.event=a.event?[].concat(a.event):null;return d},_insertPlainText:function(a,b,c){var d={};a=this._textNodeService.createTextNodeForPosition(a,b);b=c?this._internalDocument.insertDuringReplace(a,b):this._internalDocument.insertAtPosition(a,
b);if(b.insertionNotAllowed)return!1;d.newPosition=b.insertedRange.getEndPosition();d.event=b.events;return d},deleteText:function(a,b,c,d){n.checkOneDirectionalSelection(a,b,c,d);this._cursorController.holdCursors();this._cursorController.setTemporarySelectionLineColumn(a,b,c,d);this.deleteTextAtCurrentPosition();this._cursorController.resetCursors()},deleteTextAtCurrentPosition:function(a){var b=this.startBlockEdit(),c=!1;this._cursorController.getCursors().forEach(function(b){(b=this._deleteText(a,
b))&&this._emitOnChange([].concat(b));c=c||!!b},this);this.endBlockEdit(b);this._cursorController.onUpdate();return c},onDirectedDeletion:function(a,b){},onPreDeletion:function(a){},deleteWord:function(a){if(this._documentAndCursorReadOnly())return!0;this._cursorController.suspendUpdates();this._cursorController.getCursors().forEach(function(b){0<a?b.movePosition(b.WORD_RIGHT,!0):b.movePosition(b.WORD_LEFT,!0)},this);this.deleteTextAtCurrentPosition(a);this._cursorController.activateUpdates()},_deleteText:function(a,
b){if(this.onPreDeletion(a)||!this.prepareCursorSelectionForEditing(b))return!1;var c=this.startEdit(),d=b.selectionInfo(),e=g.mixin({},d),k,f,l,m,h;if(!b.hasSelection()){if(b.getNode().isReadOnly()||!a)return this.endEdit(),!1;l=b.charAtCursor(a);if(0>a){k=b.getNode().movePositionLeft(b.position);if(!k)return this.endEdit(),!1;f=k}else if(f=b.position,k=b.getNode().movePositionRight(b.position),!k)return this.endEdit(),!1;if(k.getNode().isReadOnly()||d.startPos===k.getOffset()&&d.startNode===k.getNode())return this.endEdit(),
!1;d.isReversed=1===a;1===a?(d.endNode=k.getNode(),d.endPos=k.getOffset()):(d.startNode=k.getNode(),d.startPos=k.getOffset());d.isLocal=d.startNode===d.endNode;d.isNull=!1;b.adjustSelection(d)}if(this.onDirectedDeletion(a,d))this.endEdit();else{d.isLocal&&(n.isEdgeOfTextLevelContainer(d.startNode,d.startPos)&&n.isEdgeOfTextLevelContainer(d.endNode,d.endPos))&&!n.isTextLevelContainer(d.startNode)&&(d.startNode=d.startNode.parent,d.endNode=d.endNode.parent,d.endPos=d.endNode.maxOffset(),d.isLocal=!1);
b.hasSelection()&&(l=b.selectedText(),b.internalCollapseSelection(b.LEFT),f=b.position,m=this.createPosition(d.startNode,d.startPos),h=this.createPosition(d.endNode,d.endPos,!0));k=f.getLineColumn();c.setType(e.isNull?l?0>a?D.BACKSPACE:D.DELETE:"":D.DELETE_SELECTION);f=this._internalDocument.deleteSelection(d);m&&(this.deletePosition(m),this.deletePosition(h));b.setLineColumn(k.line,k.column,!0);if(!(d.startNode===b.getNode()&&d.startPos===b.getOffset())||0>a)b.onUpdate(!1,!0);c.appendRedoEvents([f]);
c.appendUndoEvents([x.create(f.startLine,f.endLine,e.startPosition,l)]);this.endEdit();return f}},replaceText:function(a,b,c,d,e){n.checkOneDirectionalSelection(b,c,d,e);if(!this.isReadOnly()){this._cursorController.holdCursors();var k=this.startBlockEdit();this.deleteText(b,c,d,e);this.insertText(a,b,c);this.endBlockEdit(k);this._cursorController.resetCursors()}},_deleteSelectionBeforeInsertText:function(a){if(a.hasSelection()){a=this._deleteText(null,a);if(!a)return!1;this._emitOnChange([a]);return!0}return!1},
getEndOfDocumentLineColumn:function(){var a=this.getLinePropertiesArray();return{line:a.length,column:a[a.length-1].content.length+1}},getLinePropertiesArray:function(){var a=this.getNumberOfLines(),b=[],c;for(c=0;c<a;c+=1){var d=this._internalDocument.getLineNode(c),d={content:d.getText(),readOnly:this.isReadOnly()||d.isReadOnly()};b.push(d)}return b},getLineText:function(a){n.checkLineExists(this._internalDocument,a);return(a=this._internalDocument.getLineNode(a-1))?a.getText():""},getLineLength:function(a){return this.getLineText(a).length},
getNumberOfLines:function(){return this._internalDocument.getMaxLineNumber()},getState:function(){return this._internalDocument.getState()},getText:function(){var a=this._internalDocument.root;return a&&a.getText?a.getText():""},getTextCharacters:function(a,b,c){d.assert(0<=a,"lineNumber should be a positive integer");d.assert(0<=b,"startColumn should be a positive integer");d.assert(0<c,"length should be a positive integer");a=this.getLineText(a+1);var e="";a&&b+c<=a.length&&(e=a.substr(b,c));return e},
isReadOnly:function(){return this._internalDocument.isReadOnly()},getCodeText:function(){return this._codeTextService.getCodeText()},getCodeTextForRange:function(a){var b=new l;(new v(b)).traverseRange(a);return b.getText()},isLineCode:function(a){a=this._internalDocument.getLineNode(a-1);return k.isCodeContainer(a)},_documentAndCursorReadOnly:function(){return this.isReadOnly()||this._cursorController.areCursorsReadOnly()},_documentAndLineReadOnly:function(a){a=this._internalDocument.getLineNode(a-
1).isReadOnly();return this._internalDocument.isReadOnly()||a},prepareCursorSelectionForEditing:function(a){if(this.isReadOnly())return!1;if(!a.hasSelection())return!a.isCursorReadOnly();var b=a.getSelection();if(!t.isRangeReadOnly(b))return!0;b=u.trimTrailingLineBreak(b);if(t.isRangeReadOnly(b))return!1;a.setSelection(b);return!0},setReadOnly:function(a){this.isReadOnly()!==a&&(this._internalDocument.setReadOnly(a),this._cursorController.onUpdate())},setReadOnlyLine:function(a,b){n.checkLineExists(this._internalDocument,
a);this._internalDocument.setReadOnlyLine(a-1,b)&&this._emitOnChange([B.create(a-1,a-1)])},setReadOnlyLines:function(a){var b=this.startBlockEdit(D.AUTO);a.forEach(function(a){this.setReadOnlyLine(a,!0)},this);this.endBlockEdit(b)},setText:function(a){this._internalDocument.isReadOnly()||(this._internalDocument.openTextDocument(a,!1),this._cursorController.reinitializeCursors(),a=this._internalDocument.getMaxLineNumber()-1,this._internalDocument.emitDocumentEvents([w.create(0,a)]))},createPosition:function(b,
c,d){b=new a(b,c,d,this._lineNumberService);this._configurePosition(b);return b},_configurePosition:function(a){this._positions.add(a);var b=e.after(a,"destroy",function(){this._positions.delete(a);b.remove()}.bind(this))},deletePosition:function(a){a.destroy()},createPositionAtLineColumn:function(a,b,c){var d=this._internalDocument.getLineNode(a);n.assert(d,"Line "+a+" does not exist.");d=d.getPositionFromOffset(b);n.assert(d,"Offset "+b+" does not exist in line "+a+".");return this.createPosition(d.getNode(),
d.getOffset(),c)},createLinePosition:function(b,c){var d=b.rootContainer(),d=new a(d,0,c,this._lineNumberService);d.setIgnoreOffset();this._configurePosition(d);return d},getPositionsInNodeRange:function(a,b){return p.getParagraphNodesInRange(a,b).map(function(a){return this.createLinePosition(a,!1)},this)},createLinePositionInLine:function(a,b){var c=this._internalDocument.getLineNode(a);n.assert(c,"Line "+a+" does not exist.");return this.createLinePosition(c,b)}})})},"MW/rtc/model/ActivePosition":function(){define(["dojo/_base/declare",
"MW/rtc/model/Position"],function(h,f){return h(f,{constructor:function(f,e,d,c){this._lineLookupService=c;this.setLive(!0);this.updateLineColumn()},_getLine:function(f){return this._lineLookupService.getLineNumber(f)},setPosition:function(f,e){this.inherited(arguments);this.updateLineColumn()},updateLineColumn:function(){var f=this.getLineColumn(),e=f.line-1!==this.line,d=f.column-1!==this.column;if(e||d)this.line=f.line-1,this.column=f.column-1,this.onChange({lineHasChanged:e,columnHasChanged:d})}})})},
"MW/rtc/model/CodeTextGeneratorVisitor":function(){define(["dojo/_base/declare","MW/rtc/model/io/PlainTextGeneratorVisitor"],function(h,f){return h(f,{visitLeafNode:function(f,e,d){this._text+=f.getCodeText().slice(e,d)}})})},"MW/rtc/model/io/PlainTextGeneratorVisitor":function(){define(["dojo/_base/declare","MW/rtc/model/io/NodeVisitorInterface"],function(h,f){return h(f,{constructor:function(){this._text=""},traverseSibling:function(f){f.parent&&f.parent.CHILD_TEXT_SEPARATOR&&(this._text+=f.parent.CHILD_TEXT_SEPARATOR)},
visitLeafNode:function(f,e,d){this._text+=f.getPlainText(e,d)},getText:function(){return this._text}})})},"MW/rtc/model/io/NodeVisitorInterface":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){},enterInnerNode:function(f){},traverseSibling:function(f){},leaveInnerNode:function(f){},visitLeafNode:function(f,g,e){}})})},"MW/rtc/model/TreeWalker":function(){define(["dojo/_base/declare","MW/rtc/model/NodeUtilities","MW/rtc/model/RangeUtilities","MW/rtc/nodes/InnerNode",
"MW/rtc/nodes/LeafNode"],function(h,f,g,e,d){return h(null,{constructor:function(c){this._visitor=c;this._enteredNodes=this._commonAncestors=this._range=null},traverseRange:function(c){this._range=c;this._buildCommonAncestors();this._doTreeWalk()},_buildCommonAncestors:function(){this._commonAncestors=f.getCommonAncestors(this._range.getStartPosition().getNode(),this._range.getEndPosition().getNode());g.rangeIsInsideOneTextContainer(this._range)||(this._commonAncestors=this._commonAncestors.slice(0,
1))},_doTreeWalk:function(){var c=this._range.getStartPosition().getNode();this._enteredNodes=[];for(this._enterAncestors(c);c;){this._enterNode(c);if(c===this._range.getEndPosition().getNode()){this._leaveRemainingNodes();break}if(c.firstChild&&c.firstChild())c=c.firstChild();else{for(;!c.nextSibling()&&!c.isRootNode();)this._leaveNode(c),c=c.parent;this._leaveNode(c);(c=c.nextSibling())&&this._visitor.traverseSibling(c)}}},_enterAncestors:function(c){if((c=c.parent)&&0>this._commonAncestors.indexOf(c))this._enterAncestors(c),
this._enterNode(c)},_leaveRemainingNodes:function(){for(;0<this._enteredNodes.length;)this._leaveNode(this._enteredNodes[0])},_enterNode:function(c){if(c.isInstanceOf(e))this._enteredNodes.unshift(c),this._visitor.enterInnerNode(c);else if(c.isInstanceOf(d)){var b=0,a,k=!1;c===this._range.getStartPosition().getNode()&&(k=!0,b=this._range.getStartPosition().getOffset());c===this._range.getEndPosition().getNode()?(k=!0,a=this._range.getEndPosition().getOffset()):a=c.maxOffset();(!k||b!==a)&&this._visitor.visitLeafNode(c,
b,a)}},_leaveNode:function(c){c.isInstanceOf(e)&&(this._enteredNodes.shift(),this._visitor.leaveInnerNode(c))}})})},"MW/rtc/nodes/LeafNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/Node"],function(h,f){return h(f,{constructor:function(){},className:"LeafNode",text:"",getText:function(){return this.text},getCodeText:function(){return""},getPlainText:function(f,e){return this.getText().slice(f,e)},getTextForPositioning:function(){return this.text},isTextNode:function(){return!0},canHaveCursorAtStart:function(){for(var f=
this;f&&!f.isTextContainerNode();)f=f.parent;return f.startNode()===this},maxOffset:function(){return 0},isEmpty:function(){return 0===this.maxOffset},startNode:function(){return this},endNode:function(){return this},atParagraphStart:function(){return 0===this.posInNode&&this.textContainer()&&this.textContainer().startNode()===this.node},offsetInContainer:function(f){f=f||this.rootContainer();return f._childOffset(this)},lineBorderOffset:function(f,e){var d;d=0<f?this.maxOffset():0;return this.getPositionFromOffset(d)},
movePositionRight:function(f){f=f.getOffset();if(f<this.maxOffset())return this.getPositionFromOffset(f+1);f=this.nextNode();return!f||!f.canHaveCursorAtStart()&&f.isEmpty()&&(f=f.nextNode(),!f)?null:f.canHaveCursorAtStart()?f.startPosition():f.movePositionRight(f.startPosition())},movePositionLeft:function(f){f=f.getOffset();if(1<f)return this.getPositionFromOffset(f-1);if(1===f)return this.canHaveCursorAtStart()?this.startPosition():(f=this.prevNode())?f=f.getPositionFromOffset(f.maxOffset()):null;
f=this.prevNode();if(!f)return null;var e=f.maxOffset();this.canHaveCursorAtStart()||(e-=1);return f=f.getPositionFromOffset(e)},isSplittable:function(f){return!1}})})},"MW/rtc/model/events/DocumentEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentEventUtilities","./DocumentEventBase"],function(h,f,g){return{create:function(e,d){f.assertValidLines(e,d,"DocumentEvent");return new g(e,d)}}})},"MW/rtc/model/events/InsertTextEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants",
"MW/rtc/model/DocumentEventUtilities","./DeletionEvent","./UndoableEvent"],function(h,f,g,e,d){var c=h(d,{constructor:function(b,a,c,d){this.type=f.INSERT_TEXT;this.position=c;this.length=(this.text=d)?d.length:0},destroy:function(){},getUndoEvent:function(){return e.create(this.startLine,this.endLine,this.position.getLineColumn().column)}});return{create:function(b,a,d,e){g.assertValidLines(b,a,f.INSERT_TEXT);return new c(b,a,d,e)}}})},"MW/rtc/model/events/DeletionEvent":function(){define(["dojo/_base/declare",
"MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities","./DocumentEventBase"],function(h,f,g,e){var d=h(e,{constructor:function(c,b,a){this.type=f.DELETION_EVENT;this.endColumn=a},destroy:function(){}});return{create:function(c,b,a){g.assertValidLines(c,b,f.DELETION_EVENT);return new d(c,b,a)}}})},"MW/rtc/model/events/ReadOnlyChangeEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities","./DocumentEventBase"],function(h,
f,g,e){var d=h(e,{constructor:function(c,b){this.type=f.READONLY_STATE_CHANGE_EVENT;this.startLine=c;this.endLine=b},destroy:function(){}});return{create:function(c,b){g.assertValidLines(c,b,f.READONLY_STATE_CHANGE_EVENT);return new d(c,b)}}})},"MW/rtc/model/events/NumberOfLinesChangedEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities","./DocumentEventBase"],function(h,f,g,e){var d=h(e,{constructor:function(c,b){this.type=f.NUMBER_OF_LINES_CHANGED},
destroy:function(){}});return{create:function(c,b){g.assertValidLines(c,b,f.NUMBER_OF_LINES_CHANGED);return new d(c,b)}}})},"MW/rtc/plugins/undoredo/EditBlockConstants":function(){define([],function(){return{TYPING_TEXT:"TypingText",INDENT:"Indent",UNINDENT:"Unindent",DELETE:"ForwardDelete",BACKSPACE:"Backspace",DELETE_SELECTION:"DeleteSelection",AUTO:"_Auto"}})},"MW/rtc/model/InternalDocumentProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/InternalDocument"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.undoredo.editblock","rtc.textnodeservice","rtc.insertionruleservice","rtc.nodes.contentconverter"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)}})})},"MW/rtc/model/InternalDocument":function(){define("dojo/_base/declare dojo/_base/lang dojo/json mw-log/Log MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/model/events/InsertTextEvent MW/rtc/model/events/nodechange/DeleteNodeEvent MW/rtc/model/events/nodechange/DeleteTextNodeEvent MW/rtc/model/events/nodechange/InsertNodeEvent MW/rtc/model/events/nodechange/InsertTextNodeEvent MW/rtc/model/events/nodechange/MergeNodeEvent MW/rtc/model/events/nodechange/SplitNodeEvent MW/rtc/model/events/nodechange/UpdateAttributesNodeEvent MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/Range MW/rtc/model/RangeUtilities MW/rtc/nodes/InnerNode MW/rtc/nodes/OpaqueNode MW/rtc/nodes/inner/RootNode MW/rtc/nodes/inner/LineNode MW/rtc/plugins/undoredo/commands/InsertChildrenCommand MW/rtc/plugins/undoredo/commands/NodeChangeEventCommand MW/rtc/plugins/undoredo/commands/RemoveChildrenCommand MW/rtc/plugins/undoredo/commands/ReplaceTextCommand MW/rtc/plugins/undoredo/commands/UpdateAttributesCommand".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I){return h(null,{MAX_NODE_TEXT_LENGTH:1E4,constructor:function(a,b,c,d){this._editBlockController=a;this._textNodeService=b;this._insertionRuleService=c;this._contentConverter=d;this.root=new L([]);this._documentState=0;this._blockEditsStack=[];this._pendingDocumentEvents=[];this.registerFormatTemplates([{name:"code",method:function(){var a={};a.container=new N([]);return a}}])},onPreDocumentChanged:function(a){},onDocumentChanged:function(a){k.assertValidEventPayload(a);
this._documentState+=1},insertAtPosition:function(a,b){return this._insertAtPositionRespectingReplacement(a,b,!1)},insertDuringReplace:function(a,b){return this._insertAtPositionRespectingReplacement(a,b,!0)},_insertAtPositionRespectingReplacement:function(a,b,c){Array.isArray(a)||(a=[a]);if(0===a.length)throw Error("rtc.model.InternalDocument._insertAtPositionRespectingReplacement: Expected at least one node to insert.");a=this._insertNodesAtPosition(a,b,c);b=[];c=null;a.insertedRange&&(c=this._mergeTextNodesInRange(a.insertedRange),
b=this._buildEventList(c,a.insertedContainerAtEndOfContainer,a.insertedRootContainers,a.containerWasSplit));return{insertionNotAllowed:a.insertionNotAllowed,events:b,insertedRange:c}},_insertNodesAtPosition:function(a,b,c){var d=!1,e=b,k=[],f=null,g=null,l=b=null,m=!1,n=!1;a.forEach(function(b,h){var q=this._insertNodeAtPosition(b,e,c);k=k.concat(q.insertedRootContainers);m=q.insertedContainerAtEndOfContainer;d=d||q.insertionNotAllowed;n=n||q.containerWasSplit;l=q.lastInsertedNode;if(!d){f=f||q.insertedRange.getStartPosition();
q=q.insertedRange.getEndPosition();if(!g||0>B.comparePositions(g,q))g=q;e=(q=a[h+1])&&q.isInstanceOf(F)?g:l.endPosition()}},this);f&&(b=new A(f,g));return{insertionNotAllowed:d,insertedRange:b,insertedRootContainers:k,insertedContainerAtEndOfContainer:m,containerWasSplit:n,lastInsertedNode:l}},_insertNodeAtPosition:function(a,b,c){return this._doesReadOnlyBlockInsertion(b)?{insertedRootContainers:[],insertedRange:null,insertionNotAllowed:!0,lastInsertedNode:null}:(c=this._findInsertionPositionWithinContainer(a,
b,c))?this._insertNodeInCompatiblePosition(a,c):this._insertUsingRule(a,b)},_doesReadOnlyBlockInsertion:function(a){e.assert(!a.getNode().isRootNode(),"This function does not support root");var b=a;for(a=b.getNode();b.isAtEdge()&&!a.isRootContainer();)b=this._createEquivalentPositionInContainer(b,a.parent),a=a.parent;var b=a.isRootContainer()&&b.isAtRightEdge(),c=a.nextSibling();return b&&c&&c.startNode()&&!c.startNode().isReadOnly()?!1:a.isReadOnly()},_findInsertionPositionWithinContainer:function(a,
b,c){var d=b,e=b.getNode();b.getOffset();for(a=this._insertionRuleService.getRulesForNode(a);e;){var k=this._insertionRuleService.getRulesForNode(e);b=a.canInsertInContainer(e);k=k.getReceivingInstruction(d);if(c&&b)return d;var f=this._insertionRuleService.RECEIVING_INSTRUCTION;if(this._insertionRuleService.isInstructionOfType(k,f.CONTINUE_AT_POSITION))d=k.getPosition();else{if(this._insertionRuleService.isInstructionOfType(k,f.INSERT_IF_COMPATIBLE)&&b)return d;if(this._insertionRuleService.isInstructionOfType(k,
f.CONTINUE_UP)||this._insertionRuleService.isInstructionOfType(k,f.INSERT_IF_COMPATIBLE)){if(e.isRootContainer())break;d=this._createEquivalentPositionInContainer(d,e.parent)}else throw Error("rtc.model.InternalDocument._findInsertionPositionWithinContainer: Invalid instruction: "+k.getType());}d.getOffset();e=d.getNode()}return null},_insertNodeInCompatiblePosition:function(a,b){var c=b.getNode().getEquivalentChildPositions(b.getOffset())[0];e.assert(c,"MW.rtc.model.InternalDocument: Expected a valid insertion position");
if(!c.isAtEdge()){e.assert(c.getNode().isSplittable(c.getOffset()),"MW.rtc.model.InternalDocument: Insertion was requested at a non-splittable position");var d=this._splitForInsertion(c).firstPart,c=new x(d,d.maxOffset())}c.isAtLeftEdge()&&!c.isAtRightEdge()?this._insertNodeWithEvent(a,c.getNode(),"before"):this._insertNodeWithEvent(a,c.getNode(),"after");var d=a.startPosition(),k=a.endPosition(),c=c.getNode().parent.CHILD_TEXT_SEPARATOR,f=k.getNode().nextNode();0<c.length&&f&&(k=f.startPosition());
c=a.nextSibling();f=a.previousSibling();c&&(c.isEmpty()&&c.isTextNode())&&this.deleteNode(c,{node:a,offset:a.maxOffset()});f&&(f.isEmpty()&&f.isTextNode())&&this.deleteNode(f,{node:a,offset:0});return{insertedRootContainers:[],insertedRange:new A(d,k),insertionNotAllowed:!1,insertedContainerAtEndOfContainer:!1,lastInsertedNode:a}},_insertUsingRule:function(a,b){var c,d,k,f,g,l,m=[];c=b.getNode().isRootContainer()?b:this._createEquivalentPositionInContainer(b);g=c.getNode();f=g.previousSibling();g=
g.nextSibling();var n=this._findNextBreakablePosition(c);g=this._insertionRuleService.getRulesForNode(a).getTopLevelInsertionInstruction(c,f,g,a,n);var h=n=!1;if(g)if(g.insertInRoot){var q,p=g.insertInRoot.insertionPosition||c;f=g.insertInRoot.containerConstructor?new g.insertInRoot.containerConstructor([a]):a;q=g.insertInRoot.relationToPosition;if(g.insertInRoot.siblingConstructor){var r=new g.insertInRoot.siblingConstructor([]);if(r.isTextContainerNode()){var s=this.createNode(r.defaultTextNode());
r.addChild(s)}}if(q===this._insertionRuleService.RELATION.AFTER){if(g.insertInRoot.siblingConstructor){d=this._insertContainerInRoot(r,c.getNode(),"after");var t=d.getEndPosition(),m=[r];l=r}else l=f;d=this._insertContainerInRoot(f,c.getNode(),"after");n=c.isAtRightEdge();k=!1;m.unshift(f);h=!1}if(q===this._insertionRuleService.RELATION.BEFORE){if(g.insertInRoot.siblingConstructor){d=this._insertContainerInRoot(r,c.getNode(),"before");var u=d.getStartPosition(),m=[r]}d=this._insertContainerInRoot(f,
c.getNode(),"before");m.push(f);h=n=k=!1;l=f}if(q===this._insertionRuleService.RELATION.AT||g.insertInRoot.insertionPosition)c=this._insertRootContainerInCompatiblePosition(f,p),d=c.insertedRange,n=c.insertedContainerAtEndOfContainer,k=c.insertionNotAllowed,m=c.insertedRootContainers,h=c.containerWasSplit,l=f;k?(e.error("MW.rtc.InternalDocument: Insertion not allowed."),l=d=null):(u=u||d.getStartPosition(),t=t||d.getEndPosition(),d=new A(u,t))}else g.insertAlternateNodes&&(c=this._insertNodesAtPosition(g.insertAlternateNodes,
c),m=c.insertedRootContainers,d=c.insertedRange,n=c.insertedContainerAtEndOfContainer,k=!1,l=c.lastInsertedNode);else e.error("MW.rtc.InternalDocument: No insertion instructions found"),m=[],d=null,k=!0,l=null;return{insertedRootContainers:m,insertedRange:d,insertionNotAllowed:k,insertedContainerAtEndOfContainer:n,containerWasSplit:h,lastInsertedNode:l}},_insertRootContainerInCompatiblePosition:function(a,b){var c,d,k=!1;d=b.getOffset();var f=!1;a.children.forEach(this._ensureMaxTextLength,this);
if(b.isAtLeftEdge())d=this._insertContainerInRoot(a,b.getNode(),"before");else if(b.isAtRightEdge())d=this._insertContainerInRoot(a,b.getNode(),"after"),f=!0;else if(b.getNode().isSplittable(d)){for(k=b.getNode().getEquivalentChildPositions(b.getOffset())[0];k.getNode().children&&0<k.getNode().children.length;)k=k.getNode().getEquivalentChildPositions(k.getOffset())[0];k=this._splitContainerAtPosition(k).first;d=k.endPosition();c=new x(k,k.maxOffset());k=!0;c=this._insertContainerInRoot(a,c.getNode(),
"after");d=new A(d,c.getEndPosition())}else return e.error("MW.rtc.model.InternalDocument: Insertion was requested at a non-splittable position"),{insertedRootContainers:[],insertedRange:null,insertionNotAllowed:!0,insertedContainerAtEndOfContainer:!1,containerWasSplit:!1,lastInsertedNode:null};return{insertedRootContainers:[a],insertedRange:d,insertionNotAllowed:!1,insertedContainerAtEndOfContainer:f,containerWasSplit:k,lastInsertedNode:a}},_insertContainerInRoot:function(a,b,c){a.children.forEach(this._ensureMaxTextLength,
this);this._insertNodeWithEvent(a,b,c);b=a.startPosition();a=(c=a.nextSibling())?c.startPosition():a.endPosition();return new A(b,a)},_findNextBreakablePosition:function(a){var b=a.getNode(),c=a.getOffset();if(!a.isAtEdge())for(;c<b.maxOffset()&&!b.isSplittable(c);)c++;return new x(b,c)},_createEquivalentPositionInContainer:function(a,b){var c=a.getNode();b=b||c.rootContainer();c=c.offsetInContainer(b)+a.getOffset();return new x(b,c)},_insertNode:function(a,b,c){var d=this._convertRelationToIndex(b,
c);c=d.parentNode;var d=d.index,e=n.create(a,b,0);b=r.create(a.parent,a,b);this._insertChildren(c,[a],d);b=new P(this,e,b);this._executeCommand(b);return a},_insertNodeWithEvent:function(a,b,c){var d=this._convertRelationToIndex(b,c),e=d.parentNode,d=d.index;if(e.isRootNode()&&e.children.length){var k=d-1,f=0;d===e.children.length&&(f=e.lastChild().maxOffset());0===d&&(k=0);k=m.create(k,k+1,f,1);this.onPreDocumentChanged(k)}this._insertChildren(e,[a],d);this._notifyInsertNode(a,b,c)},_convertRelationToIndex:function(a,
b){var c,e;"first"===b?(e=a,c=0):"last"===b?(e=a,c=e.children.length):"before"===b?(e=a.parent,c=d.indexOf(e.children,a)):"after"===b&&(e=a.parent,c=d.indexOf(e.children,a)+1);return{parentNode:e,index:c}},deleteNode:function(a,b){if(!b){var c=a.previousSibling(),d=a.nextSibling();b={node:null,offset:0};if(c)b.node=c,b.offset=c.maxOffset();else if(d)b.node=d;else{var k=this._insertDefaultTextNode(a,"after");b.node=k.getNode()}}k=a.parent;e.assert(k,"deleteNode called without parent");this._notifyDeleteNode(a,
b);this._notifyDeleteChildren(a,b);var f=k.children.indexOf(a),k=new Q(this,k,f,1);this._executeCommand(k);return{previousSibling:c,nextSibling:d}},removeChildren:function(a,b,c){a=new Q(this,a,b,c);return this._executeCommand(a)},_insertChildren:function(a,b,c){a=new M(this,a,b,c);this._executeCommand(a)},updateTextInNode:function(a,b,c,d){this._insertTextInNode(a,b,c);b=b.length;this._deleteTextInNode(a,b+c,b+d)},_insertTextInNode:function(a,b,c){var d=p.create(a,c,b.length),d=new P(this,d);this._executeCommand(d);
d=new O(this,a,c,0,b);this._executeCommand(d);a=s.create(a,c,b.length);d=new P(this,null,a);this._executeCommand(d)},deleteText:function(a,b,c){a.isTextNode()&&this._deleteTextInNode(a,b,c)},_deleteTextInNode:function(a,b,c){b=b||0;void 0===c&&(c=a.getText().length);if(0!==c-b){var d=s.create(a,b,c-b),d=new P(this,d);this._executeCommand(d);d=new O(this,a,b,c-b,"");this._executeCommand(d);a=p.create(a,b,c-b);d=new P(this,null,a);this._executeCommand(d)}},changeNodeAttributes:function(a,b){var c;c=
new I(this,a,b);this._executeCommand(c);c=v.create(a);c=new P(this,c,c);this._executeCommand(c)},setReadOnlyLine:function(a,b){var c=this.getLineNode(a);if(c.isReadOnly()===b)return!1;c.readOnly=b;this.onNodeChange(v.create(c));return!0},_executeCommand:function(a){if(!this._editBlockController||!this._editBlockController.getActiveBlock)return a.execute();var b=this._editBlockController.getActiveBlock();return!b?(e.assert("No block active"),a.execute()):b.pushAndExecuteCommand(a)},getNodeById:function(a){return w.searchNodeById(a,
this.root)},startBlockEdit:function(a){a=a||{};this._blockEditsStack.push(a);return a},endBlockEdit:function(a){e.assert(a===this._blockEditsStack[this._blockEditsStack.length-1],"InternalDocument: Start and End block edits' blocks do not match.");this._blockEditsStack.pop();0===this._blockEditsStack.length&&this._emitPendingEvents()},emitDocumentEvents:function(a){this._pendingDocumentEvents=this._pendingDocumentEvents.concat(a);0===this._blockEditsStack.length&&this._emitPendingEvents()},_emitPendingEvents:function(){var a=
this._pendingDocumentEvents;0<a.length&&(this._pendingDocumentEvents=[],this.onDocumentChanged(a))},onDocumentReset:function(){this._documentState+=1},readOnlyChanged:function(a){},onNodeChange:function(a){},newDocument:function(a){this.openTextDocument("",a)},openTextDocument:function(a,b){this._setTextInDocument(a,b);this.onDocumentReset()},_setTextInDocument:function(b,c){this.root=new L([]);var d=[""];b&&(d=a.textLineArray(b));var e;for(e=0;e<d.length;e+=1){var k=a.DEFAULT_TEXT_NODE;k.text=d[e];
var f=a.DEFAULT_CONTAINER_NODE;f.children=[k];k=this.createNode(f);this._insertNode(k,this.root,"last");this._ensureMaxTextLength(k.startNode())}this.setReadOnly(c)},formatTemplates:{},registerFormatTemplates:function(a){var b;for(b=0;b<a.length;b+=1)this.formatTemplates[a[b].name]=a[b].method},createContainerForType:function(a){a=this.formatTemplates[a];return!a?null:a()},serialize:function(a){a=a||this.root;return a.serialize()},deserialize:function(a){this.root=this._deserializeNode(a);this.onDocumentReset()},
_deserializeNode:function(a){return this._contentConverter.unpack(a)},getState:function(){return this._documentState},getTextInRange:function(a,b,c,d){if(a===c)return a.getText().substring(b,d);var e=c.rootContainer(),k=a.rootContainer();if(k===e)return k.getText().substring(a.offsetInContainer()+b,c.offsetInContainer()+d);var f=this.root.CHILD_TEXT_SEPARATOR;a=k.getText().substring(a.offsetInContainer()+b)+f;for(k=k.nextSibling();k&&k!==e;)a+=k.getText(),(k=k.nextSibling())&&(a+=f);return a+e.getText().substring(0,
c.offsetInContainer()+d)},deleteTextRange:function(a,b,c){if(a.isReadOnly())return 0;a=a.startNode();for(var d=a.getText().length,e=a,k=0;0<c&&a;)d=a.getText().length,d<=c?(c-=d,a=a.nextSibling()):(e=a,k=c,c=0);if(!a)return 0;c=b;var f,g;k+c<=d?(f=a,g=k+c):(c-=d-k,a=a.nextSibling());if(!f)for(;0<c&&a;)d=a.getText().length,d<c?(c-=d,a=a.nextSibling()):(f=a,g=c,c=0);if(!f)return 0;f={startPosition:new x(e,k),endPosition:new x(f,g),startNode:e,endNode:f,startPos:k,endPos:g,isLocal:!0,fileEndSelected:!1};
f=this.deleteSelection(f);this.emitDocumentEvents([f]);return b},isReadOnly:function(){return this.root&&this.root.readOnly},setReadOnly:function(a,b){this.root&&this.root.readOnly!==a&&(a=void 0===a?!1:a,this.root.readOnly=a,(void 0===b?0:b)||this.readOnlyChanged(a))},startNode:function(){return this.root.startNode()},endNode:function(){return this.root.endNode()},getChild:function(a,b){b=b||this.root;return 0<=a&&b.children&&b.children.length>=a?b.children[a]:null},_getChildIndex:function(a,b){b=
b||this.root;return d.indexOf(b.children,a)},getLineNode:function(a,b){return this.getChild(a,b)},getLineNumber:function(a,b){return this._getChildIndex(a,b)},getMaxLineNumber:function(a){return(a=a||this.root)&&a.children&&a.children.length},getPositionForLineColumn:function(b,c){var d=this.getLineNode(b-1);a.assert(d,"Caret requested for invalid line!");return d.getPositionFromOffset(c-1)},getRangeForLineColumn:function(a,b,c,d){a=this.getPositionForLineColumn(a,b);c=this.getPositionForLineColumn(c,
d);c=new A(a,c);return D.trimRange(c)},getRangeForLine:function(a){a=this.getLineNode(a-1);return new A(a.startPosition(),a.endPosition())},_getOrCreateEditablePosition:function(b,c){a.isEdgeOfTextLevelContainer(b,c)&&!b.containsTextNodes()&&(c+=b.offsetInContainer(b.parent),b=b.parent);if(b.isTextNode()&&!b.isReadOnly()&&!a.isTextLevelContainer(b))return new x(b,c);if(b.textContainer().isReadOnly())return new x;var d=0<c?b.nextSibling():b.previousSibling();return d?!d.isTextNode()||d.isReadOnly()||
a.isTextLevelContainer(d)?this._insertDefaultTextNode(b,0<c?"after":"before"):new x(d,0<c?0:d.maxOffset()):this._insertDefaultTextNode(b,0<c?"after":"before")},_insertDefaultTextNode:function(a,b){var c=this.createNode(a.textContainer().defaultTextNode());this._insertNode(c,a,b);return new x(c,0)},insertBreakInTextNode:function(a,b){var c=this._getOrCreateEditablePosition(a,b);a=c.getNode();b=c.getOffset();if(!a)return null;c=a.textContainer();if(c.isReadOnly())return null;var d=this.getLineNumber(c.rootContainer()),
e=d;c.isRootContainer()&&(e+=1);var k=a.offsetInContainer()+b,d=m.create(d,e,k,1);this.onPreDocumentChanged(d);e=!(0===b&&!a.previousSibling());c=this._splitContainerInNode(c,a,b,!0,e);e=c.startNode();e.nextSibling()&&e.isEmpty()&&this.mergeTextNodeWithSibling(e.nextSibling());d.line=this.getLineNumber(c.rootContainer());return{newNode:c,event:d}},_ensureMaxTextLength:function(a,b){b=b||0;var c=null;if(a.isTextNode())for(var d=a.getText();d.length>this.MAX_NODE_TEXT_LENGTH;){if(a.containsTextNodes()){for(d=
a.children.length-1;0<=d;d-=1)this._ensureMaxTextLength(a.children[d]);break}a=this._splitTextNodeAt(a,this.MAX_NODE_TEXT_LENGTH);b<this.MAX_NODE_TEXT_LENGTH?c||(c=a):b-=this.MAX_NODE_TEXT_LENGTH;a=a.nextSibling();d=a.getText()}return new x(c||a,b)},deleteSelection:function(b){a.assert(b,"Selection should never be null at this point.");var c=this.getLineNumber(b.startNode.rootContainer()),d=this.getLineNumber(b.endNode.rootContainer()),e=b.endNode.offsetInContainer()+b.endPos,c=l.create(c,d,e);this.onPreDocumentChanged(c);
d=b.startNode;d===b.endNode?d.isTextNode()&&!d.containsTextNodes()?this._deleteRangeInNodeAndMerge(d,b.startPos,b.endPos):0===b.startPos&&b.endPos===d.maxOffset()&&this.deleteNodeAndMerge(d):this._deleteRangeBeyondNodeAndMerge(b);return c},_deleteRangeBeyondNodeAndMerge:function(b){var c=b.startNode,d=b.endNode,e=b.endNode.rootContainer().previousSibling()===b.startNode.rootContainer(),k=a.isAtEndOfContainer(b.startPosition,b.startNode.rootContainer()),f=a.isAtStartOfContainer(b.endPosition,b.endNode.rootContainer());
if(!k||!f||!e)b=this._splitAtSelection(b,!0),c=b.startNode.prevNode(),d=b.endNode.nextNode(),e={node:c,offset:c.maxOffset(),endNode:d,endOffset:0},this.deleteRange(b.startNode,b.endNode,e);b=!c.textContainer().isRootContainer();e=new x(d,0);c.rootContainer()!==d.rootContainer()&&(this._canMergeContainerWithSibling(d.rootContainer())?e=this._mergeContainerWithSibling(d.rootContainer()):d.rootContainer().isEmpty()&&this.deleteNode(d.rootContainer(),{node:c,offset:c.maxOffset()}));c.rootContainer()&&
(b&&c.textContainer()!==d.textContainer()&&this._canMergeContainerWithSibling(d.textContainer())&&(e=this._mergeContainerWithSibling(d.textContainer())),c.textContainer()===e.getNode().textContainer()&&(this.mergeTextNodeWithSibling(c,!0),this.mergeTextNodeWithSibling(d),c.isEmpty()&&(b=c.nextSibling())&&this.mergeTextNodeWithSibling(b),a.isInTextLevelContainer(c)&&this.mergeTextNodeWithSibling(c.parent,!0),a.isInTextLevelContainer(d)&&this.mergeTextNodeWithSibling(d.parent)))},_deleteRangeInNodeAndMerge:function(a,
b,c){var d=a.previousSibling(),e=a.nextSibling();if(0===b&&c===a.maxOffset()&&(d||e))return this.deleteNodeAndMerge(a);this.deleteText(a,b,c)},deleteNodeAndMerge:function(a){a=this.deleteNode(a);a.previousSibling&&a.nextSibling&&this.mergeTextNodeWithSibling(a.nextSibling)},deleteRange:function(a,b,c){if(!b||b===a)this.deleteNode(a,c);else{var d=a?a.textContainer():b.textContainer();a=a||d.children[0];var e=b.textContainer();d===e&&a.parent===b.parent?(this._deleteRangeInContainer(d,a,b,c),0===d.children.length&&
this.deleteNode(d,c)):(d=this.splitContainerAtNode(a.rootContainer(),a,!0,!0),e=this.splitContainerAtNode(b.rootContainer(),b,!1,!0),this._deleteRangeInContainer(this.root,d,e,c))}},_deleteRangeInContainer:function(a,b,c,d){if(!b&&!c)this._emptyNode(a,d);else if(a=b||a.children[0],a===c)this.deleteNode(a,d);else for(b=null;a;){b=a.nextSibling();this.deleteNode(a,d);if(b===c){this.deleteNode(b,d);break}a=b}},createNode:function(a,b){b=b||{};"string"===typeof a&&(b.className=a,a=b);return this._deserializeNode(a)},
cloneNode:function(a,b){return this._deserializeNode(this.serialize(a))},cloneNodeWithoutChildren:function(a){a=this.serialize(a);a.children&&0<a.children.length&&(a.children=[]);a=this._deserializeNode(a);a.resetUniqueAttributes();return a},_notifyInsertNode:function(b,c,d){a.assert(b,"Inserted node does not exist.");var e,k,f,g=b.parent;f="after"===d?{node:c.endNode(),offset:c.endNode().maxOffset()}:{node:c.startNode(),offset:0};e=n.create(b,f.node,f.offset,f.endNode,f.endOffset);k=new P(this,e,
null);this._executeCommand(k);b.children&&b.children.forEach(function(a){e=n.create(a,f.node,f.offset,f.endNode,f.endOffset);k=new P(this,e,null);this._executeCommand(k)},this);b=r.create(g,b,c);k=new P(this,null,b);this._executeCommand(k)},_notifyDeleteNode:function(b,c){a.assert(b,"Node for deletion does not exist.");c=c||{node:null,offset:0};var d=n.create(b,c.node,c.offset,c.endNode,c.endOffset),e=r.create(b.parent,b),d=new P(this,e,d);this._executeCommand(d)},_notifyDeleteChildren:function(a,
b){var c=a.children;if(c&&0<c.length){var d;for(d=0;d<c.length;d+=1)this._notifyDeleteNode(c[d],b),this._notifyDeleteChildren(c[d],b)}},_emptyNode:function(a,b){this._notifyDeleteChildren(a,b);a.empty()},_insertContainerRange:function(a,b){var c=b.getLineColumn().line-1,d=b.node.rootContainer(),e="after",k,f,g=!0,l=!1;if(d.isEmpty())k=d,g=!1;else if(b.node===d.startNode()&&0===b.offset)e="before",f=new x(b.node,b.offset),g=!1,l=!0;else if(b.node!==d.endNode()||b.offset!==b.node.maxOffset())this._splitContainerInNode(d,
b.node,b.offset),e="before",f=new x(d.startNode(),0),l=!0;var n,h;for(n=0;n<a.length;n+=1)if(h=this._deserializeNode(a[n])){var p=this._convertRelationToIndex(d,e);this._insertChildren(p.parentNode,[h],p.index);h.isTextContainerNode()&&(h.children.length?h.children.forEach(function(a){a.isTextContainerNode()&&!a.children.length&&this._insertDefaultTextNode(a,"first")},this):this._insertDefaultTextNode(h,"first"));h.children&&h.children.forEach(this._ensureMaxTextLength,this);this._notifyInsertNode(h,
d,e);g&&(0===n&&h.previousSibling()&&this._canSpliceContainers(h,h.previousSibling()))&&(f=this._mergeContainerWithSibling(h),h.parent||(h=f.node.rootContainer()));d=h.parent?h:f.node.rootContainer();e="after"}f=h.endNode();f=new x(f,f.maxOffset());(d=h.nextSibling())&&l&&(f=h.isEmpty()||this._canSpliceContainers(h,d)?this._mergeContainerWithSibling(d):new x(d.startNode(),0));k&&this.deleteNode(k,{node:h.startNode(),offset:0});k=this.getLineNumber(f.getNode().rootContainer());for(l=[];c<=k;c+=1)h=
this.getLineNode(c),d=h.getText(),l.push(q.create(c,c,new x(h,0),d)),c!==k&&l.push(m.create(c,c+1,d.length,1));return{newPosition:f,event:l}},_insertNodeRange:function(b,d){var e=c.isCodeContainer(d.node),k=b.map(function(b){b=this._deserializeNode(b);if(e){var c=this._insertionRuleService.getRulesForNode(b),k=d.getNode().rootContainer();if(c.canInsertInContainer(k))return b;c=a.DEFAULT_TEXT_NODE;c.text=b.getText();b=this.createNode(c)}return b},this),k=k.filter(function(a){return!a.isEmpty()});if(0===
k.length)return{newPosition:d,event:[]};k=this.insertAtPosition(k,d);return{newPosition:k.insertedRange.getEndPosition(),event:k.events}},insertContent:function(a,b){e.assert(0<a.length);var c=this._deserializeNode(a[0]);return c.isTextContainerNode()?1===a.length&&!c.childrenAreContainers?this._insertNodeRange(a[0].children,b):this._insertContainerRange(a,b):this._insertNodeRange(a,b)},_splitTextNodeAt:function(a,b,c,d,e,k){var f,g,l;if(!d&&(0===b||b>=a.maxOffset()))return a;d=this.cloneNode(a,e);
c?(d.deleteText(b),e="before",g=0,l=b):(d.deleteText(0,b),e="after",g=b,l=a.text.length-b);f=t.create(d,a,g);f=new P(this,f,null);this._executeCommand(f);f=s.create(a,g,l);f=new P(this,f,null);this._executeCommand(f);f=new O(this,a,g,l,"");this._executeCommand(f);e=this._convertRelationToIndex(a,e);this._insertChildren(e.parentNode,[d],e.index);b=u.create(a,b,d,c,k);f=new P(this,null,b);this._executeCommand(f);return a},_splitNodeAt:function(b,c,d,e,k){if(b.isTextNode()&&!a.isTextLevelContainer(b))return this._splitTextNodeAt(b,
c,d,e,!1,k);if(b.isOpaqueNode()){if(!e||e&&b.isReadOnly())return b;var f=this.createNode(b.textContainer().defaultTextNode());0===c?(k=b.previousSibling(),e=b,k||(this._insertNodeAtPosition(f,new x(b,c)),k=f)):(k=b,e=b.nextSibling(),e||(this._insertNodeAtPosition(f,new x(b,c)),e=f));return d?e:k}if(!b.children||0===c&&d||c>=b.children.length||!d&&c===b.children.length-1)return b;e=this.cloneNodeWithoutChildren(b);d?(e.children=this.removeChildren(b,0,c),this._insertNode(e,b,"before")):(e.children=
this.removeChildren(b,c+1,b.children.length-c-1),this._insertNode(e,b,"after"));d=t.create(e,b,c);c=u.create(b,c,e,!0,k);c=new P(this,d,c);this._executeCommand(c);return b},_splitContainerAtPosition:function(a){var b=a.getNode().rootContainer(),c=a.getLineColumn(),d=1===c.column||c.column===b.maxOffset()+1,e=d?-1:0,k=0===a.getOffset(),f=a.getOffset()===a.getNode().maxOffset();k||f?this.splitContainerAtNode(b,a.getNode(),k,d,e):a.getNode().isInstanceOf(H)?this.splitContainerAtNode(b,a.getNode(),!1,
!0,e):this._splitContainerInNode(b,a.getNode(),a.getOffset());return{first:this.getLineNode(c.line-1),second:this.getLineNode(c.line)}},splitContainerAtNode:function(a,b,c,d,e){c&&!b.previousSibling()?b=this._splitNodeAt(b,0,!0,d,e):!c&&!b.nextSibling()&&(b=this._splitNodeAt(b,b.maxOffset(),!1,d,e));for(d=!0;d;){var k=b.parent;if(k.isRootContainer()||k===a)d=!1;b=this.getLineNumber(b,k);b=this._splitNodeAt(k,b,c,!1,e)}return b},_splitContainerInNode:function(b,c,d,e,k){var f=!1,g=0;if(0<d&&d>=c.maxOffset()){var l=
c.nextSibling();l?(c=l,d=0):(f=!0,g=1)}else 0===d&&!c.previousSibling()&&(0===c.maxOffset()&&c.nextSibling()?c=c.nextSibling():(f=!0,g=-1));l=!c.isOpaqueNode();!a.isTextLevelContainer(c)&&a.isEdgeOfTextLevelContainer(c,d)&&(0===d&&0<c.maxOffset()&&c.parent.previousSibling()?(c=c.parent.previousSibling(),d=c.maxOffset(),l=!1):0<d&&c.parent.nextSibling()&&(c=c.parent.nextSibling(),d=0,l=!1));l&&(c=this._splitTextNodeAt(c,d,!0,f,k,g));d=c.parent;for(c=this._getChildIndex(c,d);d;){c=this._splitNodeAt(d,
c,!0,!1,g);if(d===b||!d.parent)break;d=d.parent;c=this._getChildIndex(c,d)}return e?d:d.previousSibling()},_splitAtSelection:function(a,b){var c=a.startNode,d=a.endNode,c=b&&(0===a.endPos&&!d.previousSibling()||a.endPos===d.maxOffset()&&!d.nextSibling());!c&&(0===a.endPos&&d.previousSibling())&&(d=d.previousSibling(),a.endPos=d.maxOffset());var d=this._splitNodeAt(d,a.endPos,!1,c),e=a.startPos===a.startNode.maxOffset();a.isLocal?(b=b&&(!d.previousSibling()||!d.nextSibling()),d=c=this._splitNodeAt(d,
a.startPos,!0,b)):(c=a.startNode,b=b&&(!c.previousSibling()||!c.nextSibling()),c=this._splitNodeAt(c,a.startPos,!0,b));a.startNode=c;e&&!b?(c=c.nextSibling())?(a.startNode=c,a.startPos=0):a.startPosAtEnd=!0:a.startPos=0;a.endNode=d;0<a.endPos?a.endPos=d.maxOffset():a.endPosAtStart=!0;return a},_splitForInsertion:function(b){var c=b.getNode(),d=b.getOffset();if(b.isAtLeftEdge())return{firstPart:c.previousSibling(),secondPart:c};if(b.isAtRightEdge())return{firstPart:c,secondPart:c.nextSibling()};if(c.isTextNode()&&
!a.isTextLevelContainer(c))return b=this._splitTextNodeAt(c,d,!1,!1,!1,!1),{firstPart:b,secondPart:b.nextSibling()};b=c.getEquivalentChildPositions(d)[0];d=(b=this._splitForInsertion(b).firstPart)?this._getChildIndex(b,c):0;b=this.cloneNodeWithoutChildren(c);b.children=this.removeChildren(c,d+1,c.children.length-d-1);this._insertNode(b,c,"after");d=u.create(c,d,b,!0,!1);d=new P(this,null,d);this._executeCommand(d);return{firstPart:c,secondPart:b}},mergeTextNodeWithSibling:function(b,c){var d=c?b.nextSibling():
b.previousSibling(),e=c?b.maxOffset():0;return!d||d.isEmpty()&&(this.deleteNode(d,{node:b,offset:e}),d=c?b.nextSibling():b.previousSibling(),!d)?new x(b,e):!b.isTextNode()||a.isTextLevelContainer(b)||d.className!==b.className||b.readOnly||d.readOnly?new x(b,e):0===b.getText().length?this._mergeEmptyTextNodeWithSibling(b,c):!0===b.compareStyleAttributes(d)?this._mergeTextNodeWithSibling(b,c):new x(b,e)},_mergeEmptyTextNodeWithSibling:function(a,b){var c=b?a.nextSibling():a.previousSibling(),d=b?a.maxOffset():
0;this.changeNodeAttributes(a,{cssClass:null});if(1<a.parent.children.length){this._insertTextInNode(a,c.text,0);this.changeNodeAttributes(a,c.getStyleAttributes());this.onNodeChange(t.create(c,a,0));var e=b?0:a.maxOffset();this.deleteNode(c,{node:a,offset:e})}return new x(a,d)},_mergeTextNodesInRange:function(a){var b;b=a.getStartPosition().getNode();var c=a.getEndPosition().getNode(),d=b.rootContainer(),e=c.rootContainer(),k=a.getStartPosition().getLineColumn().column-1;a=a.getEndPosition().getLineColumn().column-
1;for(var f=b;f;){b=this.mergeTextNodeWithSibling(f);this._ensureMaxTextLength(f);if(f===c){this.mergeTextNodeWithSibling(f,!0);this._ensureMaxTextLength(f);break}f=b.getNode().nextNode()}c=d.getPositionFromOffset(k);e=e.getPositionFromOffset(a);return new A(c,e)},_mergeTextNodeWithSibling:function(a,b){var c,d,e,k,f=b?a.nextSibling():a.previousSibling(),g=b?a.maxOffset():0;k=a.getText();d=f.getText();if(k.length+d.length>=this.MAX_NODE_TEXT_LENGTH)return new x(a,g);b?(c=new O(this,a,a.text.length,
0,d),this._executeCommand(c),c=!1,k=e=k.length):(c=new O(this,a,0,0,d),this._executeCommand(c),e=t.create(a,a,d.length),c=new P(this,null,e),this._executeCommand(c),c=!0,e=0,g=k=d.length);e=t.create(f,a,e);d=u.create(a,k,f,c,void 0);c=new P(this,d,e);this._executeCommand(c);d=this._getChildIndex(f,f.parent);this.removeChildren(f.parent,d,1);return new x(a,g)},_mergeContainerWithSibling:function(a,b){var c,d;b?(c=a.nextSibling(),d=new x(a.endNode(),a.endNode().maxOffset())):(c=a.previousSibling(),
d=new x(a.startNode(),0));if(!c)return d;if(c.isEmpty()){if(a.isEmpty())return d=new x(c.startNode(),0),this.deleteNode(a,d),d;d=b?new x(a.endNode(),a.endNode().maxOffset()):new x(a.startNode(),0);this.deleteNode(c,d)}else{var e=this.containerType(c.textContainer());if(e!==this.containerType(a)&&(a=this.convertParagraph(e,a),e!==this.containerType(a)))return d;d=b?this.spliceContainers(a,c):this.spliceContainers(c,a)}return d},spliceContainers:function(a,b){var c,d=this.removeChildren(b);c=a.children.length;
this._insertChildren(a,d,c);var e=a.children[0<c?c-1:0];w.forAllDescendants(d,f.hitch(this,function(a){a=new P(this,{node:a,newNode:e,offset:0});this._executeCommand(a)}));var d=u.create(a,c,b),k=t.create(b,a,void 0),d=new P(this,d,k);this._executeCommand(d);this.deleteNode(b,{node:a,offset:0});return this.mergeTextNodeWithSibling(a.children[c])},_canMergeContainerWithSibling:function(a,b){if(a.isReadOnly())return!1;var c=b?a.nextSibling():a.previousSibling();return!c||c.isReadOnly()?!1:a.className===
c.className?a.canMergeContainerWithSibling?a.canMergeContainerWithSibling(a,c):!0:c.isEmpty()||a.isEmpty()||a.isTextContainerNode()&&c.isTextContainerNode()?!0:!1},_canSpliceContainers:function(a,b){return a.isReadOnly()||b.isReadOnly()?!1:b.isEmpty()&&!a.childrenAreContainers?!0:a.className===b.className?a._canSpliceContainers?a._canSpliceContainers(a,b):!0:!1},containerType:function(a){var b="none";a&&a.containerType&&(b=a.containerType());return b},convertParagraph:function(a,b){if(this.containerType(b)===
a||!b.isTextContainerNode())return b;var d=null,e=null;if(e=this.createContainerForType(a))d=e.container,e=e.textContainer||d;else return b;if(b.firstChild().isTextContainerNode())return b;if(c.isCodeContainer(b)||c.isCodeContainer(e)){var k=this._textNodeService.createTextNodeForContainer(b.getText().replace(/(\r\n|\n|\r)/gm," "),e);e.addChild(k);this._insertNode(d,b,"before");this.deleteNode(b,{node:k,offset:0});this._ensureMaxTextLength(k);return d}this._insertNode(d,b,"before");this.spliceContainers(e,
b);return d},createContiguousRange:function(a,b,c){a={startNode:a.getNode(),startPos:a.getOffset(),endNode:b.getNode(),endPos:b.getOffset(),isLocal:a.getNode()===b.getNode()};c=this._splitAtSelection(a,c);return{startNode:c.startNode,endNode:c.endNode}},_buildEventList:function(a,b,c,d){var e=[],k=[],f=[],g=a.getStartPosition(),l=g.getNode().rootContainer();a=a.getEndPosition();var n=a.getNode().rootContainer(),h=g.getLineColumn().line===a.getLineColumn().line,p=l===c[0],r=n===c[c.length-1];if(h&&
0===c.length)return c=this._createTextInsertionEventsForRange(g,a),0===c.length&&(e=this.getLineNumber(g.getNode().rootContainer()),c.push(q.create(e,e,g,""))),c;p||(e=this._createTextInsertionEventsForRange(g,l.endPosition()));r||(f=this._createTextInsertionEventsForRange(n.startPosition(),a));d&&(d=g.getLineColumn().line-1,g=g.getLineColumn().column-1,k.push(m.create(d,d+1,g,1)));c.forEach(function(a){var c=this.getLineNumber(a),d;b?(c-=1,d=a.previousSibling().maxOffset()):d=a.maxOffset();a=this._createTextInsertionEventsForRange(a.startPosition(),
a.endPosition());b||(k=k.concat(a));k.push(m.create(c,c+1,d,1));b&&(k=k.concat(a))},this);return c=e.concat(k).concat(f)},_createTextInsertionEventsForRange:function(a,b){for(var c=[],d=!a.isAtLeftEdge(),e=!b.isAtRightEdge(),k,f,g=a.getNode(),l=b.getNode().nextNode(),m;g&&g!==l;){m=this.getLineNumber(g.rootContainer());k=g.getText();f=0;e&&g===b.getNode()&&(f=0,k=k.substr(0,b.getOffset()));d&&g===a.getNode()&&(f=a.getOffset(),k=k.substr(f));if(0<k.length||g.isOpaqueNode())f=new x(g,f),c.push(q.create(m,
m,f,k));g=g.nextNode()}return c}})})},"MW/rtc/model/events/InsertBreakEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities","./DocumentEventBase"],function(h,f,g,e){var d=h(e,{constructor:function(c,b,a,d){this.type=f.INSERT_BREAK_EVENT;this.line=c;this.column=a;this.numberOfLines=d},destroy:function(){}});return{create:function(c,b,a,e){g.assertValidLines(c,b,f.INSERT_BREAK_EVENT);return new d(c,b,a,e)}}})},"MW/rtc/model/events/nodechange/DeleteNodeEvent":function(){define(["dojo/_base/declare",
"./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,f,g){var e=h(f,{constructor:function(d,c,b,a,e){this.type=g.DELETE_NODE;this.node=d;this.newNode=c;this.newOffset=b;this.newEndNode=a;this.newEndOffset=e},destroy:function(){}});return{create:function(d,c,b,a,k){return new e(d,c,b,a,k)}}})},"MW/rtc/model/events/nodechange/NodeChangeEventBase":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f){this.node=f},destroy:function(){}})})},"MW/rtc/model/events/nodechange/DeleteTextNodeEvent":function(){define(["dojo/_base/declare",
"./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,f,g){var e=h(f,{constructor:function(d,c,b){this.type=g.DELETE_TEXT;this.node=d;this.offset=c;this.length=b},destroy:function(){}});return{create:function(d,c,b){return new e(d,c,b)}}})},"MW/rtc/model/events/nodechange/InsertNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,f,g){var e=h(f,{constructor:function(d,c,b){this.type=g.INSERT_NODE;this.node=d;this.newNode=c;this.referenceSibling=
b},destroy:function(){}});return{create:function(d,c,b){return new e(d,c,b)}}})},"MW/rtc/model/events/nodechange/InsertTextNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,f,g){var e=h(f,{constructor:function(d,c,b){this.type=g.INSERT_TEXT;this.node=d;this.offset=c;this.length=b},destroy:function(){}});return{create:function(d,c,b){return new e(d,c,b)}}})},"MW/rtc/model/events/nodechange/MergeNodeEvent":function(){define(["dojo/_base/declare",
"./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,f,g){var e=h(f,{constructor:function(d,c,b){this.type=g.MERGE_NODE;this.node=d;this.newNode=c;this.offset=b},destroy:function(){}});return{create:function(d,c,b){return new e(d,c,b)}}})},"MW/rtc/model/events/nodechange/SplitNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,f,g){var e=h(f,{constructor:function(d,c,b,a,e){this.type=g.SPLIT_NODE;this.node=d;this.offset=c;this.newNode=
b;this.nodeChanged=a;this.lineStartOrEnd=e},destroy:function(){}});return{create:function(d,c,b,a,k){return new e(d,c,b,a,k)}}})},"MW/rtc/model/events/nodechange/UpdateAttributesNodeEvent":function(){define(["dojo/_base/declare","./NodeChangeEventBase","./NodeChangeEventTypes"],function(h,f,g){var e=h(f,{constructor:function(d){this.type=g.UPDATE_ATTRIBUTES;this.node=d},destroy:function(){}});return{create:function(d){return new e(d)}}})},"MW/rtc/nodes/OpaqueNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/LeafNode"],function(h,f){return h([f],{constructor:function(){},className:"OpaqueNode",text:"",getTextForPositioning:function(){var f,e="";for(f=0;f<this.maxOffset();f+=1)e+="\ufffc";return e},isTextNode:function(){return!1},isOpaqueNode:function(){return!0},maxOffset:function(){return 1},insertText:function(f){},deleteText:function(f,e){},getStyleAttributes:function(){return{}},canSpliceContainers:function(f,e){return!1},canMergeContainerWithSibling:function(f,e){return!1},_serializeAttributes:function(f){f.text=
this.getText()}})})},"MW/rtc/nodes/inner/RootNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode"],function(h,f){return h([f],{constructor:function(f){},className:"RootNode",isRootNode:function(){return!0},_childrenAlign:"vertical",CHILD_TEXT_SEPARATOR:"\n",getCodeText:function(){return this.getCodeTextOfChildren()}})})},"MW/rtc/plugins/undoredo/commands/InsertChildrenCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],
function(h,f,g){return h(g,{constructor:function(e,d,c,b){this._model=e;this._targetNode=d;this._children=c;this._offset=b},execute:function(){var e=this._offset;this._children.forEach(function(d,c){this._targetNode.children.splice(e+c,0,d);d.parent=this._targetNode;d.children&&d.children.forEach(function(b){b.parent||(b.parent=d)})},this)},unexecute:function(){this._targetNode.children.splice(this._offset,this._children.length);this._children.forEach(function(e){e.parent=null},this)}})})},"MW/rtc/plugins/undoredo/commands/CommandInterface":function(){define(["dojo/_base/declare",
"mw-log/Log"],function(h,f){return h(null,{_NODE_IN_MODEL_ERROR:"Node must be in the model.",constructor:function(){},execute:function(){f.assert("Subclasses must override execute.")},unexecute:function(){f.assert("Subclasses must override unexecute.")}})})},"MW/rtc/plugins/undoredo/commands/NodeChangeEventCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/model/DocumentConstants","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,f,g,e){return h(e,{constructor:function(d,
c,b){this._model=d;this._undoEvent=c;this._redoEvent=b},execute:function(){if(this._redoEvent)this._model.onNodeChange(this._redoEvent)},unexecute:function(){if(this._undoEvent)this._model.onNodeChange(this._undoEvent)}})})},"MW/rtc/plugins/undoredo/commands/RemoveChildrenCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,f,g){return h(g,{constructor:function(e,d,c,b){this._model=e;this._targetNode=d;this._offset=c||0;this._count=
b;this._removedNodes=[]},execute:function(){this._removedNodes=this._targetNode.children.splice(this._offset,0<this._count?this._count:this._targetNode.children.length);this._removedNodes.forEach(function(e){e.parent=null},this);return this._removedNodes},unexecute:function(){var e=this._offset;this._removedNodes.forEach(function(d,c){this._targetNode.children.splice(e+c,0,d);d.parent=this._targetNode},this)}})})},"MW/rtc/plugins/undoredo/commands/ReplaceTextCommand":function(){define(["dojo/_base/declare",
"mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,f,g){return h(g,{constructor:function(e,d,c,b,a){this._model=e;this._targetNode=d;this._offset=c;this._length=b;this._text=a;this._replacement=""},execute:function(){this._replacement=this._targetNode.text.substr(this._offset,this._length);this._setText(this._targetNode,this._text,this._length)},unexecute:function(){this._setText(this._targetNode,this._replacement,this._text.length)},_setText:function(e,d,c){e.text=e.text.substr(0,
this._offset)+d+e.text.substr(this._offset+c)}})})},"MW/rtc/plugins/undoredo/commands/UpdateAttributesCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,f,g){return h(g,{constructor:function(e,d,c){this._model=e;this._targetNode=d;this._newAttributes=c;this._oldAttributes={}},execute:function(){this._oldAttributes=this._targetNode.updateAttributes(this._newAttributes)},unexecute:function(e){this._targetNode.updateAttributes(this._oldAttributes)}})})},
"MW/rtc/nodes/contentconverter/ContentConverterPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ContentConverterPlugin"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.nodes.contentconverter.converter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/nodes/contentconverter/ContentConverterPlugin":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractRecursiveConverterPlugin"],function(h,f){return h(f,
{_classNameToConstructor:null,constructor:function(f){this._initializeRecursiveConverter(f);this._classNameToConstructor={};f.forEach(function(e){e=e.getApplicableNodeClass();this._classNameToConstructor[e.prototype.className]=e},this)},pack:function(f){return this._getConverter(f).pack(f)},unpack:function(f){var e=this._getConverterByConstructor(this._classNameToConstructor[f.className]);return e?e.unpack(f):null}})})},"MW/rtc/abstract/AbstractRecursiveConverterPlugin":function(){define(["dojo/_base/declare",
"./AbstractConverterPlugin"],function(h,f){return h(f,{_initializeRecursiveConverter:function(f){this._createConverterMap(f);this._setAsMainConverter(f)},_setAsMainConverter:function(f){f.forEach(function(e){e.setMainConverter(this)},this)}})})},"MW/rtc/abstract/AbstractConverterPlugin":function(){define(["dojo/_base/declare","MW/rtc/core/NodeMap"],function(h,f){return h(null,{_createConverterMap:function(g){this._nodeMap=new f(g)},_getConverter:function(f){return this._nodeMap.get(f)},_getConverterByConstructor:function(f){return this._nodeMap.getByConstructor(f)}})})},
"MW/rtc/core/NodeMap":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/browsersupport/PseudoMap","mw-log/Log"],function(h,f,g,e,d){return h(null,{_USE_ES6_MAP:!1,constructor:function(c){this._map=this._USE_ES6_MAP?g.createMap():new e;c.forEach(this.register,this)},register:function(c){this._register(c,!1)},registerOverwrite:function(c){this._register(c,!0)},_register:function(c,b){d.assert(c.getApplicableNodeClass,"MW/rtc/core/NodeMap: Must implement getApplicableNodeClass method");
var a=c.getApplicableNodeClass(),e=a.prototype.className;d.assert(b||!this._map.has(a),"MW/rtc/core/NodeMap: Can only have one mapping for "+e+"; Overwriting");this._map.set(a,c)},get:function(c){return this.getByConstructor(c.constructor)},getByConstructor:function(c){for(var b=null;c&&!b;)b=this._map.get(c),c=c.superclass?c.superclass.constructor:null;return b}})})},"MW/rtc/nodes/contentconverter/inner/LineNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LineNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/contentconverter/inner/LineNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","../base/InnerNodeContentConverter"],function(h,f,g){return h(g,{getApplicableNodeClass:function(){return f}})})},"MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter":function(){define(["dojo/_base/declare","mw-log/Log",
"MW/rtc/nodes/InnerNode","./NodeContentConverter"],function(h,f,g,e){return h(e,{getApplicableNodeClass:function(){return g},unpack:function(d){var c=this._unpackChildren(d.children);return new (this.getApplicableNodeClass())(c,d)},_unpackChildren:function(d){return!d?(f.warn("InnerNodeContentConverter: children array was falsy, treating as empty"),[]):d.map(function(c){return this._mainConverter.unpack(c)},this)}})})},"MW/rtc/nodes/contentconverter/base/NodeContentConverter":function(){define(["dojo/_base/declare",
"mw-log/Log","MW/rtc/nodes/Node","./AbstractContentConverter"],function(h,f,g,e){return h(e,{getApplicableNodeClass:function(){return g},pack:function(d){d.serialize()},unpack:function(d){f.error("Unimplemented: unpack")}})})},"MW/rtc/nodes/contentconverter/base/AbstractContentConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractRecursiveConverter"],function(h,f,g){return h(g,{pack:function(e){f.error("Unimplemented: pack")},unpack:function(e){f.error("Unimplemented: unpack")}})})},
"MW/rtc/abstract/AbstractRecursiveConverter":function(){define(["dojo/_base/declare","./AbstractConverter"],function(h,f){return h(f,{_mainConverter:null,setMainConverter:function(f){this._mainConverter=f}})})},"MW/rtc/abstract/AbstractConverter":function(){define(["dojo/_base/declare"],function(h){return h(null,{getApplicableNodeClass:function(){throw Error("Unimplemented: getApplicableNodeClass");}})})},"MW/rtc/nodes/contentconverter/inner/RootNodeContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RootNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/contentconverter/inner/RootNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/RootNode","../base/InnerNodeContentConverter"],function(h,f,g){return h(g,{getApplicableNodeClass:function(){return f}})})},"MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./PlainTextNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/nodes/contentconverter/leaf/PlainTextNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/PlainTextNode","../base/LeafNodeContentConverter"],function(h,f,g){return h(g,{getApplicableNodeClass:function(){return f}})})},"MW/rtc/nodes/leaf/PlainTextNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/leaf/TextProportionalFontNode"],function(h,f){return h(f,{className:"PlainTextNode",getCodeText:function(){return this.getText()}})})},"MW/rtc/nodes/leaf/TextProportionalFontNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/TextNode"],function(h,f){return h(f,{className:"TextProportionalFontNode",parentTop:function(){return 0},parentLeft:function(){return 0},insertText:function(f,e){void 0===e&&(e=this.text.length);0>e&&(e=this.text.length+e);this.text=this.text.substring(0,
e)+f+this.text.substring(e)},deleteText:function(f,e){f=f||0;void 0===e&&(e=this.text.length);0>f&&(f+=e);this.text=this.text.substring(0,f)+this.text.substring(e)},replaceText:function(f,e,d){e=e||0;void 0===d&&(d=this.text.length);this.deleteText(e,d);this.insertText(f,e)}})})},"MW/rtc/nodes/leaf/TextNode":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-class dojo/dom-style MW/rtc/nodes/LeafNode mw-utils/Utils".split(" "),function(h,f,g,e,d,c){return h(d,{constructor:function(b){this.text=
b.text||"";this.color=b.color||null;b.readOnly&&(this.readOnly=b.readOnly)},className:"TextNode",maxOffset:function(){return this.text.length},isEmpty:function(){return null===this.text||""===this.text},_styleAttributes:["color"],hasStyleAttribute:function(b){return 0<=this._styleAttributes.indexOf(b)},getStyleAttribute:function(b){return this[b]},getStyleAttributes:function(){var b={},a;for(a=0;a<this._styleAttributes.length;a+=1){var c=this._styleAttributes[a];b[c]=this.getStyleAttribute(c)}return b},
setStyleAttributes:function(b){for(var a in b)b.hasOwnProperty(a)&&this.setStyleAttribute(a,b[a])},setStyleAttribute:function(b,a){this.hasStyleAttribute(b)&&(this[b]=a)},compareStyleAttributes:function(b){var a;for(a=0;a<this._styleAttributes.length;a+=1){var c=this._styleAttributes[a];if(this[c]!==b[c]&&(this[c]||b[c]))return!1}return!0},addClass:function(b){this.cssClass||(this.cssClass="");this.cssClass=c.unionOfWordSets(this.cssClass,b,!0)},removeClass:function(b){this.cssClass&&(this.cssClass=
c.differenceOfWordSets(this.cssClass,b,!0),0===this.cssClass.length&&delete this.cssClass)},_serializeAttributes:function(b){b.text=this.text;void 0!==this.color&&null!==this.color&&(b.color=this.color);void 0!==this.cssClass&&null!==this.cssClass&&(b.cssClass=this.cssClass)},isSplittable:function(b){return 0===b||b===this.maxOffset()?!1:!0}})})},"MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/nodes/LeafNode","./NodeContentConverter"],
function(h,f,g,e){return h(e,{getApplicableNodeClass:function(){return g},unpack:function(d){return new (this.getApplicableNodeClass())(d)}})})},"MW/rtc/events/KeyHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/events/KeyHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.domnode"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/events/KeyHandler":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/has dojo/keys dojo/on mw-log/Log".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return g(null,{constructor:function(e,g,l){this._document=e;this._actionService=g;this._browserCutCopyPasteRequired=!1;this.keyMap={};this.dojoKeyNames=this._makeDojoKeyNameMap();this.keyCapture=b.create("textarea",{"class":"keyCapture",value:"",autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1});e=this.keyCapture.style;k("webkit")?e.borderColor="#FFFFFF":(e.border="none",e.borderWidth="0px");k("ios")&&a.add(this.keyCapture,"ios");(k("trident")||
k("ie")||k("edge"))&&a.add(this.keyCapture,"ie");this._handlers=[];this._handlers.push(f.connect(this.keyCapture,"onkeypress",d.hitch(this,"onKeyPress")));this._handlers.push(m(this.keyCapture,"input",d.hitch(this,"handleInput")));this._handlers.push(m(this.keyCapture,"focus",d.hitch(this,"onFocus")));this._handlers.push(m(this.keyCapture,"blur",d.hitch(this,"onBlur")));this._handleChromeMacOnKeyPress();this._handleFFWindowsOnKeyPress();this._handleChromeIEOnKeyPress();this.setDefaultInputHandler();
this._addBindingsFromActionService();this._handlers.push(c.after(this._actionService,"addAction",d.hitch(this,"_handleAddAction"),!0));this._handlers.push(c.before(this._actionService,"removeAction",d.hitch(this,"_handleRemoveAction")));this._handlers.push(c.after(this._actionService,"onActionChange",d.hitch(this,"_handleOnActionChange"),!0));this.place(l)},destroy:function(){this._handlers.forEach(function(a){a.remove()});this._handlers=[]},_handleChromeMacOnKeyPress:function(){k("mac")&&k("chrome")&&
this._handlers.push(f.connect(this.keyCapture,"onkeydown",d.hitch(this,"onKeyDown")))},_handleFFWindowsOnKeyPress:function(){k("windows")&&k("ff")&&this._handlers.push(m(this.keyCapture,"keydown",d.hitch(this,"_keyPressSupportForCtrl")))},_handleChromeIEOnKeyPress:function(){!k("mac")&&!k("ff")&&this._handlers.push(m(this.keyCapture,"keydown",d.hitch(this,"_keyPressSupportForChromeIE")))},_keyPressSupportForChromeIE:function(a){if(!this._inputHandlerIsInInteraction()){if(a.altKey||k("chrome")&&a.ctrlKey&&
a.shiftKey){var b=!0;switch(a.keyCode){case 13:a.charOrCode=a.keyCode;break;default:b=!1}}b&&(this.onKeyPress(a),a.preventDefault())}},_keyPressSupportForCtrl:function(a){if(!this._inputHandlerIsInInteraction()&&a.ctrlKey){var b=!0;switch(a.keyCode){case 35:case 36:a.charOrCode=a.keyCode;break;default:b=!1}b&&(this.onKeyPress(a),a.preventDefault())}},place:function(a){b.place(this.keyCapture,a)},prepareKeyCapture:function(a){this._inputHandlerIsInInteraction()||(a?(this.keyCapture.value="##",this._selectKeyCaptureContent()):
(this.keyCapture.value="",window.setTimeout(d.hitch(this,function(){this.hasFocus()&&this._selectKeyCaptureContent()}),0)))},hasFocus:function(){return document.activeElement===this.keyCapture},blur:function(){this.keyCapture.blur()},focus:function(){this.keyCapture.focus()},onFocus:function(a){k("ie")&&this._selectKeyCaptureContent()},enableBrowserCopyPaste:function(a){this._browserCutCopyPasteRequired=!0;var b=this;Object.keys(a).forEach(function(c){b.listenTo(c,a[c])})},listenTo:function(a,b){this._handlers.push(m(this.keyCapture,
a,b))},onBlur:function(a){},_selectKeyCaptureContent:function(){if(this.keyCapture.setSelectionRange)try{this.keyCapture.setSelectionRange(0,this.keyCapture.value.length),this.hasFocus()||this.focus()}catch(a){}else try{this.keyCapture.select()}catch(b){}},_caretPosInTextarea:function(){return this.keyCapture.value.length},setInputHandler:function(a){this._inputHandler=a},setDefaultInputHandler:function(){this.setInputHandler(this._inputHandlerText)},_inputHandlerIsInInteraction:function(){return this._inputHandler!==
this._inputHandlerText},_inputHandlerText:function(a){this.keyCapture.value="";this._document.insertTextAtCurrentPosition(a)},handleInput:function(a){a=this.keyCapture.value;"##"===a.slice(0,2)?a=a.slice(2):"##"===a.slice(1)&&(a=a.slice(0,1));a&&this._inputHandler(a,this._caretPosInTextarea())},_checkForBrowserCcpShortcuts:function(a){if(k("mac"))switch(a){case "meta_x":case "meta_c":case "meta_v":return this._browserCutCopyPasteRequired;default:return!1}switch(a){case "ctrl_x":case "shift_delete":case "ctrl_c":case "ctrl_insert":case "ctrl_v":case "shift_insert":return this._browserCutCopyPasteRequired;
default:return!1}},_handleKeyBindingEvent:function(a,b,c){b=this._checkForBrowserCcpShortcuts(c)&&this._browserCutCopyPasteRequired?1:b;switch(b){case 0:e.stop(a);break;case 1:break;case 2:a.preventDefault();break;default:q.error("Key event is not handled")}},onKeyPress:function(a){if(!this._inputHandlerIsInInteraction()){var b=this._keyEventID(a),c=this.keyMap[b];if(c&&0<c.length){this._handleKeyBindingEvent(a,0,b);a.target!==this.keyCapture&&this.focus();for(a=0;a<c.length;a+=1)if(!0===c[a]())return}this.setInputHandler(this._inputHandlerText)}},
onKeyDown:function(a){if(!this._inputHandlerIsInInteraction()&&a.metaKey&&!a.ctrlKey){var b=!0;switch(a.keyCode){case 37:case 39:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 79:case 82:case 83:case 84:case 85:case 86:case 88:case 90:a.charOrCode=String.fromCharCode(a.keyCode).toLowerCase();break;case 13:case 190:case 191:case 219:case 221:case 220:a.charOrCode=a.keyCode;break;case 226:a.charOrCode=191;break;default:b=!1}b&&(this.onKeyPress(a),
b=this._keyEventID(a),this._handleKeyBindingEvent(a,2,b))}},_resolvePlatformKey:function(a,b){var c;if(b)for(c in b)if(b.hasOwnProperty(c)&&k(c))return b[c];return a},addBindings:function(a){h.forEach(a,function(a){this.addBinding(a)},this)},_addBindingsFromActionService:function(){this._actionService.getAllActions().forEach(function(a){(a.key||a.platformKey)&&this.addBinding(a)},this)},_handleAddAction:function(a){(a.key||a.platformKey)&&this.addBinding(a)},_handleRemoveAction:function(a){if((a=
this._actionService.getAction(a))&&a.callback&&a.key){var b=this._resolvePlatformKey(a.key,a.platformKey);b&&this.keyMap[b]&&this._removeKeyCallbackEntry(b,a.callback)}},_removeKeyCallbackEntry:function(a,b){var c=this.keyMap[a].indexOf(b);0<=c&&this.keyMap[a].splice(c,1)},_handleOnActionChange:function(a){var b=this._actionService.getAction(a.id);if("key"===a.key||"platformKey"===a.key)this.keyMap[a.oldValue]&&this._removeKeyCallbackEntry(a.oldValue,b.callback),this.addBinding(b);else if("callback"===
a.key){var c=this._resolvePlatformKey(b.key,b.platformKey);c&&this.keyMap[c]&&(this._removeKeyCallbackEntry(c,a.oldValue),this.keyMap[c].push(b.callback))}},addBinding:function(a){var b=this._resolvePlatformKey(a.key,a.platformKey);if(b){var c=this.keyMap[b]||[],d=a.callback;if(!d)var e=a.action,k=a.args,f=this._actionService,d=function(){var a=f.getAction(e),b=!1;a.enabled&&(b=a.callback.apply(a,k));return b};c.push(d);this.keyMap[b]=c}},removeBindings:function(a){this.keyMap[a]=[]},_keyEventID:function(a){var b=
a.charOrCode,c=a.ctrlKey||a.metaKey||a.altKey;if("string"===typeof b&&!c)return b;k("mac")&&k("matlab")&&(c=a.metaKey,a.metaKey=a.ctrlKey,a.ctrlKey=c);var c=a.ctrlKey?"ctrl_":"",d=a.metaKey?"meta_":"",e=a.altKey?"alt_":"";a=a.shiftKey?"shift_":"";b=this._keyName(b);a&&(b=b.toLowerCase());return c+d+e+a+b},_keyName:function(a){return"string"===typeof a?a:this.dojoKeyNames[a]||"unknown"},_makeDojoKeyNameMap:function(){var a=[];a[l.BACKSPACE]="backspace";a[l.DELETE]="delete";a[l.INSERT]="insert";a[l.ENTER]=
"enter";a[10]="enter";a[l.SHIFT]="shift";a[l.TAB]="tab";a[l.LEFT_ARROW]="left";a[l.RIGHT_ARROW]="right";a[l.UP_ARROW]="up";a[l.DOWN_ARROW]="down";a[l.PAGE_UP]="pageup";a[l.PAGE_DOWN]="pagedown";a[l.HOME]="home";a[l.END]="end";a[l.ESCAPE]="escape";a[l.F1]="f1";a[l.F3]="f3";a[l.F5]="f5";a[l.F7]="f7";a[l.F9]="f9";a[l.F10]="f10";a[l.F11]="f11";a[l.F12]="f12";a[190]=".";a[191]="/";a[219]="[";a[221]="]";a[220]="\\";return a}})})},"MW/rtc/hyperlinkservice/HyperlinkServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/hyperlinkservice/HyperlinkService","MW/rtc/core/provider/PluginProvider"],function(h,f,g){var e=null;return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.executionservice"]}},createInstance:function(d){null===e&&(e=new f(d));return e}})})},"MW/rtc/hyperlinkservice/HyperlinkService":function(){define(["dojo/on","dojo/_base/declare","dojo/_base/lang","mw-log/Log"],function(h,f,g,e){return f(null,{_MATLAB_PROTOCOL:"matlab:",constructor:function(d){this._executionService=
d;this._hyperlinkhandler=null},_isMatlabUrl:function(d){return d.substring(0,7)===this._MATLAB_PROTOCOL},_openUrlWithExecutionService:function(d){var c=this._isMatlabUrl(d);c&&(d=d.replace(/'/g,"''"));d="web('"+d+"')";if(this._executionService.streamingEval)return this._executionService.executionEval(d,this._executionService.streamingEval),!0;if(this._executionService.isMessageServiceRunning())return this._executionService.executionEval(d),!0;e.assert(c,"There is no execution service to open Matlab link");
return!1},_openMatlabUrl:function(d){return!this._isMatlabUrl(d)?!1:this._openUrlWithExecutionService(d)},_handleHyperlink:function(d,c){var b=c.target||c.srcElement;"A"===b.tagName&&d.call(this,b.getAttribute("href"))&&(c.stopPropagation(),c.preventDefault())},_addEventListener:function(d,c){return h(d,"click, auxclick",g.hitch(this,"_handleHyperlink",c),!0)},openUrl:function(d){this._openUrlWithExecutionService(d)||window.open(d,"_blank");return!0},attachMatlabHyperlinkHandler:function(d){e.assert(d,
"A dom Node is not passed in");return this._addEventListener(d,this._openMatlabUrl)},attachHandlerForAllHyperlinks:function(){return this._addEventListener(document,this.openUrl)}})})},"MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkServiceProvider":function(){define(["dojo/_base/declare","./InternalHyperlinkService","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.hyperlinkservice rtc.domnode rtc.internaldocument rtc.cursor rtc.view rtc.actionservice".split(" ")}},
createInstance:function(e,d,c,b,a,k){return new f(d,c,b,a,k,e)}})})},"MW/rtc/plugins/internalhyperlinkservice/InternalHyperlinkService":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentUtilities","MW/rtc/RichTextComponentFeatureEnum"],function(h,f,g,e){return h(null,{_INTERNAL_PROTOCOL:"internal:",constructor:function(d,c,b,a,e,f){this._internaldocument=c;this._cursor=b;this._view=a;this._rtcDomNode=d;this._hyperlinkService=f;this._backwardStack=[];this._forwardStack=
[];this._currentNode;e.loadActions(this._actions())},_actions:function(){return[{id:e.HYPERLINK.HYPERLINK_SERVICE_BACKWARD_ACTION,key:"alt_left",platformKey:{mac:"ctrl_alt_left"},enabled:!0,callback:f.hitch(this,this._prefBookmark)},{id:e.HYPERLINK.HYPERLINK_SERVICE_FORWARD_ACTION,key:"alt_right",platformKey:{mac:"ctrl_alt_right"},enabled:!0,callback:f.hitch(this,this._nextBookmark)}]},_nextBookmark:function(){var d=this._forwardStack.pop();g.isInDocument(d)&&d!==this._currentNode&&(this._backwardStack.push(this._currentNode),
this._cursor.setPosition(d.lastChild(),0,!0),0<d.maxOffset()&&this._view.scrollNodeToPercent(d.rootContainer(),0),this._currentNode=d)},_prefBookmark:function(){var d=this._backwardStack.pop();g.isInDocument(d)&&d!==this._currentNode&&(this._forwardStack.push(this._currentNode),this._cursor.setPosition(d.lastChild(),0,!0),0<d.maxOffset()&&this._view.scrollNodeToPercent(d.rootContainer(),0),this._currentNode=d)},_isInternalUrl:function(d){return 0===d.indexOf(this._INTERNAL_PROTOCOL)},_openInternalHyperlink:function(d){if(d=
this._getNode(d))this._currentNode=this._cursor.getNode().textContainer(),this._backwardStack.push(this._currentNode),this._forwardStack=[],this._cursor.setPosition(d,0,!0),this._view.scrollNodeToPercent(d,0),this._currentNode=d;return!0},_getNode:function(d){d=d.substring(9);for(var c=this._internaldocument.root.children,b=0;b<c.length;b++)if(c[b].anchorId&&c[b].anchorId===d)return c[b]},openUrl:function(d){return this._isInternalUrl(d)?this._openInternalHyperlink(d):this._hyperlinkService.openUrl(d)}})})},
"MW/rtc/RichTextComponentFeatureEnum":function(){define([],function(){return{TAB_COMPLETION:{TAB_COMPLETE_ACTION:"codecompletion.popup"},SYNTAX_HIGHLIGHTING:"rtc_syntax_highlighting",CODE_ANALYZER:"rtc_code_analyzer",SECTIONS:{INSERT_SECTION_ACTION:"rtc_insert_section",RUN_SECTION_ACTION:"rtc_evaluate_section",NEXT_SECTION_ACTION:"rtc_next_section",PREVIOUS_SECTION_ACTION:"rtc_previous_section"},FIND_STRING:{FIND_ACTION:"rtc_find_dialog",FIND_NEXT_ACTION:"rtc_find_dialog_find_next_key",FIND_PREVIOUS_ACTION:"rtc_find_dialog_find_previous_key",
FIND_SELECTION_ACTION:"rtc_find_dialog_find_selection_key",REPLACE_ACTION:"rtc_replace_dialog"},GOTO_LINE:{GOTO_ACTION:"rtc_goTo_dialog"},INDENT_ON_NEWLINE:"rtc_indent_on_newline",SMART_TAB:"rtc_smart_tab",PAREN_MATCH:"rtc_paren_match",GUTTER_LINE_NUMBER:"rtc_gutter_line_number",MATLAB_BREAKPOINT_MARGIN:{CLEAR_ALL_BREAKPOINTS_ACTION:"rtc_clear_all_breakpoints",TOGGLE_BREAKPOINT_ACTION:"rtc_toggle_breakpoint",TOGGLE_ENABLE_BREAKPOINT_ACTION:"rtc_toggle_enable_breakpoint"},CONTEXT_MENU:"rtc_context_menu",
AUTO_INDENT:"rtc_auto_indent",EVALUATE_SELECTION:{EVALUATE_SELECTION_ACTION:"rtc_evaluate_selection"},OPEN_SELECTION:{OPEN_SELECTION_ACTION:"rtc_open_selection"},COMMENT:{COMMENT_ACTION:"rtc_comment",UNCOMMENT_ACTION:"rtc_uncomment"},INDENT:{INDENT_ACTION:"rtc_indent",OUTDENT_ACTION:"rtc_unindent"},FORMAT_CODE:{SMART_INDENT_ACTION:"rtc_smart_indent"},FUNCTION_HINTS:{FUNCTION_HINTS_ACTION:"rtc_function_hints"},UNDO_REDO:{UNDO_ACTION:"rtc_undo",REDO_ACTION:"rtc_redo",CLEAR_ACTION:"rtc_clear_undo"},
CUT_COPY_PASTE:{CUT_ACTION:"rtc_cut",COPY_ACTION:"rtc_copy",PASTE_ACTION:"rtc_paste"},VARIABLE_HIGHLIGHTING:"rtc_variable_highlighting",NONLOCAL_VARIABLE_HIGHLIGHTING:"rtc_nonlocal_variable_highlighting",RICH_TEXT:{TOGGLE_BOLD_ACTION:"rtc_toggle_bold",TOGGLE_ITALIC_ACTION:"rtc_toggle_italic",TOGGLE_UNDERLINE_ACTION:"rtc_toggle_underline",TOGGLE_MONOSPACE_ACTION:"rtc_toggle_monospace",PARAGRAPH_FORMAT_CODE_ACTION:"rtc_paraformat_code",PARAGRAPH_FORMAT_TEXT_ACTION:"rtc_paraformat_text",PARAGRAPH_FORMAT_HEADING_ACTION:"rtc_paraformat_heading",
PARAGRAPH_FORMAT_TITLE_ACTION:"rtc_paraformat_title",TOGGLE_CODE_AND_TEXT_ACTION:"rtc_toggle_code_and_text",ALIGNMENT_LEFT_ACTION:"rtc_align_left",ALIGNMENT_CENTER_ACTION:"rtc_align_center",ALIGNMENT_RIGHT_ACTION:"rtc_align_right"},LISTS:{ORDERED_LIST_ACTION:"rtc_ordered_list",UNORDERED_LIST_ACTION:"rtc_unordered_list"},HYPERLINK:{HYPERLINK_ACTION:"rtc_hyperlink",HYPERLINK_SERVICE_BACKWARD_ACTION:"rtc_hyperlink_service_backward",HYPERLINK_SERVICE_FORWARD_ACTION:"rtc_hyperlink_service_forward"},EQUATIONS:{LATEX_EDITOR_ACTION:"rtc_equation",
WYSIWYG_EDITOR_ACTION:"rtc_equation_editor"},IMAGES:{IMAGE_ACTION:"rtc_image"},TABLE_OF_CONTENTS:{TABLE_OF_CONTENTS_ACTION:"rtc_table_of_contents"},CODE_EXAMPLE:{DEFAULT_ACTION:"rtc_codeexample",MATLAB_ACTION:"rtc_codeexample_matlab",PLAIN_ACTION:"rtc_codeexample_plain"}}})},"MW/rtc/model/io/serializers/providers/containers/TableOfContentsContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/TableOfContentsContainerSerializer"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/TableOfContentsContainerSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,f,g,e,d){return h(d,{write:function(c,b,a){var d=document.createElement(e.SDT_TAG),f=g.createXMLElement(e.SDT_TAG),m=
g.createXMLElement(e.SDT_PROPERTY_TAG),m=g.createSdtPartGalleryPropertyElement(m,this.getXMLType());f.appendChild(m);var h=g.createXMLElement(e.SDT_CONTENT_TAG);f.appendChild(h);c[0].children&&c[0].children.forEach(function(c){c=a.getSerializer(c.className).write(c,b,a);h.appendChild(c)},this);d.appendChild(f);return d},read:function(c,b,a){var d=!0,l={className:this.getNodeType(),children:[]};2<c.childNodes.length?(c=Array.prototype.slice.call(c.childNodes).reduce(f.partial(this._reduceByNodeType,
a),[]),c=c.map(function(a){return this._combineParagraphs(a)},this)):c=c.childNodes;for(var m=0;m<c.length;m++){var h=a.getSerializer(g.getClassName(c[m])),n=c[m].getElementsByTagNameNS(e.NAMESPACE_URL,e.PARAGRAPH_STYLE_TAG_NAME)[0],p={};h&&(p=this._readParagraph(c[m],b,a),p.readObject.className=g.getClassName(n),l.children.push(p.readObject),p.readStatus||(d=!1))}return{readObject:[l],readStatus:d}},_reduceByNodeType:function(c,b,a){c.getSerializer(g.getAttribute(a));(c=b[b.length-1])&&g.getAttribute(c[0])===
g.getAttribute(a)?c.push(a):b.push([a]);return b},_combineParagraphs:function(c){for(var b=c[0],a=1;a<c.length;a++){for(var d=b.lastElementChild;d.lastElementChild;)d=d.lastElementChild;for(d.textContent+="\n";1<c[a].children.length;)b.appendChild(c[a].children[1])}return b},getXMLType:function(){return"Table of Contents"},getNodeType:function(){return"TableOfContentsContainer"}})})},"MW/rtc/model/io/XmlUtils":function(){define(["MW/rtc/model/io/DocumentTag","MW/rtc/plugins/saveaspdf/utils/XSLConstants"],
function(h,f){return{createDocument:function(f){var e;document.implementation&&document.implementation.createDocument&&(e=f===h.ROOT_TAG_NAME?document.implementation.createDocument(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.ROOT_TAG_NAME,null):document.implementation.createDocument(null,f,null));return e},createAlternateContent:function(f,e,d){var c=this._createAlternateContentXMLElementNS(h.MCNAMESPACE_TAG,h.ALTERNATECONTENT_TAG),b=this._createAlternateContentXMLElementNS(h.MCNAMESPACE_TAG,h.CHOICE_TAG);
b.setAttribute(h.REQUIRES_ATTRIBUTE_NAME,f);b.appendChild(e);c.appendChild(b);f=this._createAlternateContentXMLElementNS(h.MCNAMESPACE_TAG,h.FALLBACK_TAG);d&&f.appendChild(d);c.appendChild(f);return c},_createAlternateContentXMLElementNS:function(f,e){return document.createElementNS(h.MARKUP_COMPATIBILITY_NAMESPACE,f+":"+e)},createXMLElement:function(f){f=!f?h.PARAGRAPH_TAG_NAME:f;f=h.NAMESPACE_TAG+":"+f;return document.createElementNS(h.NAMESPACE_URL,f)},createXMLElementNS:function(f,e){f=f||h.NAMESPACE_TAG;
e=!e?h.PARAGRAPH_TAG_NAME:e;return document.createElementNS(h.NAMESPACE_URL,f+":"+e)},createBookmarkStart:function(f,e){var d=this.createXMLElement(h.BOOKMARK_START_TAG_NAME);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.NAME_TAG,f);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.TYPE_ID_TAG,e);return d},createBookmarkEnd:function(f){var e=this.createXMLElement(h.BOOKMARK_END_TAG_NAME);e.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.TYPE_ID_TAG,f);return e},createParagraphProperty:function(f){var e=
this.createXMLElement(h.PARAGRAPH_PROPERTY_TAG_NAME),d=this.createXMLElement(h.PARAGRAPH_STYLE_TAG_NAME);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,f);e.appendChild(d);return e},addParagraphProperty:function(f,e,d){e=this.createXMLElement(e);e.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,d);f.appendChild(e);return f},createListType:function(f){var e=this.createXMLElement(h.NUMBER_PROPERTY_TAG),d=this.createXMLElement(h.NUMBER_ID_TAG);d.setAttributeNS(h.NAMESPACE_URL,
h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,f);e.appendChild(d);return e},createHyperLinkTag:function(f,e){var d=this.createXMLElement(h.HYPERLINK_TAG);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+e,f);return d},createCustomXMLTag:function(f){var e=this.createXMLElement(h.CUSTOM_XML_TAG);e.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.CUSTOM_ELEMENT_TAG,f);return e},createCustomXMLProperty:function(f,e){var d=this.createXMLElement(h.CUSTOM_XML_PROPERTY),c=this.createXMLElement(h.CUSTOM_XML_ATTRIBUTE);
c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.NAME_TAG,f);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.CUSTOM_XML_VALUE_TAG,e);d.appendChild(c);return d},createCustomXMLAttribute:function(f,e){var d=this.createXMLElement(h.CUSTOM_XML_ATTRIBUTE);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.NAME_TAG,f);d.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.CUSTOM_XML_VALUE_TAG,e);return d},getBookmarkStart:function(f){f=f.getElementsByTagNameNS(h.NAMESPACE_URL,h.BOOKMARK_START_TAG_NAME);
if(f[0]&&f[0].attributes[0]){var e={};e.name=f[0].attributes[0].nodeValue;e.id=f[0].attributes[1].nodeValue;return e}},getBookmarkEnd:function(f){f=f.getElementsByTagNameNS(h.NAMESPACE_URL,h.BOOKMARK_END_TAG_NAME);if(f[0]&&f[0].attributes[0])return f[0].attributes[0].nodeValue},getListType:function(f){return f.getElementsByTagNameNS(h.NAMESPACE_URL,h.NUMBER_PROPERTY_TAG)[0].getElementsByTagNameNS(h.NAMESPACE_URL,h.NUMBER_ID_TAG)[0].attributes[0].nodeValue},getParagraphProperty:function(f,e){var d=
f.getElementsByTagNameNS(h.NAMESPACE_URL,e);return d&&d[0]&&d[0].attributes&&d[0].attributes[0]?d[0].attributes[0].nodeValue:""},getAttribute:function(f){var e=f.getElementsByTagNameNS(h.NAMESPACE_URL,h.PARAGRAPH_PROPERTY_TAG_NAME);return e&&e[0]?(e=e[0].getElementsByTagNameNS(h.NAMESPACE_URL,h.PARAGRAPH_STYLE_TAG_NAME),e[0]?e[0].attributes[0].nodeValue:this.hasSectionBreak(f)?"sectionbreak":!1):!1},createSdtAliasPropertyElement:function(f,e){var d=this.createXMLElement(h.ALIAS_TAG);d.setAttributeNS(h.NAMESPACE_URL,
h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,e);f.appendChild(d);return f},createSdtPartGalleryPropertyElement:function(f,e){var d=this.createXMLElement(h.DOC_PART_OBJ),c=this.createXMLElement(h.DOC_PART_GALLERY);d.appendChild(c);c.setAttributeNS(h.NAMESPACE_URL,h.NAMESPACE_TAG+":"+h.PROPERTY_TAG,e);f.appendChild(d);return f},getSdtAttribute:function(f){f=f.getElementsByTagNameNS(h.NAMESPACE_URL,h.SDT_PROPERTY_TAG);if(!f)return null;for(var e=0;e<f.length;e++){var d=f[e].getElementsByTagNameNS(h.NAMESPACE_URL,
h.ALIAS_TAG);if(d[0]&&d[0].attributes&&0<d[0].attributes.length||f[e].getElementsByTagNameNS(h.NAMESPACE_URL,h.DOC_PART_OBJ)&&(d=f[e].getElementsByTagNameNS(h.NAMESPACE_URL,h.DOC_PART_GALLERY))&&d[0]&&d[0].attributes&&0<d[0].attributes.length)return d[0].attributes[0].nodeValue}return null},getSdtAttribute:function(f){if(f=f.getElementsByTagNameNS(h.NAMESPACE_URL,h.SDT_PROPERTY_TAG))for(var e=0;e<f.length;e++){var d=f[e].getElementsByTagNameNS(h.NAMESPACE_URL,h.ALIAS_TAG);if(d&&d[0]&&d[0].attributes&&
0<d[0].attributes.length||f[e].getElementsByTagNameNS(h.NAMESPACE_URL,h.DOC_PART_OBJ)&&(d=f[e].getElementsByTagNameNS(h.NAMESPACE_URL,h.DOC_PART_GALLERY))&&d[0]&&d[0].attributes&&0<d[0].attributes.length)return d[0].attributes[0].nodeValue}return null},hasHyperLink:function(f){return f.hasAttributeNS(h.NAMESPACE_URL,h.DOC_LOCATION)||f.hasAttributeNS(h.NAMESPACE_URL,h.ANCHOR)},hasEquation:function(f){if(f=f.attributes[0])return"equation"===f.textContent},hasImage:function(f){if(f=f.attributes[0])return"image"===
f.textContent},hasLiveControl:function(f){if(f=f.attributes[0])return"livecontrol"===f.textContent},hasToCHeading:function(f){if(f.attributes&&f.attributes[0])return"TOCHeading"===f.attributes[0].textContent},hasToCItems:function(f){if(f.attributes&&f.attributes[0])return"TOC1"===f.attributes[0].textContent},hasSectionBreak:function(f){return 1===f.getElementsByTagNameNS(h.NAMESPACE_URL,h.SECTION_PROPERTY_TAG_NAME).length},getClassName:function(f){if(this.hasHyperLink(f))return"HyperlinkNode";if(this.hasEquation(f))return"EquationNode";
if(this.hasText(f))return"RichTextNode";if(this.hasImage(f))return"ImageNode";if(this.hasLiveControl(f))return"LiveControlNode";if(this.hasSectionBreak(f))return"SectionBreak";if(this.hasToCHeading(f))return"TableOfContentsHeadingNode";if(this.hasToCItems(f))return"TableOfContentsList"},hasText:function(f){return 0===f.getElementsByTagNameNS(h.NAMESPACE_URL,h.TEXT_TAG_NAME).length?!1:!0},getKeyFromValue:function(f,e){for(var d in f)if(f.hasOwnProperty(d))if("[object Array]"===Object.prototype.toString.call(f[d].type)){if(-1!==
f[d].type.indexOf(e))return d}else if(f[d].type===e||f[d]===e)return d},getURLExtension:function(f){var e="";f.match(/^(http|https):\/\//)&&(e=f.split(".").pop().split(/\#|\?/)[0].trim());return e},getImageExtension:function(f){var e=this.getURLExtension(f);e||(e=f.split(";")[0].split("/")[1]);return e},getTextFromRun:function(f){f=f.getElementsByTagNameNS(h.NAMESPACE_URL,h.TEXT_TAG_NAME);var e="";if(0===f.length)return e;for(var d=0;d<f[0].childNodes.length;d++)e+=f[0].childNodes[d].nodeValue;return e},
isCode:function(g){return-1<g.className.indexOf(f.LINENODE_CLASS)},serializeToFormattedString:function(f){f=(new window.XMLSerializer).serializeToString(f);return h.XML_HEADER+f}}})},"MW/rtc/model/io/DocumentTag":function(){define([],function(){return{XML_HEADER:'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',NAMESPACE_URL:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",RELATIONSHIP_TYPE:"http://schemas.mathworks.com/matlab/code/2013/relationships/document",IMAGE_RELATIONSHIP_TYPE:"http://schemas.mathworks.com/matlab/code/2013/relationships/image",
MATHML_RELATIONSHIP_TYPE:"http://www.w3.org/TR/MathML2/",DOCUMENT_TARGET:"/matlab/document.xml",DOCUMENT_CONTENT_TYPE:"application/vnd.mathworks.matlab.code.document+xml",NAMESPACE_TAG:"w",SCHEMA_TAG:"xmlns",ROOT_TAG_NAME:"document",BODY_TAG_NAME:"body",TYPE_TAG:"Type",TYPE_ID_TAG:"id",NUMBER_TAG:"num",NUMBER_PROPERTY_TAG:"numPr",NUMBER_ID_TAG:"numId",PARAGRAPH_TAG_NAME:"p",PARAGRAPH_PROPERTY_TAG_NAME:"pPr",PROPERTY_TAG:"val",PARAGRAPH_STYLE_TAG_NAME:"pStyle",JUSTIFCATION_TAG_NAME:"jc",RUN_OF_TEXT_TAG_NAME:"r",
RUN_OF_TEXT_PROPERTY_TAG_NAME:"rPr",BOOKMARK_START_TAG_NAME:"bookmarkStart",BOOKMARK_END_TAG_NAME:"bookmarkEnd",TEXT_TAG_NAME:"t",BOLD_TAG_NAME:"b",ITALIC_TAG_NAME:"i",UNDERLINE_TAG_NAME:"u",RUN_OF_FONT:"rFonts",FONT_TYPE_TAG:"cs",MONOSPACE_TAG:"monospace",CODE_FORMAT_VALUE:"code",TEXT_FORMAT_VALUE:"text",TITLE_FORMAT_VALUE:"title",HEADING_FORMAT_VALUE:"heading",LIST_FORMAT_VALUE:"ListParagraph",UNORDERED_LIST_VALUE:"1",ORDERED_LIST_VALUE:"2",RELATIONSHIP_ID_TAG_NAME:"relationshipId",HEIGHT_ATTRIBUTE_NAME:"height",
WIDTH_ATTRIBUTE_NAME:"width",SECTION_PROPERTY_TAG_NAME:"sectPr",HYPERLINK_FORMAT_VALUE:"hyperlink",HYPERLINK_ID:"r:id",HYPERLINK_TAG:"hyperlink",DOC_LOCATION:"docLocation",ANCHOR:"anchor",CUSTOM_XML_TAG:"customXml",CUSTOM_ELEMENT_TAG:"element",NAME_TAG:"name",EQUATION_ELEMENT:"equation",CUSTOM_XML_PROPERTY:"customXmlPr",CUSTOM_XML_ATTRIBUTE:"attr",CUSTOM_XML_VALUE_TAG:"val",EQUATION_DISPLAY_STYLE:"displayStyle",MCNAMESPACE_TAG:"mc",ALTERNATECONTENT_TAG:"AlternateContent",CHOICE_TAG:"Choice",REQUIRES_ATTRIBUTE_NAME:"Requires",
FALLBACK_TAG:"Fallback",LIVE_CONTROL_CONTEXT_ATTRIBUTE_NAME:"context",LIVE_CONTROL_START_OFFSET_LINE_ATTRIBUTE_NAME:"startOffsetLine",LIVE_CONTROL_START_COLUMN_ATTRIBUTE_NAME:"startColumn",LIVE_CONTROL_END_OFFSET_LINE_ATTRIBUTE_NAME:"endOffsetLine",LIVE_CONTROL_END_COLUMN_ATTRIBUTE_NAME:"endColumn",LIVE_CONTROL_TEXT_ATTRIBUTE_NAME:"text",SDT_TAG:"sdt",SDT_CONTENT_TAG:"sdtContent",SDT_PROPERTY_TAG:"sdtPr",DOC_PART_OBJ:"docPartObj",DOC_PART_GALLERY:"docPartGallery",ALIAS_TAG:"alias",MARKUP_COMPATIBILITY_NAMESPACE:"http://schemas.openxmlformats.org/markup-compatibility/2006"}})},
"MW/rtc/plugins/saveaspdf/utils/XSLConstants":function(){define({UNORDERED_LIST:"unordered",ORDERED_LIST:"ordered",PARAGRAPH:"paragraph",LIST:"list",MATRIX:"matrix",VARIABLES:"variables",VARIABLE_STRING:"variablestring",INTERACTIVE_VARIABLE:"interactivevariable",FIGURES:"figures",TEXT:"text",WARNING_ERROR:"warningerror",BASE_DOCUMENT:"basedocument",HYPERLINK:"hyperlink",IMAGE:"image",LIVE_CONTROL:"livecontrol",EQUATION:"equation",TABLEOFCONTENT:"tableOfContent",SYMEQUATION:"symequation",OUTPUT:"output",
BASE_FONT:"Arial,MingLiU,STSong,MS Mincho,AppleGothic,Malgun Gothic,Noto Sans CJK,Droid Sans Fallback,Arial Unicode MS",SQUARE_LIST_LABEL:"\u2022",NBSP:"\u00a0",LINENODE_CLASS:"lineNode",INLINE_WRAPPER_CLASS:"inlineWrapper",HEADING_CLASS:"heading-2",TITLE_CLASS:"heading-1",PARAGRAPH_CLASS:"paragraphNode",LIST_CLASS:"RTClistNode",CODE_EXAMPLE_CLASS:"CodeExampleLine",HYPERLINK_CLASS:"hyperlinkNode",IMAGE_CLASS:"imageNode",LIVE_CONTROL_CLASS:"liveControlOuterNode",EQUATIONNODE_CLASS:"equationNode",TABLEOFCONTENT_CLASS:"ToC",
OUTPUT_CLASS:"outputParagraph",MATRIX_CLASS:"embeddedOutputsMatrixElement",INTERACTIVE_MATRIX_CLASS:"embeddedOutputsVariableMatrixElement",VARIABLES_CLASS:"embeddedOutputsVariableElement",VARIABLE_STRING_CLASS:"embeddedOutputsVariableStringElement",FIGURES_CLASS:"embeddedOutputsFigure",SYMEQUATION_CLASS:"embeddedOutputsSymbolicElement",SECTIONBREAK_CLASS:"sectionBreak",SECTIONBLOCK_CLASS:"SectionBlock",TEXT_CLASS:"embeddedOutputsTextElement",WARNING_CLASS:"embeddedOutputsWarningElement",ERROR_CLASS:"embeddedOutputsErrorElement",
UNORDERED_LIST_NODENAME:"UL",ORDERED_LIST_NODENAME:"OL",BLOCK_CLASS_SUFFIX:"Block",TABLE:"table",TABLE_HEADER:"table-header",TABLE_COLUMN:"table-column",TABLE_ROW:"table-row",TABLE_DATA:"table-data",INTERACTIVE_VARIABLE_CLASS:"embeddedOutputsVariableTableElement",EQUATION_CLASS:"MathEquation",INTERNAL_LINK_PREFIX:"internal:",DOTS:"dots",POINT_UNIT:"pt",REGEX_FOR_PX:/px/g,FONT_SCALING_FACTOR:0.75,AVAILABLE_WIDTH:525,ELLIPSIS_WIDTH:32,CHAR_WIDTH:7.22})},"MW/rtc/model/io/serializers/containers/ContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-utils/Utils","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/Serializable"],function(h,f,g,e,d){return h(d,{read:function(c,b,a){var d=!0,e=[],g;Array.isArray(c)?c.forEach(f.hitch(this,function(c){g=this._readParagraph(c,b,a);e.push(g.readObject)})):(g=this._readParagraph(c,b,a),e=g.readObject);d=d&&g.readStatus;return{readObject:e,readStatus:d}},_readParagraph:function(c,b,a){for(var d=!0,f={className:this.getNodeType(),children:[]},g=0;g<c.childNodes.length;g++){var h=
a.getSerializer(e.getClassName(c.childNodes[g])),n={};h&&(n=h.read(c.childNodes[g],b,a),f.children.push(n.readObject),n.readStatus||(d=!1))}return{readObject:f,readStatus:d}},mustMerge:function(){return!1}})})},"MW/rtc/model/io/serializers/Serializable":function(){define(["dojo/_base/declare"],function(h){return h(null,{write:function(f,g){throw Error("Unimplemented Write Method in the handler for node type: "+this.getNodeType());},read:function(f,g){throw Error("Unimplemented Read Method in the handler for node type: "+
this.getNodeType());},getXMLType:function(){throw Error("Unimplemented getXMLType Method: handler.getXMLType()");},getNodeType:function(){throw Error("Unimplemented getNodeType Method: handler.getNodeType()");}})})},"MW/rtc/model/io/serializers/providers/containers/TableOfContentsHeadingSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/TableOfContentsHeadingSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/TableOfContentsHeadingSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/RichTextContainerSerializer"],function(h,f,g,e){return h(e,{write:function(d,c,b){return this._writeParagraph(d,c,b)},getNodeType:function(){return"TableOfContentsHeadingNode"},getXMLType:function(){return"TOCHeading"}})})},"MW/rtc/model/io/serializers/containers/RichTextContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang mw-utils/Utils MW/rtc/model/io/DocumentTag MW/rtc/model/io/XmlUtils MW/rtc/model/io/serializers/containers/ContainerSerializer mw-log/Log".split(" "),
function(h,f,g,e,d,c,b){return h(c,{_ALIGN_CENTER:"center",_ALIGN_LEFT:"left",_RICH_TEXT_CLASS:"RichTextNode",write:function(a,b,c){var d=document.createElement(this.getXMLType());if(Array.isArray(a)){var e=this;a.forEach(f.hitch(this,function(a){e._createAndAppendParagraph(a,d,b,c)}))}else this._createAndAppendParagraph(a,d);return d},_createAndAppendParagraph:function(a,b,c,d){(a=this._writeParagraph(a,c,d))&&b.appendChild(a)},_writeParagraph:function(a,c,g){var m=d.createXMLElement(),h=d.createParagraphProperty(this.getXMLType()),
h=d.addParagraphProperty(h,e.JUSTIFCATION_TAG_NAME,a.align);m.appendChild(h);var n=!1;a.children.forEach(f.hitch(this,function(a){var d=g.getSerializer(a.className);d?m.appendChild(d.write(a,c,g)):(n=!0,b.assert(n,!0,"Unrecognized node type:"+a.className))}));n&&1===m.children.length&&(m=null);return m},read:function(a,b,c){var f=d.getParagraphProperty(a[0],e.JUSTIFCATION_TAG_NAME),g=this.inherited(arguments);this._createAlignment(a,g.readObject,f,c);return g},_createAlignment:function(a,b,c,d){b.forEach(function(b){c?
b.align=c:this._shouldBeCentered(a,b,d)?b.align=this._ALIGN_CENTER:b.align=this._ALIGN_LEFT},this)},_shouldBeCentered:function(a,b,c){a=!1;for(var d=b.children[0]?b.children[0].className:"",e=0;e<b.children.length;e+=1){var f=b.children[e],g=c.getSerializer(b.children[e].className).AUTO_CENTER_CLASS?!0:!1;if(f.className!==this._RICH_TEXT_CLASS&&d!==f.className&&d!==this._RICH_TEXT_CLASS)return!1;if(g)a=g;else if(f.text&&0<f.text.trim().length)return!1}return a},getXMLType:function(){return"text"},
getNodeType:function(){return"RichTextParagraphNode"},mustMerge:function(a,b){return d.getParagraphProperty(a,e.JUSTIFCATION_TAG_NAME)===d.getParagraphProperty(b,e.JUSTIFCATION_TAG_NAME)}})})},"MW/rtc/model/io/serializers/providers/containers/TableOfContentsListSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/TableOfContentsListSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/TableOfContentsListSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/RichTextContainerSerializer"],function(h,f,g,e){return h(e,{write:function(d,c,b){return this._writeParagraph(d,c,b)},getNodeType:function(){return"TableOfContentsList"},getXMLType:function(){return"TOC1"}})})},"MW/rtc/plugins/internalhyperlinkservice/AnchorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./Anchor"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/internalhyperlinkservice/Anchor":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/richtext/nodes/inner/HeadingNode","./model/AnchorGenerator"],function(h,f,g,e){return h(f,{_HEADER_PREFIX:"H_",_TITLE_PREFIX:"T_",constructor:function(d){this._internalDocument=
d;this._tempAnchorIdRegister={}},createAnchor:function(d,c){var b="";!c&&d.isInstanceOf(g)&&(b=1===d.level?this._TITLE_PREFIX:this._HEADER_PREFIX);for(var a=e.createAnchorId(b);this._tempAnchorIdRegister[a];)a=e.createAnchorId(b);this._tempAnchorIdRegister[a]=d;return d.anchorId=a},createHeadingIds:function(){var d=[];this._internalDocument.root.children.forEach(function(c){c.isInstanceOf(g)&&c.level&&(this.createNodeId(c),d[d.length]=c)},this);return d},createNodeId:function(d){var c=!d.isInstanceOf(g);
return d.isInstanceOf(g)&&d.anchorId?this._tempAnchorIdRegister[d.anchorId]&&this._tempAnchorIdRegister[d.anchorId]!==d?this.createAnchor(d,c):d.anchorId:this.createAnchor(d,c)}})})},"MW/rtc/plugins/richtext/nodes/inner/HeadingNode":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,f){return h([f],{constructor:function(f,e){e&&(this.level=e.level)},className:"HeadingNode",containerType:function(){return 1===this.level?"title":"heading"},
isSameTypeAs:function(f){return this.className===f.className&&this.level===f.level},canSpliceContainers:function(f,e){return f.level===e.level},isTextContainerNode:function(){return!0},resetUniqueAttributes:function(){this.inherited(arguments);delete this.anchorId},_serializeAttributes:function(f){this.inherited(arguments);f.level=this.level}})})},"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode"],
function(h,f){return h([f],{constructor:function(f,e){e&&(this.align=e.align,e.anchorId&&(this.anchorId=e.anchorId));this.align=this.align||"left";this.wrappable=!0},className:"RichTextParagraphNode",_childrenAlign:"",containerType:function(){return"text"},isConvertable:function(){return!0},isTextContainerNode:function(){return!0},_serializeAttributes:function(f){f.align=this.align;this.anchorId&&(f.anchorId=this.anchorId)}})})},"MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/InnerNode"],function(h,f){return h([f],{constructor:function(f){},className:"RichTextContainerNode",_childrenAlign:"",defaultTextNode:function(){return{className:"RichTextNode",text:""}}})})},"MW/rtc/plugins/internalhyperlinkservice/model/AnchorGenerator":function(){define(["mw-utils/Utils"],function(h){return{_createUID:function(){return h.generateUuid()},createAnchorId:function(f){return f+this._createUID()}}})},"MW/rtc/plugins/tableofcontents/TableOfContentsProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/tableofcontents/TableOfContents","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:"rtc.actionservice rtc.internaldocument rtc.document rtc.cursor rtc.richtext.anchor rtc.undoredo.controller rtc.draganddropnotifier rtc.divselection rtc.cutcopypaste rtc.cutcopypaste.converter rtc.view".split(" ")}},createInstance:function(e,d,c,b,a,k,g,m,h,n,p){return new f(e,d,c,b,a,k,g,m,h,n,p)}})})},"MW/rtc/plugins/tableofcontents/TableOfContents":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect ./model/TableOfContentsList ./model/TableOfContentsContainer ./model/TableOfContentsHeadingNode MW/rtc/abstract/AbstractPlugin MW/rtc/RichTextComponentFeatureEnum MW/rtc/plugins/richtext/nodes/inner/HeadingNode MW/rtc/plugins/undoredo/EditBlockConstants MW/rtc/model/SelectionUtilities ./TableOfContentsCreator ./TableOfContentsUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentConstants MW/rtc/model/Range MW/rtc/model/Position MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v){return h(b,{_CURSOR_INSIDE_TOC_CSS_TAG:"insideToC",constructor:function(a,b,d,e,k,l,m,h,n,q,p){this._internalDocument=b;this._document=d;this._cursor=e;this._actionService=a;this._anchor=k;this._divSelection=h;this._view=p;this._dirtyToC=!1;a.loadActions(this._actions());this.own(g.before(this._document,"insertContent",f.hitch(this,"_insertContent")));this.own(g.before(m,"onDragOver",f.hitch(this,"_dragOver")));this.own(g.after(this._cursor,"onChange",
f.hitch(this,"_onChange")));this.own(g.after(l,"undo",f.hitch(this,"_onUndoRedo"),!0));this.own(g.after(l,"redo",f.hitch(this,"_onUndoRedo"),!0));this.own(g.after(this._document,"insertContent",f.hitch(this,"_onPasteUpdater")));this.own(g.after(this._document,"onDelete",f.hitch(this,"_updateActions")));this.own(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_onDocumentReset"),!0));this.own(g.after(h,"_layout",f.hitch(this,"_checkSelection"),!0));this.own(g.after(this._internalDocument,
"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(this._document,"onPreDeletion",f.hitch(this,"_onDelete"),!0));q.registerPasteHandler(c,f.hitch(this,"_handlePaste"));this._converter=q},createTableOfContents:function(){if(!this._tableOfContentsContainer){var a=this._anchor.createHeadingIds(),b=this._cursor.getSelection(),c;b&&(c=!m.isInSelection(e,b)?b:null);b=this._document.startEdit();this._tableOfContentsContainer=q.createTableOfContents(a,this._internalDocument,
this._cursor,b);this._updateActions();this._document.endEdit();c?this._cursor.setSelection(c):this._cursor.releaseAnchor();this._cursor.onUpdate()}},_autoUpdate:function(a){if(this._tableOfContentsContainer&&this._tableOfContentsContainer.parent){var b=this._cursor.getNode().rootContainer(),c=this._cursor.selectionInfo(),d=b instanceof e;a||b!==this._lastcursorLineNode&&this._docWasChanged&&this._lastcursorLineNode&&this._lastcursorLineNode instanceof k&&c.startPosition.isEqualTo(c.endPosition)&&
!this._onDrag?(this._lastcursorLineNode=b,this._docWasChanged=!1,d&&(this._cursor.setPosition(b.startPosition()),this._cursor.collapseSelection()),a=this._document.startEdit(l.AUTO),q.updateTableOfContents(this._internalDocument,this._tableOfContentsContainer,this._anchor.createHeadingIds(),this._view,a),this._document.endEdit(),this._cursor.onUpdate()):(this._lastcursorLineNode=b,this._onDrag=!1)}},_handleDocumentChanged:function(a){if(this._tableOfContentsContainer&&a){var b=a[0],b=b||{},c=!1;a.forEach(function(a){a.type===
r.FORMAT_CHANGE_EVENT&&(c=!0)});b.isUndoRedo||b.startLine===b.endLine&&this._internalDocument.getLineNumber(this._tableOfContentsContainer)===b.endLine?this._docWasChanged=!1:(c?this._autoUpdate(!0):b.type===r.DELETION_EVENT&&b.startLine!==b.endLine?this._autoUpdate(!0):1<a.length&&(a[0].type===r.DELETION_EVENT&&a[1].type===r.INSERT_TEXT)&&this._autoUpdate(!0),this._docWasChanged=!0)}},_onDocumentReset:function(){this._dirtyToC=!0},_onPasteUpdater:function(){this._tableOfContentsContainer=n.findTableOfContentsContainer(this._internalDocument);
this._updateActions();this._autoUpdate(!0)},_onUndoRedo:function(){if(this._tableOfContentsContainer=n.findTableOfContentsContainer(this._internalDocument))m.updateSelection(this._cursor,this._tableOfContentsContainer,this._divSelection,this._internalDocument),this._updateReadOnly();this._updateActions()},_insertContent:function(a,b,c){var d;a.forEach(function(a){"TableOfContentsContainer"===a.className&&(d=a)});var e=d&&this._tableOfContentsContainer;d&&(1===a.length&&2===d.children.length?a[1]=
new u([]):2!==d.children.length&&(e=!0));if(e){for(var k=[],e=a.indexOf(d),f=0;f<e;f++)k[f]=a[f];d.children.forEach(function(a){a.className="RichTextParagraphNode";k[k.length]=a});for(f++;f<a.length;f++)k[k.length]=a[f];a=k}else d&&!this._tableOfContentsContainer&&(this._dirtyToC=!0,n.makeReadOnly(d.children[1],!0));return[a,b,c]},_handlePaste:function(a,b,c){a=this._converter.convertContentFromSource(c);this._document.insertTextAtCurrentPosition(n.getTextFromJSON(a));return!0},_dragOver:function(a){a.target.parentElement.rteNode&&
a.target.parentElement.rteNode.rootContainer()instanceof d&&(a.dataTransfer.dropEffect="none",a.dataTransfer.effectAllowed="none");this._onDrag=!0},_actions:function(){return[{id:a.TABLE_OF_CONTENTS.TABLE_OF_CONTENTS_ACTION,key:"ctrl_alt_c",platformKey:{mac:"meta_alt_c"},enabled:!1,callback:f.hitch(this,"createTableOfContents")},{id:"rtc_general_table_of_contents_linebreak",enabled:!0,key:"enter",callback:f.hitch(this,"_handleLineBreak")},{id:"rtc_general_table_of_contents_shift_linebreak",enabled:!0,
key:"shift_enter",callback:f.hitch(this,"_handleLineBreak")}]},_updateActions:function(){this._actionService.updateAction(a.TABLE_OF_CONTENTS.TABLE_OF_CONTENTS_ACTION,{enabled:this._canCreateTableOfContents()})},_handleLineBreak:function(){var a=this._cursor.getNode().rootContainer();if(a instanceof d){if(p.isAtStartOfContainer(this._cursor.position,a)){var b=this._document.startEdit(),c=this._internalDocument.createContainerForType("text").container,e=this._internalDocument.createNode(c.defaultTextNode());
c.addChild(e);c=this._internalDocument.insertAtPosition(c,new t(a,0));this._internalDocument.emitDocumentEvents(c.events);this._cursor.setPosition(a);b.appendRedoEvents(c.events);b.appendUndoEvents(c.events);this._document.endEdit();this._cursor.onUpdate();return!0}this._cursor.setPosition(a.nextSibling());return!0}return!1},_onChange:function(){this._dirtyToC&&(this._tableOfContentsContainer=n.findTableOfContentsContainer(this._internalDocument),this._dirtyToC=!1);this._autoUpdate();this._styleOnCursor();
this._updateActions();this._tableOfContentsContainer&&(m.checkFullSelection(this._cursor,this._tableOfContentsContainer,this._internalDocument),this._updateReadOnly())},_updateReadOnly:function(){var b=this._isReadOnlySet;m.isInFullSelection(this._cursor,this._internalDocument,this._tableOfContentsContainer)?(n.makeReadOnly(this._tableOfContentsContainer.lastChild(),!1),this._isReadOnlySet=!1,this._actionService.updateAction(a.CUT_COPY_PASTE.CUT_ACTION,{enabled:!0}),this._actionService.updateAction(a.CUT_COPY_PASTE.PASTE_ACTION,
{enabled:!0}),this._tableOfContentsContainer.childrenAreContainers=!0):this._isReadOnlySet||(this._isReadOnlySet=!0,n.makeReadOnly(this._tableOfContentsContainer.lastChild(),!0),this._tableOfContentsContainer.childrenAreContainers=!1);if(b!==this._isReadOnlySet)this._cursor.onChange()},_styleOnCursor:function(){if(this._tableOfContentsContainer){var a=this._cursor.getSelection(),a=(a=m.isInSelection(d,a))?a:this._cursor.getNode().rootContainer(),b=this._internalDocument.getLineNumber(this._tableOfContentsContainer);
a instanceof d?this._view.applyClassToLine(b,this._CURSOR_INSIDE_TOC_CSS_TAG):this._view.removeClassFromLine(b,this._CURSOR_INSIDE_TOC_CSS_TAG)}},_onDelete:function(a){a=n.deleteToC(this._cursor,this._document,this._internalDocument,this._tableOfContentsContainer,a);a.dirty&&(this._dirtyToC=!0,this._tableOfContentsContainer=void 0);return a.done},_checkSelection:function(){this._tableOfContentsContainer&&m.updateSelection(this._cursor,this._tableOfContentsContainer,this._divSelection,this._internalDocument)},
_canCreateTableOfContents:function(){return!(this._tableOfContentsContainer&&this._tableOfContentsContainer.parent)}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsList":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,f){return h([f],{className:"TableOfContentsList",constructor:function(f,e){this.wrappable=!1},isTextContainerNode:function(){return!0},isConvertable:function(){return!1},isReadOnly:function(){return!0},containerType:function(){return"toc"},
offsetInContainer:function(f){var e,d=0;f=f||this.textContainer();for(var c=0;c<f.children.length;c++){e=f.children[c];if(this===e)return d;d=d+e.maxOffset()+f.CHILD_TEXT_SEPARATOR.length}return 0}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainer":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode"],function(h,f){return h([f],{className:"TableOfContentsContainer",constructor:function(f,e){this.isUnique=this.wrappable=!0},isTextContainerNode:function(){return!0},isReadOnly:function(){return!1},
isSplittable:function(f){return!1},containerType:function(){return"toc"}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNode":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,f){return h([f],{constructor:function(f,e){e=e||{};e.align&&(this.align=e.align);this.wrappable=!1},className:"TableOfContentsHeadingNode",containerType:function(){return"ToCHeading"},canSpliceContainers:function(f,e){return!0},isTextContainerNode:function(){return!0},
isConvertable:function(){return!1},offsetInContainer:function(f){var e,d=0;f=f||this.textContainer();for(var c=0;c<f.children.length;c++){e=f.children[c];if(this===e)return d;d=d+e.maxOffset()+f.CHILD_TEXT_SEPARATOR.length}return 0},isSplittable:function(f){return!1},canMergeContainerWithSibling:function(f,e){return!0},_serializeAttributes:function(f){this.align&&(f.align=this.align);this.anchorId&&(f.anchorId=this.anchorId)}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsCreator":function(){define("MW/rtc/model/CodeUtilities MW/rtc/model/Position MW/rtc/plugins/richtext/nodes/leaf/RichTextNode MW/rtc/plugins/hyperlink/model/HyperlinkNode MW/rtc/model/events/DeletionEvent ./model/TableOfContentsList ./model/TableOfContentsContainer ./model/TableOfContentsHeadingNode dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,f,g,e,d,c,b,a,k){return{_COLON:":",_HYPERLINK_TAG:"internal",_LINE_BREAK:"\n",_SPACE4:"    ",createTableOfContents:function(a,d,e,k){var f=new b([]);e=this._getInsertPosition(e);this._createTableOfContentsHeading(f);var g=new c([]);a=this._stripEmptyHeadingsOut(a);this._createItems(a).forEach(function(a){g.addChild(a)});f.addChild(g);a=d.insertAtPosition(f,e);d.emitDocumentEvents(a.events);k.appendUndoEvents(a.events);k.appendRedoEvents(a.events);return f},updateTableOfContents:function(a,
b,c,e,k){var f=b.lastChild();e=f.children.length;c=this._stripEmptyHeadingsOut(c);var g=[];this._createItems(c).forEach(function(b){b=a.insertAtPosition(b,f.endPosition());g=g.concat(b.events)});a.emitDocumentEvents(g);b=a.getLineNumber(b);for(c=0;c<e;c++)a.deleteNode(f.firstChild());b=[d.create(b,b)];a.emitDocumentEvents(b)},_createItems:function(a){for(var b=a.length,c=this._insertTitle(a),d=[],k=this._getAvailableDepth(a),f=0;f<b;f++)if(1!==a[f].level||c){var h=new e([],{hyperlink:this._HYPERLINK_TAG+
this._COLON+a[f].anchorId,readOnly:!0}),t=this._getSpacing(a[f].level,c,k);""!==t&&(t=new g({text:t,readOnly:!0}),d.push(t));t=new g({text:f!==b-1?a[f].getText()+this._LINE_BREAK:a[f].getText(),readOnly:!0});h.addChild(t);d.push(h)}0===d.length&&(a=new g([]),a.text=" ",a.readOnly=!0,d.push(a));return d},_stripEmptyHeadingsOut:function(a){return a.filter(function(a){return""!==a.getText()})},_insertTitle:function(a){for(var b=0,c=0;c<a.length;c++)1===a[c].level&&b++;return 1<b?!0:!1},_getAvailableDepth:function(a){var b=
[];a.forEach(function(a){-1===b.indexOf(a.level)&&b.push(a.level)});return b.sort()},_getSpacing:function(a,b,c){var d="";for(b=b?0:1;b<c.indexOf(a);b++)d+=this._SPACE4;return d},_getInsertPosition:function(a){a=a.selectionInfo().startNode;if(!h.isCodeContainer(a))return new f(a,0);for(a=a.textContainer();a;){if(!a.prevNode()||!h.isCodeContainer(a.prevNode()))return new f(a,0);a=a.prevNode().textContainer()}},_createTableOfContentsHeading:function(b){var c=new g({text:k.tableOfContentsHeading,bold:!0}),
c=new a([c]);b.addChild(c)}}})},"MW/rtc/plugins/richtext/nodes/leaf/RichTextNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/TextProportionalFontNode"],function(h,f){return h([f],{constructor:function(f){this.font=f.font||null;this.size=f.size||null;this.bold=void 0!==f.bold?f.bold:null;this.italic=void 0!==f.italic?f.italic:null;this.monospace=void 0!==f.monospace?f.monospace:null;this.underline=void 0!==f.underline?f.underline:null},className:"RichTextNode",_styleAttributes:"font size bold italic monospace underline color".split(" "),
_serializeAttributes:function(f){f.text=this.text;void 0!==this.font&&null!==this.font&&(f.font=this.font);void 0!==this.size&&null!==this.size&&(f.size=this.size);void 0!==this.bold&&null!==this.bold&&(f.bold=this.bold);void 0!==this.italic&&null!==this.italic&&(f.italic=this.italic);void 0!==this.underline&&null!==this.underline&&(f.underline=this.underline);void 0!==this.monospace&&null!==this.monospace&&(f.monospace=this.monospace);void 0!==this.color&&null!==this.color&&(f.color=this.color)},
movePositionRight:function(f){if(f.isRightAligned()&&0<f.getOffset()){var e=this.getPositionFromOffset(f.getOffset()-1);return this.inherited(arguments,[e])}return this.inherited(arguments)}})})},"MW/rtc/plugins/hyperlink/model/HyperlinkNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode","MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode"],function(h,f,g){return h([g],{constructor:function(e,d){this.hyperlink="";d&&(d.hyperlink&&(this.hyperlink=d.hyperlink),d.readOnly&&
(this.readOnly=d.readOnly))},className:"HyperlinkNode",_childrenAlign:"horizontal",isTextNode:function(){return!0},containsTextNodes:function(){return!0},getPositionFromOffset:function(e){e=this.findChildIndexForPosInNode(e);return this.children[e.n].getPositionFromOffset(e.posInNode)},findChildIndexForPosInNode:function(e){if(this.children){0>e&&(e+=this.getTextForPositioning().length+1);for(var d=0;e>this.children[d].maxOffset()&&this.children[d].nextSibling();)e-=this.children[d].maxOffset(),d+=
1;return{n:d,posInNode:e}}return{n:0,posInNode:e}},maxOffset:function(){if(this.children){for(var e=0,d=0;this.children[e];)d+=this.children[e].maxOffset(),e+=1;return d}return 0},lineBorderOffset:function(e,d){var c;if(this.children){var b=this.findChildIndexForPosInNode(d);c=d-b.posInNode;b=this.children[b.n].lineBorderOffset(e,b.posInNode);c+=b.getOffset();return this.getPositionFromOffset(c)}c=this.offsetInContainer();0<=e&&(c+=this.maxOffset());return this.getPositionFromOffset(c)},offsetInContainer:function(e){return this.children&&
this.children[0]?(e=e||this.rootContainer(),e._childOffset(this.children[0])):-1},replaceText:function(e){if(1<this.children.length){var d;for(d=this.children.length-1;0<d;d-=1)this.removeChild(d)}this.children[0].replaceText(e)},_serializeAttributes:function(e){e.hyperlink=this.hyperlink}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsUtilities":function(){define("dojo/_base/lang MW/rtc/model/DocumentUtilities ./model/TableOfContentsContainer ./model/TableOfContentsHeadingNode MW/rtc/model/events/DeletionEvent MW/rtc/model/events/InsertTextEvent MW/rtc/model/Selection MW/rtc/model/SelectionUtilities MW/rtc/model/Position MW/rtc/plugins/sectionbreak/model/SectionBreakNode".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return{deleteToC:function(c,d,h,p,r){var s=c.getNode().rootContainer(),t=c.getSelection(),u=c.selectionInfo(),v=a.isInSelection(g,t);if(s instanceof g||v){if(u.endNode.textContainer()instanceof e&&u.startNode.textContainer()instanceof e){if(f.isAtEndOfContainer(c.position,c.getNode().textContainer())&&0<r&&!t)if(this.coversFullParagraphs(u,c.getNode().textContainer())){if(0===c.getNode().textContainer().getText().length)return{done:!0,dirty:!1}}else return a.setContainerSelection(c,
h,p),{done:!0,dirty:!1};return{done:!1,dirty:!1}}if(v&&!(u.startNode.rootContainer()===p||u.endNode.rootContainer()===p))return{done:!1,dirty:!0};if(this.coversFullParagraphs(c.adjustSelection(u,!0),p))return this._deleteBlock(c,d,h,p),{done:!0,dirty:!0};if(t&&f.isAtStartOfContainer(t.getStartPosition(),p)&&h.getLineNumber(p)<h.getLineNumber(u.endNode.rootContainer()))return r=new k(p.nextSibling().firstChild(),0),this._deleteBlock(c,d,h,p),t=new b(r,t.getEndPosition(),!1,!1),c.setPosition(t.getEndPosition()),
c.setSelection(t),{done:!1,dirty:!0};a.setContainerSelection(c,h,p);return{done:!0,dirty:!1}}return!t&&(s.previousSibling()instanceof g&&f.isAtStartOfContainer(c.position,s)&&0>r||s.nextSibling()instanceof g&&f.isAtEndOfContainer(c.position,s)&&0<r&&!s.isEmpty())?(a.setContainerSelection(c,h,p),{done:!0,dirty:!1}):0>r&&s.previousSibling()instanceof l&&s.previousSibling().previousSibling()instanceof g&&f.isAtStartOfContainer(c.position,s)?(this._deleteBlock(c,d,h,s.previousSibling()),{done:!0,dirty:!1}):
{done:!1,dirty:!1}},coversFullParagraphs:function(a,b){return f.isAtStartOfContainer(a.startPosition,b)&&f.isAtEndOfContainer(a.endPosition,b)},_deleteBlock:function(a,b,e,f){var g=b.startEdit(),h=new k(f,0),t=f.getText();f.nextSibling()instanceof l&&e.deleteNode(f.nextSibling());a.setPosition(f.nextSibling());a.releaseAnchor();a=e.getLineNumber(f)+1;e.deleteNode(f);f=[d.create(a-1,a-1)];h=[c.create(a-1,a+1,h,t)];e.emitDocumentEvents(f);g.appendRedoEvents(f);g.appendUndoEvents(h);b.endEdit()},findTableOfContentsContainer:function(a){if(a=
a.root.children)for(var b=a.length,c=0;c<b;c++)if(a[c]instanceof g)return a[c];return null},makeReadOnly:function(a,b){a&&a.children.forEach(function(a){a.readOnly=b;a.children&&this.makeReadOnly(a,b)},this)},getTextFromJSON:function(a){var b=a.text?a.text:"";a.forEach(function(a){b+=a.text?a.text:"";a.children&&(b+=this.getTextFromJSON(a.children)+" ")},this);return b}}})},"MW/rtc/plugins/sectionbreak/model/SectionBreakNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode","MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule"],
function(h,f,g){return h([f],{"-chains-":{constructor:"manual"},constructor:function(){this.inherited(arguments,[[]]);this.groupingType=g().groupingType},className:"SectionBreak",containerType:function(){return""},endNode:function(){return this.previousSibling()?this.previousSibling().endNode():null},startNode:function(){return this.nextSibling()?this.nextSibling().startNode():null},getHeight:function(){return this.box?this.box.offsetHeight:0},getPositionFromOffset:function(e){return this.nextSibling().getPositionFromOffset(e)},
startPosition:function(){return this.previousSibling().endPosition()},endPosition:function(){return this.nextSibling().startPosition()}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct","MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule"],function(h,f,g,e){return h(e,{groupingType:"containment",_BLOCK_POSTFIX:"Block",_BLOCK_CLASS:"SectionBlock containment",constructor:function(d){this._domTarget=
d},getOperationsForLayout:function(d,c,b){return this._isApplicable(c)?this._hasToRedrawNeighboringBlocks(c,b)?this._redrawNeighboringBlocks(d,c):this._drawAroundSiblingBlocks(d,c):this._wrapDomNodeIntoBlock(d,c,b)},_hasToRedrawNeighboringBlocks:function(d,c){if(!this._domTarget.contains(c))return!1;var b=this._getBlock(d.previousSibling()),a=this._getBlock(d.nextSibling());return this._isBlockElement(b)&&this._isBlockElement(a)&&b.nextElementSibling===a?!1:!0},_redrawNeighboringBlocks:function(d,
c){var b={};b.nodeToPlace=d;var a=c.previousSibling(),e=c.nextSibling(),a=this._getNodesToRedraw(a,!0),e=this._getNodesToRedraw(e,!1);if(0===a.length&&0===e.length)return b;b.prevNodes=a;b.nextNodes=e;a=0<a.length&&this._getBlock(a[0]);e=0<e.length&&this._getBlock(e[0]);b.nodeToPlaceRefNode=a||e;b.nodeToPlaceRefPos=a?"after":"before";b.nodesToRemove=[];a&&b.nodesToRemove.push(a);e&&b.nodesToRemove.push(e);return b},_drawAroundSiblingBlocks:function(d,c){var b=this._getBlock(c.previousSibling());return b?
{nodeToPlace:d,nodeToPlaceRefNode:b,nodeToPlaceRefPos:"after"}:(b=this._getBlock(c.nextSibling()))?{nodeToPlace:d,nodeToPlaceRefNode:b,nodeToPlaceRefPos:"before"}:null},_wrapDomNodeIntoBlock:function(d,c,b){var a={};c.isRootContainer()&&!this._hasSiblingBlockReference(c,b)&&(c=this._createBlock(),g.place(d,c),a.nodeToPlace=c,a.mergeWithSiblingBlock=!0);return a},_hasSiblingBlockReference:function(d,c){var b={currentNode:d,iterator:"previousSibling"},a={currentNode:d,iterator:"nextSibling"};do{if((b=
b&&this._stepSearchForSiblingBlockReference(d,b))&&b.found||(a=a&&this._stepSearchForSiblingBlockReference(d,a))&&a.found)return!0;if(!this._domTarget.contains(c))break}while(b||a);return!1},_stepSearchForSiblingBlockReference:function(d,c){var b=c.currentNode[c.iterator]();if(!b||b.groupingType===this.groupingType&&b.box&&b.box.parentElement)return null;var a=this._getBlock(b);a&&a.parentElement&&(c.found=!0);c.currentNode=b;return c},getOperationsForRemove:function(d,c){return this._isApplicable(d)?
this._removeAndMerge(d):this._removeBlockIfEmpty(d,c)},_removeAndMerge:function(d){d=this._getDomNode(d);var c=this._getSiblingBlocks(d);return{nodeToMerge:c?[c]:null,nodeToRemove:d}},_getSiblingBlocks:function(d){var c=d.previousElementSibling;d=d.nextElementSibling;return!this._isBlockElement(c)||!this._isBlockElement(d)?null:[c,d]},_removeBlockIfEmpty:function(d,c){var b=this._getBlock(d);return b&&1===b.childElementCount&&this._hasElementInBlock(c,b)?{nodeToRemove:b}:null},_hasElementInBlock:function(d,
c){return d.some(function(b){if(b.parentElement===c)return!0},this)},getRefDomNode:function(d,c,b){var a=this._getDomNode(c);return!a||!a.parentElement?null:this._isBlockElement(b)?this._getRefDomNodeForBlockObserver(d,c,a):this._getRefDomNodeForNonBlockObserver(d,c,a)},_getRefDomNodeForBlockObserver:function(d,c,b){var a,e=this._getBlock(c);e?a=e:this._isApplicable(c)&&(a=b);return a?{domNode:a,position:this._getRefPosition(d,c)}:null},_getRefDomNodeForNonBlockObserver:function(d,c,b){if(!this._isApplicable(c))return null;
var a=b.previousElementSibling,e=b.nextElementSibling;if(a||e){var f,g,h=d.nextSibling(),n=d.previousSibling();c===h?this._getBlock(d)?(f=b,g="before"):a&&(g="last",f=this._getBlock(n)||a):c===n&&(this._getBlock(d)?(f=b,g="after"):e&&(g="first",f=this._getBlock(h)||e));return f?{domNode:f,position:g}:null}},_createBlock:function(){return g.create("div",{"class":this._getBlockClass()})},_getBlockClass:function(){return this._BLOCK_CLASS},_getBlock:function(d){if(d){for(d=this._getDomNode(d);d;){if(this._isBlockElement(d))return d;
d=d.parentElement}return null}},_isBlockElement:function(d){return!!d&&f.contains(d,this._BLOCK_CLASS)},_canMergeBlocks:function(d,c){if(!d||!c)return!1;var b=d.className.split(" "),a=c.className.split(" ");return d&&c&&b[0]===a[0]},_canGroupTogether:function(d,c){return c.groupingType!==this.groupingType},priority:function(){return 2}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./TableOfContentsContainerInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/tableofcontents/TableOfContentsContainerInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants","./model/TableOfContentsContainer"],function(h,f,g,e){return h([f],{_compatibleParents:[],
constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return e},getTopLevelInsertionInstruction:function(d,c,b,a,e){return{insertInRoot:{relationToPosition:g.RELATION.BEFORE}}}})})},"MW/rtc/plugins/insertionrules/BaseInsertionRules":function(){define(["dojo/_base/declare","./receivinginstructions/InsertIfCompatibleInstruction"],function(h,f){return h(null,{constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){throw Error("Unimplemented API: MW.rtc.insertionrules.getApplicableNodeClass");
},_compatibleParents:[],canInsertInContainer:function(f){return this._compatibleParents.some(function(e){return f.isInstanceOf(e)})},getReceivingInstruction:function(g){return new f},getTopLevelInsertionInstruction:function(f,e,d,c,b){throw Error("Unimplemented API: MW.rtc.insertionrules.getTopLevelInsertionInstruction");}})})},"MW/rtc/plugins/insertionrules/receivinginstructions/InsertIfCompatibleInstruction":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionInstruction",
"MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,f,g){return h([f],{constructor:function(){this._type=g.RECEIVING_INSTRUCTION.INSERT_IF_COMPATIBLE}})})},"MW/rtc/plugins/insertionrules/BaseInsertionInstruction":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){this._type=null},getType:function(){if(null===this._type)throw Error("Instruction type not defined: MW.rtc.insertionrules.BaseInsertionInstruction");return this._type}})})},"MW/rtc/plugins/insertionrules/InsertionRuleConstants":function(){define([],
function(){return{RECEIVING_INSTRUCTION:{CONTINUE_UP:"continue_up",CONTINUE_AT_POSITION:"continue_at_position",INSERT_IF_COMPATIBLE:"insert_if_compatible"},RELATION:{BEFORE:0,AFTER:1,AT:2}}})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsLayouter":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/TableOfContentsList"],function(h,f,g,e){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){return d.layoutInto(c,"div",{"class":"paragraphNode ToCItems"})}})})},"MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","mw-log/Log"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){g.error("Unimplemented API: MW.rtc.view.layoutmanager.layouter.getApplicableNodeClass")},
layout:function(e,d){g.error("Unimplemented API: MW.rtc.view.layoutmanager.layouter.layout")},refresh:function(e,d,c,b){return c},destroy:function(){}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsHeadingNodeLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsHeadingNodeLayouter":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/TableOfContentsHeadingNode"],function(h,f,g,e){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){return d.layoutInto(c,"div",{"class":"paragraphNode ToCHeading"})}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsContainerLayouter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/view/TableOfContentsContainerLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/TableOfContentsContainer"],function(h,f,g,e){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){return d.layoutInto(c,"div",{"class":"ToC"})}})})},
"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsContainerContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsContainerContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter",
"./TableOfContentsContainer"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsHeadingNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsHeadingNodeContentConverter":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./TableOfContentsHeadingNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TableOfContentsListContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/tableofcontents/model/TableOfContentsListContentConverter":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./TableOfContentsList"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/margin/TraditionalLineNumberDecoratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/TraditionalLineNumberDecorator"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.linenumberservice",
"rtc.cursorcontroller"]}},createInstance:function(e,d,c){return new g(e,d,c,!0,!0)}})})},"MW/rtc/margin/TraditionalLineNumberDecorator":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/margin/LineNumberDecorator"],function(h,f,g){return h(g,{hasLayerForLineNumber:function(e,d){return!d&&this._shouldShowLineNumbers()},handleMouseDown:function(e,d){var c=this._view.getCoordinateFromEvent(this._view.fixEvent(e)),c=this._view.getLineColumnFromCoordinate(c);this._cursorController.selectLine(c.line,
!0)},_adjustAlignment:function(){}})})},"MW/rtc/margin/LineNumberDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct mw-log/Log MW/rtc/margin/AbstractLineMarginDecorator MW/rtc/margin/MarginUtilities MW/rtc/model/CodeUtilities MW/rtc/view/ViewEventUtilities".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){return h(a,{_CHARACTER_WIDTH:8,_DEFAULT_NUMBER_OF_CHARACTERS_IN_MARGIN:2,_PADDING:8,_DEFAULT_MIN_WIDTH:16,_LINE_NUMBER_HEIGHT:17,
constructor:function(a,b,c,d,e){this._lineNumberService=b;this._view=a;this._cursorController=c;this._showLineNumbers=d;this._minWidth=(this._isCollapsible=e)?0:this._DEFAULT_MIN_WIDTH;this._padding=this._isCollapsible?0:this._PADDING;this.own(g.after(this._view,"onViewUpdated",f.hitch(this,"_updateWidthOnHeightChange"),!0))},hasLayerForLineNumber:function(a,b){return this._shouldShowLineNumbers()},createDecorationForLineNumber:function(a,b){var d=c.create("div",{innerHTML:a+1});this._applyStyle(d,
a,b);return d},_applyStyle:function(a,b,c){c=[];d.add(a,"gutterNumber");this._adjustAlignment(a,b);c.push("lineNumber");this._addTestTag(a,c,b)},_adjustAlignment:function(a,b){var c=this._lineNumberService.getLineNumberFromCodeLineNumber(b+1),c=this._view.getPreciseLineHeight(c+1),c=k.getTopForMiddleAlignment(c,this._LINE_NUMBER_HEIGHT);a.style.top=c+"px"},_addTestTag:function(a,b,c){c=b&&0<b.length?c+"_"+b.join("_"):c+"_invalid";e.set(a,"data-testid",c)},_shouldShowLineNumbers:function(){return this._showLineNumbers},
_updateWidthOnHeightChange:function(a){(m.hasHeightEvent(a)||m.hasLayoutEvent(a))&&this._updateWidth()},setShowLineNumber:function(a){this._showLineNumbers!==a&&(this._showLineNumbers=a,this._updateWidth(),this.onUpdate())},getWidth:function(){return Math.max(this._width,this._minWidth)+this._padding},_updateWidth:function(){var a=this._getNumberOfCharactersToPaintMarginAgainst(),a=this._shouldShowLineNumbers()?this._CHARACTER_WIDTH*a:this._minWidth;this._width!==a&&(this._width=a,this.onWidthChange())},
onWidthChange:function(){},_getNumberOfCharactersToPaintMarginAgainst:function(){return Math.max(this._calculateGreatestLineNumberCharacters(),this._DEFAULT_NUMBER_OF_CHARACTERS_IN_MARGIN)},_calculateGreatestLineNumberCharacters:function(){var a=this._lineNumberService.getNumberOfCodeLines();return String(a).length}})})},"MW/rtc/margin/AbstractLineMarginDecorator":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{hasLayerForLineNumber:function(f,e){throw Error("Unimplemented API: MW.rtc.margin.AbstractLineMarginDecorator.hasLayerForLineNumber");
},createDecorationForLineNumber:function(f,e){throw Error("Unimplemented API: MW.rtc.margin.AbstractLineMarginDecorator.createDecorationForLineNumber");},handleMouseDown:function(f,e){},handleMouseUp:function(f,e){},handleMouseLeave:function(f,e){},handleMouseMove:function(f,e){},onUpdate:function(){},getWidth:function(){throw Error("Unimplemented API: MW.rtc.margin.AbstractLineMarginDecorator.getWidth");}})})},"MW/rtc/margin/MarginUtilities":function(){define([],function(){return{getTopForMiddleAlignment:function(h,
f){return Math.floor((h-f)/2)}}})},"MW/rtc/model/io/SerializersProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/Serializers"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.serializer"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/model/io/Serializers":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{constructor:function(f){this._serializersArray=f},getSerializer:function(g){var e=
null;this._serializersArray.some(f.hitch(this,function(d){if(d.getXMLType(g)===g||d.getNodeType()===g)e=d}));return e}})})},"MW/rtc/model/io/serializers/providers/containers/CodeContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/CodeContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[""]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/CodeContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,f,g,e,d){return h(d,{_CHILD_TYPE:"PlainTextNode",constructor:function(){this._nonPlainTextObjects=[]},write:function(c,b,a){b=document.createElement(this.getXMLType());var d=e.createXMLElement(!1),g=e.createParagraphProperty(this.getXMLType());d.appendChild(g);var m={text:"",className:""};c.forEach(f.hitch(this,function(a,b){this._writeCodeAndCacheNonPlainTextObjects(a,
m,b)}));m.text=m.text.slice(0,-1);c=a.getSerializer(this._CHILD_TYPE);d.appendChild(c.write(m));this._writeNonPlainText(a,d);b.appendChild(d);return b},_writeNonPlainText:function(c,b){this._nonPlainTextObjects.forEach(f.hitch(this,function(a){var d=c.getSerializer(a.className);b.appendChild(d.write(a))}));this._nonPlainTextObjects=[]},read:function(c,b,a){var d=[],l=a.getSerializer(this._CHILD_TYPE).read(c);l.readObject.forEach(f.hitch(this,function(a){var b={className:this.getNodeType(),children:[]};
b.children.push(a);d.push(b)}));c.forEach(f.hitch(this,function(c){c=c.getElementsByTagNameNS(g.NAMESPACE_URL,g.CUSTOM_XML_TAG);for(var f=0;f<c.length;f++){var l=e.getClassName(c[f]);d=a.getSerializer(l).read(c[f],b,d)}}));l=l.readStatus;return{readObject:d,readStatus:!0}},_writeCodeAndCacheNonPlainTextObjects:function(c,b,a){c.children.forEach(f.hitch(this,function(c){b.text+=c.text;b.className=this._CHILD_TYPE;c.className!==this._CHILD_TYPE&&(c.startOffsetLine=a,c.endOffsetLine=a,this._nonPlainTextObjects.push(c))}));
b.text+="\n"},getXMLType:function(){return"code"},getNodeType:function(){return"LineNode"}})})},"MW/rtc/model/io/serializers/providers/containers/ContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/providers/containers/HeadingContainerSerializerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/HeadingContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/HeadingContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/DocumentTag MW/rtc/model/io/XmlUtils MW/rtc/model/io/serializers/containers/ContainerSerializer mw-log/Log".split(" "),function(h,f,g,e,
d,c){return h(d,{write:function(b,a,c){for(var d=document.createElement(this.getXMLType()),e=0;e<b.length;e++){var f=this._writeParagraph(b[e],a,c);f&&d.appendChild(f)}return d},_writeParagraph:function(b,a,d){var l=e.createXMLElement(),m=1===b.level?"title":"heading",h=e.createParagraphProperty(m),h=e.addParagraphProperty(h,g.JUSTIFCATION_TAG_NAME,b.align);l.appendChild(h);b.anchorId&&(m=e.createBookmarkStart(m,b.anchorId),l.appendChild(m));var n=!1;b.children.forEach(f.hitch(this,function(b){var e=
d.getSerializer(b.className);e?l.appendChild(e.write(b,a,d)):(n=!0,c.assert(n,!0,"Unrecognized node type:"+b.className))}));b.anchorId&&(b=e.createBookmarkEnd(b.anchorId),l.appendChild(b));n&&1===l.children.length&&(l=null);return l},read:function(b,a,c){var d=this.inherited(arguments);b.forEach(function(a,b){var c=e.getParagraphProperty(a,g.JUSTIFCATION_TAG_NAME);c&&(d.readObject[b].align=c);var c=e.getAttribute(a),k=e.getBookmarkStart(a);k&&k.id&&(d.readObject[b].anchorId=k.id);d.readObject[b].level=
"title"===c?1:2});return d},getXMLType:function(){return"heading"},getNodeType:function(){return"HeadingNode"},mustMerge:function(b,a){return e.getParagraphProperty(b,g.JUSTIFCATION_TAG_NAME)===e.getParagraphProperty(a,g.JUSTIFCATION_TAG_NAME)}})})},"MW/rtc/model/io/serializers/providers/containers/HyperlinkContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/HyperlinkContainerSerializer"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/HyperlinkContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang mw-utils/Utils MW/rtc/model/io/XmlUtils MW/rtc/model/io/DocumentTag MW/rtc/model/io/serializers/containers/ContainerSerializer".split(" "),function(h,f,g,e,d,c){return h(c,{write:function(b,a,c){var g=document.createElement(this.getXMLType()),m=0===b.hyperlink.indexOf("internal:")?d.ANCHOR:
d.DOC_LOCATION,h=e.createHyperLinkTag(b.hyperlink,m);b.children.forEach(f.hitch(this,function(b){var d=c.getSerializer(b.className);h.appendChild(d.write(b,a))}));g.appendChild(h);return g.childNodes[0]},read:function(b){var a=this.inherited(arguments);Array.isArray(b)?b.forEach(f.hitch(this,function(b,c){a.readObject[c].hyperlink=this._getTarget(b)})):a.readObject.hyperlink=this._getTarget(b);return a},_getTarget:function(b){var a=b.getAttributeNS(d.NAMESPACE_URL,d.DOC_LOCATION);a||(a=b.getAttributeNS(d.NAMESPACE_URL,
d.ANCHOR));return a},getXMLType:function(){return"hyperlink"},getNodeType:function(){return"HyperlinkNode"}})})},"MW/rtc/model/io/serializers/providers/containers/ListContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/ListContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/ListContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/DocumentTag MW/rtc/model/io/XmlUtils MW/rtc/model/io/serializers/containers/ContainerSerializer MW/rtc/model/io/serializers/containers/ListItemContainerSerializer".split(" "),
function(h,f,g,e,d,c){return h(d,{_lookup:{unordered:1,ordered:2},constructor:function(b){this._listItemHandler=new c(b);this.inherited(arguments)},write:function(b,a,c){var d=document.createElement(this.getXMLType());b.forEach(f.hitch(this,function(b){this._writeListParagraph(b,d,a,c)}));return d},read:function(b,a,c){var d=[],m=e.getListType(b[0]),h,n={className:this.getNodeType(),children:[]};b.forEach(f.hitch(this,function(b){m!==e.getListType(b)&&(d.push(n),n={className:this.getNodeType(),children:[]},
m=e.getListType(b));var f=e.getParagraphProperty(b,g.JUSTIFCATION_TAG_NAME);h=this._readListParagraph(n,b,{type:m,align:f},a,c)}));d.push(n);return{readObject:d,readStatus:h}},_readListParagraph:function(b,a,c,d,f){a=this._listItemHandler.read(a,d,f);b.type=e.getKeyFromValue(this._lookup,parseInt(c.type,10));a.readObject.align=c.align;b.children.push(a.readObject);return a.readStatus},_writeListParagraph:function(b,a,c,d){var m=this._lookup[b.type];b.children.forEach(f.hitch(this,function(b){var f=
e.createXMLElement(),h=e.createParagraphProperty(this.getNodeType());h.appendChild(e.createListType(m));h=e.addParagraphProperty(h,g.JUSTIFCATION_TAG_NAME,b.align);f.appendChild(h);b=this._listItemHandler.write(b,c,d);for(h=b.length;0!==h;)f.appendChild(b[0]),h--;a.appendChild(f)}))},getXMLType:function(){return"ListParagraph"},getNodeType:function(){return"ListParagraph"},mustMerge:function(){return!0}})})},"MW/rtc/model/io/serializers/containers/ListItemContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/serializers/containers/ContainerSerializer"],function(h,f,g){return h(g,{write:function(e,d,c){var b=document.createElement(this.getXMLType());e.children.forEach(f.hitch(this,function(a){var e=c.getSerializer(a.className);b.appendChild(e.write(a,d,c))}));return b.childNodes},getXMLType:function(){return"ListItem"},getNodeType:function(){return"ListItem"},mustMerge:function(e,d){return!0}})})},"MW/rtc/model/io/serializers/providers/containers/ListItemContainerSerializerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/ListItemContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/providers/containers/RichTextContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/RichTextContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/providers/containers/SectionBreakContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/SectionBreakContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/SectionBreakContainerSerializer":function(){define(["dojo/_base/declare",
"MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,f,g,e){return h(e,{write:function(d,c,b){d=f.createXMLElement(this.getXMLType());c=f.createXMLElement();b=f.createXMLElement(g.PARAGRAPH_PROPERTY_TAG_NAME);var a=f.createXMLElement(g.SECTION_PROPERTY_TAG_NAME);b.appendChild(a);c.appendChild(b);d.appendChild(c);return d},read:function(d,c,b){return{readObject:[{children:[],className:this.getNodeType()}],readStatus:!0}},getXMLType:function(){return"sectionbreak"},
getNodeType:function(){return"SectionBreak"}})})},"MW/rtc/model/io/serializers/providers/containers/TitleContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/TitleContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/TitleContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/serializers/containers/HeadingContainerSerializer"],function(h,f,g,e){return h(e,{getXMLType:function(){return"title"}})})},"MW/rtc/model/io/serializers/providers/nodes/EquationSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/EquationSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/model/io/serializers/nodes/EquationSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,f,g,e,d){return h(d,{_RELATIONSHIP_TARGET:"/mathml/",_PART_NAME:"eqn",_PART_TYPE:"text/xml",_PART_EXTENSION:"mml",AUTO_CENTER_CLASS:!0,write:function(c,b){var a=document.createElement(this.getXMLType()),d=g.createCustomXMLTag(this.getXMLType()),f=g.createXMLElement(e.CUSTOM_XML_PROPERTY),
m=g.createCustomXMLAttribute("displayStyle",c.displayStyle);f.appendChild(m);d.appendChild(f);m=c.encoding||"tex";"mathml"===m&&(m=g.createCustomXMLAttribute("encoding",m),f.appendChild(m),m=this._createRelationship(c,b),f.appendChild(m));f=g.createXMLElement(e.RUN_OF_TEXT_TAG_NAME);m=g.createXMLElement(e.TEXT_TAG_NAME);if(c.texString){var h=document.createTextNode(c.texString);m.appendChild(h)}f.appendChild(m);d.appendChild(f);a.appendChild(d);return a.childNodes[0]},_createRelationship:function(c,
b){var a=b.getPartURI(this._RELATIONSHIP_TARGET,this._PART_NAME,this._PART_EXTENSION),d=this._findDuplicates(c,b);d?d=this._getRelationshipIdFromPart(d,b):(d=this._createPartRelationship(b.getPart(e.DOCUMENT_TARGET),a),this._createPart(a,this._PART_TYPE,b).setContent(c.mathmlString),c.relationshipId=d);return g.createCustomXMLAttribute(e.RELATIONSHIP_ID_TAG_NAME,d)},_findDuplicates:function(c,b){var a=null;b.getParts().forEach(function(b){b.getContent()&&b.getContent()===c.mathmlString&&(a=b)});return a},
_getRelationshipIdFromPart:function(c,b){var a=b.getPart(e.DOCUMENT_TARGET).getAllRelationships().getRelationshipCollection(),d;for(d in a)if(a[d].getTarget()===c.getPartURI())return d},_createPart:function(c,b,a){return a.createPart(c,b)},_createPartRelationship:function(c,b){return c.createRelationship(e.MATHML_RELATIONSHIP_TYPE,b)},_readAttributes:function(c,b,a){c=c.getElementsByTagNameNS(e.NAMESPACE_URL,e.CUSTOM_XML_PROPERTY)[0].getElementsByTagNameNS(e.NAMESPACE_URL,e.CUSTOM_XML_ATTRIBUTE);
for(var d=0;d<c.length;d++){var f=c[d].getAttributeNS(e.NAMESPACE_URL,e.NAME_TAG),g=c[d].getAttributeNS(e.NAMESPACE_URL,e.CUSTOM_XML_VALUE_TAG);f===e.RELATIONSHIP_ID_TAG_NAME&&(f="mathmlString",g=this._readMathMLPart(b,g));a[f]=g}a.encoding=a.encoding||"tex"},_readMathMLPart:function(c,b){var a=c.getPart(e.DOCUMENT_TARGET).getRelationship(b).getTarget();return c.getPart(a).getContent()},read:function(c,b){var a={className:this.getNodeType()};this._readAttributes(c,b,a);var d=c.getElementsByTagNameNS(e.NAMESPACE_URL,
e.RUN_OF_TEXT_TAG_NAME),d=g.getTextFromRun(d[0]);a.texString=d;return{readObject:a,readStatus:!0}},getXMLType:function(){return"equation"},getNodeType:function(){return"EquationNode"}})})},"MW/rtc/model/io/serializers/providers/nodes/ImageSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/ImageSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[""]}},createInstance:function(){return new g}})})},
"MW/rtc/model/io/serializers/nodes/ImageSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,f,g,e,d){return h(d,{_RELATIONSHIP_TARGET:"/media/",_PART_NAME:"image",_PART_TYPE:"image",_IMAGE_SOURCE:"imgSrc",AUTO_CENTER_CLASS:!0,write:function(c,b){var a=document.createElement(this.getXMLType()),d=g.createCustomXMLTag(this.getXMLType()),f=g.createXMLElement(e.CUSTOM_XML_PROPERTY),
m=g.createCustomXMLAttribute(e.HEIGHT_ATTRIBUTE_NAME,c.height);f.appendChild(m);m=g.createCustomXMLAttribute(e.WIDTH_ATTRIBUTE_NAME,c.width);f.appendChild(m);m=this._createRelationship(c,b);f.appendChild(m);d.appendChild(f);a.appendChild(d);return a.childNodes[0]},_createRelationship:function(c,b){var a=g.getImageExtension(c.imgSrc),d=b.getPartURI(this._RELATIONSHIP_TARGET,this._PART_NAME,a),f=this._findDuplicates(c,b);f?f=this._getRelationshipIdFromPart(f,b):(f=this._createPartRelationship(b.getPart(e.DOCUMENT_TARGET),
d),this._createPart(d,this._PART_TYPE+"/"+a,b).setContent(c.imgSrc),c.relationshipId=f);return g.createCustomXMLAttribute(e.RELATIONSHIP_ID_TAG_NAME,f)},_findDuplicates:function(c,b){var a=null;b.getParts().forEach(function(b){b.getContent()&&b.getContent()===c.imgSrc&&(a=b)});return a},_getRelationshipIdFromPart:function(c,b){var a=b.getPart(e.DOCUMENT_TARGET).getAllRelationships().getRelationshipCollection(),d;for(d in a)if(a[d].getTarget()===c.getPartURI())return d},_createPart:function(c,b,a){return a.createPart(c,
b)},_createPartRelationship:function(c,b){return c.createRelationship(e.IMAGE_RELATIONSHIP_TYPE,b)},read:function(c,b){for(var a={className:this.getNodeType()},d=c.getElementsByTagNameNS(e.NAMESPACE_URL,e.CUSTOM_XML_PROPERTY)[0].getElementsByTagNameNS(e.NAMESPACE_URL,e.CUSTOM_XML_ATTRIBUTE),f=0;f<d.length;f++){var g=d[f].getAttributeNS(e.NAMESPACE_URL,e.NAME_TAG),h=d[f].getAttributeNS(e.NAMESPACE_URL,e.CUSTOM_XML_VALUE_TAG);g===e.RELATIONSHIP_ID_TAG_NAME&&(g=this._IMAGE_SOURCE,h=this._readImagePart(b,
h));a[g]=h}return{readObject:a,readStatus:!0}},_readImagePart:function(c,b){var a=c.getPart(e.DOCUMENT_TARGET).getRelationship(b).getTarget();return c.getPart(a).getContent()},getXMLType:function(){return"image"},getNodeType:function(){return"ImageNode"}})})},"MW/rtc/model/io/serializers/providers/nodes/LiveControlSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/LiveControlSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/LiveControlSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,f,g,e,d){return h(d,{write:function(c){var b=document.createElement(this.getXMLType()),a=g.createCustomXMLTag(this.getXMLType()),d=g.createXMLElement(e.CUSTOM_XML_PROPERTY),d=this._writeAttributes(d,c);a.appendChild(d);b.appendChild(a);
return b.childNodes[0]},_writeAttributes:function(c,b){c=this._writeAttribute(c,e.LIVE_CONTROL_CONTEXT_ATTRIBUTE_NAME,JSON.stringify(b.context));c=this._writeAttribute(c,e.LIVE_CONTROL_TEXT_ATTRIBUTE_NAME,b.text);c=this._writeAttribute(c,e.LIVE_CONTROL_START_OFFSET_LINE_ATTRIBUTE_NAME,b.startOffsetLine);c=this._writeAttribute(c,e.LIVE_CONTROL_START_COLUMN_ATTRIBUTE_NAME,b.startColumn);c=this._writeAttribute(c,e.LIVE_CONTROL_END_OFFSET_LINE_ATTRIBUTE_NAME,b.endOffsetLine);return c=this._writeAttribute(c,
e.LIVE_CONTROL_END_COLUMN_ATTRIBUTE_NAME,b.endColumn)},_writeAttribute:function(c,b,a){b=g.createCustomXMLAttribute(b,a);c.appendChild(b);return c},read:function(c,b,a){b={className:this.getNodeType()};c=c.getElementsByTagNameNS(e.NAMESPACE_URL,e.CUSTOM_XML_PROPERTY)[0].getElementsByTagNameNS(e.NAMESPACE_URL,e.CUSTOM_XML_ATTRIBUTE);for(var d=0;d<c.length;d++){var f=c[d].getAttributeNS(e.NAMESPACE_URL,e.NAME_TAG);b[f]=c[d].getAttributeNS(e.NAMESPACE_URL,e.CUSTOM_XML_VALUE_TAG);"context"===f&&(b[f]=
JSON.parse(b[f]))}return this._modifyLastPlainTextNode(a,b)},_modifyLastPlainTextNode:function(c,b){for(var a=b.startOffsetLine,d=c[a].children,e=d.length,f=d[e-1].text,g="",h=0;h<e-1;h++)g+=d[h].text;c[a].children.splice(-1,1);e=g.length;d=b.endColumn-e;e=f.substring(0,b.startColumn-e);f=f.substring(d,f.length);c=this._appendPlainTextNodeIfValid(e,c,a);c[a].children.push(b);return this._appendPlainTextNodeIfValid(f,c,a)},_appendPlainTextNodeIfValid:function(c,b,a){c&&b[a].children.push({text:c,className:"PlainTextNode"});
return b},getXMLType:function(){return"livecontrol"},getNodeType:function(){return"LiveControlNode"}})})},"MW/rtc/model/io/serializers/providers/nodes/PlainTextSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/PlainTextSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/PlainTextSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/XmlUtils","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,f,g,e,d){return h(d,{write:function(c){var b=g.createXMLElement(e.RUN_OF_TEXT_TAG_NAME),a=g.createXMLElement(e.TEXT_TAG_NAME),d=document.implementation.createDocument(e.NAMESPACE_URL,"textDocument",null);this._hasCDATAEndingSequence(c.text)?this._modifyTextNodeWithEndingSequence(d,a,c.text):a.appendChild(this._createCDATASection(d,c.text));b.appendChild(a);return b},read:function(c){var b=
!0,a=[];c.forEach(f.hitch(this,function(c){c=this._readCodeParagraph(c);a=c.readObject;b=b&&c.readStatus}));return{readObject:a,readStatus:b}},_readCodeParagraph:function(c){var b=[];c=c.getElementsByTagNameNS(e.NAMESPACE_URL,e.RUN_OF_TEXT_TAG_NAME);g.getTextFromRun(c[0]).split("\n").forEach(f.hitch(this,function(a){var c={};c.className=this.getNodeType();c.text=a;b.push(c)}));return{readObject:b,readStatus:!0}},_createCDATASection:function(c,b){return c.createCDATASection(b)},_createCDATASectionForEndingCharacter:function(c,
b){var a=c.createCDATASection("]]");b.appendChild(a);a=c.createCDATASection("\x3e");b.appendChild(a)},_hasCDATAEndingSequence:function(c){return!!c.match(/]]\x3e/g)},_modifyTextNodeWithEndingSequence:function(c,b,a){for(;a&&-1!==a.indexOf("]]\x3e");){var d=a.indexOf("]]\x3e");if(0!==d){var e=a.slice(0,d);b.appendChild(this._createCDATASection(c,e))}this._createCDATASectionForEndingCharacter(c,b);a=a.substring(d+3);-1===a.indexOf("]]\x3e")&&""!==a&&b.appendChild(this._createCDATASection(c,a))}},getXMLType:function(){return"PlainTextNode"},
getNodeType:function(){return"PlainTextNode"}})})},"MW/rtc/model/io/serializers/providers/nodes/RichTextSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/nodes/RichTextSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/nodes/RichTextSerializer":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/io/XmlUtils",
"MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/Serializable"],function(h,f,g,e,d){return h(d,{write:function(c){var b=g.createXMLElement(e.RUN_OF_TEXT_TAG_NAME),a=g.createXMLElement(e.RUN_OF_TEXT_PROPERTY_TAG_NAME),d=!1,f;for(f in c)if(c.hasOwnProperty(f)&&("className"!==f&&"text"!==f)&&(d=!0,c[f])){var m=this._createRunProperty(f);a.appendChild(m)}f=g.createXMLElement(e.TEXT_TAG_NAME);c=document.createTextNode(c.text);f.appendChild(c);d&&b.appendChild(a);b.appendChild(f);return b},read:function(c){return this._createObjectFromRun(c)},
_createObjectFromRun:function(c){var b=!0,a={},d=g.getTextFromRun(c);c=this._getPropertyFromRun(c);0!==c.length&&c.forEach(function(c){"unrecognized"===c?b=!1:a[c]=!0});a.className=this.getNodeType();a.text=d;return{readObject:a,readStatus:b}},_getPropertyFromRun:function(c){var b=[];c=c.getElementsByTagNameNS(e.NAMESPACE_URL,e.RUN_OF_TEXT_PROPERTY_TAG_NAME);if(0<c.length){var a;for(a=0;a<c[0].childNodes.length;a+=1){var d=c[0].childNodes[a];d.localName===e.BOLD_TAG_NAME?b.push("bold"):d.localName===
e.ITALIC_TAG_NAME?b.push("italic"):d.localName===e.UNDERLINE_TAG_NAME?b.push("underline"):d.localName===e.RUN_OF_FONT?d.attributes[0]&&(d.attributes[0].localName===e.FONT_TYPE_TAG&&d.attributes[0].nodeValue===e.MONOSPACE_TAG)&&b.push("monospace"):b.push("unrecognized")}}return b},_createRunProperty:function(c){switch(c){case "bold":return g.createXMLElement(e.BOLD_TAG_NAME);case "italic":return g.createXMLElement(e.ITALIC_TAG_NAME);case "underline":return g.createXMLElement(e.UNDERLINE_TAG_NAME);
case "monospace":return c=g.createXMLElement(e.RUN_OF_FONT),c.setAttributeNS(e.NAMESPACE_URL,e.NAMESPACE_TAG+":"+e.FONT_TYPE_TAG,e.MONOSPACE_TAG),c;default:return g.createXMLElement()}},getXMLType:function(){return"RichTextNode"},getNodeType:function(){return"RichTextNode"}})})},"MW/rtc/nodes/insertionrules/LineNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LineNodeInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/nodes/insertionrules/LineNodeInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,f,g,e){return h([g],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return f},getTopLevelInsertionInstruction:function(d,
c,b,a,f){return f.isAtLeftEdge()?{insertInRoot:{relationToPosition:e.RELATION.BEFORE}}:f.isAtRightEdge()?{insertInRoot:{relationToPosition:e.RELATION.AFTER}}:{insertInRoot:{insertionPosition:f}}}})})},"MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlNodeInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/nodes/insertionrules/LiveControlNodeInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode"],function(h,f,g,e,d){return h([g],{_compatibleParents:[f],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},getTopLevelInsertionInstruction:function(c,
b,a,d,g){return{insertInRoot:{relationToPosition:e.RELATION.AFTER,containerConstructor:f}}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/OpaqueNode"],function(h,f){return h([f],{className:"LiveControlNode",constructor:function(f){var e=f.context.data;this.context={data:e,type:f.context.type};f=" ";e&&(e=e.value,f=void 0!==e&&""!==e?e:f);this.text=f.toString();this.widget=this.intermediateEvalText=null},getCodeText:function(){return this.getText()},
getText:function(){return this.text||" "},maxOffset:function(){return this.getText().length},_serializeAttributes:function(f){f.text=this.text;f.context=this.context;f.startColumn=this.startPosition().getLineColumn().column-1;f.endColumn=this.endPosition().getLineColumn().column-1},setContextData:function(f){this.context.data=f},getContextData:function(){return this.context.data},getContext:function(){return this.context},setWidget:function(f){this.widget=f},getWidget:function(){return this.widget},
getType:function(){return this.context.type},movePositionRight:function(f){return 0===f.getOffset()?this.endPosition():this.inherited(arguments)},movePositionLeft:function(f){return f.getOffset()===this.maxOffset()?this.startPosition():this.inherited(arguments)},isContextEqualTo:function(f){var e=this.getContext();return JSON.stringify(e.data)===JSON.stringify(f.data)&&e.type===f.type}})})},"MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./OpaqueNodeInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/nodes/insertionrules/OpaqueNodeInsertionRules":function(){define("dojo/_base/declare mw-log/Log MW/rtc/model/Position MW/rtc/nodes/OpaqueNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction MW/rtc/plugins/insertionrules/receivinginstructions/ContinueAtPositionInstruction MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h([d],{_compatibleParents:[k],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return e},getReceivingInstruction:function(c){if(c.isAtEdge())return new b;c=c.getNode();c=new g(c,c.maxOffset());return new a(c)},getTopLevelInsertionInstruction:function(a,b,d,e,f){return{insertInRoot:{relationToPosition:c.RELATION.AFTER,containerConstructor:l}}}})})},"MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/insertionrules/BaseInsertionInstruction","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,f,g){return h([f],{constructor:function(){this._type=g.RECEIVING_INSTRUCTION.CONTINUE_UP}})})},"MW/rtc/plugins/insertionrules/receivinginstructions/ContinueAtPositionInstruction":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionInstruction","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,f,g){return h([f],{constructor:function(e){if(!e||
!e.isValid())throw Error("MW.rtc.plugins.insertionrules.receivinginstructions.ContinueAtPositionInstruction: Invalid position");this._type=g.RECEIVING_INSTRUCTION.CONTINUE_AT_POSITION;this._position=e},getPosition:function(){return this._position}})})},"MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./PlainTextNodeInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/nodes/insertionrules/PlainTextNodeInsertionRules":function(){define("dojo/_base/declare mw-log/Log MW/rtc/nodes/inner/LineNode MW/rtc/nodes/leaf/PlainTextNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants".split(" "),function(h,f,g,e,d,c){return h([d],{_compatibleParents:[g],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return e},
getTopLevelInsertionInstruction:function(b,a,d,e,f){return{insertInRoot:{relationToPosition:c.RELATION.AT,containerConstructor:g}}}})})},"MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecoratorProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecorator","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.executablelines"]}},
createInstance:function(d){return new g(d)}})})},"MW/rtc/plugins/breakpoint/matlab/executablelines/ExecutableLineDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-construct dojo/dom-class MW/rtc/margin/AbstractLineMarginDecorator".split(" "),function(h,f,g,e,d,c,b){return h(b,{constructor:function(a){this._executableLineService=a;this.own(g.after(this._executableLineService,"onUpdate",f.hitch(this,"_handleUpdate")))},hasLayerForLineNumber:function(a,
b){var c=this._executableLineService.isCodeLineExecutable(a+1);return!b&&c},createDecorationForLineNumber:function(a,b){var c=d.create("div");this._applyStyle(c,a,b);return c},_applyStyle:function(a,b,d){d||(c.add(a,"marginExecutableLine"),e.set(a,"data-testid","executableLine_"+b))},getWidth:function(){return 15},_handleUpdate:function(){this.onUpdate()}})})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStylerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStyler"],function(h,f,g,e){return h(g,{requires:function(){return{createInstance:["debug.breakpointmodel","debug.breakpointdirtyservice"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointStyler":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/i18n!l10n/nls/breakpoints","MW/rtc/plugins/breakpoint/AbstractBreakpointStyler"],function(h,f,g,e,d){return h(d,
{constructor:function(c,b){},buildTooltipString:function(c){if(this._breakpointDataModel.wasThereAnErrorSyncingBreakpoints())return e.syntaxErrorTooltip;var b="";this._showOutOfSyncBreakpoints()&&(b+="\x3cb\x3e"+e.dirtyFileTooltip+"\x3c/b\x3e\x3cbr\x3e");return b+=c.toString()},allowPartialBreakpoints:function(){return!0},_shouldShowPartialBreakpoint:function(c){return c},_showConditionalBreakpoint:function(c){return c&&c.hasExpression()},_applyDisabledStyle:function(c,b){f.create("div",{"class":"disabledX"},
c,"first")}})})},"MW/rtc/plugins/breakpoint/AbstractBreakpointStyler":function(){define(["dojo/dom-attr","dojo/dom-class","dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return g(e,{constructor:function(d,c){this._breakpointDataModel=d;this._breakpointDirtyService=c},buildTooltipString:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler.getTooltipText");},allowPartialBreakpoints:function(){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler.allowPartialBreakpoints");
},applyStyle:function(d,c,b){var a=[];this._shouldShowPartialBreakpoint(b)?(f.add(d,"intermediateBreakpoint"),a.push("intermediateBreakpoint")):(f.add(d,"breakpoint"),a.push("breakpoint"));this._showOutOfSyncBreakpoints()?(f.add(d,"outOfSync"),a.push("outOfSync")):this._showConditionalBreakpoint(c)?(f.add(d,"conditionalBreakpoint"),a.push("conditionalBreakpoint")):(f.add(d,"regularBreakpoint"),a.push("regularBreakpoint"));c&&!c.isEnabled&&(this._applyDisabledStyle(d,"disabled"),a.push("disabled"));
this._adjustAlignment(d,c.zeroBasedLineNumber);this._addTestTag(d,a,c.zeroBasedLineNumber)},_shouldShowPartialBreakpoint:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler._shouldShowPartialBreakpoint");},_showOutOfSyncBreakpoints:function(){return this._breakpointDirtyService.areBreakpointsDirty()},_showConditionalBreakpoint:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler._showConditionalBreakpoint");},_applyDisabledStyle:function(d){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.AbstractBreakpointStyler._applyDisabledStyle");
},_adjustAlignment:function(d,c){},_addTestTag:function(d,c,b){b=c&&0<c.length?b+"_"+c.join("_"):b+"_invalid";h.set(d,"data-testid",b)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactoryProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactory","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"debug.breakpointmodel rtc.actionservice rtc.internaldocument rtc.backingstore rtc.focusservice rtc.hyperlinkservice rtc.linenumberservice debug.breakpoint.dataservice".split(" ")}},
createInstance:function(e,d,c,b,a,k,g,m){return new f(e,d,c,b,a,k,g,m)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModelFactory":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModel"],function(h,f,g){return h(f,{constructor:function(e,d,c,b,a,f,g,m){this._breakpointModel=e;this._actionDataService=d;this._internalDocument=c;this._backingStore=b;this._focusService=a;this._hyperlinkService=f;
this._lineNumberService=g;this._matlabBreakpointDataService=m;this._instance=null},getInstance:function(){this._instance||(this._instance=new g(this._breakpointModel,this._actionDataService,this._backingStore,this._focusService,this._hyperlinkService,this._lineNumberService,this._matlabBreakpointDataService));return this._instance}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/codeanalyzer/CodeAnalyzerDataService MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuActions MW/rtc/plugins/dialog/ConditionalBreakpointDialog MW/rtc/plugins/contextmenu/MarginContextMenuModel dojo/i18n!l10n/nls/actions".split(" "),
function(h,f,g,e,d,c,b,a){return h(b,{NO_LINE:-1,constructor:function(b,c,m,h,n,p,r){this._breakpointModel=b;this._actionService=c;this._backingStore=m;this._focusService=h;this._hyperlinkService=n;this._lineNumberService=p;this._matlabBreakpointDataService=r;this._codeAnalyzerService=new e;this._menuLine=this.NO_LINE;this.own(this._matlabBreakpointDataService);this._dialogInstance=null;b=[{id:d.TOGGLE_BREAKPOINT_MENU_ACTION,enabled:!0,text:a.toggleBreakpointLabel,description:a.setBreakpointDescription,
callback:f.hitch(this,"_toggleBreakpointOnLine")},{id:d.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,enabled:!0,text:a.enableBreakpointText,description:a.enableBreakpointDescription,callback:f.hitch(this,"_toggleEnableBreakpointOnLine")},{id:d.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,enabled:!0,text:a.setConditionalBreakpointText,description:a.setConditionalBreakpointDescription,callback:f.hitch(this,"_createConditionalBreakpointDialog")},{id:d.CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION,enabled:!0,text:a.clearAllBreakpointsInFileText,
description:a.clearAllBreakpointsInFileDescription,callback:f.hitch(this,"_clearAllBreakpointsInFile")},{id:d.DISABLE_ALL_BREAKPOINTS_MENU_ACTION,enabled:!0,text:a.disableAllBreakpointsInFileText,description:a.disableAllBreakpointsInFileText,callback:f.hitch(this,"_disableAllBreakpointsInFile")},{id:d.ENABLE_ALL_BREAKPOINTS_MENU_ACTION,enabled:!0,text:a.enableAllBreakpointsInFileText,description:a.enableAllBreakpointsInFileDescription,callback:f.hitch(this,"_enableAllBreakpointsInFile")},{id:d.CLEAR_ALL_BREAKPOINTS_MENU_ACTION,
enabled:!0,text:a.clearAllBreakpointsLabel,description:a.clearAllBreakpointsDescription,callback:f.hitch(this,"_clearAll")}];this._actionService.loadActions(b);this._groupActionsMap={Toggle:[d.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,d.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,d.TOGGLE_BREAKPOINT_MENU_ACTION],Set:[d.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,d.TOGGLE_BREAKPOINT_MENU_ACTION,d.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION],ToggleAllStatus:[d.ENABLE_ALL_BREAKPOINTS_MENU_ACTION,d.DISABLE_ALL_BREAKPOINTS_MENU_ACTION],
ClearAll:[d.CLEAR_ALL_BREAKPOINTS_MENU_ACTION,d.CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION]};this._groupList=["Toggle","ToggleAllStatus","ClearAll"];this._setGroupList=["Set","ToggleAllStatus","ClearAll"];this._dialogInstance=null;this.own(g.after(this._matlabBreakpointDataService,"breakpointsAdded",f.hitch(this,"_handleBreakpointsAdded"),!0));this.own(g.after(this._matlabBreakpointDataService,"breakpointErrored",f.hitch(this,"_handleBreakpointError"),!0))},_updateActionsBasedOnLine:function(){this._breakpointModel.hasBreakpointAtLine(this._menuLine)?
(this._actionService.updateAction(d.TOGGLE_BREAKPOINT_MENU_ACTION,{text:a.clearBreakpointText,description:a.clearBreakpointDescription}),this._actionService.updateAction(d.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,{text:a.setModifyConditionalBreakpointText,description:a.setModifyConditionalBreakpointDescription}),this._breakpointModel.hasEnabledBreakpointAtLine(this._menuLine)?this._actionService.updateAction(d.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,{text:a.disableBreakpointText,description:a.disableBreakpointDescription}):
this._actionService.updateAction(d.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION,{text:a.enableBreakpointText,description:a.enableBreakpointDescription})):(this._actionService.updateAction(d.TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION,{text:a.setConditionalBreakpointText,description:a.setConditionalBreakpointDescription}),this._actionService.updateAction(d.TOGGLE_BREAKPOINT_MENU_ACTION,{text:a.setBreakpointText,description:a.setBreakpointDescription}))},_toggleBreakpointOnLine:function(){this._breakpointModel.toggleBreakpoint(this._menuLine);
this._resetMenuLine()},_toggleEnableBreakpointOnLine:function(){this._breakpointModel.toggleEnableState(this._menuLine);this._resetMenuLine()},_clearAllBreakpointsInFile:function(){this._breakpointModel.clearAllBreakpointsInFile();this._resetMenuLine()},_clearAll:function(){this._breakpointModel.clearAllBreakpoints();this._resetMenuLine()},_enableAllBreakpointsInFile:function(){this._breakpointModel.enableAllBreakpointsInFile();this._resetMenuLine()},_disableAllBreakpointsInFile:function(){this._breakpointModel.disableAllBreakpointsInFile();
this._resetMenuLine()},_createConditionalBreakpointDialog:function(){if(this._dialogInstance)return this._dialogInstance;var a=this._menuLine,b=this._backingStore.getAbsoluteFilePath?this._backingStore.getAbsoluteFilePath():"";this._dialogInstance=new c(b,a,f.hitch(this,this._close),this._breakpointModel,this._hyperlinkService,this._codeAnalyzerService);this._resetMenuLine();return this._dialogInstance},_handleBreakpointsAdded:function(){this._dialogInstance&&(this._dialogInstance.close(),this._close())},
_handleBreakpointError:function(a){this._dialogInstance&&this._dialogInstance.delayedSelectTextboxText()},_close:function(){this._focusService.setFocus();this._dialogInstance&&(this._dialogInstance=null)},setMenuLine:function(a){this._menuLine=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(a)-1;this._updateActionsBasedOnLine()},_resetMenuLine:function(){this._menuLine=this.NO_LINE},getGroups:function(){return this._breakpointModel.hasBreakpointAtLine(this._menuLine)?this._groupList:
this._setGroupList},getActions:function(a){a=this._groupActionsMap[a];if(!a)return[];var b=[];a.forEach(function(a){(a=this._getActionInfo(a))&&b.push(a)},this);return b},_getActionInfo:function(a){var b=this._actionService.getAction(a),c=null;if(b){var d=b.text||b.description;if(void 0===d||this._filterActionFromContextMenu(a))return c;c={id:a,label:d,shortcut:b.shortcut,callback:f.hitch(this._actionService,"executeAction",a,{}),enabled:b.enabled}}return c},_filterActionFromContextMenu:function(a){return a===
d.TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION&&!this._breakpointModel.hasBreakpointAtLine(this._menuLine)||a===d.ENABLE_ALL_BREAKPOINTS_MENU_ACTION&&!this._breakpointModel.hasDisabledBreakpointsInFile()||a===d.DISABLE_ALL_BREAKPOINTS_MENU_ACTION&&!this._breakpointModel.hasEnabledBreakpointsInFile()||a===d.CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION&&!this._breakpointModel.hasBreakpointsInFile()?!0:!1}})})},"MW/codeanalyzer/CodeAnalyzerDataService":function(){define(["dojo/_base/declare","dojo/_base/array",
"mw-log/Log","mw-remote/Remote"],function(h,f,g,e){return h(null,{constructor:function(){e.registerResponseHandler("CodeAnalyzerResponse",this._handleCodeAnalyzerResponse,this);e.registerFaultHandler("CodeAnalyzer",this._handleCodeAnalyzerError,this)},getMessages:function(d,c,b,a){e.sendMessage({CodeAnalyzer:{matlabCode:c,filename:b}},{callback:a,uid:d,matlabCode:c})},_handleCodeAnalyzerResponse:function(d,c){f.forEach(d,function(b){c.callback(b.messages,c.uid,c.matlabCode)},this)},_handleCodeAnalyzerError:function(d){g.assert(!1,
"Received the following error: "+d)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuActions":function(){define([],function(){return{TOGGLE_BREAKPOINT_MENU_ACTION:"_rtc_menu_toggle_breakpoint",TOGGLE_ENABLE_BREAKPOINT_MENU_ACTION:"_rtc_menu_toggle_enable_breakpoint",TOGGLE_CONDITIONAL_BREAKPOINT_MENU_ACTION:"_rtc_menu_toggle_conditional_breakpoint",CLEAR_ALL_BREAKPOINTS_IN_FILE_MENU_ACTION:"_rtc_menu_clear_all_breakpoints_in_file",CLEAR_ALL_BREAKPOINTS_MENU_ACTION:"_rtc_menu_clear_all_breakpoints",
DISABLE_ALL_BREAKPOINTS_MENU_ACTION:"_rtc_menu_disable_all_breakpoints_in_file",ENABLE_ALL_BREAKPOINTS_MENU_ACTION:"_rtc_menu_enable_all_breakpoints_in_file"}})},"MW/rtc/plugins/dialog/ConditionalBreakpointDialog":function(){define("dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_WidgetBase dojo/keys dojo/on dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/conditionalBreakpointDialog dojo/text!./ConditionalBreakpointTemplate.html mw-dialog-utils/DialogUtils MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return c([g,h,f],{templateString:k,constructor:function(a,b,c,d,e,f){this._absoluteFilePath=a;this._filePath=this._getTruncated(a);this._zeroIndexedLineNumber=b;this._oneIndexedLineNumber=b+1;this._breakpointModel=d;this._expression=this._getBreakpointExpressionFromModel();this._hyperlinkService=e;this._codeAnalyzerService=f;this._closeCallBack=c;this._conditionalDialogWidget=null},postCreate:function(){this.inherited(arguments);d(this.okButton,"click",b.hitch(this,
"_okCallback"));d(this.cancelButton,"click",b.hitch(this,"_cancelCallback"));d(this.helpButton,"click",b.hitch(this,"_conditionalBreakpointHelpCallback"));this.okButton.set("label",a.okButtonLabel);this.cancelButton.set("label",a.cancelButtonLabel);this.helpButton.set("label",a.helpButtonLabel);this.fileLabel.innerHTML=this._createFileLabel();this.conditionLabel.innerHTML=this._createConditionLabel();this.noteLabel.innerHTML=a.noteLabel;this.conditionInput.set("value",this._expression);d(this.conditionInput,
"onkeydown",b.hitch(this,"onTextKeydown"));var c={dialogClass:"rteConditionalBreakpointModalDialog","data-testid":"rteConditionalBreakpointDialog",closeCallBack:b.hitch(this,"_closeCallBack")};setTimeout(b.hitch(this,function(){this._conditionalDialogWidget=l.displayModalDialog(this,a.title,[],c);this.delayedSelectTextboxText()}),0)},onTextKeydown:function(a){a.keyCode===e.ENTER?this._okCallback():a.keyCode===e.ESCAPE&&this._cancelCallback()},delayedSelectTextboxText:function(){setTimeout(b.hitch(this,
this._fullySelectTextboxText),0)},_fullySelectTextboxText:function(){var a=this._getExpressionTextboxValue().length;0<=a&&this._setCursorPositionAndSelection(0,a)},_setCursorPositionAndSelection:function(a,b){var c=this.conditionInput.textbox;c.createTextRange?(c=c.createTextRange(),c.collapse(),c.moveStart("character",a),c.moveEnd("character",b),c.select()):null!==c.selectionStart&&(c.focus(),c.setSelectionRange(a,b))},_okCallback:function(){var a=b.trim(this._getExpressionTextboxValue());this._breakpointModel.areBreakpointsLive()?
this._setConditionalBreakpoint(a):this._codeAnalyzerService.getMessages("UID1234",a,"filename.m",b.hitch(this,"_handleCodeAnalyzerMessages",a))},_handleCodeAnalyzerMessages:function(a,b){b.some(function(a){return 1<a.severity})?(this.delayedSelectTextboxText(),this._breakpointModel.showErrorDialog("Syntax",b[0].message)):(this._setConditionalBreakpoint(a),this.close())},_cancelCallback:function(){this.close()},close:function(){this._conditionalDialogWidget.close()},_getTruncated:function(a){var b=
a.length,c=a;46<b&&(c=a.substring(0,23),a=a.substring(b-23),c=c+"..."+a);return c},_conditionalBreakpointHelpCallback:function(){this._hyperlinkService.openUrl("matlab:helpview(fullfile(docroot,'matlab','helptargets.map'),'matlab_env_conditional_breakpoints')")},_setConditionalBreakpoint:function(a){a=new m(this._zeroIndexedLineNumber,"",!0,a);this._breakpointModel.setBreakpoint(a)},_getBreakpointExpressionFromModel:function(){var a=this._breakpointModel.getBreakpoint(this._zeroIndexedLineNumber),
b="";a&&(b=a.expression);return b},_createFileLabel:function(){return a.fileLabel.replace(/\$\{0}/g,this._filePath)},_createConditionLabel:function(){return a.conditionLabel.replace(/\$\{0}/g,this._oneIndexedLineNumber)},_getExpressionTextboxValue:function(){return this.conditionInput.get("value")}})})},"mw-dialog-utils/DialogUtils":function(){define("dijit/_Widget dijit/form/Button dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on ./DialogDisplayManager mw-log/Log mw-utils/Utils dojo/i18n!./l10n/nls/dialog mw-deprecation-utils/deprecation".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){p.deprecated({deprecated:{module:"MW/dialog/DialogUtils"},replacement:{module:"mw-dialogs/Dialogs"},geckNumber:1471429});var r={dismiss:function(a,b){b.close()}},s=g(h,{constructor:function(a){a=a||{};a.message=a.message||"This space intentionally left blank";a.buttons=a.buttons||{name:"ok",label:this._getLocalizedName("ok"),buttonHandler:{handler:"dismiss"}};a.options=a.options||{};e.isArray(a.buttons)||(a.buttons=[a.buttons])},buildRendering:function(){this.inherited(arguments);
this._setDialogOptions(this.options);this._addMessage(this.message);this._addButtons(this.buttons)},startup:function(){e.isFunction(this.message.startup)&&this.message.startup();this.buttonWidgets.forEach(function(a){a.startup()})},destroy:function(){k.emit(this.domNode,"restorefocus",{bubbles:!0});this.inherited(arguments);if(this.message&&e.isFunction(this.message.onClose))this.message.onClose()},destroyRecursive:function(){this.inherited(arguments);delete this.message;this.buttonWidgets&&delete this.buttonWidgets},
_setDialogOptions:function(a){c.add(this.domNode,a.dialogClass||"messageDialog");a&&a["data-test-id"]&&d.set(this.domNode,"data-test-id",a["data-test-id"])},_addMessage:function(c){e.isString(c)?(d.set(this.domNode,"innerHTML",c),a.set(this.domNode,"whiteSpace","pre-line")):e.isFunction(c.placeAt)?c.placeAt(this.domNode,"first"):b.place(c,this.domNode,"first")},_addButtons:function(a){this.buttonWidgets=[];"none"!==this.buttons.toString().toLowerCase()&&(this.buttonContainer=this._createButtons(a),
b.place(this.buttonContainer,this.domNode,"last"))},_createButtons:function(a){var c=b.create("div",{"class":"buttonContainer"});a=this._convertButtonsToNewFormat(a);a.forEach(function(a){var b=this._createButton(a);a["data-testid"]&&d.set(b.domNode,"data-testid",a["data-testid"]);b.placeAt(c,"last");this.buttonWidgets.push(b)},this);return c},_convertButtonsToNewFormat:function(a){var b=[],c;a.forEach(function(a){var d;if(!a.name||!a.buttonHandler||!a.buttonHandler.handler){m.warn("buttons format is deprecated: "+
a+' expected format: {name: "ok", label: "OK", buttonHandler: {handler: function(){}, scope:}}');c={};for(d in a)a.hasOwnProperty(d)&&(c.name=d,c.buttonHandler={},c.buttonHandler.handler=a[d]);b.push(c)}else b.push(a)});return b},_createButton:function(a){var b=a.label||this._getLocalizedName(a.name);a=this._getHandlerFunction(a);return new f({label:b,onClick:a})},_getLocalizedName:function(a){return e.getObject(a,!1,n)||a},_getHandlerFunction:function(a){var b=a.buttonHandler.handler,c=a.buttonHandler.scope,
d;if(e.isString(b))if(r.hasOwnProperty(b))d=r[b];else throw Error("Unknown button handler: "+d);else d=b;return d=c?e.hitch(c,d,a,this):e.hitch(this,d,a,this)}}),t=g(h,{constructor:function(a){this.message=a},buildRendering:function(){this.inherited(arguments);this._addMessage(this.message)},_addMessage:function(b){d.set(this.domNode,"innerHTML",b);a.set(this.domNode,"whiteSpace","pre-line")}});h=null;return h=new (g([],{constructor:function(a){this.layoutInstance=null},_getLayoutInstance:function(){this.layoutInstance||
(this.layoutInstance=new l);return this.layoutInstance},setLayout:function(a){this.layoutInstance=a},_displayWidget:function(a,b,c){var d,f,g=this;b={title:b};d=c.layoutId||c.type+q.generateUuid();f=c.layoutId||c.type;e.mixin(b,c);if("string"===typeof a||!a)a=new t(a);c.dismissOnClick&&k(a,"click",function(){a.close()});a.onClose=function(){c.closeCallBack&&"function"===typeof c.closeCallBack&&c.closeCallBack();g._getLayoutInstance().removeWidget(d);return!0};a.onCancel=function(){c.cancelCallBack&&
"function"===typeof c.cancelCallBack&&c.cancelCallBack();a.close()};this._getLayoutInstance().addWidget(d,f,a,b);return a},displayModalDialog:function(a,b,c,d){d=d||{};"fault"===d.dialogType?(d.dialogClass=d.dialogClass||"faultMessage",d.layoutId=d.layoutId||"faultDialog"):"warn"===d.dialogType?(d.dialogClass=d.dialogClass||"warnMessage",d.layoutId=d.layoutId||"warnDialog"):d.dialogType=d.dialogType||"messageDialog";a=new s({message:a,buttons:c,options:d});d.isModal=!0;d.type=d.dialogType;return this._displayWidget(a,
b,d)},displayNonModalDialog:function(a,b,c){c=c||{};c.type="floatingPane";return this._displayWidget(b,a,c,c.type)},_getModalDialogWidget:function(){return s}}))})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../_mw/utils/deprecation ../a11yclick".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){m.deprecated({deprecated:{module:"dijit/form/Button"},replacement:{module:"mw-form/PushButton"},
geckNumber:1352405});e("dijit-legacy-requires")&&b(0,function(){h(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return f("dijit.form.Button",[a,k],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:l,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&
!this.label&&(this.label=c.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&g.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=c.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(h,f,g,e,d,c,b,a){f("dijit-legacy-requires")&&e(0,function(){require(["dijit/form/_FormValueWidget"])});return h("dijit.form._FormWidget",[d,b,c,a],{setDisabled:function(a){g.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",
a)},setValue:function(a){g.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){g.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!f("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){f=f("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);h.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,c.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(h.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");
this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,d={};h.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&h.forEach(this._stateClasses,function(a){delete d[a]});h.forEach(b,
function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);c.className=e.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,c){function d(c){e.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":e.toggle(a,b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":e.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":e.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":e.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});a(function(){function a(b,c,d){if(!d||!g.isDescendant(d,c))for(;c&&c!=d;c=c.parentNode)if(c._cssState){var e=q.getEnclosingWidget(c);e&&(c==e.domNode?e._cssMouseEvent(b):e._subnodeCssMouseEvent(c,c._cssState,b))}}var c=l.body(),d;b(c,
k.over,function(b){a(b,b.target,b.relatedTarget)});b(c,k.out,function(b){a(b,b.target,b.relatedTarget)});b(c,m.press,function(b){d=b.target;a(b,d)});b(c,m.release,function(b){a(b,d);d=null});b(c,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=q.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return f})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return f("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?g.set(this.focusNode,"disabled",b):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&
g.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",h.forEach(d.isArray(b)?b:[b],function(b){b=this[b];a("webkit")||l.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(c){if("mouse"==c&&this.isFocusable())var e=this.own(b(this.focusNode,
"focus",function(){g.remove();e.remove()}))[0],f=a("pointer-events")?"pointerup":a("MSPointer")?"MSPointerUp":a("touch-events")?"touchend, mouseup":"mouseup",g=this.own(b(this.ownerDocumentBody,f,d.hitch(this,function(a){g.remove();e.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){k.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=e.get(this.domNode,
"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,
this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},
"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(h,f,g,e){return h("dijit.form._ButtonMixin",null,{label:"",type:"button",__onClick:function(d){d.stopPropagation();d.preventDefault();this.disabled||this.valueNode.click(d);return!1},_onClick:function(d){if(this.disabled)return d.stopPropagation(),d.preventDefault(),!1;!1===this.onClick(d)&&d.preventDefault();var c=d.defaultPrevented;if(!c&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var b=
this.domNode;b.parentNode;b=b.parentNode){var a=e.byNode(b);if(a&&"function"==typeof a._onSubmit){a._onSubmit(d);d.preventDefault();c=!0;break}}return!c},postCreate:function(){this.inherited(arguments);f.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(d){this._set("label",d);(this.containerNode||this.focusNode).innerHTML=d;this.onLabelSet()},onLabelSet:function(){}})})},"dijit/_mw/utils/deprecation":function(){define(["dojo/_base/config"],function(h){var f={warn:function(e){},
error:function(e){console&&console.error&&console.error(e)}},g={deprecated:function(e){var d,c;if((h.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(e))c=window.showDeprecationsAsErrors||e.deprecationLevel===this.ERROR?this.ERROR:this.WARN,d="DEPRECATED: ",e.deprecated&&(d+=e.deprecated.module,e.deprecated.method&&(d+="."+e.deprecated.method+"()"),d+="."),e.replacement&&(d+=" Use "+e.replacement.module,e.replacement.method&&(d+="."+e.replacement.method+"()"),d+=" instead."),e.removalVersion&&
(d+=" Will be removed in version: "+e.removalVersion+"."),e.geckNumber&&(d+=" Please use g"+e.geckNumber+" to track latest information regarding this deprecation"),e.additionalInformation&&(d+=" "+e.additionalInformation),f[c](d)},_isConfigValid:function(e){var d=!!e.deprecated&&"object"===typeof e.deprecated&&e.deprecated.hasOwnProperty("module");e.replacement&&(d=d&&"object"===typeof e.replacement&&e.replacement.hasOwnProperty("module"));e.geckNumber&&(d=d&&"number"===typeof e.geckNumber);d||f.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");
return d}};Object.defineProperties(g,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return g})},"mw-dialog-utils/DialogDisplayManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr mw-store-utils/InMemoryStore ./DialogDisplayUtilities mw-deprecation-utils/deprecation".split(" "),function(h,f,g,e,d,c,b){b.deprecated({deprecated:{module:"MW/dialog/DialogDisplayManager"},replacement:{module:"mw-dialogs/Dialogs"},geckNumber:1471429});return f([c],
{constructor:function(a){this.dialogWidgetStore=new d},addWidget:function(a,b,c,d){b={};b.widget=c;b.position=d.position;b.closable=!1===d.closable?!1:!0;b.autofocus=!0;b.title=d.title;b.id=a;b.style=d.style;b.dialogClass=d.dialogClass;b.parentDiv=d.parentDiv;b["data-testid"]=d["data-testid"];d.isModal?this._displayModalDialog(b):(b.resizable=d.resizable,this._displayNonModalDialog(b));this.dialogWidgetStore.newItem(b)},_displayModalDialog:function(a){a.wrapper=this.createModalDialogWrapper(a);a.wrapper.show();
a.widget.startup()},_displayNonModalDialog:function(a){a.wrapper=this.createNonModalDialogWrapper(a);a.widget.close||(a.widget.close=function(){a.wrapper.close()});this.startNonModalDialogAndAddResizeHandlers(a.wrapper)},removeWidget:function(a){var b=null;this.dialogWidgetStore.fetch({query:{id:a},onItem:function(a){b=a}});b&&(b.wrapper.destroyRecursive(),this.dialogWidgetStore.deleteItem(b))},removeWidgetsWithParentId:function(){},removeWidgetsWithLayoutId:function(){},showWidget:function(){},focusWidget:function(){},
disableWidget:function(){},enableWidget:function(){},updateWidget:function(){},updateWidgetsWithLayoutId:function(){},ensureParentExistsInStore:function(){}})})},"mw-store-utils/InMemoryStore":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/data/util/filter","dojo/data/util/simpleFetch","mw-utils/Utils"],function(h,f,g,e,d){h=h([],{_storeRef:"_S",_timestampProp:"_timestamp",constructor:function(c){c=c||{};this.items=[];c.items&&c.items.forEach(function(b){this.newItem(b)},this)},_fetchItems:function(c,
b){var a=[],d,e,f,h,n,p,r={};if(c.query){e=c.queryOptions?c.queryOptions.ignoreCase:!1;for(d in c.query)c.query.hasOwnProperty(d)&&(p=c.query[d],"string"===typeof p&&/[\*\?]+/.test(p)?r[d]=g.patternToRegExp(p,e):p instanceof RegExp&&(r[d]=p));n=this.items.length;for(e=0;e<n;e+=1){f=!0;h=this.items[e];if(null===h)f=!1;else for(d in c.query)c.query.hasOwnProperty(d)&&(p=c.query[d],this._containsValue(h,d,p,r[d])||(f=!1));f&&a.push(h)}}else this.items&&this.items.forEach(function(b){null!==b&&a.push(b)});
b(a,c)},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Write":!0,"dojo.data.api.Notification":!0,"dojo.data.api.Identity":!0}},getAttributes:function(c){this._assertIsItem(c);var b=[],a;for(a in c)c.hasOwnProperty(a)&&(a!==this._storeRefPropName&&a!==this._loadedPropName&&a!==this._filePathPropName)&&b.push(a);return b},isItem:function(c){return c&&c[this._storeRef]===this},isItemLoaded:function(c){return this.isItem(c)},loadItem:function(){},getValues:function(c,b){this._assertIsItem(c);
if(!f.isString(b))throw Error("MW.utils.InMemoryStore: invalid attribute");return c.hasOwnProperty(b)?[c[b]]:[]},getValue:function(c,b){var a=this.getValues(c,b);return 0===a.length?void 0:a[0]},hasAttribute:function(c,b){return 0<this.getValues(c,b).length},containsValue:function(c,b,a){var d;"string"===typeof a&&(d=g.patternToRegExp(a,!1));return this._containsValue(c,b,a,d)},_containsValue:function(c,b,a,d){var e=this.getValues(c,b),g=e.length;for(c=0;c<g;c+=1)if(b=e[c],d&&!f.isObject(b)&&null!==
b&&b.toString().match(d)||a===b)return!0;return!1},setValues:function(c,b,a){var d;this._assertIsItem(c);if(!f.isString(b))throw Error("MW.utils.InMemoryStore: invalid attribute");d=c[b];if(d!==a||"store"===b)c[b]=a,this.onSet(c,b,d,a)},setValue:function(c,b,a){this.setValues(c,b,a)},newItem:function(c){var b={id:d.generateUuid()};b[this._timestampProp]=new Date;b[this._storeRef]=this;f.mixin(b,c);this.items.push(b);this.onNew(b);return b},deleteItem:function(c){var b;this._assertIsItem(c);b=this.items.indexOf(c);
0<=b&&this.items.splice(b,1);this.onDelete(c)},getIdentity:function(c){return c.id},save:function(c){},revert:function(){return!1},isDirty:function(c){return!1},onNew:function(){},onDelete:function(){},onSet:function(){},_assertIsItem:function(c){if(!this.isItem(c))throw Error("MW.utils.InMemoryStore: Invalid argument, item is not in the store.");}});f.extend(h,e);return h})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(h){var f={};h.setObject("dojo.data.util.filter",f);
f.patternToRegExp=function(f,e){for(var d="^",c=null,b=0;b<f.length;b++)switch(c=f.charAt(b),c){case "\\":d+=c;b++;d+=f.charAt(b);break;case "*":d+=".*";break;case "?":d+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":d+="\\";default:d+=c}d+="$";return e?RegExp(d,"mi"):RegExp(d,"m")};return f})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(h,f,g){var e={};h.setObject("dojo.data.util.simpleFetch",
e);e.errorHandler=function(d,c){c.onError&&c.onError.call(c.scope||f.global,d,c)};e.fetchHandler=function(d,c){var b=c.abort||null,a=!1,e=c.start?c.start:0,l=c.count&&Infinity!==c.count?e+c.count:d.length;c.abort=function(){a=!0;b&&b.call(c)};var m=c.scope||f.global;c.store||(c.store=this);c.onBegin&&c.onBegin.call(m,d.length,c);c.sort&&d.sort(g.createSortFunction(c.sort,this));if(c.onItem)for(var h=e;h<d.length&&h<l;++h){var n=d[h];a||c.onItem.call(m,n,c)}c.onComplete&&!a&&(h=null,c.onItem||(h=d.slice(e,
l)),c.onComplete.call(m,h,c))};e.fetch=function(d){d=d||{};d.store||(d.store=this);this._fetchItems(d,h.hitch(this,"fetchHandler"),h.hitch(this,"errorHandler"));return d};return e})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(h){var f={};h.setObject("dojo.data.util.sorter",f);f.basicComparator=function(f,e){var d=-1;null===f&&(f=void 0);null===e&&(e=void 0);if(f==e)d=0;else if(f>e||null==f)d=1;return d};f.createSortFunction=function(g,e){function d(a,b,c,d){return function(e,
f){var k=d.getValue(e,a),g=d.getValue(f,a);return b*c(k,g)}}for(var c=[],b,a=e.comparatorMap,k=f.basicComparator,l=0;l<g.length;l++){b=g[l];var m=b.attribute;if(m){b=b.descending?-1:1;var h=k;a&&("string"!==typeof m&&"toString"in m&&(m=m.toString()),h=a[m]||k);c.push(d(m,b,h,e))}}return function(a,b){for(var d=0;d<c.length;){var e=c[d++](a,b);if(0!==e)return e}return 0}};return f})},"mw-dialog-utils/DialogDisplayUtilities":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/keys dojo/on dojo/window ./Dialog ./FloatingPane mw-dnd/BoundedMover mw-deprecation-utils/deprecation".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){p.deprecated({deprecated:{module:"MW/dialog/DialogDisplayUtilities"},replacement:{module:"mw-dialogs/Dialogs"},geckNumber:1471429});return f([],{constructor:function(a){},createModalDialogWrapper:function(a){var c;a.dialogClass&&(a.dialogClass=g.trim(a.dialogClass)+"Box dialog");c=new m({title:a.title||"",id:a.id+"Dialog",style:a.style,"class":(a.dialogClass||"dialog")+(a["class"]?" "+a["class"]:""),closable:a.closable,duration:1,refocus:!1!==a.refocus,autofocus:!1!==
a.autofocus});c._onKey=function(){this.inherited("_onKey",arguments)};c.show=function(){var c;a.position&&(0<=a.position.x&&0<=a.position.y)&&this.placeDialogAt(a.position);b.set(this.domNode,{opacity:0,display:""});c=this.inherited("show",arguments);this.closable||b.set(this.closeButtonNode,{display:"none"});this.dombody=document.body;this.handleBodyKeyPress=k(this.dombody,"click",g.hitch(this,this.handleFocus));this._dialogShowPromise=c;c.then(function(){a.wrapper.closeButtonNode.setAttribute("tabindex",
"0")});return c};a.widget&&(a.widget.close=function(){c._dialogShowPromise&&!c._dialogShowPromise.isResolved()?c._dialogShowPromise.then(function(){c.hide()}):c.hide()});this._addWrapperAndWidgetEvents(c,a.widget);c.set("content",a.widget);a["data-testid"]&&d.set(c.domNode,"data-testid",a["data-testid"]);c.onHide=function(){c.onClose()};return c},createNonModalDialogWrapper:function(a,b,f,k){a.parentDiv=b||a.parentDiv||a.id+"floatingParentDiv";e.byId(a.parentDiv)||c.create("div",{id:a.parentDiv},
document.body);a.dialogClass&&(a.dialogClass=g.trim(a.dialogClass));b=new q({title:a.title||"","class":a.dialogClass||"",id:k||a.id,resizable:!1!==a.resizable,dockable:!1,style:f||a.style},e.byId(a.parentDiv));b.duration=500;this._addWrapperAndWidgetEvents(b,a.widget);b.set("content",a.widget);a["data-testid"]&&d.set(b.domNode,"data-testid",a["data-testid"]);return b},startNonModalDialogAndAddResizeHandlers:function(a){var b;a.startup();a.bringToTop();a.show();b=l.getBox();a._moveable.mover=n;a._resizeHandle&&
(a._resizeHandle.constrainMax=!0,a._resizeHandle.maxSize=b)},_addWrapperAndWidgetEvents:function(a,b){a.onClose=function(){this.handleBodyKeyPress&&this.handleBodyKeyPress.remove();return b.onClose&&b.onClose(arguments)};a.onCancel=function(){this.handleBodyKeyPress&&this.handleBodyKeyPress.remove();return b.onCancel&&b.onCancel(arguments)};a.onShow=function(){return b.onShow&&b.onShow(arguments)};a.onFocus=function(){return b.onFocus&&b.onFocus(arguments)};a.onBlur=function(){return b.onBlur&&b.onBlur(arguments)}}})})},
"mw-dialog-utils/Dialog":function(){define("dijit/Dialog dijit/focus dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dnd/Moveable dojo/dom-geometry dojo/on dojo/window mw-dnd/BoundedMover dojo/i18n!./l10n/nls/dialog mw-deprecation-utils/deprecation".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){q.deprecated({deprecated:{module:"MW/dialog/Dialog"},replacement:{module:"mw-dialogs/Dialogs"},geckNumber:1471429});return g([h],{_userPreferredPosition:null,_setTitleAttr:{node:"titleNode",type:"textContent"},
postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","temporary");this.closeButtonNode.title=m.close},setMover:function(a){this._mover=a},_setup:function(){this.inherited(arguments);this.titleBar&&this.draggable&&(this._moveable.destroy(),this._moveable=new c(this.domNode,{handle:this.titleNode}),d.after(this._moveable,"onMoveStop",e.hitch(this,"_endDrag"),!0))},show:function(){var b=this.inherited(arguments);this._moveable.mover=this._mover||l;this.own(a(this.domNode,
"click",e.hitch(this,this.handleFocus)));return b},isTop:function(){return h._DialogLevelManager.isTop(this)},handleFocus:function(){this.open&&(this.isTop()&&(!this.focused||!f.curNode))&&this.focus()},placeDialogAt:function(a){a&&(this._relativePosition={x:a.x,y:a.y})},resize:function(){var a,c,d=k.getBox(this.ownerDocument);c=b.position(this.domNode);if(this._userPreferredPosition=this._relativePosition?this._relativePosition:this._userPreferredPosition)a=this._userPreferredPosition.x+c.w,c=this._userPreferredPosition.y+
c.h,a>d.w||c>d.h?delete this._relativePosition:this._relativePosition=this._userPreferredPosition;this.inherited("resize",arguments)}})})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P){function Q(){}var O=new d;O.resolve(!0);x=e("dijit._DialogBase",[A,F,H,D],{templateString:P,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:x.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=
a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=m.getLocalization("dijit","common");n.mixin(this,a);this.inherited(arguments)},postCreate:function(){k.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);g.after(this,"onExecute",n.hitch(this,"hide"),!0);g.after(this,"onCancel",n.hitch(this,"hide"),!0);this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&E.isTop(this)&&
(this._getFocusItems(),w.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();w.focus(this._firstFocusItem)},_endDrag:function(){var b=a.position(this.domNode),c=t.getBox(this.ownerDocument);b.y=Math.min(Math.max(b.y,0),c.h-b.h);b.x=Math.min(Math.max(b.x,0),c.w-b.w);this._relativePosition=b;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==s("ie")?v:u)(a,{handle:this.titleBar}),g.after(this._moveable,
"onMoveStop",n.hitch(this,"_endDrag"),!0)):b.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":f.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:n.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!b.contains(this.ownerDocumentBody,"dojoMove")){var c=this.domNode,d=t.getBox(this.ownerDocument),e=this._relativePosition,f=a.position(c),g=Math.floor(d.l+(e?Math.min(e.x,d.w-f.w):(d.w-
f.w)/2)),d=Math.floor(d.t+(e?Math.min(e.y,d.h-f.h):(d.h-f.h)/2));k.set(c,{left:g+"px",top:d+"px"})}},_onKey:function(a){if(a.keyCode==q.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(w.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b==this._lastFocusItem&&!a.shiftKey&&(w.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==
q.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return O.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),E.hide(this));var a=t.get(this.ownerDocument);this._modalconnects.push(p(a,"scroll",n.hitch(this,"resize",null)));this._modalconnects.push(p(this.domNode,"keydown",n.hitch(this,"_onKey")));k.set(this.domNode,{opacity:0,display:""});
this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new d(n.hitch(this,function(){b.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,Q);a=this._fadeInDeferred.promise;b=l.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:n.hitch(this,function(){E.show(this,this.underlayAttrs)}),onEnd:n.hitch(this,function(){this.autofocus&&E.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);
delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return O.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new d(n.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,Q);this._fadeOutDeferred.then(n.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=l.fadeOut({node:this.domNode,duration:this.duration,onEnd:n.hitch(this,function(){this.domNode.style.display=
"none";E.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(b){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!b){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,
delete this._singleChildOriginalStyle),f.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&k.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var c=t.getBox(this.ownerDocument);c.w*=this.maxRatio;c.h*=this.maxRatio;var d=a.position(this.domNode);d.w>=c.w||d.h>=c.h?(b={w:Math.min(d.w,c.w),h:Math.min(d.h,c.h)},this._shrunk=!0):this._shrunk=!1}if(b){a.setMarginBox(this.domNode,b);c=[];this.titleBar&&c.push({domNode:this.titleBar,
region:"top"});this.actionBarNode&&c.push({domNode:this.actionBarNode,region:"bottom"});d={domNode:this.containerNode,region:"center"};c.push(d);var e=M.marginBox2contentBox(this.domNode,b);M.layoutChildren(this.domNode,e,c);this._singleChild?(c=M.marginBox2contentBox(this.containerNode,d),this._singleChild.resize({w:c.w,h:c.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();!s("touch")&&!b&&this._position()}},_layoutChildren:function(){f.forEach(this.getChildren(),
function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();E.hide(this);this.inherited(arguments)}});var I=e("dijit.Dialog",[N,x],{});I._DialogBase=x;var E=I._DialogLevelManager={_beginZIndex:950,show:function(a,b){K[K.length-1].focus=w.curNode;var c=K[K.length-1].dialog?K[K.length-1].zIndex+2:I._DialogLevelManager._beginZIndex;
k.set(a.domNode,"zIndex",c);L.show(b,c-1);K.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(K[K.length-1].dialog==a){K.pop();var b=K[K.length-1];1==K.length?L.hide():L.show(b.underlayAttrs,b.zIndex-1);if(a.refocus){a=b.focus;if(b.dialog&&(!a||!c.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(),a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(d){}}}else b=f.indexOf(f.map(K,function(a){return a.dialog}),a),-1!=b&&K.splice(b,1)},isTop:function(a){return K[K.length-1].dialog==
a}},K=I._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];w.watch("curNode",function(a,c,d){a=K[K.length-1].dialog;if(d&&a&&!a._fadeOutDeferred&&d.ownerDocument==a.ownerDocument){do if(d==a.domNode||b.contains(d,"dijitPopup"))return;while(d=d.parentNode);a.focus()}});s("dijit-legacy-requires")&&r(0,function(){h(["dijit/TooltipDialog"])});return I})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(h,
f,g,e,d,c,b,a,k){var l=g.mixin,m={},q=m._Line=function(a,b){this.start=a;this.end=b};q.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var n=m.Animation=function(a){l(this,a);g.isArray(this.curve)&&(this.curve=new q(this.curve[0],this.curve[1]))};n.prototype=new e;g.extend(n,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(f.debugAtAllCosts)this[a].apply(this,
c);else try{this[a].apply(this,c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||this.delay,d=g.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(d,c),this;d();return this},_play:function(a){this._delayTimer&&this._clearTimer();
this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);
return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=
(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},
_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var p=0,r=null,s={run:function(){}};g.extend(n,{_startTimer:function(){this._timer||(this._timer=c.after(s,"run",g.hitch(this,"_cycle"),!0),p++);r||(r=setInterval(g.hitch(s,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,p--);0>=p&&(clearInterval(r),r=null,p=0)}});var t=b("ie")?function(a){var b=a.style;!b.width.length&&"auto"==k.get(a,"width")&&(b.width="auto")}:function(){};
m._fade=function(b){b.node=a.byId(b.node);var d=l({properties:{}},b);b=d.properties.opacity={};b.start=!("start"in d)?function(){return+k.get(d.node,"opacity")||0}:d.start;b.end=d.end;b=m.animateProperty(d);c.after(b,"beforeBegin",g.partial(t,d.node),!0);return b};m.fadeIn=function(a){return m._fade(l({end:1},a))};m.fadeOut=function(a){return m._fade(l({end:0},a))};m._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var u=function(a){this._properties=a;for(var b in a){var c=a[b];
c.start instanceof d&&(c.tempColor=new d)}};u.prototype.getValue=function(a){var b={},c;for(c in this._properties){var e=this._properties[c],f=e.start;f instanceof d?b[c]=d.blendColors(f,e.end,a,e.tempColor).toCss():g.isArray(f)||(b[c]=(e.end-f)*a+f+("opacity"!=c?e.units||"px":0))}return b};m.animateProperty=function(b){var e=b.node=a.byId(b.node);b.easing||(b.easing=h._defaultEasing);b=new n(b);c.after(b,"beforeBegin",g.hitch(b,function(){var a={},b;for(b in this.properties){if("width"==b||"height"==
b)this.node.display="block";var c=this.properties[b];g.isFunction(c)&&(c=c(e));c=a[b]=l({},g.isObject(c)?c:{end:c});g.isFunction(c.start)&&(c.start=c.start(e));g.isFunction(c.end)&&(c.end=c.end(e));var f=0<=b.toLowerCase().indexOf("color"),m=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=k.get(a,b);return"opacity"==b?+c:f?c:parseFloat(c)};"end"in c?"start"in c||(c.start=m(e,b)):c.end=m(e,b);f?(c.start=new d(c.start),c.end=new d(c.end)):c.start="opacity"==
b?+c.start:parseFloat(c.start)}this.curve=new u(a)}),!0);c.after(b,"onAnimate",g.hitch(k,"set",b.node),!0);return b};m.anim=function(a,b,c,d,e,f){return m.animateProperty({node:a,duration:c||n.prototype.duration,properties:b,easing:d,onEnd:e}).play(f||0)};l(h,m);h._Animation=n;return m})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(h,f,g,e){var d=h.Color=function(c){c&&this.setColor(c)};d.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,
255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:e.transparentColor||[0,0,0,0]};f.extend(d,{r:255,g:255,b:255,a:1,_set:function(c,b,a,d){this.r=c;this.g=b;this.b=a;this.a=d},setColor:function(c){f.isString(c)?d.fromString(c,this):f.isArray(c)?d.fromArray(c,this):(this._set(c.r,c.g,c.b,c.a),c instanceof d||this.sanitize());return this},
sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+g.map(["r","g","b"],function(c){c=this[c].toString(16);return 2>c.length?"0"+c:c},this).join("")},toCss:function(c){var b=this.r+", "+this.g+", "+this.b;return(c?"rgba("+b+", "+this.a:"rgb("+b)+")"},toString:function(){return this.toCss(!0)}});d.blendColors=h.blendColors=function(c,b,a,e){var f=e||new d;g.forEach(["r","g","b","a"],function(d){f[d]=
c[d]+(b[d]-c[d])*a;"a"!=d&&(f[d]=Math.round(f[d]))});return f.sanitize()};d.fromRgb=h.colorFromRgb=function(c,b){var a=c.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return a&&d.fromArray(a[1].split(/\s*,\s*/),b)};d.fromHex=h.colorFromHex=function(c,b){var a=b||new d,e=4==c.length?4:8,f=(1<<e)-1;c=Number("0x"+c.substr(1));if(isNaN(c))return null;g.forEach(["b","g","r"],function(b){var d=c&f;c>>=e;a[b]=4==e?17*d:d});a.a=1;return a};d.fromArray=h.colorFromArray=function(c,b){var a=b||new d;a._set(Number(c[0]),
Number(c[1]),Number(c[2]),Number(c[3]));isNaN(a.a)&&(a.a=1);return a.sanitize()};d.fromString=h.colorFromString=function(c,b){var a=d.named[c];return a&&d.fromArray(a,b)||d.fromRgb(c,b)||d.fromHex(c,b)};return d})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){return f("dojo.dnd.Moveable",[c],{handle:"",delay:0,skip:!1,constructor:function(a,
c){this.node=e.byId(a);c||(c={});this.handle=c.handle?e.byId(c.handle):null;this.handle||(this.handle=this.node);this.delay=0<c.delay?c.delay:0;this.skip=c.skip;this.mover=c.mover?c.mover:m;this.events=[b(this.handle,k.press,g.hitch(this,"onMouseDown")),b(this.handle,"dragstart",g.hitch(this,"onSelectStart")),b(this.handle,"selectstart",g.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){h.forEach(this.events,function(a){a.remove()});this.events=this.node=
this.handle=null},onMouseDown:function(a){if(!this.skip||!l.isFormElement(a)){if(this.delay)this.events.push(b(this.handle,k.move,g.hitch(this,"onMouseMove")),b(this.handle.ownerDocument,k.release,g.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},
onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){if(!this.skip||!l.isFormElement(a))a.stopPropagation(),a.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(b){a.publish("/dnd/move/start",b);d.add(q.body(),"dojoMove");d.add(this.node,"dojoMoveItem")},onMoveStop:function(b){a.publish("/dnd/move/stop",b);d.remove(q.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},
onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(h,f,g,e){var d=g.getObject("dojo.dnd",!0);d.getCopyKeyState=function(c){return c[h("mac")?"metaKey":"ctrlKey"]};d._uniqueId=0;d.getUniqueId=function(){var c;do c=f._scopeName+"Unique"+ ++d._uniqueId;while(e.byId(c));return c};
d._empty={};d.isFormElement=function(c){c=c.target;3==c.nodeType&&(c=c.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+c.tagName.toLowerCase()+" ")};return d})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n){return f("dojo.dnd.Mover",[k],{constructor:function(a,b,d){function e(a){a.preventDefault();
a.stopPropagation()}this.node=c.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=d;a=a.ownerDocument;this.events=[l(a,m.move,g.hitch(this,"onFirstMove")),l(a,m.move,g.hitch(this,"onMouseMove")),l(a,m.release,g.hitch(this,"onMouseUp")),l(a,"dragstart",e),l(a.body,"selectstart",e)];n.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){n.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();
a.stopPropagation()},onMouseUp:function(a){(e("webkit")&&e("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(c){var e=this.node.style,f,k=this.host;switch(e.position){case "relative":case "absolute":f=Math.round(parseFloat(e.left))||0;e=Math.round(parseFloat(e.top))||0;break;default:e.position="absolute";e=b.getMarginBox(this.node);f=d.doc.body;var g=a.getComputedStyle(f),l=b.getMarginBox(f,g),g=b.getContentBox(f,
g);f=e.l-(g.l-l.l);e=e.t-(g.t-l.t)}this.marginBox.l=f-this.marginBox.l;this.marginBox.t=e-this.marginBox.t;if(k&&k.onFirstMove)k.onFirstMove(this,c);this.events.shift().remove()},destroy:function(){h.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(h,f,g,e,d,c){var b=
{};h.setObject("dojo.dnd.autoscroll",b);b.getViewport=c.getBox;b.V_TRIGGER_AUTOSCROLL=32;b.H_TRIGGER_AUTOSCROLL=32;b.V_AUTOSCROLL_VALUE=16;b.H_AUTOSCROLL_VALUE=16;var a,k=g.doc,l=Infinity,m=Infinity;b.autoScrollStart=function(b){k=b;a=c.getBox(k);b=g.body(k).parentNode;l=Math.max(b.scrollHeight-a.h,0);m=Math.max(b.scrollWidth-a.w,0)};b.autoScroll=function(d){var e=a||c.getBox(k),f=g.body(k).parentNode,h=0,s=0;d.clientX<b.H_TRIGGER_AUTOSCROLL?h=-b.H_AUTOSCROLL_VALUE:d.clientX>e.w-b.H_TRIGGER_AUTOSCROLL&&
(h=Math.min(b.H_AUTOSCROLL_VALUE,m-f.scrollLeft));d.clientY<b.V_TRIGGER_AUTOSCROLL?s=-b.V_AUTOSCROLL_VALUE:d.clientY>e.h-b.V_TRIGGER_AUTOSCROLL&&(s=Math.min(b.V_AUTOSCROLL_VALUE,l-f.scrollTop));window.scrollBy(h,s)};b._validNodes={div:1,p:1,td:1};b._validOverflow={auto:1,scroll:1};b.autoScrollNodes=function(a){for(var c,k,l,m,h,u,v=0,w=0,x=a.target;x;){if(1==x.nodeType&&x.tagName.toLowerCase()in b._validNodes){l=d.getComputedStyle(x);m=l.overflow.toLowerCase()in b._validOverflow;h=l.overflowX.toLowerCase()in
b._validOverflow;u=l.overflowY.toLowerCase()in b._validOverflow;if(m||h||u)c=e.getContentBox(x,l),k=e.position(x,!0);if(m||h){l=Math.min(b.H_TRIGGER_AUTOSCROLL,c.w/2);h=a.pageX-k.x;if(f("webkit")||f("opera"))h+=g.body().scrollLeft;v=0;0<h&&h<c.w&&(h<l?v=-l:h>c.w-l&&(v=l),x.scrollLeft+=v)}if(m||u){m=Math.min(b.V_TRIGGER_AUTOSCROLL,c.h/2);u=a.pageY-k.y;if(f("webkit")||f("opera"))u+=g.body().scrollTop;w=0;0<u&&u<c.h&&(u<m?w=-m:u>c.h-m&&(w=m),x.scrollTop+=w)}if(v||w)return}try{x=x.parentNode}catch(B){x=
null}}b.autoScroll(a)};return b})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(h,f){var g=f.prototype.onMove;return h("dojo.dnd.TimedMoveable",f,{timeout:40,constructor:function(e,d){d||(d={});d.timeout&&("number"==typeof d.timeout&&0<=d.timeout)&&(this.timeout=d.timeout)},onMoveStop:function(e){e._timer&&(clearTimeout(e._timer),g.call(this,e,e._leftTop));f.prototype.onMoveStop.apply(this,arguments)},onMove:function(e,d){e._leftTop=d;if(!e._timer){var c=this;
e._timer=setTimeout(function(){e._timer=null;g.call(c,e,e._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(h,f,g,e,d){var c={};h.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(b){c[b]=e[b]});g.mixin(c,{defaultDuration:f.defaultDuration||200});g.mixin(d,c);return d})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(h,f,g,e,d,c){return f("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var a=[];h.forEach(b||this.getChildren(),function(b){"value"in b?a.push(b):a=a.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return a},reset:function(){h.forEach(this._getDescendantFormWidgets(),function(b){b.reset&&b.reset()})},validate:function(){var b=!1;return h.every(h.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var d=a.disabled||!a.validate||
a.validate();!d&&!b&&(c.scrollIntoView(a.containerNode||a.domNode),a.focus(),b=!0);return d}),function(a){return a})},setValues:function(b){g.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){var a={};h.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(a[b.name]||(a[b.name]=[])).push(b)});for(var c in a)if(a.hasOwnProperty(c)){var d=a[c],f=e.getObject(c,!1,b);void 0!==f&&(f=[].concat(f),
"boolean"==typeof d[0].checked?h.forEach(d,function(a){a.set("value",-1!=h.indexOf(f,a._get("value")))}):d[0].multiple?d[0].set("value",f):h.forEach(d,function(a,b){a.set("value",f[b])}))}},getValues:function(){g.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};h.forEach(this._getDescendantFormWidgets(),function(a){var c=a.name;if(c&&!a.disabled){var d=a.get("value");"boolean"==typeof a.checked?
/Radio/.test(a.declaredClass)?!1!==d?e.setObject(c,d,b):(d=e.getObject(c,!1,b),void 0===d&&e.setObject(c,null,b)):(a=e.getObject(c,!1,b),a||(a=[],e.setObject(c,a,b)),!1!==d&&a.push(d)):(a=e.getObject(c,!1,b),"undefined"!=typeof a?e.isArray(a)?a.push(d):e.setObject(c,[a,d],b):e.setObject(c,d,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=h.map(this._descendants,function(a){return a.get("state")||""});return 0<=h.indexOf(b,"Error")?
"Error":0<=h.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();h.forEach(this._descendants,function(a){a._started||a.startup()});b||this._onChildChange()},_onChildChange:function(b){(!b||"state"==b||"disabled"==b)&&this._set("state",this._getState());if(!b||"value"==b||"disabled"==b||"checked"==b)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(a){a.target!=b.domNode&&b._onChildChange(a.type.replace("attrmodified-",""))}));this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(h,f){return h("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var g=f._getTabNavigable(this.domNode);this._firstFocusItem=g.lowest||g.first||this.closeButtonNode||this.domNode;this._lastFocusItem=g.last||g.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){var n=h("dijit.DialogUnderlay",[a,k],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){e.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(c(this.domNode,"keydown",f.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,c=this.domNode.style;c.display="none";var d=b.getBox(this.ownerDocument);c.top=d.t+"px";c.left=d.l+"px";a.width=d.w+"px";a.height=d.h+"px";c.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new l(this.domNode);var a=b.get(this.ownerDocument);this._modalConnects=[m.on("resize",f.hitch(this,"layout")),c(a,"scroll",
f.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});n.show=function(a,b){var c=n._singleton;!c||c._destroyed?c=q._underlay=n._singleton=new n(a):a&&c.set(a);d.set(c.domNode,"zIndex",b);c.open||c.show()};n.hide=function(){var a=
n._singleton;a&&!a._destroyed&&a.hide()};return n})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(h,f,g,e,d,c,b,a){a.add("config-bgIframe",a("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||a("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var k=new function(){var b=[];this.pop=function(){var c;b.length?(c=b.pop(),c.style.display=""):(9>a("ie")?(c="\x3ciframe src\x3d'"+
(g.dojoBlankHtmlUrl||h.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",c=document.createElement(c)):(c=e.create("iframe"),c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role","presentation"),d.set(c,"opacity",0.1)),c.tabIndex=-1);return c};this.push=function(a){a.style.display="none";b.push(a)}};f.BackgroundIframe=function(e){if(!e.id)throw Error("no id");
if(a("config-bgIframe")){var f=this.iframe=k.pop();e.appendChild(f);7>a("ie")||a("quirks")?(this.resize(e),this._conn=b(e,"resize",c.hitch(this,"resize",e))):d.set(f,{width:"100%",height:"100%"})}};c.extend(f.BackgroundIframe,{resize:function(a){this.iframe&&d.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),k.push(this.iframe),delete this.iframe)}});
return f.BackgroundIframe})},"mw-dnd/BoundedMover":function(){define(["dojo/_base/declare","dojo/_base/event","dojo/dnd/Mover","dojo/dom-geometry","dojo/window"],function(h,f,g,e,d){return h([g],{onMouseMove:function(c){var b=this.marginBox,a=e.position(this.host.node),k=d.getBox(),b={l:b.l+c.pageX,t:b.t+c.pageY};b.l=Math.max(0,Math.min(b.l,k.w-a.w));b.t=Math.max(0,Math.min(b.t,k.h-a.h));this.host.onMove(this,b,c);f.stop(c)}})})},"mw-deprecation-utils/deprecation":function(){define(["dojo/_base/config",
"mw-log/Log"],function(h,f){var g={deprecated:function(e){var d,c;if((h.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(e))c=window.showDeprecationsAsErrors||e.deprecationLevel===this.ERROR?this.ERROR:this.WARN,d="DEPRECATED: ",e.deprecated&&(d+=e.deprecated.module,e.deprecated.method&&(d+="."+e.deprecated.method+"()"),d+="."),e.replacement&&(d+=" Use "+e.replacement.module,e.replacement.method&&(d+="."+e.replacement.method+"()"),d+=" instead."),e.removalVersion&&(d+=" Will be removed in version: "+
e.removalVersion+"."),e.geckNumber&&(d+=" Please use g"+e.geckNumber+" to track latest information regarding this deprecation"),e.additionalInformation&&(d+=" "+e.additionalInformation),f[c](d)},_isConfigValid:function(e){var d=!!e.deprecated&&"object"===typeof e.deprecated&&e.deprecated.hasOwnProperty("module");e.replacement&&(d=d&&"object"===typeof e.replacement&&e.replacement.hasOwnProperty("module"));e.geckNumber&&(d=d&&"number"===typeof e.geckNumber);d||f.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");
return d}};Object.defineProperties(g,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return g})},"mw-dialog-utils/FloatingPane":function(){define("dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/dnd/Moveable dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/Evented dojo/window dojo/touch dojox/layout/FloatingPane dijit/_Widget mw-dnd/BoundedMover dojo/i18n!./l10n/nls/dialog dojo/text!./floatingPaneTemplate.html".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,
r,s){k={isOnTop:!1,attributeMap:g.delegate(n.prototype.attributeMap,{title:{type:"textContent",node:"titleNode"}}),startup:function(){this.inherited(arguments);this._checkResizeConstraints();this.resizable&&this.connect(this._resizeHandle.domNode,m.press,"bringToTop");this.connect(this.focusNode,m.press,function(){this.domNode.focus()});this._resizeHandle&&this.connect(this._resizeHandle.domNode,m.press,function(){this.domNode.focus()});this.domNode.focus()},postCreate:function(){this.inherited(arguments);
this.domNode.setAttribute("data-focus","temporary");this._moveable.destroy();this._moveable=new e(this.domNode,{handle:this.titleNode});this._moveable.mover=p;this.dockable&&(this.own(b.subscribe("/floatingPaneDockUpdate",g.hitch(this,function(a){this.dockTo=a.newWidget}))),this.dockTo.addItem(this));this.closeNode.title=r.close;this.closeNode.setAttribute("tabindex","0");this.maxNode.title=r.maximize;this.dockNode.title=r.minimize},templateString:s,hide:function(a){var b,c;"function"===typeof a?
(b=a,c=g.hitch(this,function(){b();this.onClose();this.emit("onClose")}),this.inherited(arguments,[c])):"boolean"===typeof a?(this.paneOriginalPosition=d.position(this.domNode),f.animateProperty({node:this.domNode,properties:{top:d.position(this.dockTo.domNode).y,left:d.position(this.dockTo.domNode).x,height:0,width:d.position(this.dockTo.domNode).w,opacity:0},onEnd:g.hitch(this,function(){this.domNode.style.visibility="hidden";this.dockTo&&this.dockable&&this.dockTo._positionDock(null)}),duration:this.duration}).play()):
this.inherited(arguments)},close:function(){a.emit(this.domNode,"restorefocus",{bubbles:!0});this.closeAlreadyInvoked||(this.closeAlreadyInvoked=!0,this.inherited(arguments))},show:function(){this.onTop||(this.paneOriginalPosition&&(this.domNode.style.top=this.paneOriginalPosition.y+"px",this.domNode.style.left=this.paneOriginalPosition.x+"px",this.domNode.style.width=this.paneOriginalPosition.w-c.get(this.domNode,"borderLeftWidth")-c.get(this.domNode,"borderRightWidth")+"px",this.domNode.style.height=
this.paneOriginalPosition.h-c.get(this.domNode,"borderLeftWidth")-c.get(this.domNode,"borderRightWidth")+"px"),delete this.closeAlreadyInvoked,this._isMinimized=!1,this.inherited(arguments))},onClose:function(){},resize:function(a){a||(this._naturalState=d.position(this.domNode),this._naturalState.w-=c.get(this.domNode,"borderLeftWidth")+c.get(this.domNode,"borderRightWidth"),this._naturalState.h-=c.get(this.domNode,"borderTopWidth")+c.get(this.domNode,"borderBottomWidth"));this.inherited(arguments)},
minimize:function(){this._isDocked||(this.hide(!0),this.onTop=!1,this.onMinimize())},bringToTop:function(){this._isMinimized||(this.inherited(arguments),this.onTop=!0,this.onBringToTop())},onBringToTop:function(){},onMinimize:function(){this._isMinimized=!0},forceClose:function(){this.dockable&&this.dockTo.removeItem(this);this.inherited("close",arguments)},_dock:function(){!this._isDocked&&this.dockable&&(this.dockTo.addItem(this),this._isDocked=!0)},_checkResizeConstraints:function(){var a;this._resizeHandle&&
(a=g.hitch(this._resizeHandle,this._resizeHandle._checkConstraints),this._resizeHandle._checkConstraints=function(b,e){var f,k,g,m={},h,n;f=a(b,e);k=d.position(this.targetDomNode);h=2*(c.get(this.targetDomNode,"borderTopWidth")+c.get(this.targetDomNode,"borderBottomWidth"));n=2*(c.get(this.targetDomNode,"borderLeftWidth")+c.get(this.targetDomNode,"borderRightWidth"));g=l.getBox();m.w=Math.min(f.w,Math.floor(g.w-(k.x+n)));m.h=Math.min(f.h,Math.floor(g.h-(k.y+h)));return m})}};return h([q],k)})},"dojox/layout/FloatingPane":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/window dojo/_base/declare dojo/_base/fx dojo/_base/connect dojo/_base/array dojo/_base/sniff dojo/window dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-construct dojo/touch dijit/_TemplatedMixin dijit/_Widget dijit/BackgroundIframe dijit/registry dojo/dnd/Moveable ./ContentPane ./ResizeHandle dojo/text!./resources/FloatingPane.html ./Dock".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A){h.experimental("dojox.layout.FloatingPane");return e("dojox.layout.FloatingPane",[w,r],{closable:!0,dockable:!0,resizable:!1,maxable:!1,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:B,attributeMap:f.delegate(s.prototype.attributeMap,{title:{type:"innerHTML",node:"titleNode"}}),postCreate:function(){this.inherited(arguments);
this._moveable=new v(this.domNode,{handle:this.focusNode});this.dockable||(this.dockNode.style.display="none");this.closable||(this.closeNode.style.display="none");this.maxable||(this.maxNode.style.display="none",this.restoreNode.style.display="none");this.resizable?this.domNode.style.width=q.getContentBox(this.domNode).w+"px":this.resizeHandle.style.display="none";this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new t(this.domNode);this._naturalState=q.position(this.domNode)},
startup:function(){if(!this._started){this.inherited(arguments);this.resizable&&(a("ie")?this.canvas.style.overflow="auto":this.containerNode.style.overflow="auto",this._resizeHandle=new x({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle));if(this.dockable){var b=this.dockTo;this.dockTo=this.dockTo?u.byId(this.dockTo):u.byId("dojoxGlobalFloatingDock");if(!this.dockTo){var c;b?(c=b,b=l.byId(b)):(b=n.create("div",null,g.body()),m.add(b,"dojoxFloatingDockDefault"),c="dojoxGlobalFloatingDock");
this.dockTo=new A({id:c,autoPosition:"south"},b);this.dockTo.startup()}("none"==this.domNode.style.display||"hidden"==this.domNode.style.visibility)&&this.minimize()}this.connect(this.focusNode,p.press,"bringToTop");this.connect(this.domNode,p.press,"bringToTop");c=q.getContentBox(this.domNode);this.resize(f.mixin(q.position(this.domNode),{w:c.w,h:c.h}));this._started=!0}},setTitle:function(a){h.deprecated("pane.setTitle","Use pane.set('title', someTitle)","2.0");this.set("title",a)},close:function(){this.closable&&
(c.unsubscribe(this._listener),this.hide(f.hitch(this,function(){this.destroyRecursive()})))},hide:function(a){d.fadeOut({node:this.domNode,duration:this.duration,onEnd:f.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";this.dockTo&&this.dockable&&this.dockTo._positionDock(null);a&&a()})}).play()},show:function(a){d.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:f.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility=
"visible";this.dockTo&&this.dockable&&this.dockTo._positionDock(null);"function"==typeof a&&a();this._isDocked=!1;this._dockNode&&(this._dockNode.destroy(),this._dockNode=null)})}).play();var b=q.getContentBox(this.domNode);this.resize(f.mixin(q.position(this.domNode),{w:b.w,h:b.h}));this._onShow()},minimize:function(){this._isDocked||this.hide(f.hitch(this,"_dock"))},maximize:function(){this._maximized||(this._naturalState=q.position(this.domNode),this._isDocked&&(this.show(),setTimeout(f.hitch(this,
"maximize"),this.duration)),m.add(this.focusNode,"floatingPaneMaximized"),this.resize(k.getBox()),this._maximized=!0)},_restore:function(){this._maximized&&(this.resize(this._naturalState),m.remove(this.focusNode,"floatingPaneMaximized"),this._maximized=!1)},_dock:function(){!this._isDocked&&this.dockable&&(this._dockNode=this.dockTo.addNode(this),this._isDocked=!0)},resize:function(a){this._naturalState=a=a||this._naturalState;var b=this.domNode.style;"t"in a?b.top=a.t+"px":"y"in a&&(b.top=a.y+"px");
"l"in a?b.left=a.l+"px":"x"in a&&(b.left=a.x+"px");b.width=a.w+"px";b.height=a.h+"px";a={l:0,t:0,w:a.w,h:a.h-this.focusNode.offsetHeight};q.setMarginBox(this.canvas,a);this._checkIfSingleChild();this._singleChild&&this._singleChild.resize&&this._singleChild.resize(a)},bringToTop:function(){var a=b.filter(this._allFPs,function(a){return a!==this},this);a.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex});a.push(this);b.forEach(a,function(a,b){a.domNode.style.zIndex=this._startZ+
2*b;m.remove(a.domNode,"dojoxFloatingPaneFg")},this);m.add(this.domNode,"dojoxFloatingPaneFg")},destroy:function(){this._allFPs.splice(b.indexOf(this._allFPs,this),1);this._resizeHandle&&this._resizeHandle.destroy();this.inherited(arguments)}})})},"dojox/layout/ContentPane":function(){define(["dojo/_base/lang","dojo/_base/xhr","dijit/layout/ContentPane","dojox/html/_base","dojo/_base/declare"],function(h,f,g,e,d){return d("dojox.layout.ContentPane",g,{adjustPaths:!1,cleanContent:!1,renderStyles:!1,
executeScripts:!0,scriptHasHooks:!1,ioMethod:f.get,ioArgs:{},onExecError:function(c){},_setContent:function(c){var b=this._contentSetter;b&&b instanceof e._ContentSetter||(b=this._contentSetter=new e._ContentSetter({node:this.containerNode,_onError:h.hitch(this,this._onError),onContentError:h.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})}));this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&
(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};return this.inherited("_setContent",arguments)},destroy:function(){var c=this._contentSetter;c&&c.tearDown();this.inherited(arguments)}})})},"dojox/html/_base":function(){define("dojo/_base/declare dojo/Deferred dojo/dom-construct dojo/html dojo/_base/kernel dojo/_base/lang dojo/ready dojo/_base/sniff dojo/_base/url dojo/_base/xhr dojo/when dojo/_base/window".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){var n=d.getObject("dojox.html",!0);if(a("ie"))var p=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;var r=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g,s=n._adjustCssPaths=function(a,b){if(b&&a)return p&&(b=b.replace(p,function(b,c,d,e,f){return c+(new k(a,"./"+e)).toString()+f})),b.replace(r,function(b,c,d,e,f,g){return d?'@import "'+(new k(a,"./"+d)).toString()+
'"'+g:"url("+(new k(a,"./"+f)).toString()+")"+g})},t=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi,u=n._adjustHtmlPaths=function(a,b){var c=a||"./";return b.replace(t,function(a,b,d,e,f,g,l,m){return b+(d?d+"\x3d"+e+(new k(c,f)).toString()+e:"style\x3d"+g+s(c,l)+g)+m})},v=n._snarfStyles=function(a,b,c){c.attributes=[];b=b.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)style\b/ig,"\x26lt;$1Style").replace(/<(\/?)link\b/ig,"\x26lt;$1Link").replace(/@import "/ig,
'@ import "')});return b.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(b,d,e,f,k,g){b=(d||f||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");e?e=c.push(a?s(a,e):e):(e=c.push('@import "'+g+'";'),b=b.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,""));if(b){b=b.split(/\s+/);g={};f=0;for(k=b.length;f<k;f++)d=b[f].split("\x3d"),g[d[0]]=d[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");c.attributes[e-1]=g}return""})},w=n._snarfScripts=
function(a,b){function c(a){b.downloadRemote&&(a=a.replace(/&([a-z0-9#]+);/g,function(a,b){switch(b){case "amp":return"\x26";case "gt":return"\x3e";case "lt":return"\x3c";default:return"#"==b.charAt(0)?String.fromCharCode(b.substring(1)):"\x26"+b+";"}}),l.get({url:a,sync:!0,load:function(a){""!==b.code&&(a="\n"+a);b.code+=a+";"},error:b.errBack}))}b.code="";a=a.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)script\b/ig,"\x26lt;$1Script")});return a.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?>([\s\S]*?)<\/script>/gi,
function(a,d,e,f){e?c(e):(""!==b.code&&(f="\n"+f),b.code+=f+";");return""})},x=n.evalInGlobal=function(a,b){b=b||q.doc.body;var c=b.ownerDocument.createElement("script");c.type="text/javascript";b.appendChild(c);c.text=a};n._ContentSetter=h(e._ContentSetter,{adjustPaths:!1,referencePath:".",renderStyles:!1,executeScripts:!1,scriptHasHooks:!1,scriptHookReplacement:null,_renderStyles:function(a){this._styleNodes=[];for(var b,c,d,e=this.node.ownerDocument,f=e.getElementsByTagName("head")[0],k=0,g=a.length;k<
g;k++){d=a[k];c=a.attributes[k];b=e.createElement("style");b.setAttribute("type","text/css");for(var l in c)b.setAttribute(l,c[l]);this._styleNodes.push(b);f.appendChild(b);b.styleSheet?b.styleSheet.cssText=d:b.appendChild(e.createTextNode(d))}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var a=this.content,b=this._styles;this._code=null;if(c.isString(a)){this.adjustPaths&&this.referencePath&&(a=u(this.referencePath,a));
if(this.renderStyles||this.cleanContent)a=v(this.referencePath,a,b);if(this.executeScripts){var d=this,b={downloadRemote:!0,errBack:function(a){d._onError.call(d,"Exec",'Error downloading remote script in "'+d.id+'"',a)}},a=w(a,b);this._code=b.code}}this.content=a},onEnd:function(){var a=this._code,d=this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)g.destroy(this._styleNodes.pop());this.renderStyles&&(d&&d.length)&&this._renderStyles(d);var e=new f,k=this.getInherited(arguments),
l=arguments,d=c.hitch(this,function(){k.apply(this,l);m(this.parseDeferred,function(){e.resolve()})});if(this.executeScripts&&a){this.cleanContent&&(a=a.replace(/(\x3c!--|(?:\/\/)?--\x3e|<!\[CDATA\[|\]\]>)/g,""));this.scriptHasHooks&&(a=a.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement));try{x(a,this.node)}catch(h){this._onError("Exec","Error eval script in "+this.id+", "+h.message,h)}b(d)}else d();return e.promise},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&
this._styleNodes.length)for(;this._styleNodes.length;)g.destroy(this._styleNodes.pop());delete this._styleNodes;c.mixin(this,n._ContentSetter.prototype)}});n.set=function(a,b,d){return d?(new n._ContentSetter(c.mixin(d,{content:b,node:a}))).set():e._setNodeContent(a,b,!0)};return n})},"dojox/layout/ResizeHandle":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/event dojo/_base/fx dojo/_base/window dojo/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/declare dojo/touch dijit/_base/manager dijit/_Widget dijit/_TemplatedMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){h.experimental("dojox.layout.ResizeHandle");var u=n("dojox.layout._ResizeHelper",s,{show:function(){q.set(this.domNode,"display","")},hide:function(){q.set(this.domNode,"display","none")},resize:function(a){m.setMarginBox(this.domNode,a)}});return n("dojox.layout.ResizeHandle",[s,t],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:!1,activeResizeClass:"dojoxResizeHandleClone",animateSizing:!0,animateMethod:"chain",animateDuration:225,minHeight:100,
minWidth:100,constrainMax:!1,maxHeight:0,maxWidth:0,fixedAspect:!1,intermediateChanges:!1,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:'\x3cdiv dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxResizeHandle"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',postCreate:function(){this.connect(this.resizeHandle,p.press,"_beginSizing");this.activeResize?this.animateSizing=!1:(this._resizeHelper=r.byId("dojoxGlobalResizeHelper"),this._resizeHelper||(this._resizeHelper=(new u({id:"dojoxGlobalResizeHelper"})).placeAt(b.body()),
l.add(this._resizeHelper.domNode,this.activeResizeClass)));this.minSize||(this.minSize={w:this.minWidth,h:this.minHeight});this.constrainMax&&(this.maxSize={w:this.maxWidth,h:this.maxHeight});this._resizeX=this._resizeY=!1;var a=f.partial(l.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=!0;a("dojoxResizeNW");break;case "x":this._resizeX=!0;a("dojoxResizeW");break;case "y":this._resizeY=!0,a("dojoxResizeN")}},_beginSizing:function(a){if(!this._isSizing&&
(g.publish(this.startTopic,[this]),this.targetDomNode=(this.targetWidget=r.byId(this.targetId))?this.targetWidget.domNode:k.byId(this.targetId),this.targetContainer&&(this.targetDomNode=this.targetContainer),this.targetDomNode)){if(!this.activeResize){var c=m.position(this.targetDomNode,!0);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();this.isLeftToRight()||(this._resizeHelper.startPosition={l:c.x,t:c.y})}this._isSizing=!0;this.startPoint={x:a.clientX,y:a.clientY};
var c=q.getComputedStyle(this.targetDomNode),e="border-model"===m.boxModel?{w:0,h:0}:m.getPadBorderExtents(this.targetDomNode,c),f=m.getMarginExtents(this.targetDomNode,c);this.startSize={w:q.get(this.targetDomNode,"width",c),h:q.get(this.targetDomNode,"height",c),pbw:e.w,pbh:e.h,mw:f.w,mh:f.h};!this.isLeftToRight()&&"absolute"==q.get(this.targetDomNode,"position")&&(c=m.position(this.targetDomNode,!0),this.startPosition={l:c.x,t:c.y});this._pconnects=[g.connect(b.doc,p.move,this,"_updateSizing"),
g.connect(b.doc,p.release,this,"_endSizing")];d.stop(a)}},_updateSizing:function(a){if(this.activeResize)this._changeSizing(a);else{var b=this._getNewCoords(a,"border",this._resizeHelper.startPosition);if(!1===b)return;this._resizeHelper.resize(b)}a.preventDefault()},_getNewCoords:function(a,b,c){try{if(!a.clientX||!a.clientY)return!1}catch(d){return!1}this._activeResizeLastEvent=a;var e=(this.isLeftToRight()?1:-1)*(this.startPoint.x-a.clientX),f=this.startPoint.y-a.clientY;a=this.startSize.w-(this._resizeX?
e:0);f=this._checkConstraints(a,this.startSize.h-(this._resizeY?f:0));if((c=c||this.startPosition)&&this._resizeX)f.l=c.l+e,f.w!=a&&(f.l+=a-f.w),f.t=c.t;switch(b){case "margin":f.w+=this.startSize.mw,f.h+=this.startSize.mh;case "border":f.w+=this.startSize.pbw,f.h+=this.startSize.pbh}return f},_checkConstraints:function(a,b){if(this.minSize){var c=this.minSize;a<c.w&&(a=c.w);b<c.h&&(b=c.h)}this.constrainMax&&this.maxSize&&(c=this.maxSize,a>c.w&&(a=c.w),b>c.h&&(b=c.h));if(this.fixedAspect){var c=this.startSize.w,
d=this.startSize.h,e=c*b-d*a;0>e?a=b*c/d:0<e&&(b=a*d/c)}return{w:a,h:b}},_changeSizing:function(b){var d=this.targetWidget&&f.isFunction(this.targetWidget.resize),e=this._getNewCoords(b,d&&"margin");if(!1!==e&&(d?this.targetWidget.resize(e):this.animateSizing?a[this.animateMethod]([c.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:e.w}},duration:this.animateDuration}),c.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:e.h}},
duration:this.animateDuration})]).play():q.set(this.targetDomNode,{width:e.w+"px",height:e.h+"px"}),this.intermediateChanges))this.onResize(b)},_endSizing:function(a){e.forEach(this._pconnects,g.disconnect);var b=f.partial(g.publish,this.endTopic,[this]);this.activeResize?b():(this._resizeHelper.hide(),this._changeSizing(a),setTimeout(b,this.animateDuration+15));this._isSizing=!1;this.onResize(a)},onResize:function(a){}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){g.isAsync||l(0,function(){m(["./fx/Toggler"])});g=g.fx={};l={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var q=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;e.forEach(this._animations,function(a){a&&("undefined"!=typeof a.duration&&(this.duration+=a.duration),a.delay&&(this.duration+=a.delay))},this)};q.prototype=new f;h.extend(q,{_onAnimate:function(){this._fire("onAnimate",
arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=d.after(this._current,"onAnimate",h.hitch(this,"_onAnimate"),!0),this._onEndCtx=d.after(this._current,"onEnd",h.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==
this._current.status())return this;var c=d.after(this._current,"beforeBegin",h.hitch(this,function(){this._fire("beforeBegin")}),!0),e=d.after(this._current,"onBegin",h.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),f=d.after(this._current,"onPlay",h.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();e.remove();f.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=d.after(this._current,"onAnimate",h.hitch(this,"_onAnimate"),!0);this._onEndCtx&&
this._onEndCtx.remove();this._onEndCtx=d.after(this._current,"onEnd",h.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=d.after(this._current,"onPause",h.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;e.some(this._animations,function(a,b){if(c<=a.duration)return this._current=a,this._index=
b,!0;c-=a.duration;return!1},this);this._current&&this._current.gotoPercent(c/this._current.duration);b&&this.play();return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=d.after(this._current,"onStop",h.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():
"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});h.extend(q,l);g.chain=function(a){return new q(h.isArray(a)?a:Array.prototype.slice.call(a,0))};var n=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;e.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(d.after(a,"onEnd",h.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=
new c.Animation({curve:[0,1],duration:this.duration});var b=this;e.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){b._connects.push(d.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};h.extend(n,{_doAction:function(a,b){e.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,
b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;e.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},
destroy:function(){this.stop();e.forEach(this._connects,function(a){a.remove()})}});h.extend(n,l);g.combine=function(a){return new n(h.isArray(a)?a:Array.prototype.slice.call(a,0))};g.wipeIn=function(e){var f=e.node=b.byId(e.node),k=f.style,g;e=c.animateProperty(h.mixin({properties:{height:{start:function(){g=k.overflow;k.overflow="hidden";if("hidden"==k.visibility||"none"==k.display)return k.height="1px",k.display="",k.visibility="",1;var b=a.get(f,"height");return Math.max(b,1)},end:function(){return f.scrollHeight}}}},
e));var l=function(){k.height="auto";k.overflow=g};d.after(e,"onStop",l,!0);d.after(e,"onEnd",l,!0);return e};g.wipeOut=function(a){var e=(a.node=b.byId(a.node)).style,f;a=c.animateProperty(h.mixin({properties:{height:{end:1}}},a));d.after(a,"beforeBegin",function(){f=e.overflow;e.overflow="hidden";e.display=""},!0);var k=function(){e.overflow=f;e.height="auto";e.display="none"};d.after(a,"onStop",k,!0);d.after(a,"onEnd",k,!0);return a};g.slideTo=function(e){var f=null,g=null,l=function(b){return function(){var c=
a.getComputedStyle(b),d=c.position;f="absolute"==d?b.offsetTop:parseInt(c.top)||0;g="absolute"==d?b.offsetLeft:parseInt(c.left)||0;"absolute"!=d&&"relative"!=d&&(c=k.position(b,!0),f=c.y,g=c.x,b.style.position="absolute",b.style.top=f+"px",b.style.left=g+"px")}}(e.node=b.byId(e.node));l();e=c.animateProperty(h.mixin({properties:{top:e.top||0,left:e.left||0}},e));d.after(e,"beforeBegin",l,!0);return e};return g})},"dojox/layout/Dock":function(){define("dojo/_base/lang dojo/_base/window dojo/_base/declare dojo/_base/fx dojo/on dojo/_base/array dojo/_base/sniff dojo/window dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){f=g("dojox.layout.Dock",[p,n],{templateString:'\x3cdiv class\x3d"dojoxDock"\x3e\x3cul data-dojo-attach-point\x3d"containerNode" class\x3d"dojoxDockList"\x3e\x3c/ul\x3e\x3c/div\x3e',_docked:[],_inPositioning:!1,autoPosition:!1,addNode:function(a){var b=q.create("li",null,this.containerNode);a=new r({title:a.title,paneRef:a},b);a.startup();return a},startup:function(){if("dojoxGlobalFloatingDock"==this.id||this.isFixedDock)this.own(d(window,"resize",h.hitch(this,
"_positionDock")),d(window,"scroll",h.hitch(this,"_positionDock"))),b("ie")&&this.own(d(this.domNode,"resize",h.hitch(this,"_positionDock")));this._positionDock(null);this.inherited(arguments)},_positionDock:function(b){this._inPositioning||"south"==this.autoPosition&&this.defer(function(){this._inPositiononing=!0;var b=a.getBox(),c=this.domNode.style;c.left=b.l+"px";c.width=b.w-2+"px";c.top=b.h+b.t-this.domNode.offsetHeight+"px";this._inPositioning=!1},125)}});var r=g("dojox.layout._DockNode",[p,
n],{title:"",paneRef:null,templateString:'\x3cli data-dojo-attach-event\x3d"onclick: restore" class\x3d"dojoxDockNode"\x3e\x3cspan data-dojo-attach-point\x3d"restoreNode" class\x3d"dojoxDockRestoreButton" data-dojo-attach-event\x3d"onclick: restore"\x3e\x3c/span\x3e\x3cspan class\x3d"dojoxDockTitleNode" data-dojo-attach-point\x3d"titleNode"\x3e${title}\x3c/span\x3e\x3c/li\x3e',restore:function(){this.paneRef.show();this.paneRef.bringToTop();this.destroy()}});return f})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo":function(){define(["dojo/_base/declare",
"dojo/i18n!l10n/nls/breakpoints"],function(h,f){return h(null,{LINE_BREAKPOINT:0,constructor:function(f,e,d,c,b){this.zeroBasedLineNumber=f;this.fileName=e;this.isEnabled=d;this.expression=c||"";this.anonymousIndex=b||this.LINE_BREAKPOINT},equals:function(f){return this.zeroBasedLineNumber===f.zeroBasedLineNumber&&this.fileName===f.fileName&&this.isEnabled===f.isEnabled&&this.expression===f.expression},hasExpression:function(){return 0!==this.expression.length},isAnonymous:function(){return this.anonymousIndex!==
this.LINE_BREAKPOINT},toString:function(){return this._buildLineString()+" "+this._buildEnablementString()+" "+this._buildExpressionString()},_buildLineString:function(){return f.breakpointDescriptorTooltip.LINE+": "+(this.zeroBasedLineNumber+1)+"."},_buildEnablementString:function(){var g=f.breakpointDescriptorTooltip.STATUS+": ",g=this.isEnabled?g+f.breakpointDescriptorTooltip.ENABLED:g+f.breakpointDescriptorTooltip.DISABLED;return g+"."},_buildExpressionString:function(){var g="";this.hasExpression()&&
(g=f.breakpointDescriptorTooltip.CONDITION+": '"+this.expression+"'.");return g}})})},"MW/rtc/plugins/contextmenu/MarginContextMenuModel":function(){define(["dojo/_base/declare","MW/rtc/plugins/contextmenu/ContextMenuModel"],function(h,f){return h(f,{setMenuLine:function(f){throw Error("Unimplemented API: setMenuLine");}})})},"MW/rtc/plugins/contextmenu/ContextMenuModel":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{getGroups:function(){throw Error("Unimplemented API: getGroups");
},getActions:function(f){throw Error("Unimplemented API: getActions");}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModelProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModel"],function(h,f,g,e){return h(g,{requires:function(){return{createInstance:"rtc.internaldocument rtc.backingstore debug.breakpointfactory rtc.service.documentloaded debug.breakpoint.dataservice debug.breakpointdirtyservice".split(" ")}},
createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataModel":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/breakpoints mw-dialog-utils/DialogUtils mw-log/Log mw-peermodel/PeerModelManager MW/rtc/datamodel/FileBackingStoreUtilities MW/rtc/model/DocumentConstants MW/rtc/plugins/breakpoint/BreakpointDataModel".split(" "),function(h,f,g,e,d,c,b,a,k,l){return f(l,{CLASS_NOT_ON_PATH_STATUS:"CLASS_NOT_ON_PATH",
constructor:function(a,b,c,d,e,f){this._internalDocument=a;this._backingStore=b;this._breakpointFactory=c;this._documentLoadedService=d;this._matlabBreakpointDataService=e;this._matlabBreakpointDirtyService=f;this._breakpoints=[];this._breakpointsLive=!0;this._setupListeners();this._setNotLiveIfFileDoesNotHaveLocation()},_setNotLiveIfFileDoesNotHaveLocation:function(){this._backingStore.file&&!this._backingStore.file.fileInfo.location&&this.setLive(!1)},_setupListeners:function(){this.own(h.after(this._matlabBreakpointDataService,
"breakpointsAdded",g.hitch(this,"_addBreakpointOnServerResponse"),!0));this.own(h.after(this._matlabBreakpointDataService,"breakpointsRemoved",g.hitch(this,"_removeBreakpointOnServerResponse"),!0));this.own(h.after(this._matlabBreakpointDataService,"breakpointsCleared",g.hitch(this,"_clearBreakpointsServerResponse"),!0));this.own(h.after(this._matlabBreakpointDataService,"breakpointsRefreshedForFile",g.hitch(this,"_handleBreakpointsRefreshed"),!0));this.own(h.after(this._matlabBreakpointDataService,
"breakpointErrored",g.hitch(this,"_handleBreakpointErrored"),!0));this.own(h.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChange"),!0))},_handleDocumentChange:function(a){0<this._filterEvents(a).length&&this.setLive(!1)},_filterEvents:function(a){return a.filter(function(a){return a.type!==k.READONLY_STATE_CHANGE_EVENT})},_updateBreakpointStore:function(){this._matlabBreakpointDataService.synchronizePeerModel(this.getAllBreakpoints())},getBreakpoint:function(a){a=
this._indexOfBreakpoint(a);return 0<=a?this._breakpoints[a].getInfo():null},getAllBreakpoints:function(){return this._breakpoints.map(function(a){return a.getInfo()})},setLive:function(a){this._breakpointsLive!==a&&(this._breakpointsLive=a,this._updateBreakpointStore(),this.onLiveChanged(this._breakpointsLive))},onLiveChanged:function(a){},areBreakpointsLive:function(){return this._breakpointsLive},onDataModelChange:function(){this._updateBreakpointStore()},toggleBreakpoint:function(a){var b=this._createBreakpoint(a,
this._getFilePathFromBackingStore(),!0,"");this.hasBreakpointAtLine(a)?this._removeViewOrMatlabBreakpoint(b):this._setViewOrMatlabBreakpoint(b)},setBreakpoint:function(a){a=this._createMatlabBreakpointFromBreakpointInfo(a);this._setViewOrMatlabBreakpoint(a)},clearBreakpoint:function(a){(a=this._getMatlabBreakpoint(a))&&this._removeViewOrMatlabBreakpoint(a)},clearAllBreakpoints:function(){this._matlabBreakpointDataService.clearAllBreakpoints()},clearAllBreakpointsInFile:function(){this._breakpoints.forEach(this._removeViewOrMatlabBreakpoint,
this)},hasBreakpointsInFile:function(){return 0!==this._breakpoints.length},disableAllBreakpointsInFile:function(){this._breakpoints.forEach(function(a){a.isEnabled()&&this.toggleEnableState(a.getZeroBasedLineNumber())},this)},hasEnabledBreakpointsInFile:function(){return this._breakpoints.some(function(a){return a.isEnabled()},this)},enableAllBreakpointsInFile:function(){this._breakpoints.forEach(function(a){a.isEnabled()||this.toggleEnableState(a.getZeroBasedLineNumber())},this)},hasDisabledBreakpointsInFile:function(){return this._breakpoints.some(function(a){return!a.isEnabled()},
this)},toggleEnableState:function(a){var b=this._getMatlabBreakpoint(a);b?(a=this._createBreakpoint(a,this._getFilePathFromBackingStore(),!b.isEnabled(),b.getExpression()),this._setViewOrMatlabBreakpoint(a)):this.toggleBreakpoint(a);this.onDataModelChange()},hasBreakpointAtLine:function(a){return null!==this._getMatlabBreakpoint(a)},hasEnabledBreakpointAtLine:function(a){a=this._getMatlabBreakpoint(a);return null!==a&&a.isEnabled()},hasDisabledBreakpointAtLine:function(a){a=this._getMatlabBreakpoint(a);
return null!==a&&!a.isEnabled()},_getMatlabBreakpoint:function(a){a=this._indexOfBreakpoint(a);return 0<=a?this._breakpoints[a]:null},_createBreakpoint:function(a,b,c,d,e){a=this._breakpointFactory.create(a,b,c,d,e);this.own(a);this.own(h.after(a,"onLineChanged",g.hitch(this,"_handleBreakpointLineChanged",a)));return a},_handleBreakpointLineChanged:function(a){this._matlabBreakpointDirtyService.breakpointPositionUpdated();if(a.isValid())this.onDataModelChange();else this._doRemoveBreakpoint(a)},_removeViewOrMatlabBreakpoint:function(a){this.areBreakpointsLive()?
this._matlabBreakpointDataService.clearBreakpoint(a):this._doRemoveBreakpoint(a)},_setViewOrMatlabBreakpoint:function(a){this.areBreakpointsLive()?this._matlabBreakpointDataService.setBreakpoint(a):this._doAddOrUpdateBreakpoint(a)},_addBreakpointOnServerResponse:function(a){a.forEach(function(a){this._documentLoadedService.whenDocumentLoadedWithText(g.hitch(this,function(){var b=this._createMatlabBreakpointFromBreakpointInfo(a);this._doAddOrUpdateBreakpoint(b)}))},this)},_removeBreakpointOnServerResponse:function(a){this.areBreakpointsLive()&&
a.forEach(function(a){a=this._createMatlabBreakpointFromBreakpointInfo(a);this._doRemoveBreakpoint(a)},this)},_createMatlabBreakpointFromBreakpointInfo:function(a){return this._createBreakpoint(a.zeroBasedLineNumber,this._getFilePathFromBackingStore(),a.isEnabled,a.expression,a.anonymousIndex)},_clearBreakpointsServerResponse:function(){this._breakpoints.forEach(function(a){a.destroy()});this._breakpoints=[];this.onDataModelChange()},_handleBreakpointsRefreshed:function(){this._errorSyncingBreakpoints=
!1;this.setLive(!0);this._clearBreakpointsServerResponse();this._matlabBreakpointDataService.triggerBreakpointsRefresh()},wasThereAnErrorSyncingBreakpoints:function(){return this._errorSyncingBreakpoints},_handleBreakpointErrored:function(a){this._errorSyncingBreakpoints=!0;this.setLive(!1);this.showErrorDialog(a.fStatus,a.fErrorMessage)},showErrorDialog:function(a,b){var c=this._buildErrorDialogText(a,b);d.displayModalDialog(c,e.breakpointErrorDialogTitle,[{name:e.breakpointErrorDialogButtonText,
buttonHandler:{handler:"dismiss"},"data-testid":"breakpointErrorDialog_ok_button"}],{"data-testid":"breakpointErrorDialog"})},_buildErrorDialogText:function(a,b){var c;c=a===this.CLASS_NOT_ON_PATH_STATUS?e.breakpointErrorDialogClassPathText:e.breakpointErrorDialogSyntaxText;return c+("\n\n"+b)},_doAddOrUpdateBreakpoint:function(a){this._getMatlabBreakpoint(a.getZeroBasedLineNumber())?this._replaceBreakpoint(a):this._breakpoints.push(a);this.onDataModelChange()},_doRemoveBreakpoint:function(a){a=this._indexOfBreakpoint(a.getZeroBasedLineNumber());
-1<a&&(this._breakpoints[a].destroy(),this._breakpoints.splice(a,1),this.onDataModelChange())},_replaceBreakpoint:function(a){var b=this._indexOfBreakpoint(a.getZeroBasedLineNumber());c.assert(-1!==b,"MatlabBreakpointDataModel._replaceBreakpoint is expected to be called only when a breakpoint exists in the model.");this._breakpoints[b]=a},_indexOfBreakpoint:function(a){return this._breakpoints.map(function(a){return a.getZeroBasedLineNumber()}).indexOf(a)},_getFilePathFromBackingStore:function(){return a.getAbsoluteFilePathFromBackingStore(this._backingStore)},
destroy:function(){this.inherited(arguments);this._breakpoints.forEach(function(a){a.destroy()});this._breakpoints=[]}})})},"mw-peermodel/PeerModelManager":function(){define(["dojo/_base/declare","./PropSetPeerSynchronizer","./PeerNode","./PeerSynchronizer","./Observable"],function(h,f,g,e,d){var c=h([d],{getNamespace:function(){},move:function(a,b,c,d){},setRoot:function(a,b,c){},getRoot:function(){},hasRoot:function(){},hasById:function(a){},getById:function(a){},setSyncEnabled:function(a,b){},
isSyncEnabled:function(){},getByType:function(a,b){},getByProperty:function(a,b,c){}}),b=h([c,d.Syncable],{setRootWithId:function(a,b,c,d){}}),a=h([b,d.Impl],{constructor:function(){this._root=null;this._sync=!1;this._idCache={}},setRootWithId:function(a,b,c,d){if(this.hasRoot())throw Error("Root node already exists.");a=new g.Impl(a,b,c,this._idCache);this._setRoot(a,d);return a},setRoot:function(a,b,c){if(this.hasRoot())throw Error("Root node already exists.");a=g.Impl.createNode(a,b,this._idCache);
this._setRoot(a,c);return a},_setRoot:function(a,b){this._root=a;var c=this;this._root.destroy=function(a){c.dispatchEvent("rootDestroyed",this,void 0,a);g.Impl.prototype.destroy.call(this,a);c._root=null;c.dispatchEvent("rootUnset",this,void 0,a)};this.dispatchEvent("rootSet",this._root,void 0,b);return this._root},getRoot:function(){return this._root},hasRoot:function(){return!!this._root},hasById:function(a){return this._idCache.hasOwnProperty(a)},getById:function(a){if(this._idCache.hasOwnProperty(a))return this._idCache[a];
throw Error("No root node exists");},move:function(a,b,c,d){if(a.getRoot()!==b.getRoot())throw Error("Can not move a node to a different peer model");if(a===b||a.hasDescendant(a.getId()))throw Error("Can not move a node to be a child or descendant of itself");var e,f;if(a.hasParent())e=a.getParent(),f=e.getChildIndex(a);else throw Error("Only un-orphaned nodes can be moved.");if(f!==c||e!==b)e._removeChild(a),c=b._addChild(a,c),this.dispatchEvent("childMoved",a,{oldParent:e,oldIndex:f,newParent:b,
newIndex:c},d)},setSyncEnabled:function(a,b){this._sync!==a&&(this._sync=a,this.dispatchEvent("syncChanged",this,{syncEnabled:this._sync},b))},isSyncEnabled:function(){return this._sync},getByType:function(a,b){var c=[];b||(b=this.getRoot());b&&b.accept(function(b){b.getType()===a&&c.push(b)});return c},getByProperty:function(a,b,c){var d=[];c||(c=this.getRoot());c&&c.accept(function(c){c.hasProperty(a)&&c.getProperty(a)===b&&d.push(c)});return d}});c._clientPropSet=!0;c.setClientPropSetEnabled=function(a){c._clientPropSet=
a};c.clearInstances=function(){c._instances={};c._serverInstances={}};c.clearInstances();c.getInstance=c.getClientInstance=function(b,d){if(!this._instances[b]){var g=new a,h;h=c._clientPropSet?new f(b,g,d):new e(b,g,d);this._instances[b]={manager:g,synchronizer:h}}return this._instances[b].manager};c.getServerInstance=function(b,d){if(!this._serverInstances[b]){var g=new a,h;h=c._clientPropSet?new f(b,g,d,!1):new e(b,g,d,!1);this._serverInstances[b]={manager:g,synchronizer:h}}return this._serverInstances[b].manager};
c.cleanup=function(a){c._instances[a]&&(c._instances[a].manager.setSyncEnabled(!1),c._instances[a].manager.hasRoot()&&c._instances[a].manager.getRoot().destroy(),delete c._instances[a])};c.Impl=a;return c})},"mw-peermodel/PropSetPeerSynchronizer":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log mw-utils/Utils mw-messageservice/MessageService ./PeerSynchronizer".split(" "),function(h,f,g,e,d,c){return h([c],{propertiesSetObserver:function(b){if(b.originator!==this._originator&&(Object.keys(b.data.newValues).forEach(function(a){this.updateVersionVector(a,
b.target)},this),this.shouldSync()&&this.isReady())){var a=this.createNewMessage();a.targetId=b.target.getId();var c=b.data.newValues,d=b.data.oldValues;Object.keys(c).forEach(function(f){if(e.isImageData(c[f])){var g=d[f];delete b.data.newValues[f];if(!this.isClient&&e.isImageData(g)){var h=this.createNewMessage();h.targetId=b.target.getId();h.key=f;h.newValue=this.imageDifferencer.computeImageDataDifferences(g,c[f]);this.publish(this.getChannel("imageUpdate"),a)}}else(null===c[f]||void 0===c[f])&&
delete b.data.newValues[f]},this);0<Object.keys(c).length&&(a.properties=b.data.newValues,a.versionVector=f.clone(b.target._versionVector),this.publish(this.getChannel(b.type),a))}},propertiesSetSubscriber:function(b){this.log("propertiesSetSubscriber",b);var a=b.data,c=a.targetId;if(this.manager.hasById(c))try{var d=this.manager.getById(c),e;for(e in a.properties)a.properties.hasOwnProperty(e)&&(a.properties[e]instanceof Image?(this.imageDifferencer.updatePropertyWithImage(d,e,a.properties[e]),delete a.properties[e]):
this.shouldUpdateProperties(e,d,b.data.versionVector)||delete a.properties[e],b.data.versionVector&&this.mergeVersionVectors(e,d,b.data.versionVector));d.setProperties(a.properties,this._originator);this._updateNodePagedData(d)}catch(f){this._error("Error while trying set properties.",b,f)}},shouldUpdateProperties:function(b,a,c){return this.isClient?!(a._versionVector&&a._versionVector[b]&&(!c||!c[b])):!c||!c[b]||!a._versionVector||!a._versionVector[b]||a._versionVector[b][this.clientId]<=c[b][this.clientId]},
updateVersionVector:function(b,a){this.isClient&&(!a._versionVector||!a._versionVector[b])?(a._versionVector=a._versionVector||{},a._versionVector[b]={},Object.keys(this.syncEnabled).forEach(function(c){a._versionVector[b][c]=1})):a._versionVector&&a._versionVector[b]&&(a._versionVector[b][this.clientId]+=1)},mergeVersionVectors:function(b,a,c){if(c&&c[b]){if(!a._versionVector||!a._versionVector[b])a._versionVector=a._versionVector||{},a._versionVector[b]={};Object.keys(c[b]).forEach(function(d){a._versionVector[b][d]=
Math.max(c[b][d],a._versionVector[b][d]||1)})}},convertNode:function(b){var a=this.inherited(arguments);a.versionVectors=b._versionVector;return a},updateNodeRecursive:function(b,a){a.versionVectors&&Object.keys(a.versionVectors).forEach(function(c){this.mergeVersionVectors(c,b,a.versionVectors)},this);this.inherited(arguments)}})})},"mw-peermodel/PeerSynchronizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log mw-utils/Utils mw-messageservice/MessageService ./ImageDifferencer ./PagedData ./Serializers".split(" "),
function(h,f,g,e,d,c,b,a,k){var l;l=h(null,{_MAX_RETRIES:3,constructor:function(a,l,h,p,r){this.namespace=a;this.manager=l;this.messageService=h||c.messageService;k.setupSerializers(this.messageService);this._originator={};this.messageCount=0;this.syncEnabled={};this.isClient=void 0===p?!0:!!p;this.clientId="string"===typeof r?r:d.generateUuid();this.imageDifferencer=new b(this._originator);this._queue=[];g.after(this.messageService,"onConnected",f.hitch(this,this._handleConnected));g.after(this.messageService,
"onNotConnected",f.hitch(this,this._handleNotConnected));this.messageService.isConnected()?this._handleConnected():this._handleNotConnected();try{this.addManagerListeners(),this.addMessageSubscriptions()}catch(s){e.error("Not able to create peer synchronizer: "+s)}},remove:function(){this._handleNotConnected();this.removeMessageSubscriptions();this.removeManagerListeners()},_handleNotConnected:function(){this.log("Not connected");this._handshook=this._connected=!1},_handleConnected:function(){this.log("Connected");
this._connected=!0;this._startHandshake()},_startHandshake:function(){this.log("Starting handshake");var a=this.createNewMessage();a.clientId=this.clientId;a.syncEnabled=this.manager.isSyncEnabled();this.publish(this.getChannel("getStatus"),a)},_handshakeComplete:function(){this.log("Handshake complete");this._handshook=!0;this._processQueue()},_processQueue:function(){var a=this._queue;this._queue=[];this.log("Processing queue",a);a.forEach(function(a){this.publish(a.channel,a.message)},this)},shouldSync:function(a){return this.manager.isSyncEnabled()&&
(!a||a.originator!==this._originator)},isReady:function(){return this._connected&&this._handshook},syncChangedObserver:function(){this.syncEnabled[this.clientId]=this.manager.isSyncEnabled();this.manager.isSyncEnabled()?(this.addSyncMessageSubscriptions(),this.addSyncManagerListeners(),this._connected&&this._startHandshake()):(this.removeSyncMessageSubscriptions(),this.removeSyncManagerListeners(),this._handshook=!1)},getStatusSubscriber:function(a){this.log("getStatusSubscriber",a);var b=this.createNewMessage();
b.syncEnabled=this.manager.isSyncEnabled();b.clientId=this.clientId;this.publish(this.getChannel("status"),b);this.statusSubscriber(a)},statusSubscriber:function(a){this.log("Status received",a);this.syncEnabled[a.data.clientId]=a.data.syncEnabled;this.isClient&&this.manager.isSyncEnabled()&&this.publish(this.getChannel("getFullUpdate"),this.createNewMessage())},getFullUpdateSubscriber:function(){this.log("getFullUpdate requested");if(this.manager.isSyncEnabled()){var a=this.createNewMessage();this.manager.hasRoot()&&
(a.root=this.convertNodesRecursive(this.manager.getRoot(),0));this.publish(this.getChannel("fullUpdate"),a);this._handshakeComplete()}},fullUpdateSubscriber:function(a){this.log("fullUpdate received",a);if(this.shouldSync())try{var b=a.data.root;b?(this.manager.hasRoot()&&(b.id!==this.manager.getRoot().getId()||b.type!==this.manager.getRoot().getType())&&this.manager.getRoot().destroy(this._originator),this._handshakeComplete(),this.manager.hasRoot()||this.manager.setRootWithId(b.id,b.type,b.properties,
this._originator),this.updateNodeRecursive(this.manager.getRoot(),b)):(this.manager.hasRoot()&&this.manager.getRoot().destroy(this._originator),this._handshakeComplete())}catch(c){this._error("Error while trying to do a full update.",a,c)}},rootSetObserver:function(a){this.addNodeListeners(a.target);if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.target=this.convertNode(a.target);this.publish(this.getChannel(a.type),b)}},rootSetSubscriber:function(a){this.log("rootSetSubscriber",
a);if(this.shouldSync())try{var b=a.data.target;this.manager.hasRoot()&&this.manager.getRoot().destroy(this._originator);var c=this.manager.setRootWithId(b.id,b.type,b.properties,this._originator);this.updateNodeRecursive(c,b)}catch(d){this._error("Error setting new root.",a,d)}},rootDestroyedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.targetId=a.target.getId();this.publish(this.getChannel(a.type),b)}},rootDestroyedSubscriber:function(a){this.log("rootDestroyedSubscriber",
a);if(this.shouldSync())try{this.manager.hasRoot()&&this.manager.getRoot().getId()===a.data.targetId?this.manager.getRoot().destroy(this._originator):this._error("Tried to unset the wrong root.",a)}catch(b){this._error("Error destroying root.",a,b)}},childMovedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.targetId=a.target.getId();b.oldParentId=a.data.oldParent.getId();b.oldIndex=a.data.oldIndex;b.newParentId=a.data.newParent.getId();b.newIndex=a.data.newIndex;
this.publish(this.getChannel(a.type),b)}},childMovedSubscriber:function(a){this.log("childMovedSubscriber",a);if(this.shouldSync())try{var b=a.data,c=this.manager.getById(b.targetId),d=this.manager.getById(b.newParentId);this.manager.move(c,d,b.newIndex,this._originator)}catch(e){this._error("Error while trying to move.",a,e)}},childAddedObserver:function(a){var b=a.data.child;this.addNodeListeners(b);if(this.shouldSync(a)&&this.isReady()){var c=this.createNewMessage();c.parentId=a.target.getId();
c.child=this.convertNode(b);c.index=a.data.index;this.publish(this.getChannel("subTreeAdded"),c)}},subTreeAddedSubscriber:function(a){this.log("subTreeAddedSubscriber",a);if(this.shouldSync())try{var b=a.data.child,c=this.manager.getById(a.data.parentId).addChildWithId(b.id,b.type,b.properties,a.data.index,this._originator);this.updateNodeRecursive(c,b)}catch(d){this._error("Error while trying to add a subtree of nodes.",a,d)}},childDetachedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=
this.createNewMessage();b.childId=a.data.child.getId();this.publish(this.getChannel(a.type),b)}},childDetachedSubscriber:function(a){this.log("childDetachedSubscriber",a);if(this.shouldSync())try{this.manager.getById(a.data.childId).detach(this._originator)}catch(b){this._error("Error while trying to detach.",a,b)}},childReattachedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.childId=a.data.child.getId();b.index=a.data.index;this.publish(this.getChannel(a.type),
b)}},childReattachedSubscriber:function(a){this.log("childReattachedSubscriber",a);if(this.shouldSync())try{var b=a.data;this.manager.getById(b.childId).reattach(b.index,this._originator)}catch(c){this._error("Error while trying to reattach.",a,c)}},subTreeDestroyedObserver:function(a){var b=a.data.child;this.removeNodeListenersRecursive(b);if(this.shouldSync(a)&&this.isReady()){var c=this.createNewMessage();c.childId=b.getId();this.publish(this.getChannel(a.type),c)}},subTreeDestroyedSubscriber:function(a){this.log("subTreeDestroyedSubscriber",
a);if(this.shouldSync())try{this.manager.getById(a.data.childId).destroy(this._originator)}catch(b){this._error("Error while trying to destroy subtree.",a,b)}},propertiesSetObserver:function(a){if(this.shouldSync(a)&&this.isReady()&&!this.isClient){var b=[],c=this.createNewMessage(),e;c.targetId=a.target.getId();var f=a.data.newValues,k=a.data.oldValues;for(e in f)if(f.hasOwnProperty(e)&&d.isImageData(f[e])){var g=k[e];if(g&&d.isImageData(g)){b.push(e);var l=this.createNewMessage();l.targetId=a.target.getId();
l.key=e;l.newValue=this.imageDifferencer.computeImageDataDifferences(g,f[e]);this.publish(this.getChannel("imageUpdate"),c)}}b.forEach(function(b){delete a.data.newValues[b]});c.properties=a.data.newValues;this.publish(this.getChannel(a.type),c)}},propertiesSetSubscriber:function(a){this.log("propertiesSetSubscriber",a);if(this.shouldSync()||this.isClient)try{var b=a.data,c=this.manager.getById(b.targetId),d;for(d in b.properties)b.properties.hasOwnProperty(d)&&(b.properties[d]instanceof Image?this.imageDifferencer.updatePropertyWithImage(c,
d,b.properties[d]):(c.setProperty(d,b.properties[d],this._originator),this._updateNodePagedData(c)))}catch(e){this._error("Error while trying to update properties.",a,e)}},imageUpdateSubscriber:function(a){this.log("imageUpdateSubscriber",a);if(this.shouldSync())try{var b=a.data,c=this.manager.getById(b.targetId);this.imageDifferencer.applyImageDifferences(c,b.key,b.newValue)}catch(d){this._error("Error while trying to update images.",a,d)}},propertiesUnsetObserver:function(a){if(this.shouldSync(a)&&
this.isReady()){var b,c=this.createNewMessage();c.targetId=a.target.getId();c.keys=[];for(b in a.data.oldValues)a.data.oldValues.hasOwnProperty(b)&&c.keys.push(b);this.publish(this.getChannel(a.type),c)}},propertiesUnsetSubscriber:function(a){this.log("propertiesUnsetSubscriber",a);if(this.shouldSync())try{var b=a.data;this.manager.getById(b.targetId).unsetProperties(b.keys,this._originator)}catch(c){this._error("Error while trying to unset properties.",a,c)}},peerEventObserver:function(a){var b=
this.createNewMessage();b.targetId=a.target.getId();b.data=a.data;var c=this.getChannel(a.type);this.shouldSync(a)&&(this.isReady()?this.publish(c,b):this._queue.push({channel:c,message:b}))},peerEventSubscriber:function(a){this.log("peerEventSubscriber",a);if(this.shouldSync())try{var b=a.data,c=this.manager.getById(b.targetId);c.dispatchEvent("peerEvent",c,b.data,this._originator)}catch(d){this._error("Error while trying dispatch a peer event.",a,d)}},publish:function(a,b,c){this.log("Publishing message",
a,b);var d=this.messageService.publish(a,b),f=this;c=void 0===c?this._MAX_RETRIES:c;d.then(void 0,function(){0<c?(e.warn("Error sending message (will retry "+c+"): ",a,b),f.publish(a,b,c-1)):f._error("Error sending message, retry didn't work.",a,b)})},getChannel:function(a){return"/peermodel"+this.namespace+"/"+a},createNewMessage:function(){this.messageCount+=1;return{message:this.messageCount}},log:function(){if(this.namespace===l.debugNamespace){var a=Array.prototype.slice.call(arguments),a=["PeerSynchronizer ("+
this.namespace+")"].concat(a);e.info.apply(e,a)}},convertNodesRecursive:function(a,b){var c=this.convertNode(a,b),d=[],e=a.getChildren(),f;for(f=0;f<e.length;f+=1)d.push(this.convertNodesRecursive(e[f],f));c.children=d;return c},convertNode:function(a,b){b=b||0;return{id:a.getId(),type:a.getType(),index:b,properties:a.getProperties()}},updateNodeRecursive:function(a,b){for(var c,d,e,f,k,g=a?[a]:[],l=b?[b]:[];0<l.length;){a=g.pop();b=l.pop();c=this._getFilteredPropertyKeys(b.properties);if(!a._handled){a._handled=
!0;d=a.getProperties();e=Object.keys(d);k=e.length;for(f=0;f<k;f+=1)c.filtered[e[f]]=d[e[f]]}a.replaceProperties(c.filtered,this._originator);this._updateNodePagedData(a,d);this._updateNodeImageProperties(a,b.properties,c.images);this._destroyOldChildren(a,b);this._addNewChildren(a,b);this._updateChildIndices(a,b);g=g.concat(a.getChildren());b.children&&(l=l.concat(b.children))}},_destroyOldChildren:function(a,b){var c,d=a.getChildren();for(c=0;c<d.length;c+=1)this._dataHasChild(b,d[c])||d[c].destroy(this._originator)},
_addNewChildren:function(a,b){var c,d,e;if(b.children)for(c=0;c<b.children.length;c+=1)d=b.children[c],a.hasChild(d.id)||(e=this._getFilteredPropertyKeys(d.properties),a.addChildWithId(d.id,d.type,e.filtered,c,this._originator))},_updateChildIndices:function(a,b){var c,d;if(b.children)for(c=0;c<b.children.length;c+=1)d=b.children[c],d=a.getChild(d.id),a.getChildIndex(d)!==c&&this.manager.move(d,a,c,this._originator)},_dataHasChild:function(a,b){var c;if(a.children)for(c=0;c<a.children.length;c+=1)if(a.children[c].id===
b.getId()&&a.children[c].type===b.getType())return!0;return!1},_error:function(a,b,c){e.error(a,b,c);this.manager.isSyncEnabled()&&this.isClient&&this.publish(this.getChannel("getFullUpdate"),this.createNewMessage())},_getFilteredPropertyKeys:function(a){var b={},c=[],d;for(d in a)a.hasOwnProperty(d)&&(null!==a[d]&&void 0!==a[d])&&(a[d]instanceof Image?c.push(d):b[d]=a[d]);return{filtered:b,images:c}},_updateNodePagedData:function(b,c){var d;c||(c=b.getProperties());for(d in c)c.hasOwnProperty(d)&&
c[d]instanceof a&&c[d].setPeerNode(b,d)},_updateNodeImageProperties:function(a,b,c){var d;for(d=0;d<c.length;d+=1)this.imageDifferencer.updatePropertyWithImage(a,c[d],b[c[d]])},addMessageSubscriptions:function(){this._messageSubscribed||(this._onConnectedSub=g.after(this.messageService,"onReconnected",f.hitch(this,"syncChangedObserver")),this.messageService.subscribe(this.getChannel("getStatus"),"getStatusSubscriber",this),this._messageSubscribed=!0);this.manager.isSyncEnabled()&&this.addSyncMessageSubscriptions()},
removeMessageSubscriptions:function(){this._messageSubscribed&&(this._onConnectedSub.remove(),this.messageService.unsubscribe(this.getChannel("getStatus"),"getStatusSubscriber",this),this._messageSubscribed=!1);this.removeSyncMessageSubscriptions()},syncMessageChannels:"status getFullUpdate fullUpdate rootSet rootDestroyed childMoved childDetached childReattached subTreeAdded subTreeDestroyed propertiesSet propertiesUnset imageUpdate peerEvent".split(" "),addSyncMessageSubscriptions:function(){this._syncMessageSubscribed||
(this.log("addSyncMessageSubscriptions"),this.syncMessageChannels.forEach(function(a){this.messageService.subscribe(this.getChannel(a),a+"Subscriber",this)},this),this._syncMessageSubscribed=!0)},removeSyncMessageSubscriptions:function(){this._syncMessageSubscribed&&(this.log("removeSyncMessageSubscriptions"),this.syncMessageChannels.forEach(function(a){this.messageService.unsubscribe(this.getChannel(a),a+"Subscriber",this)},this),this._syncMessageSubscribed=!1)},addManagerListeners:function(){this._managerListeners||
(this.manager.addSyncEventListener("syncChanged","syncChangedObserver",this),this._managerListeners=!0);this.manager.isSyncEnabled()&&this.addSyncManagerListeners()},removeManagerListeners:function(){this._managerListeners&&(this.manager.removeSyncEventListener("syncChanged","syncChangedObserver",this),this._managerListeners=!1);this.removeSyncManagerListeners()},addSyncManagerListeners:function(){this._syncManagerListeners||(this.manager.addSyncEventListener("rootSet","rootSetObserver",this),this.manager.addSyncEventListener("rootDestroyed",
"rootDestroyedObserver",this),this.manager.addSyncEventListener("childMoved","childMovedObserver",this),this.manager.hasRoot()&&this.addNodeListenersRecursive(this.manager.getRoot()),this._syncManagerListeners=!0)},removeSyncManagerListeners:function(){this._syncManagerListeners&&(this.manager.removeSyncEventListener("rootSet","rootSetObserver",this),this.manager.removeSyncEventListener("rootDestroyed","rootDestroyedObserver",this),this.manager.removeSyncEventListener("childMoved","childMovedObserver",
this),this.manager.hasRoot()&&this.removeNodeListenersRecursive(this.manager.getRoot()),this._syncManagerListeners=!1)},nodeEvents:"childAdded subTreeDestroyed childDetached childReattached propertiesSet propertiesUnset peerEvent partialUpdate".split(" "),addNodeListeners:function(a){this.nodeEvents.forEach(function(b){a.addSyncEventListener(b,b+"Observer",this)},this)},removeNodeListeners:function(a){this.nodeEvents.forEach(function(b){a.removeSyncEventListener(b,b+"Observer",this)},this)},addNodeListenersRecursive:function(a){this.addNodeListeners(a);
var b=a.getChildren();for(a=0;a<b.length;a+=1)this.addNodeListenersRecursive(b[a])},removeNodeListenersRecursive:function(a){this.removeNodeListeners(a);var b=a.getChildren();for(a=0;a<b.length;a+=1)this.removeNodeListenersRecursive(b[a])}});l.debugNamespace="/change this to debug something";return l})},"mw-peermodel/ImageDifferencer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct mw-utils/Deferred mw-utils/DeferredList mw-log/Log".split(" "),function(h,f,g,e,d,c){return h([],
{_updateQueue:{},constructor:function(b){this._canvas=g.create("canvas");this._context=this._canvas.getContext("2d");this._originator=b},computeImageDataDifferences:function(b,a){return[{x:0,y:0,image:a}]},applyImageDifferences:function(b,a,e){var f,g=e.length,h=this;if(0!==g){var n=this._createQueuedDeferred(b,a);n.name="applyImageDifferences deferred";var p=[];for(f=0;f<g;f+=1)p.push(this._wrapImageInDeferred(e[f].image));f=new d(p,!1,!0,!1);var r=h._updateQueue[b.getId()+a][h._updateQueue[b.getId()+
a].length-2];f.then(function(){r?r.then(function(){h._applyLoadedImageDifferences(b,a,e,n)}):h._applyLoadedImageDifferences(b,a,e,n)},function(){c.log("rejecting deferred applyImageDifferences");n.reject();h._cancelQueuedDeferreds(b,a)});return n}},updatePropertyWithImage:function(b,a,c){var d=this._wrapImageInDeferred(c),e=this._createQueuedDeferred(b,a);e.name="updateImage deferred";var f=this;d.then(function(){f._canvas.width=c.width;f._canvas.height=c.height;f._context.drawImage(c,0,0,c.width,
c.height);var d=f._context.getImageData(0,0,f._canvas.width,f._canvas.height);b.setProperty(a,d,f._originator);f._cancelQueuedDeferreds(b,a,e);e.isCanceled()||e.resolve()},function(){e.isCanceled()||e.reject()});return e},_applyLoadedImageDifferences:function(b,a,c,d){var e=b.getProperty(a);this._canvas.width=e.width;this._canvas.height=e.height;this._context.putImageData(e,0,0);for(e=0;e<c.length;e+=1)this._context.beginPath(),this._context.clearRect(c[e].x,c[e].y,c[e].image.width,c[e].image.height),
this._context.closePath(),this._context.drawImage(c[e].image,c[e].x,c[e].y);c=this._context.getImageData(0,0,this._canvas.width,this._canvas.height);b.setProperty(a,c,this._originator);d.resolve()},_wrapImageInDeferred:function(b){var a=new e;a.name="wrapImage deferred";var d=function(){setTimeout(function(){b.onload&&(a.resolve(),b.onload=null,b.onerror=null)},0)};b.onload=d;b.onerror=function(){c.log("Error loading image");a.reject();b.onload=null;b.onerror=null};b.complete&&0<b.src.length&&d();
return a},_createQueuedDeferred:function(b,a){var c;c=new e;var d=f.hitch(this,this._removeDeferredFromQueue,b,a,c);c.then(d,d);this._updateQueue[b.getId()+a]=this._updateQueue[b.getId()+a]||[];this._updateQueue[b.getId()+a].push(c);return c},_removeDeferredFromQueue:function(b,a,c){void 0===this._updateQueue[b.getId()+a]?delete this._updateQueue[b.getId()+a]:(c=this._updateQueue[b.getId()+a].indexOf(c),0<=c&&this._updateQueue[b.getId()+a].splice(c,1),0===this._updateQueue[b.getId()+a].length&&(this._updateQueue[b.getId()+
a]=void 0,delete this._updateQueue[b.getId()+a]))},_cancelQueuedDeferreds:function(b,a,c){for(var d=this._updateQueue[b.getId()+a];d&&0<d.length;){var e=d.shift();if(c&&e===c)return;e.cancel("Queued deferreds cancelled")}this._updateQueue[b.getId()+a]=void 0;delete this._updateQueue[b.getId()+a]}})})},"mw-utils/Deferred":function(){define([],function(){var h=function(){this._state=0;this._callbacks=[];this._errbacks=[]};h.prototype.then=function(f,g){1===this._state&&f?f():2===this._state&&g?g():
(f&&this._callbacks.push(f),g&&this._errbacks.push(g));return this};h.prototype.resolve=function(){if(0===this._state){for(this._state=1;this._callbacks.length;)this._callbacks.pop()();this._callbacks=[];this._errbacks=[]}};h.prototype.reject=function(){if(0===this._state){for(this._state=2;this._errbacks.length;)this._errbacks.pop()();this._callbacks=[];this._errbacks=[]}};h.prototype.cancel=function(){0===this._state&&(this._state=3,this._callbacks=[],this._errbacks=[])};h.prototype.isCanceled=
function(){return 3===this._state};return h})},"mw-utils/DeferredList":function(){define(["./Deferred"],function(h){var f=function(f){h.apply(this);this._successes=0;this._total=f.length;var e;for(e=0;e<this._total;e+=1)f[e].then(this._callback.bind(this),this.reject.bind(this))};f.prototype=new h;f.prototype.constructor=f;f.prototype._callback=function(){this._successes+=1;this._successes===this._total&&this.resolve()};return f})},"mw-peermodel/PagedData":function(){define(["dojo/_base/declare"],
function(h){return h([],{constructor:function(f){f=f||{};this._peerNode=f.peerNode;this._propertyKey=f.propertyKey;this._partialData=f.partialData||[];this._rowCount=f.rowCount||0;this._columnCount=f.columnCount||0;this._currentStartRow=f.currentStartRow||0;this._currentEndRow=f.currentEndRow||0;this._currentStartCol=f.currentStartCol||0;this._currentEndCol=f.currentEndCol||0;this._queuedOperations=[]},setPeerNode:function(f,g){this._peerNode=f;this._propertyKey=g;var e;for(e=0;e<this._queuedOperations.length;e+=
1)this._queuedOperations[e].apply(this);this._queuedOperations=[]},getPartialData:function(){return this._partialData},getRowCount:function(){return this._rowCount},getColumnCount:function(){return this._columnCount},getCurrentStartRow:function(){return 0<=this._currentStartRow?this._currentStartRow:0},getCurrentEndRow:function(){return this.getCurrentStartRow()+this._partialData.length},getCurrentStartCol:function(){return 0<=this._currentStartCol?this._currentStartCol:0},getCurrentEndCol:function(){return 0<
this._partialData.length?Array.isArray(this._partialData[0])?this.getCurrentStartCol()+this._partialData[0].length:1:0<=this._currentEndCol?this._currentEndCol:0},changeData:function(f,g,e){if(this._peerNode){var d,c;for(d=0;d<e.length;d+=1){var b=this._partialData[f-this._currentStartRow+d],a=e[d];for(c=0;c<a.length;c+=1)b[g-this._currentStartCol+c]=a[c]}var k=this;setTimeout(function(){k._peerNode.dispatchEvent("peerEvent",k._peerNode,{type:"changeData",key:k._propertyKey,startRow:f,startCol:g,
newData:e})},0)}else this._queuedOperations.push(function(){this.changeData(f,g,e)})},updatePartialData:function(f,g,e,d){if(!(f===this._currentStartRow&&e===this._currentStartCol&&g===this._currentEndRow&&d===this._currentEndCol))if(this._peerNode){if("undefined"===typeof e||"undefined"===typeof d)d=e=-1;this._peerNode.dispatchEvent("peerEvent",this._peerNode,{type:"partialUpdate",key:this._propertyKey,startRow:f,startCol:e,endRow:g,endCol:d})}else this._queuedOperations.push(function(){this.updatePartialData(f,
g,e,d)})}})})},"mw-peermodel/Serializers":function(){define(["mw-utils/Utils","./PagedData"],function(h,f){var g={imageSerializer:function(e){this._serializerCanvas||(this._serializerCanvas=document.createElement("canvas"),this._serializerContext=this._serializerCanvas.getContext("2d"));if(this._serializerCanvas.width!==e.width||this._serializerCanvas.height!==e.height)this._serializerCanvas.width=e.width,this._serializerCanvas.height=e.height;this._serializerContext.putImageData(e,0,0);return this._serializerCanvas.toDataURL()},
imageDeserializer:function(e){var d=new Image;d.src=e;return d},pagedDataSerializer:function(e){return{rowCount:e.getRowCount(),columnCount:e.getColumnCount(),currentStartRow:e.getCurrentStartRow(),currentEndRow:e.getCurrentEndRow(),currentStartCol:e.getCurrentStartCol(),currentEndCol:e.getCurrentEndCol(),partialData:e.getPartialData()}},pagedDataDeserializer:function(e){e=g.messageService.deserialize(e);return new f(e)},setupSerializers:function(e){g.messageService=e;e._peerModelSerializersSetup||
(e.registerTypeSerializer(h.isImageData,"image",g.imageSerializer),e.registerTypeDeserializer("image",g.imageDeserializer),e.registerTypeSerializer(function(d){return d instanceof f},"pagedData",g.pagedDataSerializer),e.registerTypeDeserializer("pagedData",g.pagedDataDeserializer));e._peerModelSerializersSetup=!0}};return g})},"mw-peermodel/PeerNode":function(){define("dojo/_base/declare dojo/_base/lang ./Observable ./PeerEventObservable mw-utils/Utils mw-log/Log".split(" "),function(h,f,g,e,d,c){var b=
h([e],{getId:function(){},getType:function(){},setProperty:function(a,b,c){},getProperty:function(a){},hasProperty:function(a){},unsetProperty:function(a,b){},setProperties:function(a,b){},unsetProperties:function(a,b){},replaceProperties:function(a,b){},getProperties:function(){},addChild:function(a,b,c,d){},hasChild:function(a){},getChild:function(a){},getChildIndex:function(a){},getChildren:function(){},hasDescendant:function(a){},getDescendant:function(a){},getNumberOfChildren:function(){},hasDetachedChildren:function(){},
getDetachedChildren:function(){},detach:function(a){},reattach:function(a,b){},isDetached:function(){},isAncestorDetached:function(){},destroy:function(a){},remove:function(){},hasParent:function(){},getParent:function(){},getRoot:function(){},accept:function(a){}}),a;a=h([b,e.Impl,g.Syncable],{constructor:function(a,b,c,d){if(!f.isString(a)||!f.isString(b))throw Error("Node type and ID must be strings");this._type=b;this._id=a;this._idCache=d||{};this._idCache[a]=this;this._properties={};c&&this._setProperties(c,
void 0,!0);this._children=[];this._detached=[]},getId:function(){return this._id},getType:function(){return this._type},setProperty:function(a,b,c){if(null===b||void 0===b)throw Error("Illegal argument. Value must not be null or undefined.");var d=this._setPropertyAndDispatchPropertySetEvent(a,b,c);this._dispatchSinglePropertiesSetEvent(a,d,b,c)},_setPropertyAndDispatchPropertySetEvent:function(a,b,c,d){var e=this._properties[a];e!==b&&(this._properties[a]=b,d||this.dispatchEvent("propertySet",this,
{key:a,oldValue:e,newValue:b},c));return e},_dispatchSinglePropertiesSetEvent:function(a,b,c,d){if(b!==c){var e={oldValues:{},newValues:{}};e.oldValues[a]=b;e.newValues[a]=c;this.dispatchEvent("propertiesSet",this,e,d)}},unsetProperty:function(a,b){var c=this._unsetPropertyAndDispatchPropertyUnsetEvent(a,b);this._dispatchSinglePropertiesUnsetEvent(a,c,b)},unsetProperties:function(a,b){var c={oldValues:{}};a.forEach(function(a){c.oldValues[a]=this._unsetPropertyAndDispatchPropertyUnsetEvent(a,b)},
this);this.dispatchEvent("propertiesUnset",this,c,b)},_unsetPropertyAndDispatchPropertyUnsetEvent:function(a,b){var c;this.hasProperty(a)&&(c=this._properties[a],delete this._properties[a],this.dispatchEvent("propertyUnset",this,{key:a,oldValue:c},b));return c},_dispatchSinglePropertiesUnsetEvent:function(a,b,c){var d={oldValues:{}};d.oldValues[a]=b;this.dispatchEvent("propertiesUnset",this,d,c)},hasProperty:function(a){return this._properties.hasOwnProperty(a)},getProperty:function(a){return this._properties[a]},
setProperties:function(a,b){this._setProperties(a,b,!1)},_setProperties:function(a,b,d){var e,f,g;for(e in a)a.hasOwnProperty(e)&&(f=a[e],(null===f||void 0===f)&&c.warn("Illegal argument. Property value must not be null or undefined. This will become an exception in the future."));var h=!1,s={oldValues:{},newValues:{}};for(e in a)a.hasOwnProperty(e)&&(f=a[e],g=this._setPropertyAndDispatchPropertySetEvent(e,f,b,d),g!==f&&(h=!0,s.oldValues[e]=g,s.newValues[e]=f));h&&!d&&this.dispatchEvent("propertiesSet",
this,s,b)},replaceProperties:function(a,b){var c;this.setProperties(a,b);for(c in this._properties)this._properties.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&this.unsetProperty(c,b)},getProperties:function(){var a,b={};for(a in this._properties)this._properties.hasOwnProperty(a)&&this.hasProperty(a)&&(b[a]=this.getProperty(a));return b},addChild:function(b,c,d,e){"number"===typeof c&&(d=c,c=null);b=a.createNode(b,c,this._idCache);d=this._addChild(b,d);this.dispatchEvent("childAdded",this,{child:b,
index:d},e);return b},addChildWithId:function(b,c,d,e,f){b=new a(b,c,d,this._idCache);e=this._addChild(b,e);this.dispatchEvent("childAdded",this,{child:b,index:e||0},f);return b},hasChild:function(a){if(f.isString(a)){var b,c,d=this._children.length;for(b=0;b<d;b+=1)if(c=this._children[b],c.getId()===a)return!0;return!1}a=this.getChildIndex(a);return 0<=a&&this._children[a]},getChild:function(a){if(f.isString(a)){var b,c,d=this._children.length;for(b=0;b<d;b+=1)if(c=this._children[b],c.getId()===
a)return c;throw Error("No child found with id: "+a);}return this._children[a]},getChildIndex:function(a){var b,c=this._children.length;for(b=0;b<c;b+=1)if(this._children[b].getId()===a.getId())return b;return-1},getChildren:function(){return this._children.map(function(a){return a})},hasDescendant:function(a){var b,c,d=this._children.length;for(b=0;b<d;b+=1)if(c=this._children[b],c.getId()===a||c.hasDescendant(a))return!0;d=this._detached.length;for(b=0;b<d;b+=1)if(c=this._detached[b],c.getId()===
a||c.hasDescendant(a))return!0;return!1},getDescendant:function(a){var b,c,d=this._children.length;for(b=0;b<d;b+=1){c=this._children[b];if(c._id===a)return c;if(c.hasDescendant(a))return c.getDescendant(a)}d=this._detached.length;for(b=0;b<d;b+=1){c=this._detached[b];if(c._id===a)return c;if(c.hasDescendant(a))return c.getDescendant(a)}throw Error("No descendant found with id: "+a);},getNumberOfChildren:function(){return this._children.length},hasDetachedChildren:function(){return 0<this._detached.length},
getDetachedChildren:function(){return this._detached.map(function(a){return a})},detach:function(a){if(!this.isDetached()){var b={child:this,index:this.getParent().getChildIndex(this)},c=this.getParent();this.getParent()._detachChild(this);c.dispatchEvent("childRemoved",c,b,a);c.dispatchEvent("childDetached",c,b,a)}},_detachChild:function(a){this._removeChild(a);this._detached.push(a)},reattach:function(a,b){this.isDetached()&&(a=0<=a?a:this.getParent().getNumberOfChildren(),a=this.getParent()._reattachChild(this,
a),this.getParent().dispatchEvent("childReattached",this.getParent(),{child:this,index:a},b))},_reattachChild:function(a,b){var c=this._detached.indexOf(a);this._detached.splice(c,1);return this._addChild(a,b)},isDetached:function(){return this.hasParent()&&0<=this.getParent().getDetachedChildren().indexOf(this)},isAncestorDetached:function(){return this.hasParent()&&(this.getParent().isDetached()||this.getParent().isAncestorDetached())},destroy:function(a){this.hasParent()&&this.getParent().dispatchEvent("subTreeDestroyed",
this.getParent(),{child:this},a);this._destroyNodesRecursive(a)},remove:function(){this.destroy()},_destroyNodesRecursive:function(a){try{this.getChildren().forEach(function(b){b._destroyNodesRecursive(a)});var b,c;this.hasParent()&&(c=this.getParent(),b=c.getChildIndex(this),c._removeChild(this),this._setParent(null),c.dispatchEvent("childRemoved",c,{child:this,index:b},a),c.dispatchEvent("childDestroyed",c,{child:this,index:b},a));this.dispatchEvent("destroyed",this,void 0,a)}finally{delete this._idCache[this._id]}},
hasParent:function(){return!!this._parent},getParent:function(){return this._parent},getRoot:function(){return this.hasParent()?this.getParent().getRoot():this},accept:function(a){a(this);this._children.forEach(function(b){b.accept(a)});this._detached.forEach(function(b){b.accept(a)})},_addChild:function(a,b){b=this._checkIndex(b);a._setParent(this);this._children.splice(b,0,a);return b},_removeChild:function(a){var b;"number"===typeof a?(b=a,a=this._children[b]):b=this.getChildIndex(a);b=this._checkIndex(b);
a&&this._children.splice(b,1)},_checkIndex:function(a){if(void 0===a||null===a)a=this._children.length;return Math.max(0,Math.min(a,this._children.length))},_setParent:function(a){this._parent=a},toString:function(a){a=a||0;var b,c,d,e="";for(d=0;d<a;d+=1)e+="    ";e+="{id\x3d'"+this._id+"'";e+=", type\x3d'"+this._type+"'";e+=", properties\x3d{";for(c in this._properties)if(this._properties.hasOwnProperty(c)){try{b=dojo.toJson(this._properties[c])}catch(f){b=this._properties[c].toString()}40<b.length&&
(b=b.slice(0,40)+"...");e+=c+": "+b+", "}e=e.slice(0,e.length-2);e+="}, children\x3d[";for(d=0;d<this._children.length;d+=1)e+="\n"+this._children[d].toString(a+1);e+="], detached\x3d[";for(d=0;d<this._detached.length;d+=1)e+="\n"+this._detached[d].toString(a+1);return e+"]}"},equals:function(a){var b;if(!a)return!1;if(this===a)return!0;if(this._id!==a._id)return!1;if(this._parent&&a._parent){if(this._parent.getId()!==a._parent.getId())return!1}else if(this._parent!==a._parent)return!1;if(!this._propertiesEqual(this,
a)||this._type!==a._type||this._children.length!==a._children.length||this._detached.length!==a._detached.length)return!1;for(b=0;b<this._children.length;b+=1)if(!this._children[b].equals(a._children[b]))return!1;for(b=0;b<this._detached.length;b+=1)if(!this._detached[b].equals(a._detached[b]))return!1;return!0},_propertiesEqual:function(a,b){return a._properties!==b._properties?!1:!0}});b.createNode=a.createNode=function(b,c,e){var f=d.generateUuid();return new a(f,b,c,e)};b.Impl=a;return b})},"mw-peermodel/Observable":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-log/Log"],function(h,f,g){var e=h([],{addEventListener:function(d,c,b){},removeEventListener:function(d,c,b){},hasEventListener:function(d,c,b){},dispatchEvent:function(d,c,b,a){}});e.Syncable=h([],{addSyncEventListener:function(d,c,b){},removeSyncEventListener:function(d,c,b){}});e.Impl=h([e,e.Syncable],{constructor:function(){this._listeners={};this._syncListeners={}},addEventListener:function(d,c,b){this._addEventListener(this._listeners,d,c,b)},addSyncEventListener:function(d,
c,b){this._addEventListener(this._syncListeners,d,c,b)},_addEventListener:function(d,c,b,a){a=a||this;d[c]=d[c]||[];var e={scope:a,callback:b};0>this._getEventListenerIndex(d,c,b,a)&&d[c].push(e)},hasEventListener:function(d,c,b){return 0<=this._getEventListenerIndex(this._listeners,d,c,b)},removeEventListener:function(d,c,b){this._removeEventListener(this._listeners,d,c,b)},removeSyncEventListener:function(d,c,b){this._removeEventListener(this._syncListeners,d,c,b)},_removeEventListener:function(d,
c,b,a){b=this._getEventListenerIndex(d,c,b,a||this);if(0<=b)d[c].splice(b,1);else throw Error("Listener does not exist");},_getEventListenerIndex:function(d,c,b,a){a=a||this;if(d=d[c]){var e=d.length;for(c=0;c<e;c+=1)if(d[c].scope===a&&d[c].callback===b)return c}return-1},dispatchEvent:function(d,c,b,a){this._dispatchEvent(this._syncListeners,d,c,b,a);this._dispatchEvent(this._listeners,d,c,b,a)},_dispatchEvent:function(d,c,b,a,e){if(void 0!==a&&(f.isArray(a)||f.isString(a)||null===a||"number"===
typeof a||"boolean"===typeof a))throw Error("Invalid event data, must be object");var l=d[c];if(l){var l=l.slice(0),h=l.length;for(d=0;d<h;d+=1)try{var q={type:c,target:b||this,data:a||{},originator:e};"string"===typeof l[d].callback?l[d].scope[l[d].callback].call(l[d].scope,q):l[d].callback.call(l[d].scope,q)}catch(n){g.error("Error while dispatching event handler of type: "+c+", message: "+n)}}}});return e})},"mw-peermodel/PeerEventObservable":function(){define(["dojo/_base/declare","./Observable"],
function(h,f){var g=h([f],{addPeerEventListener:function(e,d,c){},removePeerEventListener:function(e,d,c){},hasPeerEventListener:function(e,d,c){},dispatchPeerEvent:function(e,d,c,b){}});g.Impl=h([f.Impl],{addPeerEventListener:function(e,d,c){var b=function(a){a.data.type&&a.data.type===e&&d.call(c,a)};b.type=e;b.callback=d;b.scope=c;this.addEventListener("peerEvent",b)},hasPeerEventListener:function(e,d,c){return!!this._getPeerEventObserver(e,d,c)},removePeerEventListener:function(e,d,c){if(e=this._getPeerEventObserver(e,
d,c))this.removeEventListener("peerEvent",e.callback,e.scope);else throw Error("Listener does not exist");},_getPeerEventObserver:function(e,d,c){return this._listeners.peerEvent?this._listeners.peerEvent.filter(function(b){return b.callback.callback&&b.callback.type===e&&b.callback.callback===d&&b.callback.scope===c})[0]:null},dispatchPeerEvent:function(e,d,c,b){c||(c={});c.type=e;this.dispatchEvent("peerEvent",d,c,b)}});return g})},"MW/rtc/datamodel/FileBackingStoreUtilities":function(){define(["mw-filename-utils/FileNameUtil",
"MW/rtc/datamodel/FileBackingStore"],function(h,f){return{isPlainCodeFile:function(g){var e;if(e=g instanceof f)g=g.getFileName(),e=h.getFileNameExtension(g),e=h.isMatlabFileName(g)||"mlx"===e||"mlapp"===e;return e},getAbsoluteFilePathFromBackingStore:function(f){return f.getAbsoluteFilePath?f.getAbsoluteFilePath():""}}})},"mw-filename-utils/FileNameUtil":function(){define(["dojo/_base/array"],function(h){return{MATLAB_FILE_PATTERN:/^[a-z][a-z0-9_]*\.m$/i,USER_DIR_PATH:"users/",USERS_DIR_PATH:"/users/",
USER_PUBLISHED_DIR:"Published",USER_PUBLISHED_DIR_PATH_PATTERN:"^/MATLAB Drive/Published$",USER_SHARED_DIR_PATH_PATTERN:"^/MATLAB Drive/Shared$",IN_USER_SHARED_DIR_PATTERN:"^/MATLAB Drive/Shared/*",BROWSER_TYPES:"htm html pdf doc docx dot dotx rtf docm dotm xls asv dat exe dll zip".split(" "),LOAD_TYPES:["mat"],MATLAB_OPEN_TYPES:"fig tif png jpg jpeg gif au bmp mlx xlsx".split(" "),LIVE_SCRIPT_EXTENSION:"mlx",MATLAB_CODE_FILE_EXTENSION:"m",FILENAME_PATTERN:/^[^\"\/\*:><\?\\|]+$/,MATLAB_EXTENSION_PATTERN:/\.(m|mln|mlx)$/i,
SUPPORTED_EXTENSION_PATTERN:/\.(pdf|html|htm)$/i,SUPPORTED_FILENAME_PATTERN:/^[a-z][a-z0-9_]*\.(m|mln|mlx|pdf|html|htm)$/i,MATLAB_FILENAME_PATTERN:/^[a-z][a-z0-9_]*\.(m|mln|mlx)$/i,MATLAB_NAME_LENGTH:63,FILE_NAME_LENGTH:128,isMatlabFileInfo:function(f){return this._fileInfoNameMatchesRegExp(f,this.MATLAB_FILE_PATTERN)},isMatlabFileName:function(f){return this._fileNameMatchesRegExp(f,this.MATLAB_FILE_PATTERN)},isValidFileName:function(f){return this._fileNameMatchesRegExp(f,this.FILENAME_PATTERN)},
checkFileInfoExtension:function(f,g){return f&&f.name&&this.checkFileNameExtension(f.name,g)},checkFileNameExtension:function(f,g){g instanceof Array||(g=[g]);return h.some(g,function(e){return this.getFileNameExtension(f).toLocaleLowerCase()===e.toLocaleLowerCase()},this)},constructMatlabFilePath:function(f){return"'"+this.pathFromFileInfo(f).replace(/'/g,"''")+"'"},constructUrlFromFileInfo:function(f,g){var e="/"+f.location.substring(Math.min(f.location.indexOf("/MATLAB Drive/")+14,f.location.length));
return this.USER_DIR_PATH+g+e+f.name},constructPathFromUserName:function(f){if(f)return this.USERS_DIR_PATH+f+"/"},getFileSeparator:function(f){return-1!==f.search(/^[a-z]:/i)||-1!==f.search(/^\\\\/i)?"\\":"/"},getFileNameNoExtension:function(f){if(!f||"string"!==typeof f)return f;var g=-1!==f.lastIndexOf(".")?f.lastIndexOf("."):f.length;return f.slice(0,g)},getFileNameExtension:function(f){if(!f||"string"!==typeof f)return f;var g=-1!==f.lastIndexOf(".")?f.lastIndexOf(".")+1:f.length;return f.substring(g,
f.length)},normalizePath:function(f){var g=this.getFileSeparator(f);return f.replace(/[\/\\]*$/,g)},parseHomeFolderFromPath:function(f,g){var e=f.indexOf(g),d="";0<e&&(d=f.substring(0,e+g.length)+this.getFileSeparator(f));return d},getPackageStartFromLocation:function(f){f=this.normalizeLocation(f);var g=this.getFileSeparator(f);"\\"===g&&(g+=g);return f.search("(\\"+g+"\\+[a-zA-Z][a-zA-Z0-9_]*)+\\"+g+"$")},getFullyQualifiedMatlabName:function(f){var g=this.convertLocationToPackage(f.location);f=
this.getFileNameNoExtension(f.name);return g+f},getPathForPublish:function(f,g){var e;-1<f.location.indexOf("+")?e=this.getFullyQualifiedMatlabName(f):(e=g?f.location.replace("/MATLAB Drive/",g):f.location,e+=f.name);return e},convertToPublishURLFromMATLABDriveURL:function(f,g){if(0===f.indexOf("/MATLAB Drive/"+this.USER_PUBLISHED_DIR))return f.replace("/MATLAB Drive/",g)},areFilesEqual:function(f,g){return this.pathFromFileInfo(f)===this.pathFromFileInfo(g)},convertPathToRowClass:function(f){return f.replace(/[\/\.]/g,
"_")},convertLocationToPackage:function(f){f=this.normalizeLocation(f);var g=this.getPackageStartFromLocation(f);if(0>g)return"";var e=this.getFileSeparator(f);"\\"===e&&(e+=e);return f.substring(g+1,f.length).replace(/\+/g,"").replace(RegExp("\\"+e,"g"),".")},isShareable:function(f){return f.location===this.USERS_DIR_PATH||this.isUserPublishedDirectoryPath(f.path)?!1:f.shareAttributes&&void 0!==f.shareAttributes.canProduceShare?f.shareAttributes.canProduceShare:f.isDirectory&&!(f.parent&&"ROOT"===
f.parent.pathId)},isUserSharedDirectoryPath:function(f){return f.match(this.USER_SHARED_DIR_PATH_PATTERN)},isInUsersSharedDirectory:function(f){return-1!==f.search(this.IN_USER_SHARED_DIR_PATTERN)},isCurrentFolderInPath:function(f,g){return-1!==g.search(f)},isUserPublishedDirectoryPath:function(f){return f.match(this.USER_PUBLISHED_DIR_PATH_PATTERN)},isVersioned:function(f){return!f.isDirectory&&this.isWritable(f)&&this.isMatlabEditorOpenType(f)},isWritable:function(f){return f&&f.filePermissions&&
f.filePermissions.canWrite},isLiveScriptFile:function(f){return this.getFileNameExtension(f)===this.LIVE_SCRIPT_EXTENSION},isPlainCodeFile:function(f){return this.getFileNameExtension(f)===this.MATLAB_CODE_FILE_EXTENSION},canRename:function(f){return!f||f.parent&&"ROOT"===f.parent.pathId||f.parent&&f.name===this.USER_PUBLISHED_DIR&&"ROOT"===f.parent.parent.pathId?!1:this.isWritable(f)},canDelete:function(f){return this.canRename(f)},canDownload:function(f){return!f||f.name&&"mln"===this.getFileNameExtension(f.name).toLocaleLowerCase()?
!1:!f.isDirectory},_fileInfoNameMatchesRegExp:function(f,g){var e=!1;f&&f.name&&(e=this._fileNameMatchesRegExp(f.name,g));return e},_fileNameMatchesRegExp:function(f,g){var e=!1,d=this._getCaseInsensitiveRegExp(g);f&&("string"===typeof f&&-1!==f.search(d))&&(e=!0);return e},_getCaseInsensitiveRegExp:function(f){return f instanceof RegExp?RegExp(f.source,"i"):RegExp(f,"i")},assertIsFile:function(f){if(!this.isFile(f))throw Error("MW.utils.FileNameUtil: the object is not a 'File'. "+JSON.stringify(f));
},isFile:function(f){return f&&f.hasOwnProperty("content")&&f.hasOwnProperty("fileInfo")&&this.isFileInfo(f.fileInfo)},assertIsFileInfo:function(f){if(!this.isFileInfo(f))throw Error("MW.utils.FileNameUtil: the object is not a 'FileInfo'. "+JSON.stringify(f));},isFileInfo:function(f){return f&&f.hasOwnProperty("location")&&f.hasOwnProperty("name")&&f.hasOwnProperty("isDirectory")},normalizeLocation:function(f){if("string"===typeof f&&(0===f.length||f.lastIndexOf(this.getFileSeparator(f))!==f.length-
1))f+=this.getFileSeparator(f);return f},createFilePath:function(f,g){return this.normalizeLocation(f)+g},folderInfoFromPath:function(f){f=this.fileInfoFromPath(f);f.isDirectory=!0;return f},fileInfoFromPath:function(f){return{location:this.locationFromPath(f),name:this.nameFromPath(f),filePermissions:{canWrite:!0},isDirectory:!1,separator:this.getFileSeparator(f)}},pathFromFileInfo:function(f){this.assertIsFileInfo(f);return f.location+f.name},locationFromPath:function(f){var g,e=this.getFileSeparator(f),
d=f.split(e);d[d.length-1]?(g=d[d.length-1],g=f.slice(0,f.length-g.length)):d[d.length-2]&&(g=d[d.length-2],g=f.slice(0,f.length-g.length-1));!g&&f===e&&(g=e);return g},getParentPath:function(f){f=this.locationFromPath(f);return this._getPath(f)},_getPath:function(f){if(0===f.length)return f;var g=this.getFileSeparator(f);return f.charAt(f.length-1)!==g||3===f.length&&f.charAt(0).match(/[a-z]/i)&&":"===f.charAt(1)&&"\\"===f.charAt(2)||"/"===f?f:f.slice(0,f.length-1)},nameFromPath:function(f){var g=
"",e=this.getFileSeparator(f);f=f.replace(e+e,e);f=f.split(e);f[f.length-1]?g=f[f.length-1]:f[f.length-2]&&(g=f[f.length-2]);return g},createEmptyFileObject:function(f,g){return{content:"",fileInfo:this.fileInfoFromPath(this.createFilePath(f,g))}},remoteFile:function(f){var g=f;this.isFile(f)&&this.isFileInfo(f.fileInfo)&&(g={content:f.content,fileInfo:this.remoteFileInfo(f.fileInfo)});return g},remoteFileInfo:function(f){var g=f;this.isFileInfo(f)&&(g={location:f.location,name:f.name,isDirectory:f.isDirectory});
return g},extractSelectedFileName:function(f){if(!f||""===f||1>f.length)return"";var g=this.getFileSeparator(f);return 0>f.lastIndexOf(g)?f:f.substring(f.lastIndexOf(g)+1,f.length)},isBrowserType:function(f){return this.checkFileInfoExtension(f,this.BROWSER_TYPES)?!0:!1},isLoadType:function(f){return this.checkFileInfoExtension(f,this.LOAD_TYPES)?!0:!1},isMatlabOpenType:function(f){return this.checkFileInfoExtension(f,this.MATLAB_OPEN_TYPES)?!0:!1},isMatlabEditorOpenType:function(f){return!(this.checkFileInfoExtension(f,
this.BROWSER_TYPES)||this.checkFileInfoExtension(f,this.LOAD_TYPES)||this.checkFileInfoExtension(f,this.MATLAB_OPEN_TYPES))}}})},"MW/rtc/datamodel/FileBackingStore":function(){define(["dojo/_base/declare","MW/rtc/datamodel/BackingStore","mw-filename-utils/FileNameUtil"],function(h,f,g){return h(f,{constructor:function(e){this.uniqueId=this.absoluteFilePath=e;this.file={fileInfo:g.fileInfoFromPath(e)}},_updateFilePath:function(e){this.absoluteFilePath!==e&&(this.uniqueId=this.absoluteFilePath=e,this.file=
{fileInfo:g.fileInfoFromPath(e)},this.onFilePathUpdated(this.absoluteFilePath))},onFilePathUpdated:function(e){},getAbsoluteFilePath:function(){return this.absoluteFilePath},getFileName:function(){return this.file.fileInfo.name},getUniqueId:function(){return this.uniqueId}})})},"MW/rtc/plugins/breakpoint/BreakpointDataModel":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{toggleBreakpoint:function(f){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.toggleBreakpoint");
},hasBreakpointAtLine:function(f){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.hasBreakpointAtLine");},getBreakpoint:function(f){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.getBreakpoint");},setLive:function(f){throw Error("Unimplemented API: MW.rtc.plugins.breakpoint.BreakpointDataModel.setLive");},onDataModelChange:function(){}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactoryProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactory"],function(h,f,g,e){return h(g,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.linenumberservice"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointFactory":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpoint"],function(h,
f,g){return h(f,{constructor:function(e,d,c){this._internalDocument=e;this._document=d;this._lineNumberService=c},create:function(e,d,c,b,a){return new g(this._internalDocument,this._document,this._lineNumberService,e,d,c,b,a)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpoint":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPositionTracker".split(" "),
function(h,f,g,e,d,c){return f(e,{constructor:function(b,a,e,f,m,q,n,p){this._breakpointInfo=new d(f,m,q,n,p);this._positionTracker=new c(b,a,e,f);this.own(h.after(this._positionTracker,"onPositionUpdated",g.hitch(this,"_handlePositionUpdated"),!0))},getInfo:function(){return g.clone(this._breakpointInfo)},hasExpression:function(){return this._breakpointInfo.hasExpression()},getExpression:function(){return this._breakpointInfo.expression},getZeroBasedLineNumber:function(){return this._breakpointInfo.zeroBasedLineNumber},
getFileName:function(){return this._breakpointInfo.fileName},isEnabled:function(){return this._breakpointInfo.isEnabled},isAnonymous:function(){return this._breakpointInfo.isAnonymous()},getAnonymousIndex:function(){return this._breakpointInfo.anonymousIndex},toString:function(){return this._breakpointInfo.toString()},isValid:function(){return 0<=this.getZeroBasedLineNumber()},onLineChanged:function(){},_handlePositionUpdated:function(b){this._breakpointInfo.zeroBasedLineNumber!==b&&(this._breakpointInfo.zeroBasedLineNumber=
b,this.onLineChanged())},destroy:function(){this.inherited(arguments);this._positionTracker.destroy()}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPositionTracker":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants".split(" "),function(h,f,g,e,d,c){return f(e,{constructor:function(b,a,c,d){this._internalDocument=b;this._document=a;this._lineNumberService=c;this._trackedLinePosition=[];
this._trackLine(d)},onPositionUpdated:function(b){},_trackLine:function(b){b=d.getCodeLineNodes(this._internalDocument)[b];b=this._document.createLinePosition(b,!1);this.own(h.after(b,"onChange",g.hitch(this,"_handlePositionMoved")));this.own(h.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChanged"),!0));this._trackedLinePosition=b},_handlePositionMoved:function(){this._updatePosition()},_handleDocumentChanged:function(b){this._isFormatChangeEvent(b)&&this._updatePosition()},
_updatePosition:function(){var b=this._trackedLinePosition.getLineColumn().line-1,b=this._lineNumberService.getCodeLineNumberFromLineNumber(b);if(!b||0>b)this.onPositionUpdated(-1);else this.onPositionUpdated(b-1)},_isFormatChangeEvent:function(b){return b.some(function(a){return a.type===c.FORMAT_CHANGE_EVENT})},destroy:function(){this.inherited(arguments);this._trackedLinePosition.destroy()}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecoratorProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecorator","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{isApplicable:function(c){return g.isPlainCodeFile(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["debug.breakpointmodel","rtc.linenumberservice","debug.margin.matlab.breakpointstyler","debug.breakpointdirtyservice","debug.breakpoint.temporary"]}},createInstance:function(c,
b,a,d,f){return new e(c,b,a,d,f)},priority:function(){return 10}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDecorator":function(){define("dijit/Tooltip dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/mouse dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/breakpoints mw-log/Log MW/rtc/margin/AbstractLineMarginDecorator MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n){return a(q,{NO_LINE:-1,_TOOLTIP_TIMEOUT:800,
constructor:function(a,b,c,d,e){this._breakpointDataModel=a;this._lineNumberService=b;this._breakpointStyler=c;this._breakpointDirtyService=d;this._temporaryBreakpointManager=e;this.own(f.after(this._breakpointDataModel,"onDataModelChange",k.hitch(this,"_handleDataModelChange")));this.own(f.after(this._breakpointDirtyService,"breakpointDirtyStateChanged",k.hitch(this,"_handleBreakpointDirtyStateChange")));this._intermediateBreakpointLine=this.NO_LINE;this._tooltipTimer=null},_handleDataModelChange:function(){this._purgePartialBreakpoint();
this.onUpdate()},_handleBreakpointDirtyStateChange:function(){this.onUpdate()},_onBreakpointModelLiveChanged:function(){this.onUpdate()},handleMouseDown:function(a,c){this._clearTooltipAndTimer();if(b.isLeft(a)){var d=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(c)-1;this._createPartialBreakpoint(a,d)}},handleMouseUp:function(a,c){this._clearTooltipAndTimer();if(b.isLeft(a)){var d=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(c)-1;if(this._intermediateBreakpointLine===
d){var e=this._breakpointDataModel.getBreakpoint(d);e&&e.hasExpression()&&e.isEnabled?this._toggleEnableState(a,d):this._toggleBreakpoint(a,d)}}},_createPartialBreakpoint:function(a,b){this._intermediateBreakpointLine=b;this.onUpdate()},_purgePartialBreakpoint:function(){this._intermediateBreakpointLine!==this.NO_LINE&&(this._intermediateBreakpointLine=this.NO_LINE)},_toggleBreakpoint:function(a,b){b!==this.NO_LINE&&this._breakpointDataModel.toggleBreakpoint(b)},_toggleEnableState:function(a,b){b!==
this.NO_LINE&&this._breakpointDataModel.toggleEnableState(b)},handleMouseMove:function(a,b){if(!this._lastTooltipShownNode){this._lastTooltipShownNode=a.target;var c=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(b)-1;if(this._breakpointDataModel.wasThereAnErrorSyncingBreakpoints())c=this._breakpointStyler.buildTooltipString(),h.show(c,this._lastTooltipShownNode,["after"]);else if(this._breakpointDataModel.hasBreakpointAtLine(c)){var d=this._breakpointDataModel.getBreakpoint(c),e=this._breakpointStyler.buildTooltipString(d);
this._tooltipTimer=setTimeout(k.hitch(this,function(a,b,c){b.hasBreakpointAtLine(c)&&h.show(e,a,["below"])},this._lastTooltipShownNode,this._breakpointDataModel,c),this._TOOLTIP_TIMEOUT)}}},handleMouseLeave:function(){this._clearTooltipAndTimer();this._intermediateBreakpointLine!==this.NO_LINE&&(this._intermediateBreakpointLine=this.NO_LINE,this.onUpdate())},_clearTooltipAndTimer:function(){this._lastTooltipShownNode&&(h.hide(this._lastTooltipShownNode),this._lastTooltipShownNode=void 0);this._tooltipTimer&&
(clearTimeout(this._tooltipTimer),this._tooltipTimer=null)},_hasVisibleBreakpointAtLine:function(a){var b=this._breakpointDataModel.hasBreakpointAtLine(a);this._temporaryBreakpointManager&&(a=this._temporaryBreakpointManager.hasOnlyTemporaryBreakpoint(a),b=b&&!a);return b},_hasPartialBreakpointAtLine:function(a){return this._intermediateBreakpointLine===a&&this._breakpointStyler.allowPartialBreakpoints()},hasLayerForLineNumber:function(a,b){return this._hasVisibleBreakpointAtLine(a)||this._hasPartialBreakpointAtLine(a)},
createDecorationForLineNumber:function(a,b){m.assert(this.hasLayerForLineNumber(a,b),"Unexpected call to MatlabBreakpointDecorator createDecorationForLineNumber - which hasLayerForLineNumber returns false");var c=d.create("div",{"class":"commonBreakpointStyle"}),e=this._getBreakpointToDraw(a);this._breakpointStyler.applyStyle(c,e,this._hasPartialBreakpointAtLine(a));return c},_getBreakpointToDraw:function(a){var b=this._breakpointDataModel.getBreakpoint(a);if(this._temporaryBreakpointManager){var c=
this._temporaryBreakpointManager.getBreakpointReplacedByTemporary(a);c&&(b=c)}!b&&this._hasPartialBreakpointAtLine(a)&&(b=new n(a,"",!0));return b},getWidth:function(){return 17}})})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(h,
f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){function v(){}var w=f("dijit._MasterTooltip",[p,r],{duration:q.defaultDuration,templateString:t,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new s(this.domNode);this.fadeIn=g.fadeIn({node:this.domNode,duration:this.duration,onEnd:a.hitch(this,"_onShow")});this.fadeOut=g.fadeOut({node:this.domNode,duration:this.duration,onEnd:a.hitch(this,"_onHide")})},show:function(c,d,e,f,k,g,l){if(!this.aroundNode||!(this.aroundNode===d&&
this.containerNode.innerHTML==c))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=c;k&&this.set("textDir",k);this.containerNode.align=f?"right":"left";var h=n.around(this.domNode,d,e&&e.length?e:x.defaultPosition,!f,a.hitch(this,"orient")),m=h.aroundNodePos;"M"==h.corner.charAt(0)&&"M"==h.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-h.y+"px",this.connectorNode.style.left=""):"M"==h.corner.charAt(1)&&"M"==
h.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-h.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");b.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=d;this.onMouseEnter=g||v;this.onMouseLeave=l||v}},orient:function(a,b,d,e,f){this.connectorNode.style.top="";var k=e.h;e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow",
"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+d];this.domNode.style.width="auto";var g=c.position(this.domNode);if(m("ie")||m("trident"))g.w+=2;var l=Math.min(Math.max(e,1),g.w);c.setMarginBox(this.domNode,{w:l});"B"==d.charAt(0)&&"B"==b.charAt(0)?(a=c.position(a),b=this.connectorNode.offsetHeight,
a.h>k?(this.connectorNode.style.top=k-(f.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,g.w-e)},_onShow:function(){m("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=v},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});u.showTooltip=function(a,b,c,d,e,f,k){c&&(c=h.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));x._masterTT||(u._masterTT=x._masterTT=new w);return x._masterTT.show(a,b,c,d,e,f,k)};u.hideTooltip=function(a){return x._masterTT&&x._masterTT.hide(a)};var x=
f("dijit.Tooltip",p,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){h.forEach(this._connections||[],function(a){h.forEach(a,function(a){a.remove()})},this);this._connectIds=h.filter(a.isArrayLike(b)?b:b?[b]:[],function(a){return e.byId(a,this.ownerDocument)},this);this._connections=h.map(this._connectIds,function(b){b=e.byId(b,this.ownerDocument);var c=this.selector,d=c?function(a){return l.selector(c,a)}:function(a){return a},f=this;return[l(b,
d(k.enter),function(){f._onHover(this)}),l(b,d("focusin"),function(){f._onHover(this)}),l(b,d(k.leave),a.hitch(f,"_onUnHover")),l(b,d("focusout"),a.hitch(f,"set","state","DORMANT"))]},this);this._set("connectId",b)},addTarget:function(a){a=a.id||a;-1==h.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=h.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);
d.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;h.forEach(a.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(b){if(!(this.state==b||"SHOW TIMER"==b&&"SHOWING"==this.state||"HIDE TIMER"==b&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);
switch(b){case "DORMANT":this._connectNode&&(x.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},this.showDelay));break;case "SHOWING":var c=this.getContent(this._connectNode);if(!c){this.set("state","DORMANT");return}x.show(c,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,a.hitch(this,"set","state","SHOWING"),a.hitch(this,"set","state","HIDE TIMER"));
this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",b)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},
onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");h.forEach(this._connections||[],function(a){h.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});x._MasterTooltip=w;x.show=u.showTooltip;x.hide=u.hideTooltip;x.defaultPosition=["after-centered","before-centered"];return x})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(h,f,g,e,d,c,
b){function a(a,b,e,k){var p=c.getEffectiveBox(a.ownerDocument);(!a.parentNode||"body"!=String(a.parentNode.tagName).toLowerCase())&&d.body(a.ownerDocument).appendChild(a);var r=null;h.some(b,function(b){var c=b.corner,d=b.pos,g=0,h={w:{L:p.l+p.w-d.x,R:d.x-p.l,M:p.w}[c.charAt(1)],h:{T:p.t+p.h-d.y,B:d.y-p.t,M:p.h}[c.charAt(0)]},m=a.style;m.left=m.right="auto";e&&(g=e(a,b.aroundCorner,c,h,k),g="undefined"==typeof g?0:g);var s=a.style,t=s.display,H=s.visibility;"none"==s.display&&(s.visibility="hidden",
s.display="");m=f.position(a);s.display=t;s.visibility=H;t={L:d.x,R:d.x-m.w,M:Math.max(p.l,Math.min(p.l+p.w,d.x+(m.w>>1))-m.w)}[c.charAt(1)];H={T:d.y,B:d.y-m.h,M:Math.max(p.t,Math.min(p.t+p.h,d.y+(m.h>>1))-m.h)}[c.charAt(0)];d=Math.max(p.l,t);s=Math.max(p.t,H);t=Math.min(p.l+p.w,t+m.w);H=Math.min(p.t+p.h,H+m.h);t-=d;H-=s;g+=m.w-t+(m.h-H);if(null==r||g<r.overflow)r={corner:c,aroundCorner:b.aroundCorner,x:d,y:s,w:t,h:H,overflow:g,spaceAvailable:h};return!g});r.overflow&&e&&e(a,r.aroundCorner,r.corner,
r.spaceAvailable,k);b=r.y;var s=r.x,t=d.body(a.ownerDocument);/relative|absolute/.test(g.get(t,"position"))&&(b-=g.get(t,"marginTop"),s-=g.get(t,"marginLeft"));t=a.style;t.top=b+"px";t.left=s+"px";t.right="auto";return r}var k={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return b.place={at:function(b,c,d,e,f){d=h.map(d,function(a){var b={corner:a,aroundCorner:k[a],pos:{x:c.x,y:c.y}};e&&(b.pos.x+="L"==a.charAt(1)?e.x:-e.x,b.pos.y+="T"==a.charAt(0)?e.y:-e.y);return b});return a(b,d,f)},around:function(b,c,d,k,
p){function r(a,b){H.push({aroundCorner:a,corner:b,pos:{x:{L:B,R:B+D,M:B+(D>>1)}[a.charAt(1)],y:{T:A,B:A+F,M:A+(F>>1)}[a.charAt(0)]}})}var s;if("string"==typeof c||"offsetWidth"in c||"ownerSVGElement"in c){if(s=f.position(c,!0),/^(above|below)/.test(d[0])){var t=f.getBorderExtents(c),u=c.firstChild?f.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0},v=f.getBorderExtents(b),w=b.firstChild?f.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};s.y+=Math.min(t.t+u.t,v.t+w.t);s.h-=Math.min(t.t+u.t,v.t+w.t)+
Math.min(t.b+u.b,v.b+w.b)}}else s=c;if(c.parentNode){t="absolute"==g.getComputedStyle(c).position;for(c=c.parentNode;c&&1==c.nodeType&&"BODY"!=c.nodeName;){u=f.position(c,!0);v=g.getComputedStyle(c);/relative|absolute/.test(v.position)&&(t=!1);if(!t&&/hidden|auto|scroll/.test(v.overflow)){var w=Math.min(s.y+s.h,u.y+u.h),x=Math.min(s.x+s.w,u.x+u.w);s.x=Math.max(s.x,u.x);s.y=Math.max(s.y,u.y);s.h=w-s.y;s.w=x-s.x}"absolute"==v.position&&(t=!0);c=c.parentNode}}var B=s.x,A=s.y,D="w"in s?s.w:s.w=s.width,
F="h"in s?s.h:(e.deprecated("place.around: dijit/place.__Rectangle: { x:"+B+", y:"+A+", height:"+s.height+", width:"+D+" } has been deprecated.  Please use { x:"+B+", y:"+A+", h:"+s.height+", w:"+D+" }","","2.0"),s.h=s.height),H=[];h.forEach(d,function(a){var b=k;switch(a){case "above-centered":r("TM","BM");break;case "below-centered":r("BM","TM");break;case "after-centered":b=!b;case "before-centered":r(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":r(b?"TL":"TR",b?"TR":"TL");r(b?
"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":r(b?"BL":"BR",b?"TL":"TR");r(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":r(b?"TL":"TR",b?"BL":"BR");r(b?"TR":"TL",b?"BR":"BL");break;default:r(a.aroundCorner,a.corner)}});b=a(b,H,p,{w:D,h:F});b.aroundNodePos=s;return b}}})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActionsProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActions"],
function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.actionservice","debug.breakpointmodel"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointActions":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/connect MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),function(h,f,g,e,d,c){return h(null,{constructor:function(b,
a,e){this._cursor=b;this._actionService=a;this._breakpointModel=e;b=[{id:d.MATLAB_BREAKPOINT_MARGIN.CLEAR_ALL_BREAKPOINTS_ACTION,enabled:!0,text:c.clearAllBreakpointsLabel,description:c.clearAllBreakpointsDescription,callback:f.hitch(this,"clearAll")},{id:d.MATLAB_BREAKPOINT_MARGIN.TOGGLE_BREAKPOINT_ACTION,enabled:!0,text:c.toggleBreakpointLabel,description:c.toggleBreakpointDescription,key:"f12",platformKey:{mac:"meta_\\"},callback:f.hitch(this,"toggleBreakpoint")},{id:d.MATLAB_BREAKPOINT_MARGIN.TOGGLE_ENABLE_BREAKPOINT_ACTION,
enabled:!0,text:c.toggleEnableBreakpointLabel,description:c.toggleEnableBreakpointDescription,callback:f.hitch(this,"toggleEnablement")}];this._actionService.loadActions(b)},clearAll:function(){this._breakpointModel.clearAllBreakpoints()},toggleBreakpoint:function(){var b=this.getZeroBasedLineNumber();this._breakpointModel.toggleBreakpoint(b)},toggleEnablement:function(){var b=this.getZeroBasedLineNumber();this._breakpointModel.toggleEnableState(b)},getZeroBasedLineNumber:function(){return this._cursor.getLineColumn().line-
1}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataService"],function(h,f,g,e){return h(g,{requires:function(){return{createInstance:["rtc.backingstore","debug.breakpointdirtyservice"]}},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataService":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log mw-peermodel/PeerModelManager mw-remote/Remote MW/rtc/datamodel/FileBackingStoreUtilities MW/rtc/plugins/breakpoint/MessageServiceFactory MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceChannels".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(null,{constructor:function(a,c){this._backingStore=a;this._breakpointDirtyService=c;this.messageService=b.getInstance();this._initializePeerModel();this._initializeListeners();this.triggerBreakpointsRefresh()},_initializePeerModel:function(){this._breakpointsDataStore=e.getInstance("/matlabbreakpointsdatastore");this._breakpointsDataStore.isSyncEnabled()||this._breakpointsDataStore.setSyncEnabled(!0)},_getFilePathFromBackingStore:function(){return c.getAbsoluteFilePathFromBackingStore(this._backingStore)},
triggerBreakpointsRefresh:function(){var a=this._getFilePathFromBackingStore();this.messageService.publish(k.GET_BREAKPOINTS_REQUEST,a)},_initializeListeners:function(){this.messageService.subscribe(k.BREAKPOINT_ADDED,"_breakpointsAddedServerResponse",this);this.messageService.subscribe(k.BREAKPOINT_REMOVED,"_breakpointsRemovedServerResponse",this);this.messageService.subscribe(k.BREAKPOINTS_CLEARED,"_breakpointsClearedServerResponse",this);this.messageService.subscribe(k.BREAKPOINTS_ERRORED,"_handleMatlabBreakpointError",
this);this.messageService.subscribe(k.BREAKPOINTS_FILE_REFRESHED,"_handleMatlabBreakpointsFileRefreshed",this)},_cleanListeners:function(){this.messageService.unsubscribe(k.BREAKPOINT_ADDED,"_breakpointsAddedServerResponse",this);this.messageService.unsubscribe(k.BREAKPOINT_REMOVED,"_breakpointsRemovedServerResponse",this);this.messageService.unsubscribe(k.BREAKPOINTS_CLEARED,"_breakpointsClearedServerResponse",this);this.messageService.unsubscribe(k.BREAKPOINTS_ERRORED,"_handleMatlabBreakpointError",
this);this.messageService.unsubscribe(k.BREAKPOINTS_FILE_REFRESHED,"_handleMatlabBreakpointsFileRefreshed",this)},_breakpointsAddedServerResponse:function(a){this.breakpointsAdded(this._filterBreakpointsByFileName(a.data,this._getFilePathFromBackingStore()))},_filterBreakpointsByFileName:function(b,c){var d=[];b.forEach(function(b){this._areFilesTheSame(c,b.fileName)&&d.push(new a(b.zeroBasedLineNumber,b.fileName,b.isEnabled,b.expression))},this);return d},_areFilesTheSame:function(a,b){return this._convertToLowerCase(a)===
this._convertToLowerCase(b)},_convertToLowerCase:function(a){return(a||"").toLocaleLowerCase()},_breakpointsRemovedServerResponse:function(a){this.breakpointsRemoved(this._filterBreakpointsByFileName(a.data,this._getFilePathFromBackingStore()))},_breakpointsClearedServerResponse:function(){this.breakpointsCleared()},setBreakpoint:function(a){this.messageService.publish(k.BREAKPOINT_ADD_REQUEST,a.getInfo())},clearBreakpoint:function(a){this.messageService.publish(k.BREAKPOINT_REMOVE_REQUEST,a.getInfo())},
clearAllBreakpoints:function(){this.messageService.publish(k.CLEAR_ALL_BREAKPOINTS_REQUEST)},synchronizePeerModel:function(a){var b=this._breakpointsDataStore.getRoot(),c=this._getFilePathFromBackingStore();b&&c&&(a={breakpoints:a,areBreakpointsDirty:this._breakpointDirtyService.areBreakpointsDirty()},b.setProperty(c,a))},_handleMatlabBreakpointsFileRefreshed:function(a){if((a=a.data)&&this._areFilesTheSame(a.fileName,this._getFilePathFromBackingStore()))this._breakpointDirtyService.breakpointsRefreshed(a.errorOccurred),
this.breakpointsRefreshedForFile(a.errorOccurred)},_handleMatlabBreakpointError:function(a){this._areFilesTheSame(a.data.fFile.path,this._getFilePathFromBackingStore())&&(this._breakpointDirtyService.breakpointsErrored(),this.breakpointErrored(a.data))},destroy:function(){this._cleanListeners()},breakpointsAdded:function(a){},breakpointsRemoved:function(a){},breakpointsRefreshedForFile:function(a){},breakpointsCleared:function(){},breakpointErrored:function(a){}})})},"MW/rtc/plugins/breakpoint/MessageServiceFactory":function(){define(["dojo/_base/lang",
"MW/rtc/messageservice/MessageServiceFactory"],function(h,f){return new f})},"MW/rtc/messageservice/MessageServiceFactory":function(){define(["dojo/_base/declare","mw-messageservice/MessageService"],function(h,f){return h(null,{constructor:function(){this._messageService=f},getInstance:function(){return this._messageService},installInstance:function(f){this._messageService=f},clearCustomMessageServiceInstance:function(){this._messageService=f}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointDataServiceChannels":function(){define([],
function(){return{BREAKPOINT_ADD_REQUEST:"/editor/breakpoints/addBreakpointsRequest",BREAKPOINT_REMOVE_REQUEST:"/editor/breakpoints/removeBreakpointsRequest",GET_BREAKPOINTS_REQUEST:"/editor/breakpoints/getBreakpoints",CLEAR_ALL_BREAKPOINTS_REQUEST:"/editor/breakpoints/clearBreakpoints",BREAKPOINT_ADDED:"/editor/breakpoint/breakpointsAdded",BREAKPOINT_REMOVED:"/editor/breakpoint/breakpointsRemoved",BREAKPOINTS_CLEARED:"/editor/breakpoint/breakpointsCleared",BREAKPOINTS_FILE_REFRESHED:"/editor/breakpoint/breakpointsFileRefreshed",
BREAKPOINTS_ERRORED:"/editor/breakpoint/breakpointsErrored"}})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.backingstore"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/breakpoint/matlab/TraditionalBreakpointDirtyService":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/breakpoint/AbstractBreakpointDirtyService"],function(h,f,g,e){return h(e,{constructor:function(d,c){this._internalDocument=d;this._backingStore=c;this._areBreakpointsDirty=!1;this.own(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"),!0))},breakpointsRefreshed:function(d){!d&&this._areBreakpointsDirty&&(this._areBreakpointsDirty=!1,this.breakpointDirtyStateChanged(this._areBreakpointsDirty))},breakpointsErrored:function(){this._areBreakpointsDirty||
(this._areBreakpointsDirty=!0,this.breakpointDirtyStateChanged(this._areBreakpointsDirty))},_handleDocumentChanged:function(d){d=this._filterDocumentEvents(d);!this._areBreakpointsDirty&&0<d.length&&(this._areBreakpointsDirty=!0,this.breakpointDirtyStateChanged(this._areBreakpointsDirty))}})})},"MW/rtc/plugins/breakpoint/AbstractBreakpointDirtyService":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/DocumentConstants"],function(h,f,g){return h(f,{constructor:function(){this._areBreakpointsDirty=
!1},breakpointDirtyStateChanged:function(e){},areBreakpointsDirty:function(){return this._areBreakpointsDirty},breakpointsRefreshed:function(e){},breakpointsErrored:function(){},breakpointPositionUpdated:function(){},_filterDocumentEvents:function(e){return e.filter(function(d){return d.type!==g.READONLY_STATE_CHANGE_EVENT})}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointMarginProvider":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr MW/codeanalyzer/CodeAnalyzerDataService MW/rtc/core/provider/PluginProvider MW/rtc/datamodel/FileBackingStoreUtilities MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointContextMenuModel MW/rtc/margin/DecoratableLineMargin".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(c,{isApplicable:function(a){return b.isPlainCodeFile(a)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.view rtc.internaldocument rtc.linenumberservice rtc.focusservice debug.margin.matlab.breakpoint debug.margin.executionarrow matlab.executable.line rtc.contextmenu.generator debug.contextmenumodelfactory".split(" ")}},createInstance:function(a,b,c,d,f,g,h,t,u){f=[f,g,h];u=u.getInstance();a=new k(a,b,c,d,f,1,u,t);a.own(u);e.set(a.getMarginElement(),
"data-testid","breakpointMargin");return a}})})},"MW/rtc/margin/DecoratableLineMargin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/has dojo/mouse dojo/on MW/rtc/margin/MarginPlugin".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h(l,{_START_DOM_INDEX:1,constructor:function(a,b,d,e,f,k,g,h){this._view=a;this._internalDocument=b;this._lineNumberService=d;this._decorators=f;this._priority=k;this._focusService=e;this._contextMenuModel=
g||null;this._contextMenuGenerator=h||null;this._gutter=c.create("div",{className:"plainText lineMargin"});this._topPad=c.create("div",{className:"lineNumberTopPad"});this._mouseListeners=[];this._configureMargin();this._contextMenuModel&&this._contextMenuGenerator&&(this._contextMenu=this._contextMenuGenerator.createContextMenu(this._gutter,this._contextMenuModel))&&this.own(this._contextMenu)},onWidthChange:function(){},getMarginElement:function(){return this._gutter},_configureMargin:function(){this._width=
0;this._gutter.style.width=this._width+"px";this._decorators.forEach(function(a){this.own(g.after(a,"onUpdate",f.hitch(this,"update")));this.own(g.after(a,"onWidthChange",f.hitch(this,"_updateWidth")))},this);this._configureMouseEvents()},_clearMouseListeners:function(){this._mouseListeners.forEach(function(a){a.remove()});this._mouseListeners=[]},_configureMouseEvents:function(){this._clearMouseListeners();this._mouseListeners=[k(this._gutter,"mousemove",f.hitch(this,this._handleMouseMove)),k(this._gutter,
"mouseout",f.hitch(this,this._handleMouseLeave)),k(this._gutter,"mousedown",f.hitch(this,this._handleMouseDown)),k(this._gutter,"mouseup",f.hitch(this,this._handleMouseUp))];this._mouseListeners.forEach(function(a){this.own(a)},this)},update:function(){this._contextMenu&&this._contextMenu.unBindDomNode(this._gutter);var a=this._gutter.cloneNode(!1),b=c.create("div",{className:"lineNumberTopPad"});a.appendChild(b);for(var d=this._view.getFirstVisibleLineNumber()-1,e=this._view.getLastVisibleLineNumber()-
1,f=this._internalDocument.getLineNode(d),f=this._view.getNodeTop(f,!0),k=this._START_DOM_INDEX;d<=e;d++){var g=this._cloneAndUpdateLine(k,d,f);a.appendChild(g);k++}this._gutter.parentElement.replaceChild(a,this._gutter);this._gutter=a;this._configureMouseEvents();this._topPad=b;this._attachContextMenu();this._normalizeMarginPosition(f);this._updateWidth()},_normalizeMarginPosition:function(a){var b=this._view.getDomTargetPosition().scrollTop;this._topPad.style.marginBottom=a-b+"px"},_getLineNumberFromMousePosition:function(a){a=
this._view.getCoordinateFromEvent(this._view.fixEvent(a));return this._view.getLineFromCoordinate(a)-1},_handleMouseLeave:function(a){this._decorators.forEach(function(b){b.handleMouseLeave(a,this._getLineNumberFromMousePosition(a))},this)},_handleMouseMove:function(a){this._decorators.forEach(function(b){b.handleMouseMove(a,this._getLineNumberFromMousePosition(a))},this)},_handleMouseDown:function(a){this._decorators.forEach(function(b){b.handleMouseDown(a,this._getLineNumberFromMousePosition(a))},
this);this._contextMenuModel&&this._contextMenuModel.setMenuLine(this._getLineNumberFromMousePosition(a));b("edge")&&this._focusService.setBlur()},_handleMouseUp:function(c){(!b("edge")&&!b("trident")&&!b("ie")||!a.isRight(c)||!this._contextMenuModel)&&this._decorators.forEach(function(a){a.handleMouseUp(c,this._getLineNumberFromMousePosition(c))},this)},_cloneAndUpdateLine:function(a,b,c){var f=this._lineNumberService.getCodeLineNumberFromLineNumber(b),k=this._getElementInMargin(a).cloneNode(!1);
this._cleanMarginElement(k);if(0<f){var g=f-1,h=!1;e.set(k,"data-testid","gutterLine_"+g);this._decorators.forEach(function(a){a.hasLayerForLineNumber(g,h)&&(a=a.createDecorationForLineNumber(g,h),k.appendChild(a),h=!0)},this);h||d.add(k,"emptyGutterLine")}a=this._getHeightForLine(b,c);k.style.height=a+"px";return k},_getElementInMargin:function(a){return!this._gutter.children[a]?c.create("div",{"class":"gutterLine"}):this._gutter.children[a]},_cleanMarginElement:function(a){a.hasChildNodes()&&c.empty(a);
d.remove(a,"emptyGutterLine")},_getHeightForLine:function(a,b){var c=this._internalDocument.getLineNode(a),d=this._internalDocument.getLineNode(a+1),e=this._view.getNodeTop(c,!0)-b;return(d?this._view.getNodeTop(d,!0):this._view.getNodeBottom(c))-b-e},_updateWidth:function(){var a=0;this._decorators.forEach(function(b){b=b.getWidth();b>a&&(a=b)},this);this._width!==a&&(this._width=a,this._gutter.style.width=this._width+"px",this.onWidthChange())},_attachContextMenu:function(){this._contextMenu?this._contextMenu.bindDomNode(this._gutter):
this._contextMenuGenerator&&this._contextMenuModel&&(this._contextMenu=this._contextMenuGenerator.createContextMenu(this._gutter,this._contextMenuModel))},priority:function(){return this._priority},getWidth:function(){return this._width}})})},"MW/rtc/margin/MarginPlugin":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{priority:function(){throw Error("Unimplemented API: MW.rtc.margin.MarginPlugin.priority");},getWidth:function(){throw Error("Unimplemented API: MW.rtc.margin.MarginPlugin.getWidth");
},getMarginElement:function(){throw Error("Unimplemented API: MW.rtc.margin.MarginPlugin.getMarginElement");},onUpdate:function(){}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManagerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManager"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.breakpointmodel"]}},
createInstance:function(d){return new e(d)}})})},"MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointPromiseManager":function(){define(["dojo/aspect","dojo/Deferred","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e,d){return g(d,{constructor:function(c){this._breakpointDataModel=c;this._promise=new f;this.own(h.after(this._breakpointDataModel,"onDataModelChange",e.hitch(this,"_handleDataModelChange")))},_handleDataModelChange:function(){this._promise.resolve();
this._promise=new f},setBreakpoint:function(c){var b=this._promise;this._breakpointDataModel.setBreakpoint(c);return b},clearBreakpoint:function(c){var b=this._promise;this._breakpointDataModel.clearBreakpoint(c);return b}})})},"MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManagerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManager","MW/rtc/plugins/debug/DebugServicesFactory"],
function(h,f,g,e,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.breakpointmodel","debug.breakpoint.promise","rtc.embeddedoutputs.statehandler"]}},createInstance:function(c,b,a){var f=d.getInstance();return new e(c,b,a,f)}})})},"MW/rtc/plugins/breakpoint/matlab/temporary/TemporaryBreakpointManager":function(){define("dojo/aspect dojo/Deferred dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/breakpoint/matlab/MatlabBreakpointInfo".split(" "),
function(h,f,g,e,d,c){return g(d,{constructor:function(b,a,c,d){this._breakpointDataModel=b;this._breakpointPromiseManager=a;this._stateHandler=c;this._debugServices=d;this._temporaryBreakpoints=[];this.own(h.after(this._debugServices,"onDBStop",e.hitch(this,"_handleDBStop")));this.own(h.after(this._stateHandler,"stateChanged",e.hitch(this,"_handleStateChanged"),!0))},getBreakpointReplacedByTemporary:function(b){var a=null;this._temporaryBreakpoints.forEach(function(c){c.temporaryBreakpoint.zeroBasedLineNumber===
b&&(a=c.existingBreakpoint)});return a},hasOnlyTemporaryBreakpoint:function(b){var a=!1;this._temporaryBreakpoints.forEach(function(c){c.temporaryBreakpoint.zeroBasedLineNumber===b&&null===c.existingBreakpoint&&(a=!0)});return a},setBreakpoint:function(b){var a=this._breakpointDataModel.getBreakpoint(b);b=new c(b,"",!0);this._temporaryBreakpoints.push({existingBreakpoint:a,temporaryBreakpoint:b});return this._breakpointPromiseManager.setBreakpoint(b).then(e.hitch(this,"_handleTemporaryBreakpointSet",
b))},_handleTemporaryBreakpointSet:function(b){b.zeroBasedLineNumber=this._findLineWhereBreakpointFell(b.zeroBasedLineNumber)},_handleBreakpointCleared:function(b){this._temporaryBreakpoints=this._temporaryBreakpoints.filter(e.hitch(this,function(a){return a.temporaryBreakpoint.zeroBasedLineNumber!==b}))},_handleDBStop:function(){this._resetBreakpoints()},_handleStateChanged:function(b){b===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE&&this._resetBreakpoints()},_resetBreakpoints:function(){this._temporaryBreakpoints.forEach(e.hitch(this,
"_resetBreakpoint"))},_resetBreakpoint:function(b){(b.existingBreakpoint?this._breakpointPromiseManager.setBreakpoint(b.existingBreakpoint):this._breakpointPromiseManager.clearBreakpoint(b.temporaryBreakpoint.zeroBasedLineNumber)).then(e.hitch(this,"_handleBreakpointCleared",b.temporaryBreakpoint.zeroBasedLineNumber))},_findLineWhereBreakpointFell:function(b){var a=this._breakpointDataModel.getAllBreakpoints().map(function(a){return a.zeroBasedLineNumber});a.sort();var a=a.filter(function(a){return a>=
b}),c=-1;0<a.length&&(c=a[0]);return c}})})},"MW/rtc/plugins/debug/DebugServicesFactory":function(){define(["MW/rtc/plugins/debug/DebugServices"],function(h){var f=null;return{getInstance:function(){null===f&&(f=new h);return f}}})},"MW/rtc/plugins/debug/DebugServices":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-messageservice/MessageService MW/rtc/plugins/debug/AbstractDebuggerService MW/rtc/plugins/debug/DebugServicesChannels MW/rtc/plugins/debug/StackFrame".split(" "),
function(h,f,g,e,d,c,b){return h(d,{_STOP_IF_ERROR_FLAG:1,_STOP_IF_WARNING_FLAG:2,_STOP_IF_NAN_INF_FLAG:8,constructor:function(a){this.messageService=a||e;this.messageService.subscribe(c.DEBUGGER_STATE_CHANGED,"_handleDebugModeChanged",this);this.messageService.subscribe(c.DBCONT_EVENT,"_handleDBContEvent",this);this.messageService.subscribe(c.DBSTOP_EVENT,"_handleDBStopEvent",this);this.messageService.subscribe(c.STACK_CHANGE,"_handleStackChanged",this);this.messageService.subscribe(c.DEBUG_STOP_CONDITIONS_EVENT,
"_handleDbStopConditionsEvent",this);this.isDebugging=!1;this._requestInitialState();this.messageService.start&&(this.connection=g.after(this.messageService,"start",f.hitch(this,"_requestInitialState"),!0))},_requestInitialState:function(){this.messageService.publish(c.DEBUGGER_STATE_REQUEST,{});this.messageService.publish(c.STACK_REQUEST,{});this.messageService.publish(c.DB_STOP_IF_STATUS,{})},_handleDebugModeChanged:function(a){this.isDebugging=a.data.isDebugging;this.onDebugModeChanged(this.isDebugging)},
_handleStackChanged:function(a){var c=a.data.currentIndex,d=a.data.lineNumbers,e=a.data.fullFileNames;a=a.data.stack.map(function(a,c){return new b(a,e[c],d[c])});this.onStackChanged(a,c)},onStackChanged:function(a,b){},_handleDbStopConditionsEvent:function(a){a=this._createDBStopIfConditionObject(a.data.dbStopConditions);this.onDbStopConditionsEvent(a)},_createDBStopIfConditionObject:function(a){return{stopIfError:(a&this._STOP_IF_ERROR_FLAG)===this._STOP_IF_ERROR_FLAG,stopIfWarning:(a&this._STOP_IF_WARNING_FLAG)===
this._STOP_IF_WARNING_FLAG,stopIfNanInf:(a&this._STOP_IF_NAN_INF_FLAG)===this._STOP_IF_NAN_INF_FLAG}},onDbStopConditionsEvent:function(a){},onDebugModeChanged:function(a){},_handleDBContEvent:function(){this.onDBCont()},onDBCont:function(){},_handleDBStopEvent:function(a){this.onDBStop(a.data.fileName,a.data.lineNumber)},onDBStop:function(a,b){},debugContinue:function(){this.messageService.publish(c.DEBUG_CONTINUE,{})},debugPause:function(){this.messageService.publish(c.DEBUG_PAUSE,{})},debugStep:function(){this.messageService.publish(c.DEBUG_STEP,
{})},debugStepIn:function(){this.messageService.publish(c.DEBUG_STEP_IN,{})},debugStepOut:function(){this.messageService.publish(c.DEBUG_STEP_OUT,{})},debugExit:function(){this.messageService.publish(c.DEBUG_EXIT,{})},dbUpDown:function(a){this.messageService.publish(c.STACK_UPDOWN,{deltaValue:a})},requestStackState:function(){this.messageService.publish(c.STACK_REQUEST,{})},setDBStopIfError:function(a){this.messageService.publish(c.DB_STOP_IF_ERROR,a)},setDBStopIfWarning:function(a){this.messageService.publish(c.DB_STOP_IF_WARNING,
a)},setDBStopIfNanInf:function(a){this.messageService.publish(c.DB_STOP_IF_NAN_INF,a)},dispose:function(){this.messageService.unsubscribe(c.DEBUGGER_STATE_CHANGED,"_handleDebugModeChanged",this);this.messageService.unsubscribe(c.STACK_CHANGE,"_handleStackChanged",this);this.messageService.unsubscribe(c.DBCONT_EVENT,"_handleDBContEvent",this);this.messageService.unsubscribe(c.DBSTOP_EVENT,"_handleDBStopEvent",this);this.messageService.unsubscribe(c.DEBUG_STOP_CONDITIONS_EVENT,"_handleDbStopConditionsEvent",
this);this.connection&&this.connection.remove()}})})},"MW/rtc/plugins/debug/AbstractDebuggerService":function(){define(["dojo/_base/declare"],function(h){return h(null,{debugContinue:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugContinue");},debugStep:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugStep");},debugStepIn:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugStepIn");},debugStepOut:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugStepOut");
},debugExit:function(){throw Error("Unimplemented API: MW.rtc.plugins.debug.DebugActions.debugExit");}})})},"MW/rtc/plugins/debug/DebugServicesChannels":function(){define([],function(){return{DEBUGGER_STATE_CHANGED:"/editor/debugger/debugger-state-change",DEBUGGER_STATE_REQUEST:"/editor/debugger/debugger-state-request",DBSTOP_EVENT:"/editor/debugger/dbstop",DBCONT_EVENT:"/editor/debugger/dbcont",STACK_CHANGE:"/editor/debugger/stack-change",STACK_REQUEST:"/editor/debugger/stack-request",DEBUG_STOP_CONDITIONS_EVENT:"/editor/debugger/debug-stop-if",
DEBUG_CONTINUE:"/editor/debugger/debug-continue",DEBUG_PAUSE:"/editor/debugger/debug-pause",DEBUG_STEP:"/editor/debugger/debug-step",DEBUG_STEP_IN:"/editor/debugger/debug-step-in",DEBUG_STEP_OUT:"/editor/debugger/debug-step-out",DEBUG_EXIT:"/editor/debugger/debug-exit",STACK_UPDOWN:"/editor/debugger/stack-up-down",DB_STOP_IF_ERROR:"/editor/debugger/debug-stop-if-error",DB_STOP_IF_WARNING:"/editor/debugger/debug-stop-if-warning",DB_STOP_IF_NAN_INF:"/editor/debugger/debug-stop-if-nan-inf",DB_STOP_IF_STATUS:"/editor/debugger/debug-stop-if-status-request"}})},
"MW/rtc/plugins/debug/StackFrame":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g,e){this._name=f;this._fullPath=g||null;this._lineNumber=e||null},getName:function(){return this._name},getFullPath:function(){return this._fullPath},getLineNumber:function(){return this._lineNumber},destroy:function(){}})})},"MW/rtc/plugins/breakpoint/DummyBreakpointMarginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/margin/DecoratableLineMargin",
"MW/rtc/margin/DummyBreakpointDecorator","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.internaldocument","rtc.linenumberservice","rtc.focusservice"]}},createInstance:function(c,b,a,d){var f=[new e];return new g(c,b,a,d,f,1)}})})},"MW/rtc/margin/DummyBreakpointDecorator":function(){define(["dojo/_base/declare","MW/rtc/margin/AbstractLineMarginDecorator"],function(h,
f){return h(f,{hasLayerForLineNumber:function(f,e){return!1},createDecorationForLineNumber:function(f,e){},getWidth:function(){return 17}})})},"MW/rtc/plugins/buttonfactory/ButtonFactoryProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/buttonfactory/ButtonFactory"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new e}})})},
"MW/rtc/plugins/buttonfactory/ButtonFactory":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,f){return h(null,{constructor:function(){},createButton:function(g,e,d){return f.create("div",{"class":g.join(" "),innerHTML:e,onclick:d,onmousedown:this._handleMouseDown.bind(this)})},_handleMouseDown:function(f){f.stopPropagation()},destroy:function(){}})})},"MW/rtc/plugins/code/hover/CodeHoverServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./CodeHoverService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view","rtc.linenumberservice","rtc.code.hover.contributors"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/code/hover/CodeHoverService":function(){define(["dojo/aspect","dojo/on","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e,d){return g(d,{_NO_LINE:-1,constructor:function(c,b,a){this._view=c;this._lineNumberService=b;this._hoverContributors=
a;this._currentLineNumber=this._NO_LINE;this.own(f(this._view.getDomtarget(),"mousemove",e.hitch(this,"_handleMouseMove")));this.own(f(this._view.getDomtarget(),"mouseleave",e.hitch(this,"_sendMouseLeaveIfNeeded")))},onMouseEnter:function(c){},onMouseLeave:function(c){},_handleMouseMove:function(c){if(c){var b=this._view.fixEvent(c);this._hoverContributors.some(function(a){return a.shouldHandleMouseMoveEvent(b)})?this._handleHoverOnCodeLine(b):this._sendMouseLeaveIfNeeded()}},_handleHoverOnCodeLine:function(c){c=
this._view.getPositionFromEvent(c);c=this._lineNumberService.getCodeLineNumberFromLineNumber(c.getLine()-1);c!==this._currentLineNumber&&(this._sendMouseLeaveIfNeeded(),this._currentLineNumber=c,this.onMouseEnter(this._currentLineNumber))},_sendMouseLeaveIfNeeded:function(){this._currentLineNumber!==this._NO_LINE&&(this.onMouseLeave(this._currentLineNumber),this._currentLineNumber=this._NO_LINE)}})})},"MW/rtc/plugins/code/hover/CodeTextHoverContributorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CodeTextHoverContributor"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.view"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/code/hover/CodeTextHoverContributor":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/code/hover/AbstractCodeHoverContributor"],function(h,f,g){return h(g,{constructor:function(e,d){this.inherited(arguments);this._view=d},shouldHandleMouseMoveEvent:function(e){if(!e.target||
!e.target.rteNode)return!1;var d=this._view.getPositionFromEvent(e);e=f.isCodeContainer(e.target.rteNode);d=this._isOverCodeText(d);return e&&d}})})},"MW/rtc/plugins/code/hover/AbstractCodeHoverContributor":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return f(e,{constructor:function(d){this._document=d},shouldHandleMouseMoveEvent:function(d){throw Error("Unimplemented API: MW.rtc.plugins.code.AbstractCodeHoverPlugin._shouldHandleMouseMoveEvent");
},_isOverCodeText:function(d){var c=d.getLine()-1,b=d.getColumn()-1;return!d.isValid()||0>c||0>b?!1:0<this._document.getTextCharacters(c,b,1).length}})})},"MW/rtc/plugins/code/hover/LeftMarginCodeHoverContributorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LeftMarginCodeHoverContributor"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.view","rtc.internaldocument"]}},createInstance:function(e,d,c){return new g(e,
d,c)}})})},"MW/rtc/plugins/code/hover/LeftMarginCodeHoverContributor":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/code/hover/AbstractCodeHoverContributor"],function(h,f,g){return h(g,{_LEFT_BUFFER:0,_RIGHT_OVERLAP:1,constructor:function(e,d,c){this.inherited(arguments);this._view=d;this._internalDocument=c},shouldHandleMouseMoveEvent:function(e){e=this._view.getCoordinateFromEvent(e);var d=this._view.getLineFromCoordinate(e),d=this._internalDocument.getPositionForLineColumn(d,
1),c=d.getNode();if(!c||!c.box||!f.isCodeContainer(c))return!1;var b=this._isCorrectXPosition(e,c);e=this._isCorrectYPosition(e,c);return this._isOverCodeText(d)&&b&&e},_isCorrectXPosition:function(e,d){var c=this._LEFT_BUFFER;return e.x<d.box.offsetLeft+this._RIGHT_OVERLAP&&e.x>c},_isCorrectYPosition:function(e,d){var c=this._view.getNodeTop(d),b=this._view.getNodeBottom(d);return e.y>c&&e.y<b}})})},"MW/rtc/plugins/code/CodeTextServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./CodeTextService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/code/CodeTextService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractCachedModelQueryService"],function(h,f,g,e){return h(e,{constructor:function(d){this._codeText=""},getCodeText:function(){this._ensureBuilt();return this._codeText},_build:function(){this._codeText=this._internalDocument.root.getCodeText()}})})},
"MW/rtc/abstract/AbstractCachedModelQueryService":function(){define(["dojo/_base/declare","dojo/aspect","mw-log/Log","./AbstractPlugin"],function(h,f,g,e){return h(e,{constructor:function(d){this._internalDocument=d;this._outOfDate=!0;["onDocumentReset","onNodeChange"].forEach(function(c){this.own(f.after(this._internalDocument,c,function(){this._outOfDate=!0}.bind(this)))},this)},_ensureBuilt:function(){this._outOfDate&&(this._build(),this._outOfDate=!1)},_build:function(){g.error("AbstractCachedModelQueryService._build Unimplemented")}})})},
"MW/rtc/plugins/code/ExecutableLineServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/code/ExecutableLineService","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.linenumberservice","matlab.tokens"]}},createInstance:function(e,d){return new f(e,d)}})})},"MW/rtc/plugins/code/ExecutableLineService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect",
"MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h(e,{constructor:function(d,c){this._lineNumberService=d;this._matlabTokens=c;this._executableLines=this._matlabTokens.getTokensData().executableLines;this.own(g.after(this._matlabTokens,"onUpdate",f.hitch(this,"_updateTokens"),!0))},isCodeLineExecutable:function(d){d=this._lineNumberService.getLineNumberFromCodeLineNumber(d);return!!this._executableLines[d]},onUpdate:function(){},_updateTokens:function(d){this._executableLines=d.executableLines;
this.onUpdate()}})})},"MW/rtc/plugins/contextmenu/DojoContextMenuGeneratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/contextmenu/DojoContextMenuGenerator"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/contextmenu/DojoContextMenuGenerator":function(){define("dijit/Menu dijit/MenuItem dijit/MenuSeparator dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/keys dojo/aspect MW/rtc/plugins/contextmenu/ContextMenuGenerator".split(" "),
function(h,f,g,e,d,c,b,a,k){return e(k,{createContextMenu:function(a,b){var e=this,f=h({baseClass:"ww-contextMenu",targetNodeIds:[a],onOpen:function(f){this.domNode.parentNode&&d.add(this.domNode.parentNode,"layeredNode");var k=this.getChildren();k&&k.forEach(this.removeChild);f=document.elementFromPoint(f.x-1,f.y);e.willOpen(a,f);var h=1,n=b.getGroups().length;b.getGroups().forEach(c.hitch(this,function(a){a=b.getActions(a);a instanceof Array&&0!=a.length&&(a.forEach(c.hitch(this,function(a){a=e._createMenuItem(a);
this.addChild(a)})),h<n&&(this.addChild(new g),h+=1))}));e.onOpen(f)},onClose:function(){e.onClose()}});this._setDataTestId(f,a.hasAttribute("data-testid")?"contextMenu_"+a.getAttribute("data-testid"):"contextMenu_"+a.className);return f},_createMenuItem:function(a){var b=new f({label:a.label,accelKey:a.shortcut,onClick:a.callback,disabled:!a.enabled});this._setDataTestId(b,"contextMenu_"+a.id);return b},_setDataTestId:function(a,b){a.set("data-testid",b)}})})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){m("dijit-legacy-requires")&&s(0,function(){h(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return g("dijit.Menu",r,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):f.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return n.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(b){b=e.byId(b,this.ownerDocument);var c;if("iframe"==b.tagName.toLowerCase()){var f=b;c=this._iframeContentWindow(f);c=q.body(c.document)}else c=b==q.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var g={node:b,
iframe:f};d.set(b,"_dijitMenu"+this.id,this._bindings.push(g));var h=k.hitch(this,function(b){var c=this.selector,d=c?function(a){return l.selector(c,a)}:function(a){return a},e=this;return[l(b,d(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<e._lastKeyDown+500||e._scheduleOpen(this,f,{x:a.pageX,y:a.pageY},a.target)}),l(b,d("keydown"),function(b){if(93==b.keyCode||b.shiftKey&&b.keyCode==a.F10||e.leftClickToOpen&&b.keyCode==a.SPACE)b.stopPropagation(),
b.preventDefault(),e._scheduleOpen(this,f,null,b.target),e._lastKeyDown=(new Date).getTime()})]});g.connects=c?h(c):[];f&&(g.onloadHandler=k.hitch(this,function(){var a=this._iframeContentWindow(f),a=q.body(a.document);g.connects=h(a)}),f.addEventListener?f.addEventListener("load",g.onloadHandler,!1):f.attachEvent("onload",g.onloadHandler))},unBindDomNode:function(a){var b;try{b=e.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&d.has(b,a)){for(var f=d.get(b,a)-1,k=this._bindings[f],
g;g=k.connects.pop();)g.remove();(g=k.iframe)&&(g.removeEventListener?g.removeEventListener("load",k.onloadHandler,!1):g.detachEvent("onload",k.onloadHandler));d.remove(b,a);delete this._bindings[f]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function d(){r.refocus&&s&&s.focus();p.close(r)}var f=a.target,k=a.iframe,g=a.coords,h=!g;this.currentTarget=
a.delegatedTarget;if(g){if(k){a=c.position(k,!0);var f=this._iframeContentWindow(k),f=c.docScroll(f.document),l=b.getComputedStyle(k),n=b.toPixelValue,q=(m("ie")&&m("quirks")?0:n(k,l.paddingLeft))+(m("ie")&&m("quirks")?n(k,l.borderLeftWidth):0),k=(m("ie")&&m("quirks")?0:n(k,l.paddingTop))+(m("ie")&&m("quirks")?n(k,l.borderTopWidth):0);g.x+=a.x+q-f.x;g.y+=a.y+k-f.y}}else g=c.position(f,!0),g.x+=10,g.y+=10;var r=this,k=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var s=!a||
e.isDescendant(a,this.domNode)?k:a;p.open({popup:this,x:g.x,y:g.y,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();h||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);p.close(this)}},destroy:function(){f.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){function t(){this._popupWrapper&&(c.destroy(this._popupWrapper),delete this._popupWrapper)}g=g(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,c=b.position(this._firstAroundNode,!0),d=c.x-a.x,a=c.y-a.y;if(d||a){this._firstAroundPosition=c;for(c=0;c<this._stack.length;c++){var e=this._stack[c].wrapper.style;e.top=parseFloat(e.top)+a+"px";"auto"==e.right?e.left=parseFloat(e.left)+
d+"px":e.right=parseFloat(e.right)-d+"px"}}this._aroundMoveListener=setTimeout(m.hitch(this,"_repositionAll"),d||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,d=a.domNode;b||(b=c.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(d),d=d.style,d.display="",d.visibility="",d.position="",d.top="0px",a._popupWrapper=b,f.after(a,"destroy",t,!0),"ontouchend"in document&&q(b,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(c){var d=this._createWrapper(c);c=b.isBodyLtr(c.ownerDocument);var e={visibility:"hidden",top:"-9999px",display:""};e[c?"left":"right"]="-9999px";e[c?"right":"left"]="auto";a.set(d,e);return d},hide:function(b){var c=this._createWrapper(b);a.set(c,{display:"none",height:"auto",overflowY:"visible",border:""});b=b.domNode;"_originalStyle"in b&&(b.style.cssText=b._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(c){var f=this._stack,g=c.popup,h=g.domNode,s=c.orient||["below","below-alt","above","above-alt"],t=c.parent?c.parent.isLeftToRight():b.isBodyLtr(g.ownerDocument),D=c.around,F=c.around&&c.around.id?c.around.id+"_dropdown":"popup_"+this._idGen++;if(!c.doNotClose)for(;f.length&&(!c.parent||!e.isDescendant(c.parent.domNode,f[f.length-1].widget.domNode));)this.close(f[f.length-1].widget);
var H=this.moveOffScreen(g);g.startup&&!g._started&&g.startup();var L,N=b.position(h);if("maxHeight"in c&&-1!=c.maxHeight)L=c.maxHeight||Infinity;else{L=r.getEffectiveBox(this.ownerDocument);var M=D?b.position(D,!1):{y:c.y-(c.padding||0),h:2*(c.padding||0)};L=Math.floor(Math.max(M.y,L.h-(M.y+M.h)))}N.h>L&&(N=a.getComputedStyle(h),a.set(H,{overflowY:"scroll",height:L+"px",border:N.borderLeftWidth+" "+N.borderLeftStyle+" "+N.borderLeftColor}),h._originalStyle=h.style.cssText,h.style.border="none");
d.set(H,{id:F,style:{zIndex:this._beginZIndex+f.length},"class":"dijitPopup "+(g.baseClass||g["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:c.parent?c.parent.id:""});0==f.length&&D&&(this._firstAroundNode=D,this._firstAroundPosition=b.position(D,!0),this._aroundMoveListener=setTimeout(m.hitch(this,"_repositionAll"),50));k("config-bgIframe")&&!g.bgIframe&&(g.bgIframe=new p(H));F=g.orient?m.hitch(g,"orient"):null;s=D?n.around(H,D,s,t,F):n.at(H,c,"R"==s?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],
c.padding,F);H.style.visibility="visible";h.style.visibility="visible";h=[];h.push(q(H,"keydown",m.hitch(this,function(a){if(a.keyCode==l.ESCAPE&&c.onCancel)a.stopPropagation(),a.preventDefault(),c.onCancel();else if(a.keyCode==l.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));g.onCancel&&c.onCancel&&h.push(g.on("cancel",c.onCancel));h.push(g.on(g.onExecute?"execute":"change",m.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));
f.push({widget:g,wrapper:H,parent:c.parent,onExecute:c.onExecute,onCancel:c.onCancel,onClose:c.onClose,handlers:h});if(g.onOpen)g.onOpen(s);return s},close:function(a){for(var b=this._stack;a&&h.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),d=c.widget,e=c.onClose;d.bgIframe&&(d.bgIframe.destroy(),delete d.bgIframe);if(d.onClose)d.onClose();for(var f;f=c.handlers.pop();)f.remove();d&&d.domNode&&this.hide(d);e&&e()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),
this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return s.popup=new g})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(h,f,g,e){return h("dijit.DropDownMenu",e,{templateString:g,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(d){this._moveToPopup(d);d.stopPropagation();d.preventDefault()},_onLeftArrow:function(d){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();
else this.onCancel(!1);else d.stopPropagation(),d.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){return f("dijit._MenuBase",[q,r,p,n],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),
this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){d.toggle(this.domNode,"dijitMenuActive",a);d.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(a){var b=m.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var d=this,e="string"==typeof this.childSelector?this.childSelector:
c.hitch(this,"childSelector");this.own(a(this.containerNode,a.selector(e,b.enter),function(){d.onItemHover(m.byNode(this))}),a(this.containerNode,a.selector(e,b.leave),function(){d.onItemUnhover(m.byNode(this))}),a(this.containerNode,a.selector(e,l),function(a){d.onItemClick(m.byNode(this),a);a.stopPropagation()}),a(this.containerNode,a.selector(e,"focusin"),function(){d._onItemFocus(m.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==
d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},
onItemHover:function(a){this.activated?(this.set("selected",a),a.popup&&(!a.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==
a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&
(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(b,
d){if(b!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var e=b.popup;e.parentMenu=this;this.own(this._mouseoverHandle=a.once(e.domNode,"mouseover",c.hitch(this,"_onPopupHover")));var f=this;b._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){d&&f.focusChild(b);f._cleanUp()},onExecute:c.hitch(this,"_cleanUp",!0),onClose:function(){f._mouseoverHandle&&(f._mouseoverHandle.remove(),
delete f._mouseoverHandle)}},d);this.currentPopupItem=b}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(e.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&
this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(h,
f,g,e,d,c,b,a,k,l){return f("dijit._KeyNavContainer",[k,l,a],{connectKeyNavHandlers:function(a,b){var e=this._keyNavCodes={},f=c.hitch(this,"focusPrev"),k=c.hitch(this,"focusNext");h.forEach(a,function(a){e[a]=f});h.forEach(b,function(a){e[a]=k});e[d.HOME]=c.hitch(this,"focusFirstChild");e[d.END]=c.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){e.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);h.forEach(this.getChildren(),
c.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=
b.byNode(a))&&a.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(h,f,g,e,d,c,b,a){return f("dijit._KeyNavMixin",a,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);g.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var a=this._keyNavCodes={};a[e.HOME]=d.hitch(this,"focusFirstChild");a[e.END]=d.hitch(this,
"focusLastChild");a[this.isLeftToRight()?e.LEFT_ARROW:e.RIGHT_ARROW]=d.hitch(this,"_onLeftArrow");a[this.isLeftToRight()?e.RIGHT_ARROW:e.LEFT_ARROW]=d.hitch(this,"_onRightArrow");a[e.UP_ARROW]=d.hitch(this,"_onUpArrow");a[e.DOWN_ARROW]=d.hitch(this,"_onDownArrow")}var f=this,a="string"==typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(c(this.domNode,"keypress",d.hitch(this,"_onContainerKeypress")),c(this.domNode,"keydown",d.hitch(this,"_onContainerKeydown")),c(this.domNode,
"focus",d.hitch(this,"_onContainerFocus")),c(this.containerNode,c.selector(a,"focusin"),function(a){f._onChildFocus(b.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},
focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){g.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(a){g.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex",
"-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,b){var c=a.domNode,c=(a.label||(c.focusNode?
c.focusNode.label:"")||c.innerText||c.textContent||"").replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&c==b?-1:0},_onContainerKeydown:function(a){var b=this._keyNavCodes[a.keyCode];b?(b(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode==e.SPACE&&(this._searchTimer&&!a.ctrlKey&&!a.altKey&&!a.metaKey)&&(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))},_onContainerKeypress:function(a){a.charCode<=e.SPACE||(a.ctrlKey||
a.altKey||a.metaKey)||(a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase()))},_keyboardSearch:function(a,b){var c=null,e,f=0;d.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=b;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;e=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var d=this.focusedChild||
null;if(1==a||!d)if(d=this._getNextFocusableChild(d,1),!d)return;a=d;do{var k=this._keyboardSearchCompare(d,e);k&&0==f++&&(c=d);if(-1==k){f=-1;break}d=this._getNextFocusableChild(d,1)}while(d&&d!=a)})();this.onKeyboardSearch(c,a,e,f)},_onChildBlur:function(){},_getNextFocusableChild:function(a,b){var c=a;do{if(a)a=this._getNext(a,b);else if(a=this[0<b?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=c&&a.isFocusable())return a}while(a!=c);return null},_getFirst:function(){return null},_getLast:function(){return null},
_getNext:function(a,c){if(a)for(a=a.domNode;a;)if((a=a[0>c?"previousSibling":"nextSibling"])&&"getAttribute"in a){var d=b.byNode(a);if(d)return d}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){return h("dijit.MenuItem",[a,k,l,m],{templateString:q,baseClass:"dijitMenuItem",
label:"",_setLabelAttr:function(a){this._set("label",a);var b="",c,d=a;"object"===typeof d&&(d=d.label||d.value);"string"===typeof d&&(c=d.search(/{\S}/),0<=c?(b=d.charAt(c+1),a=d.substr(0,c),d=d.substr(c+3),c=a+b+d,a=a+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+d):c=d,this.domNode.setAttribute("aria-label",c+" "+this.accelKey));this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",
disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);g.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&g.set(this.accelKeyNode,"id",this.id+"_accel");f.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==c("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_setSelected:function(a){e.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){d.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},setDisabled:function(a){d.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,g.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(h,f,g,e,d,c){return h("dijit.MenuSeparator",[g,e,d],{templateString:c,buildRendering:function(){this.inherited(arguments);f.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"MW/rtc/plugins/contextmenu/ContextMenuGenerator":function(){define(["dojo/_base/declare"],function(h){return h(null,{createContextMenu:function(f,g){throw Error("Unimplemented API: createContextMenu");},willOpen:function(){},onOpen:function(){},onClose:function(){}})})},"MW/rtc/plugins/contextmenu/ContextMenuProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider"],function(h,f){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.contextmenu.generator","rtc.contextmenu.model","rtc.scrollpane"]}},createInstance:function(f,e,d){return f.createContextMenu(d,e)||{}},destroyInstance:function(f){f.destroy&&f.destroy()}})})},"MW/rtc/plugins/contextmenu/DocumentContextMenuModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/contextmenu/DocumentContextMenuModel"],
function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/contextmenu/DocumentContextMenuModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/contextmenu/ContextMenuModel"],function(h,f,g,e){return h(e,{_GROUP_ORDER:{Autofix:0,ModeInteraction:1,Selections:2,copyPaste:3,Default:4,Sections:5},constructor:function(d){this._groupActionsMap=
{};this._invalidGroupList=[];this._actionService=d;this._createDefaultContextMap(this._actionService);this.own(g.after(this._actionService,"addAction",f.hitch(this,"_addAction"),!0));this.own(g.after(this._actionService,"onActionChange",f.hitch(this,"_handleOnActionChange"),!0));this.own(g.after(this._actionService,"removeAction",f.hitch(this,"_removeAction"),!0))},getGroups:function(){var d=this._getValidGroupActionsMap(),d=Object.keys(d);d.sort(f.hitch(this,function(b,a){return(b in this._GROUP_ORDER?
this._GROUP_ORDER[b]:1E3)-(a in this._GROUP_ORDER?this._GROUP_ORDER[a]:1E3)}));var c=[];d.forEach(f.hitch(this,function(b){0<this.getActions(b).length&&c.push(b)}));return c},getActions:function(d){d=this._getValidGroupActionsMap()[d];if(!d||d===[])return[];var c=[];d.forEach(function(b){(b=this._getActionInfo(b))&&c.push(b)},this);return c},_getValidGroupActionsMap:function(){var d=f.clone(this._groupActionsMap);this._invalidGroupList.forEach(function(c){delete d[c]});return d},_addAction:function(d){d.contextMenuGroup&&
(this._groupActionsMap[d.contextMenuGroup]||(this._groupActionsMap[d.contextMenuGroup]=[]),this._groupActionsMap[d.contextMenuGroup].push(d.id))},_removeAction:function(d){for(var c in this._groupActionsMap){var b=this._groupActionsMap[c];if(b){var a=b.indexOf(d);-1<a&&b.splice(a,1);0===b.length?delete this._groupActionsMap[c]:this._groupActionsMap[c]=b}}},_handleOnActionChange:function(d){"contextMenuGroup"===d.key&&(d.oldValue&&this._removeAction(d.id),d.newValue&&this._addAction(this._actionService.getAction(d.id)))},
_createDefaultContextMap:function(d){d.getAllActions().forEach(this._addAction,this)},_getActionInfo:function(d){var c=this._actionService.getAction(d),b=null;if(c){var a=c.text||c.description;if(void 0===a)return b;b={id:d,label:a,shortcut:c.shortcut,callback:f.hitch(this._actionService,"executeAction",d,{}),enabled:c.enabled}}return b},hideGroup:function(d){this._invalidGroupList.push(d)}})})},"MW/rtc/plugins/cursorgripper/CursorGripperProvider":function(){define(["dojo/_base/declare","dojo/has",
"MW/rtc/core/provider/PluginProvider","./CursorGripper"],function(h,f,g,e){return h([g],{requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.cursor","rtc.keyhandler","rtc.view.movehiddenkeycapture"]}},isApplicable:function(){return f("ios")},createInstance:function(d,c,b,a){return new e(d,c,b,a)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/cursorgripper/CursorGripper":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/query dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/aspect dojo/on dojo/touch mw-log/Log ./view/CursorGripperView".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h([],{DEFAULT_RTC_LINE_HEIGHT:18,HIDE_GRIPPER_TIMEOUT:5E3,constructor:function(b,c,d,e){this._view=b;this._keyHandler=d;this._cursor=c;this._moveHiddenKeyCapture=e;this._cursorGripperView=new q(b,c);this._cursorMover=this._cursorGripperView.getCursorMover();this._anchorMover=this._cursorGripperView.getAnchorMover();this._listeners=[];this._addMoverListeners(this._cursorMover);this._addMoverListeners(this._anchorMover);this._listeners.push(k(this._view.getDomtarget(),
l.release,f.hitch(this,"_showMovers")));this._listeners.push(a.after(this._keyHandler,"onKeyPress",f.hitch(this,"_hideMovers")));this._listeners.push(a.after(this._cursor,"hide",f.hitch(this,"_hideMovers")));this._listeners.push(a.after(this._cursor,"onChange",f.hitch(this,function(){this._moveHiddenKeyCapture.moveHiddenKeyCaptureToCaret(!0);this._cursor.hasSelection()&&!this._cursor.isHidden()&&this._cursorGripperView.showMovers()})));this._listeners.push(a.after(this._view,"onLayoutChange",f.hitch(this,
function(a){this._cursorGripperView.updateLayerSizes()})));this._hideMovers();this._startListeningForRtcCursorChanges()},destroy:function(){this._listeners.forEach(function(a){a.remove()});this._stopListeningForRtcCursorChanges();this._cursorGripperView.destroy()},_addMoverListeners:function(b){var c=this;this._listeners.push(a.after(b,"onMoveStart",function(){c._stopListeningForRtcCursorChanges();c._cursorGripperView.updateLayerSizes()}));this._listeners.push(a.after(b,"onMoveStop",function(){c._startListeningForRtcCursorChanges();
c._showMovers();document.activeElement!==c._keyHandler.keyCapture&&c._keyHandler.focus()}));this._listeners.push(a.after(b,"onMove",function(){c._updateRtcCursorBasedOnMovers();c._showMovers()}));this._listeners.push(k(b.node,l.press,this._stopEvent))},_stopEvent:function(a){a.stopPropagation();a.preventDefault()},_showMovers:function(){var a=this;this._cursorHiderTimeout&&window.clearTimeout(this._cursorHiderTimeout);this._cursorHiderTimeout=window.setTimeout(function(){a._cursorHiderTimeout=null;
a._cursor.hasSelection()||a._cursorGripperView.hideMovers()},this.HIDE_GRIPPER_TIMEOUT);a._updateMoversBasedOnRtcCursor();a._cursorGripperView.showMovers()},_hideMovers:function(){this._cursorHiderTimeout&&window.clearTimeout(this._cursorHiderTimeout);this._cursorHiderTimeout=null;this._cursorGripperView.hideMovers()},_startListeningForRtcCursorChanges:function(){this._stopListeningForRtcCursorChanges();this._cursorListener=a.after(this._cursor,"onChange",f.hitch(this,"_updateMoversBasedOnRtcCursor"));
this._updateMoversBasedOnRtcCursor()},_stopListeningForRtcCursorChanges:function(){this._cursorListener&&this._cursorListener.remove()},_updateMoversBasedOnRtcCursor:function(){var a,b,c;try{this._cursor.hasSelection()?(c=this._cursor.getCoordinatesOfSelection(),a=c.startCoords,b=c.endCoords,a.x-=this._anchorMover.node.offsetWidth/2,b.x-=this._cursorMover.node.offsetWidth/2):(b=this._cursor.getCursorCoordinates(),b.x-=this._cursorMover.node.offsetWidth/2,a=b),this._anchorMover.node.style.left=a.x+
"px",this._anchorMover.node.style.top=a.y+this._getEffectiveLineHeight(a)+"px",this._cursorMover.node.style.left=b.x+"px",this._cursorMover.node.style.top=b.y+this._getEffectiveLineHeight(b)+"px"}catch(d){}},_updateRtcCursorBasedOnMovers:function(){var a,b;a={x:this._anchorMover.node.offsetLeft,y:this._anchorMover.node.offsetTop};b={x:this._cursorMover.node.offsetLeft,y:this._cursorMover.node.offsetTop};a.x+=this._anchorMover.node.offsetWidth/2;a.y-=this._getEffectiveLineHeight(a)/3;b.x+=this._cursorMover.node.offsetWidth/
2;b.y-=this._getEffectiveLineHeight(b)/3;this._cursor.setSelectionFromCoordinates({startCoords:a,endCoords:b})},_getEffectiveLineHeight:function(a){a=this._view.getPositionFromCoordinate(a);return(a=this._view.getCoordinateForPosition(a))?a.height:this.DEFAULT_RTC_LINE_HEIGHT}})})},"MW/rtc/plugins/cursorgripper/view/CursorGripperView":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/aspect ./NoAutoscrollingMover ./RtcConstrainedMoveable".split(" "),
function(h,f,g,e,d,c,b,a){return h(null,{STYLES:{LAYER:"cursorGripperLayer",GRIPPER:"cursorGripper"},constructor:function(a,b){this._view=a;this._cursor=b;this._layer=g.create("div",{"class":this.STYLES.LAYER});a.addLayer(this._layer);this._setUpMovers()},destroy:function(){this._cursorMover.destroy();this._anchorMover.destroy()},_setUpMovers:function(){this._cursorDragger=g.create("div",{"class":this.STYLES.GRIPPER},this._layer);this._anchorDragger=g.create("div",{"class":this.STYLES.GRIPPER},this._layer);
var c={mover:b};this._cursorMover=new a(this._cursorDragger,c);this._anchorMover=new a(this._anchorDragger,c)},getCursorMover:function(){return this._cursorMover},getAnchorMover:function(){return this._anchorMover},hideMovers:function(){this._layer.style.visibility="hidden"},showMovers:function(){this._layer.style.visibility="visible"},updateLayerSizes:function(){var a=this._view.getDocumentDimension();d.setMarginBox(this._layer,{h:a.height,w:a.width})}})})},"MW/rtc/plugins/cursorgripper/view/NoAutoscrollingMover":function(){define(["dojo/_base/declare",
"dojo/dnd/Mover"],function(h,f){return h([f],{onMouseMove:function(f){var e=this.marginBox;this.host.onMove(this,{l:e.l+f.pageX,t:e.t+f.pageY},f);f.preventDefault();f.stopPropagation()}})})},"MW/rtc/plugins/cursorgripper/view/RtcConstrainedMoveable":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/dom-style","dojo/dnd/move"],function(h,f,g,e){return h(e.constrainedMoveable,{area:"content",constructor:function(d,c){var b=c&&c.area;this.constraints=function(){var a=this.node.parentNode,
c=g.getComputedStyle(a),d=f.getMarginBox(a,c);if("margin"==b)return d;var e=f.getMarginExtents(a,c);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;if("border"==b)return d;e=f.getBorderExtents(a,c);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;if("padding"==b)return d;e=f.getPadExtents(a,c);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;d.l-=this.node.offsetWidth;d.w+=this.node.offsetWidth;return d}}})})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(h,
f,g,e,d,c){e=h("dojo.dnd.move.constrainedMoveable",c,{constraints:function(){},within:!1,constructor:function(b,a){a||(a={});this.constraints=a.constraints;this.within=a.within},onFirstMove:function(b){var a=this.constraintBox=this.constraints.call(this,b);a.r=a.l+a.w;a.b=a.t+a.h;this.within&&(b=f.getMarginSize(b.node),a.r-=b.w,a.b-=b.h)},onMove:function(b,a){var c=this.constraintBox,d=b.node.style;this.onMoving(b,a);a.l=a.l<c.l?c.l:c.r<a.l?c.r:a.l;a.t=a.t<c.t?c.t:c.b<a.t?c.b:a.t;d.left=a.l+"px";
d.top=a.t+"px";this.onMoved(b,a)}});d=h("dojo.dnd.move.boxConstrainedMoveable",e,{box:{},constructor:function(b,a){var c=a&&a.box;this.constraints=function(){return c}}});h=h("dojo.dnd.move.parentConstrainedMoveable",e,{area:"content",constructor:function(b,a){var c=a&&a.area;this.constraints=function(){var a=this.node.parentNode,b=g.getComputedStyle(a),d=f.getMarginBox(a,b);if("margin"==c)return d;var e=f.getMarginExtents(a,b);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;if("border"==c)return d;e=f.getBorderExtents(a,
b);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;if("padding"==c)return d;e=f.getPadExtents(a,b);d.l+=e.l;d.t+=e.t;d.w-=e.w;d.h-=e.h;return d}}});return{constrainedMoveable:e,boxConstrainedMoveable:d,parentConstrainedMoveable:h}})},"MW/rtc/plugins/cutcopypaste/CutCopyPasteProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/CutCopyPaste"],function(h,f,g,e,d){return h(e,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.cursor rtc.document rtc.actionservice rtc.clipboard rtc.cutcopypaste.converter rtc.keyhandler rtc.cursorcontroller".split(" ")}},
createInstance:function(c,b,a,e,f,g,h){return new d(c,b,a,e,f,g,h)},destroyInstance:function(c){c.dispose()}})})},"MW/rtc/plugins/cutcopypaste/CutCopyPaste":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/sniff MW/rtc/model/DocumentConstants MW/rtc/plugins/cutcopypaste/CutCopyPasteService MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),function(h,f,g,e,d,c,b,a,k){return h(null,{constructor:function(b,c,d,e,h,r,s){this._cursor=b;this._document=
c;this._actionService=d;this._connections=[];this._clipboard=e;this._connections=[];this._converter=h;this._keyHandler=r;this._cursorController=s;"function"===typeof this._clipboard.getCopyPasteHandlers?(b=this._clipboard.getCopyPasteHandlers(),this._keyHandler.enableBrowserCopyPaste(b)):(this._keyHandler.listenTo("copy",this._preventDefault),this._keyHandler.listenTo("cut",this._preventDefault),this._keyHandler.listenTo("paste",this._preventDefault));b=[{id:a.CUT_COPY_PASTE.CUT_ACTION,enabled:!0,
key:"ctrl_x",platformKey:{mac:"meta_x"},contextMenuGroup:"copyPaste",text:k.cutLabel,callback:f.hitch(this,"_cut")},{id:a.CUT_COPY_PASTE.COPY_ACTION,enabled:!0,key:"ctrl_c",platformKey:{mac:"meta_c"},contextMenuGroup:"copyPaste",text:k.copyLabel,callback:f.hitch(this,"_copy")},{id:a.CUT_COPY_PASTE.PASTE_ACTION,enabled:!0,contextMenuGroup:"copyPaste",key:"ctrl_v",platformKey:{mac:"meta_v"},text:k.pasteLabel,callback:f.hitch(this,"_paste")}];this._actionService.loadActions(b);this._connections.push(g.after(this._cursor,
"onChange",f.hitch(this,this._updateActions)));this._connections.push(g.after(this._cursorController,"onUpdate",f.hitch(this,this._updateActions)));this._connections.push(g.after(this._document,"onChange",f.hitch(this,this._updateActionsOnDocumentChange),!0));this._connections.push(g.after(this._clipboard,"onClipboardDataChange",f.hitch(this,this._updateActions)));this._updateActions();this._addOtherKeyBindings()},_preventDefault:function(a){a.preventDefault()},_copy:function(){if(this._actionService.getAction(a.CUT_COPY_PASTE.COPY_ACTION).enabled)return b.copyFromDocument(this._clipboard,
this._converter,this._cursorController),!0},_cut:function(){if(this._actionService.getAction(a.CUT_COPY_PASTE.CUT_ACTION).enabled)return b.cutFromDocument(this._clipboard,this._cursor,this._converter,this._cursorController,this._document),!0},_paste:function(){var b;if(this._actionService.getAction(a.CUT_COPY_PASTE.PASTE_ACTION).enabled)return b=this._converter.getRegisteredMimeTypes(),b=this._clipboard.getClipboardData(b),b.then(f.hitch(this,function(a){var b=function(b){return a[b]};this._cursor.hasSelection()?
this._converter.insertContentInDocumentAtSelection(this._cursor.getSelection(),b):this._converter.insertContentInDocumentAtPosition(this._cursor.position,b)}),function(a){throw Error("[Unsuccessful Paste] "+a);}),!0},_updateActionsOnDocumentChange:function(a){a&&f.isArray(a)&&a.some(function(a){if(a.type===c.READONLY_STATE_CHANGE_EVENT)return this._updateActions(),!0},this)},_updateActions:function(){var b=!this._isClipboardEmpty(),c=!this._document.isReadOnly()&&!this._cursor.isCursorReadOnly(),
d=this._cursorController.hasSelection();this._actionService.updateAction(a.CUT_COPY_PASTE.PASTE_ACTION,{enabled:b&&c});this._actionService.updateAction(a.CUT_COPY_PASTE.CUT_ACTION,{enabled:c&&d});this._actionService.updateAction(a.CUT_COPY_PASTE.COPY_ACTION,{enabled:d})},_isClipboardEmpty:function(){return 0===this._clipboard.getAllFlavors().length},_addOtherKeyBindings:function(){d("mac")||this._keyHandler.addBindings([{key:"shift_delete",action:a.CUT_COPY_PASTE.CUT_ACTION},{key:"ctrl_insert",action:a.CUT_COPY_PASTE.COPY_ACTION},
{key:"shift_insert",action:a.CUT_COPY_PASTE.PASTE_ACTION}])},dispose:function(){this._connections.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/cutcopypaste/CutCopyPasteService":function(){define(["dojo/_base/lang","dojo/Deferred","mw-log/Log","MW/rtc/plugins/cutcopypaste/MIMETypes"],function(h,f,g,e){return{copyFromDocument:function(d,c,b){if(!b.hasSelection())return!1;c=c.convertToClipboard(b.getSelection());d=d.setClipboardData(c);d.then(function(){},function(){g.assert(!1,"[Unsuccessful Copy] The data could not be copied successfully")});
return d},copyContent:function(d,c){var b=[];b.push({flavor:e.TEXT,content:c.text});b.push({flavor:e.COPY_FOR_COMMAND_WINDOW,content:c.text});c.serializedObject&&b.push({flavor:e.MATLAB_RICHTEXT,content:c.serializedObject});c.html&&b.push({flavor:e.HTML,content:c.html});c.imageList&&b.push({flavor:e.IMAGE_LIST,content:c.imageList});var b=d.setClipboardData(b),a=new f;b.then(h.hitch(this,function(){a.resolve()}),function(){g.assert(!1,"[Unsuccessful Copy] The data could not be copied successfully");
a.reject()});return a},cutFromDocument:function(d,c,b,a,e){if(!this._prepareCursorsForEditing(a,e))return!1;this.copyFromDocument(d,b,a).then(h.hitch(this,function(){a.hasSelection()&&!c.getNode().isReadOnly()&&(!c.anchor.getNode()||!c.anchor.getNode().isReadOnly())&&e.deleteTextAtCurrentPosition()}),function(){g.assert(!1,"[Unsuccessful Cut] Failure in Cut due to unsuccessful copy")})},_prepareCursorsForEditing:function(d,c){var b=!1;d.getCursors().forEach(function(a){b=c.prepareCursorSelectionForEditing(a)||
b});return b}}})},"MW/rtc/plugins/cutcopypaste/ClipboardConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/ClipboardConverter"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.cutcopypaste.mimeconverters"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/cutcopypaste/ClipboardConverter":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/has mw-log/Log MW/rtc/model/NodeUtilities".split(" "),
function(h,f,g,e,d,c){return f(null,{constructor:function(b){this._registeredNodeHandlers=[];this._registeredPasteHandlers=[];this._registeredMimeHandlers=[];b.forEach(g.hitch(this,function(a){this.registerMimeHandler(a.getType(),g.hitch(a,a.convertFromMimeData),a.priority())}))},registerMimeHandler:function(b,a,c){d.assert(0<=c&&100>=c,"Priority must be in the range 0..100.");this._registeredMimeHandlers.push({handler:a,mimeType:b,priority:c});this._registeredMimeHandlers=this._registeredMimeHandlers.sort(function(a,
b){return b.priority-a.priority})},getRegisteredMimeTypes:function(){var b=[];this._registeredMimeHandlers.forEach(function(a){"Unicode String"!==a.mimeType&&b.push(a.mimeType)});return b},registerNodeConverter:function(b,a){this._registeredNodeHandlers.push({nodeClass:b,handler:a})},registerPasteHandler:function(b,a){this._registeredPasteHandlers.push({nodeClass:b,handler:a})},insertContentInDocumentAtPosition:function(b,a){var d=c.getLineage(b.getNode());return this._doInsert(d,null,b,a)},insertContentInDocumentAtSelection:function(b,
a){var d=c.getCommonAncestors(b.getStartPosition().getNode(),b.getEndPosition().getNode());return this._doInsert(d,b,null,a)},_doInsert:function(b,a,c,d){return this._getPasteHandlersHelper(b).some(function(b){return b.call(null,a,c,d)},this)},_getPasteHandlersHelper:function(b){for(var a=[],c=b.length-1;0<=c;c-=1)for(var d=b[c];d;)a=this._getPasteHandlersForNode(d,a),d=d.parent;return a},_getPasteHandlersForNode:function(b,a){this._registeredPasteHandlers.forEach(function(c){b.isInstanceOf(c.nodeClass)&&
0>a.indexOf(c.handler)&&a.push(c.handler)});return a},convertToClipboard:function(b){Array.isArray(b)||(b=[b]);var a={};b.forEach(function(b){var c=this._getContentMapForSelection(b);Object.keys(c).forEach(function(b){a[b]=this._mergeFlavorContent(b,a[b],c[b])},this)},this);return this._convertContentMapToMIMEData(a)},_getContentMapForSelection:function(b){return c.getCommonAncestors(b.getStartPosition().getNode(),b.getEndPosition().getNode()).reduce(g.hitch(this,"_collectContentForNode",b),{})},
_mergeFlavorContent:function(b,a,c){if(!a)return c;"text/plain"===b&&(a+="\n"+c);return a},_convertContentMapToMIMEData:function(b){return h.map(Object.keys(b),function(a){return{flavor:a,content:b[a]}})},_collectContentForNode:function(b,a,c){return this._getConverterForNode(c).reduce(g.hitch(this,function(a,c){var d=c.call(null,b);return this._mergeMIMEDataIntoMap(d,a)}),a)},_mergeMIMEDataIntoMap:function(b,a){b.forEach(function(b){"undefined"!==typeof b.content&&!this._isHtmlOnMac(b.flavor)?a[b.flavor]=
b.content:delete a[b.flavor]},this);return a},_isHtmlOnMac:function(b){return e("mac")&&-1!==b.indexOf("html")},_getConverterForNode:function(b){var a=[];this._registeredNodeHandlers.forEach(function(c){b.isInstanceOf(c.nodeClass)&&a.push(c.handler)});return a},convertContentFromSource:function(b){var a;this._registeredMimeHandlers.some(function(c){var d=b(c.mimeType);if(d)return a=c.handler(d)});return a}})})},"MW/rtc/plugins/cutcopypaste/DefaultMIMEConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/DefaultMIMEConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter","rtc.document"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/cutcopypaste/DefaultMIMEConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/inner/RootNode"],function(h,f,g){return h(null,{constructor:function(e,d){this._converter=e;this._document=d;e.registerPasteHandler(g,
f.hitch(this,"_convertAndPaste"))},_convertAndPaste:function(e,d,c){(e=this._converter.convertContentFromSource(c))&&this._document.insertContentAtCurrentPosition(e);return!0}})})},"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cursor"]}},createInstance:function(e){return new g(e)}})})},
"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/MimeConverter"],function(h,f,g,e){return h(e,{constructor:function(d){this._cursor=d},getType:function(){return g.TEXT},convertFromMimeData:function(d){return f.textToContent(d,this._cursor.getNode())},priority:function(){return 10}})})},"MW/rtc/plugins/cutcopypaste/mime/MimeConverter":function(){define(["dojo/_base/declare"],
function(h){return h(null,{getType:function(){throw Error("Unimplemented API: getType");},convertFromMimeData:function(f){throw Error("Unimplemented API: convert");},priority:function(){throw Error("Unimplemented API: priority");}})})},"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cursor"]}},
createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeInCodeConverter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter"],function(h,f,g){return h(g,{constructor:function(e){this._cursor=e},convertFromMimeData:function(e){var d=this._cursor.selectionInfo();return f.isCodeRange(d.startNode,d.endNode)?this.inherited(arguments):null},priority:function(){return 60}})})},"MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cursor"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/cutcopypaste/mime/UnicodeStringMimeConverter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/PlainTextMimeConverter"],function(h,f,g,e){return h(e,{getType:function(){return g.UNICODE_STRING},
priority:function(){return 11}})})},"MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverter"],function(h,f,g,e){return h(g,{isApplicable:function(d){return f.isMatlabCodeFileOrBuffer(d)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.cursor"]}},createInstance:function(d){return new e(d)}})})},
"MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities":function(){define(["MW/rtc/datamodel/InMemoryBackingStore","MW/rtc/datamodel/FileBackingStoreUtilities"],function(h,f){return{isMatlabCodeFileOrBuffer:function(g){return g instanceof h||f.isPlainCodeFile(g)}}})},"MW/rtc/plugins/cutcopypaste/mime/PromptlessTextMimeConverter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/MimeConverter"],
function(h,f,g,e){return h(e,{constructor:function(d){this._cursor=d},getType:function(){return g.PROMPTLESS_STRING},convertFromMimeData:function(d){return f.textToContent(d,this._cursor.getNode())},priority:function(){return 90}})})},"MW/rtc/plugins/cutcopypaste/PlainTextMimeGeneratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/PlainTextMimeGenerator"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter",
"rtc.cursor"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/cutcopypaste/PlainTextMimeGenerator":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/PlainTextGeneratorVisitor MW/rtc/model/SelectionTreeWalker MW/rtc/nodes/inner/RootNode MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),function(h,f,g,e,d,c){return h(null,{constructor:function(b,a){this._cursor=a;b.registerNodeConverter(d,f.hitch(this,"_convertToText"))},_convertToText:function(b){var a=new g;
(new e(a)).traverseSelection(b);b=a.getText();return[{flavor:c.TEXT,content:b},{flavor:c.COPY_FOR_COMMAND_WINDOW,content:b}]}})})},"MW/rtc/model/SelectionTreeWalker":function(){define(["dojo/_base/declare","MW/rtc/model/TreeWalker"],function(h,f){return h(f,{traverseSelection:function(f){this._range=f;this._buildCommonAncestors();if(f.fileEndSelected()){for(var e=this._commonAncestors[this._commonAncestors.length-1];e&&!e.isRootNode()&&!e.isRootContainer();)this._commonAncestors.pop(),e=this._commonAncestors[this._commonAncestors.length-
1];e.isRootNode()||this._commonAncestors.pop()}this._doTreeWalk();f.fileEndSelected()&&(f=this._range.getEndPosition().getNode().rootContainer(),f.childrenAreContainers||(this._visitor.traverseSibling(f),this._enterNode(f),this._leaveNode(f)))}})})},"MW/rtc/plugins/cutcopypaste/HTMLGeneratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/HTMLGenerator"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter",
"rtc.clipboardtempdirpath","rtc.internaldocument"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/cutcopypaste/HTMLGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/inner/RootNode","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/view/exporters/HTMLWriter"],function(h,f,g,e,d){return h(null,{constructor:function(c,b,a){this._clipboardTempDirPath=b;this._internalDocument=a;c.registerNodeConverter(g,f.hitch(this,"_convertToHTML"))},
_convertToHTML:function(c){var b;this._htmlWriter||(this._htmlWriter=new d);b=this._write(c);c=b.htmlStr;b=b.imageList;var a=[];c&&(a.push({flavor:e.HTML,content:c}),b&&b.length&&a.push({flavor:e.IMAGE_LIST,content:b}));return a},_write:function(c){var b={};this._clipboardTempDirPath?(c=this._htmlWriter.writeWithImageList(this._internalDocument,c,this._clipboardTempDirPath),b.htmlStr=c.html,b.imageList=c.images):b.htmlStr=this._htmlWriter.write(this._internalDocument,c);return b}})})},"MW/rtc/plugins/view/exporters/HTMLWriter":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities dojo/text!MW/rtc/plugins/view/exporters/sectionrules.css MW/rtc/model/io/MDocumentWriter MW/rtc/plugins/view/exporters/ViewBaseWriter MW/rtc/plugins/view/exporters/HTMLOutputUtils mw-html-utils/HtmlUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return g(l,{DOCTYPE:'\x3c!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"\x3e\n',LOCAL_FILE_PREFIX:"file:///",constructor:function(a){this._tagStack=[]},_reset:function(){this._styles={};this._numOfStyles=0;this._hasOutput=!1;this._pageTitle=null;this.inherited(arguments)},writeWithImageList:function(a,b,c,d){this._imageList=[];this._imageFileDir=c;var e;try{e=this.write(a,b,d)}finally{this._imageFileDir=null}return{html:e,images:this._imageList}},_write:function(){this._writeBody();
return this._writeOpening()+this._writeMain()+this._writeClosing()},_writeMain:function(){var a=this._writeContent();"clipboard"!==this._target&&(a+=this._writeCode());return a.replace(/(\r\n|\n|\r)/gm,"\x3cbr\x3e")},_writeContent:function(){return'\x3cdiv class \x3d "content"\x3e'+this._body+"\x3c/div\x3e"},_writeCode:function(){var a="",b=k.write(this._internalDocument);b&&(a+="\n\x3c!-- \n##### SOURCE BEGIN #####\n",a+=b.replace(/--/g,"REPLACE_WITH_DASH_DASH"),a+="\n##### SOURCE END #####\n",a+=
"--\x3e");return a},_writeOpening:function(){return this.DOCTYPE+"\x3chtml\x3e"+this._writeHeader()+"\x3cbody\x3e"},_writeClosing:function(){return"\x3c/body\x3e\x3c/html\x3e"},_writeHeader:function(){var a;a='\x3chead\x3e\x3cmeta http-equiv\x3d"Content-Type" content\x3d"text/html; charset\x3dutf-8"\x3e\x3cmeta name\x3d"generator" content\x3d"MATLAB R2018a"\x3e';a+='\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dedge,IE\x3d9,chrome\x3d1"\x3e';"clipboard"!==this._target&&(a+="\x3ctitle\x3e",
a+=this._pageTitle||"Untitled",a+="\x3c/title\x3e");a+=this._writeStyles();return a+="\x3c/head\x3e"},_writeStyles:function(){var b,c,e,k,g,h;h='\x3cstyle type\x3d"text/css"\x3e\n* {margin: 0; padding: 0;}\n';b=d.getComputedStyle(this._internalDocument.root.box);c=f.filter(this._inheritedStyles,function(){return!0});e="";for(k=k=0;k<c.length;k+=1)e+=c[k]+": "+b[c[k]]+"; ";h=h+("body {"+e+"}\n")+"h1, h2 {font-weight: normal;}\n";"clipboard"!==this._target&&(h+=".content { padding: 30px; }\n",h+="\n");
for(g in this._styles)this._styles.hasOwnProperty(g)&&(h+="."+g+" { "+this._styles[g]+" }\n");h+="\n";h+=a.replace(/\n/g,"").replace(/}/g,"}\n").replace(/.rtePane /g,"");this._hasOutput&&(h+=m.writeOutputStyles());return h+="\x3c/style\x3e"},_getStyleClass:function(a){for(var b=d.getComputedStyle(a),c=d.getComputedStyle(a.parentNode),k=f.filter(this._inheritedStyles,function(a){return b[a]!==c[a]}),g="",h=0,l,h=0;h<k.length;h+=1)l=b[k[h]],"text-decoration"===k[h]&&(l=-1<l.indexOf("underline")?"underline":
"none"),g+=k[h]+": "+l+"; ";if("clipboard"===this._target){b.marginLeft&&(k=parseInt(b.marginLeft,10),0<k&&4!==k?g+="margin-left:"+b.marginLeft+"; ":e.contains(a,"lineNode")&&(g+="margin-left: 1em; "));for(h=1;h<this._nonInheritedStyles.length;h+=1)0<parseInt(b[this._nonInheritedStyles[h]],10)&&(g+=this._nonInheritedStyles[h]+": "+b[this._nonInheritedStyles[h]]+"; ")}else for(h=0;h<this._nonInheritedStyles.length;h+=1)g+=this._nonInheritedStyles[h]+": "+b[this._nonInheritedStyles[h]]+"; ";var m,q;
for(q in this._styles)this._styles[q]===g&&(m=q);m||(m="S"+this._numOfStyles,this._numOfStyles+=1,this._styles[m]=g);return m},_openTag:function(a,b,c){this._body+="\x3c"+a+(c||"")+"\x3e";this._tagStack.unshift({tag:a,node:b})},_startNodeElement:function(a){var b=this._getStyleClass(a),d="";if(e.contains(a,"SectionBlock")||e.contains(a,"CodeBlock")||e.contains(a,"inlineWrapper"))return this._openTag("div",a," class \x3d '"+a.className+"'"),!1;e.contains(a,"lineNode")&&"clipboard"!==this._target&&
(d+=" lineNode",e.contains(a,"sectionStart")&&(d+=" sectionStart"),e.contains(a,"sectionEnd")&&(d+=" sectionEnd"));b=' class \x3d "'+b+d+'"';if(e.contains(a,"outputParagraph"))return this._hasOutput=!0,a=m.processOutput(a,this._embeddedOutputsView),this._saveImagesToDisk()&&(a=c.convertDataURIsInNode(a,this._imageFileDir,this._imageList)),this._body+=a.outerHTML,!0;if(e.contains(a,"heading-1"))this._pageTitle||(this._pageTitle=this._getNodeText(a)),this._openTag("h1",a,b);else if(e.contains(a,"heading-2"))this._openTag("h2",
a,b);else{if(e.contains(a,"textBox"))return this._openTag("span",a,b),this._writeTextNode(a),!0;if(e.contains(a,"equationNode"))return this._body+=this._writeEquationNode(a),!0;if(e.contains(a,"liveControlOuterNode"))return this._body+=this._writeLiveControlNode(a),!0;if("div"===a.localName)this._openTag("div",a,b);else if("a"===a.localName)this._openTag("a",a,' href \x3d "'+this._normalizeUrl(q.escapeHtml(a.href))+'"');else if("img"===a.localName)if(b=this._processDataURI(a.src))this._openTag("img",
a,' src\x3d"'+b+'" width\x3d"'+a.clientWidth+'" height\x3d"'+a.clientHeight+'"');else return this._body+=a.outerHTML,!0;else this._openTag(a.localName,a,b)}return!1},_endNodeElement:function(a){this._tagStack.length&&this._tagStack[0].node===a&&(this._body+="\x3c/"+this._tagStack[0].tag+"\x3e",this._tagStack.shift())},_writeChildNodeForTextNode:function(a,b){var c=this._getAttributes(b);a=a.replace(/\&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");this._body+="\x3cspan"+c+"\x3e"+a+
"\x3c/span\x3e"},_getAttributes:function(a){var b=this._getStyleClass(a);a=a.parentElement&&a.parentElement.rteNode?a.parentElement.rteNode.rootContainer():null;var c="";a&&a.anchorId&&(c=' id\x3d"'+a.anchorId+'" ');return' class\x3d"'+b+'"'+c},_writeEquationNode:function(a){a=b.exportDomnodeToImageURL(a,2);if(a.simpleEquation)return b.simpleEquationToHTML(a.simpleEquation);var c=this._processDataURI(a.dataURL);c||(c=a.dataURL);a='\x3cspan style\x3d"vertical-align:'+Math.round(a.verticalAlign)+'px"\x3e\x3cimg src\x3d"'+
c+'" width\x3d"'+a.width/2+'" height\x3d"'+a.height/2+'" /\x3e';return a+"\x3c/span\x3e"},_writeLiveControlNode:function(a){return a.getElementsByClassName("liveControlTextView")[0].innerHTML},_saveImagesToDisk:function(){return this._imageFileDir&&this._imageList},_processDataURI:function(a){if(this._saveImagesToDisk())return c.pushImageAndGetPathFromURI(a,this._imageFileDir,this._imageList)},_normalizeUrl:function(a){0===a.indexOf("internal:")&&(a=a.replace("internal:","#"));return a.replace(/"/g,
"\x26quot;")}})})},"MW/rtc/misc/ImageURIUtilities":function(){define(["dojo/query","dojo/has","mw-log/Log"],function(h,f,g){return{_IMAGEFILE_PREFIX:"image",splitImageDataURI:function(e){if((e=/data:image\/(\w+);base64,(.*)/.exec(e))&&3===e.length)return{format:e[1],data:e[2]}},pushImageAndGetPathFromURI:function(e,d,c){if(e=this.splitImageDataURI(e))return d=d+"/"+this._IMAGEFILE_PREFIX+Date.now()+c.length+"."+e.format,c.push({path:d,data:e.data}),"file:///"+d},convertDataURIsInNode:function(e,d,
c){var b=e,a=h("img",e);0<a.length&&(b=e.cloneNode(!0),a=h("img",b),a.forEach(function(a){var b=this.pushImageAndGetPathFromURI(a.src,d,c);b&&a.setAttribute("src",b)},this));return b},getHexBinaryFromURI:function(e){if(f("ie"))return g.assert("getHexBinaryFromURI should not be used on IE"),"";var d="";e=this.splitImageDataURI(e);if(!e)return"";for(var c=atob(e.data.replace(/[ \r\n]+$/,"")),b=0,a="",b=0;b<c.length;b+=1)a=c.charCodeAt(b).toString(16),1===a.length&&(a="0"+a),d+=a;return{format:e.format,
hexData:d}}}})},"MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities":function(){define("dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query mw-html-utils/HtmlUtils MW/equations/EquationRenderer".split(" "),function(h,f,g,e,d,c,b){function a(a,c,e){if(!a)return null;var g;f.contains(a,"MathEquation")?g=a:(a=d(".MathEquation",a),0<a.length&&(g=a[0]));if(g)return b.exportDomnodeToImageURL(g,c,"gif",e)}return{exportDomnodeToImageURLPromise:function(c,d,e){return b.renderedEquationPromise(c).then(function(b){return a(b,
d,e)})},exportDomnodeToImageURL:a,simpleEquationToHTML:function(a){var b=e.getComputedStyle(a);return g.create("span",{style:{fontFamily:b.fontFamily,fontStyle:b.fontStyle,fontWeight:b.fontWeight},textContent:a.textContent}).outerHTML}}})},"mw-html-utils/HtmlUtils":function(){define(["dojo/_base/window","dojo/_base/event","dojo/io-query","mw-deprecation-utils/deprecation"],function(h,f,g,e){return{HYPERLINK_ESCAPE_REGEXP:/<a\s+href\s*=\s*"[^"]*"[^>]*>[\s\S]*?<\/a>/g,HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP:/<a\s+href\s*=\s*"([^"]*)"([^>]*)>([\s\S]*?)<\/a>/g,
STRONG_ESCAPE_REGEXP:/<strong>|<\/strong>/g,BOLD_LINK_ATTRIBUTE_REGEX:/\bstyle\s*=\s*\"[^\"]*\bfont-weight\s*:\s*bold\b[^\"]*\"/,parseQueryString:function(){var d=h.global.location.search.substr(1,h.global.location.search.length);return this._parseQueryString(d)},_parseQueryString:function(d){return g.queryToObject(d)},parseUrl:function(d){var c=document.createElement("a");c.display="none";c.href=d||window.location.href;c.href=c.href;c={protocol:c.protocol,hostname:c.hostname,port:c.port,pathname:c.pathname,
search:c.search,hash:c.hash};if(("https:"===c.protocol||"http:"===c.protocol)&&0!==c.pathname.indexOf("/"))c.pathname="/"+c.pathname;"https:"===c.protocol&&("443"===c.port&&0!==d.indexOf("https://"+c.hostname+":443"))&&(c.port="");return c},escapeHtml:function(d){var c=h.global.document.createElement("div");d=h.global.document.createTextNode(d);c.appendChild(d);c=c.innerHTML;d="";for(var b=0;b<c.length;b+=1){var a=c.charCodeAt(b);d=128<a?d+"\x26#"+a+";":d+c.charAt(b)}return d},escapeLinksAndHtml:function(d,
c){e.deprecated({deprecated:{module:"mw-html-utils/HtmlUtils",method:"escapeLinksAndHtml"},replacement:{module:"mw-html-utils/HtmlUtils",method:"treatHtmlLikeCommandWindow"}});var b="",a=d.split(this.HYPERLINK_ESCAPE_REGEXP),f=d.match(this.HYPERLINK_ESCAPE_REGEXP),g="",h=this,q=0,n=function(a,b,c,d){a=h.parseUrl(b).protocol;"http:"!==a&&("https:"!==a&&"matlab:"!==a)&&(b="#");b=h.escapeHtml(b);d=h._strongNotEscaped(d,!0);g='\x3ca href\x3d"'+b+'"\x3e'+d+"\x3c/a\x3e"};if(c)b=this.escapeHtml(d),b=this.escapeWhitespace(b);
else if(""!==a[0]&&(b=this._strongNotEscaped(a[0],!0)),null!==f&&0!==f.length)for(q=0;q<f.length;q+=1)f[q].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,n),""!==a[q+1]&&(a[q+1]=this._strongNotEscaped(a[q+1],!0)),b+=g+a[q+1];return b},treatHtmlLikeCommandWindow:function(d,c,b){if("string"!==typeof d)return"";var a="",e=d.split(this.HYPERLINK_ESCAPE_REGEXP),f=d.match(this.HYPERLINK_ESCAPE_REGEXP),g="",h=this,n=0;b=b?b:{};var p=function(a,b,c,d){a=h.parseUrl(b).protocol;var e="";"http:"!==a&&
("https:"!==a&&"matlab:"!==a)&&(b="#");b=h.escapeHtml(b);d=h._strongNotEscaped(d,!1);h.BOLD_LINK_ATTRIBUTE_REGEX.test(c)&&(e=' style\x3d"font-weight:bold"');g='\x3ca href\x3d"'+b+'"'+e+"\x3e"+d+"\x3c/a\x3e"};if(c)a=this.escapeHtml(d);else if(""!==e[0]&&(a=this._strongNotEscaped(e[0],!1)),null!==f&&0!==f.length)for(n=0;n<f.length;n+=1)f[n].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,p),""!==e[n+1]&&(e[n+1]=this._strongNotEscaped(e[n+1],!1)),a+=g+e[n+1];b.addPreTagToPreserveWhiteSpace&&(a=
'\x3cspan style\x3d"white-space: pre"\x3e'+a+"\x3c/span\x3e");return a},_strongNotEscaped:function(d,c){var b="",a=d.match(this.STRONG_ESCAPE_REGEXP),e=d.split(this.STRONG_ESCAPE_REGEXP),f=function(a){return a};c&&(f=this.escapeWhitespace);var g=0;if(null!==a&&0!==a.length){b=f(this.escapeHtml(e[0]));for(g=0;g<a.length;g+=1)b+=a[g]+f(this.escapeHtml(e[g+1]))}else b=f(this.escapeHtml(d));return b},escapeWhitespace:function(d){e.deprecated({deprecated:{module:"mw-html-utils/HtmlUtils",method:"escapeWhitespace"},
replacement:{module:"Plain HTML",method:'Set class as white-space: pre or use \x3cspan style\x3d"white-space: pre"\x3e...\x3c/span\x3e'}});return(d||"").replace(/\n/g,"\x3cbr\x3e").replace(/ {2}/g,"\x26nbsp;\x26nbsp;")},handleAnchors:function(d,c){if(c.target.href){f.stop(c);var b=c.target.href;-1!==b.indexOf("matlab:")?"matlab:"===b.substring(0,7)&&(b=c.target.href.substring(7),d(h.global.unescape(b))):h.global.open(c.target.href)}},isElementOverflown:function(d){return d.scrollHeight>d.clientHeight||
d.scrollWidth>d.clientWidth}}})},"MW/equations/EquationRenderer":function(){define(["dojo/Deferred","./renderer/utils/EquationExportUtilities","./renderer/view/FontsLoaded","./renderer/Renderer"],function(h,f,g,e){var d,c;return{renderMathML:function(b,a){d||(d=new e({equationFormat:"mathml",cacheFontMetrics:!1}));return d.render(b,a)},renderTeX:function(b,a){c||(c=new e({equationFormat:"tex",cacheFontMetrics:!1}));return c.render(b,a)},renderSimpleTeX:function(b,a){c||(c=new e({equationFormat:"simpletex",
cacheFontMetrics:!1}));return c.render(b,a)},loadFonts:function(){g.then()},waitForEquations:function(){var b=new h;g.loading()?g.then(function(){setTimeout(function(){b.resolve(!0)},0)}):b.resolve(!0);return b},renderedEquationPromise:function(b){if(b.renderedEquationPromise)return b.renderedEquationPromise;var a=new h;a.resolve(b.firstElementChild);return a},exportDomnodeToCanvas:f.exportDomnodeToCanvas,exportDomnodeToImageURL:f.exportDomnodeToImageURL}})},"MW/equations/renderer/utils/EquationExportUtilities":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style MW/equations/renderer/view/exporters/CanvasRenderer".split(" "),
function(h,f,g,e,d,c){function b(a,b){return{dataURL:a.toDataURL(b),width:a.width,height:a.height,verticalAlign:parseFloat(f.get(a,"data-eqn-vertical-align"))}}function a(a,b,f){l(a);var g=a,s=null;0===a.clientHeight&&(s=d.getComputedStyle(a),s=k({fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,fontFamily:s.fontFamily,fontVariant:s.fontVariant,color:s.color}),g=h.clone(a),g["data-eqn-height"]=a["data-eqn-height"],g["data-eqn-vertical-align"]=a["data-eqn-vertical-align"],e.place(g,
s));m||(m=new c);a=m.renderToCanvas(g,b,f);s&&e.destroy(s);return a}function k(a){a={style:h.mixin({display:"inline-block",position:"absolute",right:"-10000px",bottom:"-10000px",fontSize:"14px",whiteSpace:"pre-wrap"},a)};return e.create("span",a,document.body)}function l(a){if(!a||!g.contains(a,"MathEquation"))throw Error("MathEquation expected!");}var m=null;return{getImageObject:b,createOffScreenSpan:k,exportDomnodeToCanvas:a,exportDomnodeToImageURL:function(c,d,f,k){l(c);d=a(c,d,k);f=b(d,f);var h,
m,u;c&&1===c.children.length&&(h=c.children[0]);h&&1===h.children.length&&(m=h.children[0]);m&&1===m.children.length&&(u=m.children[0]);c=u&&g.contains(u,"MathTextBox")?u:void 0;c&&(f.simpleEquation=c);e.destroy(d);return f}}})},"MW/equations/renderer/view/exporters/CanvasRenderer":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has MW/equations/renderer/model/MathConstants ./CanvasRendererUtilities".split(" "),function(h,
f,g,e,d,c,b,a,k){return h(null,{constructor:function(){this._eqRectStack=[]},renderToCanvas:function(a,b,k){b=b||1;k=k||Infinity;var h=d.position(a,!0),p=Math.round(b*h.h),p=Math.min(p,4096),h=Math.round(b*h.w),h=Math.min(h,32767,k);k=e.create("canvas",{width:h,height:p});p=k.getContext("2d");this.renderToContext(a,b,p);a=a["data-eqn-vertical-align"]||0;g.add(k,"MathEquationCanvas");f.set(k,"data-eqn-vertical-align",a);c.set(k,{verticalAlign:a});return k},renderToContext:function(a,b,c){b=b||1;this._eqRect=
d.position(a,!0);this.ctx=c;this.ctx.imageSmoothingEnabled=!1;this.ctx.scale(b,b);this.ctx.textBaseline="top";this._renderElement(a);this.ctx=[]},_saveContext:function(){var a=this._eqRect;this._eqRectStack.push({x:a.x,h:a.h,y:a.y,w:a.w});this.ctx.save()},_restoreContext:function(){this._eqRect=this._eqRectStack.pop();this.ctx.restore()},_renderElement:function(a){var b,d,e,f=c.getComputedStyle(a);this._saveContext();if(b=parseFloat(f.borderTopWidth))this._eqRect.y-=b;var k=this._positionInEquation(a,
f);this._applyElementStyleToCanvas(f,k);b=a.childNodes;for(d=0;d<b.length;d+=1)switch(e=b[d],e.nodeType){case a.ELEMENT_NODE:this._renderElement(e);break;case a.TEXT_NODE:if("hidden"===f.visibility)break;this._renderText(e,k.x,k.y)}this._restoreContext()},_renderText:function(a,b,c){this.ctx.fillText(a.textContent,b,c)},_drawBorderLine:function(b,c,d,e,f){var k=this.ctx;if(e===a.SOLID_LINE||e===a.DASHED_LINE&&0<f)k.save(),k.beginPath(),k.moveTo(b.x,b.y),k.lineTo(c.x,c.y),e===a.DASHED_LINE&&k.setLineDash([2*
f]),k.strokeStyle=d,k.lineWidth=f,k.stroke(),k.restore()},_drawBorders:function(a,b){this._drawBorderLine({x:a.x,y:a.y+a.h},{x:a.x+a.w,y:a.y+a.h},b.borderBottomColor,b.borderBottomStyle,parseFloat(b.borderBottomWidth));this._drawBorderLine({x:a.x,y:a.y},{x:a.x,y:a.y+a.h},b.borderLeftColor,b.borderLeftStyle,parseFloat(b.borderLeftWidth));this._drawBorderLine({x:a.x,y:a.y},{x:a.x+a.w,y:a.y},b.borderTopColor,b.borderTopStyle,parseFloat(b.borderTopWidth));this._drawBorderLine({x:a.x+a.w,y:a.y},{x:a.x+
a.w,y:a.y+a.h},b.borderRightColor,b.borderRightStyle,parseFloat(b.borderRightWidth))},_isSymbol:function(a){return g.contains(a,"MathTextBox")?-1!==a.className.indexOf("extra")||-1!==a.className.indexOf("symbol")||-1!==a.className.indexOf("stixsize")||-1!==a.className.indexOf("stixvariants")||-1!==a.className.indexOf("accent"):!1},_positionInEquation:function(a,e){var f,h,p,r;p=a;r=0;e=e||c.getComputedStyle(a);f=e.paddingLeft||"0px";h=a.innerHTML;this._isSymbol(a)&&(a.innerHTML="\x3cspan\x3e"+a.innerHTML+
"\x3c/span\x3e",p=a.firstElementChild);p=d.position(p,!0);b("ff")&&g.contains(a,"MathTextBox")&&(r=k.getFFGlyphShift(a,p,e));r={x:p.x-this._eqRect.x,h:p.h,y:p.y-this._eqRect.y+r,w:p.w};h!==a.innerHTML?a.innerHTML=h:r.x+=parseFloat(f);return r},_applyElementStyleToCanvas:function(a,b){this.ctx.fillStyle=a.color;this.ctx.font=a.fontStyle+" "+a.fontVariant+" "+a.fontWeight+" "+a.fontSize+" "+a.fontFamily;"visible"===a.visibility&&this._drawBorders(b,a);return b}})})},"MW/equations/renderer/model/MathConstants":function(){define([],
function(){return{SOLID_LINE:"solid",DASHED_LINE:"dashed",NO_LINE:"none"}})},"MW/equations/renderer/view/exporters/CanvasRendererUtilities":function(){define(["dojo/has"],function(h){return{getFFGlyphShift:function(f,g,e){var d=0;e=parseFloat(e.fontSize);d=g.h-e;-1!==f.className.search(/\bextra[1-5]?\b/)?d=f.classList.contains("extra2")?h("mac")||h("win")&&52<=h("ff")?0.4*d:0.75*d:h("win")&&52<=h("ff")?0.28*d:d*(h("mac")?0.3:0.02):-1!==f.className.search(/\bstixsize[0-5]\b/)?(f.classList.contains("stixsize0")&&
(d*=h("linux")?0.78:0.82),d=f.classList.contains("stixsize5")?d*(h("mac"),0.6):h("win")&&52<=h("ff")?0.85*d:d*(h("mac")?0.87:0.91)):d*=0.68;return d}}})},"MW/equations/renderer/view/FontsLoaded":function(){define("./webfonts/webfontloader dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/domReady!".split(" "),function(h,f,g,e,d,c,b){function a(){function a(){var b=1;c.set(f,{fontSize:"2px",lineHeight:"normal"});f.innerHTML="M";b=parseFloat(c.getComputedStyle(f)["font-size"]);
c.set(f,{fontSize:"",lineHeight:""});d.destroy(e);return b}if(!k){k=!0;var e=d.create("span",{id:"MathEquationFontLoaderScratch","class":"MathEquation",style:{position:"absolute",right:"-1000px",top:"-1000px",whiteSpace:"pre-wrap"}},document.body),f=d.create("span",{id:"FontLoaderSpan"},e),g={};g.minFontSize=a();var r=this.webfontConfig||{};b.mixin(r,{timeout:1E4});h.load({active:function(){l.resolve(g)},fontinactive:function(a,b){l.reject(a+b)},classes:!1,timeout:r.timeout,custom:{families:"STIXGeneral-webfont:n4,i4,n7,i7 STIXSizeOneSym-webfont STIXSizeTwoSym-webfont STIXSizeThreeSym-webfont STIXSizeFourSym-webfont STIXSizeFiveSym-webfont STIXNonUnicode-webfont STIXVariants-webfont mwmathextregular mwmathext1regular mwmathext2regular mwmathext3regular mwmathext4regular mwmathext5regular".split(" "),
testStrings:{"STIXGeneral-webfont:n4,i4,n7,i7":"ABCXYZuvxyz","STIXSizeOneSym-webfont":"()[]{\u23df","STIXSizeTwoSym-webfont":"()[]{\u23df","STIXSizeThreeSym-webfont":"()[]{\u23df","STIXSizeFourSym-webfont":"()[]{\u23df","STIXSizeFiveSym-webfont":"\u23de\u23df","STIXNonUnicode-webfont":"\ue13b\ue13c\ue13c\ue13d\ue140\ue141","STIXVariants-webfont":"\u2032\u2190\u2192",mwmathextregular:"\uf07f\uf03c\uf049\uf050\uf051\uf05a",mwmathext1regular:"()[]G\uf062",mwmathext2regular:"()[]GG",mwmathext3regular:"()[]GG",
mwmathext4regular:"()[]GG",mwmathext5regular:"()[]GG"}}})}}var k=!1,l=new g;l.loading=function(){return k};l.then(function(){},function(){});f.before(l,"then",a);f.before(l,"isResolved",a);f.before(l,"isRejected",a);f.before(l,"isFulfilled",a);return l})},"MW/equations/renderer/view/webfonts/webfontloader":function(){(function(){function h(a,b,c){return a.call.apply(a.bind,arguments)}function f(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=
Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function g(a,b,c){g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:f;return g.apply(null,arguments)}function e(a,b){this.a=a;this.m=b||a;this.c=this.m.document}function d(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));
return b}function c(a,b,c){(a=a.c.getElementsByTagName(b)[0])||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function b(a){a.parentNode&&a.parentNode.removeChild(a)}function a(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,k=0;k<d.length;k+=1)if(b[e]===d[k]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(k=0;k<c.length;k+=1)if(d[e]===c[k]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,
"")}function k(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}function l(a){if("string"===typeof a.f)return a.f;var b=a.m.location.protocol;"about:"==b&&(b=a.a.location.protocol);return"https:"==b?"https:":"http:"}function m(a,b,e){function f(){l&&k&&g&&(l(h),l=null)}b=d(a,"link",{rel:"stylesheet",href:b,media:"all"});var k=!1,g=!0,h=null,l=e||null;tb?(b.onload=function(){k=!0;f()},b.onerror=function(){k=!0;h=Error("Stylesheet failed to load");f()}):setTimeout(function(){k=
!0;f()},0);c(a,"head",b)}function q(a,b,c,e){var f=a.c.getElementsByTagName("head")[0];if(f){var k=d(a,"script",{src:b}),g=!1;k.onload=k.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),k.onload=k.onreadystatechange=null,"HEAD"==k.parentNode.tagName&&f.removeChild(k))};f.appendChild(k);setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},e||5E3);return k}return null}function n(){this.a=0;this.c=null}function p(a){a.a++;
return function(){a.a--;s(a)}}function r(a,b){a.c=b;s(a)}function s(a){0==a.a&&a.c&&(a.c(),a.c=null)}function t(a){this.a=a||"-"}function u(a,b){this.c=a;this.f=4;this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function v(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function w(a){return a.a+a.f}function x(a){var b="normal";"o"===
a.a?b="oblique":"i"===a.a&&(b="italic");return b}function B(a){var b=4,c="n",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b}function A(a,b){this.c=a;this.f=a.m.document.documentElement;this.h=b;this.a=new t("-");this.j=!1!==b.events;this.g=!1!==b.classes}function D(b){b.g&&a(b.f,[b.a.c("wf","loading")]);H(b,"loading")}
function F(b){if(b.g){var c=k(b.f,b.a.c("wf","active")),d=[],e=[b.a.c("wf","loading")];c||d.push(b.a.c("wf","inactive"));a(b.f,d,e)}H(b,"inactive")}function H(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,w(c));else a.h[b]()}function L(){this.c={}}function N(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d}function M(a,b){this.c=a;this.f=b;this.a=d(this.c,"span",{"aria-hidden":"true"},this.f)}function P(a){c(a.c,"body",a.a)}function Q(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+
v(a.c)+";"+("font-style:"+x(a)+";font-weight:"+(a.f+"00")+";")}function O(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}function I(a,b,c,d,e,f,k){this.v=a;this.B=b;this.c=c;this.a=d;this.s=k||"BESbswy";this.f={};this.w=e||3E3;this.u=f||null;this.o=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.o=new M(this.c,this.s);a=new u(this.a.c+",serif",w(this.a));a=Q(a);this.g.a.style.cssText=a;a=new u(this.a.c+
",sans-serif",w(this.a));a=Q(a);this.h.a.style.cssText=a;a=new u("serif",w(this.a));a=Q(a);this.j.a.style.cssText=a;a=new u("sans-serif",w(this.a));a=Q(a);this.o.a.style.cssText=a;P(this.g);P(this.h);P(this.j);P(this.o)}function E(){if(null===Ia){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(va.navigator.userAgent);Ia=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return Ia}function K(a,b,c){for(var d in Fa)if(Fa.hasOwnProperty(d)&&b===a.f[Fa[d]]&&c===a.f[Fa[d]])return!0;
return!1}function Y(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=E()&&K(a,b,c));d?xa()-a.A>=a.w?E()&&K(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?S(a,a.v):S(a,a.B):Z(a):S(a,a.v)}function Z(a){setTimeout(g(function(){Y(this)},a),50)}function S(a,c){setTimeout(g(function(){b(this.g.a);b(this.h.a);b(this.j.a);b(this.o.a);c(this.a)},a),0)}function V(a,b,c){this.c=a;this.a=b;this.f=0;this.o=this.j=!1;this.s=c}function ha(b){0==--b.f&&b.j&&(b.o?(b=b.a,
b.g&&a(b.f,[b.a.c("wf","active")],[b.a.c("wf","loading"),b.a.c("wf","inactive")]),H(b,"active")):F(b.a))}function U(a){this.j=a;this.a=new L;this.h=0;this.f=this.g=!0}function ea(b,c,d,e,f){var k=0==--b.h;(b.f||b.g)&&setTimeout(function(){var b=f||null,h=e||{};if(0===d.length&&k)F(c.a);else{c.f+=d.length;k&&(c.j=k);var l,m=[];for(l=0;l<d.length;l++){var n=d[l],q=h[n.c],p=c.a,r=n;p.g&&a(p.f,[p.a.c("wf",r.c,w(r).toString(),"loading")]);H(p,"fontloading",r);p=null;null===Ea&&(Ea=va.FontFace?(r=/Gecko.*Firefox\/(\d+)/.exec(va.navigator.userAgent))?
42<parseInt(r[1],10):!0:!1);Ea?p=new O(g(c.g,c),g(c.h,c),c.c,n,c.s,q):p=new I(g(c.g,c),g(c.h,c),c.c,n,c.s,b,q);m.push(p)}for(l=0;l<m.length;l++)m[l].start()}},0)}function W(a,b,c){var d=[],e=c.timeout;D(b);var d=N(a.a,c,a.c),f=new V(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,c,d){ea(a,f,b,c,d)})}function aa(a,b){this.c=a;this.a=b}function ba(a,b,c){var d=l(a.c);a=(a.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return d+"//"+a+"/"+b+".js"+(c?"?v\x3d"+
c:"")}function $(a,b){this.c=a;this.a=b}function ka(a,b,c){a?this.c=a:this.c=b+Wa;this.a=[];this.f=[];this.g=c||""}function da(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":");a.a.push(e.join(f))}}function fa(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit\x3d"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,"+"));b=a.c+"?family\x3d"+c.join("%7C");0<a.f.length&&
(b+="\x26subset\x3d"+a.f.join(","));0<a.g.length&&(b+="\x26text\x3d"+encodeURIComponent(a.g));return b}function qa(a){this.f=a;this.a=[];this.c={}}function T(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var k,g=d[1];k=[];if(g)for(var g=g.split(","),h=g.length,l=0;l<h;l++){var m;m=g[l];if(m.match(/^[\w-]+$/)){var n=Da.exec(m.toLowerCase());if(null==n)m="";else{m=n[2];m=null==m||""==m?"n":gb[m];n=n[1];if(null==n||""==n)n="4";else var q=
fb[n],n=q?q:isNaN(n)?"4":n.substr(0,1);m=[m,n].join("")}}else m="";m&&k.push(m)}0<k.length&&(f=k);3==d.length&&(d=d[2],k=[],d=d?d.split(","):k,0<d.length&&(d=Ha[d[0]])&&(a.c[e]=d))}a.c[e]||(d=Ha[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new u(e,f[d]))}}function la(a,b){this.c=a;this.a=b}function ua(a,b){this.c=a;this.a=b}function X(a,b){this.c=a;this.f=b;this.a=[]}var va=this,xa=Date.now||function(){return+new Date},tb=!!va.FontFace;t.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,
"").toLowerCase());return b.join(this.a)};O.prototype.start=function(){var a=this.c.m.document,b=this,c=xa(),d=new Promise(function(d,e){function f(){xa()-c>=b.f?e():a.fonts.load(x(b.a)+" "+(b.a.f+"00")+" 300px "+v(b.a.c),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=new Promise(function(a,c){setTimeout(c,b.f)});Promise.race([e,d]).then(function(){b.g(b.a)},function(){b.j(b.a)})};var Fa={D:"serif",C:"sans-serif"},Ia=null;I.prototype.start=function(){this.f.serif=
this.j.a.offsetWidth;this.f["sans-serif"]=this.o.a.offsetWidth;this.A=xa();Y(this)};var Ea=null;V.prototype.g=function(b){var c=this.a;c.g&&a(c.f,[c.a.c("wf",b.c,w(b).toString(),"active")],[c.a.c("wf",b.c,w(b).toString(),"loading"),c.a.c("wf",b.c,w(b).toString(),"inactive")]);H(c,"fontactive",b);this.o=!0;ha(this)};V.prototype.h=function(b){var c=this.a;if(c.g){var d=k(c.f,c.a.c("wf",b.c,w(b).toString(),"active")),e=[],f=[c.a.c("wf",b.c,w(b).toString(),"loading")];d||e.push(c.a.c("wf",b.c,w(b).toString(),
"inactive"));a(c.f,e,f)}H(c,"fontinactive",b);ha(this)};U.prototype.load=function(a){this.c=new e(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;W(this,new A(this.c,a),a)};aa.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var c=f["__mti_fntLst"+d](),e=[],k;if(c)for(var g=0;g<c.length;g++){var h=c[g].fontfamily;void 0!=c[g].fontStyle&&void 0!=c[g].fontWeight?(k=c[g].fontStyle+c[g].fontWeight,e.push(new u(h,k))):e.push(new u(h))}a(e)}else setTimeout(function(){b()},
50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.m;q(this.c,ba(c,d,e),function(e){e?a([]):(f["__MonotypeConfiguration__"+d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])};$.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},k=new n;b=0;for(c=d.length;b<c;b++)m(this.c,d[b],p(k));var g=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),l=0;l<h.length;l+=1)g.push(new u(d[0],h[l]));else g.push(new u(d[0]));
r(k,function(){a(g,f)})};var Wa="//fonts.googleapis.com/css",Ha={latin:"BESbswy","latin-ext":"\u00e7\u00f6\u00fc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},fb={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",
l:"3",r:"4",b:"7"},gb={i:"i",italic:"i",n:"n",normal:"n"},Da=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,Ua={Arimo:!0,Cousine:!0,Tinos:!0};la.prototype.load=function(a){var b=new n,c=this.c,d=new ka(this.a.api,l(c),this.a.text),e=this.a.families;da(d,e);var f=new qa(e);T(f);m(c,fa(d),p(b));r(b,function(){a(f.a,f.c,Ua)})};ua.prototype.load=function(a){var b=this.a.id,c=this.c.m;b?q(this.c,(this.a.api||
"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var d=[],e=0;e<b.length;e+=2)for(var f=b[e],k=b[e+1],g=0;g<k.length;g++)d.push(new u(f,k[g]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(h){}a(d)}},2E3):a([])};X.prototype.load=function(a){var b=this.f.id,c=this.c.m,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var e=
0,f=c.fonts.length;e<f;++e){var k=c.fonts[e];d.a.push(new u(k.name,B("font-weight:"+k.weight+";font-style:"+k.style)))}a(d.a)},q(this.c,l(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(this.c.m.location.hostname||this.c.a.location.hostname)+"/"+b+".js",function(b){b&&a([])})):a([])};var za=new U(va);za.a.c.custom=function(a,b){return new $(b,a)};za.a.c.fontdeck=function(a,b){return new X(b,a)};za.a.c.monotype=function(a,b){return new aa(b,a)};za.a.c.typekit=function(a,b){return new ua(b,a)};
za.a.c.google=function(a,b){return new la(b,a)};var Na={load:g(za.load,za)};"function"===typeof define&&define.amd?define(function(){return Na}):"undefined"!==typeof module&&module.exports?module.exports=Na:(va.WebFont=Na,va.WebFontConfig&&za.load(va.WebFontConfig))})()},"MW/equations/renderer/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style ./model/importers/MathML ./model/importers/SimpleTeX ./model/importers/TeX ./utils/EquationExportUtilities ./view/EquationView ./view/FontsLoaded ../utils/HasExtensions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h(null,{MINIMALFONTSIZE:10,SCRIPTSCALINGFACTOR:0.7,constructor:function(a){a=a||{};this._cacheFontMetrics=!0===a.cacheFontMetrics;this._scriptScalingFactor=a._scriptScalingFactor||this.SCRIPTSCALINGFACTOR;this._minimalFontSize=a._minimalFontSize||this.MINIMALFONTSIZE;this._inputLanguage=(a.equationFormat||"mathml").toLowerCase();this._pxPerEm=Math.round(1.1*(a.pxPerEm||0));"mathml"===this._inputLanguage?(a.flavor=a.flavor||"MathML 2.0",this._importer=new k(a)):
this._importer="tex"===this._inputLanguage?new m:new l},render:function(a,b,c){return p.then(f.hitch(this,function(d){this._adjustMinFontSize(d.minFontSize);return this._render(a,b,c)}))},renderToCanvas:function(a,b){return p.then(f.hitch(this,function(c){this._adjustMinFontSize(c.minFontSize);return this._renderToCanvas(a,b)}))},renderToImageURL:function(a,b,c){return p.then(f.hitch(this,function(d){this._adjustMinFontSize(d.minFontSize);return this._renderToImageURL(a,b,c)}))},renderToImageURLSynch:function(a,
b,c){return this._renderToImageURL(a,b,c)},exportDomnodeToCanvas:function(a,b){return q.exportDomnodeToCanvas(a,b)},exportDomnodeToImageURL:function(a,b,c){return q.exportDomnodeToImageURL(a,b,c)},_adjustMinFontSize:function(a){this._minimalFontSize=Math.max(this._minimalFontSize,a)},_renderEquationOffScreen:function(a,b){var c=q.createOffScreenSpan({fontSize:b});this._render(a,c);return c},_renderToCanvas:function(a,b,d){a=this._renderEquationOffScreen(a,b);d=this.exportDomnodeToCanvas(a.firstElementChild,
d);c.destroy(a);return d},_renderToImageURL:function(a,b,d){a=this._renderToCanvas(a,b,d);b=q.getImageObject(a);c.destroy(a);return b},_addStyleAttributes:function(a,b){var c={},d,e,f;if(b){d=b.split(";");for(e=0;e<d.length;e+=1)f=d[e].split(":"),1<f.length&&(c[f[0].trim()]=f[1].trim());if(c=c.fontSize||c["font-size"])a.pxPerEm=parseFloat(c)}},_render:function(a,b,c){return(a=this.getModel(a))&&!a.foundEncodingIssues?this._draw(a,b,c):null},setDisplaystyleIfNeeded:function(a,b){function c(a){return b?
0===a:-1!==a}var d=a.replace(/(^%|[^\\\\]%).*(\r?\n)?/g,""),d=d.trim(),e=!1;c(d.indexOf("$"))?e=!0:0===d.indexOf("\\[")?e=!0:c(d.indexOf("\\("))&&(e=!0);d&&!e&&(a="$$"+a+"\n$$");return a},getModel:function(a){var b,c=null;try{b=this._importer.parse(a),c=this._importer.makeEquation(b)}catch(d){}return c},draw:function(a,b,c){return p.then(f.hitch(this,function(){return this._draw(a,b,c)}))},_draw:function(a,b,d){d=d||{};if(!a)return!1;var e=null;try{c.empty(b);var f={domNode:b,pxPerEm:this._pxPerEm,
creatorFlavor:a.creatorFlavor,scriptScalingFactor:this._scriptScalingFactor,minimalFontSize:this._minimalFontSize,displaystyle:d.displaystyle};this._addStyleAttributes(f,a.style||"");var k=new n(f),e=k.layoutAndRender(a);this._cacheFontMetrics&&(this._pxPerEm=k.emToPx(1))}catch(g){}return e}})})},"MW/equations/renderer/model/importers/MathML":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/utils/XMLParser ./Base ../Symbols ../utils/MathNodeUtils ../../Utilities".split(" "),function(h,
f,g,e,d,c,b){return h(e,{constructor:function(a){a=a||{};this.identifierSymbolTable=this.identifierTable=this.operatorTable=this._math=null;this._parser=new g;this.flavor=a.flavor||"MathML 2.0";this.rootElementName=a.rootElementName||"math"},initMaps:function(){this.actionMap=this.makeActionMap();this.symbolMap=this.makeSymbolMap();this.operatorTable={"\u2061":"ZeroWidthSpace","\u2062":"InvisibleTimes","\u2146":"d","\u222b":"intop","\u222e":"contourintop","\u2a0d":"fpartintop","\u2211":"sum","\u220f":"prod",
"\u200b":"ZeroWidthSpace","|":"verticalbar","|":"verticalbar","\u2016":"dblverticalbar","\u2308":"ceilleft","\u2309":"ceilright","\u230a":"floorleft","\u230b":"floorright","\u2329":"anglebracketleft","\u27e8":"anglebracketleft","\u232a":"anglebracketright","\u27e9":"anglebracketright","\ufe37":"overbrace","\u23de":"overbrace","\ufe38":"underbrace","\u23df":"underbrace","~":"tildeAccent","\u02dc":"smallTildeAccent","\u2032":"prime","\u203e":"macron","\u2147":"exponentiale","\u2148":"imaginaryi","\u25b3":"triangle",
"\u22c3":"bigcup","\u22c2":"bigcap","\u2a06":"bigsqcup","\u2a04":"biguplus","\u22c0":"bigwedge","\u22c1":"bigvee","\u2a00":"bigodot","\u2a01":"bigoplus","\u2a02":"bigotimes","\u25ef":"bigcirc","\u25bd":"bigtriangledown","\u25b3":"bigtriangleup","\\":"backslash","\\":"backslash","*":"*"};this.operatorTable["\u2212"]=this.operatorTable["-"];this.identifierSymbolTable={"...":"ldots"};this.identifierTable={"\u2147":"e","\u2148":"i"}},parse:function(a){var b;null===this.actionMap&&this.initMaps();this.initBaseParser();
this.initParser();"string"===typeof a?(a=d.entities.replace(a),b=this._parser.parseString(a)):(b={},b.firstChild=a);return b},makePEG:function(){return null},initParser:function(){this._unexpectedInput=!1;this._stretchySymbolBlacklist={}},makeSymbolMap:function(){return{larr:"leftarrow",rarr:"rightarrow",uarr:"uparrow",darr:"downarrow",harr:"leftrightarrow",lArr:"Leftarrow",rArr:"Rightarrow",uArr:"Uparrow",dArr:"Downarrow",hArr:"Leftrightarrow"}},makeActionMap:function(){var a={mrow:[this.appendMrow],
mfrac:[this.appendMfrac],msub:[this.appendMsub,"script"],msup:[this.appendMsup,"script"],msubsup:[this.appendMsubsup,"script"],munder:[this.appendMsub,"stack"],mover:[this.appendMsup,"stack"],munderover:[this.appendMsubsup,"stack"],mi:[this.appendMi],mo:[this.appendMo],mn:[this.appendMn],mfenced:[this.appendMfenced],msqrt:[this.appendMsqrt],mroot:[this.appendMroot],mtable:[this.appendMtable],malignmark:[this.appendMalignmark],mtext:[this.appendMtext],mstyle:[this.appendMstyle],maction:[this.appendMaction],
mmultiscripts:[this.appendMmultiscripts],parsererror:[this.appendMrow],h3:[this.appendMrow],mspace:[this.appendMspace],mphantom:[this.noAppend],mpadded:[this.noAppend],ms:[this.appendMs],menclose:[this.appendMrow],semantics:[this.appendMrow],maligngroup:[this.noAppend],annotation:[this.noAppend],"annotation-xml":[this.noAppend],"#comment":[this.noAppend]};a[this.rootElementName]=[this.appendMath];return a},_getName:function(a){var b=a.localName;b||(b=a.nodeName);return b.toLowerCase()},append:function(a){if(!a)return null;
var b=this._getName(a),b=this.actionMap[b],c=null;b?1===b.length?c=b[0].call(this,a):2===b.length&&(c=b[0].call(this,a,b[1])):this._unexpectedInput=!0;return c},makeEquation:function(a){var b;a&&a.firstChild&&(b=this.append(a.firstChild),0<Object.keys(this._stretchySymbolBlacklist).length&&(b=this.append(a.firstChild)));b||(b=this.makeRoot({children:[this.makeRow({children:[this.makeText({kind:"code",text:"\ufffd",style:"color: red"})]})]}),this._unexpectedInput=b.foundFatalEncodingIssues=!0);b.foundEncodingIssues=
this._unexpectedInput;b.creator="MathML";b.creatorFlavor=this.flavor;return b},_trim:function(a){return a.replace(/^ +| +$/gm,"")},getText:function(a,b){var c,d;b=b||{};c=!1!==b.trim;return a.firstChild&&(d=a.firstChild.data)?c?this._trim(d):d:""},appendMath:function(a){var b;b=this.attributes(a);var c=b.display;"inline"===c&&(b.inline=!0);"block"===c&&(b.inline=!1);b=this.makeRoot(b);this.fillImplicitRow(a,b.children[0]);return b},fillItemOrRow:function(a,b){a&&"mrow"===this._getName(a)?this.fillRow(a,
b):(this.pushRow(b),this.append(a),this.popRow())},_isTextOrComment:function(a){a=this._getName(a);return"#text"===a||"#comment"===a},_skipTextOrComment:function(a){for(;a&&this._isTextOrComment(a);)a=a.nextSibling;return a},_skipTextOrCommentBack:function(a){for(;a&&this._isTextOrComment(a);)a=a.previousSibling;return a},_firstElementChild:function(a){return this._skipTextOrComment(a.firstChild)},_lastElementChild:function(a){return this._skipTextOrCommentBack(a.lastChild)},_nextElementSibling:function(a){return this._skipTextOrComment(a.nextSibling)},
_childElements:function(a){var b=[];for(a=this._firstElementChild(a);a;)b.push(a),a=this._nextElementSibling(a);return b},fillImplicitRow:function(a,b,c){var d=this._firstElementChild(a);d&&"mrow"===this._getName(d)&&!this._nextElementSibling(d)?this.fillRow(d,b,c):this.fillRow(a,b,c)},_scanChildForDelimiter:function(a,b){var c;a&&((c=a.symbolName)&&d.isDelimiter(c)?(d.isOpeningDelimiter(c)?(b.parens.push(1),b.parencount+=1,b.first||(b.needsSubRows=!0)):d.isClosingDelimiter(c)?(b.parens.push(-1),
b.parencount-=1):b.parens.push(0),0>b.parencount&&(b.balancedParens=!1)):b.parens.push(0),b.first=!1)},_scanRowForDelimiters:function(a,b,c){var d={parens:[],needsSubRows:!1,parencount:0,balancedParens:!0,first:!0};this.pushRow(b);for(b=this._firstElementChild(a);b;)!d.first&&c&&this.pushSymbol(","),a=this.append(b),this._scanChildForDelimiter(a,d),b=this._nextElementSibling(b);0!==d.parencount&&(d.balancedParens=!1);d.needsSubRows=d.needsSubRows&&d.balancedParens&&!c;this.popRow();return{needsSubRows:d.needsSubRows,
parens:d.parens}},fillRow:function(a,c,d){var e;b.copyCommonAttributes(this.attributes(a),c);d=this._scanRowForDelimiters(a,c,d||!1);if("MathType"===this.flavor&&d.needsSubRows){a=c.children;c.children=[];this.pushRow(c);for(c=0;c<a.length;c+=1)1===d.parens[c]&&(e=this.makeRow(),this.push(e),this.pushRow(e)),this.push(a[c]),-1===d.parens[c]&&this.popRow();this.popRow()}},noAppend:function(){return null},appendMrow:function(a){var b=null,b=this.makeRow(this.attributes(a));this.push(b);this.fillRow(a,
b);return b},appendMn:function(a){return this.pushNumber(this.getText(a),this.attributes(a))},appendMspace:function(a){a=this.attributes(a);var b=0;a.hasOwnProperty("width")&&"em"===a.width.slice(-2)&&(b=parseFloat(a.width));return this.pushMspace(b)},appendToPreviousId:function(a){var b=this.row.children;return 0<b.length&&(b=b[b.length-1],"MathText"===b.className&&"id"===b.kind&&1===a.length)?(b.text+=a,!0):!1},appendIdentifier:function(a,b){var c=null;return c=this.pushText(a,1<a.length?"code":
"id",b)},appendMi:function(a){var b;"MathType"===this.flavor?(b=this.getText(a,{trim:!1}),b=" "===b?"\u00a0":f.trim(b)):b=this.getText(a);var c=d.unicodeMap;return(c=this.identifierSymbolTable[b]||(c?c[b]:null))?this.pushSymbol(c,this.attributes(a)):this.appendIdentifier(this.identifierTable[b]||b,this.attributes(a))},attributes:function(a){var b={};a=a.attributes;var c,d;for(d=0;d<a.length;d+=1)c=a[d],"true"===c.value?c.value=!0:"false"===c.value&&(c.value=!1),b[c.name]=c.value;return b},_checkMoInMsubSup:function(a,
b){var c=a.parentNode,e=this._firstElementChild(c),c=this._getName(c);if("msub"===c||"msup"===c||"msubsup"===c)c=d.symbolMap[b],e===a&&c.stretchyDefault&&(this._stretchySymbolBlacklist[b]=!0)},_isStretchyDelim:function(a,b){return!0===a.stretchyDefault&&a.stretchy&&!1!==b.stretchy||!0===a.stretchy&&!0===b.stretchy},_appendSingleOperator:function(a,b,c){var e=d.symbolMap,f=this.operatorTable[c],g=null,h=e&&f?e[f]:null,r=!1,g=null;b.hasOwnProperty("stretchy")&&(b.stretchy="true"===b.stretchy);if(h){if("ZeroWidthSpace"===
f)return null;r=this._isStretchyDelim(h,b);g=f;this._checkMoInMsubSup(a,g);this._stretchySymbolBlacklist[g]&&(r=!1)}else g=(a=d.unicodeMap)?a[c]:c,(h=e?e[g]:null)&&(r=this._isStretchyDelim(h,b));g?g=r?this.pushDelim(g,b):this.pushSymbol(g,b):(f&&(c=f),g=this.pushCode(c,b));g.attributes=b;return g},appendMo:function(a){var b,c="",e=[],g=this.attributes(a),h=this.getText(a),h=this.mapSymbolName(h);h.split("").forEach(f.hitch(this,function(a){d.unicodeMap[a]?(c&&e.push(c),e.push(a),c=""):c+=a}));c&&
e.push(c);e.forEach(f.hitch(this,function(c){b=this._appendSingleOperator(a,g,c)}));return b},appendMs:function(a){return this.pushCode('"'+this.getText(a)+'"',this.attributes(a))},appendMtext:function(a){var b=this.attributes(a);return"MathType"===this.flavor?this.pushMtext(this.getText(a,{trim:!1}).replace(/ /g,"\u00a0").replace(/\u0009/g,"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0"),b):this.pushMtext(this.getText(a),b)},appendMfrac:function(a){var b=this.attributes(a);a=this._firstElementChild(a);
var c=this._nextElementSibling(a),b=this.makeFraction(b);this.push(b);this.fillItemOrRow(a,b.children[0]);this.fillItemOrRow(c,b.children[1]);return b},appendMfenced:function(a){var b=this.makeFenced(this.attributes(a));this.push(b);this.pushRow(b);this.fillRow(a,b.children[0],!0);this.popRow();return b},appendMstyle:function(a){var b=this.attributes(a);b.hasOwnProperty("displaystyle")&&(b.displaystyle="true"===b.displaystyle);b=this.makeStyle(b);this.push(b);this.fillImplicitRow(a,b.children[0]);
return b},appendMaction:function(a){var b=this.attributes(a);a=this._firstElementChild(a);var c=this._nextElementSibling(a),d;d=this.makeAction(b);this.push(d);this.fillItemOrRow(a,d.children[0]);"tooltip"===b.actiontype?this.fillItemOrRow(c,d.children[1]):d.children[1]=null;return d},appendMsqrt:function(a){var b=this.makeRadical(this.attributes(a));this.push(b);this.fillImplicitRow(a,b.children[0]);return b},appendMroot:function(a){var b=this._firstElementChild(a),c=this._nextElementSibling(b);
a=this.makeRadical(this.attributes(a));this.push(a);this.fillItemOrRow(b,a.children[0]);this.fillItemOrRow(c,a.children[1]);return a},parseAlign:function(a){a=a.split(" ");var b,c="";for(b=0;b<a.length;b+=1)a[b]&&(c+=a[b].charAt(0));return c},parseRowLines:function(a){return a.split(" ")},parseAlignList:function(a){var b,c="";a=f.trim(a);if(2>a.length)return"";if("{"!==a[0]||"}"!==a[-1])return this.parseAlign(a);b=a.slice(1,-2).split("} *{");for(a=0;a<b.length;a+=1)c+=b(a)?this.parseAlign(b[a]).charAt(0):
"a";return c},appendMalignmark:function(a){return this.pushText("","alignmark",this.attributes(a))},appendMtable:function(a){var b=this.attributes(a);a=this._childElements(a);var c=a.length,d,e,f,g=0;for(d=0;d<c;d+=1)a[d]="mtr"!==a[d].localName?[a[d]]:this._childElements(a[d]),g=Math.max(g,a[d].length);b.rows=c;b.cols=g;b.frame&&(b.frame=b.frame);b.columnalign&&(b.colspec=this.parseAlign(b.columnalign));b.groupalign&&(b.colspec=this.parseAlignList(b.groupalign));!b.colspec&&"MathType"===this.flavor&&
(b.colspec="a");b.rowlines&&(b.hlines=this.parseRowLines(b.rowlines));b=this.makeMatrix(b);for(d=0;d<a.length;d+=1){c=a[d];for(e=0;e<g;e+=1)f=this.makeRow(),b.appendChild(f),e<c.length&&this.fillImplicitRow(c[e],f)}return this.push(b)},_setAccentProperties:function(a){if("stack"===a.limitStyle){var b=a.children[0],d=a.children[1],e=c.isNonEmptyRow(d),f=a.children[2],g=c.isNonEmptyRow(f),b=b&&b.getAccent(),f=f&&f.getAccent(),d=d&&d.getAccent();a.accent=!1;a.accentunder=!1;f&&(a.accent=!0,f.accentType=
"topaccent",f.renderAsAccent=!0);if(b&&(e||g))b.renderAsAccent=!0;f&&(a.accent=!0,f.accentType="topaccent",f.renderAsAccent=!0);d&&(a.accentunder=!0,d.accentType="bottomaccent",d.renderAsAccent=!0)}},appendMsub:function(a,b){var c=this.attributes(a),d=this._firstElementChild(a),e=this._nextElementSibling(d);b&&(c.limitStyle=b);c=this.makeScript(c);this.push(c);this.fillItemOrRow(d,c.children[0]);if("MathType"===this.flavor){d=this._lastElementChild(a);for(this.pushRow(c.children[0]);e!==d;)this.append(e),
e=this._nextElementSibling(e);this.popRow()}c.children[2]=null;this.fillItemOrRow(e,c.children[1]);this._setAccentProperties(c);return c},appendMsup:function(a,b){var c=this.attributes(a),d=this._firstElementChild(a),e=this._nextElementSibling(d);b&&(c.limitStyle=b);c=this.makeScript(c);this.push(c);this.fillItemOrRow(d,c.children[0]);if("MathType"===this.flavor){d=this._lastElementChild(a);for(this.pushRow(c.children[0]);e!==d;)this.append(e),e=this._nextElementSibling(e);this.popRow()}c.children[1]=
null;this.fillItemOrRow(e,c.children[2]);this._setAccentProperties(c);return c},appendMsubsup:function(a,b){var c=this.attributes(a),d=this._firstElementChild(a),e=this._nextElementSibling(d),f=this._nextElementSibling(e);b&&(c.limitStyle=b);c=this.makeScript(c);this.push(c);this.fillItemOrRow(d,c.children[0]);"MathType"===this.flavor&&this._lastElementChild(a);this.fillItemOrRow(e,c.children[1]);this.fillItemOrRow(f,c.children[2]);this._setAccentProperties(c);return c},_processOneMultiScriptChild:function(a,
b){var c=null;b&&"none"!==b.localName&&(c=this.makeRow(),this.fillItemOrRow(b,c));a.appendChild(c)},_processTwoMultiScriptChildren:function(a,b){this._processOneMultiScriptChild(a,b);b=this._nextElementSibling(b);this._processOneMultiScriptChild(a,b);return this._nextElementSibling(b)},appendMmultiscripts:function(a){var b=this._firstElementChild(a);a=this.makeMultiScript(this.attributes(a));var c=0;this.push(a);this.fillItemOrRow(b,a.children[0]);for(b=this._nextElementSibling(b);b&&"mprescripts"!==
b.localName;)b=this._processTwoMultiScriptChildren(a,b),c+=1;a.numPostPairs=c;for(b&&(b=this._nextElementSibling(b));b;)b=this._processTwoMultiScriptChildren(a,b);return a}})})},"MW/equations/utils/XMLParser":function(){define(["dojo/_base/declare","dojo/has","dojo/sniff"],function(h,f,g){return h(null,{constructor:function(){window.DOMParser&&(this._parser=new window.DOMParser);this._IEparser=null;!this._parser&&f("ie")&&(this._IEparser=new window.ActiveXObject("Microsoft.XMLDOM"),this._IEparser.async=
!1)},parseString:function(e){var d;try{this._parser?(d=this._parser.parseFromString(e,"application/xml"))&&0<d.getElementsByTagName("parsererror").length&&(d=null):d=this._parseUsingIE(e)}catch(c){d=null}return d},_parseUsingIE:function(e){var d=null,c=this._IEparser;c&&(c.loadXML(e),d=c);return d}})})},"MW/equations/renderer/model/importers/Base":function(){define(["dojo/_base/declare","dojo/_base/lang","../utils/MathNodeUtils","../utils/NodeFactory"],function(h,f,g,e){return h(null,{constructor:function(){this.row=
this.symbolMap=this.actionMap=this.peg=null;this.rows=[];this.str=""},initMaps:function(){this.peg=this.makePEG();this.actionMap=this.makeActionMap();this.symbolMap=this.makeSymbolMap()},makePEG:function(){throw"Unimplemented abstract method makePEG";},makeActionMap:function(){throw"Unimplemented abstract method makeActionMap";},makeSymbolMap:function(){throw"Unimplemented abstract method makeSymbolMap";},initParser:function(){throw"Unimplemented abstract method initParser";},initBaseParser:function(){this.row=
null;this.rows=[];this.str=""},parse:function(d){this.peg||this.initMaps();this.initBaseParser();this.initParser();return this.peg.parse(d)},pushRow:function(d){this.rows.push(this.row);this.row=d},popRow:function(){this.row=this.rows.pop()},makeEquation:function(d){var c=this.makeRoot();d&&(this.str=d.str,this.fillRow(d.tree,c.children[0]));return g.sanitizeModel(c)},makeRoot:function(d){d=d||{};d.children=d.children||[this.makeRow()];return e.createNode("MathRoot",d)},makeRow:function(d){d=d||{};
d.children=d.children||[];return e.createNode("MathRow",d)},makeDelim:function(d){d=d||{};return e.createNode("MathDelimiter",d)},makeText:function(d){d=d||{};return e.createNode("MathText",d)},makeSymbol:function(d,c){c=c||{};c.text=" ";c.kind="symbol";c.symbolName=d;return e.createNode("MathText",c)},makeFraction:function(d){d=d||{};d.children=d.children||[this.makeRow(),this.makeRow()];d.bevelled="true"===d.bevelled;return e.createNode("MathFraction",d)},makeRadical:function(d){d=d||{};d.children=
d.children||[this.makeRow(),this.makeRow()];return e.createNode("MathRadical",d)},makeFenced:function(d){d=d||{};d.children=d.children||[this.makeRow()];return e.createNode("MathFenced",d)},makeStyle:function(d){d=d||{};d.children=d.children||[this.makeRow()];return e.createNode("MathStyle",d)},makeAction:function(d){d=d||{};d.children=d.children||[this.makeRow(),this.makeRow()];return e.createNode("MathAction",d)},makeSpace:function(d){d=d||{};return e.createNode("MathSpace",d)},makeScript:function(d){d=
d||{};d.children=d.children||[this.makeRow(),this.makeRow(),this.makeRow()];return e.createNode("MathScript",d)},makeMultiScript:function(d){d=d||{};d.children=d.children||[this.makeRow()];return e.createNode("MathMultiScript",d)},makeMatrix:function(d){d.children=d.children||[];return e.createNode("MathMatrix",d)},name:function(d){return this.peg.names[d.name]},slice:function(d){return this.str.slice(d.start,d.end)},push:function(d){this.row.appendChild(d);return d},pushText:function(d,c,b){b=b||
{};b.text=d;b.kind=c;!d&&"placeholder-atom"===b["data-category"]&&(b.kind="placeholder");d="symbol"===c?this.makeSymbol(d,b):this.makeText(b);return this.push(d)},pushCode:function(d,c){c=c||{};c.text=d;c.kind="code";return this.push(this.makeText(c))},pushMtext:function(d,c){c=c||{};c.text=d;c.kind="mtext";return this.push(this.makeText(c))},pushMspace:function(d,c){c=c||{};c.length=d;return this.push(this.makeSpace(c))},pushNumber:function(d,c){c=c||{};c.text=d;c.kind="number";return this.push(this.makeText(c))},
pushSymbol:function(d,c){return this.push(this.makeSymbol(d,c))},pushDelim:function(d,c){c=c||{};c.symbolName=d;return this.push(this.makeDelim(c))},unknownAction:function(){},fireAction:function(d,c){d?1===d.length?d[0].call(this,c):2===d.length?d[0].call(this,c,d[1]):3===d.length?d[0].call(this,c,d[1],d[2]):d[0].call(this,c,d[1],d[2],d[3]):this.unknownAction(c)},append:function(d){this.fireAction(this.actionMap[this.peg.names[d.name]],d)},mapSymbolName:function(d){var c=this.symbolMap[d];return c?
c:d},consume:function(){},appendSymbol:function(d){d=this.slice(d).trim();this.pushSymbol(this.mapSymbolName(d));this.consume(1)}})})},"MW/equations/renderer/model/utils/MathNodeUtils":function(){define(["dojo/_base/lang","./../MathRow"],function(h,f){return{isNonEmptyRow:function(g){return g&&g instanceof f&&g.children&&0<g.children.length},sanitizeModel:function(f){f.children&&f.children.forEach(function(e){e&&(e.parent=f,this.sanitizeModel(e))},this);return f}}})},"MW/equations/renderer/model/MathRow":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang ./MathInnerNode ./utils/MathMLExportUtils ./utils/TeXUtils".split(" "),
function(h,f,g,e,d,c){return f(e,{constructor:function(b){b=b||{};this.className="MathRow";this.TeXSpacing=b.TeXSpacing},_layoutStretchyDelimiters:function(b,a){var c,d=this.children,e=b.children,f=b.ascent(),g=b.descent(),h=!1,r;for(c=0;c<d.length;c+=1)r=d[c],r.isVerticalDelimiter()&&(h=!0,r=e[c],r.resizeAndCenterDelimiter(a,f,g));return h},_exportMathML:function(b){var a=d.startTag(b,"mrow",this);this.children.forEach(function(c){a+=c._exportMathML(b)});return a+=d.endTag("mrow")},_exportLaTeX:function(b){var a=
b.openParens,d=b.addBraces;b.openParens=0;b.addBraces=c.NEVER_ADD_BRACES;var e,f="";this.children.forEach(function(a){f+=c.exportChild(a,b)});if(0<b.openParens)for(e=0;e<b.openParens;e+=1)f+="\\right.";else if(0>b.openParens)for(e=0;e<-b.openParens;e+=1)f="\\left."+f;b.openParens=a;b.addBraces=d;return f},isItalicText:function(b){var a=this.children&&1===this.children.length&&this.children[0];return a&&a.isItalicText(b)},getAccent:function(){var b=this.children&&1===this.children.length&&this.children[0];
return b?b.getAccent():null},layout:function(b){var a=b.layoutChildren(h.map(this.children,g.hitch(this,function(a){a.baseIsItalic=this.baseIsItalic;a.accentType=this.accentType;if(a.parent!==this)throw Error("Missing or wrong parent in equation node.");return a}))),c=b.parseBoxes("h{*}",a);c.subLeftShift=0;c.supRightShift=0;c.supDownShift=0;c._largeOp=!1;a.forEach(function(a){c.supDownShift=Math.max(a.supDownShift||0,c.supDownShift)});1===a.length&&(a=a[0],c.subLeftShift=Math.max(a.subLeftShift||
0,c.subLeftShift),c.supRightShift=Math.max(a.supRightShift||0,c.supRightShift),c._largeOp=a._largeOp);c.leftShift=this.leftShift||0;c.rightShift=this.rightShift||0;void 0!==this.TeXSpacing&&(c.spacing=this.TeXSpacing);c.computeMetrics();c.computeRowGaps(b.renderer,0<b.scriptlevel);this._layoutStretchyDelimiters(c,b)&&c.computeMetrics();return c}})})},"MW/equations/renderer/model/MathInnerNode":function(){define(["dojo/_base/declare","dojo/_base/lang","./MathBaseNode"],function(h,f,g){return h(g,{constructor:function(e){e=
e||{};e.children=e.children||[];this.setChildren(e.children)},replaceChild:function(e,d){this.children&&(e!==parseInt(e,10)&&(e=this.children.length),this._setParent(this.children[e],null),this._setParent(d,this),this.children[e]=d)},appendChild:function(e){this.children&&(this._setParent(e,this),this.children.push(e))},setChildren:function(e){this.children&&this.children.forEach(f.hitch(this,function(d){this._setParent(d,null)}));e.forEach(f.hitch(this,function(d){this._setParent(d,this)}));this.children=
e},removeChild:function(e){var d=this.children[e];this._setParent(d,null);this.children.splice(e,1);return d}})})},"MW/equations/renderer/model/MathBaseNode":function(){define(["dojo/_base/declare","../Utilities"],function(h,f){return h(null,{constructor:function(g){g=g||{};f.copyCommonAttributes(g,this)},layout:function(){throw"layout method for class '"+this.className+"'' not defined";},isDisplaystyle:function(){return this.hasOwnProperty("displaystyle")?this.displaystyle:this.parent?this.parent.isDisplaystyle():
!1},exportMathML:function(f){var e="";!0===this.inline&&(e=' display\x3d"inline"');!1===this.inline&&(e=' display\x3d"block"');return'\x3cmath xmlns\x3d"http://www.w3.org/1998/Math/MathML"'+e+"\x3e"+this._exportMathML(f)+"\x3c/math\x3e"},exportLaTeX:function(f){return this._exportLaTeX(f)},_exportMathML:function(f){throw"Unimplemented abstract method _exportMathML";},_exportLaTeX:function(f){throw"Unimplemented abstract method _exportLaTeX";},_mathvariantIsItalic:function(f){return-1!==(f||"").indexOf("italic")},
isItalicText:function(){return!1},isVerticalDelimiter:function(){return!1},isIdentifier:function(){return!1},getAccent:function(){return null},_setParent:function(f,e){f&&(f.parent=e)}})})},"MW/equations/renderer/Utilities":function(){define(["dojo/_base/lang","./model/utils/MathMLExportUtils"],function(h,f){var g=f.commonMathMLAttributes,e=RegExp(eval('"[\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0901-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0954\\u0962-\\u0963\\u0981\\u09bc\\u09c1-\\u09c4\\u09cd\\u09e2-\\u09e3\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b62-\\u0b63\\u0b82\\u0bc0\\u0bcd\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56\\u0c62-\\u0c63\\u0cbc\\u0cbf\\u0cc6\\u0ccc-\\u0ccd\\u0ce2-\\u0ce3\\u0d41-\\u0d44\\u0d4d\\u0d62-\\u0d63\\u0dca\\u0dd2-\\u0dd4\\u0dd6\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085-\\u1086\\u108d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1dc0-\\u1de6\\u1dfe-\\u1dff\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2de0-\\u2dff\\u302a-\\u302f\\u3099-\\u309a\\ua66f\\ua67c-\\ua67d\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua926-\\ua92d\\ua947-\\ua951\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26]|\\ud800\\uddfd|\\ud802[\\ude01-\\ude03\\ude05-\\ude06\\ude0c-\\ude0f\\ude38-\\ude3a\\ude3f]|\\ud834[\\udd67-\\udd69\\udd7b-\\udd82\\udd85-\\udd8b\\uddaa-\\uddad\\ude42-\\ude44]|\\udb40[\\udd00-\\uddef]"'),
"g");return{isSingleCharIdentString:function(d){return 1===d.replace(e,"").length},copyCommonAttributes:function(d,c){g.forEach(h.hitch(this,function(b){d.hasOwnProperty(b)&&(c[b]=d[b])}))},stringAscentBelowXHeight:function(d){return null!==d.match(/^[acegmnopqrsuvwxyz+\-\u2009\u2212\u03B1\u03B3\u03B5\u03B7\u03B9\u03BA\u03BC\u03BD\u03BF\u03C0\u03C1\u03C3\u03C4\u03C5\u03C7\u03C8\u03C9\u03C6\u03D6\u03F1\u03DB]*$/)}}})},"MW/equations/renderer/model/utils/MathMLExportUtils":function(){define([],function(){var h=
["class","mathvariant","style","id","data-category"];return{commonMathMLAttributes:h.concat([]),startTag:function(f,g,e,d){f.attribBlackList=f.attribBlackList||[];d=d||[];var c="\x3c"+g;h.concat(d).forEach(function(b){e.hasOwnProperty(b)&&(void 0!==e[b]&&-1===f.attribBlackList.indexOf(b))&&(c+=" "+b+'\x3d"'+e[b]+'"')});return c+="\x3e"},maskSpecialCharacters:function(f){var g={"\x26":"\x26amp;","\x3c":"\x26lt;"};return f.replace(/[&<]/g,function(e){return g[e]})},endTag:function(f){return"\x3c/"+
f+"\x3e"},emptyTag:function(f){return"\x3c"+f+"/\x3e"}}})},"MW/equations/renderer/model/utils/TeXUtils":function(){define(["../Symbols","../importers/TeXSymbols"],function(h,f){function g(a,b){var e=c[a];if("string"===typeof e)return e;e=d[a]||a;return f[e]?"\\"+e+(b||""):h.getCharForSymbolName(a)}var e={"int":"intop",oint:"contourintop",intbar:"fpartintop",bot:"uptack",top:"downtack",colon:"colonPunct",owns:"ni",dots:"ldots",ge:"geq",le:"leq",ne:"neq",gets:"leftarrow",to:"rightarrow",iff:"Longleftrightarrow",
gt:"\x3e",lt:"\x3c",asymp:"asympeq",_:"underscore","|":"dblverticalbar","{":"braceleft","}":"braceright","(":"parenleft",")":"parenright",Vert:"dblverticalbar",vert:"verticalbar",langle:"anglebracketleft",rangle:"anglebracketright",lceil:"ceilleft",rceil:"ceilright",lfloor:"floorleft",rfloor:"floorright",lbrace:"braceleft",rbrace:"braceright",lbrack:"bracketleft",rbrack:"bracketright",llbracket:"whitesquarebracketleft",rrbracket:"whitesquarebracketright",vee:"lor",wedge:"land",lnot:"neg","\x26":"ampersand"},
d={};Object.keys(e).forEach(function(a){d[e[a]]=a});d["\x3c"]=null;d["\x3e"]=null;var c={verticalbar:"|",dblverticalbar:"\\|",ampersand:"\\\x26","-":"-","*":"*",InvisibleTimes:" ",ZeroWidthSpace:""};"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(function(a){c[a+"opf"]="\\mathbb{"+a+"}";c[a+"scr"]="\\mathcal{"+a+"}";c[a+"fr"]="\\mathfrak{"+a+"}"});Object.keys(h.notSymbols).forEach(function(a){c[h.notSymbols[a]]="\\not"+(1===a.length?a:"\\"+a)+" "});var b={omicron:"o",Alpha:"A",
Beta:"B",Epsilon:"E",Zeta:"Z",Eta:"H",Iota:"I",Kappa:"K",Mu:"M",Nu:"N",Omicron:"O",Rho:"P",Tau:"T",Chi:"X"};Object.keys(b).forEach(function(a){c[a]=b[a]});var a="arccos arcsin arctan arg cos cosh cot coth csc deg dim exp hom ker lg ln log sec sin sinh tan tanh".split(" "),k="det gcd inf lim liminf limsup max min Pr sup".split(" "),l={ss:"\u00df",O:"\u00d8",o:"\u00f8",L:"\u0141",l:"\u0142",OE:"\u0152",oe:"\u0153",AE:"\u00c6",ae:"\u00e6",AA:"A\u030a",aa:"a\u030a"},m=null,q=null,n={"`":"\u0300","'":"\u0301",
"^":"\u0302",'"':"\u0308","~":"\u0303","\x3d":"\u0304",".":"\u0307",u:"\u0306",v:"\u030c",H:"\u030b",c:"\u0327",d:"\u0323",b:"\u0331"},p=null;return{exportLaTeX:function(a,b){b=b||{};b.openParens=0;b.alwaysUseBraces=!1;var c,d="";for(c=0;c<a.length;c+=1)d+=a[c].exportLaTeX(b);return 1<d.length?d.trim():d},ALWAYS_ADD_BRACES:"always",NEVER_ADD_BRACES:"never",ADD_BRACES_WHERE_NEEDED:"standard",exportChild:function(a,b){var c=b.addBraces;b.addBraces="standard";var d=a?a._exportLaTeX(b):"";b.addBraces=
c;d="never"!==b.addBraces&&1<d.length&&"{}"!==d&&!d.match(/^{.}$/)?"{"+d+"}":d;return d=2>d.length&&"always"===b.addBraces?"{"+d+"}":d},functionNames:a,limitsFunctionNames:k,allFunctionNames:a+k,symbolMap:e,specialLetters:l,combiningChars:n,sanitzeLaTeXString:function(a){a=a.replace(/[^\u0000-\u007f]/g,function(a){var b=h.unicodeMap[a];return b?g(b," "):a});return a=a.replace(/\\omicron/g,"o")},replaceUnicodeBySpecialLettersName:function(a){if(!m){var b;m={};q={};for(b in l)l.hasOwnProperty(b)&&(1<
b.length?q[l[b]]=b:m[l[b]]=b)}Object.keys(q).forEach(function(b){a=a.replace(RegExp(b,"g"),"\\"+q[b])});return a.replace(/[^\000-\177]/g,function(a){var b=a;m[a]&&(b="\\"+m[a]);return b})},replaceUnicodeByCombiningCharsName:function(a){if(!p){var b;p={};for(b in n)n.hasOwnProperty(b)&&(p[n[b]]=b)}return a.replace(/[\000-\177][^\000-\177]/g,function(a){var b=a;p[a[1]]&&(b="\\"+p[a[1]]+a[0]);return b})},commandName:g}})},"MW/equations/renderer/model/Symbols":function(){define(["dojo/has","./SpacingClasses",
"./utils/MathMLEntities","../../utils/StringUtils","../../utils/HasExtensions"],function(h,f,g,e){var d={isLargeOpSymbol:function(a){return"symbol"===a.kind&&d._isLargeOp(a.symbolName)},isOpeningDelimiter:function(a){return(a=d.symbolMap[a])&&a.delimiterType&&-1!==a.delimiterType.indexOf("open")},isClosingDelimiter:function(a){return(a=d.symbolMap[a])&&a.delimiterType&&-1!==a.delimiterType.indexOf("close")},isSeparator:function(a){return(a=d.symbolMap[a])&&a.delimiterType&&-1!==a.delimiterType.indexOf("separator")},
hasXHeight:function(a){return(a=d.getSymbol(a))&&a.hasXHeight},isDelimiter:function(a){return(a=d.symbolMap[a])&&a.delimiterType},isAccent:function(a){return(a=d.symbolMap[a||""])&&(a.accentHeight||a.accentStretchy)},isIdentifier:function(a){return(a=d.symbolMap[a||""])&&a.isIdentifier},isOperator:function(a){return(a=d.symbolMap[a||""])&&a.spacing},isStretchyOperatorByDefault:function(a){return(a=d.symbolMap[a]||d.symbolMap[d.unicodeMap[a]])&&a.stretchyDefault},isStretchyAccent:function(a){return(a=
d.symbolMap[a])&&a.accentStretchy},lookupLargeOp:function(a,b){return d.symbolMap[a+(b?"display":"")]},notSymbols:{"\x3d":"neq","\x3c":"notlt","\x3e":"notgt",exists:"notexists",leq:"notleq",geq:"notgeq",equiv:"notequiv",approx:"notapprox",cong:"notcong",sim:"notsim",simeq:"notsimeq",models:"notmodels","in":"notin",ni:"notni",succ:"notsucc",succeq:"notsucceq",prec:"notprec",preceq:"notpreceq",parallel:"notparallel",subset:"notsubset",supset:"notsupset",subseteq:"notsubseteq",supseteq:"notsupseteq"},
lookupNotSymbol:function(a){"\\"===a.charAt(0)&&(a=a.slice(1));return(a=this.notSymbols[a])?a:null},getSymbol:function(a){return d.symbolMap[a]||d.symbolMap[d.unicodeMap[a]]},getSymbolName:function(a){return d.unicodeMap[a]||a},getCharForSymbolName:function(a){var b=d.getSymbol(a);return!b?a:this.getCharForSymbol(b)},getCharForSymbol:function(a){return e.fromCodePoint(a.glyph||a.unicode)},serializeSymbol:function(a){return(a=d.getSymbol(a))&&a.entity?g.replace(a.entity):d.getCharForSymbol(a)},_isLargeOp:function(a){return(a=
d.symbolMap[a])&&a.largeOp},entities:g,initSymbolMap:function(){return{alpha:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:945},beta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:946},gamma:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:947},delta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:948},epsilon:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:1013},zeta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,
unicode:950},eta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:951},theta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:952},iota:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:953},kappa:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:954},lambda:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:955},mu:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:956},nu:{font:"symbol",fontStyle:"italic",
isIdentifier:!0,hasXHeight:!0,unicode:957},xi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:958},omicron:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:959},pi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:960},rho:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:961},sigma:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:963},tau:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,
unicode:964},upsilon:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:965},phi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:981},chi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:967},psi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:968},omega:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:969},varepsilon:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:949},varbeta:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,unicode:976},vartheta:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:977},varphi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:966},varpi:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:982},varrho:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:1009},varsigma:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:987},Alpha:{font:"symbol",isIdentifier:!0,unicode:913},
Beta:{font:"symbol",isIdentifier:!0,unicode:914},Gamma:{font:"symbol",isIdentifier:!0,unicode:915},Delta:{font:"symbol",isIdentifier:!0,unicode:916},Epsilon:{font:"symbol",isIdentifier:!0,unicode:917},Zeta:{font:"symbol",isIdentifier:!0,unicode:918},Eta:{font:"symbol",isIdentifier:!0,unicode:919},Theta:{font:"symbol",isIdentifier:!0,unicode:920},Iota:{font:"symbol",isIdentifier:!0,unicode:921},Kappa:{font:"symbol",isIdentifier:!0,unicode:922},Lambda:{font:"symbol",isIdentifier:!0,unicode:923},Mu:{font:"symbol",
isIdentifier:!0,unicode:924},Nu:{font:"symbol",isIdentifier:!0,unicode:925},Xi:{font:"symbol",isIdentifier:!0,unicode:926},Omicron:{font:"symbol",isIdentifier:!0,unicode:927},Pi:{font:"symbol",isIdentifier:!0,unicode:928},Rho:{font:"symbol",isIdentifier:!0,unicode:929},Sigma:{font:"symbol",isIdentifier:!0,unicode:931},Tau:{font:"symbol",isIdentifier:!0,unicode:932},Upsilon:{font:"symbol",isIdentifier:!0,unicode:933},Phi:{font:"symbol",isIdentifier:!0,unicode:934},Chi:{font:"symbol",isIdentifier:!0,
unicode:935},Psi:{font:"symbol",isIdentifier:!0,unicode:936},Omega:{font:"symbol",isIdentifier:!0,unicode:937},Aopf:{font:"symbol",isIdentifier:!0,unicode:120120},Bopf:{font:"symbol",isIdentifier:!0,unicode:120121},Copf:{font:"symbol",isIdentifier:!0,unicode:8450},Dopf:{font:"symbol",isIdentifier:!0,unicode:120123},Eopf:{font:"symbol",isIdentifier:!0,unicode:120124},Fopf:{font:"symbol",isIdentifier:!0,unicode:120125},Gopf:{font:"symbol",isIdentifier:!0,unicode:120126},Hopf:{font:"symbol",isIdentifier:!0,
unicode:8461},Iopf:{font:"symbol",isIdentifier:!0,unicode:120128},Jopf:{font:"symbol",isIdentifier:!0,unicode:120129},Kopf:{font:"symbol",isIdentifier:!0,unicode:120130},Lopf:{font:"symbol",isIdentifier:!0,unicode:120131},Mopf:{font:"symbol",isIdentifier:!0,unicode:120132},Nopf:{font:"symbol",isIdentifier:!0,unicode:8469},Oopf:{font:"symbol",isIdentifier:!0,unicode:120134},Popf:{font:"symbol",isIdentifier:!0,unicode:8473},Qopf:{font:"symbol",isIdentifier:!0,unicode:8474},Ropf:{font:"symbol",isIdentifier:!0,
unicode:8477},Sopf:{font:"symbol",isIdentifier:!0,unicode:120138},Topf:{font:"symbol",isIdentifier:!0,unicode:120139},Uopf:{font:"symbol",isIdentifier:!0,unicode:120140},Vopf:{font:"symbol",isIdentifier:!0,unicode:120141},Wopf:{font:"symbol",isIdentifier:!0,unicode:120142},Xopf:{font:"symbol",isIdentifier:!0,unicode:120143},Yopf:{font:"symbol",isIdentifier:!0,unicode:120144},Zopf:{font:"symbol",isIdentifier:!0,unicode:8484},aopf:{font:"symbol",isIdentifier:!0,unicode:120146},bopf:{font:"symbol",isIdentifier:!0,
unicode:120147},copf:{font:"symbol",isIdentifier:!0,unicode:120148},dopf:{font:"symbol",isIdentifier:!0,unicode:120149},eopf:{font:"symbol",isIdentifier:!0,unicode:120150},fopf:{font:"symbol",isIdentifier:!0,unicode:120151},gopf:{font:"symbol",isIdentifier:!0,unicode:120152},hopf:{font:"symbol",isIdentifier:!0,unicode:120153},iopf:{font:"symbol",isIdentifier:!0,unicode:120154},jopf:{font:"symbol",isIdentifier:!0,unicode:120155},kopf:{font:"symbol",isIdentifier:!0,unicode:120156},lopf:{font:"symbol",
isIdentifier:!0,unicode:120157},mopf:{font:"symbol",isIdentifier:!0,unicode:120158},nopf:{font:"symbol",isIdentifier:!0,unicode:120159},oopf:{font:"symbol",isIdentifier:!0,unicode:120160},popf:{font:"symbol",isIdentifier:!0,unicode:120161},qopf:{font:"symbol",isIdentifier:!0,unicode:120162},ropf:{font:"symbol",isIdentifier:!0,unicode:120163},sopf:{font:"symbol",isIdentifier:!0,unicode:120164},topf:{font:"symbol",isIdentifier:!0,unicode:120165},uopf:{font:"symbol",isIdentifier:!0,unicode:120166},vopf:{font:"symbol",
isIdentifier:!0,unicode:120167},wopf:{font:"symbol",isIdentifier:!0,unicode:120168},xopf:{font:"symbol",isIdentifier:!0,unicode:120169},yopf:{font:"symbol",isIdentifier:!0,unicode:120170},zopf:{font:"symbol",isIdentifier:!0,unicode:120171},ascr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:119990},bscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119991},cscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:119992},dscr:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,unicode:119993},escr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:8495},fscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119995},gscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:8458},hscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119997},iscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119998},jscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119999},
kscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:12E4},lscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:120001},mscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120002},nscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120003},oscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:8500},pscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120005},qscr:{font:"symbol",fontStyle:"italic",
isIdentifier:!0,hasXHeight:!0,unicode:120006},rscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120007},sscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120008},tscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:120009},uscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120010},vscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120011},wscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,
hasXHeight:!0,unicode:120012},xscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120013},yscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120014},zscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:120015},Ascr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119964},Bscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8492},Cscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119966},Dscr:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,unicode:119967},Escr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8496},Fscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8497},Gscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119970},Hscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8459},Iscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8464},Jscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119973},Kscr:{font:"symbol",fontStyle:"italic",
isIdentifier:!0,unicode:119974},Lscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8466},Mscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:8499},Nscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119977},Oscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119978},Pscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119979},Qscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119980},Rscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,
unicode:8475},Sscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119982},Tscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119983},Uscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119984},Vscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119985},Wscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119986},Xscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119987},Yscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119988},
Zscr:{font:"symbol",fontStyle:"italic",isIdentifier:!0,unicode:119989},afr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120094},bfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120095},cfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120096},dfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120097},efr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120098},ffr:{font:"symbol",fontStyle:"normal",
isIdentifier:!0,unicode:120099},gfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120100},hfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120101},ifr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120102},jfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120103},kfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120104},lfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120105},mfr:{font:"symbol",fontStyle:"normal",
isIdentifier:!0,hasXHeight:!0,unicode:120106},nfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120107},ofr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120108},pfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120109},qfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120110},rfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120111},sfr:{font:"symbol",fontStyle:"normal",
isIdentifier:!0,hasXHeight:!0,unicode:120112},tfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120113},ufr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120114},vfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120115},wfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120116},xfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120117},yfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,
hasXHeight:!0,unicode:120118},zfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:120119},Afr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120068},Bfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120069},Cfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8493},Dfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120071},Efr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120072},Ffr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,
unicode:120073},Gfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120074},Hfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8460},Ifr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8465},Im:{font:"symbol",fontStyle:"normal",unicode:8465},Jfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120077},Kfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120078},Lfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120079},Mfr:{font:"symbol",
fontStyle:"normal",isIdentifier:!0,unicode:120080},Nfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120081},Ofr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120082},Pfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120083},Qfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120084},Rfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8476},Re:{font:"symbol",fontStyle:"normal",unicode:8476},Sfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,
unicode:120086},Tfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120087},Ufr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120088},Vfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120089},Wfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120090},Xfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120091},Yfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:120092},Zfr:{font:"symbol",fontStyle:"normal",isIdentifier:!0,unicode:8488},
Kelvin:{font:"symbol",isIdentifier:!0,unicode:8490},infty:{font:"symbol",hasXHeight:!0,unicode:8734},partial:{font:"symbol",unicode:8706},aleph:{font:"symbol",unicode:8501},downtack:{font:"symbol",unicode:8868},uptack:{font:"symbol",unicode:8869},angle:{font:"symbol",unicode:8736},ell:{font:"symbol",unicode:8467},hbar:{font:"symbol",unicode:8463},emptyset:{font:"symbol",unicode:8709},exists:{font:"symbol",unicode:8707},notexists:{font:"symbol",unicode:8708},forall:{font:"symbol",unicode:8704},imath:{font:"symbol",
fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:305},jmath:{font:"symbol",fontStyle:"italic",isIdentifier:!0,hasXHeight:!0,unicode:567},i:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:305},j:{font:"symbol",fontStyle:"normal",isIdentifier:!0,hasXHeight:!0,unicode:567},wp:{font:"symbol",unicode:8472},nabla:{font:"symbol",unicode:8711},ordPeriod:{font:"symbol",glyph:46,entity:"\x26period;"},dollar:{font:"symbol",unicode:36},ampersand:{font:"symbol",unicode:38},percent:{font:"symbol",
unicode:37},neg:{font:"symbol",unicode:172},macron:{font:"symbol",unicode:8254,alternateInputName:175,glyphTop:870,glyphBottom:720,accentDownShift:100,accentStretchy:!0,stretchy:!0,stretchyDefault:!0,width:500},macronleft:{font:"symbol",glyph:8254,width:500,glyphTop:870,glyphBottom:720,accentDownShift:100},macronright:{font:"symbol",glyph:8254,width:500},macronex:{font:"symbol",glyph:8254,width:500},underscore:{font:"symbol",unicode:95,glyphTop:-75,glyphBottom:-125,accentStretchy:!0,stretchyDefault:!0},
circumflex:{font:"stixsize1",unicode:710,alternateInputName:94,accentStretchy:!0,stretchyDefault:!1,glyphTop:770,glyphBottom:550,accentDownShift:-300,width:560},circumflexbig:{font:"stixsize2",glyph:710,glyphTop:780,glyphBottom:560,accentDownShift:-500,width:979},circumflexBig:{font:"stixsize3",glyph:710,glyphTop:780,glyphBottom:560,accentDownShift:-750,width:1460},circumflexbigg:{font:"stixsize4",glyph:710,glyphTop:800,glyphBottom:570,accentDownShift:-750,width:1886},circumflexBigg:{font:"stixsize5",
glyph:710,glyphTop:820,glyphBottom:570,accentDownShift:120,width:2328},caron:{font:"symbol",unicode:711,accentHeight:0.3},tildeAccent:{font:"symbol",unicode:126,spacing:f.BIN,accentHeight:0.6},smallTildeAccent:{font:"symbol",unicode:732,spacing:f.BIN,accentHeight:0.3},surd:{font:"symbol",unicode:8730},triangle:{font:"symbol",glyph:9653,entity:"\x26triangle;"},prime:{font:"symbol",unicode:8242,supDownShift:0.25},doubleprime:{font:"symbol",unicode:8243,supDownShift:0.25},sum:{font:"extra",glyph:61520,
largeOp:"sumdisplay",spacing:f.OP,width:1056,movableLimits:!0,entity:"\x26Sum;"},sumdisplay:{font:"extra",glyph:61528,size:1.4,spacing:f.OP,width:1444},prod:{font:"extra",glyph:61521,largeOp:"proddisplay",spacing:f.OP,width:944,movableLimits:!0,entity:"\x26prod;"},proddisplay:{font:"extra",glyph:61529,size:1.4,spacing:f.OP,width:1278},intop:{font:"extra",glyph:61522,size:1.11,largeOp:"intopdisplay",spacing:f.OP,width:609,subLeftShift:0.2,supRightShift:0.1,entity:"\x26Integral;"},intopdisplay:{font:"extra",
glyph:61530,size:2.222,spacing:f.OP,width:943,subLeftShift:0.4,supRightShift:0.1},contourintop:{font:"extra",glyph:61512,size:1.11,largeOp:"contourintopdisplay",spacing:f.OP,width:609,subLeftShift:0.2,supRightShift:0.1,entity:"\x26ContourIntegral;"},contourintopdisplay:{font:"extra",glyph:61513,size:2.222,spacing:f.OP,width:943,subLeftShift:0.4,supRightShift:0.1},fpartintop:{font:"extra",glyph:61567,size:1.11,largeOp:"fpartintopdisplay",spacing:f.OP,width:609,subLeftShift:0.2,supRightShift:0.1,entity:"\x26fpartint;"},
fpartintopdisplay:{font:"extra",glyph:61568,size:2.222,spacing:f.OP,width:943,subLeftShift:0.4,supRightShift:0.1},bigcup:{font:"extra",glyph:61523,largeOp:"bigcupdisplay",spacing:f.OP,width:833,movableLimits:!0,entity:"\x26bigcup;"},bigcupdisplay:{font:"extra",glyph:61647,size:1.4,spacing:f.OP,width:1111},bigcap:{font:"extra",glyph:61524,largeOp:"bigcapdisplay",spacing:f.OP,width:833,movableLimits:!0,entity:"\x26bigcap;"},bigcapdisplay:{font:"extra",glyph:61648,size:1.4,spacing:f.OP,width:1111},bigsqcup:{font:"extra",
glyph:61510,largeOp:"bigsqcupdisplay",spacing:f.OP,width:833,movableLimits:!0,entity:"\x26bigsqcup;"},bigsqcupdisplay:{font:"extra",glyph:61511,size:1.4,spacing:f.OP,width:1111},biguplus:{font:"extra",glyph:61525,largeOp:"bigcapdisplay",spacing:f.OP,width:833,movableLimits:!0,entity:"\x26biguplus;"},biguplusdisplay:{font:"extra",glyph:61651,size:1.4,spacing:f.OP,width:1111},bigwedge:{font:"extra",glyph:61526,largeOp:"bigwedgedisplay",spacing:f.OP,width:833,movableLimits:!0,entity:"\x26bigwedge;"},
bigwedgedisplay:{font:"extra",glyph:61534,size:1.4,spacing:f.OP,width:1111},bigvee:{font:"extra",glyph:61527,largeOp:"bigveedisplay",spacing:f.OP,width:833,movableLimits:!0,entity:"\x26bigvee;"},bigveedisplay:{font:"extra",glyph:61535,size:1.4,spacing:f.OP,width:1111},bigodot:{font:"extra",glyph:61514,largeOp:"bigodotdisplay",spacing:f.OP,width:1111,movableLimits:!0,entity:"\x26bigodot;"},bigodotdisplay:{font:"extra",glyph:61515,size:1.4,spacing:f.OP,width:1511},bigoplus:{font:"extra",glyph:61516,
largeOp:"bigoplusdisplay",spacing:f.OP,width:1111,movableLimits:!0,entity:"\x26bigoplus;"},bigoplusdisplay:{font:"extra",glyph:61517,size:1.4,spacing:f.OP,width:1511},bigotimes:{font:"extra",glyph:61518,largeOp:"bigotimesdisplay",spacing:f.OP,width:1111,movableLimits:!0,entity:"\x26bigotimes;"},bigotimesdisplay:{font:"extra",glyph:61519,size:1.4,spacing:f.OP,width:1511},"+":{font:"symbol",unicode:43,spacing:f.BIN},"-":{font:"symbol",unicode:8722,alternateInputName:45,spacing:f.BIN,entity:"-"},pm:{font:"symbol",
unicode:177,spacing:f.BIN},mp:{font:"symbol",unicode:8723,spacing:f.BIN},times:{font:"symbol",unicode:215,spacing:f.BIN},ast:{font:"symbol",unicode:8727,spacing:f.BIN},"*":{font:"symbol",glyph:8727,spacing:f.BIN,entity:"*"},div:{font:"symbol",unicode:247,spacing:f.BIN},oplus:{font:"symbol",unicode:8853,spacing:f.BIN},ominus:{font:"symbol",unicode:8854,spacing:f.BIN},otimes:{font:"symbol",unicode:8855,spacing:f.BIN},oslash:{font:"symbol",unicode:8856,spacing:f.BIN},odot:{font:"symbol",unicode:8857,
spacing:f.BIN},cup:{font:"symbol",unicode:8746,spacing:f.BIN},cap:{font:"symbol",unicode:8745,spacing:f.BIN},land:{font:"symbol",unicode:8743,spacing:f.BIN},lor:{font:"symbol",unicode:8744,spacing:f.BIN},amalg:{font:"symbol",unicode:10815,spacing:f.BIN},uplus:{font:"symbol",unicode:8846,spacing:f.BIN},bullet:{font:"symbol",unicode:8226,spacing:f.BIN},cdot:{font:"symbol",unicode:8901,spacing:f.BIN},middledot:{font:"symbol",unicode:183,spacing:f.BIN},circ:{font:"symbol",unicode:8728,spacing:f.BIN},
dagger:{font:"symbol",unicode:8224,spacing:f.BIN},ddagger:{font:"symbol",unicode:8225,spacing:f.BIN},diamond:{font:"symbol",unicode:9671,spacing:f.BIN},setminus:{font:"symbol",unicode:8726,spacing:f.BIN},sqcup:{font:"symbol",unicode:8852,spacing:f.BIN},sqcap:{font:"symbol",unicode:8851,spacing:f.BIN},triangleleft:{font:"symbol",unicode:9667,spacing:f.BIN},triangleright:{font:"symbol",unicode:9657,spacing:f.BIN},bigtriangleup:{font:"symbol",unicode:9651,spacing:f.BIN},bigtriangledown:{font:"symbol",
unicode:9661,spacing:f.BIN},bigcirc:{font:"symbol",unicode:9711,spacing:f.BIN},wr:{font:"symbol",unicode:8768,spacing:f.BIN},star:{font:"symbol",unicode:8902,spacing:f.BIN},"\x3c":{font:"symbol",unicode:60,spacing:f.REL,relation:!0},"\x3d":{font:"symbol",unicode:61,spacing:f.REL,relation:!0},"\x3d\x3d":{font:"symbol",spacing:f.REL,relation:!0},"\x3e":{font:"symbol",unicode:62,spacing:f.REL,relation:!0},":":{font:"symbol",unicode:58,spacing:f.REL},mid:{font:"symbol",glyph:124,delimiterType:"separator",
stretchy:!0,stretchyDefault:!0,spacing:f.REL,entity:"\x26vert;"},leq:{font:"symbol",unicode:8804,spacing:f.REL,relation:!0},geq:{font:"symbol",unicode:8805,spacing:f.REL,relation:!0},neq:{font:"symbol",unicode:8800,spacing:f.REL,relation:!0},notleq:{font:"symbol",unicode:8816,spacing:f.REL,relation:!0},notgeq:{font:"symbol",unicode:8817,spacing:f.REL,relation:!0},notlt:{font:"symbol",unicode:8814,spacing:f.REL,relation:!0},notgt:{font:"symbol",unicode:8815,spacing:f.REL,relation:!0},equiv:{font:"symbol",
unicode:8801,spacing:f.REL,relation:!0},notequiv:{font:"symbol",unicode:8802,spacing:f.REL,relation:!0},ll:{font:"symbol",unicode:8810,spacing:f.REL,relation:!0},gg:{font:"symbol",unicode:8811,spacing:f.REL,relation:!0},triangleq:{font:"symbol",unicode:8796,spacing:f.REL,relation:!0},doteq:{font:"symbol",unicode:8784,spacing:f.REL,relation:!0},approx:{font:"symbol",unicode:8776,spacing:f.REL,relation:!0},notapprox:{font:"symbol",unicode:8777,spacing:f.REL,relation:!0},cong:{font:"symbol",unicode:8773,
spacing:f.REL,relation:!0},notcong:{font:"symbol",unicode:8775,spacing:f.REL,relation:!0},sim:{font:"symbol",unicode:8764,spacing:f.REL,relation:!0,accentHeight:0.6},widetilde:{font:"symbol",unicode:65374,spacing:f.REL,relation:!0,accentHeight:0.5},notsim:{font:"symbol",unicode:8769,spacing:f.REL,relation:!0},asympeq:{font:"symbol",unicode:8781,spacing:f.REL,relation:!0},simeq:{font:"symbol",unicode:8771,spacing:f.REL,relation:!0},notsimeq:{font:"symbol",unicode:8772,spacing:f.REL,relation:!0},bowtie:{font:"symbol",
unicode:8904,spacing:f.REL,relation:!0},models:{font:"symbol",unicode:8871,spacing:f.REL,relation:!0},notmodels:{font:"symbol",unicode:8877,spacing:f.REL,relation:!0},"in":{font:"symbol",unicode:8712,spacing:f.REL,relation:!0},notin:{font:"symbol",unicode:8713,spacing:f.REL,relation:!0},ni:{font:"symbol",unicode:8715,spacing:f.REL,relation:!0},notni:{font:"symbol",unicode:8716,spacing:f.REL,relation:!0},succ:{font:"symbol",unicode:8827,spacing:f.REL,relation:!0},notsucc:{font:"symbol",unicode:8833,
spacing:f.REL,relation:!0},succeq:{font:"symbol",unicode:8829,spacing:f.REL,relation:!0},notsucceq:{font:"symbol",unicode:8929,spacing:f.REL,relation:!0},prec:{font:"symbol",unicode:8826,spacing:f.REL,relation:!0},notprec:{font:"symbol",unicode:8832,spacing:f.REL,relation:!0},preceq:{font:"symbol",unicode:8828,spacing:f.REL,relation:!0},notpreceq:{font:"symbol",unicode:8928,spacing:f.REL,relation:!0},dashv:{font:"symbol",unicode:8867,spacing:f.REL,relation:!0},vdash:{font:"symbol",unicode:8866,spacing:f.REL,
relation:!0},parallel:{font:"symbol",unicode:8741,spacing:f.REL,relation:!0},notparallel:{font:"symbol",unicode:8742,spacing:f.REL,relation:!0},perp:{font:"symbol",glyph:8869,spacing:f.REL,relation:!0,entity:"\x26perp;"},propto:{font:"symbol",unicode:8733,spacing:f.REL,relation:!0},sqsubseteq:{font:"symbol",unicode:8849,spacing:f.REL,relation:!0},sqsupseteq:{font:"symbol",unicode:8850,spacing:f.REL,relation:!0},subset:{font:"symbol",unicode:8834,spacing:f.REL,relation:!0},supset:{font:"symbol",unicode:8835,
spacing:f.REL,relation:!0},notsubset:{font:"symbol",unicode:8836,spacing:f.REL,relation:!0},notsupset:{font:"symbol",unicode:8837,spacing:f.REL,relation:!0},subseteq:{font:"symbol",unicode:8838,spacing:f.REL,relation:!0},supseteq:{font:"symbol",unicode:8839,spacing:f.REL,relation:!0},notsubseteq:{font:"symbol",unicode:8840,spacing:f.REL,relation:!0},notsupseteq:{font:"symbol",unicode:8841,spacing:f.REL,relation:!0},combiningSlash:{font:"symbol",unicode:824,spacing:f.REL,relation:!0},therefore:{font:"symbol",
unicode:8756,spacing:f.REL,relation:!0},verticalbar:{font:"extra1",unicode:124,glyph:61615,delimiterType:"separator",stretchy:!0,stretchyDefault:!0,width:333,entity:"\x26vert;"},verticalbartp:{font:"extra",glyph:61615,size:0.6,width:333},verticalbarbt:{font:"extra",glyph:61615,size:0.58},verticalbarex:{font:"extra",glyph:61615,size:0.58},dblverticalbar:{font:"extra1",glyph:61612,delimiterType:"separator",stretchy:!0,stretchyDefault:!0,width:578,entity:"\x26Vert;"},dblverticalbartp:{font:"extra",glyph:61616,
size:0.58,width:556},dblverticalbarbt:{font:"extra",glyph:61616,size:0.6},dblverticalbarex:{font:"extra",glyph:61616,size:0.58},leftarrow:{font:"symbol",unicode:8592,spacing:f.REL,accentHeight:0.8,accentStretchy:!0,stretchyDefault:!0},leftarrowleft:{font:"stixvariants",glyph:8592,spacing:f.REL,accentHeight:0.8,width:415},leftarrowright:{font:"symbol",glyph:9135,spacing:f.REL,width:315},leftarrowex:{font:"symbol",glyph:9135,spacing:f.REL,width:315},rightarrow:{font:"symbol",unicode:8594,spacing:f.REL,
accentHeight:0.8,accentStretchy:!0,stretchyDefault:!0,width:926},rightarrowleft:{font:"symbol",glyph:9135,spacing:f.REL,accentHeight:0.8,width:315},rightarrowright:{font:"stixvariants",glyph:8594,spacing:f.REL,width:415},rightarrowex:{font:"symbol",glyph:9135,spacing:f.REL,width:315},leftrightarrow:{font:"symbol",unicode:8596,spacing:f.REL,accentHeight:0.8,accentStretchy:!0,stretchyDefault:!0},leftrightarrowleft:{font:"stixvariants",glyph:8592,spacing:f.REL,accentHeight:0.8,width:415},leftrightarrowright:{font:"stixvariants",
glyph:8594,spacing:f.REL,width:415},leftrightarrowex:{font:"symbol",glyph:9135,spacing:f.REL,width:315},longleftarrow:{font:"symbol",unicode:10229,spacing:f.REL,accentHeight:0.8},longrightarrow:{font:"symbol",unicode:10230,spacing:f.REL,accentHeight:0.8},longleftrightarrow:{font:"symbol",unicode:10231,spacing:f.REL,accentHeight:0.8},Leftarrow:{font:"symbol",unicode:8656,spacing:f.REL,accentHeight:0.8},Rightarrow:{font:"symbol",unicode:8658,spacing:f.REL,accentHeight:0.8},Leftrightarrow:{font:"symbol",
unicode:8660,spacing:f.REL,accentHeight:0.8},Longleftarrow:{font:"symbol",unicode:10232,spacing:f.REL,accentHeight:0.8},Longrightarrow:{font:"symbol",unicode:10233,spacing:f.REL,accentHeight:0.8},Longleftrightarrow:{font:"symbol",unicode:10234,spacing:f.REL,accentHeight:0.8},uparrow:{font:"symbol",unicode:8593,spacing:f.REL},downarrow:{font:"symbol",unicode:8595,spacing:f.REL},updownarrow:{font:"symbol",unicode:8597,spacing:f.REL},nwarrow:{font:"symbol",unicode:8598,spacing:f.REL},nearrow:{font:"symbol",
unicode:8599,spacing:f.REL},searrow:{font:"symbol",unicode:8600,spacing:f.REL},swarrow:{font:"symbol",unicode:8601,spacing:f.REL},leadsto:{font:"symbol",unicode:8605,spacing:f.REL},mapsto:{font:"symbol",unicode:8614,spacing:f.REL},longmapsto:{font:"symbol",unicode:10236,spacing:f.REL},hookleftarrow:{font:"symbol",unicode:8617,spacing:f.REL,accentHeight:0.8},hookrightarrow:{font:"symbol",unicode:8618,spacing:f.REL,accentHeight:0.8},crarr:{font:"symbol",unicode:8629,spacing:f.REL},leftharpoonup:{font:"symbol",
unicode:8636,spacing:f.REL,accentHeight:0.8},leftharpoondown:{font:"symbol",unicode:8637,spacing:f.REL,accentHeight:0.8},rightharpoonup:{font:"symbol",unicode:8640,spacing:f.REL,accentHeight:0.8},rightharpoondown:{font:"symbol",unicode:8641,spacing:f.REL,accentHeight:0.8},rightleftharpoons:{font:"symbol",unicode:8652,spacing:f.REL,accentHeight:0.8},Uparrow:{font:"symbol",unicode:8657,spacing:f.REL},Downarrow:{font:"symbol",unicode:8659,spacing:f.REL},Updownarrow:{font:"symbol",unicode:8661,spacing:f.REL},
parenleft:{font:"extra1",unicode:40,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:f.OPEN},parenleftbig:{font:"extra2",glyph:40,size:1.2,spacing:f.OPEN,width:458},parenleftBig:{font:"extra3",glyph:40,size:1.8,spacing:f.OPEN,width:597},parenleftbigg:{font:"extra4",glyph:40,size:2.4,spacing:f.OPEN,width:736},parenleftBigg:{font:"extra5",glyph:40,size:3,spacing:f.OPEN,width:792},parenlefttp:{font:"extra",glyph:61488,size:1.8,xOffset:291,width:875},parenleftbt:{font:"extra",glyph:61504,size:1.8},
parenleftex:{font:"extra",glyph:61506,size:0.58},parenright:{font:"extra1",unicode:41,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:f.CLOSE},parenrightbig:{font:"extra2",glyph:41,size:1.2,spacing:f.CLOSE,width:458},parenrightBig:{font:"extra3",glyph:41,size:1.8,spacing:f.CLOSE,width:597},parenrightbigg:{font:"extra4",glyph:41,size:2.4,spacing:f.CLOSE,width:736},parenrightBigg:{font:"extra5",glyph:41,size:3,spacing:f.CLOSE,width:792},parenrighttp:{font:"extra",glyph:61489,size:1.8,xOffset:1095,
width:875},parenrightbt:{font:"extra",glyph:61505,size:1.8},parenrightex:{font:"extra",glyph:61507,size:0.58},bracketleft:{font:"extra1",unicode:91,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:f.OPEN},bracketleftbig:{font:"extra2",glyph:91,size:1.2,spacing:f.OPEN,width:417},bracketleftBig:{font:"extra3",glyph:91,size:1.8,spacing:f.OPEN,width:472},bracketleftbigg:{font:"extra4",glyph:91,size:2.4,spacing:f.OPEN,width:528},bracketleftBigg:{font:"extra5",glyph:91,size:3,spacing:f.OPEN,
width:583},bracketlefttp:{font:"extra",glyph:61490,size:1.8,width:667},bracketleftbt:{font:"extra",glyph:61492,size:1.8},bracketleftex:{font:"extra",glyph:61494,size:0.58},bracketright:{font:"extra1",unicode:93,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:f.CLOSE},bracketrightbig:{font:"extra2",glyph:93,size:1.2,spacing:f.CLOSE,width:417},bracketrightBig:{font:"extra3",glyph:93,size:1.8,spacing:f.CLOSE,width:472},bracketrightbigg:{font:"extra4",glyph:93,size:2.4,spacing:f.CLOSE,width:528},
bracketrightBigg:{font:"extra5",glyph:93,size:3,spacing:f.CLOSE,width:583},bracketrighttp:{font:"extra",glyph:61491,size:1.8,width:667},bracketrightbt:{font:"extra",glyph:61493,size:1.8},bracketrightex:{font:"extra",glyph:61495,size:0.58},whitesquarebracketleft:{font:"extra1",unicode:10214,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:f.OPEN},whitesquarebracketleftbig:{font:"extra2",glyph:10214,size:1.2,spacing:f.OPEN,width:416},whitesquarebracketleftBig:{font:"extra3",glyph:10214,size:1.8,
spacing:f.OPEN,width:471},whitesquarebracketleftbigg:{font:"extra4",glyph:10214,size:2.4,spacing:f.OPEN,width:527},whitesquarebracketleftBigg:{font:"extra5",glyph:10214,size:3,spacing:f.OPEN,width:582},whitesquarebracketlefttp:{font:"extra",glyph:61482,size:1.8,width:666},whitesquarebracketleftbt:{font:"extra",glyph:61484,size:1.8},whitesquarebracketleftex:{font:"extra",glyph:61486,size:0.58},whitesquarebracketright:{font:"extra1",unicode:10215,delimiterType:"close",stretchy:!0,stretchyDefault:!0,
spacing:f.CLOSE},whitesquarebracketrightbig:{font:"extra2",glyph:10215,size:1.2,spacing:f.CLOSE,width:416},whitesquarebracketrightBig:{font:"extra3",glyph:10215,size:1.8,spacing:f.CLOSE,width:471},whitesquarebracketrightbigg:{font:"extra4",glyph:10215,size:2.4,spacing:f.CLOSE,width:527},whitesquarebracketrightBigg:{font:"extra5",glyph:10215,size:3,spacing:f.CLOSE,width:582},whitesquarebracketrighttp:{font:"extra",glyph:61483,size:1.8,width:666},whitesquarebracketrightbt:{font:"extra",glyph:61485,
size:1.8},whitesquarebracketrightex:{font:"extra",glyph:61487,size:0.58},braceleft:{font:"extra1",unicode:123,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:f.OPEN,width:500},braceleftbig:{font:"extra2",glyph:123,size:1.2,spacing:f.OPEN,width:583},braceleftBig:{font:"extra3",glyph:123,size:1.8,spacing:f.OPEN,width:667},braceleftbigg:{font:"extra4",glyph:123,size:2.4,spacing:f.OPEN,width:750},braceleftBigg:{font:"extra5",glyph:123,size:3,spacing:f.OPEN,width:806},bracelefttp:{font:"extra",
glyph:61496,size:0.9,xOffset:555,width:889},braceleftbt:{font:"extra",glyph:61498,size:0.9},braceleftmid:{font:"extra",glyph:61500,size:1.8},braceleftex:{font:"extra",glyph:61502,size:0.38},braceright:{font:"extra1",unicode:125,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:f.CLOSE,width:500},bracerightbig:{font:"extra2",glyph:125,size:1.2,spacing:f.CLOSE,width:583},bracerightBig:{font:"extra3",glyph:125,size:1.8,spacing:f.CLOSE,width:667},bracerightbigg:{font:"extra4",glyph:125,size:2.4,
spacing:f.CLOSE,width:750},bracerightBigg:{font:"extra5",glyph:125,size:3,spacing:f.CLOSE,width:806},bracerighttp:{font:"extra",glyph:61497,size:0.9,xOffset:555,width:889},bracerightbt:{font:"extra",glyph:61499,size:0.9},bracerightmid:{font:"extra",glyph:61501,size:1.8},bracerightex:{font:"extra",glyph:61502,size:0.38},overbrace:{font:"stixsize1",unicode:9182,glyphTop:140,glyphBottom:-90,accentDownShift:-950,accentStretchy:!0,stretchyDefault:!0,width:926},overbracebig:{font:"stixsize2",glyph:9182,
glyphTop:150,glyphBottom:-80,accentDownShift:-1200,width:1460},overbraceBig:{font:"stixsize3",glyph:9182,glyphTop:160,glyphBottom:-90,accentDownShift:-1380,width:1886},overbracebigg:{font:"stixsize4",glyph:9182,glyphTop:180,glyphBottom:-90,accentDownShift:-1350,width:2328},overbraceBigg:{font:"stixsize5",glyph:9182,glyphTop:190,glyphBottom:-90,accentDownShift:-550,width:3238},overbraceleft:{font:"stixsize0",glyph:57659,glyphTop:1220,glyphBottom:510,accentDownShift:280,width:897},overbraceright:{font:"stixsize0",
glyph:57660,width:897},overbracemid:{font:"stixsize0",glyph:57664,width:1844},overbraceex:{font:"stixsize0",glyph:57674,width:633},underbrace:{font:"stixsize1",unicode:9183,glyphTop:790,glyphBottom:565,accentDownShift:-250,accentStretchy:!0,stretchyDefault:!0,width:926},underbracebig:{font:"stixsize2",glyph:9183,glyphTop:800,glyphBottom:570,accentDownShift:-480,width:1460},underbraceBig:{font:"stixsize3",glyph:9183,glyphTop:820,glyphBottom:570,accentDownShift:-680,width:1886},underbracebigg:{font:"stixsize4",
glyph:9183,glyphTop:840,glyphBottom:570,accentDownShift:-650,width:2328},underbraceBigg:{font:"stixsize5",glyph:9183,glyphTop:850,glyphBottom:570,accentDownShift:155,width:3238},underbraceleft:{font:"stixsize0",glyph:57661,glyphTop:180,glyphBottom:-530,accentDownShift:-700,width:897},underbraceright:{font:"stixsize0",glyph:57662,width:897},underbracemid:{font:"stixsize0",glyph:57665,width:1844},underbraceex:{font:"stixsize0",glyph:57675,width:633},floorleft:{font:"extra1",glyph:65,delimiterType:"open",
stretchy:!0,stretchyDefault:!0,spacing:f.OPEN,width:444,alternateInputName:8970,entity:"\x26lfloor;"},floorleftbig:{font:"extra2",glyph:65,size:1.2,spacing:f.OPEN,width:472},floorleftBig:{font:"extra3",glyph:65,size:1.8,spacing:f.OPEN,width:528},floorleftbigg:{font:"extra4",glyph:65,size:2.4,spacing:f.OPEN,width:583},floorleftBigg:{font:"extra5",glyph:65,size:3,spacing:f.OPEN,width:639},floorlefttp:{font:"extra",glyph:61494,size:0.6,width:667},floorleftbt:{font:"extra",glyph:61492,size:1.8},floorleftex:{font:"extra",
glyph:61494,size:0.58},floorright:{font:"extra1",glyph:66,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:f.CLOSE,width:444,alternateInputName:8971,entity:"\x26rfloor;"},floorrightbig:{font:"extra2",glyph:66,size:1.2,spacing:f.CLOSE,width:472},floorrightBig:{font:"extra3",glyph:66,size:1.8,spacing:f.CLOSE,width:528},floorrightbigg:{font:"extra4",glyph:66,size:2.4,spacing:f.CLOSE,width:583},floorrightBigg:{font:"extra5",glyph:66,size:3,spacing:f.CLOSE,width:639},floorrighttp:{font:"extra",
glyph:61495,size:0.6,width:667},floorrightbt:{font:"extra",glyph:61493,size:1.8},floorrightex:{font:"extra",glyph:61495,size:0.58},ceilleft:{font:"extra1",glyph:67,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:f.OPEN,width:444,alternateInputName:8968,entity:"\x26lceil;"},ceilleftbig:{font:"extra2",glyph:67,size:1.2,spacing:f.OPEN,width:472},ceilleftBig:{font:"extra3",glyph:67,size:1.8,spacing:f.OPEN,width:528},ceilleftbigg:{font:"extra4",glyph:67,size:2.4,spacing:f.OPEN,width:583},ceilleftBigg:{font:"extra5",
glyph:67,size:3,spacing:f.OPEN,width:639},ceillefttp:{font:"extra",glyph:61490,size:1.8,width:667},ceilleftbt:{font:"extra",glyph:61494,size:0.6},ceilleftex:{font:"extra",glyph:61494,size:0.58},ceilright:{font:"extra1",glyph:68,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:f.CLOSE,width:444,alternateInputName:8969,entity:"\x26rceil;"},ceilrightbig:{font:"extra2",glyph:68,size:1.2,spacing:f.CLOSE,width:472},ceilrightBig:{font:"extra3",glyph:68,size:1.8,spacing:f.CLOSE,width:528},ceilrightbigg:{font:"extra4",
glyph:68,size:2.4,spacing:f.CLOSE,width:583},ceilrightBigg:{font:"extra5",glyph:68,size:3,spacing:f.CLOSE,width:639},ceilrighttp:{font:"extra",glyph:61491,size:1.8,width:667},ceilrightbt:{font:"extra",glyph:61495,size:0.6},ceilrightex:{font:"extra",glyph:61495,size:0.58},anglebracketleft:{font:"extra1",glyph:69,delimiterType:"open",stretchy:!0,stretchyDefault:!0,spacing:f.OPEN,width:389,alternateInputName:9001,entity:"\x26LeftAngleBracket;"},anglebracketleftbig:{font:"extra2",glyph:69,size:1.2,spacing:f.OPEN,
width:472},anglebracketleftBig:{font:"extra3",glyph:69,size:1.8,spacing:f.OPEN,width:611},anglebracketleftbigg:{font:"extra4",glyph:69,size:2.4,spacing:f.OPEN,width:750},anglebracketleftBigg:{font:"extra5",glyph:69,size:3,spacing:f.OPEN,width:806},anglebracketright:{font:"extra1",glyph:70,delimiterType:"close",stretchy:!0,stretchyDefault:!0,spacing:f.CLOSE,width:389,alternateInputName:9002,entity:"\x26RightAngleBracket;"},anglebracketrightbig:{font:"extra2",glyph:70,size:1.2,spacing:f.CLOSE,width:472},
anglebracketrightBig:{font:"extra3",glyph:70,size:1.8,spacing:f.CLOSE,width:611},anglebracketrightbigg:{font:"extra4",glyph:70,size:2.4,spacing:f.CLOSE,width:750},anglebracketrightBigg:{font:"extra5",glyph:70,size:3,spacing:f.CLOSE,width:806},slash:{font:"extra1",unicode:47,stretchy:!0,stretchyDefault:!1,width:500},slashbig:{font:"extra2",glyph:47,size:1.2,width:578},slashBig:{font:"extra3",glyph:47,size:1.8,width:811},slashbigg:{font:"extra4",glyph:47,size:2.4,width:1044},slashBigg:{font:"extra5",
glyph:47,size:3,width:1278},backslash:{font:"extra1",glyph:92,alternateInputName:92,stretchy:!0,stretchyDefault:!1},backslashbig:{font:"extra2",glyph:92,size:1.2,width:578},backslashBig:{font:"extra3",glyph:92,size:1.8,width:811},backslashbigg:{font:"extra4",glyph:92,size:2.4,width:1044},backslashBigg:{font:"extra5",glyph:92,size:3,width:1278},"!":{font:"symbol",unicode:33,spacing:f.CLOSE},"?":{font:"symbol",unicode:63,spacing:f.CLOSE},colonPunct:{font:"symbol",glyph:58,delimiterType:"separator",
spacing:f.PUNCT,entity:":"},",":{font:"symbol",unicode:44,delimiterType:"separator",spacing:f.PUNCT},";":{font:"symbol",unicode:59,delimiterType:"separator",spacing:f.PUNCT},ldotp:{font:"symbol",unicode:46,spacing:f.PUNCT},cdotp:{font:"symbol",glyph:8901,spacing:f.PUNCT,entity:"\x26cdot;"},dotabove:{font:"text",unicode:729,accentHeight:0.3},diaresis:{font:"text",unicode:168,accentHeight:0.3},breve:{font:"text",unicode:728,accentHeight:0.3},grave:{font:"text",unicode:96,accentHeight:0.3},acute:{font:"text",
unicode:180,accentHeight:0.3},ldots:{font:"symbol",unicode:8230,spacing:f.INNER},cdots:{font:"symbol",unicode:8943,spacing:f.INNER},vdots:{font:"symbol",unicode:8942,spacing:f.INNER},ddots:{font:"symbol",unicode:8945,spacing:f.INNER},radical:{font:"extra1",glyph:71,size:1,width:833,entity:"\x26Sqrt;"},radicalbig:{font:"extra2",glyph:71,size:1.2,width:1E3},radicalBig:{font:"extra3",glyph:71,size:1.8,width:1E3},radicalbigg:{font:"extra4",glyph:71,size:2.4,width:1E3},radicalBigg:{font:"extra5",glyph:71,
size:3,width:1E3},radicaltp:{font:"extra",glyph:61558,yOffset:100,size:0.6,xOffset:702,width:1056},radicalbt:{font:"extra",glyph:61556,size:1.8},radicalex:{font:"extra",glyph:61557,size:0.6},imaginaryi:{font:"symbol",fontStyle:"normal",glyph:105,entity:"i"},exponentiale:{font:"symbol",fontStyle:"normal",glyph:101,entity:"e"},InvisibleTimes:{font:"symbol",unicode:8201},ZeroWidthSpace:{font:"symbol",unicode:8203}}}};h=d.initSymbolMap();var c,b={},a,k;d.symbolMap=h;for(c in h)h.hasOwnProperty(c)&&(a=
h[c],a.unicode&&(k=e.fromCodePoint(a.unicode),b[k]=c),a.alternateInputName&&(k=e.fromCodePoint(a.alternateInputName),b[k]=c));d.unicodeMap=b;return d})},"MW/equations/renderer/model/SpacingClasses":function(){define([],function(){return{ORD:0,OP:1,BIN:2,REL:3,OPEN:4,CLOSE:5,PUNCT:6,INNER:7,NEST:8}})},"MW/equations/renderer/model/utils/MathMLEntities":function(){define([],function(){var h={"\x26AElig;":"\u00c6","\x26AMP;":"\x26","\x26Aacute;":"\u00c1","\x26Abreve;":"\u0102","\x26Acirc;":"\u00c2","\x26Acy;":"\u0410",
"\x26Afr;":"\ud835\udd04","\x26Agrave;":"\u00c0","\x26Alpha;":"\u0391","\x26Amacr;":"\u0100","\x26And;":"\u2a53","\x26Aogon;":"\u0104","\x26Aopf;":"\ud835\udd38","\x26ApplyFunction;":"\u2061","\x26Aring;":"\u00c5","\x26Ascr;":"\ud835\udc9c","\x26Assign;":"\u2254","\x26Atilde;":"\u00c3","\x26Auml;":"\u00c4","\x26Backslash;":"\u2216","\x26Barv;":"\u2ae7","\x26Barwed;":"\u2306","\x26Bcy;":"\u0411","\x26Because;":"\u2235","\x26Bernoullis;":"\u212c","\x26Beta;":"\u0392","\x26Bfr;":"\ud835\udd05","\x26Bopf;":"\ud835\udd39",
"\x26Breve;":"\u02d8","\x26Bscr;":"\u212c","\x26Bumpeq;":"\u224e","\x26CHcy;":"\u0427","\x26COPY;":"\u00a9","\x26Cacute;":"\u0106","\x26Cap;":"\u22d2","\x26CapitalDifferentialD;":"\u2145","\x26Cayleys;":"\u212d","\x26Ccaron;":"\u010c","\x26Ccedil;":"\u00c7","\x26Ccirc;":"\u0108","\x26Cconint;":"\u2230","\x26Cdot;":"\u010a","\x26Cedilla;":"\u00b8","\x26CenterDot;":"\u00b7","\x26Cfr;":"\u212d","\x26Chi;":"\u03a7","\x26CircleDot;":"\u2299","\x26CircleMinus;":"\u2296","\x26CirclePlus;":"\u2295","\x26CircleTimes;":"\u2297",
"\x26ClockwiseContourIntegral;":"\u2232","\x26CloseCurlyDoubleQuote;":"\u201d","\x26CloseCurlyQuote;":"\u2019","\x26Colon;":"\u2237","\x26Colone;":"\u2a74","\x26Congruent;":"\u2261","\x26Conint;":"\u222f","\x26ContourIntegral;":"\u222e","\x26Copf;":"\u2102","\x26Coproduct;":"\u2210","\x26CounterClockwiseContourIntegral;":"\u2233","\x26Cross;":"\u2a2f","\x26Cscr;":"\ud835\udc9e","\x26Cup;":"\u22d3","\x26CupCap;":"\u224d","\x26DD;":"\u2145","\x26DDotrahd;":"\u2911","\x26DJcy;":"\u0402","\x26DScy;":"\u0405",
"\x26DZcy;":"\u040f","\x26Dagger;":"\u2021","\x26Darr;":"\u21a1","\x26Dashv;":"\u2ae4","\x26Dcaron;":"\u010e","\x26Dcy;":"\u0414","\x26Del;":"\u2207","\x26Delta;":"\u0394","\x26Dfr;":"\ud835\udd07","\x26DiacriticalAcute;":"\u00b4","\x26DiacriticalDot;":"\u02d9","\x26DiacriticalDoubleAcute;":"\u02dd","\x26DiacriticalGrave;":"`","\x26DiacriticalTilde;":"\u02dc","\x26Diamond;":"\u22c4","\x26DifferentialD;":"\u2146","\x26Dopf;":"\ud835\udd3b","\x26Dot;":"\u00a8","\x26DotDot;":" \u20dc","\x26DotEqual;":"\u2250",
"\x26DoubleContourIntegral;":"\u222f","\x26DoubleDot;":"\u00a8","\x26DoubleDownArrow;":"\u21d3","\x26DoubleLeftArrow;":"\u21d0","\x26DoubleLeftRightArrow;":"\u21d4","\x26DoubleLeftTee;":"\u2ae4","\x26DoubleLongLeftArrow;":"\u27f8","\x26DoubleLongLeftRightArrow;":"\u27fa","\x26DoubleLongRightArrow;":"\u27f9","\x26DoubleRightArrow;":"\u21d2","\x26DoubleRightTee;":"\u22a8","\x26DoubleUpArrow;":"\u21d1","\x26DoubleUpDownArrow;":"\u21d5","\x26DoubleVerticalBar;":"\u2225","\x26DownArrow;":"\u2193","\x26DownArrowBar;":"\u2913",
"\x26DownArrowUpArrow;":"\u21f5","\x26DownBreve;":" \u0311","\x26DownLeftRightVector;":"\u2950","\x26DownLeftTeeVector;":"\u295e","\x26DownLeftVector;":"\u21bd","\x26DownLeftVectorBar;":"\u2956","\x26DownRightTeeVector;":"\u295f","\x26DownRightVector;":"\u21c1","\x26DownRightVectorBar;":"\u2957","\x26DownTee;":"\u22a4","\x26DownTeeArrow;":"\u21a7","\x26Downarrow;":"\u21d3","\x26Dscr;":"\ud835\udc9f","\x26Dstrok;":"\u0110","\x26ENG;":"\u014a","\x26ETH;":"\u00d0","\x26Eacute;":"\u00c9","\x26Ecaron;":"\u011a",
"\x26Ecirc;":"\u00ca","\x26Ecy;":"\u042d","\x26Edot;":"\u0116","\x26Efr;":"\ud835\udd08","\x26Egrave;":"\u00c8","\x26Element;":"\u2208","\x26Emacr;":"\u0112","\x26EmptySmallSquare;":"\u25fb","\x26EmptyVerySmallSquare;":"\u25ab","\x26Eogon;":"\u0118","\x26Eopf;":"\ud835\udd3c","\x26Epsilon;":"\u0395","\x26Equal;":"\u2a75","\x26EqualTilde;":"\u2242","\x26Equilibrium;":"\u21cc","\x26Escr;":"\u2130","\x26Esim;":"\u2a73","\x26Eta;":"\u0397","\x26Euml;":"\u00cb","\x26Exists;":"\u2203","\x26ExponentialE;":"\u2147",
"\x26Fcy;":"\u0424","\x26Ffr;":"\ud835\udd09","\x26FilledSmallSquare;":"\u25fc","\x26FilledVerySmallSquare;":"\u25aa","\x26Fopf;":"\ud835\udd3d","\x26ForAll;":"\u2200","\x26Fouriertrf;":"\u2131","\x26Fscr;":"\u2131","\x26GJcy;":"\u0403","\x26GT;":"\x3e","\x26Gamma;":"\u0393","\x26Gammad;":"\u03dc","\x26Gbreve;":"\u011e","\x26Gcedil;":"\u0122","\x26Gcirc;":"\u011c","\x26Gcy;":"\u0413","\x26Gdot;":"\u0120","\x26Gfr;":"\ud835\udd0a","\x26Gg;":"\u22d9","\x26Gopf;":"\ud835\udd3e","\x26GreaterEqual;":"\u2265",
"\x26GreaterEqualLess;":"\u22db","\x26GreaterFullEqual;":"\u2267","\x26GreaterGreater;":"\u2aa2","\x26GreaterLess;":"\u2277","\x26GreaterSlantEqual;":"\u2a7e","\x26GreaterTilde;":"\u2273","\x26Gscr;":"\ud835\udca2","\x26Gt;":"\u226b","\x26HARDcy;":"\u042a","\x26Hacek;":"\u02c7","\x26Hat;":"^","\x26Hcirc;":"\u0124","\x26Hfr;":"\u210c","\x26HilbertSpace;":"\u210b","\x26Hopf;":"\u210d","\x26HorizontalLine;":"\u2500","\x26Hscr;":"\u210b","\x26Hstrok;":"\u0126","\x26HumpDownHump;":"\u224e","\x26HumpEqual;":"\u224f",
"\x26IEcy;":"\u0415","\x26IJlig;":"\u0132","\x26IOcy;":"\u0401","\x26Iacute;":"\u00cd","\x26Icirc;":"\u00ce","\x26Icy;":"\u0418","\x26Idot;":"\u0130","\x26Ifr;":"\u2111","\x26Igrave;":"\u00cc","\x26Im;":"\u2111","\x26Imacr;":"\u012a","\x26ImaginaryI;":"\u2148","\x26Implies;":"\u21d2","\x26Int;":"\u222c","\x26Integral;":"\u222b","\x26Intersection;":"\u22c2","\x26InvisibleComma;":"\u2063","\x26InvisibleTimes;":"\u2062","\x26Iogon;":"\u012e","\x26Iopf;":"\ud835\udd40","\x26Iota;":"\u0399","\x26Iscr;":"\u2110",
"\x26Itilde;":"\u0128","\x26Iukcy;":"\u0406","\x26Iuml;":"\u00cf","\x26Jcirc;":"\u0134","\x26Jcy;":"\u0419","\x26Jfr;":"\ud835\udd0d","\x26Jopf;":"\ud835\udd41","\x26Jscr;":"\ud835\udca5","\x26Jsercy;":"\u0408","\x26Jukcy;":"\u0404","\x26KHcy;":"\u0425","\x26KJcy;":"\u040c","\x26Kappa;":"\u039a","\x26Kcedil;":"\u0136","\x26Kcy;":"\u041a","\x26Kfr;":"\ud835\udd0e","\x26Kopf;":"\ud835\udd42","\x26Kscr;":"\ud835\udca6","\x26LJcy;":"\u0409","\x26LT;":"\x3c","\x26Lacute;":"\u0139","\x26Lambda;":"\u039b",
"\x26Lang;":"\u27ea","\x26Laplacetrf;":"\u2112","\x26Larr;":"\u219e","\x26Lcaron;":"\u013d","\x26Lcedil;":"\u013b","\x26Lcy;":"\u041b","\x26LeftAngleBracket;":"\u27e8","\x26LeftArrow;":"\u2190","\x26LeftArrowBar;":"\u21e4","\x26LeftArrowRightArrow;":"\u21c6","\x26LeftCeiling;":"\u2308","\x26LeftDoubleBracket;":"\u27e6","\x26LeftDownTeeVector;":"\u2961","\x26LeftDownVector;":"\u21c3","\x26LeftDownVectorBar;":"\u2959","\x26LeftFloor;":"\u230a","\x26LeftRightArrow;":"\u2194","\x26LeftRightVector;":"\u294e",
"\x26LeftTee;":"\u22a3","\x26LeftTeeArrow;":"\u21a4","\x26LeftTeeVector;":"\u295a","\x26LeftTriangle;":"\u22b2","\x26LeftTriangleBar;":"\u29cf","\x26LeftTriangleEqual;":"\u22b4","\x26LeftUpDownVector;":"\u2951","\x26LeftUpTeeVector;":"\u2960","\x26LeftUpVector;":"\u21bf","\x26LeftUpVectorBar;":"\u2958","\x26LeftVector;":"\u21bc","\x26LeftVectorBar;":"\u2952","\x26Leftarrow;":"\u21d0","\x26Leftrightarrow;":"\u21d4","\x26LessEqualGreater;":"\u22da","\x26LessFullEqual;":"\u2266","\x26LessGreater;":"\u2276",
"\x26LessLess;":"\u2aa1","\x26LessSlantEqual;":"\u2a7d","\x26LessTilde;":"\u2272","\x26Lfr;":"\ud835\udd0f","\x26Ll;":"\u22d8","\x26Lleftarrow;":"\u21da","\x26Lmidot;":"\u013f","\x26LongLeftArrow;":"\u27f5","\x26LongLeftRightArrow;":"\u27f7","\x26LongRightArrow;":"\u27f6","\x26Longleftarrow;":"\u27f8","\x26Longleftrightarrow;":"\u27fa","\x26Longrightarrow;":"\u27f9","\x26Lopf;":"\ud835\udd43","\x26LowerLeftArrow;":"\u2199","\x26LowerRightArrow;":"\u2198","\x26Lscr;":"\u2112","\x26Lsh;":"\u21b0","\x26Lstrok;":"\u0141",
"\x26Lt;":"\u226a","\x26Map;":"\u2905","\x26Mcy;":"\u041c","\x26MediumSpace;":"\u00a0","\x26Mellintrf;":"\u2133","\x26Mfr;":"\ud835\udd10","\x26MinusPlus;":"\u2213","\x26Mopf;":"\ud835\udd44","\x26Mscr;":"\u2133","\x26Mu;":"\u039c","\x26NJcy;":"\u040a","\x26Nacute;":"\u0143","\x26Ncaron;":"\u0147","\x26Ncedil;":"\u0145","\x26Ncy;":"\u041d","\x26NegativeMediumSpace;":"\u200b","\x26NegativeThickSpace;":"\u200b","\x26NegativeThinSpace;":"\u200b","\x26NegativeVeryThinSpace;":"\u200b","\x26NestedGreaterGreater;":"\u226b",
"\x26NestedLessLess;":"\u226a","\x26NewLine;":"\n","\x26Nfr;":"\ud835\udd11","\x26NoBreak;":"\u2060","\x26NonBreakingSpace;":"\u00a0","\x26Nopf;":"\u2115","\x26Not;":"\u2aec","\x26NotCongruent;":"\u2262","\x26NotCupCap;":"\u226d","\x26NotDoubleVerticalBar;":"\u2226","\x26NotElement;":"\u2209","\x26NotEqual;":"\u2260","\x26NotEqualTilde;":"\u2242\u0338","\x26NotExists;":"\u2204","\x26NotGreater;":"\u226f","\x26NotGreaterEqual;":"\u2271","\x26NotGreaterFullEqual;":"\u2267\u0338","\x26NotGreaterGreater;":"\u226b\u0338",
"\x26NotGreaterLess;":"\u2279","\x26NotGreaterSlantEqual;":"\u2a7e\u0338","\x26NotGreaterTilde;":"\u2275","\x26NotHumpDownHump;":"\u224e\u0338","\x26NotHumpEqual;":"\u224f\u0338","\x26NotLeftTriangle;":"\u22ea","\x26NotLeftTriangleBar;":"\u29cf\u0338","\x26NotLeftTriangleEqual;":"\u22ec","\x26NotLess;":"\u226e","\x26NotLessEqual;":"\u2270","\x26NotLessGreater;":"\u2278","\x26NotLessLess;":"\u226a\u0338","\x26NotLessSlantEqual;":"\u2a7d\u0338","\x26NotLessTilde;":"\u2274","\x26NotNestedGreaterGreater;":"\u2aa2\u0338",
"\x26NotNestedLessLess;":"\u2aa1\u0338","\x26NotPrecedes;":"\u2280","\x26NotPrecedesEqual;":"\u2aaf\u0338","\x26NotPrecedesSlantEqual;":"\u22e0","\x26NotReverseElement;":"\u220c","\x26NotRightTriangle;":"\u22eb","\x26NotRightTriangleBar;":"\u29d0\u0338","\x26NotRightTriangleEqual;":"\u22ed","\x26NotSquareSubset;":"\u228f\u0338","\x26NotSquareSubsetEqual;":"\u22e2","\x26NotSquareSuperset;":"\u2290\u0338","\x26NotSquareSupersetEqual;":"\u22e3","\x26NotSubset;":"\u2282\u20d2","\x26NotSubsetEqual;":"\u2288",
"\x26NotSucceeds;":"\u2281","\x26NotSucceedsEqual;":"\u2ab0\u0338","\x26NotSucceedsSlantEqual;":"\u22e1","\x26NotSucceedsTilde;":"\u227f\u0338","\x26NotSuperset;":"\u2283\u20d2","\x26NotSupersetEqual;":"\u2289","\x26NotTilde;":"\u2241","\x26NotTildeEqual;":"\u2244","\x26NotTildeFullEqual;":"\u2247","\x26NotTildeTilde;":"\u2249","\x26NotVerticalBar;":"\u2224","\x26Nscr;":"\ud835\udca9","\x26Ntilde;":"\u00d1","\x26Nu;":"\u039d","\x26OElig;":"\u0152","\x26Oacute;":"\u00d3","\x26Ocirc;":"\u00d4","\x26Ocy;":"\u041e",
"\x26Odblac;":"\u0150","\x26Ofr;":"\ud835\udd12","\x26Ograve;":"\u00d2","\x26Omacr;":"\u014c","\x26Omega;":"\u03a9","\x26Omicron;":"\u039f","\x26Oopf;":"\ud835\udd46","\x26OpenCurlyDoubleQuote;":"\u201c","\x26OpenCurlyQuote;":"\u2018","\x26Or;":"\u2a54","\x26Oscr;":"\ud835\udcaa","\x26Oslash;":"\u00d8","\x26Otilde;":"\u00d5","\x26Otimes;":"\u2a37","\x26Ouml;":"\u00d6","\x26OverBar;":"\u203e","\x26OverBrace;":"\u23de","\x26OverBracket;":"\u23b4","\x26OverParenthesis;":"\u23dc","\x26PartialD;":"\u2202",
"\x26Pcy;":"\u041f","\x26Pfr;":"\ud835\udd13","\x26Phi;":"\u03a6","\x26Pi;":"\u03a0","\x26PlusMinus;":"\u00b1","\x26Poincareplane;":"\u210c","\x26Popf;":"\u2119","\x26Pr;":"\u2abb","\x26Precedes;":"\u227a","\x26PrecedesEqual;":"\u2aaf","\x26PrecedesSlantEqual;":"\u227c","\x26PrecedesTilde;":"\u227e","\x26Prime;":"\u2033","\x26Product;":"\u220f","\x26Proportion;":"\u2237","\x26Proportional;":"\u221d","\x26Pscr;":"\ud835\udcab","\x26Psi;":"\u03a8","\x26QUOT;":'"',"\x26Qfr;":"\ud835\udd14","\x26Qopf;":"\u211a",
"\x26Qscr;":"\ud835\udcac","\x26RBarr;":"\u2910","\x26REG;":"\u00ae","\x26Racute;":"\u0154","\x26Rang;":"\u27eb","\x26Rarr;":"\u21a0","\x26Rarrtl;":"\u2916","\x26Rcaron;":"\u0158","\x26Rcedil;":"\u0156","\x26Rcy;":"\u0420","\x26Re;":"\u211c","\x26ReverseElement;":"\u220b","\x26ReverseEquilibrium;":"\u21cb","\x26ReverseUpEquilibrium;":"\u296f","\x26Rfr;":"\u211c","\x26Rho;":"\u03a1","\x26RightAngleBracket;":"\u27e9","\x26RightArrow;":"\u2192","\x26RightArrowBar;":"\u21e5","\x26RightArrowLeftArrow;":"\u21c4",
"\x26RightCeiling;":"\u2309","\x26RightDoubleBracket;":"\u27e7","\x26RightDownTeeVector;":"\u295d","\x26RightDownVector;":"\u21c2","\x26RightDownVectorBar;":"\u2955","\x26RightFloor;":"\u230b","\x26RightTee;":"\u22a2","\x26RightTeeArrow;":"\u21a6","\x26RightTeeVector;":"\u295b","\x26RightTriangle;":"\u22b3","\x26RightTriangleBar;":"\u29d0","\x26RightTriangleEqual;":"\u22b5","\x26RightUpDownVector;":"\u294f","\x26RightUpTeeVector;":"\u295c","\x26RightUpVector;":"\u21be","\x26RightUpVectorBar;":"\u2954",
"\x26RightVector;":"\u21c0","\x26RightVectorBar;":"\u2953","\x26Rightarrow;":"\u21d2","\x26Ropf;":"\u211d","\x26RoundImplies;":"\u2970","\x26Rrightarrow;":"\u21db","\x26Rscr;":"\u211b","\x26Rsh;":"\u21b1","\x26RuleDelayed;":"\u29f4","\x26SHCHcy;":"\u0429","\x26SHcy;":"\u0428","\x26SOFTcy;":"\u042c","\x26Sacute;":"\u015a","\x26Sc;":"\u2abc","\x26Scaron;":"\u0160","\x26Scedil;":"\u015e","\x26Scirc;":"\u015c","\x26Scy;":"\u0421","\x26Sfr;":"\ud835\udd16","\x26ShortDownArrow;":"\u2193","\x26ShortLeftArrow;":"\u2190",
"\x26ShortRightArrow;":"\u2192","\x26ShortUpArrow;":"\u2191","\x26Sigma;":"\u03a3","\x26SmallCircle;":"\u2218","\x26Sopf;":"\ud835\udd4a","\x26Sqrt;":"\u221a","\x26Square;":"\u25a1","\x26SquareIntersection;":"\u2293","\x26SquareSubset;":"\u228f","\x26SquareSubsetEqual;":"\u2291","\x26SquareSuperset;":"\u2290","\x26SquareSupersetEqual;":"\u2292","\x26SquareUnion;":"\u2294","\x26Sscr;":"\ud835\udcae","\x26Star;":"\u22c6","\x26Sub;":"\u22d0","\x26Subset;":"\u22d0","\x26SubsetEqual;":"\u2286","\x26Succeeds;":"\u227b",
"\x26SucceedsEqual;":"\u2ab0","\x26SucceedsSlantEqual;":"\u227d","\x26SucceedsTilde;":"\u227f","\x26SuchThat;":"\u220b","\x26Sum;":"\u2211","\x26Sup;":"\u22d1","\x26Superset;":"\u2283","\x26SupersetEqual;":"\u2287","\x26Supset;":"\u22d1","\x26THORN;":"\u00de","\x26TRADE;":"\u2122","\x26TSHcy;":"\u040b","\x26TScy;":"\u0426","\x26Tab;":"\t","\x26Tau;":"\u03a4","\x26Tcaron;":"\u0164","\x26Tcedil;":"\u0162","\x26Tcy;":"\u0422","\x26Tfr;":"\ud835\udd17","\x26Therefore;":"\u2234","\x26Theta;":"\u0398",
"\x26ThickSpace;":"\u205f\u200a","\x26ThinSpace;":"\u2009","\x26Tilde;":"\u223c","\x26TildeEqual;":"\u2243","\x26TildeFullEqual;":"\u2245","\x26TildeTilde;":"\u2248","\x26Topf;":"\ud835\udd4b","\x26TripleDot;":" \u20db","\x26Tscr;":"\ud835\udcaf","\x26Tstrok;":"\u0166","\x26Uacute;":"\u00da","\x26Uarr;":"\u219f","\x26Uarrocir;":"\u2949","\x26Ubrcy;":"\u040e","\x26Ubreve;":"\u016c","\x26Ucirc;":"\u00db","\x26Ucy;":"\u0423","\x26Udblac;":"\u0170","\x26Ufr;":"\ud835\udd18","\x26Ugrave;":"\u00d9","\x26Umacr;":"\u016a",
"\x26UnderBar;":"_","\x26UnderBrace;":"\u23df","\x26UnderBracket;":"\u23b5","\x26UnderParenthesis;":"\u23dd","\x26Union;":"\u22c3","\x26UnionPlus;":"\u228e","\x26Uogon;":"\u0172","\x26Uopf;":"\ud835\udd4c","\x26UpArrow;":"\u2191","\x26UpArrowBar;":"\u2912","\x26UpArrowDownArrow;":"\u21c5","\x26UpDownArrow;":"\u2195","\x26UpEquilibrium;":"\u296e","\x26UpTee;":"\u22a5","\x26UpTeeArrow;":"\u21a5","\x26Uparrow;":"\u21d1","\x26Updownarrow;":"\u21d5","\x26UpperLeftArrow;":"\u2196","\x26UpperRightArrow;":"\u2197",
"\x26Upsi;":"\u03d2","\x26Upsilon;":"\u03a5","\x26Uring;":"\u016e","\x26Uscr;":"\ud835\udcb0","\x26Utilde;":"\u0168","\x26Uuml;":"\u00dc","\x26VDash;":"\u22ab","\x26Vbar;":"\u2aeb","\x26Vcy;":"\u0412","\x26Vdash;":"\u22a9","\x26Vdashl;":"\u2ae6","\x26Vee;":"\u22c1","\x26Verbar;":"\u2016","\x26Vert;":"\u2016","\x26VerticalBar;":"\u2223","\x26VerticalLine;":"|","\x26VerticalSeparator;":"\u2758","\x26VerticalTilde;":"\u2240","\x26VeryThinSpace;":"\u200a","\x26Vfr;":"\ud835\udd19","\x26Vopf;":"\ud835\udd4d",
"\x26Vscr;":"\ud835\udcb1","\x26Vvdash;":"\u22aa","\x26Wcirc;":"\u0174","\x26Wedge;":"\u22c0","\x26Wfr;":"\ud835\udd1a","\x26Wopf;":"\ud835\udd4e","\x26Wscr;":"\ud835\udcb2","\x26Xfr;":"\ud835\udd1b","\x26Xi;":"\u039e","\x26Xopf;":"\ud835\udd4f","\x26Xscr;":"\ud835\udcb3","\x26YAcy;":"\u042f","\x26YIcy;":"\u0407","\x26YUcy;":"\u042e","\x26Yacute;":"\u00dd","\x26Ycirc;":"\u0176","\x26Ycy;":"\u042b","\x26Yfr;":"\ud835\udd1c","\x26Yopf;":"\ud835\udd50","\x26Yscr;":"\ud835\udcb4","\x26Yuml;":"\u0178",
"\x26ZHcy;":"\u0416","\x26Zacute;":"\u0179","\x26Zcaron;":"\u017d","\x26Zcy;":"\u0417","\x26Zdot;":"\u017b","\x26ZeroWidthSpace;":"\u200b","\x26Zeta;":"\u0396","\x26Zfr;":"\u2128","\x26Zopf;":"\u2124","\x26Zscr;":"\ud835\udcb5","\x26aacute;":"\u00e1","\x26abreve;":"\u0103","\x26ac;":"\u223e","\x26acE;":"\u223e\u0333","\x26acd;":"\u223f","\x26acirc;":"\u00e2","\x26acute;":"\u00b4","\x26acy;":"\u0430","\x26aelig;":"\u00e6","\x26af;":"\u2061","\x26afr;":"\ud835\udd1e","\x26agrave;":"\u00e0","\x26alefsym;":"\u2135",
"\x26aleph;":"\u2135","\x26alpha;":"\u03b1","\x26amacr;":"\u0101","\x26amalg;":"\u2a3f","\x26and;":"\u2227","\x26andand;":"\u2a55","\x26andd;":"\u2a5c","\x26andslope;":"\u2a58","\x26andv;":"\u2a5a","\x26ang;":"\u2220","\x26ange;":"\u29a4","\x26angle;":"\u2220","\x26angmsd;":"\u2221","\x26angmsdaa;":"\u29a8","\x26angmsdab;":"\u29a9","\x26angmsdac;":"\u29aa","\x26angmsdad;":"\u29ab","\x26angmsdae;":"\u29ac","\x26angmsdaf;":"\u29ad","\x26angmsdag;":"\u29ae","\x26angmsdah;":"\u29af","\x26angrt;":"\u221f",
"\x26angrtvb;":"\u22be","\x26angrtvbd;":"\u299d","\x26angsph;":"\u2222","\x26angst;":"\u00c5","\x26angzarr;":"\u237c","\x26aogon;":"\u0105","\x26aopf;":"\ud835\udd52","\x26ap;":"\u2248","\x26apE;":"\u2a70","\x26apacir;":"\u2a6f","\x26ape;":"\u224a","\x26apid;":"\u224b","\x26apos;":"'","\x26approx;":"\u2248","\x26approxeq;":"\u224a","\x26aring;":"\u00e5","\x26ascr;":"\ud835\udcb6","\x26ast;":"*","\x26asymp;":"\u2248","\x26asympeq;":"\u224d","\x26atilde;":"\u00e3","\x26auml;":"\u00e4","\x26awconint;":"\u2233",
"\x26awint;":"\u2a11","\x26bNot;":"\u2aed","\x26backcong;":"\u224c","\x26backepsilon;":"\u03f6","\x26backprime;":"\u2035","\x26backsim;":"\u223d","\x26backsimeq;":"\u22cd","\x26barvee;":"\u22bd","\x26barwed;":"\u2305","\x26barwedge;":"\u2305","\x26bbrk;":"\u23b5","\x26bbrktbrk;":"\u23b6","\x26bcong;":"\u224c","\x26bcy;":"\u0431","\x26bdquo;":"\u201e","\x26becaus;":"\u2235","\x26because;":"\u2235","\x26bemptyv;":"\u29b0","\x26bepsi;":"\u03f6","\x26bernou;":"\u212c","\x26beta;":"\u03b2","\x26beth;":"\u2136",
"\x26between;":"\u226c","\x26bfr;":"\ud835\udd1f","\x26bigcap;":"\u22c2","\x26bigcirc;":"\u25ef","\x26bigcup;":"\u22c3","\x26bigodot;":"\u2a00","\x26bigoplus;":"\u2a01","\x26bigotimes;":"\u2a02","\x26bigsqcup;":"\u2a06","\x26bigstar;":"\u2605","\x26bigtriangledown;":"\u25bd","\x26bigtriangleup;":"\u25b3","\x26biguplus;":"\u2a04","\x26bigvee;":"\u22c1","\x26bigwedge;":"\u22c0","\x26bkarow;":"\u290d","\x26blacklozenge;":"\u29eb","\x26blacksquare;":"\u25aa","\x26blacktriangle;":"\u25b4","\x26blacktriangledown;":"\u25be",
"\x26blacktriangleleft;":"\u25c2","\x26blacktriangleright;":"\u25b8","\x26blank;":"\u2423","\x26blk12;":"\u2592","\x26blk14;":"\u2591","\x26blk34;":"\u2593","\x26block;":"\u2588","\x26bne;":"\x3d\u20e5","\x26bnequiv;":"\u2261\u20e5","\x26bnot;":"\u2310","\x26bopf;":"\ud835\udd53","\x26bot;":"\u22a5","\x26bottom;":"\u22a5","\x26bowtie;":"\u22c8","\x26boxDL;":"\u2557","\x26boxDR;":"\u2554","\x26boxDl;":"\u2556","\x26boxDr;":"\u2553","\x26boxH;":"\u2550","\x26boxHD;":"\u2566","\x26boxHU;":"\u2569","\x26boxHd;":"\u2564",
"\x26boxHu;":"\u2567","\x26boxUL;":"\u255d","\x26boxUR;":"\u255a","\x26boxUl;":"\u255c","\x26boxUr;":"\u2559","\x26boxV;":"\u2551","\x26boxVH;":"\u256c","\x26boxVL;":"\u2563","\x26boxVR;":"\u2560","\x26boxVh;":"\u256b","\x26boxVl;":"\u2562","\x26boxVr;":"\u255f","\x26boxbox;":"\u29c9","\x26boxdL;":"\u2555","\x26boxdR;":"\u2552","\x26boxdl;":"\u2510","\x26boxdr;":"\u250c","\x26boxh;":"\u2500","\x26boxhD;":"\u2565","\x26boxhU;":"\u2568","\x26boxhd;":"\u252c","\x26boxhu;":"\u2534","\x26boxminus;":"\u229f",
"\x26boxplus;":"\u229e","\x26boxtimes;":"\u22a0","\x26boxuL;":"\u255b","\x26boxuR;":"\u2558","\x26boxul;":"\u2518","\x26boxur;":"\u2514","\x26boxv;":"\u2502","\x26boxvH;":"\u256a","\x26boxvL;":"\u2561","\x26boxvR;":"\u255e","\x26boxvh;":"\u253c","\x26boxvl;":"\u2524","\x26boxvr;":"\u251c","\x26bprime;":"\u2035","\x26breve;":"\u02d8","\x26brvbar;":"\u00a6","\x26bscr;":"\ud835\udcb7","\x26bsemi;":"\u204f","\x26bsim;":"\u223d","\x26bsime;":"\u22cd","\x26bsol;":"\\","\x26bsolb;":"\u29c5","\x26bsolhsub;":"\u27c8",
"\x26bull;":"\u2022","\x26bullet;":"\u2022","\x26bump;":"\u224e","\x26bumpE;":"\u2aae","\x26bumpe;":"\u224f","\x26bumpeq;":"\u224f","\x26cacute;":"\u0107","\x26cap;":"\u2229","\x26capand;":"\u2a44","\x26capbrcup;":"\u2a49","\x26capcap;":"\u2a4b","\x26capcup;":"\u2a47","\x26capdot;":"\u2a40","\x26caps;":"\u2229\ufe00","\x26caret;":"\u2041","\x26caron;":"\u02c7","\x26ccaps;":"\u2a4d","\x26ccaron;":"\u010d","\x26ccedil;":"\u00e7","\x26ccirc;":"\u0109","\x26ccups;":"\u2a4c","\x26ccupssm;":"\u2a50","\x26cdot;":"\u010b",
"\x26cedil;":"\u00b8","\x26cemptyv;":"\u29b2","\x26cent;":"\u00a2","\x26centerdot;":"\u00b7","\x26cfr;":"\ud835\udd20","\x26chcy;":"\u0447","\x26check;":"\u2713","\x26checkmark;":"\u2713","\x26chi;":"\u03c7","\x26cir;":"\u25cb","\x26cirE;":"\u29c3","\x26circ;":"\u02c6","\x26circeq;":"\u2257","\x26circlearrowleft;":"\u21ba","\x26circlearrowright;":"\u21bb","\x26circledR;":"\u00ae","\x26circledS;":"\u24c8","\x26circledast;":"\u229b","\x26circledcirc;":"\u229a","\x26circleddash;":"\u229d","\x26cire;":"\u2257",
"\x26cirfnint;":"\u2a10","\x26cirmid;":"\u2aef","\x26cirscir;":"\u29c2","\x26clubs;":"\u2663","\x26clubsuit;":"\u2663","\x26colon;":":","\x26colone;":"\u2254","\x26coloneq;":"\u2254","\x26comma;":",","\x26commat;":"@","\x26comp;":"\u2201","\x26compfn;":"\u2218","\x26complement;":"\u2201","\x26complexes;":"\u2102","\x26cong;":"\u2245","\x26congdot;":"\u2a6d","\x26conint;":"\u222e","\x26copf;":"\ud835\udd54","\x26coprod;":"\u2210","\x26copy;":"\u00a9","\x26copysr;":"\u2117","\x26crarr;":"\u21b5","\x26cross;":"\u2717",
"\x26cscr;":"\ud835\udcb8","\x26csub;":"\u2acf","\x26csube;":"\u2ad1","\x26csup;":"\u2ad0","\x26csupe;":"\u2ad2","\x26ctdot;":"\u22ef","\x26cudarrl;":"\u2938","\x26cudarrr;":"\u2935","\x26cuepr;":"\u22de","\x26cuesc;":"\u22df","\x26cularr;":"\u21b6","\x26cularrp;":"\u293d","\x26cup;":"\u222a","\x26cupbrcap;":"\u2a48","\x26cupcap;":"\u2a46","\x26cupcup;":"\u2a4a","\x26cupdot;":"\u228d","\x26cupor;":"\u2a45","\x26cups;":"\u222a\ufe00","\x26curarr;":"\u21b7","\x26curarrm;":"\u293c","\x26curlyeqprec;":"\u22de",
"\x26curlyeqsucc;":"\u22df","\x26curlyvee;":"\u22ce","\x26curlywedge;":"\u22cf","\x26curren;":"\u00a4","\x26curvearrowleft;":"\u21b6","\x26curvearrowright;":"\u21b7","\x26cuvee;":"\u22ce","\x26cuwed;":"\u22cf","\x26cwconint;":"\u2232","\x26cwint;":"\u2231","\x26cylcty;":"\u232d","\x26dArr;":"\u21d3","\x26dHar;":"\u2965","\x26dagger;":"\u2020","\x26daleth;":"\u2138","\x26darr;":"\u2193","\x26dash;":"\u2010","\x26dashv;":"\u22a3","\x26dbkarow;":"\u290f","\x26dblac;":"\u02dd","\x26dcaron;":"\u010f",
"\x26dcy;":"\u0434","\x26dd;":"\u2146","\x26ddagger;":"\u2021","\x26ddarr;":"\u21ca","\x26ddotseq;":"\u2a77","\x26deg;":"\u00b0","\x26delta;":"\u03b4","\x26demptyv;":"\u29b1","\x26dfisht;":"\u297f","\x26dfr;":"\ud835\udd21","\x26dharl;":"\u21c3","\x26dharr;":"\u21c2","\x26diam;":"\u22c4","\x26diamond;":"\u22c4","\x26diamondsuit;":"\u2666","\x26diams;":"\u2666","\x26die;":"\u00a8","\x26digamma;":"\u03dd","\x26disin;":"\u22f2","\x26div;":"\u00f7","\x26divide;":"\u00f7","\x26divideontimes;":"\u22c7",
"\x26divonx;":"\u22c7","\x26djcy;":"\u0452","\x26dlcorn;":"\u231e","\x26dlcrop;":"\u230d","\x26dollar;":"$","\x26dopf;":"\ud835\udd55","\x26dot;":"\u02d9","\x26doteq;":"\u2250","\x26doteqdot;":"\u2251","\x26dotminus;":"\u2238","\x26dotplus;":"\u2214","\x26dotsquare;":"\u22a1","\x26doublebarwedge;":"\u2306","\x26downarrow;":"\u2193","\x26downdownarrows;":"\u21ca","\x26downharpoonleft;":"\u21c3","\x26downharpoonright;":"\u21c2","\x26drbkarow;":"\u2910","\x26drcorn;":"\u231f","\x26drcrop;":"\u230c",
"\x26dscr;":"\ud835\udcb9","\x26dscy;":"\u0455","\x26dsol;":"\u29f6","\x26dstrok;":"\u0111","\x26dtdot;":"\u22f1","\x26dtri;":"\u25bf","\x26dtrif;":"\u25be","\x26duarr;":"\u21f5","\x26duhar;":"\u296f","\x26dwangle;":"\u29a6","\x26dzcy;":"\u045f","\x26dzigrarr;":"\u27ff","\x26eDDot;":"\u2a77","\x26eDot;":"\u2251","\x26eacute;":"\u00e9","\x26easter;":"\u2a6e","\x26ecaron;":"\u011b","\x26ecir;":"\u2256","\x26ecirc;":"\u00ea","\x26ecolon;":"\u2255","\x26ecy;":"\u044d","\x26edot;":"\u0117","\x26ee;":"\u2147",
"\x26efDot;":"\u2252","\x26efr;":"\ud835\udd22","\x26eg;":"\u2a9a","\x26egrave;":"\u00e8","\x26egs;":"\u2a96","\x26egsdot;":"\u2a98","\x26el;":"\u2a99","\x26elinters;":"\u23e7","\x26ell;":"\u2113","\x26els;":"\u2a95","\x26elsdot;":"\u2a97","\x26emacr;":"\u0113","\x26empty;":"\u2205","\x26emptyset;":"\u2205","\x26emptyv;":"\u2205","\x26emsp;":"\u2003","\x26emsp13;":"\u2004","\x26emsp14;":"\u2005","\x26eng;":"\u014b","\x26ensp;":"\u2002","\x26eogon;":"\u0119","\x26eopf;":"\ud835\udd56","\x26epar;":"\u22d5",
"\x26eparsl;":"\u29e3","\x26eplus;":"\u2a71","\x26epsi;":"\u03b5","\x26epsilon;":"\u03b5","\x26epsiv;":"\u03f5","\x26eqcirc;":"\u2256","\x26eqcolon;":"\u2255","\x26eqsim;":"\u2242","\x26eqslantgtr;":"\u2a96","\x26eqslantless;":"\u2a95","\x26equals;":"\x3d","\x26equest;":"\u225f","\x26equiv;":"\u2261","\x26equivDD;":"\u2a78","\x26eqvparsl;":"\u29e5","\x26erDot;":"\u2253","\x26erarr;":"\u2971","\x26escr;":"\u212f","\x26esdot;":"\u2250","\x26esim;":"\u2242","\x26eta;":"\u03b7","\x26eth;":"\u00f0","\x26euml;":"\u00eb",
"\x26euro;":"\u20ac","\x26excl;":"!","\x26exist;":"\u2203","\x26expectation;":"\u2130","\x26exponentiale;":"\u2147","\x26fallingdotseq;":"\u2252","\x26fcy;":"\u0444","\x26female;":"\u2640","\x26ffilig;":"\ufb03","\x26fflig;":"\ufb00","\x26ffllig;":"\ufb04","\x26ffr;":"\ud835\udd23","\x26filig;":"\ufb01","\x26fjlig;":"fj","\x26flat;":"\u266d","\x26fllig;":"\ufb02","\x26fltns;":"\u25b1","\x26fnof;":"\u0192","\x26fopf;":"\ud835\udd57","\x26forall;":"\u2200","\x26fork;":"\u22d4","\x26forkv;":"\u2ad9",
"\x26fpartint;":"\u2a0d","\x26frac12;":"\u00bd","\x26frac13;":"\u2153","\x26frac14;":"\u00bc","\x26frac15;":"\u2155","\x26frac16;":"\u2159","\x26frac18;":"\u215b","\x26frac23;":"\u2154","\x26frac25;":"\u2156","\x26frac34;":"\u00be","\x26frac35;":"\u2157","\x26frac38;":"\u215c","\x26frac45;":"\u2158","\x26frac56;":"\u215a","\x26frac58;":"\u215d","\x26frac78;":"\u215e","\x26frasl;":"\u2044","\x26frown;":"\u2322","\x26fscr;":"\ud835\udcbb","\x26gE;":"\u2267","\x26gEl;":"\u2a8c","\x26gacute;":"\u01f5",
"\x26gamma;":"\u03b3","\x26gammad;":"\u03dd","\x26gap;":"\u2a86","\x26gbreve;":"\u011f","\x26gcirc;":"\u011d","\x26gcy;":"\u0433","\x26gdot;":"\u0121","\x26ge;":"\u2265","\x26gel;":"\u22db","\x26geq;":"\u2265","\x26geqq;":"\u2267","\x26geqslant;":"\u2a7e","\x26ges;":"\u2a7e","\x26gescc;":"\u2aa9","\x26gesdot;":"\u2a80","\x26gesdoto;":"\u2a82","\x26gesdotol;":"\u2a84","\x26gesl;":"\u22db\ufe00","\x26gesles;":"\u2a94","\x26gfr;":"\ud835\udd24","\x26gg;":"\u226b","\x26ggg;":"\u22d9","\x26gimel;":"\u2137",
"\x26gjcy;":"\u0453","\x26gl;":"\u2277","\x26glE;":"\u2a92","\x26gla;":"\u2aa5","\x26glj;":"\u2aa4","\x26gnE;":"\u2269","\x26gnap;":"\u2a8a","\x26gnapprox;":"\u2a8a","\x26gne;":"\u2a88","\x26gneq;":"\u2a88","\x26gneqq;":"\u2269","\x26gnsim;":"\u22e7","\x26gopf;":"\ud835\udd58","\x26grave;":"`","\x26gscr;":"\u210a","\x26gsim;":"\u2273","\x26gsime;":"\u2a8e","\x26gsiml;":"\u2a90","\x26gt;":"\x3e","\x26gtcc;":"\u2aa7","\x26gtcir;":"\u2a7a","\x26gtdot;":"\u22d7","\x26gtlPar;":"\u2995","\x26gtquest;":"\u2a7c",
"\x26gtrapprox;":"\u2a86","\x26gtrarr;":"\u2978","\x26gtrdot;":"\u22d7","\x26gtreqless;":"\u22db","\x26gtreqqless;":"\u2a8c","\x26gtrless;":"\u2277","\x26gtrsim;":"\u2273","\x26gvertneqq;":"\u2269\ufe00","\x26gvnE;":"\u2269\ufe00","\x26hArr;":"\u21d4","\x26hairsp;":"\u200a","\x26half;":"\u00bd","\x26hamilt;":"\u210b","\x26hardcy;":"\u044a","\x26harr;":"\u2194","\x26harrcir;":"\u2948","\x26harrw;":"\u21ad","\x26hbar;":"\u210f","\x26hcirc;":"\u0125","\x26hearts;":"\u2665","\x26heartsuit;":"\u2665",
"\x26hellip;":"\u2026","\x26hercon;":"\u22b9","\x26hfr;":"\ud835\udd25","\x26hksearow;":"\u2925","\x26hkswarow;":"\u2926","\x26hoarr;":"\u21ff","\x26homtht;":"\u223b","\x26hookleftarrow;":"\u21a9","\x26hookrightarrow;":"\u21aa","\x26hopf;":"\ud835\udd59","\x26horbar;":"\u2015","\x26hscr;":"\ud835\udcbd","\x26hslash;":"\u210f","\x26hstrok;":"\u0127","\x26hybull;":"\u2043","\x26hyphen;":"\u2010","\x26iacute;":"\u00ed","\x26ic;":"\u2063","\x26icirc;":"\u00ee","\x26icy;":"\u0438","\x26iecy;":"\u0435",
"\x26iexcl;":"\u00a1","\x26iff;":"\u21d4","\x26ifr;":"\ud835\udd26","\x26igrave;":"\u00ec","\x26ii;":"\u2148","\x26iiiint;":"\u2a0c","\x26iiint;":"\u222d","\x26iinfin;":"\u29dc","\x26iiota;":"\u2129","\x26ijlig;":"\u0133","\x26imacr;":"\u012b","\x26image;":"\u2111","\x26imagline;":"\u2110","\x26imagpart;":"\u2111","\x26imath;":"\u0131","\x26imof;":"\u22b7","\x26imped;":"\u01b5","\x26in;":"\u2208","\x26incare;":"\u2105","\x26infin;":"\u221e","\x26infintie;":"\u29dd","\x26inodot;":"\u0131","\x26int;":"\u222b",
"\x26intcal;":"\u22ba","\x26integers;":"\u2124","\x26intercal;":"\u22ba","\x26intlarhk;":"\u2a17","\x26intprod;":"\u2a3c","\x26iocy;":"\u0451","\x26iogon;":"\u012f","\x26iopf;":"\ud835\udd5a","\x26iota;":"\u03b9","\x26iprod;":"\u2a3c","\x26iquest;":"\u00bf","\x26iscr;":"\ud835\udcbe","\x26isin;":"\u2208","\x26isinE;":"\u22f9","\x26isindot;":"\u22f5","\x26isins;":"\u22f4","\x26isinsv;":"\u22f3","\x26isinv;":"\u2208","\x26it;":"\u2062","\x26itilde;":"\u0129","\x26iukcy;":"\u0456","\x26iuml;":"\u00ef",
"\x26jcirc;":"\u0135","\x26jcy;":"\u0439","\x26jfr;":"\ud835\udd27","\x26jmath;":"\u0237","\x26jopf;":"\ud835\udd5b","\x26jscr;":"\ud835\udcbf","\x26jsercy;":"\u0458","\x26jukcy;":"\u0454","\x26kappa;":"\u03ba","\x26kappav;":"\u03f0","\x26kcedil;":"\u0137","\x26kcy;":"\u043a","\x26kfr;":"\ud835\udd28","\x26kgreen;":"\u0138","\x26khcy;":"\u0445","\x26kjcy;":"\u045c","\x26kopf;":"\ud835\udd5c","\x26kscr;":"\ud835\udcc0","\x26lAarr;":"\u21da","\x26lArr;":"\u21d0","\x26lAtail;":"\u291b","\x26lBarr;":"\u290e",
"\x26lE;":"\u2266","\x26lEg;":"\u2a8b","\x26lHar;":"\u2962","\x26lacute;":"\u013a","\x26laemptyv;":"\u29b4","\x26lagran;":"\u2112","\x26lambda;":"\u03bb","\x26lang;":"\u27e8","\x26langd;":"\u2991","\x26langle;":"\u27e8","\x26lap;":"\u2a85","\x26laquo;":"\u00ab","\x26larr;":"\u2190","\x26larrb;":"\u21e4","\x26larrbfs;":"\u291f","\x26larrfs;":"\u291d","\x26larrhk;":"\u21a9","\x26larrlp;":"\u21ab","\x26larrpl;":"\u2939","\x26larrsim;":"\u2973","\x26larrtl;":"\u21a2","\x26lat;":"\u2aab","\x26latail;":"\u2919",
"\x26late;":"\u2aad","\x26lates;":"\u2aad\ufe00","\x26lbarr;":"\u290c","\x26lbbrk;":"\u2772","\x26lbrace;":"{","\x26lbrack;":"[","\x26lbrke;":"\u298b","\x26lbrksld;":"\u298f","\x26lbrkslu;":"\u298d","\x26lcaron;":"\u013e","\x26lcedil;":"\u013c","\x26lceil;":"\u2308","\x26lcub;":"{","\x26lcy;":"\u043b","\x26ldca;":"\u2936","\x26ldquo;":"\u201c","\x26ldquor;":"\u201e","\x26ldrdhar;":"\u2967","\x26ldrushar;":"\u294b","\x26ldsh;":"\u21b2","\x26le;":"\u2264","\x26leftarrow;":"\u2190","\x26leftarrowtail;":"\u21a2",
"\x26leftharpoondown;":"\u21bd","\x26leftharpoonup;":"\u21bc","\x26leftleftarrows;":"\u21c7","\x26leftrightarrow;":"\u2194","\x26leftrightarrows;":"\u21c6","\x26leftrightharpoons;":"\u21cb","\x26leftrightsquigarrow;":"\u21ad","\x26leftthreetimes;":"\u22cb","\x26leg;":"\u22da","\x26leq;":"\u2264","\x26leqq;":"\u2266","\x26leqslant;":"\u2a7d","\x26les;":"\u2a7d","\x26lescc;":"\u2aa8","\x26lesdot;":"\u2a7f","\x26lesdoto;":"\u2a81","\x26lesdotor;":"\u2a83","\x26lesg;":"\u22da\ufe00","\x26lesges;":"\u2a93",
"\x26lessapprox;":"\u2a85","\x26lessdot;":"\u22d6","\x26lesseqgtr;":"\u22da","\x26lesseqqgtr;":"\u2a8b","\x26lessgtr;":"\u2276","\x26lesssim;":"\u2272","\x26lfisht;":"\u297c","\x26lfloor;":"\u230a","\x26lfr;":"\ud835\udd29","\x26lg;":"\u2276","\x26lgE;":"\u2a91","\x26lhard;":"\u21bd","\x26lharu;":"\u21bc","\x26lharul;":"\u296a","\x26lhblk;":"\u2584","\x26ljcy;":"\u0459","\x26ll;":"\u226a","\x26llarr;":"\u21c7","\x26llcorner;":"\u231e","\x26llhard;":"\u296b","\x26lltri;":"\u25fa","\x26lmidot;":"\u0140",
"\x26lmoust;":"\u23b0","\x26lmoustache;":"\u23b0","\x26lnE;":"\u2268","\x26lnap;":"\u2a89","\x26lnapprox;":"\u2a89","\x26lne;":"\u2a87","\x26lneq;":"\u2a87","\x26lneqq;":"\u2268","\x26lnsim;":"\u22e6","\x26loang;":"\u27ec","\x26loarr;":"\u21fd","\x26lobrk;":"\u27e6","\x26longleftarrow;":"\u27f5","\x26longleftrightarrow;":"\u27f7","\x26longmapsto;":"\u27fc","\x26longrightarrow;":"\u27f6","\x26looparrowleft;":"\u21ab","\x26looparrowright;":"\u21ac","\x26lopar;":"\u2985","\x26lopf;":"\ud835\udd5d","\x26loplus;":"\u2a2d",
"\x26lotimes;":"\u2a34","\x26lowast;":"\u2217","\x26lowbar;":"_","\x26loz;":"\u25ca","\x26lozenge;":"\u25ca","\x26lozf;":"\u29eb","\x26lpar;":"(","\x26lparlt;":"\u2993","\x26lrarr;":"\u21c6","\x26lrcorner;":"\u231f","\x26lrhar;":"\u21cb","\x26lrhard;":"\u296d","\x26lrm;":"\u200e","\x26lrtri;":"\u22bf","\x26lsaquo;":"\u2039","\x26lscr;":"\ud835\udcc1","\x26lsh;":"\u21b0","\x26lsim;":"\u2272","\x26lsime;":"\u2a8d","\x26lsimg;":"\u2a8f","\x26lsqb;":"[","\x26lsquo;":"\u2018","\x26lsquor;":"\u201a","\x26lstrok;":"\u0142",
"\x26ltcc;":"\u2aa6","\x26ltcir;":"\u2a79","\x26ltdot;":"\u22d6","\x26lthree;":"\u22cb","\x26ltimes;":"\u22c9","\x26ltlarr;":"\u2976","\x26ltquest;":"\u2a7b","\x26ltrPar;":"\u2996","\x26ltri;":"\u25c3","\x26ltrie;":"\u22b4","\x26ltrif;":"\u25c2","\x26lurdshar;":"\u294a","\x26luruhar;":"\u2966","\x26lvertneqq;":"\u2268\ufe00","\x26lvnE;":"\u2268\ufe00","\x26mDDot;":"\u223a","\x26macr;":"\u00af","\x26male;":"\u2642","\x26malt;":"\u2720","\x26maltese;":"\u2720","\x26map;":"\u21a6","\x26mapsto;":"\u21a6",
"\x26mapstodown;":"\u21a7","\x26mapstoleft;":"\u21a4","\x26mapstoup;":"\u21a5","\x26marker;":"\u25ae","\x26mcomma;":"\u2a29","\x26mcy;":"\u043c","\x26mdash;":"\u2014","\x26measuredangle;":"\u2221","\x26mfr;":"\ud835\udd2a","\x26mho;":"\u2127","\x26micro;":"\u00b5","\x26mid;":"\u2223","\x26midast;":"*","\x26midcir;":"\u2af0","\x26middot;":"\u00b7","\x26minus;":"\u2212","\x26minusb;":"\u229f","\x26minusd;":"\u2238","\x26minusdu;":"\u2a2a","\x26mlcp;":"\u2adb","\x26mldr;":"\u2026","\x26mnplus;":"\u2213",
"\x26models;":"\u22a7","\x26mopf;":"\ud835\udd5e","\x26mp;":"\u2213","\x26mscr;":"\ud835\udcc2","\x26mstpos;":"\u223e","\x26mu;":"\u03bc","\x26multimap;":"\u22b8","\x26mumap;":"\u22b8","\x26nGg;":"\u22d9\u0338","\x26nGt;":"\u226b\u20d2","\x26nGtv;":"\u226b\u0338","\x26nLeftarrow;":"\u21cd","\x26nLeftrightarrow;":"\u21ce","\x26nLl;":"\u22d8\u0338","\x26nLt;":"\u226a\u20d2","\x26nLtv;":"\u226a\u0338","\x26nRightarrow;":"\u21cf","\x26nVDash;":"\u22af","\x26nVdash;":"\u22ae","\x26nabla;":"\u2207","\x26nacute;":"\u0144",
"\x26nang;":"\u2220\u20d2","\x26nap;":"\u2249","\x26napE;":"\u2a70\u0338","\x26napid;":"\u224b\u0338","\x26napos;":"\u0149","\x26napprox;":"\u2249","\x26natur;":"\u266e","\x26natural;":"\u266e","\x26naturals;":"\u2115","\x26nbsp;":"\u00a0","\x26nbump;":"\u224e\u0338","\x26nbumpe;":"\u224f\u0338","\x26ncap;":"\u2a43","\x26ncaron;":"\u0148","\x26ncedil;":"\u0146","\x26ncong;":"\u2247","\x26ncongdot;":"\u2a6d\u0338","\x26ncup;":"\u2a42","\x26ncy;":"\u043d","\x26ndash;":"\u2013","\x26ne;":"\u2260","\x26neArr;":"\u21d7",
"\x26nearhk;":"\u2924","\x26nearr;":"\u2197","\x26nearrow;":"\u2197","\x26nedot;":"\u2250\u0338","\x26nequiv;":"\u2262","\x26nesear;":"\u2928","\x26nesim;":"\u2242\u0338","\x26nexist;":"\u2204","\x26nexists;":"\u2204","\x26nfr;":"\ud835\udd2b","\x26ngE;":"\u2267\u0338","\x26nge;":"\u2271","\x26ngeq;":"\u2271","\x26ngeqq;":"\u2267\u0338","\x26ngeqslant;":"\u2a7e\u0338","\x26nges;":"\u2a7e\u0338","\x26ngsim;":"\u2275","\x26ngt;":"\u226f","\x26ngtr;":"\u226f","\x26nhArr;":"\u21ce","\x26nharr;":"\u21ae",
"\x26nhpar;":"\u2af2","\x26ni;":"\u220b","\x26nis;":"\u22fc","\x26nisd;":"\u22fa","\x26niv;":"\u220b","\x26njcy;":"\u045a","\x26nlArr;":"\u21cd","\x26nlE;":"\u2266\u0338","\x26nlarr;":"\u219a","\x26nldr;":"\u2025","\x26nle;":"\u2270","\x26nleftarrow;":"\u219a","\x26nleftrightarrow;":"\u21ae","\x26nleq;":"\u2270","\x26nleqq;":"\u2266\u0338","\x26nleqslant;":"\u2a7d\u0338","\x26nles;":"\u2a7d\u0338","\x26nless;":"\u226e","\x26nlsim;":"\u2274","\x26nlt;":"\u226e","\x26nltri;":"\u22ea","\x26nltrie;":"\u22ec",
"\x26nmid;":"\u2224","\x26nopf;":"\ud835\udd5f","\x26not;":"\u00ac","\x26notin;":"\u2209","\x26notinE;":"\u22f9\u0338","\x26notindot;":"\u22f5\u0338","\x26notinva;":"\u2209","\x26notinvb;":"\u22f7","\x26notinvc;":"\u22f6","\x26notni;":"\u220c","\x26notniva;":"\u220c","\x26notnivb;":"\u22fe","\x26notnivc;":"\u22fd","\x26npar;":"\u2226","\x26nparallel;":"\u2226","\x26nparsl;":"\u2afd\u20e5","\x26npart;":"\u2202\u0338","\x26npolint;":"\u2a14","\x26npr;":"\u2280","\x26nprcue;":"\u22e0","\x26npre;":"\u2aaf\u0338",
"\x26nprec;":"\u2280","\x26npreceq;":"\u2aaf\u0338","\x26nrArr;":"\u21cf","\x26nrarr;":"\u219b","\x26nrarrc;":"\u2933\u0338","\x26nrarrw;":"\u219d\u0338","\x26nrightarrow;":"\u219b","\x26nrtri;":"\u22eb","\x26nrtrie;":"\u22ed","\x26nsc;":"\u2281","\x26nsccue;":"\u22e1","\x26nsce;":"\u2ab0\u0338","\x26nscr;":"\ud835\udcc3","\x26nshortmid;":"\u2224","\x26nshortparallel;":"\u2226","\x26nsim;":"\u2241","\x26nsime;":"\u2244","\x26nsimeq;":"\u2244","\x26nsmid;":"\u2224","\x26nspar;":"\u2226","\x26nsqsube;":"\u22e2",
"\x26nsqsupe;":"\u22e3","\x26nsub;":"\u2284","\x26nsubE;":"\u2ac5\u0338","\x26nsube;":"\u2288","\x26nsubset;":"\u2282\u20d2","\x26nsubseteq;":"\u2288","\x26nsubseteqq;":"\u2ac5\u0338","\x26nsucc;":"\u2281","\x26nsucceq;":"\u2ab0\u0338","\x26nsup;":"\u2285","\x26nsupE;":"\u2ac6\u0338","\x26nsupe;":"\u2289","\x26nsupset;":"\u2283\u20d2","\x26nsupseteq;":"\u2289","\x26nsupseteqq;":"\u2ac6\u0338","\x26ntgl;":"\u2279","\x26ntilde;":"\u00f1","\x26ntlg;":"\u2278","\x26ntriangleleft;":"\u22ea","\x26ntrianglelefteq;":"\u22ec",
"\x26ntriangleright;":"\u22eb","\x26ntrianglerighteq;":"\u22ed","\x26nu;":"\u03bd","\x26num;":"#","\x26numero;":"\u2116","\x26numsp;":"\u2007","\x26nvDash;":"\u22ad","\x26nvHarr;":"\u2904","\x26nvap;":"\u224d\u20d2","\x26nvdash;":"\u22ac","\x26nvge;":"\u2265\u20d2","\x26nvgt;":"\x3e\u20d2","\x26nvinfin;":"\u29de","\x26nvlArr;":"\u2902","\x26nvle;":"\u2264\u20d2","\x26nvlt;":"\x3c\u20d2","\x26nvltrie;":"\u22b4\u20d2","\x26nvrArr;":"\u2903","\x26nvrtrie;":"\u22b5\u20d2","\x26nvsim;":"\u223c\u20d2",
"\x26nwArr;":"\u21d6","\x26nwarhk;":"\u2923","\x26nwarr;":"\u2196","\x26nwarrow;":"\u2196","\x26nwnear;":"\u2927","\x26oS;":"\u24c8","\x26oacute;":"\u00f3","\x26oast;":"\u229b","\x26ocir;":"\u229a","\x26ocirc;":"\u00f4","\x26ocy;":"\u043e","\x26odash;":"\u229d","\x26odblac;":"\u0151","\x26odiv;":"\u2a38","\x26odot;":"\u2299","\x26odsold;":"\u29bc","\x26oelig;":"\u0153","\x26ofcir;":"\u29bf","\x26ofr;":"\ud835\udd2c","\x26ogon;":"\u02db","\x26ograve;":"\u00f2","\x26ogt;":"\u29c1","\x26ohbar;":"\u29b5",
"\x26ohm;":"\u03a9","\x26oint;":"\u222e","\x26olarr;":"\u21ba","\x26olcir;":"\u29be","\x26olcross;":"\u29bb","\x26oline;":"\u203e","\x26olt;":"\u29c0","\x26omacr;":"\u014d","\x26omega;":"\u03c9","\x26omicron;":"\u03bf","\x26omid;":"\u29b6","\x26ominus;":"\u2296","\x26oopf;":"\ud835\udd60","\x26opar;":"\u29b7","\x26operp;":"\u29b9","\x26oplus;":"\u2295","\x26or;":"\u2228","\x26orarr;":"\u21bb","\x26ord;":"\u2a5d","\x26order;":"\u2134","\x26orderof;":"\u2134","\x26ordf;":"\u00aa","\x26ordm;":"\u00ba",
"\x26origof;":"\u22b6","\x26oror;":"\u2a56","\x26orslope;":"\u2a57","\x26orv;":"\u2a5b","\x26oscr;":"\u2134","\x26oslash;":"\u00f8","\x26osol;":"\u2298","\x26otilde;":"\u00f5","\x26otimes;":"\u2297","\x26otimesas;":"\u2a36","\x26ouml;":"\u00f6","\x26ovbar;":"\u233d","\x26par;":"\u2225","\x26para;":"\u00b6","\x26parallel;":"\u2225","\x26parsim;":"\u2af3","\x26parsl;":"\u2afd","\x26part;":"\u2202","\x26pcy;":"\u043f","\x26percnt;":"%","\x26period;":".","\x26permil;":"\u2030","\x26perp;":"\u22a5","\x26pertenk;":"\u2031",
"\x26pfr;":"\ud835\udd2d","\x26phi;":"\u03c6","\x26phiv;":"\u03d5","\x26phmmat;":"\u2133","\x26phone;":"\u260e","\x26pi;":"\u03c0","\x26pitchfork;":"\u22d4","\x26piv;":"\u03d6","\x26planck;":"\u210f","\x26planckh;":"\u210e","\x26plankv;":"\u210f","\x26plus;":"+","\x26plusacir;":"\u2a23","\x26plusb;":"\u229e","\x26pluscir;":"\u2a22","\x26plusdo;":"\u2214","\x26plusdu;":"\u2a25","\x26pluse;":"\u2a72","\x26plusmn;":"\u00b1","\x26plussim;":"\u2a26","\x26plustwo;":"\u2a27","\x26pm;":"\u00b1","\x26pointint;":"\u2a15",
"\x26popf;":"\ud835\udd61","\x26pound;":"\u00a3","\x26pr;":"\u227a","\x26prE;":"\u2ab3","\x26prap;":"\u2ab7","\x26prcue;":"\u227c","\x26pre;":"\u2aaf","\x26prec;":"\u227a","\x26precapprox;":"\u2ab7","\x26preccurlyeq;":"\u227c","\x26preceq;":"\u2aaf","\x26precnapprox;":"\u2ab9","\x26precneqq;":"\u2ab5","\x26precnsim;":"\u22e8","\x26precsim;":"\u227e","\x26prime;":"\u2032","\x26primes;":"\u2119","\x26prnE;":"\u2ab5","\x26prnap;":"\u2ab9","\x26prnsim;":"\u22e8","\x26prod;":"\u220f","\x26profalar;":"\u232e",
"\x26profline;":"\u2312","\x26profsurf;":"\u2313","\x26prop;":"\u221d","\x26propto;":"\u221d","\x26prsim;":"\u227e","\x26prurel;":"\u22b0","\x26pscr;":"\ud835\udcc5","\x26psi;":"\u03c8","\x26puncsp;":"\u2008","\x26qfr;":"\ud835\udd2e","\x26qint;":"\u2a0c","\x26qopf;":"\ud835\udd62","\x26qprime;":"\u2057","\x26qscr;":"\ud835\udcc6","\x26quaternions;":"\u210d","\x26quatint;":"\u2a16","\x26quest;":"?","\x26questeq;":"\u225f","\x26quot;":'"',"\x26rAarr;":"\u21db","\x26rArr;":"\u21d2","\x26rAtail;":"\u291c",
"\x26rBarr;":"\u290f","\x26rHar;":"\u2964","\x26race;":"\u223d\u0331","\x26racute;":"\u0155","\x26radic;":"\u221a","\x26raemptyv;":"\u29b3","\x26rang;":"\u27e9","\x26rangd;":"\u2992","\x26range;":"\u29a5","\x26rangle;":"\u27e9","\x26raquo;":"\u00bb","\x26rarr;":"\u2192","\x26rarrap;":"\u2975","\x26rarrb;":"\u21e5","\x26rarrbfs;":"\u2920","\x26rarrc;":"\u2933","\x26rarrfs;":"\u291e","\x26rarrhk;":"\u21aa","\x26rarrlp;":"\u21ac","\x26rarrpl;":"\u2945","\x26rarrsim;":"\u2974","\x26rarrtl;":"\u21a3",
"\x26rarrw;":"\u219d","\x26ratail;":"\u291a","\x26ratio;":"\u2236","\x26rationals;":"\u211a","\x26rbarr;":"\u290d","\x26rbbrk;":"\u2773","\x26rbrace;":"}","\x26rbrack;":"]","\x26rbrke;":"\u298c","\x26rbrksld;":"\u298e","\x26rbrkslu;":"\u2990","\x26rcaron;":"\u0159","\x26rcedil;":"\u0157","\x26rceil;":"\u2309","\x26rcub;":"}","\x26rcy;":"\u0440","\x26rdca;":"\u2937","\x26rdldhar;":"\u2969","\x26rdquo;":"\u201d","\x26rdquor;":"\u201d","\x26rdsh;":"\u21b3","\x26real;":"\u211c","\x26realine;":"\u211b",
"\x26realpart;":"\u211c","\x26reals;":"\u211d","\x26rect;":"\u25ad","\x26reg;":"\u00ae","\x26rfisht;":"\u297d","\x26rfloor;":"\u230b","\x26rfr;":"\ud835\udd2f","\x26rhard;":"\u21c1","\x26rharu;":"\u21c0","\x26rharul;":"\u296c","\x26rho;":"\u03c1","\x26rhov;":"\u03f1","\x26rightarrow;":"\u2192","\x26rightarrowtail;":"\u21a3","\x26rightharpoondown;":"\u21c1","\x26rightharpoonup;":"\u21c0","\x26rightleftarrows;":"\u21c4","\x26rightleftharpoons;":"\u21cc","\x26rightrightarrows;":"\u21c9","\x26rightsquigarrow;":"\u219d",
"\x26rightthreetimes;":"\u22cc","\x26ring;":"\u02da","\x26risingdotseq;":"\u2253","\x26rlarr;":"\u21c4","\x26rlhar;":"\u21cc","\x26rlm;":"\u200f","\x26rmoust;":"\u23b1","\x26rmoustache;":"\u23b1","\x26rnmid;":"\u2aee","\x26roang;":"\u27ed","\x26roarr;":"\u21fe","\x26robrk;":"\u27e7","\x26ropar;":"\u2986","\x26ropf;":"\ud835\udd63","\x26roplus;":"\u2a2e","\x26rotimes;":"\u2a35","\x26rpar;":")","\x26rpargt;":"\u2994","\x26rppolint;":"\u2a12","\x26rrarr;":"\u21c9","\x26rsaquo;":"\u203a","\x26rscr;":"\ud835\udcc7",
"\x26rsh;":"\u21b1","\x26rsqb;":"]","\x26rsquo;":"\u2019","\x26rsquor;":"\u2019","\x26rthree;":"\u22cc","\x26rtimes;":"\u22ca","\x26rtri;":"\u25b9","\x26rtrie;":"\u22b5","\x26rtrif;":"\u25b8","\x26rtriltri;":"\u29ce","\x26ruluhar;":"\u2968","\x26rx;":"\u211e","\x26sacute;":"\u015b","\x26sbquo;":"\u201a","\x26sc;":"\u227b","\x26scE;":"\u2ab4","\x26scap;":"\u2ab8","\x26scaron;":"\u0161","\x26sccue;":"\u227d","\x26sce;":"\u2ab0","\x26scedil;":"\u015f","\x26scirc;":"\u015d","\x26scnE;":"\u2ab6","\x26scnap;":"\u2aba",
"\x26scnsim;":"\u22e9","\x26scpolint;":"\u2a13","\x26scsim;":"\u227f","\x26scy;":"\u0441","\x26sdot;":"\u22c5","\x26sdotb;":"\u22a1","\x26sdote;":"\u2a66","\x26seArr;":"\u21d8","\x26searhk;":"\u2925","\x26searr;":"\u2198","\x26searrow;":"\u2198","\x26sect;":"\u00a7","\x26semi;":";","\x26seswar;":"\u2929","\x26setminus;":"\u2216","\x26setmn;":"\u2216","\x26sext;":"\u2736","\x26sfr;":"\ud835\udd30","\x26sfrown;":"\u2322","\x26sharp;":"\u266f","\x26shchcy;":"\u0449","\x26shcy;":"\u0448","\x26shortmid;":"\u2223",
"\x26shortparallel;":"\u2225","\x26shy;":"\u00ad","\x26sigma;":"\u03c3","\x26sigmaf;":"\u03c2","\x26sigmav;":"\u03c2","\x26sim;":"\u223c","\x26simdot;":"\u2a6a","\x26sime;":"\u2243","\x26simeq;":"\u2243","\x26simg;":"\u2a9e","\x26simgE;":"\u2aa0","\x26siml;":"\u2a9d","\x26simlE;":"\u2a9f","\x26simne;":"\u2246","\x26simplus;":"\u2a24","\x26simrarr;":"\u2972","\x26slarr;":"\u2190","\x26smallsetminus;":"\u2216","\x26smashp;":"\u2a33","\x26smeparsl;":"\u29e4","\x26smid;":"\u2223","\x26smile;":"\u2323",
"\x26smt;":"\u2aaa","\x26smte;":"\u2aac","\x26smtes;":"\u2aac\ufe00","\x26softcy;":"\u044c","\x26sol;":"/","\x26solb;":"\u29c4","\x26solbar;":"\u233f","\x26sopf;":"\ud835\udd64","\x26spades;":"\u2660","\x26spadesuit;":"\u2660","\x26spar;":"\u2225","\x26sqcap;":"\u2293","\x26sqcaps;":"\u2293\ufe00","\x26sqcup;":"\u2294","\x26sqcups;":"\u2294\ufe00","\x26sqsub;":"\u228f","\x26sqsube;":"\u2291","\x26sqsubset;":"\u228f","\x26sqsubseteq;":"\u2291","\x26sqsup;":"\u2290","\x26sqsupe;":"\u2292","\x26sqsupset;":"\u2290",
"\x26sqsupseteq;":"\u2292","\x26squ;":"\u25a1","\x26square;":"\u25a1","\x26squarf;":"\u25aa","\x26squf;":"\u25aa","\x26srarr;":"\u2192","\x26sscr;":"\ud835\udcc8","\x26ssetmn;":"\u2216","\x26ssmile;":"\u2323","\x26sstarf;":"\u22c6","\x26star;":"\u2606","\x26starf;":"\u2605","\x26straightepsilon;":"\u03f5","\x26straightphi;":"\u03d5","\x26strns;":"\u00af","\x26sub;":"\u2282","\x26subE;":"\u2ac5","\x26subdot;":"\u2abd","\x26sube;":"\u2286","\x26subedot;":"\u2ac3","\x26submult;":"\u2ac1","\x26subnE;":"\u2acb",
"\x26subne;":"\u228a","\x26subplus;":"\u2abf","\x26subrarr;":"\u2979","\x26subset;":"\u2282","\x26subseteq;":"\u2286","\x26subseteqq;":"\u2ac5","\x26subsetneq;":"\u228a","\x26subsetneqq;":"\u2acb","\x26subsim;":"\u2ac7","\x26subsub;":"\u2ad5","\x26subsup;":"\u2ad3","\x26succ;":"\u227b","\x26succapprox;":"\u2ab8","\x26succcurlyeq;":"\u227d","\x26succeq;":"\u2ab0","\x26succnapprox;":"\u2aba","\x26succneqq;":"\u2ab6","\x26succnsim;":"\u22e9","\x26succsim;":"\u227f","\x26sum;":"\u2211","\x26sung;":"\u266a",
"\x26sup;":"\u2283","\x26sup1;":"\u00b9","\x26sup2;":"\u00b2","\x26sup3;":"\u00b3","\x26supE;":"\u2ac6","\x26supdot;":"\u2abe","\x26supdsub;":"\u2ad8","\x26supe;":"\u2287","\x26supedot;":"\u2ac4","\x26suphsol;":"\u27c9","\x26suphsub;":"\u2ad7","\x26suplarr;":"\u297b","\x26supmult;":"\u2ac2","\x26supnE;":"\u2acc","\x26supne;":"\u228b","\x26supplus;":"\u2ac0","\x26supset;":"\u2283","\x26supseteq;":"\u2287","\x26supseteqq;":"\u2ac6","\x26supsetneq;":"\u228b","\x26supsetneqq;":"\u2acc","\x26supsim;":"\u2ac8",
"\x26supsub;":"\u2ad4","\x26supsup;":"\u2ad6","\x26swArr;":"\u21d9","\x26swarhk;":"\u2926","\x26swarr;":"\u2199","\x26swarrow;":"\u2199","\x26swnwar;":"\u292a","\x26szlig;":"\u00df","\x26target;":"\u2316","\x26tau;":"\u03c4","\x26tbrk;":"\u23b4","\x26tcaron;":"\u0165","\x26tcedil;":"\u0163","\x26tcy;":"\u0442","\x26tdot;":" \u20db","\x26telrec;":"\u2315","\x26tfr;":"\ud835\udd31","\x26there4;":"\u2234","\x26therefore;":"\u2234","\x26theta;":"\u03b8","\x26thetasym;":"\u03d1","\x26thetav;":"\u03d1",
"\x26thickapprox;":"\u2248","\x26thicksim;":"\u223c","\x26thinsp;":"\u2009","\x26thkap;":"\u2248","\x26thksim;":"\u223c","\x26thorn;":"\u00fe","\x26tilde;":"\u02dc","\x26times;":"\u00d7","\x26timesb;":"\u22a0","\x26timesbar;":"\u2a31","\x26timesd;":"\u2a30","\x26tint;":"\u222d","\x26toea;":"\u2928","\x26top;":"\u22a4","\x26topbot;":"\u2336","\x26topcir;":"\u2af1","\x26topf;":"\ud835\udd65","\x26topfork;":"\u2ada","\x26tosa;":"\u2929","\x26tprime;":"\u2034","\x26trade;":"\u2122","\x26triangle;":"\u25b5",
"\x26triangledown;":"\u25bf","\x26triangleleft;":"\u25c3","\x26trianglelefteq;":"\u22b4","\x26triangleq;":"\u225c","\x26triangleright;":"\u25b9","\x26trianglerighteq;":"\u22b5","\x26tridot;":"\u25ec","\x26trie;":"\u225c","\x26triminus;":"\u2a3a","\x26triplus;":"\u2a39","\x26trisb;":"\u29cd","\x26tritime;":"\u2a3b","\x26trpezium;":"\u23e2","\x26tscr;":"\ud835\udcc9","\x26tscy;":"\u0446","\x26tshcy;":"\u045b","\x26tstrok;":"\u0167","\x26twixt;":"\u226c","\x26twoheadleftarrow;":"\u219e","\x26twoheadrightarrow;":"\u21a0",
"\x26uArr;":"\u21d1","\x26uHar;":"\u2963","\x26uacute;":"\u00fa","\x26uarr;":"\u2191","\x26ubrcy;":"\u045e","\x26ubreve;":"\u016d","\x26ucirc;":"\u00fb","\x26ucy;":"\u0443","\x26udarr;":"\u21c5","\x26udblac;":"\u0171","\x26udhar;":"\u296e","\x26ufisht;":"\u297e","\x26ufr;":"\ud835\udd32","\x26ugrave;":"\u00f9","\x26uharl;":"\u21bf","\x26uharr;":"\u21be","\x26uhblk;":"\u2580","\x26ulcorn;":"\u231c","\x26ulcorner;":"\u231c","\x26ulcrop;":"\u230f","\x26ultri;":"\u25f8","\x26umacr;":"\u016b","\x26uml;":"\u00a8",
"\x26uogon;":"\u0173","\x26uopf;":"\ud835\udd66","\x26uparrow;":"\u2191","\x26updownarrow;":"\u2195","\x26upharpoonleft;":"\u21bf","\x26upharpoonright;":"\u21be","\x26uplus;":"\u228e","\x26upsi;":"\u03c5","\x26upsih;":"\u03d2","\x26upsilon;":"\u03c5","\x26upuparrows;":"\u21c8","\x26urcorn;":"\u231d","\x26urcorner;":"\u231d","\x26urcrop;":"\u230e","\x26uring;":"\u016f","\x26urtri;":"\u25f9","\x26uscr;":"\ud835\udcca","\x26utdot;":"\u22f0","\x26utilde;":"\u0169","\x26utri;":"\u25b5","\x26utrif;":"\u25b4",
"\x26uuarr;":"\u21c8","\x26uuml;":"\u00fc","\x26uwangle;":"\u29a7","\x26vArr;":"\u21d5","\x26vBar;":"\u2ae8","\x26vBarv;":"\u2ae9","\x26vDash;":"\u22a8","\x26vangrt;":"\u299c","\x26varepsilon;":"\u03f5","\x26varkappa;":"\u03f0","\x26varnothing;":"\u2205","\x26varphi;":"\u03d5","\x26varpi;":"\u03d6","\x26varpropto;":"\u221d","\x26varr;":"\u2195","\x26varrho;":"\u03f1","\x26varsigma;":"\u03c2","\x26varsubsetneq;":"\u228a\ufe00","\x26varsubsetneqq;":"\u2acb\ufe00","\x26varsupsetneq;":"\u228b\ufe00",
"\x26varsupsetneqq;":"\u2acc\ufe00","\x26vartheta;":"\u03d1","\x26vartriangleleft;":"\u22b2","\x26vartriangleright;":"\u22b3","\x26vcy;":"\u0432","\x26vdash;":"\u22a2","\x26vee;":"\u2228","\x26veebar;":"\u22bb","\x26veeeq;":"\u225a","\x26vellip;":"\u22ee","\x26verbar;":"|","\x26vert;":"|","\x26vfr;":"\ud835\udd33","\x26vltri;":"\u22b2","\x26vnsub;":"\u2282\u20d2","\x26vnsup;":"\u2283\u20d2","\x26vopf;":"\ud835\udd67","\x26vprop;":"\u221d","\x26vrtri;":"\u22b3","\x26vscr;":"\ud835\udccb","\x26vsubnE;":"\u2acb\ufe00",
"\x26vsubne;":"\u228a\ufe00","\x26vsupnE;":"\u2acc\ufe00","\x26vsupne;":"\u228b\ufe00","\x26vzigzag;":"\u299a","\x26wcirc;":"\u0175","\x26wedbar;":"\u2a5f","\x26wedge;":"\u2227","\x26wedgeq;":"\u2259","\x26weierp;":"\u2118","\x26wfr;":"\ud835\udd34","\x26wopf;":"\ud835\udd68","\x26wp;":"\u2118","\x26wr;":"\u2240","\x26wreath;":"\u2240","\x26wscr;":"\ud835\udccc","\x26xcap;":"\u22c2","\x26xcirc;":"\u25ef","\x26xcup;":"\u22c3","\x26xdtri;":"\u25bd","\x26xfr;":"\ud835\udd35","\x26xhArr;":"\u27fa","\x26xharr;":"\u27f7",
"\x26xi;":"\u03be","\x26xlArr;":"\u27f8","\x26xlarr;":"\u27f5","\x26xmap;":"\u27fc","\x26xnis;":"\u22fb","\x26xodot;":"\u2a00","\x26xopf;":"\ud835\udd69","\x26xoplus;":"\u2a01","\x26xotime;":"\u2a02","\x26xrArr;":"\u27f9","\x26xrarr;":"\u27f6","\x26xscr;":"\ud835\udccd","\x26xsqcup;":"\u2a06","\x26xuplus;":"\u2a04","\x26xutri;":"\u25b3","\x26xvee;":"\u22c1","\x26xwedge;":"\u22c0","\x26yacute;":"\u00fd","\x26yacy;":"\u044f","\x26ycirc;":"\u0177","\x26ycy;":"\u044b","\x26yen;":"\u00a5","\x26yfr;":"\ud835\udd36",
"\x26yicy;":"\u0457","\x26yopf;":"\ud835\udd6a","\x26yscr;":"\ud835\udcce","\x26yucy;":"\u044e","\x26yuml;":"\u00ff","\x26zacute;":"\u017a","\x26zcaron;":"\u017e","\x26zcy;":"\u0437","\x26zdot;":"\u017c","\x26zeetrf;":"\u2128","\x26zeta;":"\u03b6","\x26zfr;":"\ud835\udd37","\x26zhcy;":"\u0436","\x26zigrarr;":"\u21dd","\x26zopf;":"\ud835\udd6b","\x26zscr;":"\ud835\udccf","\x26zwj;":"\u200d","\x26zwnj;":"\u200c"},f=null;return{_entities:function(){return h},replaceUnicodeByEntityName:function(g){if(!f){var e;
f={};for(e in h)h.hasOwnProperty(e)&&(f[h[e]]=e)}return g.replace(/[^\000-\177]/g,function(d){return f[d]||d})},replace:function(f){return f.replace(/(&\w+;)/g,function(e){return h[e]||e})}}})},"MW/equations/utils/StringUtils":function(){define([],function(){return{fromCodePoint:function(h){return String.fromCodePoint?String.fromCodePoint(h):65535<h?(h-=65536,String.fromCharCode(55296+(h>>10),56320+(h&1023))):String.fromCharCode(h)}}})},"MW/equations/utils/HasExtensions":function(){define(["dojo/has"],
function(h){h.add("linux",function(){return window.navigator.platform.match(/linux/i)});h.add("win",function(){return window.navigator.platform.match(/win32|win64/i)})})},"MW/equations/renderer/model/importers/TeXSymbols":function(){define([],function(){var h="aleph alpha amalg angle approx ast asymp backslash beta bigcap bigcup biguplus bigvee bigwedge bigodot bigoplus bigotimes bigsqcup bigtriangleup bigtriangledown bigcirc bot bowtie bullet cap cdot cdotp cdots chi circ colon cong cup dagger ddagger dashv ddots delta Delta diamond div doteq dots downarrow Downarrow ell emptyset equiv epsilon eta exists forall Gamma gamma ge geq gets gg hbar hookleftarrow hookrightarrow i iff Im imath in infty int intbar intop iota j jmath kappa lambda Lambda land langle lbrace lbrack llbracket lceil ldotp ldots le leq leadsto leftarrow Leftarrow leftrightarrow Leftrightarrow leftharpoondown leftharpoonup lfloor ll lnot longleftarrow Longleftarrow longleftrightarrow Longleftrightarrow longmapsto longrightarrow Longrightarrow lor lt mapsto mid models mp mu nabla ne neq neg nearrow nwarrow ni notin nu odot oint omega Omega omicron ominus oplus otimes oslash owns parallel partial perp pi Pi phi Phi psi Psi pm prec preceq prime propto prod rangle rbrace rbrack rrbracket rceil Re rfloor rho rightarrow Rightarrow rightharpoondown rightharpoonup rightleftharpoons sigma searrow setminus Sigma sim simeq sqcap sqcup sqsubseteq sqsupseteq star subset subseteq succ succeq sum supset supseteq surd swarrow tau theta therefore Theta times to top triangle triangleq triangleleft triangleright uplus upsilon Upsilon uparrow Uparrow updownarrow Updownarrow varepsilon varphi varpi varrho varsigma vartheta vdash vdots vee vert Vert wedge wp wr xi Xi zeta".split(" "),
f={};h.forEach(function(g){f[g]=!0},h);return f})},"MW/equations/renderer/model/utils/NodeFactory":function(){define("../MathAction ../MathDelimiter ../MathFenced ../MathFraction ../MathMatrix ../MathMultiScript ../MathRadical ../MathRoot ../MathRow ../MathScript ../MathSpace ../MathStyle ../MathText".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n){return{createNode:function(p,r){r=r||{};switch(p){case "Null":return null;case "MathAction":return r.children=r.children||[],new h(r);case "MathDelimiter":return new f(r);
case "MathFenced":return r.children=r.children||[],new g(r);case "MathFraction":return r.children=r.children||[],new e(r);case "MathMatrix":return r.children=r.children||[],new d(r);case "MathMultiScript":return r.children=r.children||[],new c(r);case "MathRadical":return r.children=r.children||[],new b(r);case "MathRoot":return r.children=r.children||[],new a(r);case "MathRow":return r.children=r.children||[],new k(r);case "MathScript":return r.children=r.children||[],new l(r);case "MathSpace":return new m(r);
case "MathStyle":return r.children=r.children||[],new q(r);case "MathText":return r.text=r.text||"",new n(r)}}}})},"MW/equations/renderer/model/MathAction":function(){define(["dojo/_base/declare","./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,f,g,e){return h(f,{constructor:function(d){d=d||{};this.className="MathAction";this.actiontype=d.actiontype},_exportMathML:function(d){var c=g.startTag(d,"maction",this,["actiontype"]);this.children.forEach(function(b){c+=b._exportMathML(d)});
return c+=g.endTag("maction")},_exportLaTeX:function(d){var c="";0<this.children.length&&(c+=e.exportChild(this.children[0],d));return c},_stripQuotes:function(d){return 2<d.length&&'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)?d.slice(1,-1):d},layout:function(d){var c=d.layoutChildren([this.children[0]]);d=d.parseBoxes("h{1}",c);d.computeMetrics();"tooltip"===this.actiontype&&(c=this.children[1],"MathRow"===c.className&&1===c.children.length&&(c=c.children[0],"MathText"===c.className&&(d.tooltip=
this._stripQuotes(c.text))));return d}})})},"MW/equations/renderer/model/MathDelimiter":function(){define("dojo/_base/declare MW/equations/renderer/model/SpacingClasses ./MathBaseNode ./Symbols ./utils/MathMLExportUtils ./utils/TeXUtils".split(" "),function(h,f,g,e,d,c){return h(g,{constructor:function(b){b=b||{};this.className="MathDelimiter";this.symbolName=b.symbolName;this.TeXSpacing=b.TeXSpacing;this.minsize=b.minsize;this.maxsize=b.maxsize;b.hasOwnProperty("stretchy")&&(this.stretchy=b.stretchy)},
_exportMathML:function(b){var a=["minsize","maxsize"];e.isStretchyAccent(this.symbolName)&&!e.isStretchyOperatorByDefault(this.symbolName)&&a.push("stretchy");b=d.startTag(b,"mo",this,a);b+=d.maskSpecialCharacters(e.serializeSymbol(this.symbolName));return b+=d.endTag("mo")},_exportLaTeX:function(b){var a="",d={"1.2":"big","1.8":"Big","2.4":"bigg",3:"Bigg"};if(e.isStretchyOperatorByDefault(this.symbolName))if(e.isOpeningDelimiter(this.symbolName)||e.isSeparator(this.symbolName)&&0===b.openParens)a=
this.minsize&&this.minsize===this.maxsize&&d[this.minsize]?a+("\\"+d[this.minsize]+(this.TeXSpacing===f.OPEN?"l":"")):a+"\\left",b.openParens+=1;else if(e.isClosingDelimiter(this.symbolName)||e.isSeparator(this.symbolName)&&0<b.openParens)a=this.minsize&&this.minsize===this.maxsize&&d[this.minsize]?a+("\\"+d[this.minsize]+(this.TeXSpacing===f.CLOSE?"r":"")):a+"\\right",b.openParens-=1;return a+=c.commandName(this.symbolName," ")},_layoutStretchyBox:function(b,a){var c=b.mathAxis();a.setSymbolBoxData(this,
c);return a},_layoutHorizontalStretchyBox:function(b,a){a.setSymbolBoxData(this);return a},isVerticalDelimiter:function(){return!e.isStretchyAccent(this.symbolName)},getAccent:function(){return e.isAccent(this.symbolName)?this:null},layout:function(b){return e.isStretchyAccent(this.symbolName)?this._layoutHorizontalStretchyBox(b,b.parseBoxes("a")):this._layoutStretchyBox(b,b.parseBoxes("s"))}})})},"MW/equations/renderer/model/MathFenced":function(){define(["dojo/_base/declare","./MathInnerNode","./SpacingClasses",
"./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,f,g,e,d){return h(f,{constructor:function(c){c=c||{};this.className="MathFenced";this.open=c.open||"(";this.close=c.close||")"},_exportMathML:function(c){var b=e.startTag(c,"mfenced",this,["open","close"]);this.children.forEach(function(a){b+=a._exportMathML(c)});return b+=e.endTag("mfenced")},_exportLaTeX:function(c){var b=this.open?this.open:".",a=this.close?this.close:".",a="}"===a?"\\}":a,e="{\\left"+("{"===b?"\\{":b),b=c.addBraces;c.openParens=
0;c.addBraces=d.NEVER_ADD_BRACES;this.children.forEach(function(a){e+=d.exportChild(a,c)});e+="\\right"+a+"}";c.addBraces=b;return e},layout:function(c){var b=c.layoutChildren(this.children),a=b[0],b=c.parseBoxes("h{s1s}",b),d=b.templateParts,e=d[1],f=d[2];e.setSymbolName(this.open);e.resizeAndCenterDelimiter(c,a.ascent(),a.descent());f.setSymbolName(this.close);f.resizeAndCenterDelimiter(c,a.ascent(),a.descent());c.computeTemplateMetrics(d);b.spacing=g.NEST;e.spacing=g.OPEN;f.spacing=g.CLOSE;return b}})})},
"MW/equations/renderer/model/MathFraction":function(){define(["dojo/_base/declare","./MathInnerNode","./SpacingClasses","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,f,g,e,d){return h(f,{constructor:function(c){c=c||{};this.className="MathFraction";this.bevelled=c.bevelled||!1;this.linethickness=c.hasOwnProperty("linethickness")?c.linethickness:""},_exportMathML:function(c){var b=[];this.bevelled&&b.push("bevelled");""!==this.linethickness&&b.push("linethickness");var a=e.startTag(c,
"mfrac",this,b);this.children.forEach(function(b){a+=b._exportMathML(c)});return a+=e.endTag("mfrac")},_exportLaTeX:function(c){var b=c.addBraces;c.addBraces=d.ALWAYS_ADD_BRACES;var a="",a=d.exportChild(this.children[0],c),e=d.exportChild(this.children[1],c),a=""!==this.linethickness&&0===parseFloat(this.linethickness)?a+"\\atop"+e:"\\frac"+a+e;c.addBraces=b;return a},_layoutRegularFraction:function(c,b){var a;a=b.mathAxis();var d=b.barHeight(),e=b.parseBoxes("v{1wrw2}",c),f=e.templateParts,h=parseFloat(this.linethickness);
isNaN(h)&&(h=d);f[1].length=d;f[3].length=d;f[2].thickness=h;f[0].alignment="c";b.computeTemplateMetrics(f);a=c[0].height()+a-d;e.setAscent(a);e.spacing=g.INNER;return e},_placeFractionBar:function(c,b,a,d,e){var f=a+d,g=2/3;c.setSymbolName("/");c.resizeAndCenterDelimiter(b,a*g,d*g);c.setAscent(c.height()/f*a+e);c.setWidth(b.emToPx(0.1));c.setLeft(-Math.floor((c.precomputedWidth-c.width())/2))},_layoutBevelledFraction:function(c,b){var a=b.parseBoxes("h{v{1}v{s}v{2}}",c),d=a.templateParts,e=d[1],
f=d[2],g=d[3],h=d[4],p=b.mathAxis()/2,r=c[0].height(),s=c[1].height();this._placeFractionBar(d[3],b,r,s,p);e.computeMetrics();e.setDescent(0);f.computeMetrics();f.setAscent(g.ascent()-p);h.computeMetrics();h.setAscent(0);a.computeMetrics();return a},layout:function(c){var b=c.layoutChildren(this.children);return this.bevelled?this._layoutBevelledFraction(b,c):this._layoutRegularFraction(b,c)}})})},"MW/equations/renderer/model/MathMatrix":function(){define(["dojo/_base/declare","MW/equations/renderer/model/MathConstants",
"./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,f,g,e,d){return h(g,{constructor:function(c){this.className="MathMatrix";this.rows=c.rows;this.cols=c.cols;this.frame=c.frame;this.colspec=c.colspec||"";this.rowspacing="";this.hlines=c.hlines||null},setHLines:function(c){this.hlines=c},setFrame:function(c){this.frame=c},_exportMathML:function(c){var b=[],a=this.colspec,d=!1,f,g="";if(""!==a){for(f=0;f<a.length;f+=1)switch(a.charAt(f)){case "a":case "c":g+=" center";break;
case "l":g+=" left";break;case "r":g+=" right";break;case "d":g+=" decimalpoint",d=!0}g=g.slice(1);d?(this.groupalign=g,b.push("groupalign")):(this.columnalign=g,b.push("columnalign"))}this.frame&&b.push("frame");this.hlines&&(this.rowlines=this.hlines.join(" "),b.push("rowlines"));b=e.startTag(c,"mtable",this,b);for(d=0;d<this.rows;d+=1){b+=e.startTag(c,"mtr",this);for(a=0;a<this.cols;a+=1)b+=e.startTag(c,"mtd",this),b+=this.children[d*this.cols+a]._exportMathML(c),b+=e.endTag("mtd");b+=e.endTag("mtr")}return b+=
e.endTag("mtable")},_canSplit:function(c,b){var a=-1,d=[c,""];if("d"===b)a=c.indexOf(".");else if("a"===b){var e,f,g;e=c.indexOf("\x3d");f=c.indexOf("\x3c");g=c.indexOf("\x3e");a=Math.max(e,f,g);a=-1<e&&e<a?e:a;a=-1<f&&f<a?f:a;a=-1<g&&g<a?g:a}-1!==a&&(d=[c.slice(0,a),c.slice(a)]);return d},_exportChildrenToLaTeX:function(c){var b,a,e,f=Array(this.rows),g=Array(this.cols),h=this.colspec||"c";h.length<this.cols&&(h+=Array(this.cols-h.length+1).join(h[h.length-1]));for(b=0;b<this.cols;b+=1)g[b]="a"===
h[b]||"d"===h[b];for(a=0;a<this.rows;a+=1){f[a]=Array(this.cols);for(b=0;b<this.cols;b+=1)e=[d.exportChild(this.children[a*this.cols+b],c)],g[b]&&(e=this._canSplit(e[0],h[b]),g[b]&=""!==e[1]),f[a][b]=e}h=h.split("");for(b=0;b<this.cols;b+=1)if("a"===h[b]||"d"===h[b])h[b]=g[b]?"rl":"c";return{entries:f,colNeedsSplit:g,colspec:h.join("")}},_exportLaTeX:function(c){var b,a,d=c.addBraces;c.addBraces="never";var e=this._exportChildrenToLaTeX(c),g=this.frame===f.SOLID_LINE||this.frame===f.DASHED_LINE;g&&
(e.colspec="|"+e.colspec+"|");var h="\\begin{array}{"+e.colspec+"}\n";g&&(h+="\\hline\n");for(a=0;a<this.rows;a+=1){null!==this.hlines&&this.hlines[a]===f.SOLID_LINE&&(h+="\\hline\n");for(b=0;b<this.cols;b+=1)h=e.colNeedsSplit[b]?h+e.entries[a][b].join("\\kern -0.8em\x26"):h+e.entries[a][b].join(""),h+=b<this.cols-1?" \x26 ":"";h+=a<this.rows-1?"\\\\\n":"\n"}g&&(h=h.slice(0,-1)+"\\\\\n\\hline\n");c.addBraces=d;return h+"\\end{array}"},_initColSpec:function(c){var b=this.colspec||"c",a;b.length<c&&
(a=b.charAt(b.length-1),c=c-b.length+1,b+=Array(c).join(a));return b},_initWorkData:function(c,b,a,d){c=d.renderer;b={rowAscent:[],rowDescent:[],columnspacing:Math.ceil(d.emToPx(0.8)),rowspacing:Math.ceil(d.emToPx(0.4))};var e=b.rowspacing/2,f,g;for(f=a-1;0<=f;f-=1)g=0===f?0:e,b.rowAscent[f]=Math.ceil(d.emToPx(c.fontAscent)+g),g=f===a-1?0:e,b.rowDescent[f]=Math.ceil(d.emToPx(c.fontDescent)+g);return b},_setColumnAlignment:function(c,b,a,d,e){a=this._initColSpec(a);var f;for(f=0;f<b.length;f+=1)b[f]=
this._setOneColumnAlignment(c,b[f],d,a.charAt(f),e)},_setOneColumnAlignment:function(c,b,a,d,e){var f=null;if("l"===d||"r"===d||"c"===d)return b.alignment=d,b;if(1===a)return b;if("d"===d||"a"===d||""===d)f=this._splitColumn(c,b,a,d,e);else throw"unknown alignment "+d;if(!f)return b;c=e.parseBoxes("h{*}",f);c.computeMetrics();return c},_getSplitInfo:function(c,b,a){var d=[],e,f;for(e=0;e<a;e+=1){f=c.children[e];f=f.findAlignmentPoint(b,[]);if(!f)return null;d.push(f)}return d},_newTableEntryBox:function(c,
b){return c.parseBoxes("h{v{}1w}",[b])},_splitColumn:function(c,b,a,d,e){var f="d",g=[],h,p;"a"===d&&(f="\x3d");d=this._getSplitInfo(b,f,a);if(!d)return null;for(f=0;f<a;f+=1)h=b.children[f],d[f]&&(p=h.splitAt(d[f]),p=this._newTableEntryBox(e,p.right)),g.push(p);e=e.parseBoxes("v{*}",g);this._setOneColumnEntrySizes(c,0,[e],1,a);e.computeMetrics();b.alignment="r";e.alignment="l";return[b,e]},_computeEntrySizes:function(c,b,a,d){var e,f,g,h,p=c.rowspacing/2;for(e=a-1;0<=e;e-=1){f=b[e].children;for(a=
d-1;0<=a;a-=1)g=f[a].children[1],h=0===a?0:p,c.rowAscent[a]=Math.max(c.rowAscent[a],Math.ceil(g.ascent()+h)),h=a===d-1?0:p,c.rowDescent[a]=Math.max(c.rowDescent[a],Math.ceil(g.descent()+h))}},_setOneColumnEntrySizes:function(c,b,a,d,e){var f,g;a=a[b];for(e-=1;0<=e;e-=1)f=a.children[e],g=f.templateParts,g[1].setMetrics({ascent:c.rowAscent[e],descent:c.rowDescent[e]}),b<d-1&&(g[2].length=c.columnspacing),g[2].computeMetrics(),f.computeMetrics();a.computeMetrics()},_setEntrySizes:function(c,b,a,d){var e;
for(e=0;e<a;e+=1)this._setOneColumnEntrySizes(c,e,b,a,d)},_addFrame:function(c,b){this.frame&&(c.borderStyle=this.frame,c.borderWidth=b.barHeight())},_setTableData:function(c,b){var a=c.children[0].children,d=a.length,e=a[0].children.length,f=this._initWorkData(a,d,e,b);this._computeEntrySizes(f,a,d,e);this._setEntrySizes(f,a,d,e);this._setColumnAlignment(f,a,d,e,b);this._addFrame(c,b);c.children[0].computeMetrics();c.computeMetrics()},_insertRowLines:function(c,b){var a=c.children[0].children,d,
e,g,h;h=b.barHeight();for(e=0;e<this.cols;e+=1)for(d=this.rows-1;0<=d;d-=1)this.hlines[d]===f.SOLID_LINE&&(g=b.parseBoxes("r",null),g.thickness=h,g.computeMetrics(),a[e].children.splice(d,0,g));c.children[0].computeMetrics();c.computeMetrics()},_makeTableBox:function(c,b,a){c=[];var d,e,f,g;for(e=this.cols-1;0<=e;e-=1){f=[];for(d=this.rows-1;0<=d;d-=1)g=d*this.cols+e,g=b[g],f[d]=this._newTableEntryBox(a,g);c[e]=a.parseBoxes("v{*}",f)}return a.parseBoxes("v{h{*}}",c)},layout:function(c){var b=this.children,
a=c.layoutChildren(this.children),b=this._makeTableBox(b,a,c);0<this.children.length&&(this._setTableData(b,c),null!==this.hlines&&this._insertRowLines(b,c),1<this.rows&&b.centerAt(c.mathAxis()));return b}})})},"MW/equations/renderer/model/MathMultiScript":function(){define(["dojo/_base/declare","./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,f,g,e){return h(f,{constructor:function(d){this.className="MathMultiScript";d=d||{};this.numPostPairs=d.numPostPairs||0},_exportChildToMathML:function(d,
c){return c?c._exportMathML(d):g.emptyTag("none")},_exportMathML:function(d){var c=g.startTag(d,"mmultiscripts",this),b=this.children,a,e=this.numPostPairs,f=Math.floor((b.length-1-2*e)/2),c=c+this._exportChildToMathML(d,b[0]);for(a=1;a<2*e+1;a+=1)c+=this._exportChildToMathML(d,b[a]);if(f){c+=g.emptyTag("mprescripts");for(a=2*e+1;a<b.length;a+=1)c+=this._exportChildToMathML(d,b[a])}return c+=g.endTag("mmultiscripts")},_exportChildrenToLaTeX:function(d,c,b,a){c=null!==c?e.exportChild(c,d):"{}";b=e.exportChild(b,
d);d=e.exportChild(a,d);return c=c+(d?"^"+d:"")+(b?"_"+b:"")},_exportLaTeX:function(d){var c="",b=this.children,a,e=this.numPostPairs;if(Math.floor((b.length-1-2*e)/2))for(a=2*e+1;a<b.length;a+=2)c+=this._exportChildrenToLaTeX(d,null,b[a],b[a+1]);if(e){c+=this._exportChildrenToLaTeX(d,b[0],b[1],b[2]);for(a=3;a<2*e+1;a+=2)c+=this._exportChildrenToLaTeX(d,null,b[a],b[a+1])}else c+=this._exportChildrenToLaTeX(d,b[0],null,null);return c},_makeOneMultiScriptBox:function(d,c,b,a){d=c&&b?d.parseBoxes("v{2w1}",
[c,b]):d.parseBoxes("v{21}",[c,b]);d.alignment=a;return d},_makeMultiScriptBoxes:function(d,c,b,a){var e,f=1,g=[];g[b]=d[0];for(e=0;e<a;e+=1,f+=2)g[b+1+e]=this._makeOneMultiScriptBox(c,d[f],d[f+1],"l");for(e=0;e<b;e+=1,f+=2)g[e]=this._makeOneMultiScriptBox(c,d[f],d[f+1],"r");return c.parseBoxes("h{*}",g)},_fillSizesAndScripts:function(d,c,b,a,e){var f,g=1+2*b,h;for(f=0;f<c+b;f+=1)a.push(-1),a.push(1),f===c&&(g=1,e.push(0)),h=0,d[g]&&(h=2),d[g+1]&&(h+=1),e.push(h),g+=2},layout:function(d){var c=this.children,
b;b=this.numPostPairs;var a=Math.floor((c.length-1-2*b)/2),e=[0],f=[];this._fillSizesAndScripts(c,a,b,e,f);c=d.layoutChildren(c,{sizes:e});b=this._makeMultiScriptBoxes(c,d,a,b);b.setMultiScriptData(d,a,f);return b}})})},"MW/equations/renderer/model/MathRadical":function(){define(["dojo/_base/declare","./MathInnerNode","./SpacingClasses","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,f,g,e,d){return h(f,{constructor:function(c){this.className="MathRadical"},_exportMathML:function(c){var b=
this.children[1],a=(b=null===b||b.children&&0===b.children.length)?"msqrt":"mroot",d=e.startTag(c,a,this),d=d+this.children[0]._exportMathML(c);b||(d+=this.children[1]._exportMathML(c));return d+=e.endTag(a)},_exportLaTeX:function(c){var b=c.addBraces,a=this.children[1],e="\\sqrt";null===a||a.children&&0===a.children.length||(c.addBraces=d.NEVER_ADD_BRACES,e+="["+d.exportChild(this.children[1],c)+"]");c.addBraces=d.ALWAYS_ADD_BRACES;e+=d.exportChild(this.children[0],c);c.addBraces=b;return e},_layoutSqrt:function(c,
b){var a=c.parseBoxes("h{v{s}v{rw1}}",b),d=a.templateParts,e=c.barHeight(),f=b[0],h,n,p=d[h=1],r=d[h+=1],s=d[h+=1],t=h;d[h+=1].thickness=e;n=f.ascent()+2*e;r.setSymbolName("radical");r.alignment="r";r.resizeStretchBox(c,n,f.descent()-c.emToPx(c.renderer.fontDescent));h=d[h+1];h.length=e;c.computeTemplateMetrics(d,t);s.setAscent(f.ascent()+h.length+e);s.computeMetrics();p.computeMetrics();p.setAscent(s.ascent());a.computeMetrics();a.spacing=g.INNER;return a},_layoutNthRoot:function(c,b){var a,d=b[0],
e=c.emToPx(1);a=c.barHeight();var f=d.ascent()+a+a,h,n,p,r,s,t,u,v,w,x=0;t=0;h=c.parseBoxes("h{v{h{2w}wv{s}}v{rw1}}",b);n=h.templateParts;p=n[t+=1];w=n[t+=1];w.computeMetrics();v=n[t+=1];v.horizontal=!0;v.length=e/4;v.computeMetrics();v=n[t+=1];u=n[t+=1];u.alignment="r";r=n[t+=1];e=n[t+=1];x=t;s=n[t+=1];t=n[t+1];s.thickness=a;r.setSymbolName("radical");r.alignment="r";r.resizeStretchBox(c,f,d.descent());d=r.height()-a-a-d.height();t.length=a+d/2;c.computeTemplateMetrics(n,x);r.setAscent(e.height()-
d/2);u.computeMetrics();u.height();w.height();u.height();a*=-2;v.length=-a;v.computeMetrics();p.computeMetrics();p.setAscent(e.ascent()+w.height()-a);h.computeMetrics();h.spacing=g.INNER;return h},layout:function(c){var b=c.layoutChildren(this.children,{sizes:[0,1]}),a=b[1];return 0===a.ascent()&&0===a.descent()?this._layoutSqrt(c,b):this._layoutNthRoot(c,b)}})})},"MW/equations/renderer/model/MathRoot":function(){define(["dojo/_base/declare","./MathInnerNode","./utils/TeXUtils"],function(h,f,g){return h(f,
{constructor:function(e){e=e||{};this.className="MathRoot";this.inline=e.inline},_exportMathML:function(e){var d="";this.children.forEach(function(c){d+=c._exportMathML(e)});return d},_exportLaTeX:function(e){var d="";e.addBraces=g.NEVER_ADD_BRACES;this.children.forEach(function(c){d+=g.exportChild(c,e)});return d},isDisplaystyle:function(){var e=!1;if(!0===this.inline||!1===this.inline)e=!this.inline;if(!0===this._displaystyle||!1===this._displaystyle)e=this._displaystyle;return e},layout:function(e){var d;
this._displaystyle=!1;if(!0===this.inline||!1===this.inline)this._displaystyle=!this.inline;if(!0===e.displaystyle||!1===e.displaystyle)this._displaystyle=e.displaystyle;d=e.layoutChildren(this.children);return e.parseBoxes("h{*}",d)}})})},"MW/equations/renderer/model/MathScript":function(){define("dojo/_base/declare ./MathInnerNode ./Symbols ./utils/MathMLExportUtils ./utils/MathNodeUtils ./utils/TeXUtils".split(" "),function(h,f,g,e,d,c){return h(f,{constructor:function(b){b=b||{};this.className=
"MathScript";this.limitStyle=b.limitStyle||"auto";var a=b.accent;this.accent=!0===a||!1===a?a:"auto";a=b.accentunder;this.accentunder=!0===a||!1===a?a:"auto"},_exportMathML:function(b){var a="m",c=[],d=this.children[0],f=this.children[1],g=this.children[2];this.isStacked()?(a=a+(f?"under":"")+(g?"over":""),"auto"!==this.accent&&c.push("accent"),"auto"!==this.accentunder&&c.push("accentunder")):(a+=f?"sub":"",a+=g?"sup":"");c=e.startTag(b,a,this,c);c+=d._exportMathML(b);f&&(c+=f._exportMathML(b));
g&&(c+=g._exportMathML(b));return c+=e.endTag(a)},isStacked:function(){var b=this.children[0],a=this.children[1],c=this.children[2],b="auto"===this.limitStyle&&this.isDisplaystyle()&&this._movableLimits(b),b="stack"===this.limitStyle||b,a=c&&c.getAccent()||a&&a.getAccent();return b||a},_exportLaTeX:function(b){var a=b.addBraces,d=this.children[0],e=this.children[1];e&&(e.children&&0===e.children.length)&&(e=null);var f=e&&e.getAccent(),g=this.children[2];g&&(g.children&&0===g.children.length)&&(g=
null);var h=g&&g.getAccent(),p=this.isStacked();b.addBraces=c.ADD_BRACES_WHERE_NEEDED;var d=c.exportChild(d,b),r=d.match(/^{(\\[A-Za-z]+) }$/);r&&(d=r[1]);var s=c.exportChild(e,b),t=c.exportChild(g,b);p&&!r?(1===d.length&&(d="{"+d+"}"),e&&(1===s.length&&(s="{"+s+"}"),e={macron:"\\underline",underbrace:"\\underbrace"},d=f&&this.accentunder&&e.hasOwnProperty(f.symbolName)?e[f.symbolName]+d:"\\underset"+s+d,d=g?"{"+d+"}":d),g&&(1===t.length&&(t="{"+t+"}"),f={macron:"\\bar",overbrace:"\\overbrace",circumflex:"\\hat",
breve:"\\breve",grave:"\\grave",dotabove:"\\dot",caron:"\\check",acute:"\\acute",sim:"\\tilde",rightarrow:"\\vec",diaresis:"\\ddot"},h&&h.stretchy&&(f.circumflex="\\widehat",f.sim="\\widetilde",f.macron="\\overline",f.leftarrow="\\overleftarrow",f.rightarrow="\\overrightarrow",f.leftrightarrow="\\overleftrightarrow"),d=h&&this.accent&&f.hasOwnProperty(h.symbolName)?f[h.symbolName]+d:"\\overset"+t+d)):d=d+(s&&"{}"!==s?"_"+s:"")+(t&&"{}"!==t?"^"+t:"");b.addBraces=a;return d+" "},_makeNoLimitsScriptBoxes:function(b,
a){var c;c=d.isNonEmptyRow(this.children[1]);var e=d.isNonEmptyRow(this.children[2]);c=c&&e?a.parseBoxes("h{1v{3w2}}",b):a.parseBoxes("h{1v{23}}",b);c.templateParts[1].alignment="l";return c},_movableLimits:function(b){if(b.movableLimits)return!0;if((b=b.children)&&1===b.length)if(b=b[0],b.movableLimits||b.symbolName&&(b=g.getSymbol(b.symbolName))&&b.movableLimits)return!0;return!1},isItalicText:function(b){var a=this.children[0];return!0===this.accent&&a.isItalicText(b)},layout:function(b){var a=
this.children[0],c,e,f=null,g=!1,h,p=this.accentunder,r=this.accent;c=this.children[1];"auto"===p&&(p=c&&null!==c.getAccent());e=this.children[2];"auto"===r&&(r=e&&null!==e.getAccent());h=[0,p?0:-1,r?0:1];a&&1===a.children.length&&(f=a.children[0],g=f.isItalicText(b.mathvariant));var a=b.layoutChildren(this.children,{length:1,sizes:h}),f=a[0],s=0,t=0;f&&(s=f.subLeftShift+(g?f.rightItalicCorrection()/2:0),t=f.supRightShift);e&&(e.baseIsItalic=g,e.rightShift=r?0:t,e.accentType=r?"topaccent":"supscript");
c&&(c.baseIsItalic=g,c.leftShift=p?0:s,c.accentType=p?"bottomaccent":"subscript");a=b.layoutChildren(this.children,{startIdx:1,sizes:h,boxes:a});c=d.isNonEmptyRow(c);h=d.isNonEmptyRow(e);this.isStacked()?(g=c?h?b.parseBoxes("v{3w1w2}",a):b.parseBoxes("v{1w2}",a):b.parseBoxes("v{3w1}",a),g.setLimitsScriptData(b,a,c,p,h,r)):(g=this._makeNoLimitsScriptBoxes(a,b),g.setNoLimitsScriptData(b,a));1===a[0].children.length&&(g.spacing=a[0].children[0].spacing);g.setBelowXheight(f&&f.belowXheight()&&!e);return g}})})},
"MW/equations/renderer/model/MathSpace":function(){define(["dojo/_base/declare","./MathBaseNode","./utils/MathMLExportUtils"],function(h,f,g){return h(f,{constructor:function(e){e=e||{};this.className="MathSpace";this.length=e.length||0;this.width=this.length+"em"},_exportMathML:function(e){e=g.startTag(e,"mspace",this,["width"]);return e+=g.endTag("mspace")},_exportLaTeX:function(e){var d="",c=18*this.length;if(0>c)for(;-3>c;)d+="\\!",c+=3;else[[9,"~"],[5,"\\;"],[4,"\\:"],[3,"\\,"]].forEach(function(b){for(;c>=
b[0];)d+=b[1],c-=b[0]});return d},layout:function(e){var d=e.parseBoxes("w",[]);d.length=e.emToPx(this.length);d.horizontal=!0;return d}})})},"MW/equations/renderer/model/MathStyle":function(){define(["dojo/_base/declare","./MathInnerNode","./utils/MathMLExportUtils","./utils/TeXUtils"],function(h,f,g,e){return h(f,{constructor:function(d){d=d||{};this.className="MathStyle";this.scriptlevel=d.scriptlevel;this.displaystyle=d.displaystyle;d.mathsize&&"pt"===d.mathsize.slice(-2)&&(this.mathsize=d.mathsize)},
_exportMathML:function(d){var c=g.startTag(d,"mstyle",this,["scriptlevel","displaystyle","mathsize"]);this.children.forEach(function(b){c+=b._exportMathML(d)});return c+=g.endTag("mstyle")},_exportLaTeX:function(d){var c="{";this.children.forEach(function(b){c+=e.exportChild(b,d)});return c+="}"},isItalicText:function(d){var c;c=this.children&&1===this.children.length&&this.children[0];d=this.mathvariant||d;return(!d||this._mathvariantIsItalic(d))&&c&&c.isItalicText(d)},layout:function(d){var c=d.applyStyleAttributes(this),
b=d.layoutChildren(this.children),b=d.parseBoxes("h{*}",b);b.computeMetrics();d.applyStyleAttributes(c);return b}})})},"MW/equations/renderer/model/MathText":function(){define("dojo/_base/declare dojo/_base/lang ./MathBaseNode ./Symbols ./utils/MathMLExportUtils ./utils/TeXUtils ../Utilities".split(" "),function(h,f,g,e,d,c,b){return h(g,{constructor:function(a){a=a||{};this.className="MathText";this.text=a.text;this.kind=a.kind;!this.kind&&(a.hasOwnProperty("data-category")&&"placeholder-atom"===
a["data-category"])&&(this.kind="placeholder");this.symbolName=a.symbolName;var b=a.hasOwnProperty("stretchy")?a.stretchy:e.isStretchyOperatorByDefault(this.symbolName);"boolean"===typeof b&&(this.stretchy=b);this.TeXSpacing=a.TeXSpacing;this.accentType=a.accentType;this.renderAsAccent=!1;this._replaceSpecialSymbolsByMathvariant()},_replaceSpecialSymbolsByMathvariant:function(){if(this.symbolName){var a="";"scr"===this.symbolName.slice(1,4)?a="script":"opf"===this.symbolName.slice(1,4)?a="double-struck":
"fr"===this.symbolName.slice(1,3)&&(a="fraktur");a&&(this.text=this.symbolName[0],this.kind="id",this.symbolName=void 0,this.mathvariant=a)}},_exportMathML:function(a){var b="";!this.mathvariant&&"code"===this.kind&&(this.mathvariant="normal");switch(this.kind){case "unknown":case "id":case "code":b=d.startTag(a,"mi",this);b+=this.text+d.endTag("mi");break;case "number":b=d.startTag(a,"mn",this);b+=this.text+d.endTag("mn");break;case "mtext":b=d.startTag(a,"mtext",this);b+=this.text.replace(/\u00A0/g,
" ")+d.endTag("mtext");break;case "symbol":var c=e.isIdentifier(this.symbolName)?"mi":"mo",b=[];this.hasOwnProperty("stretchy")&&this.stretchy!==e.isStretchyOperatorByDefault(this.symbolName)&&b.push("stretchy");b=d.startTag(a,c,this,b);b+=d.maskSpecialCharacters(e.serializeSymbol(this.symbolName));b+=d.endTag(c);break;case "placeholder":a=f.mixin({},a),a.attribBlackList&&(c=a.attribBlackList.indexOf("data-category"))&&a.attribBlackList.splice(c,1),b=d.startTag(a,"mi",this),b+=this.text+d.endTag("mi")}return b},
getContents:function(){var a=["id","parent"],b,c={};for(b in this)-1===a.indexOf(b)&&this.hasOwnProperty(b)&&(c[b]=this[b]);return c},_exportLaTeX:function(a){a="";switch(this.kind){case "id":a+=this.text;var b=1===this.text.length,d=b,e=!1;if(this.mathvariant){if(-1!==this.mathvariant.indexOf("script"))return"\\mathcal{"+a+"}";if(-1!==this.mathvariant.indexOf("fraktur"))return"\\mathfrak{"+a+"}";if(-1!==this.mathvariant.indexOf("double-struck"))return"\\mathbb{"+a+"}";-1!==this.mathvariant.indexOf("bold")&&
(e=!0,d=b=!1);-1!==this.mathvariant.indexOf("italic")&&(b=!0);-1!==this.mathvariant.indexOf("normal")&&(b=e=!1)}e&&(a="\\mathbf{"+a+"}");b?d||(a="\\mathit{"+a+"}"):e||(a="\\mathrm{"+a+"}");break;case "unknown":case "number":a+=this.text;break;case "code":case "mtext":-1!==(","+c.allFunctionNames+",").indexOf(","+this.text+",")?a+="\\"+this.text+" ":(b=this.text.replace(/[\u00A0\u2009]/g," "),b=c.replaceUnicodeBySpecialLettersName(b),b=c.replaceUnicodeByCombiningCharsName(b),b=b.split(" ").map(function(a){return a?
"\\textrm{"+a+"}":""}),a+=b.join("\\;"));break;case "symbol":a+=c.commandName(this.symbolName," ")}return a},_layoutSimpleMathText:function(a,b){a.text=b.escapeText(this.text);a.fontSizePx=b.emToPx(1);a.setBelowXheight(this._ascentBelowXHeight());a.baseIsItalic=this.baseIsItalic;a.accentType=this.accentType;a.isItalic=!1;a.cls=this.kind;switch(this.kind){case "unknown":case "id":a.cls="text";a.isItalic=!0;break;case "symbol":a.setSymbolBoxData(this,b)}a.computeMetrics(b)},_subsCharsFromMathvariantFonts:function(a,
b){var c=a.text.split(""),c=c.map(function(a){a+=b;return e.getSymbol(a)?e.getCharForSymbolName(a):""});a.text=c.join("")},_setMathvariant:function(a,b){var c;this.mathvariant?c=this.mathvariant:b.mathvariant&&(c=b.mathvariant);c&&(c.match(/script/)&&this._subsCharsFromMathvariantFonts(a,"scr"),c.match(/fraktur/)&&this._subsCharsFromMathvariantFonts(a,"fr"),c.match(/double-struck/)&&this._subsCharsFromMathvariantFonts(a,"opf"),c.match(/bold/)?a.fontWeight="bold":a.fontWeight="normal",c.match(/italic/)?
(a.fontStyle="italic",a.isItalic=!0):(a.fontStyle="normal",a.isItalic=!1),"monospace"===c&&"symbol"!==this.kind&&(a.cls="string",a.isItalic=!1))},isItalicText:function(a){return"symbol"===this.kind||"id"===this.kind?(a=this.mathvariant||a||this.fontStyle,!a&&"id"===this.kind&&(a=b.isSingleCharIdentString(this.text)?"italic":""),this._mathvariantIsItalic(a)):!1},_ascentBelowXHeight:function(){return"symbol"===this.kind?e.hasXHeight(this.symbolName):b.stringAscentBelowXHeight(this.text)},isIdentifier:function(){return"id"===
this.kind||"symbol"===this.kind&&e.isIdentifier(this.symbolName)},getAccent:function(){return"topaccent"===this.accentType||"bottomaccent"===this.accentType||e.isAccent(this.symbolName)&&"supscript"!==this.accentType&&"subscript"!==this.accentType?this:null},layout:function(a){var b=null,c=this.symbolName;e.isLargeOpSymbol(this)?(b=a.parseBoxes("s",[]),b.makeLargeOp(c,a,this.isDisplaystyle())):this.renderAsAccent&&!0===this.stretchy&&e.isStretchyAccent(c)?(b=a.parseBoxes("a",[]),b.makeHorizontalStretchyBox(this,
a)):(b=a.parseBoxes("t",[]),this.TeXSpacing&&(b.spacing=this.TeXSpacing),this._layoutSimpleMathText(b,a));this._setMathvariant(b,a);return b}})})},"MW/equations/renderer/model/importers/SimpleTeX":function(){define("dojo/_base/declare dojo/_base/lang ./Base ./PEG ./SimpleTeXRules ../SpacingClasses".split(" "),function(h,f,g,e,d,c){return h(g,{constructor:function(){this._input=null;this._n=0;this._bold=this._italic=!1},initParser:function(){this._input=null;this._n=0;return null},_initState:function(){this._bold=
this._italic=!1},makePEG:function(){return new e(d.rulenames,d.rules,0)},makeSymbolMap:function(){return{}},makeActionMap:function(){var b=this.peg.names,a=[this._appendChildren],c,d={Char:[this._appendChar,"number"],SubSup:[this._appendSubSup],Nest:[this._appendNest],Size:[this._appendSize],Color:[this._appendColor],Style:[this._appendStyle],Name:[this._appendName],Symbol:[this._appendSymbol],EscapedChar:[this._appendChar,"number"]};for(c=0;c<b.length;c+=1)d[b[c]]||(d[b[c]]=a);return d},makeEquation:function(b){var a=
this.makeRoot();this._initState();b&&b.tree&&(this.str=b.str,this.fillRow(b.tree,a.children[0]));return a},consume:function(b){this._n+=b},_peek:function(b){return this._input?this._input[this._n+b]:null},_setInput:function(b,a){this._input=b;this._n=a},_appendChildren:function(b){var a=b.children,c;if(0===a.length&&b.start<b.end)this.pushCode(this.slice(b));else if(0<a.length){b=this._input;c=this._n;for(this._setInput(a,0);this._n<this._input.length;)this._appendChild();this._setInput(b,c)}this.consume(1)},
_appendChild:function(){var b=this._peek(0);this.append(b)},fillRow:function(b,a){this.pushRow(a);this.append(b);this.popRow()},_fillArg:function(b){var a=this._peek(0),c;a&&(c=this.peg.names[a.name],"Nest"===c?(this.pushRow(b),0<a.children.length?this._appendChildren(a):this.consume(1),this.popRow()):this.fillRow(a,b))},_isRegularScript:function(b){return"MathScript"===b.className&&!0!==b.accent},_appendSubSup:function(b){b=f.trim(this.slice(b));var a=null,c=!1,d,e;this.consume(1);e=this.row.children;
0<e.length&&this._isRegularScript(e[e.length-1])?a=e.pop():(a=this.makeScript(),c=!0,0<e.length&&(d=e.pop(),"MathRow"===d.className?a.replaceChild(0,d):a.children[0].appendChild(d)));this.row.setChildren(e);"^"===b?(c?a.replaceChild(1,null):a.replaceChild(2,this.makeRow()),this._fillArg(a.children[2])):(c?a.replaceChild(2,null):a.replaceChild(1,this.makeRow()),this._fillArg(a.children[1]));this.push(a)},_pushTextWithStyle:function(b,a){this.pushText(b,a,{kind:a})},_appendChar:function(b,a){var c=
this.slice(b);" "===c?this.push(this.makeSpace({length:0.5})):this._pushTextWithStyle(c,a);this.consume(1)},_appendSymbol:function(b){b=f.trim(this.slice(b));var a={"int":"intop",copyright:"\u00a9","0":"emptyset",circ:"\u00b0",clubsuit:"\u2663",diamondsuit:"\u2666",heartsuit:"\u2665",spadesuit:"\u2660",langle:"anglebracketleft",rangle:"anglebracketright",lceil:"ceilleft",rceil:"ceilright",lfloor:"floorleft",rfloor:"floorright",vee:"lor",wedge:"land"}[b];a&&(b=a);this.pushSymbol(b);this.consume(1)},
_appendStyle:function(b){var a={rm:"normal",it:"italic",sl:"italic",bf:"bold"}[f.trim(this.slice(b))];b=this._italic;"italic"===a&&(this._italic=!0);var c=this._bold;"bold"===a&&(this._bold=!0);this._handleStyle(f.hitch(this,function(b){a&&(this._italic&&"bold"===a&&(a="bold-italic"),this._bold&&"italic"===a&&(a="bold-italic"),b.mathvariant=a)}));this._italic=b;this._bold=c},_appendNest:function(b){var a=this.makeRow({TeXSpacing:c.ORD});this.row.appendChild(a);this.pushRow(a);0<b.children.length?
this._appendChildren(b):this.consume(1);this.popRow()},_splitAndReturnRow:function(){var b=this.row.children;for(this.row.setChildren([]);this._n<this._input.length;)this._appendChild();return b},_handleStyle:function(b){var a={},c,d;this.consume(1);c=this._splitAndReturnRow();d=this.row.children;this.row.setChildren(c);b(a);b=this.makeStyle(a);b.children[0].setChildren(d);this.push(b)},_appendSize:function(b){this._handleStyle(f.hitch(this,function(a){var c=f.trim(this.slice(b.children[0])),c=parseInt(c)||
0;a.mathsize=c+"pt"}))},_numToHex:function(b){255<b&&(b=255);0>b&&(b=0);b=b.toString(16);2>b.length&&(b="0"+b);return b},_namedColorToHTMLColor:function(b){return{red:"#F00",green:"#0F0",blue:"#00F",black:"#000",white:"#FFF",cyan:"#0FF",magenta:"#F0F",yellow:"#FF0",gray:"#808080",orange:"#FF8000",lightBlue:"#60BCFC",darkGreen:"#6B963D"}[b]},_rgbColorToHTMLColor:function(b,a,c){b=Math.round(255*parseFloat(b));a=Math.round(255*parseFloat(a));c=Math.round(255*parseFloat(c));return"#"+this._numToHex(b)+
this._numToHex(a)+this._numToHex(c)},_appendColor:function(b){this._handleStyle(f.hitch(this,function(a){var c=b.children[0],d,e;3===c.children.length?(d=f.trim(this.slice(c.children[0])),e=f.trim(this.slice(c.children[1])),c=f.trim(this.slice(c.children[2])),d=this._rgbColorToHTMLColor(d,e,c)):(d=f.trim(this.slice(c)),d=this._namedColorToHTMLColor(d));d&&(a.style="color: "+d)}))},_appendName:function(b){this._handleStyle(f.hitch(this,function(a){var c=f.trim(this.slice(b.children[0]));a.style="font-family: "+
c}))}})})},"MW/equations/renderer/model/importers/PEG":function(){define(["dojo/_base/declare","../../../utils/StringUtils"],function(h,f){return h(null,{constructor:function(f,e,d){this.rules=e;this.names=f;this.root=d},_myStrcmp:function(g,e,d,c,b){var a="";if(d+b>e)return!1;g=g.substring(d,d+b);for(e=0;e<b;e+=1)a+=f.fromCodePoint(c[e]);return g===a},recordRule:function(f,e,d,c,b,a,k){var h=k.length;f[d-1]=0===e&&1===h?k:[{name:c,start:b,end:a,children:k}]},joinRecords:function(f,e){var d=f.length,
c;c=f.pop();1<d&&(0<c.length&&e)&&(f[d-2]=f[d-2].concat(c))},pretty:function(g,e,d,c){var b,a,k,h;c=c||"long";b=d=d||"";if(g&&g.children)if(a=g.children,k=f.fromCodePoint(10),b+="short"===c?"(":""+this.names[g.name],"long"===c&&(h=e.substring(g.start,g.end).replace(k,"").replace(/^[ ]*/,""),10<h.length&&(h=h.substring(0,10)+"..."),b+=" "+h+k),0===a.length&&"short"===c)b+=" "+g.start.toString()+" "+g.end.toString()+")";else{for(g=0;g<a.length;g+=1)b="long"===c?b+this.pretty(a[g],e,d+" ",c):b+(" "+
this.pretty(a[g],e,d,c));b+="short"===c?")":""}return b},parse:function(g){var e=this.rules,d=this.root,c=g.length,b=0,a=0,k,h=[],m=[],q=[],n=[],p=!0,r=[],s,t=0,u,v,w,x;m.push(0,0,d);n.push(r);d=e[d];for(k=d.length;0<m.length;){t+=1;if(1E6<t)return null;s=m.length;if(a>=k)3<s&&(a=m[s-4],d=e[a],k=d.length,a=m[s-2],s=h.pop(),p||(b=s),this.joinRecords(n,p)),m.pop(),m.pop(),m.pop();else switch(s=d[a],s){case 0:h.push(b);n.push(r);a+=1;break;case 1:s=h.pop();p||(b=s);this.joinRecords(n,p);a+=1;break;case 2:s=
d[a+1]-1;a+=2;d=e[s];k=d.length;h.push(b);n.push(r);m.push(b,a,s);a=0;break;case 3:u=d[a+1];(p=this._myStrcmp(g,c,b,d.slice(a+2),u))&&(b+=u);a+=u+2;break;case 4:s=h.pop();p||(b=s);this.joinRecords(n,p);p=!0;a+=1;break;case 5:p&&0<h[h.length-2]?(a+=d[a+1],h[h.length-1]=b):p?(a+=d[a+1],h[h.length-1]=b,h[h.length-2]=1,this.joinRecords(n,p),n.push(r)):(a+=2,b=h[h.length-1],p=0<h[h.length-2],h.pop(),h.pop(),this.joinRecords(n,p));break;case 6:this.joinRecords(n,p);p?(a+=d[a+1],h[h.length-1]=b,n.push(r)):
(a+=2,b=h.pop(),p=!0);break;case 7:case 8:7===s&&(p=!p);b=h.pop();this.joinRecords(n,!1);a+=1;break;case 9:h.push(0);a+=1;break;case 10:this.joinRecords(n,p);p?(a+=2,n.push(r)):(b=h.pop(),a+=d[a+1]);break;case 11:this.joinRecords(n,p);p?(h.pop(),a+=d[a+1]):(a+=2,n.push(r));break;case 12:case 15:b>=c?p=!1:(p=f.fromCodePoint(d[a+1]),p=g[b]===p);p&&(b+=1);a+=2;break;case 13:p&&(s=d[a+1],u=m[m.length-1],v=0,0<h.length&&(v=h[h.length-1]),w=n.length,x=n[w-1],this.recordRule(n,s,w,u,v,b,x));a+=2;break;case 14:p=
!0;a+=1;break;case 16:case 17:u=d[a+1];v=a+2;a+=2+2*u;if(b>=c)p=!1;else{w=g.charCodeAt(b);for(p=!1;u&&!p;)u-=1,p=d[v],v+=1,x=d[v],v+=1,p=w>=p&&w<=x;17===s&&(p=!p)}p&&(b+=1);break;case 18:p?(q.push(g),c=h[h.length-1],g=g.substring(c),c=b-c,b=0,a+=2):(a+=3+d[a+1],b=h.pop(),this.joinRecords(n,p));break;case 19:s=h.pop();b!==c||!p?(b=s+c,p=!0):(b=s,p=!1);g=q.pop();c=g.length;this.joinRecords(n,!1);a+=1;break;case 21:(p=b<c)&&(b+=1);a+=1;break;case 26:p=b===c,a+=1}}return p&&0<n.length&&0<n[0].length?
{tree:n[0][0],str:g}:{tree:null,str:g}}})})},"MW/equations/renderer/model/importers/SimpleTeXRules":function(){define([],function(){return{rulenames:"Math Char SubSup Nest Cmd EscapedChar Style Name s String Size Number Newline Color ExplicitColor Float NamedColor Symbol".split(" "),rules:[[0,0,2,5,11,13,2,3,11,9,2,4,11,5,2,2,1,6,-16,13,2],[17,1,125,125,13,0],[16,2,95,95,94,94,13,0],[0,3,1,123,10,10,2,1,10,6,3,1,125,1,13,2],[0,3,1,92,10,31,0,2,14,11,25,2,6,11,21,2,7,11,17,2,8,11,13,2,11,11,9,2,18,
11,5,2,13,1,1,13,0],[16,5,123,123,125,125,95,95,94,94,92,92,13,0],[0,3,2,114,109,11,19,3,2,98,102,11,13,3,2,105,116,11,7,3,2,115,108,1,13,0],[0,3,9,102,111,110,116,110,97,109,101,123,10,14,2,9,10,10,2,10,10,6,3,1,125,1,13,2],[0,16,4,32,32,9,9,13,13,10,10,6,-10],[9,0,17,1,125,125,5,-4,13,0],[0,3,9,102,111,110,116,115,105,122,101,123,10,18,2,9,10,14,2,12,10,10,2,9,10,6,3,1,125,1,13,2],[9,0,16,1,48,57,5,-4,13,0],[3,7,110,101,119,108,105,110,101,13,0],[0,3,5,99,111,108,111,114,10,48,0,0,3,1,123,10,10,
2,17,10,6,3,1,125,1,11,30,0,3,6,91,114,103,98,93,123,10,18,2,9,10,14,2,15,10,10,2,9,10,6,3,1,125,1,1,1,13,2],[0,2,16,10,39,2,9,10,35,0,3,1,44,4,10,28,2,9,10,24,2,16,10,20,2,9,10,16,0,3,1,44,4,10,9,2,9,10,5,2,16,1,13,0],[0,0,2,12,10,16,0,0,3,1,46,10,7,0,2,12,4,1,4,1,11,12,0,3,1,46,10,5,2,12,1,1,13,2],[0,3,3,114,101,100,11,109,3,5,103,114,101,101,110,11,100,3,4,98,108,117,101,11,92,3,5,98,108,97,99,107,11,83,3,5,119,104,105,116,101,11,74,3,4,99,121,97,110,11,66,3,7,109,97,103,101,110,116,97,11,55,3,
6,121,101,108,108,111,119,11,45,3,4,103,114,97,121,11,37,3,6,111,114,97,110,103,101,11,27,3,9,108,105,103,104,116,66,108,117,101,11,14,3,9,100,97,114,107,71,114,101,101,110,1,13,0],[0,3,5,97,108,112,104,97,11,949,3,4,98,101,116,97,11,941,3,5,103,97,109,109,97,11,932,3,5,100,101,108,116,97,11,923,3,7,101,112,115,105,108,111,110,11,912,3,4,122,101,116,97,11,904,3,3,101,116,97,11,897,3,5,116,104,101,116,97,11,888,3,8,118,97,114,116,104,101,116,97,11,876,3,4,105,111,116,97,11,868,3,5,107,97,112,112,97,
11,859,3,6,108,97,109,98,100,97,11,849,3,2,109,117,11,843,3,2,110,117,11,837,3,2,120,105,11,831,3,2,112,105,11,825,3,3,114,104,111,11,818,3,5,115,105,103,109,97,11,809,3,8,118,97,114,115,105,103,109,97,11,797,3,3,116,97,117,11,790,3,7,117,112,115,105,108,111,110,11,779,3,3,112,104,105,11,772,3,3,99,104,105,11,765,3,3,112,115,105,11,758,3,5,111,109,101,103,97,11,749,3,5,71,97,109,109,97,11,740,3,5,68,101,108,116,97,11,731,3,5,84,104,101,116,97,11,722,3,6,76,97,109,98,100,97,11,712,3,2,88,105,11,706,
3,2,80,105,11,700,3,5,83,105,103,109,97,11,691,3,7,85,112,115,105,108,111,110,11,680,3,3,80,104,105,11,673,3,3,80,115,105,11,666,3,5,79,109,101,103,97,11,657,3,6,102,111,114,97,108,108,11,647,3,6,101,120,105,115,116,115,11,637,3,2,110,105,11,631,3,3,97,115,116,11,624,3,4,99,111,110,103,11,616,3,3,115,105,109,11,609,3,3,108,101,113,11,602,3,5,105,110,102,116,121,11,593,3,8,99,108,117,98,115,117,105,116,11,581,3,11,100,105,97,109,111,110,100,115,117,105,116,11,566,3,9,104,101,97,114,116,115,117,105,
116,11,553,3,9,115,112,97,100,101,115,117,105,116,11,540,3,14,108,101,102,116,114,105,103,104,116,97,114,114,111,119,11,522,3,9,108,101,102,116,97,114,114,111,119,11,509,3,7,117,112,97,114,114,111,119,11,498,3,10,114,105,103,104,116,97,114,114,111,119,11,484,3,9,100,111,119,110,97,114,114,111,119,11,471,3,4,99,105,114,99,11,463,3,2,112,109,11,457,3,3,103,101,113,11,450,3,6,112,114,111,112,116,111,11,440,3,7,112,97,114,116,105,97,108,11,429,3,6,98,117,108,108,101,116,11,419,3,3,100,105,118,11,412,
3,3,110,101,113,11,405,3,5,101,113,117,105,118,11,396,3,6,97,112,112,114,111,120,11,386,3,5,97,108,101,112,104,11,377,3,2,73,109,11,371,3,2,82,101,11,365,3,2,119,112,11,359,3,6,111,116,105,109,101,115,11,349,3,5,111,112,108,117,115,11,340,3,6,111,115,108,97,115,104,11,330,3,3,99,97,112,11,323,3,3,99,117,112,11,316,3,8,115,117,112,115,101,116,101,113,11,304,3,6,115,117,112,115,101,116,11,294,3,8,115,117,98,115,101,116,101,113,11,282,3,6,115,117,98,115,101,116,11,272,3,3,105,110,116,11,265,3,2,105,
110,11,259,3,1,111,11,254,3,5,108,100,111,116,115,11,245,3,9,99,111,112,121,114,105,103,104,116,11,232,3,1,48,11,227,3,5,118,97,114,112,105,11,218,3,5,116,105,109,101,115,11,209,3,4,99,100,111,116,11,201,3,3,118,101,101,11,194,3,5,119,101,100,103,101,11,185,3,4,112,101,114,112,11,177,3,3,109,105,100,11,170,3,9,76,101,102,116,97,114,114,111,119,11,157,3,10,82,105,103,104,116,97,114,114,111,119,11,143,3,14,76,101,102,116,114,105,103,104,116,97,114,114,111,119,11,125,3,7,85,112,97,114,114,111,119,11,
114,3,9,68,111,119,110,97,114,114,111,119,11,101,3,5,112,114,105,109,101,11,92,3,5,110,97,98,108,97,11,83,3,4,115,117,114,100,11,75,3,5,97,110,103,108,101,11,66,3,3,110,101,103,11,59,3,5,108,99,101,105,108,11,50,3,5,114,99,101,105,108,11,41,3,6,108,102,108,111,111,114,11,31,3,6,114,102,108,111,111,114,11,21,3,6,108,97,110,103,108,101,11,11,3,6,114,97,110,103,108,101,1,13,0]]}})},"MW/equations/renderer/model/importers/TeX":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/renderer/model/MathConstants ./Base ./PEG ./TeXRules ./TeXSymbols ../SpacingClasses ../Symbols ../utils/MathNodeUtils ../utils/TeXUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h(e,{constructor:function(){this._commandMap=this._makeCmdMap();this._lineBreaks=[];this._hlineAtBottom=this._hlineOnTop=this._hline=!1},initParser:function(){this._input=null;this._n=0;return null},makeSymbolMap:function(){return m.symbolMap},makePEG:function(){return new d(c.rulenames,c.rules,0)},makeActionMap:function(){var a=this.peg.names,b=[this._appendChildren],c,d={Letter:[this._appendFatString,"id"],Dashes:[this._appendDashes],TAccent:[this._appendTextAccent],
TSpecialLetter:[this._appendTextSpecialLetter],Digit:[this._appendFatString,"number"],BinOp:[this.appendSymbol],RelOp:[this.appendSymbol],Cmd:[this._appendCmd],Cmd2:[this._appendCmd],SubSupOp:[this._appendSubSup],OpenCloseChars:[this.appendSymbol],Punct:[this._appendPunct],OrdChars:[this._appendOrdChars],Unicode:[this._appendOrdChars],DelimiterNest:[this._appendDelimNest],MathNest:[this._appendNest],Array:[this._appendArray],Matrix:[this._appendMatrix],Cases:[this._appendCasesEnvironment],LineBreak:[this._appendLineBreak],
SpecialCmd:[this._appendSpecialCmd],KernCmd:[this._appendKernCmd],BoxCmd:[this._appendBoxCmd],Inline:[this._appendInlineCmd],Content:[this._appendContentCmd],Blanks:[this._appendBlanks],Tilde:[this._appendBlanks],MathSpace:[this._appendMathSpace]};for(c=0;c<a.length;c+=1)d[a[c]]||(d[a[c]]=b);return d},_makeCmdMap:function(){var b=[this._appendOverCmd],c=[this._appendBraceCmd],d=[this._appendFunCmd],e=[this._appendFunCmd,"limits"],f=[this._appendSymbolCmd],g=[this._appendStyleCmd],k=[this._appendSpacingClassCmd],
h={frac:[this._appendFracCmd],sqrt:[this._appendSqrtCmd],not:[this._appendNotCmd],over:b,atop:b,overwithdelims:b,atopwithdelims:b,brace:c,brack:c,choose:c,hat:[this._appendAccentCmd,"circumflex"],bar:[this._appendAccentCmd,"macron"],grave:[this._appendAccentCmd,"grave"],acute:[this._appendAccentCmd,"acute"],tilde:[this._appendAccentCmd,"sim"],breve:[this._appendAccentCmd,"breve"],dot:[this._appendAccentCmd,"dotabove"],ddot:[this._appendAccentCmd,"diaresis"],check:[this._appendAccentCmd,"caron"],vec:[this._appendAccentCmd,
"rightarrow"],big:[this._appendBigCmd,"1.2",a.ORD],Big:[this._appendBigCmd,"1.8",a.ORD],bigg:[this._appendBigCmd,"2.4",a.ORD],Bigg:[this._appendBigCmd,"3.0",a.ORD],bigl:[this._appendBigCmd,"1.2",a.OPEN],Bigl:[this._appendBigCmd,"1.8",a.OPEN],biggl:[this._appendBigCmd,"2.4",a.OPEN],Biggl:[this._appendBigCmd,"3.0",a.OPEN],bigm:[this._appendBigCmd,"1.2",a.REL],Bigm:[this._appendBigCmd,"1.8",a.REL],biggm:[this._appendBigCmd,"2.4",a.REL],Biggm:[this._appendBigCmd,"3.0",a.REL],bigr:[this._appendBigCmd,
"1.2",a.CLOSE],Bigr:[this._appendBigCmd,"1.8",a.CLOSE],biggr:[this._appendBigCmd,"2.4",a.CLOSE],Biggr:[this._appendBigCmd,"3.0",a.CLOSE],bigcup:f,bigcap:f,bigsqcup:f,biguplus:f,bigwedge:f,bigvee:f,bigodot:f,bigoplus:f,bigotimes:f,cdotp:f,prod:f,sum:f,intop:f,prime:f,perp:f,mid:f,triangle:f,backslash:f,bmod:[this._appendBModCmd],pmod:[this._appendPModCmd],enspace:[this._appendQuadCmd,0.5],quad:[this._appendQuadCmd,1],qquad:[this._appendQuadCmd,2],thinspace:[this._appendQuadCmd,0.16667],negthinspace:[this._appendQuadCmd,
-0.16667],mathrm:[this._appendVariantCmd,"normal"],mathit:[this._appendVariantCmd,"italic"],mathbf:[this._appendVariantCmd,"bold"],mathtt:[this._appendVariantCmd,"monospace"],mathbb:[this._appendFatStringCmd,"blackboard"],mathcal:[this._appendFatStringCmd,"script"],mathfrak:[this._appendFatStringCmd,"fraktur"],limits:[this._setLimitsMode,"limits"],nolimits:[this._setLimitsMode,"nolimits"],overbrace:[this._appendUnderOverBraceCmd,"overbrace",!0,!1],underbrace:[this._appendUnderOverBraceCmd,"underbrace",
!0,!0],overline:[this._appendUnderOverBraceCmd,"macron",!0,!1],underline:[this._appendUnderOverBraceCmd,"macron",!0,!0],overleftarrow:[this._appendUnderOverBraceCmd,"leftarrow",!0,!1],overrightarrow:[this._appendUnderOverBraceCmd,"rightarrow",!0,!1],overleftrightarrow:[this._appendUnderOverBraceCmd,"leftrightarrow",!0,!1],widehat:[this._appendUnderOverBraceCmd,"circumflex",!0,!1],widetilde:[this._appendAccentCmd,"widetilde"],mathord:k,mathop:k,mathbin:k,mathrel:k,mathopen:k,mathclose:k,mathpunct:k,
mathinner:k,scriptscriptstyle:g,scriptstyle:g,textstyle:g,displaystyle:g,hline:[this._hlineCmd],rm:[this._appendFontCmd,"normal"],it:[this._appendFontCmd,"italic"],bf:[this._appendFontCmd,"bold"],tt:[this._appendFontCmd,"monospace"],cal:[this._appendFontCmd,"script"],stackrel:[this._appendStackrelCmd,!0],overset:[this._appendStackrelCmd,!0],underset:[this._appendStackrelCmd,!1]};m.functionNames.forEach(function(a){h[a]=d});m.limitsFunctionNames.forEach(function(a){h[a]=e});return h},makeEquation:function(a){var b=
this.makeRoot();this._lineBreaks=[];a&&a.tree&&(this.str=a.str,this.fillRow(a.tree,b.children[0]),this._assembleLineBreaks(b),a=this.name(a.tree),b.inline="Math"!==a);return l.sanitizeModel(b)},consume:function(a){this._n+=a},_peek:function(a){return this._input?this._input[this._n+a]:null},unknownAction:function(a){this.pushMtext("\\"+a,{style:"color: rgb(255,0,0);"});this.consume(1)},_setInput:function(a,b){this._input=a;this._n=b},_fixSpaces:function(a){return a.replace(/ +/g,"\u00a0")},_appendChildren:function(a){var b=
a.children,c;if(0===b.length&&a.start<a.end)this.pushMtext(this._fixSpaces(this.slice(a)));else if(0<b.length){a=this._input;c=this._n;for(this._setInput(b,0);this._n<this._input.length;)this._appendChild();this._setInput(a,c)}this.consume(1)},_appendChild:function(){var a=this._peek(0);this.append(a)},_appendCmd:function(a){var b=f.trim(this.slice(a)),b=b.slice(1);this._appendSlashSymbol(b)?this.consume(1):(a=this._commandMap[b],this.fireAction(a,b))},_fillOptionalArg:function(a){var b,c=!0,d=this._peek(0);
if(d&&(b=f.trim(this.slice(d)),"["===b)){this.pushRow(a);for(this.consume(1);c;){d=this._peek(0);if(!d)break;b=f.trim(this.slice(d));"]"===b?(this.consume(1),c=!1):this.append(d)}this.popRow()}},_fillArg:function(a){var b=this._peek(0),c;b&&(c=this.peg.names[b.name],"MathNest"===c?(this.pushRow(a),0<b.children.length?this._appendChildren(b):this.consume(1),this.popRow()):this.fillRow(b,a))},_appendFracCmd:function(){var a=this.makeFraction();this.push(a);this.consume(1);this._fillArg(a.children[0]);
this._fillArg(a.children[1])},_appendStackrelCmd:function(a,b){var c=this.makeScript({limitStyle:"stack"});this.push(c);this.consume(1);b?(c.replaceChild(1,null),this._fillArg(c.children[2])):(this._fillArg(c.children[1]),c.replaceChild(2,null));this._fillArg(c.children[0])},_appendSymbolCmd:function(a){this.pushSymbol(a);this.consume(1)},_appendBModCmd:function(){this.pushText("mod","text",{TeXSpacing:a.BIN});this.consume(1)},_appendPModCmd:function(){var a=this.makeRow();this.pushRow(a);this.push(this.makeSpace({length:1}));
this.pushDelim("parenleft");this.pushText("mod","text");this.consume(1);this.push(this.makeSpace({length:1/3}));this.append(this._peek(0));this.pushDelim("parenright");this.popRow();this.push(a)},_appendBraceCmd:function(a){var b=this.makeFraction({linethickness:"0"});this.consume(1);this.splitRow(b);"brace"===a?this._appendDelimNestImpl("braceleft","braceright",b):"brack"===a?this._appendDelimNestImpl("bracketleft","bracketright",b):"choose"===a&&this._appendDelimNestImpl("parenleft","parenright",
b)},splitRow:function(a){var b=this._splitAndReturnRow(),c=this.row.children;this.row.children=[];a.children[0].setChildren(b);a.children[1].setChildren(c)},_splitAndReturnRow:function(){var a=this.row.children;for(this.row.setChildren([]);this._n<this._input.length;)this._appendChild();return a},_appendOverCmd:function(a){var b=8<a.length,c={},d=null,e=null;"atop"===a.substring(0,4)&&(c.linethickness="0");a=this.makeFraction(c);this.consume(1);b&&(d=this.getDelim(),e=this.getDelim());this.splitRow(a);
b?this._appendDelimNestImpl(d,e,a):this.push(a)},getDelim:function(){var a=this._peek(0),b;this.consume(1);a=f.trim(this.slice(a));if(0===a.length||"."===a)return".";0<a.length&&"\\"===a.charAt(0)&&(a="\\|"===a?"Vert":a.slice(1));(b=k.unicodeMap[a])||(b=this.mapSymbolName(a));b||(b=a);return b},_appendBigCmd:function(a,b,c){this.consume(1);a=this.getDelim();a=this.pushDelim(a);a.minsize=b;a.maxsize=b;a.TeXSpacing=c},_appendFunCmd:function(b,c){this.pushMtext(b,{TeXSpacing:a.OP});c?this._setLimitsMode("",
c):this.consume(1)},_appendSqrtCmd:function(){var a=this.makeRadical();this.push(a);this.consume(1);this._fillOptionalArg(a.children[1]);this._fillArg(a.children[0])},_appendNotCmd:function(){var a;this.consume(1);if(a=this._peek(0))a=f.trim(this.slice(a)),(a=k.lookupNotSymbol(a))?(a=this.makeSymbol(a),this.push(a),this.consume(1)):(a=this.makeSymbol("combiningSlash"),this.push(a))},_appendAccentCmd:function(a,b){var c=this.makeScript({accent:!0,limitStyle:"stack"}),d;this.consume(1);this._fillArg(c.children[0]);
d=this.makeSymbol(b,{stretchy:!1});c.children[2].appendChild(d);this.push(c)},_appendStretchyAccentCmd:function(a,b,c,d,e){e=e||{};e.accent=!0;e.limitStyle="stack";a=this.makeScript(e);this.consume(1);this._fillArg(a.children[0]);b=c?this.makeDelim({symbolName:b}):this.makeSymbol(b);b.stretchy=!0;d?a.children[1].appendChild(b):a.children[2].appendChild(b);this.push(a)},_appendUnderOverBraceCmd:function(a,b,c,d){this._appendStretchyAccentCmd(a,b,c,d,{limitStyle:"stack"})},_setLimits:function(a,b){var c=
"auto";"nolimits"===b?c="nostack":"limits"===b&&(c="stack");a.limitStyle=c},_isRegularScript:function(a){return"MathScript"===a.className&&!0!==a.accent},_errorSubSup:function(){var a;a=this.makeStyle({style:"color: rgb(255,0,0);"});this._fillArg(a.children[0]);this.push(a)},_prepareScript:function(){var b,c,d,e;b=this.row.children;if(0<b.length&&this._isRegularScript(b[b.length-1]))c=b.pop();else if(c=this.makeScript(),c.replaceChild(1,null),c.replaceChild(2,null),0<b.length){d=b.pop();if(d.TeXSpacing===
a.CLOSE){var f=[d];for(e=1;b.length&&e;)d=b.pop(),d.TeXSpacing===a.CLOSE&&(e+=1),d.TeXSpacing===a.OPEN&&(e-=1),f.push(d);d=this.makeRow({children:f.reverse()})}"MathRow"===d.className?c.replaceChild(0,d):c.children[0].appendChild(d)}return c},_prepareScriptSlots:function(a,b){var c=!1;null===a.children[b]&&(null===a.children[b]&&a.replaceChild(b,this.makeRow()),c=!0);return c},_appendSubSup:function(a){var b=f.trim(this.slice(a));a=null;this.consume(1);b="^"===b||"\\sp"===b?2:1;a=this._prepareScript();
this.push(a);this._prepareScriptSlots(a,b)?this._fillArg(a.children[b]):this._errorSubSup()},fillRow:function(a,b){this.pushRow(b);this.append(a);this.popRow()},_appendNest:function(b){var c={};"Math"!==this.peg.names[b.name]&&(c={TeXSpacing:a.ORD});c=this.makeRow(c);this.row.appendChild(c);this.pushRow(c);0<b.children.length?this._appendChildren(b):this.consume(1);this.popRow()},makeDelimOrNull:function(a){var b=null;"."!==a&&("\\"===a.charAt(0)&&(a=a.slice(1)),b=this.makeDelim({symbolName:f.trim(a)}));
return b},_appendDelimNestImpl:function(a,b,c){var d=this.makeRow();a=this.makeDelimOrNull(a);b=this.makeDelimOrNull(b);a&&d.appendChild(a);c&&(c.className?d.appendChild(c):this.fillRow(c,d));b&&d.appendChild(b);this.push(d)},_appendDelimNest:function(a){var b=a.children;a=this._input;var c=this._n,d,e;this._setInput(b,0);d=this.getDelim();e=null;2<b.length&&(e=this._peek(0),this.consume(1));b=this.getDelim();this._appendDelimNestImpl(d,b,e);this._setInput(a,c);this.consume(1)},_appendQuadCmd:function(a,
b){var c=this.makeSpace({length:b});this.push(c);this.consume(1)},_appendBlanks:function(){var a=this.makeSpace({length:0.5});this.push(a);this.consume(1)},_appendFontCmd:function(a,b){var c={},d,e;this.consume(1);d=this._splitAndReturnRow();e=this.row.children;this.row.setChildren(d);c.mathvariant=b;c=this.makeStyle(c);c.children[0].setChildren(e);this.push(c)},_appendStyleCmd:function(a){var b={},c,d;this.consume(1);c=this._splitAndReturnRow();d=this.row.children;this.row.setChildren(c);"displaystyle"===
a?(b.scriptlevel=0,b.displaystyle=!0):(b.displaystyle=!1,"textstyle"===a?b.scriptlevel=0:"scriptstyle"===a?b.scriptlevel=1:"scriptscriptstyle"===a&&(b.scriptlevel=2));a=this.makeStyle(b);a.children[0].setChildren(d);this.push(a)},_setLimitsMode:function(a,b){var c=this.row.children,d;0<c.length&&this._isRegularScript(c[c.length-1])?(d=c[c.length-1],this._setLimits(d,b)):(d=this.makeScript(),d.replaceChild(1,null),d.replaceChild(2,null),0<c.length&&(c=c.pop(),d.children[0].appendChild(c)),this._setLimits(d,
b),this.push(d));this.consume(1)},_appendVariantCmd:function(a,b){var c={};c.mathvariant=b;c=this.makeStyle(c);this.push(c);this.consume(1);this._fillArg(c.children[0])},_appendSlashSymbol:function(a){var c=k.symbolMap[a],d=null;b[a]&&(c&&c.unicode?d=this.pushText(a,c.font):(c=this.mapSymbolName(a),c!==a&&(d=this.pushSymbol(c))));return d},_appendFatString:function(a,b){var c=f.trim(this.slice(a)),d;for(d=0;d<c.length;d+=1)this._pushTextWithStyle(c.charAt(d),b);this.consume(1)},_pushTextWithStyle:function(a,
b){var c={kind:b};"bold"===b&&(b="text",c.mathvariant="bold");this.pushText(a,b,c)},_appendFatStringCmd:function(a,b){this.consume(1);var c=this.makeRow();this._fillArg(c);var d=this;c.children=c.children.map(function(a){return d._replaceTextWithFontGlyph(a,b)});this.push(c)},_replaceTextWithFontGlyph:function(a,b){return!a||"MathText"!==a.className||!a.text.match(/^[A-Za-z]$/)?a:"script"===b?this.makeText({text:a.text,kind:"id",mathvariant:"script"}):"blackboard"===b?this.makeText({text:a.text,kind:"id",
mathvariant:"double-struck"}):this.makeText({text:a.text,kind:"id",mathvariant:"fraktur"})},_appendSpacingClassCmd:function(b){var c;this.consume(1);c=this.makeRow();this._fillArg(c);1===c.children.length&&"MathText"===c.children[0].className&&(c=c.removeChild(0));c.TeXSpacing=a[{mathord:"ORD",mathop:"OP",mathbin:"BIN",mathrel:"REL",mathopen:"OPEN",mathclose:"CLOSE",mathpunct:"PUNCT",mathinner:"INNER"}[b]];this.push(c)},_appendOrdChars:function(b){b=f.trim(this.slice(b));var c={".":"ordPeriod"}[b];
c||(c=k.unicodeMap[b]||b);this.pushSymbol(c,{TeXSpacing:a.ORD});this.consume(1)},_appendPunct:function(b){var c=null;for(b=f.trim(this.slice(b));"'"===b;)null===c&&(c=this.makeRow()),b=this.makeSymbol("prime"),c.appendChild(b),this.consume(1),b=(b=this._peek(0))?f.trim(this.slice(b)):"";null!=c?(b=this._prepareScript(),this._prepareScriptSlots(b,2),b.replaceChild(2,c),this.push(b)):(this.pushSymbol(b,{TeXSpacing:a.PUNCT}),this.consume(1))},_appendMathSpace:function(a){var b={",":1/6,"\x3e":2/9,":":2/
9,";":5/18,"!":-1/6," ":0.5};a=this.slice(a);b=this.makeSpace({length:b[a]});this.push(b);this.consume(1)},_getDimenUnits:function(a){var b="",c={pt:1,pc:12,mu:10/18,ex:5,em:10,"in":72,cm:72/2.54,mm:72/25.4};2<a.length&&(b=a.slice(-2));(a=c[b])||(a=0);return a/10},_parseKernAmount:function(a){var b;b=0;var c=!1;1<a.children.length&&(b=a.children[1],b=f.trim(this.slice(b)),"-"===b&&(c=!0,2<a.children.length&&(b=a.children[2],b=f.trim(this.slice(b)))),b="\\nulldelimiterspace"===b?0.12:parseFloat(b,
10)*this._getDimenUnits(b),c&&(b=-b));return b},_appendKernCmd:function(a){a=this._parseKernAmount(a);a=this.makeSpace({length:a});this.push(a);this.consume(1)},_appendSpecialCmd:function(b){b=f.trim(this.slice(b));b=this.mapSymbolName(b.slice(1));this.pushSymbol(b,{TeXSpacing:a.ORD});this.consume(1)},_appendContentCmd:function(a){a.children.forEach(function(a){this._appendNest(a)},this);a=this.makeMatrix({rows:this.row.children.length,cols:1,children:this.row.children,colspec:"l"});this.row.setChildren([a])},
_appendInlineCmd:function(a){var b={};1===this.rows.length?this._appendChildren(a):(b.mathvariant="",b=this.makeStyle(b),this.push(b),this.fillRow(a.children[0],b.children[0]))},_appendBoxCmd:function(a){var b,c={},d=!0;b=f.trim(this.slice(a.children[0]));"textit"===b?c.mathvariant="italic":"textbf"===b?c.mathvariant="bold":"texttt"===b?c.mathvariant="monospace":"textsf"===b?c.style="font-family: sans-serif":"textnormal"===b?c.mathvariant="normal":d=!1;d?(b=this.makeStyle(c),c=b.children[0]):c=b=
this.makeRow();this.push(b);this.fillRow(a.children[1],c)},_appendDashes:function(a){a=f.trim(this.slice(a));"---"===a?a="\u2014":"--"===a&&(a="\u2013");this.pushMtext(a);this.consume(1)},_appendTextSpecialLetter:function(a){a=f.trim(this.slice(a));this.pushMtext(m.specialLetters[a]);this.consume(1)},_appendTextAccent:function(a){var b,c;b=f.trim(this.slice(a));if(c=m.combiningChars[b.charAt(1)])0<a.children.length?b=this.slice(a.children[0]):2<b.length&&(b=b.substring(2)),this.pushMtext(f.trim(b)+
c);this.consume(1)},_appendLineBreak:function(){var a=this.makeRow();a.setChildren(this.row.children);this._lineBreaks.push(a);this.row.setChildren([]);this.consume(1)},_assembleLineBreaks:function(a){var b,c;0<this._lineBreaks.length&&(this._lineBreaks.push(a.children[0]),b={rows:this._lineBreaks.length,cols:1,children:this._lineBreaks,colspec:"l"},b=this.makeMatrix(b),c=this.makeRow(),c.appendChild(b),a.replaceChild(0,c))},_convertColSpecToMathML:function(a){var b="",c,d,e,g;for(c=0;c<a.length;c+=
1)if(d=a[c],e=this.slice(d),e=e.charAt(0),"l"===e||"r"===e||"c"===e||"|"===e)b+=e;else if("*"===e){e=f.trim(this.slice(d.children[0]));e=parseInt(e,10);d=this._convertColSpecToMathML(d.children[1].children);for(g=0;g<e;g+=1)b+=d}return b},_isRowSep:function(a){a=this.name(a);return"CrCr"===a||"ArrayRowSep"===a},_parseTableContent:function(a){var b=[],c=[],d=a.length,e=!1,f,g;0<d&&this._isRowSep(a[d-1])&&(d-=1);for(f=0;f<d;f+=1){e=null;g=a[f];"MathBody"===this.name(g)?(e=g,f+=1):"TextContent"===this.name(g)&&
(e=g,f+=1);c.push(e);e=!1;if(f===d)break;this._isRowSep(a[f])?(b.push(c),c=[]):e=!0}e&&c.push(null);0<c.length&&b.push(c);return b},_hlineCmd:function(){this._hline=!0;this.consume(1)},_processHLineInTable:function(a,b){var c;if(this._hline&&0===b)return this._hlineOnTop=!0,null;if(this._hline||null!==a){if(null===a){a=[];for(c=0;c<b;++c)a.push(g.NO_LINE)}this._hline?a.push(g.SOLID_LINE):a.push(g.NO_LINE);this._hline=!1}return a},_appendTable:function(a,b){var c=this._parseTableContent(a),d=c.length,
e,f=0,k,h,l,m,B=null,A=this._hline;this._hline=!1;var D=this._hlineOnTop;this._hlineOnTop=!1;var F=this._hlineAtBottom;this._hlineAtBottom=!1;for(e=0;e<d;e+=1)f=Math.max(f,c[e].length);e={rows:d,cols:f};d=!1;b&&(k=this._convertColSpecToMathML(b.children),"|"===k[0]&&"|"===k[k.length-1]&&(d=!0),e.colspec=k.replace(/\|/g,""));k=this.makeMatrix(e);for(e=0;e<c.length;e+=1){m=c[e];for(l=0;l<f;l+=1)h=this.makeRow(),k.appendChild(h),l<m.length&&m[l]&&(this.fillRow(m[l],h),this.consume(-1));B=this._processHLineInTable(B,
e)}this.push(k);null!==B&&(B[B.length-1]===g.SOLID_LINE&&(B=B.slice(0,-1),this._hlineAtBottom=!0,k.rows-=1),k.setHLines(B));d&&(this._hlineOnTop&&this._hlineAtBottom)&&k.setFrame(g.SOLID_LINE);this._hline=A;this._hlineOnTop=D;this._hlineAtBottom=F},_appendArray:function(a){this._appendTable(a.children[1].children,a.children[0]);this.consume(1)},_appendCasesContent:function(a){var b=this.makeRow();this.pushRow(b);this.pushDelim("braceleft");this._appendTable(a);this.popRow();this.push(b)},_appendMatrix:function(a){var b=
a.children[0].children[0].children;a=this.peg.names[a.children[0].name];"RegMatrix"===a?this._appendTable(b):"CasesMatrix"===a?this._appendCasesContent(b):"PMatrix"===a&&(a=this.makeRow(),this.pushRow(a),this.pushDelim("parenleft"),this._appendTable(b),this.pushDelim("parenright"),this.popRow(),this.push(a));this.consume(1)},_appendCasesEnvironment:function(a){this._appendCasesContent(a.children[0].children);this.consume(1)}})})},"MW/equations/renderer/model/importers/TeXRules":function(){define([],
function(){return{rulenames:"Content Math Inline TextContent EOT MathSpace MathBody SubSupOp MathNest s sc Blanks SpecialCmd Cmd BadCmd Letters Letter Array ArrayPosition ArrayCols ArrayCol ArraySimpleCol ArrayComplexCol ArrayContent ArrayItem ArrayRowSep ArrayColSep Matrix RegMatrix PMatrix CasesMatrix MatrixContent MatrixItem CrCr CasesContent Cases Other OrdChars OpenCloseChars RelOp BinOp Punct Tilde Unicode Digit Number PlusMinus Dimen DimenUnits BoxCmd Box KernCmd Kern KernAmount BadCmd2 Cmd2 MathBody3 DelimiterNest Delim DelimSlashChar DelimCmd MissingClose MissingRight Text TextChars Dashes TEscape TSpecialCmd TSpecialLetter TAccent TCmd BeginDisplayMath EndDisplayMath BeginMath EndMath MathBody2 LineBreak".split(" "),
rules:[[0,0,2,11,10,9,9,0,2,2,5,-2,1,11,21,0,2,11,10,5,2,3,1,11,11,0,2,11,10,5,2,4,1,1,13,0],[0,0,3,2,36,36,10,36,2,11,10,32,0,2,76,4,10,26,0,0,3,1,36,10,9,0,16,1,36,36,4,1,11,5,2,62,1,10,5,2,11,1,11,27,0,2,72,10,21,0,2,76,4,10,15,0,2,73,11,5,2,62,1,10,5,2,11,1,1,13,2],[0,0,3,1,36,10,26,2,11,10,22,0,2,76,4,10,16,0,3,1,36,11,5,2,62,1,10,5,2,11,1,11,27,0,2,74,10,21,0,2,76,4,10,15,0,2,75,11,5,2,62,1,10,5,2,11,1,1,13,2],[9,0,0,2,64,11,9,2,3,11,5,2,12,1,5,-12,13,2],[0,16,2,97,122,65,90,7],[16,6,44,44,
33,33,59,59,58,58,62,62,32,32,13,0],[0,9,0,0,2,11,10,35,0,2,8,11,29,2,9,11,25,2,18,11,21,2,28,11,17,2,36,11,13,2,13,11,9,2,14,11,5,2,37,1,1,5,-38,10,5,2,11,1,13,2],[0,16,2,95,95,94,94,11,21,0,3,2,92,115,10,13,16,2,112,112,98,98,10,5,2,5,1,1,13,0],[0,3,1,123,10,22,2,11,10,18,0,2,7,4,10,12,0,3,1,125,11,5,2,62,1,1,13,2],[0,16,4,32,32,9,9,13,13,10,10,6,-10],[0,2,10,10,26,0,0,3,1,37,10,16,0,17,2,13,13,10,10,6,-6,10,5,2,10,1,6,-20,1],[9,0,16,4,32,32,9,9,13,13,10,10,5,-10,13,0],[0,3,1,92,10,41,0,2,6,11,
35,16,9,123,123,125,125,124,124,37,37,95,95,94,94,38,38,36,36,35,35,11,13,2,58,11,9,2,50,11,5,2,52,1,1,13,0],[0,3,1,92,10,15,0,2,16,18,2,2,15,19,10,5,2,11,1,13,0],[0,3,3,101,110,100,11,15,3,4,99,114,99,114,11,7,3,2,99,114,1,13,0],[9,0,16,2,97,122,65,90,5,-6,13,2],[16,2,97,122,65,90,13,0],[0,3,13,92,98,101,103,105,110,123,97,114,114,97,121,125,10,60,2,10,10,56,0,2,19,4,10,50,2,10,10,46,3,1,123,10,41,2,10,10,37,2,20,10,33,3,1,125,10,28,2,11,10,24,2,24,10,20,3,11,92,101,110,100,123,97,114,114,97,121,
125,10,5,2,10,1,13,2],[0,3,1,91,10,14,16,2,116,116,98,98,10,6,3,1,93,1,13,0],[9,0,2,21,5,-2,13,0],[0,0,2,22,10,5,2,10,1,11,11,0,2,23,10,5,2,10,1,1,13,2],[16,4,108,108,114,114,99,99,124,124,13,0],[0,0,3,1,64,10,5,2,9,1,11,69,0,3,2,112,123,10,14,2,10,10,10,2,48,10,6,3,1,125,1,11,48,0,3,2,42,123,10,40,2,10,10,36,2,46,10,32,3,1,125,10,27,2,10,10,23,0,0,3,1,123,10,10,2,20,10,6,3,1,125,1,11,5,2,20,1,1,1,13,0],[0,0,0,3,5,92,101,110,100,123,7,10,9,2,25,10,5,2,11,1,6,-19,13,2],[0,2,7,11,9,2,27,11,5,2,26,1,
13,0],[0,3,2,92,92,10,19,0,0,3,1,91,10,10,2,48,10,6,3,1,93,1,4,1,13,2],[3,1,38,13,0],[0,2,29,11,9,2,30,11,5,2,31,1,13,2],[0,3,7,92,109,97,116,114,105,120,10,23,2,11,10,19,3,1,123,10,14,2,32,10,10,3,1,125,10,5,2,10,1,13,2],[0,3,8,92,112,109,97,116,114,105,120,10,23,2,11,10,19,3,1,123,10,14,2,32,10,10,3,1,125,10,5,2,10,1,13,2],[0,3,6,92,99,97,115,101,115,10,23,2,11,10,19,3,1,123,10,14,2,35,10,10,3,1,125,10,5,2,10,1,13,2],[0,0,0,3,1,125,7,10,9,2,33,10,5,2,11,1,6,-15,13,2],[0,2,7,11,9,2,27,11,5,2,34,
1,13,0],[0,3,3,92,99,114,10,9,0,3,2,99,114,4,1,13,0],[0,0,0,3,1,125,7,10,33,2,33,10,29,2,11,10,25,2,27,10,21,2,11,10,17,0,2,4,4,10,11,2,11,10,7,0,2,34,4,1,6,-39,13,2],[0,3,13,92,98,101,103,105,110,123,99,97,115,101,115,125,10,28,2,11,10,24,2,24,10,20,3,11,92,101,110,100,123,99,97,115,101,115,125,10,5,2,10,1,13,2],[0,2,45,11,33,2,38,11,29,2,41,11,25,2,40,11,21,2,42,11,17,2,17,11,13,2,39,11,9,2,43,11,5,2,44,1],[16,8,33,33,63,63,46,46,124,124,47,47,96,96,64,64,34,34,13,0],[16,4,40,40,41,41,91,91,93,
93,13,0],[16,4,61,61,60,60,62,62,58,58,13,0],[16,3,43,43,45,45,42,42,13,0],[16,3,59,59,44,44,39,39,13,0],[16,1,126,126,13,0],[17,1,32,127,13,0],[16,1,48,57,13,0],[0,0,0,2,47,4,10,25,9,0,2,45,5,-2,10,17,0,0,3,1,46,10,8,0,2,45,6,-2,1,4,1,11,22,0,0,2,47,4,10,14,3,1,46,10,9,9,0,2,45,5,-2,1,1,13,0],[16,2,43,43,45,45,13,0],[0,2,46,10,13,2,10,10,9,2,49,10,5,2,10,1,13,0],[0,3,2,112,116,11,43,3,2,109,109,11,37,3,2,99,109,11,31,3,2,101,109,11,25,3,2,101,120,11,19,3,2,105,110,11,13,3,2,112,99,11,7,3,2,109,117,
1,13,0],[0,2,51,10,27,2,11,10,23,3,1,123,10,18,0,2,4,4,10,12,0,3,1,125,11,5,2,63,1,1,13,2],[0,3,4,109,98,111,120,11,81,3,4,104,98,111,120,11,73,3,6,116,101,120,116,98,102,11,63,3,6,116,101,120,116,105,116,11,53,3,6,116,101,120,116,114,109,11,43,3,6,116,101,120,116,116,116,11,33,3,6,116,101,120,116,115,102,11,23,3,10,116,101,120,116,110,111,114,109,97,108,11,9,3,4,116,101,120,116,1,13,0],[0,2,53,10,41,2,11,10,37,0,3,1,123,4,10,30,2,11,10,26,0,2,47,4,10,20,2,11,10,16,2,54,10,12,2,11,10,8,0,3,1,125,
4,1,13,2],[0,3,4,107,101,114,110,11,10,3,5,109,107,101,114,110,1,13,0],[0,2,48,11,24,3,19,92,110,117,108,108,100,101,108,105,109,105,116,101,114,115,112,97,99,101,1,13,0],[0,2,15,11,10,3,5,114,105,103,104,116,1,13,0],[0,3,1,92,10,15,0,2,16,18,2,2,55,19,10,5,2,11,1,13,0],[0,9,0,0,2,11,10,35,0,2,8,11,29,2,9,11,25,2,18,11,21,2,28,11,17,2,36,11,13,2,13,11,9,2,56,11,5,2,37,1,1,5,-38,10,5,2,11,1,13,2],[0,3,4,108,101,102,116,10,45,2,11,10,41,2,59,10,37,2,11,10,33,0,2,57,4,10,27,0,0,3,6,92,114,105,103,104,
116,10,9,2,11,10,5,2,59,1,11,5,2,63,1,1,13,2],[0,16,7,40,40,41,41,91,91,93,93,47,47,124,124,46,46,11,9,2,60,11,5,2,61,1,13,0],[0,3,1,92,10,15,16,3,123,123,125,125,124,124,10,5,2,11,1,13,0],[0,3,1,92,10,9,2,16,10,5,2,11,1,13,0],[14,13,2],[14,13,2],[9,0,0,2,65,11,50,0,3,1,92,10,5,2,67,1,11,39,2,68,11,35,2,70,11,31,2,71,11,27,0,3,1,123,10,16,2,64,10,12,0,3,1,125,11,5,2,62,1,1,11,5,2,66,1,5,-53,13,2],[9,0,17,5,92,92,123,123,125,125,36,36,45,45,5,-12,13,0],[0,3,3,45,45,45,11,12,3,2,45,45,11,6,3,1,45,1,
13,0],[16,10,123,123,125,125,124,124,37,37,95,95,38,38,64,64,92,92,36,36,35,35,13,0],[0,3,1,92,10,15,0,2,6,11,5,2,69,1,10,5,2,11,1,13,0],[0,3,2,111,101,11,49,3,2,97,101,11,43,3,2,97,97,11,37,3,2,115,115,11,31,3,2,79,69,11,25,3,2,65,69,11,19,3,2,65,65,11,13,16,4,111,111,79,79,108,108,76,76,1,13,0],[0,3,1,92,10,73,0,16,7,39,39,96,96,94,94,34,34,126,126,61,61,46,46,11,23,0,16,6,117,117,118,118,72,72,99,99,100,100,98,98,10,5,2,5,1,1,10,31,2,11,10,27,0,16,2,97,122,65,90,11,17,0,3,1,123,10,10,2,64,10,6,
3,1,125,1,1,1,13,2],[0,3,1,92,10,19,0,2,16,18,2,2,15,19,10,9,2,5,10,5,2,11,1,13,0],[3,2,92,91],[3,2,92,93],[3,2,92,40],[3,2,92,41],[0,9,0,0,2,11,10,39,0,2,8,11,33,2,9,11,29,2,18,11,25,2,28,11,21,2,36,11,17,2,13,11,13,2,14,11,9,2,37,11,5,2,77,1,1,5,-42,10,5,2,11,1,13,2],[3,2,92,92,13,0]]}})},"MW/equations/renderer/view/EquationView":function(){define("dojo/_base/declare dojo/_base/lang ./viewmodel/CSSViewModelRenderer ./viewmodel/HBox ./viewmodel/MathTextBox ./viewmodel/RuleBox ./viewmodel/StretchyBox ./viewmodel/HorizontalStretchyBox ./viewmodel/VBox ./viewmodel/WhiteSpaceBox ../Utilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h([],{constructor:function(a){this.scriptlevel=0;this.scriptScalingFactor=a.scriptScalingFactor;this.minimalFontSize=a.minimalFontSize;this.displaystyle=a.displaystyle;this.mathsize=this.mathvariant=null;this.renderer=new g(a);this._pxPerEm=this._basePxPerEm=this.renderer.getBasePxPerEm()},layoutAndRender:function(a){a=this.layoutNode(a);return this.renderer.render(a)},_setPxPerEm:function(){var a=Math.pow(this.scriptScalingFactor,this.scriptlevel);this._pxPerEm=
Math.max(this._basePxPerEm*a,this.minimalFontSize)},_setBasePxPerEmFromSize:function(){var a=this.renderer.convertFontSizeToPx(this.mathsize);this._basePxPerEm=Math.max(a,this.minimalFontSize);this._setPxPerEm()},emToPx:function(a){return Math.floor(this._pxPerEm*a)},mathAxis:function(){return Math.floor(this._pxPerEm*this.renderer.mathAxis)},barHeight:function(){return Math.max(Math.round(this._pxPerEm*this.renderer.barHeight),1)},computeWidth:function(a){return this.renderer.computeWidth(a,this.emToPx(1))},
escapeText:function(a){return a.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")},layoutNode:function(a){var b,c;if(!a)return null;b=a.className;c=a.layout(this);c.name=b+" "+(c.name?c.name:"");m.copyCommonAttributes(a,c);return c},computeStyle:function(a,b){0!==b&&(this.scriptlevel=a+1)},_mergeMathvariant:function(a,b){if("normal"===b)return b;var c=-1!==a.indexOf("italic"),d=-1!==a.indexOf("bold"),e=-1!==b.indexOf("italic"),f=-1!==b.indexOf("bold"),g="",k="";if(c||e)k="italic";
if(d||f)g="bold";c=g;k&&(c+=(c?"-":"")+k);return c||"normal"},applyStyleAttributes:function(a){var b={},c;["mathvariant","scriptlevel","mathsize"].forEach(f.hitch(this,function(d){void 0!==a[d]&&(b[d]=this[d],c=a[d],"mathvariant"===d&&(c&&b[d])&&(c=this._mergeMathvariant(this[d],c)),this[d]=c)}));return b},parseBoxes:function(f,g){var h=[],m=[],s,t,u;for(s=0;s<f.length;s+=1)if(t=f.charAt(s),"}"===t)m.pop();else{u=m.length;switch(t){case "v":t=new k;h.push(t);m.push(t);s+=1;break;case "h":t=new e;
h.push(t);m.push(t);s+=1;break;case "a":t=new a;h.push(t);break;case "w":t=new l;m[m.length-1]instanceof e&&(t.horizontal=!0);h.push(t);break;case "s":t=new b;h.push(t);break;case "r":t=new c;m[m.length-1]instanceof e&&(t.horizontal=!1);h.push(t);break;case "t":t=new d;h.push(t);break;case "*":m[u-1].children=g;continue;default:t=t.charCodeAt(0)-49,t=g[t]}0<u&&m[u-1].addChild(t)}h[0].templateParts=h;return h[0]},computeTemplateMetrics:function(a,b){var c;b=b||0;for(c=a.length-1;c>=b;c-=1)a[c].computeMetrics()},
layoutChildren:function(a,b){var c,d,e,f,g=this.scriptlevel,k=this._pxPerEm,h=this._basePxPerEm;b=b||{};c=b.startIdx||0;d=(b.length?b.length+c:a.length)-1;e=b.boxes||[];this.mathsize&&(this._setBasePxPerEmFromSize(),this.mathsize=null);for(;c<=d;c+=1){b.sizes&&(this.computeStyle(g,b.sizes[c]),this._setPxPerEm());f=a[c];if(f=this.layoutNode(f))f.fontSizePx=this.emToPx(1);e.push(f);this.scriptlevel=g;this._pxPerEm=k}this._basePxPerEm=h;return e}})})},"MW/equations/renderer/view/viewmodel/CSSViewModelRenderer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has ./HBox ./MathTextBox ./StretchyBox ./WhiteSpaceBox ../../Utilities ../../../utils/StringUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){return f(null,{constructor:function(a){var c={id:"MathEquationRendererScratch","class":"MathEquation",style:{position:"absolute",right:"-1000px",bottom:"-1000px",whiteSpace:"pre-wrap"}};this._scratch=e.byId("MathEquationRendererScratch");this._scratch||(this._scratch=b.create("span",c,document.body));this._mathroot=b.create("span",{"class":"MathEquation"},a.domNode);this.creatorFlavor=a.creatorFlavor;this.scriptScalingFactor=a.scriptScalingFactor;this.minimalFontSize=
a.minimalFontSize;this._pxPerEm=a.pxPerEm?a.pxPerEm:this.computePxToEms();this._pxPerEm<this.minimalFontSize&&(this._pxPerEm=this.minimalFontSize);this._pxPerEm=Math.ceil(this._pxPerEm);this._setStyle(this._mathroot,{fontSize:this._pxPerEm+"px"});this._setStyle(this._scratch,{fontSize:this._pxPerEm+"px"});this.fontAscent=0.75;this.fontXHeight=0.55;this.fontDescent=0.25;this._italicCorrection=0.1;this.mathAxis=0.38;this.barHeight=0.07},computeWidth:function(a,b){var c;this._setStyle(this._scratch,
{fontSize:b});this.render(a,this._scratch);c=this._scratch.clientWidth;this._scratch.innerHTML="";return c},getBasePxPerEm:function(){return this._pxPerEm},computePxToEms:function(b){b||(b=this._mathroot);b=a.getComputedStyle(b);b=parseFloat(b.fontSize);0===b&&(b=1);return b},convertFontSizeToPx:function(a){this._setStyle(this._scratch,{fontSize:a});a=this.computePxToEms(this._scratch);this._setStyle(this._scratch,{fontSize:this._pxPerEm+"px"});return a},toGrid:function(a){return isNaN(a)?"0px":Math.ceil(a)+
"px"},SPACE_NORMAL:[0,1,2,3,0,0,0,1,1,1,0,3,0,0,0,1,2,2,0,0,2,0,0,2,3,3,0,0,3,0,0,3,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,1,1,1,0,1,1,1,1,1,1,1,2,3,1,0,1,1],SPACE_SCRIPT:[0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],adjustSpacingClasses:function(a,b){var c=a?a.spacing:-1,d=b.spacing;if(2===d&&0!==c&&5!==c&&7!==c&&8!==c)b.spacing=0;else if(2===c&&(3===d||5===d||6===d))a.spacing=0},_setStyle:function(a,b){Object.keys(b).forEach(function(c){a.style[c]=
b[c]})},_resolveNest:function(a,b,c){for(var d;b&&8===a;)a=b.spacing,d=b.children,b=null,d&&d instanceof l&&(b=d[c?0:d.length-1]);return a},_gapForItalicCorrection:function(a,b){var c=0,d=a&&a instanceof m;b instanceof m&&(d&&!0===b.isItalic&&!0===a.isItalic?a.italicCorrectionRight=0:c+=b.leftItalicCorrection(),b.italicCorrectionRight=b.rightItalicCorrection());return c},_gapForCode:function(a,b,c){var d=0;if("MathType"!==this.creatorFlavor)return d;if(a&&(a.needsGapBehind()&&!b.startsWithDelimiter()||
b.needsGapBefore()&&!a.endsWithDelimiter()))d=Math.max(d,4*c);return d},computeGap:function(a,b,c){var d=c?this.SPACE_SCRIPT:this.SPACE_NORMAL;c=0;var e=1/18,f,g;this.adjustSpacingClasses(a,b);if(a)if(f=this._resolveNest(a.spacing,a,!1),g=this._resolveNest(b.spacing,b,!0),d=d[8*f+g],0<d)c=(2+d)*e;else if((1===b.spacing||2===b.spacing||1===a.spacing||2===a.spacing)&&b.cls!==a.cls)c=e;c=Math.max(c,this._gapForCode(a,b,e));c+=this._gapForItalicCorrection(a,b);return b.skip=c},render:function(a,c){var d;
c=c||this._mathroot;if(a){d=a.render(this);b.place(d,c);d=a.cssAscent()+a.cssDescent()+0.2*this.getBasePxPerEm();var e=-a.cssDescent()-0.1*this.getBasePxPerEm()/2;c["data-eqn-height"]=d;c["data-eqn-vertical-align"]=e}return c},makeGlyphTextbox:function(a,b){var c=a.font,d=a.glyph||a.unicode,e=new m;e.initalizeSymbolBoxData(a,b,!0);e.size=a.size||1;e.fontSizePx=b.emToPx(1);e.text=r.fromCodePoint(d);this.computeGlyphTextboxMetrics(e,c,b);return e},_glyphShift:function(a){var b=0,b=k("ff")?-0.05:0.16;
return a.emToPx(b)},computeGlyphTextboxMetrics:function(a,b,c){a.computeMetrics(c);"extra"===b.slice(0,5)&&"extra1"!==b&&(a.setMetrics({ascent:0,descent:c.emToPx(a.size)}),"extra"===b&&(a.glyphShift=this._glyphShift(c)))},_setTooltip:function(a,b){delete a.title;c.add(a,"hasTooltip");a["data-eqn-tooltip"]=b},makeDomNode:function(a){var e=b.create("span");e.MWEQ=a;a.name&&c.add(e,a.name);a.id&&(e.id=a.id);a.tooltip&&this._setTooltip(e,a.tooltip);a.style&&d.set(e,"style",a.style);a["class"]&&c.add(e,
a["class"]);return e},_setMathTextBoxFontAttributes:function(a,b){p.isSingleCharIdentString(a.text||"")||(b.fontStyle="normal");a.fontStyle&&(b.fontStyle=a.fontStyle);a.fontWeight&&(b.fontWeight=a.fontWeight)},_renderMathTextBoxSetStyle:function(a,b){var c=(b.skip||0)+b.xShift,d={position:"relative"};c&&b.applyItalicCorrection&&(d.marginLeft=c+"em");b.italicCorrectionRight&&b.applyItalicCorrection&&(d.marginRight=b.italicCorrectionRight+"em");this._setMathTextBoxFontAttributes(b,d);if(b.accentBox()&&
(d.height=this.toGrid(b.accentHeight()),"topaccent"===b.accentType&&(d.display="block"),c=b.downShift()))d.marginTop=this.toGrid(c),d.marginBottom=this.toGrid(-c);this._setStyle(a,d)},renderMathTextBox:function(a){var b=this.makeDomNode(a);this._renderMathTextBoxSetStyle(b,a);d.set(b,{innerHTML:a.text});c.add(b,a.cls);a.accentBox()&&c.add(b,a.accentType);return b},renderRuleBox:function(a){var b=this.makeDomNode(a),c,e=a.ascent();0<e&&1>e&&(e=1);d.set(b,{"class":"rulebox"});a.horizontal&&(c={display:"block",
borderBottomStyle:"solid",borderBottomWidth:this.toGrid(e),width:"100%",height:"0px",zIndex:1});this._setStyle(b,c);return b},_renderHorizontalStretchyBoxApplyStyle:function(a,b){var c=b.skip||0,d={display:"block",position:"relative"};0!==c&&(d.marginLeft=c+"em");d.height=this.toGrid(b.accentHeight());this._setMathTextBoxFontAttributes(b,d);this._setStyle(a,d)},_renderSingleGlyphHorizontalStretchyBoxChild:function(a,c){var d=c.children[0],e=c.downShift(),d=d.render(this),e={left:this.toGrid(0),top:this.toGrid(e)};
b.place(d,a);this._setStyle(d,e)},_renderSingleGlyphHorizontalStretchyBox:function(a,b){var c={};this._renderSingleGlyphHorizontalStretchyBoxChild(a,b);b.width()&&(c.width=this.toGrid(b.width()));b.left()&&(c.left=this.toGrid(b.left()));this._setStyle(a,c);return a},_renderMultipleGlyphHorizontalStretchyBox:function(a,c){var d=c.downShift()||0;c.traverse(g.hitch(this,function(c){var e;c&&(e=c.render(this),b.place(e,a),c=c.left(),c={top:this.toGrid(d),position:"absolute",left:this.toGrid(c)},this._setStyle(e,
c))}));if(!c.accentType){var e={display:"inline-block",position:"relative",left:"-"+c.width()/2+"px"};this._setStyle(a,e)}return a},renderHorizontalStretchyBox:function(a){var b=this.makeDomNode(a);this._renderHorizontalStretchyBoxApplyStyle(b,a);1===a.children.length?this._renderSingleGlyphHorizontalStretchyBox(b,a):this._renderMultipleGlyphHorizontalStretchyBox(b,a);a.setMetrics({cssAscent:a.ascent(),cssDescent:a.descent()});return b},_renderStretchyBoxApplyStyle:function(a,b){var c=b.skip||0,d=
{display:"inline-block",position:"relative"};c&&(d.marginLeft=c+"em");this._setStyle(a,d)},_applyChromeFix:function(a,b){return 1.4===a.size&&k("webkit")?1.024*b:b},_renderSingleGlyphStretchyBoxChild:function(a,c){var d=c.children[0],e=d.fontSizePx,f=d.render(this),g={display:"inline-block",position:"relative"},h=Math.floor(c.ascent()),l=0,m=Math.round(d.height()),n=0;k("mac")&&k("ff")&&(n=Math.floor(-e*this.barHeight));b.place(f,a);switch(d.cls){case "extra":g.verticalAlign=this.toGrid(h);m=this._applyChromeFix(d,
m);g.lineHeight=this.toGrid(m);0<d.size-1-this.mathAxis?(l=Math.floor(e*((d.size-1-this.mathAxis)/2)),g.marginTop=this.toGrid(-l),g.marginBottom=this.toGrid(l)):k("chrome")&&delete g.display;break;case "extra1":n&&(g.verticalAlign=this.toGrid(n));break;case "symbol":break;default:l=Math.ceil(e*this.mathAxis),g.verticalAlign=this.toGrid(h+n),g.lineHeight=this.toGrid(m),g.marginTop=this.toGrid(-l),g.marginBottom=this.toGrid(l)}this._setStyle(f,g)},_renderSingleGlyphStretchyBox:function(a,b){var c={display:"inline-block",
position:"relative"};this._renderSingleGlyphStretchyBoxChild(a,b);b.width()&&(c.width=this.toGrid(b.width()));b.left()&&(c.left=this.toGrid(b.left()));this._setStyle(a,c);return a},_renderMultipleGlyphStretchyBox:function(a,c){var d=c.children,e=0<d.length?d[d.length-1]:null,f=0;this._setStretchyBoxSpecialWidthHeight(a,c);c.traverse(g.hitch(this,function(c){var d;c&&(d=c.render(this),b.place(d,a),this._setStyle(d,{position:"absolute",display:"block",top:this.toGrid(f+c.glyphShift)}),f+=c.ascent(),
c!==e&&(f+=c.descent()))}));this._setStyle(a,{verticalAlign:this.toGrid(-c.descent())});return a},renderStretchyBox:function(a){var b=this.makeDomNode(a);this._renderStretchyBoxApplyStyle(b,a);this._setBoxTextAlign(b,a);1===a.children.length?this._renderSingleGlyphStretchyBox(b,a):this._renderMultipleGlyphStretchyBox(b,a);a.setMetrics({cssAscent:a.ascent(),cssDescent:a.descent()});return b},_setBoxTextAlign:function(a,b){var c="left";"c"===b.alignment?c="center":"r"===b.alignment&&(c="right");this._setStyle(a,
{textAlign:c})},_setStretchyBoxSpecialWidthHeight:function(a,b){var c=b.precomputedWidth||b.fontSizePx,c={height:this.toGrid(b.height()),width:this.toGrid(c)};b.left()&&(c.left=this.toGrid(b.left()));this._setStyle(a,c)},_renderHBoxApplyStyle:function(a,b){var c=b.skip||0,d={display:"inline-block",position:"relative"};b.fontSizePx&&(d.fontSize=b.fontSizePx+"px");c&&(d.marginLeft=c+"em");if(b.leftShift||b.rightShift)c=b.leftShift?-b.leftShift:0,c+=b.rightShift?b.rightShift:0,d.marginLeft=this.toGrid(c);
b.width()&&(d.width=this.toGrid(b.width()));b.downShift()&&(d.marginTop=this.toGrid(b.downShift()),d.marginBottom=this.toGrid(-b.downShift()),d.display="block");this._setStyle(a,d)},renderHBox:function(a){var c=this.makeDomNode(a),e=a.fontSizePx||0,f=0,k=0;d.set(c,"data-eqn-subscript",!0===a.subscript);d.set(c,"data-eqn-superscript",!0===a.superscript);a.children.length&&!a.accentBox()&&(f=Math.round(e*this.fontAscent),k=Math.round(e*this.fontDescent));a.traverse(g.hitch(this,function(a){var d;a&&
(d=a.render(this),b.place(d,c),f=Math.max(f,a.cssAscent()),k=Math.max(k,a.cssDescent()))}));a.setMetrics({cssAscent:f,cssDescent:k});this._renderHBoxApplyStyle(c,a);return c},_renderVBoxApplyStyle:function(a,b){var c=b.skip||0,d={display:"inline-block",position:"relative"};c&&(d.marginLeft=c+"em");b.borderWidth&&(d.borderWidth=b.borderWidth+"px");b.borderStyle&&(d.borderStyle=b.borderStyle);this._setStyle(a,d)},renderVBox:function(a){var c=this.makeDomNode(a),d=a.children,e=0<d.length?d[d.length-
1]:null,f=0,h=0;this._renderVBoxApplyStyle(c,a);if(0===d.length)return this._setStyle(c,{height:this.toGrid(a.height()),verticalAlign:this.toGrid(-a.descent())}),a.setMetrics({cssAscent:a.ascent(),cssDescent:a.descent()}),c;this._setBoxTextAlign(c,a);var l=!1;a.traverse(g.hitch(this,function(a){var d,g;a&&(d=a.render(this),b.place(d,c),a instanceof n?(f+=a.length,h+=a.ascent()):(g=f+a.ascent()-a.cssAscent(),a.isStretchySymbolBox()?1===a.children.length&&(g=a.children[0],g.ascent()-g.cssAscent()&&
(g=g.ascent()-g.cssAscent(),k("webkit")&&(g=Math.max(Math.ceil(g/1.1),g-1)),this._setStyle(d,{display:"block",marginTop:this.toGrid(g)}))):this._setStyle(d,{display:"block",marginTop:this.toGrid(g)}),f=a.descent()-a.cssDescent(),h+=a.ascent(),a!==e?h+=a.descent():(a=a.accentBox())&&1<a.children.length&&(l=!0)))}));l||this._setVBoxVerticalAlign(c,a,h);a.setMetrics({cssAscent:a.ascent(),cssDescent:a.descent()});return c},_setVBoxVerticalAlign:function(a,b,c){b=b.ascent()-c;this._setStyle(a,{verticalAlign:this.toGrid(b)})}})})},
"MW/equations/renderer/view/viewmodel/HBox":function(){define(["dojo/_base/declare","./ContainerBox"],function(h,f){return h(f,{constructor:function(){this.name="HBox";this._largeOp=!1},render:function(f){return f.renderHBox(this)},accentBox:function(){return 1===this.children.length&&this.children[0]?this.children[0].accentBox():null},hasLargeOpSymbolBox:function(){return this._largeOp},rightItalicCorrection:function(){var f=this.children;return f.length&&f[f.length-1].rightItalicCorrection()},leftItalicCorrection:function(){var f=
this.children;return f.length&&f[0].leftItalicCorrection()},needsGapBefore:function(){var f=this.children;return f.length&&f[0].needsGapBefore()},needsGapBehind:function(){var f=this.children;return f.length&&f[f.length-1].needsGapBehind()},startsWithDelimiter:function(){var f=this.children;return f.length&&f[0].startsWithDelimiter()},endsWithDelimiter:function(){var f=this.children;return f.length&&f[f.length-1].endsWithDelimiter()},computeRowGaps:function(f,e){var d=0,c=this.children;if(0<c.length){f.computeGap(null,
c[0],e);for(d=0;d<c.length-1;d+=1)f.computeGap(c[d],c[d+1],e)}},findAlignmentPoint:function(f,e){var d=this.children,c,b,a;e.push(0);a=e.length-1;for(c=0;c<d.length;c+=1)if(b=d[c])if(e[a]=c,b=b.findAlignmentPoint(f,e),null!==b)return b;e.pop();return null},splitAt:function(f,e){var d,c,b,a;1===arguments.length&&(e=0);d=f.path[e];c=this.children;b=c[d].splitAt(f,e+1);a=new this.constructor(this);a.setMetrics({ascent:this.ascent(),descent:this.descent()});a.children=c.slice(d);a.children[0]=b.right;
c[d]=b.left;this.children=c.slice(0,d+1);b.right=a;b.left=this;return b},computeMetrics:function(){var f=this.children,e=0,d,c,b;if(0<f.length){d=f[0].ascent();c=f[0].descent();for(var a=f[0].belowXheight(),e=1;e<f.length;e+=1)b=f[e],d=Math.max(d,b.ascent()),c=Math.max(c,b.descent()),a&=b.belowXheight();this.setMetrics({ascent:d,descent:c});this.setBelowXheight(a)}},setItalicCorrection:function(f){var e=this.children;0!==e.length&&(e=e[e.length-1])&&e.setItalicCorrection(f)},_setScriptVBox:function(f,
e,d,c,b){var a=f.renderer,k=f.emToPx(1);f=k*a.fontAscent;var h=k*a.fontXHeight,k=k*a.fontDescent,m=!!c,a=!!b,q=e.ascent()||f,n=e.descent()||k,p=e.hasLargeOpSymbolBox();e=0;var r=h,s=0.6*h,t=f-h,u=s,h=0;if(a){b.superscript=!0;if(q>Math.ceil(f)||p)r/=2;e=q-b.descent()-r;e=Math.max(e,t)-(b.supDownShift||0)}if(m){c.subscript=!0;if(n>Math.ceil(k)||p)s=-s/2;h=-n+c.ascent()+s;h=Math.min(h,u)}a&&m&&(h>e&&(h=e),c=d.children[1],c.length=e-h,c.computeMetrics());c=0;c=a?e+b.height():h;d.computeMetrics();d.setAscent(c)},
setNoLimitsScriptData:function(f,e){var d=e[0],c=e[1],b=e[2];this._setScriptVBox(f,d,this.children[1],c,b);d.setItalicCorrection(!c||!!b);this.computeMetrics()},setMultiScriptData:function(f,e,d){var c,b=this.children,a=b[e],k,h,m,q,n;for(c=0;c<b.length;c+=1)if(c!==e){k=b[c];h=k.children;q=m=null;n=d[c];if(1===n||3===n)m=h[0];2===n?q=h[0]:3===n&&(q=h[2]);this._setScriptVBox(f,a,k,q,m)}this.computeMetrics()}})})},"MW/equations/renderer/view/viewmodel/ContainerBox":function(){define(["dojo/_base/declare",
"./AbstractBox"],function(h,f){return h(f,{constructor:function(f){f=f||{};this.children=f.children||[]},addChild:function(f){f&&this.children.push(f)},traverse:function(f){var e=this.children,d,c;for(d=0;d<e.length;d+=1)c=e[d],f(c)}})})},"MW/equations/renderer/view/viewmodel/AbstractBox":function(){define(["dojo/_base/declare","dojo/_base/lang","../../model/SpacingClasses"],function(h,f,g){return h(null,{constructor:function(e){e=e||{};this._accentHeight=this._cssDescent=this._cssAscent=this._descent=
this._ascent=0;this._belowXheight=!1;this._downShift=0;this.spacing=e.spacing||g.ORD;this.skip=0;this.templateParts=null},computeMetrics:function(){},isStretchyAccentBox:function(){return!1},isStretchySymbolBox:function(){return!1},accentBox:function(){return null},hasLargeOpSymbolBox:function(){return!1},setItalicCorrection:function(){},rightItalicCorrection:function(){return 0},leftItalicCorrection:function(){return 0},needsGapBefore:function(){return!1},needsGapBehind:function(){return!1},startsWithDelimiter:function(){return this.isDelimiterBox()},
endsWithDelimiter:function(){return this.isDelimiterBox()},isDelimiterBox:function(){return!1},height:function(){return this._ascent+this._descent},belowXheight:function(){return this._belowXheight},setBelowXheight:function(e){this._belowXheight=e},downShift:function(){return this._downShift},setDownShift:function(e){this._downShift=e},accentHeight:function(){return this._accentHeight},setMetrics:function(e){["ascent","descent","cssAscent","cssDescent"].map(f.hitch(this,function(d){e.hasOwnProperty(d)&&
(this["_"+d]=e[d])}))},setAccentHeight:function(e){this._accentHeight=e},setAscent:function(e){var d=this._ascent+this._descent;this._ascent=e;this._descent=d-e},ascent:function(){return this._ascent},cssAscent:function(){return this._cssAscent},setDescent:function(e){var d=this._ascent+this._descent;this._descent=e;this._ascent=d-e},descent:function(){return this._descent},cssDescent:function(){return this._cssDescent},setWidth:function(e){this._width=e},width:function(){return this._width},setLeft:function(e){this._left=
e},left:function(){return this._left},centerAt:function(e){var d=this.height();this._ascent=d/2+e;this._descent=d/2-e},findAlignmentPoint:function(e,d){return null}})})},"MW/equations/renderer/view/viewmodel/MathTextBox":function(){define("dojo/_base/declare dojo/has ./AbstractBox ../../model/SpacingClasses ../../model/Symbols ../../model/utils/MathMLEntities".split(" "),function(h,f,g,e,d,c){var b={f:0.2,j:0.17,p:0.1,x:0.05,y:0.07,"\u00df":0.2,A:0.1,B:0.05,D:0.05,H:0.05,I:0.05,J:0.05,L:0.05,M:0.05,
N:0.05,R:0.05,U:-0.1,X:0.05,Z:0.05,"\u00c4":0.1,"\u00dc":-0.1,"\u03b2":0.05,"\u03bb":0.05,"\u03bc":0.05,"\u03c1":0.05,"\u03c7":0.1},a={d:0.05,f:0.2,j:0.05,k:0.02,r:0.05,t:0.03,"\u00df":0.02,C:0.1,E:0.1,F:0.1,H:0.1,I:0.1,J:0.1,K:0.1,L:0.05,M:0.1,N:0.1,S:0.05,T:0.1,U:0.1,V:0.1,W:0.1,X:0.05,Y:0.1,Z:0.1,"\u00dc":0.1,"\u03b3":0.05,"\u03b4":0.05,"\u03b6":0.1,"\u03b8":0.05,"\u03ba":0.05,"\u03be":0.05,"\u03c0":0.1,"\u03c3":0.05,"\u03d5":0.05,"\u03d1":0.03,"\u03d6":0.1,"\u03db":0.05,"\u03c7":0.05,"\u03c8":0.09};
b[c.replace("\x26Escr;")]=-0.05;a[c.replace("\x26sscr;")]=-0.05;a[c.replace("\x26zscr;")]=-0.05;a[c.replace("\x26Kscr;")]=0.05;a[c.replace("\x26Xscr;")]=0.05;return h(g,{constructor:function(a){a=a||{};this.name="MathTextBox";this.text=a.text||"";this.yShift=this.xShift=this.glyphShift=0;this.fontSize=a.fontSize||1;this.cls=a.cls||"text";this.applyItalicCorrection=!0;this.isRelation=!1;this.accentType=this.fontStyle=this.fontWeight=null;this.stretchy=!1},isStretchyAccentBox:function(){return!0===
this.symbolAccentStretchy},accentBox:function(){return"topaccent"===this.accentType||"bottomaccent"===this.accentType?this:null},setItalicCorrection:function(a){this.text&&(this.applyItalicCorrection=a)},_getCharAt:function(a,b){if(!a)return"";var c=a.length,d;d=0===b?a[0]:a[c-1];var e=d.charCodeAt(0);1<c&&(55296<=e&&57343>=e)&&(d=0===b?a.slice(0,2):a.slice(c-2));return d},rightItalicCorrection:function(){var b;return("text"===this.cls||"symbol"===this.cls)&&this.applyItalicCorrection?(b=this.text,
(b=this._getCharAt(b,-1))&&this.isItalic&&a[b]?a[b]:0):0},leftItalicCorrection:function(){var a;return("text"===this.cls||"symbol"===this.cls)&&this.applyItalicCorrection?(a=this.text,(a=this._getCharAt(a,0))&&this.isItalic&&b[a]?b[a]:0):0},needsGapBefore:function(){return"code"===this.cls},needsGapBehind:function(){return"code"===this.cls},isDelimiterBox:function(){var a=this.cls;return 5<a.length&&"extra"===a.slice(0,5)||this.symbolDelimiterType},findAlignmentPoint:function(a,b){var c;return"alignmark"===
this.cls?{path:b,pos:0}:"d"===a&&"number"===this.cls?(c=this.text.indexOf("."),-1===c&&(c=this.text.length),{path:b,pos:c}):"\x3d"===a&&this.isRelation?{path:b,pos:0}:null},splitAt:function(a){a=a.pos;var b=null,c=this.text;if(a===c.length)return{left:this,right:null};b=new this.constructor(this);b.text=c.slice(a);this.text=c.slice(0,a);return{left:this,right:b}},setSymbolBoxData:function(a,b){var c=a.symbolName||a.text,c=d.unicodeMap[c]||c;(c=d.symbolMap[c])?this.initalizeSymbolBoxData(c,b,a.stretchy):
(this.cls="text",this.text=a.symbolName.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),this.spacing=e.ORD);void 0!==a.TeXSpacing&&(this.spacing=a.TeXSpacing)},initalizeSymbolBoxData:function(a,b,c){this.cls=a.font;this.fontStyle=a.fontStyle;this.isItalic="italic"===a.fontStyle;this.text=d.getCharForSymbol(a);this.spacing=a.spacing||e.ORD;this.subLeftShift=b.emToPx(a.subLeftShift)||0;this.supRightShift=b.emToPx(a.supRightShift)||0;this.supDownShift=b.emToPx(a.supDownShift)||
0;this.symbolDelimiterType=a.delimiterType;this.symbolGlyphTop=b.emToPx(a.glyphTop/1E3)||0;this.symbolGlyphBottom=b.emToPx(a.glyphBottom/1E3)||0;this.symbolAccentDownShift=b.emToPx(a.accentDownShift/1E3)||0;this.symbolAccentHeight=b.emToPx(a.accentHeight);this.symbolGlyphTop!==this.symbolGlyphBottom&&(this.symbolAccentHeight=b.emToPx((a.glyphTop-a.glyphBottom)/1E3)||1);this.symbolAccentStretchy=a.accentStretchy&&(c||a.stretchyDefault);this.isRelation=a.relation||!1},_computeTopAccentMetrics:function(a,
b){this.accentType&&-1!==this.accentType.indexOf("accent")&&(b.accentHeight=this.symbolAccentHeight?this.symbolAccentHeight:b.px*a.fontAscent,b.accentHeight=Math.max(0,b.accentHeight),this.setAccentHeight(b.accentHeight),-1!==this.accentType.indexOf("topaccent")&&(b.ascent=this.accentHeight(),b.descent=0,this.setMetrics({ascent:b.ascent,descent:b.descent})))},computeMetrics:function(a){var b=a.renderer;a=a.emToPx(1);var c=Math.ceil(a*b.fontAscent);a={px:a,ascent:c,descent:a-c,accentHeight:0};"alignmark"===
this.cls?this.setMetrics({ascent:0,descent:0}):(this.setMetrics({ascent:a.ascent,descent:a.descent}),this._computeTopAccentMetrics(b,a));this.setMetrics({cssAscent:a.ascent,cssDescent:a.descent})},render:function(a){return a.renderMathTextBox(this)}})})},"MW/equations/renderer/view/viewmodel/StretchyBox":function(){define(["dojo/_base/declare","dojo/_base/lang","./ContainerBox","../../model/SpacingClasses","../../model/Symbols"],function(h,f,g,e,d){return h(g,{constructor:function(){this.name="StretchyBox";
this.minsize="shortfall";this.maxsize=0;this.alignment="c";this.supRightShift=this.subLeftShift=0;this._largeOp=!1},computeMetrics:function(){},render:function(c){return c.renderStretchyBox(this)},isStretchySymbolBox:function(){return!0},hasLargeOpSymbolBox:function(){return this._largeOp},isDelimiterBox:function(){return"open"===this.delimiterType||"close"===this.delimiterType},makeLargeOp:function(c,b,a){this.symbolData=c=d.lookupLargeOp(c,a);this._makeSingleSymbolBox(b,c);a=this.children[0];this._largeOp=
!0;b.renderer.computeGlyphTextboxMetrics(a,c.font,b);this.setMetrics({ascent:a.ascent(),descent:a.descent()});this.precomputedWidth=b.emToPx(c.width/1E3)||0;this.subLeftShift=b.emToPx(c.subLeftShift)||0;this.supRightShift=b.emToPx(c.supRightShift)||0;this.spacing=c.spacing||e.ORD;this.centerAt(b.mathAxis());return this},setSymbolName:function(c){this.symbolName=c},setSymbolBoxData:function(c,b){var a=c.symbolName,e=d.getSymbol(a);e&&(this.symbolName=a,e.delimiterType&&(this.delimiterType=e.delimiterType),
e.spacing&&(this.spacing=e.spacing),c.TeXSpacing&&(this.spacing=c.TeXSpacing),0<c.minsize&&(this.minsize=c.minsize,this.setMetrics({ascent:this.minsize}),this.centerAt(b)),0<c.maxsize&&(this.maxsize=c.maxsize))},resizeAndCenterDelimiter:function(c,b,a){var d=0,d=(b-a)/2;this.resizeStretchBox(c,b,a,this.minsize,this.maxsize)&&this.centerAt(d)},STRETCHY_SUFFIX:["","big","Big","bigg","Bigg"],_glyphForSymbol:function(c,b,a){var e,f,g=0,h,n=null,p=this.STRETCHY_SUFFIX;for(e=0;e<p.length;e+=1){h=d.symbolMap[b+
p[e]];if(!h)return 1.5*g>=a?n:null;f=h&&h.size?h.size:1;f=c.emToPx(f);if(!this.isDelimiterBox()&&f+1>=a||f>a-1E-4)return n&&2*Math.abs(a-g)<Math.abs(f-a)?n:h;g=f;n=h}return null},_tallestGlyphForSymbol:function(c){var b=this.STRETCHY_SUFFIX;return d.symbolMap[c+b[b.length-1]]},resizeStretchBox:function(c,b,a,e,f){var g=b+a,h=null,n=!0,h=d.symbolMap,p=d.unicodeMap;"shortfall"===e?g=Math.max(0.901*g,g-c.emToPx(0.5)):0<e&&(g=Math.max(g,c.emToPx(e)));0<f&&(g=Math.min(g,c.emToPx(f)));e=p[this.symbolName]||
this.symbolName;h[e]||(e="ZeroWidthSpace");g<=c.emToPx(3)&&!this.isDelimiterBox()&&(a=Math.max(a-c.emToPx(2.25*c.renderer.fontDescent),0));(h=this._glyphForSymbol(c,e,g))?(this._makeSingleSymbolBox(c,h),n=1<h.size):this._makeVariableSymbolBox(c,e,b,a)||(h=this._tallestGlyphForSymbol(e),this._makeSingleSymbolBox(c,h));return n},_makeSingleSymbolBox:function(c,b){var a=c.renderer.makeGlyphTextbox(b,c);this.children=[a];this.setMetrics({ascent:a.ascent(),descent:a.descent()});this.precomputedWidth=c.emToPx(b.width/
1E3)||0},_makeVariableSymbolBox:function(c,b,a,e){function g(a,b){var d=c.renderer.makeGlyphTextbox(a,c);d.xShift=n;d.glyphShift+=p;b||d.setMetrics({descent:d.descent()-B,cssDescent:d.cssDescent()-B});return d}function h(a){for(var b=0,c,b=0;b<a;b+=1)c=g(t),F(c)}a+=e;var q=d.symbolMap;e=q[b+"tp"];if(!e)return!1;var n=0,p=0,r=q[b+"mid"],s=q[b+"bt"],t=q[b+"ex"],q=s.size,u=t.size,v=r?r.size:0;b=c.emToPx(e.size);var q=c.emToPx(q),v=v?c.emToPx(v):0,w=c.emToPx(u),x=Math.max(0,a-(b+q+v)),B=0,A=2,D=u=0,F=
f.hitch(this,function(a){this.children.push(a)});if(!e)return!1;e.yOffset&&(p=c.emToPx(e.yOffset/1E3));e.xOffset&&(n=e.xOffset/1E3,"c"===this.alignment&&(n/=2));r?(u=Math.ceil(x/2/w),A+=1+2*u,D=2*u*w-x):(u=Math.ceil(x/w),A+=u,D=u*w-x);B=(Math.max(0,b+q+v-a)+D)/(A-1);this.children=[g(e)];r&&(h(u),r=g(r),F(r));h(u);s=g(s,!0);F(s);this.setMetrics({ascent:0,descent:a});this.precomputedWidth=c.emToPx(e.width/1E3)||0;return!0}})})},"MW/equations/renderer/view/viewmodel/WhiteSpaceBox":function(){define(["dojo/_base/declare",
"dojo/dom-style","./AbstractBox"],function(h,f,g){return h(g,{constructor:function(e){e=e||{};this.name="WhiteSpaceBox";this.length=e.length||0;this.horizontal=!1},computeMetrics:function(){this.setMetrics({ascent:this.horizontal?0:this.length})},render:function(e){var d=e.makeDomNode(this);this.horizontal?f.set(d,{display:"inline-block",position:"relative",marginLeft:e.toGrid(this.length)}):f.set(d,{display:"none"});return d}})})},"MW/equations/renderer/view/viewmodel/RuleBox":function(){define(["dojo/_base/declare",
"./AbstractBox"],function(h,f){return h(f,{constructor:function(f){f=f||{};this.name="RuleBox";this.thickness=f.thickness||0;this.length=f.length||0;this.horizontal=!0},computeMetrics:function(){var f=this.length;this.horizontal&&(f=this.thickness);this.setMetrics({ascent:f,cssAscent:f})},render:function(f){return f.renderRuleBox(this)}})})},"MW/equations/renderer/view/viewmodel/HorizontalStretchyBox":function(){define(["dojo/_base/declare","dojo/_base/lang","./ContainerBox","../../model/SpacingClasses",
"../../model/Symbols"],function(h,f,g,e,d){return h(g,{constructor:function(c){this.name="HorizontalStretchyBox"},computeMetrics:function(){},render:function(c){return c.renderHorizontalStretchyBox(this)},accentBox:function(){return"topaccent"===this.accentType||"bottomaccent"===this.accentType?this:null},isStretchyAccentBox:function(){return!0},makeHorizontalStretchyBox:function(c,b){var a=d.getSymbol(c.symbolName);this.symbolData=a;this.setSymbolBoxData(c);this._makeSingleSymbolBox(b,a);var e=this.children[0];
e.setSymbolBoxData(c,b);b.renderer.computeGlyphTextboxMetrics(e,a.font,b);this.setMetrics({ascent:e.ascent(),descent:e.descent()});this.setAccentHeight(b.emToPx(a.accentHeight||1));return this},setSymbolBoxData:function(c){this.symbolName=c.symbolName;this.baseIsItalic=c.baseIsItalic;this.accentType=c.accentType},STRETCHY_SUFFIX:["","big","Big","bigg","Bigg"],_glyphForSymbol:function(c,b,a){var e,f,g=0,h,n=null,p=this.STRETCHY_SUFFIX;for(e=0;e<p.length;e+=1){h=d.symbolMap[b+p[e]];if(!h)break;f=h&&
h.width?h.width/1E3:1;f=c.emToPx(f);if(!this.isDelimiterBox()&&f+1>=a||f>a-1E-4)return n&&2*Math.abs(a-g)<Math.abs(f-a)?n:h;g=f;n=h}return null},_widestGlyphForSymbol:function(c){var b=this.STRETCHY_SUFFIX,a;for(a=b.length-1;0<=a;a-=1){var e=d.symbolMap[c+b[a]];if(e)return e}return null},resizeHorizontalStretchyBox:function(c,b){var a=null,e=d.unicodeMap[this.symbolName]||this.symbolName;(a=this._glyphForSymbol(c,e,b))?this._makeSingleSymbolBox(c,a):this._makeVariableSymbolBox(c,e,b)||(a=this._widestGlyphForSymbol(e),
this._makeSingleSymbolBox(c,a))},_setMetrics:function(c,b){var a=c.emToPx(1),d=Math.ceil(a*c.renderer.fontAscent),e=b.symbolAccentHeight||1,f=b.symbolAccentDownShift||0;"topaccent"===this.accentType?this.setMetrics({ascent:e,descent:0}):"bottomaccent"===this.accentType?(a=b.symbolGlyphTop-f-e,this.setMetrics({ascent:e+a,descent:-a})):this.setMetrics({ascent:d,descent:a-d});this.setAccentHeight(e);f&&this.setDownShift(f)},_makeSingleSymbolBox:function(c,b){var a=c.renderer.makeGlyphTextbox(b,c);a.accentType=
this.accentType;a.computeMetrics(c);this.children=[a];this._setMetrics(c,a)},_makeVariableSymbolBox:function(c,b,a){function e(a,b){var d=c.renderer.makeGlyphTextbox(a,c);d.setLeft(Math.round(A));d.setWidth(b);A+=b-w;return d}function g(a){for(var b=0,c,b=0;b<a;b+=1)c=e(r,u),D(c)}var h=d.symbolMap,q=h[b+"left"];if(!q)return!1;var n=h[b+"mid"],p=h[b+"right"],r=h[b+"ex"];b=p.width/1E3;var s=r.width/1E3,t=n?n.width/1E3:0,h=c.emToPx(q.width/1E3);b=c.emToPx(b);var t=t?c.emToPx(t):0,u=c.emToPx(s),v=Math.max(0,
a-(h+b+t)),w=0,x=2,B=s=0,A=0,D=f.hitch(this,function(a){this.children.push(a)});if(!q)return!1;n?(s=Math.ceil(v/2/u),x+=1+2*s,B=2*s*u-v):(s=Math.ceil(v/u),x+=s,B=s*u-v);w=(Math.max(0,h+b+t-a)+B)/(x-1);q=e(q,h);this.children=[q];n&&(g(s),n=e(n,t),D(n));g(s);p=e(p,b);D(p);this._setMetrics(c,q);this.setWidth(a);return!0}})})},"MW/equations/renderer/view/viewmodel/VBox":function(){define("dojo/_base/array dojo/_base/declare ./BoxUtils ./ContainerBox ./MathTextBox ./HorizontalStretchyBox".split(" "),function(h,
f,g,e,d,c){return f(e,{constructor:function(b){b=b||{};this.name="VBox";this.alignment=b.alignment||"c";this.precomputedWidth=0},render:function(b){return b.renderVBox(this)},computeMetrics:function(){var b=this.children,a=0,c;if(0<b.length){for(a=c=0;a<b.length-1;a+=1)b[a]&&(c+=b[a].height());(b=b[b.length-1])&&this.setMetrics({ascent:c+b.ascent(),descent:b.descent()})}this.borderWidth&&(this._ascent+=this.borderWidth,this._descent+=this.borderWidth);return this},needsGapBefore:function(){return h.some(this.children,
function(b){return b.needsGapBefore()})},needsGapBehind:function(){return h.some(this.children,function(b){return b.needsGapBehind()})},_scaleOneStretchyAccent:function(b,a,e,f){var h=g.getAccentBox(f);if(h)return e=e||b.computeWidth(a),h instanceof c?(h.resizeHorizontalStretchyBox(b,e),f.computeMetrics()):h instanceof d&&h.symbolAccentDownShift&&h.setDownShift(h.symbolAccentDownShift),h.baseIsItalic&&"topaccent"===h.accentType&&!a.belowXheight()?h.skip+=a.rightItalicCorrection()/2:h.setItalicCorrection(!1),
e},_scaleStretchyBase:function(b,a,c,d){var e=g.getHorizontalStretchyAccentBox(a);e&&(c=c?b.computeWidth(c):0,d=d?b.computeWidth(d):0,e=a.children[0],e.resizeHorizontalStretchyBox(b,Math.max(c,d)),a.computeMetrics())},_scaleStretchyAccents:function(b,a,c,d){var e;e=this._scaleOneStretchyAccent(b,a,0,c);this._scaleOneStretchyAccent(b,a,e,d);this._scaleStretchyBase(b,a,c,d)},setLimitsScriptData:function(b,a,c,d,e,f){var g=this.templateParts,h=a[0],r=h.ascent(),s=a[2];a=a[1];var t=1,u=b.barHeight(),
v=0;this._scaleStretchyAccents(b,h,s,a);e&&(f?(v=h.belowXheight()?b.emToPx(b.renderer.fontAscent-b.renderer.fontXHeight):0,h.setMetrics({ascent:h.ascent()-v}),s.setDownShift(v)):(g[1].length=u,g[1].computeMetrics(),r+=u),r+=s.height()-v,t+=1);c&&!d&&(g[t].length=u,g[t].computeMetrics());this.computeMetrics();this.setAscent(r)}})})},"MW/equations/renderer/view/viewmodel/BoxUtils":function(){define(["dojo/_base/lang","./HBox","./HorizontalStretchyBox"],function(h,f,g){return{getAccentBox:function(e){return!e||
!(e instanceof f&&e.children&&1===e.children.length)?null:e.children[0]},getHorizontalStretchyAccentBox:function(e){if(!e||!(e instanceof f&&e.children&&1===e.children.length))return null;e=e.children[0];return e instanceof g?e:null}}})},"MW/rtc/model/io/MDocumentWriter":function(){define(["dojo/_base/lang","mw-log/Log"],function(h,f){return{write:function(f){this._IN_CODE_BLOCK=0;this._IN_TITLE=1;this._IN_PARAGRAPH=2;this._BOLD_DELIMITER="*";this._ITALIC_DELIMITER="_";this._MONOSPACE_DELIMITER="|";
this._ORDERED_LIST_DELIMITER="# ";this._UNORDERED_LIST_DELIMITER="* ";this._EQUATION_INLINE_DELIMITER="$";this._EQUATION_DISPLAY_DELIMITER="$$";this._HYPERLINK_START_DELIMITER="\x3c";this._HYPERLINK_END_DELIMITER="\x3e";this._insideTextBlock=this._IN_CODE_BLOCK;this._insideHyperlink=this._insideMonospace=this._insideItalic=this._insideBold=0;this._hasSectionBreak=!1;this._WRAPPED_COMMENT_LENGTH=75;var e="",d=null,c=f.getMaxLineNumber(),b;for(b=0;b<c;b+=1){var a=f.getLineNode(b);d||(d="code"===this._getLineNodeFormat(a)?
a:null);e+=this._getMTextForNode(a)}d&&this._checkIfLineNodeContainsFunction(d)&&(e=this._postProcessForFunctions(e));return e.replace(/\s+$/,"")},_checkIfLineNodeContainsFunction:function(f){return f.getText().match(/^(\s+)?function/)},_postProcessForFunctions:function(f){var e=[],d=[],c=!1;f.split("\n").forEach(h.hitch(this,function(b){0<b.length&&(this._isCommentOrSectionMarkup(b)&&!c?e.push(b):(d.push(b),c=!0))}));return 0===e.length?f:this._insertTopLevelCommentInsideFunction(d,e)},_insertTopLevelCommentInsideFunction:function(f,
e){var d=e.join("\n"),c=f[0]+"\n";f.shift();return c=c+(d+"\n")+f.join("\n")},_isCommentOrSectionMarkup:function(f){return f.match(/%/)||f.match(/%%/)},_getMTextForNode:function(f){switch(this._getLineNodeFormat(f)){case "title":return this._visitTitle(f);case "heading":return this._visitTitle(f);case "text":return this._visitParagraph(f);case "code":return this._visitCode(f);case "ListParagraph":return this._visitListParagraph(f);case "sectionbreak":return this._hasSectionBreak=!0,"";case "tableofcontents":return"";
case "codeexample":return this._visitCodeExampleBlock(f)}},_visitListParagraph:function(f){var e=this._continueTextBlock(),d="",c=this._UNORDERED_LIST_DELIMITER;"ordered"===f.type&&(c=this._ORDERED_LIST_DELIMITER);var b=this;f.children.forEach(function(a){a="% "+c+b._visitRichParagraph(a)+"\n";d+=b._wrapParagraph(a)});return e+d},_visitTitle:function(f){this._insideTextBlock=this._IN_TITLE;return"%% "+this._visitRichParagraph(f)+"\n"},_visitCode:function(f){var e="";this._insideTextBlock!==this._IN_CODE_BLOCK&&
(e="\n");this._hasSectionBreak&&(e="%%\n",this._hasSectionBreak=!1);this._insideTextBlock=this._IN_CODE_BLOCK;f=f?f.getText():"";return e+f+"\n"},_visitParagraph:function(f){var e=this._continueTextBlock();f=this._visitRichParagraph(f);return this._wrapParagraph(e+"% "+f+"\n")},_getLineNodeFormat:function(f){return"LineNode"===f.className?"code":f.hasOwnProperty("level")?1===f.level?"title":"heading":"ListParagraph"===f.className?"ListParagraph":"SectionBreak"===f.className?"sectionbreak":"TableOfContentsContainer"===
f.className?"tableofcontents":"CodeExampleBlockNode"===f.className?"codeexample":"text"},_visitRichParagraph:function(f){var e=f.children,d="",c;for(c=0;c<e.length;c+=1){var b=e[c],a="";if(this._isHyperLinkNode(b))var k=b.children[0],a=this._HYPERLINK_START_DELIMITER+b.hyperlink+" "+k.text,a=this._wrapInlineMarkup(a,k),a=a+this._HYPERLINK_END_DELIMITER;else this._isEquationNode(b)?(d=this._terminateMarkup(d),d.replace(/\s/g,"").length||(d=d.trim()),k=b.getDisplayStyle(),"ListItem"===f.className&&
(k=!1),a+=this._wrapEquation(k,b.getTeXString())):(a+=b.text,a=this._wrapInlineMarkup(a,b));d+=a}return this._terminateMarkup(d)},_visitCodeExampleBlock:function(f){var e="%%\n% \n",d="%  ";"codeexample_matlab"===f.type&&(d="%   ");f.children.forEach(function(c){e+=d+c.getText()+"\n"});return e+"%\n"},_continueTextBlock:function(){return this._insideTextBlock===this._IN_CODE_BLOCK?(this._insideTextBlock=this._IN_PARAGRAPH,"%% \n"):this._insideTextBlock===this._IN_TITLE?(this._insideTextBlock=this._IN_PARAGRAPH,
""):"% \n"},_wrapInlineMarkup:function(f,e){f=this._wrapMarkupAroundText(f,e,"bold");f=this._wrapMarkupAroundText(f,e,"italic");return f=this._wrapMarkupAroundText(f,e,"monospace")},_wrapMarkupAroundText:function(f,e,d){var c,b;if("bold"===d)c="_insideBold",b=this._BOLD_DELIMITER;else if("italic"===d)c="_insideItalic",b=this._ITALIC_DELIMITER;else if("monospace"===d)c="_insideMonospace",b=this._MONOSPACE_DELIMITER;else if("hyperlink"===d)c="_insideHyperlink",b=this._HYPERLINK_START_DELIMITER;else return f;
if(void 0!==e[d]&&null!==e[d]&&e[d]){if(0===this[c])return this[c]=1,b+f}else if(1===this[c])return this[c]=0,b+f;return f},_terminateMarkup:function(f){1===this._insideBold&&(f+=this._BOLD_DELIMITER,this._insideBold=0);1===this._insideItalic&&(f+=this._ITALIC_DELIMITER,this._insideItalic=0);1===this._insideMonospace&&(f+=this._MONOSPACE_DELIMITER,this._insideMonospace=0);return f},_wrapParagraph:function(f){for(var e="",d="";0<f.length;){var c=this._WRAPPED_COMMENT_LENGTH,c=c<f.length?c+f.slice(c).match(/^\S*\s*/)[0].length:
f.length,e=e+(d+f.slice(0,c));f=f.slice(c);d="\n% "}return e},_wrapEquation:function(f,e){e=e.split("\n").join("");return f?this._EQUATION_DISPLAY_DELIMITER+e+this._EQUATION_DISPLAY_DELIMITER:this._EQUATION_INLINE_DELIMITER+e+this._EQUATION_INLINE_DELIMITER},_isHyperLinkNode:function(f){return"HyperlinkNode"===f.className},_isEquationNode:function(f){return"EquationNode"===f.className}}})},"MW/rtc/plugins/view/exporters/ViewBaseWriter":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class",
"mw-log/Log"],function(h,f,g,e){return f(null,{constructor:function(d){this._inheritedStyles="text-align line-height min-height white-space color font-family font-style font-size font-weight text-decoration white-space".split(" ");this._nonInheritedStyles=["margin-left","margin-top","margin-bottom","margin-right"]},switchToInlineView:function(d){var c=d.getAction("rtc_inline_view_no_animation");return c&&c.enabled?(d.executeAction("rtc_inline_view_no_animation"),!0):!1},write:function(d,c,b){this._internalDocument=
d;this._embeddedOutputsView=b;this._reset();return c?this._writeSelection(c):this._write()},_writeSelection:function(d){this._reset();this._startNode=d.getStartPosition().getNode().box;this._startPosInNode=d.getStartPosition().getOffset();this._endNode=d.getEndPosition().getNode().box;this._endPosInNode=d.getEndPosition().getOffset();d.fileEndSelected()&&this._handleFileEndSelection(d.getEndPosition().getNode());this._target="clipboard";return this._write()},_handleFileEndSelection:function(d){if(d=
d.rootContainer().box.nextElementSibling)this._endNode=d,this._endPosInNode=1},_reset:function(){this._startNode=null;this._startPosInNode=-1;this._endNode=null;this._endPosInNode=-1;this._target=""},_write:function(){this._writeBody();return this._writeOpening()+this._body+this._writeClosing()},_writeOpening:function(){return""},_writeClosing:function(){return""},_startNodeElement:function(d){e.assert("Subclasses must override _startNodeElement.");return!1},_endNodeElement:function(d){e.assert("Subclasses must override _endNodeElement.")},
_writeBody:function(){this._body="";this._parseTree()},_enterNode:function(d){if(this._isRootNode(d))return!1;if(!(d===this._endNode&&0===this._endPosInNode)&&!(d===this._startNode&&this._startPosInNode===d.rteNode.maxOffset()))return this._startNodeElement(d)},_leaveNode:function(d){this._isRootNode(d)||this._endNodeElement(d)},_enterTextNode:function(){},_enterAllParents:function(d){!this._isRootNode(d)&&!this._isRootNode(d.parentNode)&&(this._enterAllParents(d.parentNode),this._enterNode(d.parentNode))},
_leaveAllParents:function(d){this._isRootNode(d)||(this._leaveNode(d),this._leaveAllParents(d.parentNode))},_parseTree:function(){var d=this._startNode||this._internalDocument.root.box;this._enterAllParents(d);for(var c=!1;d;){"#text"===d.nodeName?(this._enterTextNode(d),c=!1):c=this._enterNode(d);if(d===this._endNode){this._leaveAllParents(d);break}if(!c&&d.firstChild)d=d.firstChild;else{if(d.nextSibling)"#text"!==d.nodeName&&this._leaveNode(d);else{for(;!d.nextSibling&&!g.contains(d,"rootNode");)this._leaveNode(d),
d=d.parentNode;if(this._isRootNode(d))break;this._leaveNode(d)}d=d.nextSibling}}},_isRootNode:function(d){return g.contains(d,"rootNode")},_writeTextNode:function(d){var c=0,b=0;h.some(d.childNodes,function(a){c=b;b=c+this._getNodeText(a).length;if(this._startNode===d)if(this._startPosInNode>=c&&this._startPosInNode<=b)c=this._startPosInNode;else if(this._startPosInNode>b)return!1;if(this._endNode===d)if(this._endPosInNode>=c&&this._endPosInNode<=b)b=this._endPosInNode;else if(b>=this._endPosInNode)return!0;
var e=this._getNodeText(d).substring(c,b);this._writeChildNodeForTextNode(e,a)},this)},_getNodeText:function(d){return d.textContent},_writeChildNodeForTextNode:function(d,c){}})})},"MW/rtc/plugins/view/exporters/HTMLOutputUtils":function(){define("dojo/_base/array dojo/dom-construct dojo/dom-style dojo/query MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities dojo/text!MW/rtc/plugins/embeddedoutputs/outputhandlers/css/outputhandler.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/errorOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/matrixOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/variableTableOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/symbolicOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/textOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/variableEditor.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/variableOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/css/warningOutput.css dojo/text!MW/rtc/plugins/embeddedoutputs/view/inline/css/inlineoutput.css dojo/text!MW/rtc/plugins/language/matlab/alert/css/alertPlugin.css dojo/text!MW/rtc/plugins/language/matlab/diagnosticmessage/css/diagnosticMessage.css dojo/text!MW/rtc/plugins/view/exporters/ellipses.css".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){return{_ELEMENT_NODE:1,writeOutputStyles:function(){var d;d=""+r;d+=l;d+=".embeddedOutputsSymbolicElement { overflow: initial !important;}\n.embeddedOutputsSymbolicElement { width: 100% !important; }\n";d+=m;d+=".embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}\n";d+=q;d+=n;d+=".variableValue { width: 100% !important; }\n";d+=a;d+=".matrixElement { max-height: none !important; }\n";
d+=k;d+=s;d+=t;d+=p;d+=b;d+=c;d+=u;return d.replace(/\n/g,"").replace(/}/g,"}\n").replace(/.rtePane /g,"").replace(/.*rightPane.*\n/mg,"").replace(/.*alertPluginLayer.*\n/mg,"")},processOutput:function(a,b){var c=a.cloneNode(!0);this._convertToInlineStyles(c,a);b&&this._processInteractiveVariableOutput(c,a,b);this._replaceEquationsInOutput(c,a);c=this._removeDoNotExportsFromOutput(c);c=this._removeMATLABLinksFromOutput(c);this._updateFiguresInOutputs(c);return c=this._removeFigureWidgetsFromOutput(c)},
_processInteractiveVariableOutput:function(a,b,c){var d=a.children;h.forEach(d,function(a,e){var g=c.getOutputFromOutputDiv(b.children[e]);g&&g.getHTMLContent&&(g=g.getHTMLContent(d[e]),f.place(g,d[e].firstElementChild,"replace"))})},_removeDoNotExportsFromOutput:function(a){var b;b=e(".doNotExport",a);0<b.length&&(a=a.cloneNode(!0),b=e(".doNotExport",a),b.forEach(function(a){f.destroy(a)}));return a},_replaceEquationsInOutput:function(a,b){for(var c,g,k=e(".MathEquation",b),h=e(".MathEquation",a),
l=0;l<k.length;l+=1)c=d.exportDomnodeToImageURL(k[l],2),c.simpleEquation?h[l].firstChild.innerHTML=d.simpleEquationToHTML(c.simpleEquation):(g=f.create("span",{style:{verticalAlign:Math.round(c.verticalAlign)+"px"}},h[l].firstChild,"replace"),f.create("img",{src:c.dataURL,width:c.width/2,height:c.height/2},g))},_removeMATLABLinksFromOutput:function(a){var b=0,c,d=e("a",a);if(0<d.length){c=a.cloneNode(!0);d=e("a",c);for(b=0;b<d.length;b+=1)"matlab:"===d[b].href.substring(0,7)&&(a=document.createTextNode(d[b].textContent),
f.place(a,d[b],"replace"));return c}return a},_updateFiguresInOutputs:function(a){(a=e(".ImageView",a))&&0<a.length&&a.forEach(function(a){g.set(a,"height","auto");g.set(a.parentNode,"height","auto")})},_removeFigureWidgetsFromOutput:function(a){var b;b=e(".figureWidget",a);0<b.length&&(a=a.cloneNode(!0),b=e(".figureWidget",a),b.forEach(function(a){f.destroy(a)}));return a},_convertToInlineStyles:function(a,b){if(b.nodeType===this._ELEMENT_NODE){var c=g.getComputedStyle(b);a.style.whiteSpace=c.whiteSpace;
a.style.fontStyle=c.fontStyle;a.style.color=c.color;a.style.fontSize=c.fontSize;for(c=0;c<b.childNodes.length;c++)this._convertToInlineStyles(a.childNodes[c],b.childNodes[c])}}}})},"MW/rtc/plugins/cutcopypaste/InternalSerializationGeneratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/InternalSerializationGenerator"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(e){return new g(e)}})})},
"MW/rtc/plugins/cutcopypaste/InternalSerializationGenerator":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/ContentSerializerVisitor MW/rtc/model/SelectionTreeWalker MW/rtc/nodes/inner/RootNode MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),function(h,f,g,e,d,c){return h(null,{constructor:function(b){b.registerNodeConverter(d,f.hitch(this,"_serializeSelection"))},_serializeSelection:function(b){var a=new g;(new e(a)).traverseSelection(b);b=a.getSerialized();return[{flavor:c.MATLAB_RICHTEXT,
content:JSON.stringify(b)}]}})})},"MW/rtc/model/io/ContentSerializerVisitor":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/model/io/NodeVisitorInterface"],function(h,f,g){return h(g,{constructor:function(){this._content=[];this._contentStack=[]},enterInnerNode:function(e){this._contentStack.push(this._content);this._content=[]},visitLeafNode:function(e,d,c){e=e.serialize(!0);e.text=e.text.substring(d,c);this._content.push(e)},leaveInnerNode:function(e){var d=e.serialize(!0);
d.children=this._content;this._content=this._contentStack.pop();(0!==d.children.length||!f.isTextLevelContainer(e))&&this._content.push(d)},getSerialized:function(){return this._content}})})},"MW/rtc/plugins/cutcopypaste/PlainTextNodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/PlainTextNodeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(e){return new g(e)}})})},
"MW/rtc/plugins/cutcopypaste/PlainTextNodeConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/leaf/PlainTextNode","MW/rtc/plugins/cutcopypaste/MIMETypes"],function(h,f,g,e){return h(null,{constructor:function(d){d.registerNodeConverter(g,f.hitch(this,"_convertPlainTextNode"))},_convertPlainTextNode:function(d){return!d.fileEndSelected()?[{flavor:e.MATLAB_RICHTEXT,content:void 0},{flavor:e.HTML,content:void 0}]:[]}})})},"MW/rtc/plugins/cutcopypaste/RTFGeneratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/cutcopypaste/RTFGenerator"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter","rtc.internaldocument"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/cutcopypaste/RTFGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/nodes/inner/RootNode","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/view/exporters/RTFWriter"],function(h,f,g,e,d){return h(null,
{constructor:function(c,b){this._internalDocument=b;c.registerNodeConverter(g,f.hitch(this,"_convertToRTF"))},_convertToRTF:function(c){this._rtfWriter||(this._rtfWriter=new d);c=this._write(c);var b=[];c&&b.push({flavor:e.RTF,content:c});return b},_write:function(c){return this._rtfWriter.write(this._internalDocument,c)}})})},"MW/rtc/plugins/view/exporters/RTFWriter":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom-class dojo/has dojo/query MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/equations/equationcontroller/view/EquationViewUtilities MW/rtc/plugins/view/exporters/RTFFormatUtils MW/rtc/plugins/view/exporters/ViewBaseWriter".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return f(l,{_PIX_TO_POINT_FACTOR:15,_MATLAB:"matlab:",_VE_SCALING_FACTOR:"10",_MULTIPLIER_SYMBOL:"\\'d7",constructor:function(a){},_reset:function(){this.colors=[];this._listNumber=this.numOfColors=0;this._listoverrides=this._lists="";this.inherited(arguments)},_writeFontTable:function(){return"{\\fonttbl{\\f0\\fswiss Helvetica;}{\\f1\\fmodern Courier;}}"},_handleFileEndSelection:function(a){var b=a.rootContainer();(a=b.box.nextSibling)||(a=b);for(b=a;b;)(b=a.lastChild)&&
(a=b);a&&(this._endNode=a,this._endPosInNode=this._endNode.length)},_writeColorTable:function(){var a="",b;this.colors.forEach(function(c){(b=c.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*\d?\.?\d+)?\)/))&&(a+="\\red"+parseInt(b[1],10)+"\\green"+parseInt(b[2],10)+"\\blue"+parseInt(b[3],10)+";")});return a?"\n{\\colortbl"+a+"}\n":""},_writeListTable:function(){if(""===this._lists)return"";var a;a="{\\*\\listtable"+this._lists;return a=a+"}\n"+("{\\*\\listoverridetable"+this._listoverrides+"}\n")},_addList:function(a,
b,c){var d;d="{\\list\\listtemplateid"+a+"\\listhybrid";d+="{\\listlevel";b?(d+="\\levelnfc0\\levelnfcn0\\leveljc0\\leveljcn0\\levelfollow0\\levelstartat1\\levelspace360\\levelindent0"+c,d+="{\\*\\levelmarker \\{decimal\\}.}",d+="{\\leveltext\\leveltemplateid"+a,d+="\\'02\\'00.;}",d+="{\\levelnumbers\\'01;}"):(d+="\\levelnfc23\\levelnfcn23\\leveljc0\\leveljcn0\\levelfollow0\\levelstartat1\\levelspace360\\levelindent0"+c,d+="{\\*\\levelmarker \\{disc\\}}",d+="{\\leveltext\\leveltemplateid"+a,d+="\\'01\\uc0\\u8226 ;}",
d+="{\\levelnumbers;}");d+="\\fi-360\\li720\\lin720 ";d+="}";d+="{\\listname ;}";d+="\\listid"+a;d+="}\n";this._lists+=d;this._listoverrides+="{\\listoverride\\listid"+a+"\\listoverridecount0\\ls"+a+"}"},_enterTextNode:function(a){e.contains(a.parentNode,"textWrapper")||this._writeText(a,a.textContent)},_writeOpening:function(){return"{\\rtf1\\ansi"+this._writeFontTable()+this._writeColorTable()+this._writeListTable()},_writeClosing:function(){return"}"},_openParagraph:function(a){a.rteNode&&a.rteNode.anchorId&&
(this._body+="{\\fcs1 {\\*\\bkmkstart internal:"+a.rteNode.anchorId+"}{\\*\\bkmkend internal:"+a.rteNode.anchorId+"}");this._body+="\\pard";this._setAlignment(a);a=g.getComputedStyle(a);this._body+="\\sb"+Math.max(parseInt(a.marginTop,10),0)*this._PIX_TO_POINT_FACTOR;this._body+="\\sa"+Math.max(parseInt(a.marginBottom,10),0)*this._PIX_TO_POINT_FACTOR;this._body+=" "},_setAlignment:function(a){a=g.getComputedStyle(a);this._body="center"===a.textAlign?this._body+"\\qc":"right"===a.textAlign?this._body+
"\\qr":this._body+"\\ql"},_openText:function(a){this._body+="\\plain";a=g.getComputedStyle(a);-1<a.fontFamily.indexOf("monospace")?this._body+="\\f1":this._body+="\\f0";this._body+="\\fs"+Math.round(1.5*parseInt(a.fontSize,10));var b=this.colors.indexOf(a.color);0>b&&(this.colors.push(a.color),b=this.colors.length-1);this._body+="\\cf"+b;"italic"===a.fontStyle&&(this._body+="\\i");if("bold"===a.fontWeight||"700"===a.fontWeight)this._body+="\\b";"underline"===a.textDecoration&&(this._body+="\\ul");
this._body+=" "},_writeText:function(a,b){var c=b?b:this._getNodeTextWithLineBreak(a),d=0,e;a===this._startNode&&this._startPosInNode&&(d=this._startPosInNode);a===this._endNode&&-1!==this._endPosInNode&&(e=this._endPosInNode);this._body+=k.getFormattedChars(c.substring(d,e))},_startNodeElement:function(a){if(a.className&&-1<a.className.indexOf("ToCHeading")||-1<a.className.indexOf("ToCItems"))return!1;"ul"===a.localName&&(this.listItemNumber=0,this._openList(a));"ol"===a.localName&&(this._openList(a,
!0),this.listItemNumber=1);"li"===a.localName&&(this.listItemNumber?(this._body+="{\\listtext   "+this.listItemNumber+"  }",this.listItemNumber+=1):this._body+="{\\listtext    \\'95    }",this._setAlignment(a));"br"===a.localName&&(this._body+="\\line ");"strong"===a.localName&&(this._body+="\\b ");if("div"===a.localName)return this._checkForOpenParagraph(a);if("h1"===a.localName||"h2"===a.localName)this._openParagraph(a);else if("a"===a.localName&&a.href.substring(0,7)!==this._MATLAB){var b=0===
a.href.indexOf("internal")?" \\\\l ":"";this._body+="{\\field{\\*\\fldinst{HYPERLINK "+b+'"'+a.href+'"}}{\\fldrslt{\\ul\\cf1 ';this._openText(a)}else{if("equationNode"===a.className)return this._writeEquationNode(a),!0;if("img"===a.localName)return this._body+=this._writeImage(a.src,a.clientWidth,a.clientHeight),!0;if(e.contains(a,"textBox"))return this._writeTextNode(a),!0}return!1},_writeChildNodeForTextNode:function(a,b){this._openText(b);this._body+=k.getFormattedChars(a)},_getNodeTextWithLineBreak:function(a){return a.innerText},
_endNodeElement:function(a){if(!(a.className&&-1<a.className.indexOf("ToC"))){if(("div"===a.localName||"h1"===a.localName||"h2"===a.localName)&&!this._checkForCloseParagraph(a))this._body+="\\par\n";"li"===a.localName&&(this._body+=" \\f0\\\n");"a"===a.localName&&a.href.substring(0,7)!==this._MATLAB&&(this._body+="}}}");"strong"===a.localName&&(this._body+="\\b0 ")}},_checkForOpenParagraph:function(a){if(e.contains(a,"outputParagraph"))return!1;if(e.contains(a,"doNotExport"))return!0;if(e.contains(a,
"figureElement"))return this._writeFigureOutputElement(a),!0;if(e.contains(a,"matrixElement"))return this._writeMatrixOutputElement(a),!0;if(e.contains(a,"outputElement")||e.contains(a,"textElement")||e.contains(a,"variableElement")||e.contains(a,"diagnosticMessage-messagePart")||e.contains(a,"diagnosticMessage-stackPart"))return a.innerHTML?(this._openText(a),!1):!0;if(e.contains(a,"symbolicElement"))return this._writeSymbolicOutputElement(a),!0;if(e.contains(a,"lineNode"))return this._writeLineNode(a),
!1;if(e.contains(a,"inlineElement"))return this._body+="\\pard\\li255\\sb150\\sa340 ",!1;if(e.contains(a,"tableElement")&&this._embeddedOutputsView)return this._writeTableOutputElement(a),!0;if(e.contains(a,"diagnosticMessage-wrapper"))return this._writeDiagnosticOutputMessage(a),!1;if(e.contains(a,"MathEquation")||e.contains(a,"render-target"))return!0;if("liveControlOuterNode"===a.className)return this._writeLiveControlNode(a),!0;this._openParagraph(a);return!1},_checkForCloseParagraph:function(a){return e.contains(a,
"inlineWrapper")||e.contains(a,"CodeBlock")||e.contains(a,"symbolicElement")||e.contains(a,"variableElement")||e.contains(a,"matrixElement")||e.contains(a,"outputParagraph")||e.contains(a,"figureElement")||e.contains(a,"diagnosticMessage-wrapper")||e.contains(a,"SectionBlock")||e.contains(a,"textElement")||e.contains(a,"embeddedOutputsWarningElement")||e.contains(a,"tableElement")||e.contains(a,"liveControlOuterNode")||!a.innerHTML},_openList:function(a){var b=g.getComputedStyle(a),c="\\cf"+this._colorIndex(a)+
" ";this._listNumber+=1;this._addList(this._listNumber,"ol"===a.localName,c);this._body+="\\pard\\tx220\\tx720\\pardeftab720\\li720\\fi-720\\sa225\n";this._body+="\\ls"+this._listNumber+"\\ilvl0\\f0\\fs"+Math.round(1.5*parseInt(b.fontSize,10))},_colorIndexBg:function(a){a=g.getComputedStyle(a).backgroundColor;var b=this.colors.indexOf(a);0>b&&(this.colors.push(a),b=this.colors.length-1);return b},_colorIndex:function(a){a=g.getComputedStyle(a).color;var b=this.colors.indexOf(a);0>b&&(this.colors.push(a),
b=this.colors.length-1);return b},_writeDiagnosticOutputMessage:function(a){var b=this._colorIndex(a);this._body+="\\cf"+b+" ";this._openText(a)},_writeLineNode:function(a){a=this._colorIndexBg(a.parentNode.parentNode);this._body+="\\cbpat"+a+" "},_writeSymbolicOutputElement:function(a){var b=a.getElementsByClassName("embeddedOutputsVariableElement"),c="";b[0]&&"div"===b[0].localName&&(c="\\line   ");0<b.length&&(this._openText(b[0]),this._writeText(b[0]),this._body+=c);this._writeEquationNode(a)},
_writeMatrixOutputElement:function(a){var b=a.getElementsByClassName("variableNameElement");if(0<b.length){this._openText(b[0].firstChild);this._writeText(b[0].firstChild);b=this._embeddedOutputsView?this._embeddedOutputsView.getOutputFromOutputDiv(a.parentElement):null;this._writeNodeContent(a,"veVariableValueSummary");if(b&&b.getFocusedView){if(b=c(".veViewportSummary",a),0<b.length&&!e.contains(b[0],"hide")&&(this._body+="{    ",h.forEach(b[0].children,function(a){this._openAndWrite(a)},this),
this._body+="}"),this._body+="\\line ",(b=a.getElementsByClassName("veScalingFactor")[0])&&!e.contains(b,"hide"))this._body+=this._VE_SCALING_FACTOR,b=b.getElementsByClassName("scaleExponent")[0],this._body+="{\\super "+b.textContent+"}\\fs21"+this._MULTIPLIER_SYMBOL+" \\line "}else this._body+="\\line ";this._writeNodeContent(a,"variableValue")}},_writeTableOutputElement:function(a){this._writeNodeContent(a,"summaryBarVarName");this._body+=" ";this._writeNodeContent(a,"summaryBarSize");this._body+=
" ";this._writeNodeContent(a,"summaryBarType");this._body+=" ";this._body+="\\par\n\\pard ";this._openText(a);a=this._embeddedOutputsView.getOutputFromOutputDiv(a.parentElement);this._body+="{"+a.getRTFContent()+"}"},_writeNodeContent:function(a,b){var c=a.getElementsByClassName(b);c&&0<c.length&&this._openAndWrite(c[0])},_openAndWrite:function(a){this._openText(a);this._writeText(a)},_writeFigureOutputElement:function(a){a=a.getElementsByClassName("figureImage");0<a.length&&(this._body+=this._writeImage(a[0].src,
a[0].clientWidth,a[0].clientHeight))},_writeEquationNode:function(b){if(d("ie"))return"";b=a.exportDomnodeToImageURL(b,2);this._body+=this._writeImage(b.dataURL,b.width,b.height,2,b.verticalAlign*this._PIX_TO_POINT_FACTOR)},_writeImage:function(a,c,d,e,f){var g="";a=b.getHexBinaryFromURI(a);if(!a)return g;e||(e=1);var k="pngblip";if("jpg"===a.format||"jpeg"===a.format)k="jpegblip";g=g+("{\\pict\\"+k)+("\\picw"+c);g+="\\pich"+d;g+="\\picwgoal"+Math.round(c*this._PIX_TO_POINT_FACTOR/e);g+="\\pichgoal"+
Math.round(d*this._PIX_TO_POINT_FACTOR/e);0>f&&(g+="\\dn"+Math.round(f/-10));g+="\n";g+=a.hexData;return g+="}"},_writeLiveControlNode:function(a){a=a.getElementsByClassName("liveControlTextView")[0];this._writeTextNode(a)}})})},"MW/rtc/plugins/view/exporters/RTFFormatUtils":function(){define(["dojo/_base/declare"],function(h){return{getFormattedChars:function(f){for(var g="",e=0,d="",c=0,e=0;e<f.length;e+=1){d=f[e];c=f.charCodeAt(e);switch(d){case "\\":d="\\\\";break;case "{":d="\\{";break;case "}":d=
"\\}";break;case "\n":d="\\line "}g=127>c?g+d:g+("\\u"+c+"?")}return g}}})},"MW/rtc/plugins/datatip/DataTipProvider":function(){define(["dojo/_base/declare","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/datatip/DataTip"],function(h,f,g,e){return h(g,{isApplicable:function(d){return f.isPlainCodeFile(d)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.internaldocument rtc.view rtc.editordataservice rtc.outputhandlerservice rtc.functionservice rtc.preferences.service rtc.actionservice rtc.document matlab.tokens rtc.domnode matlab.code.codeblocks debug.documentdebugservices rtc.linenumberservice".split(" ")}},
createInstance:function(d,c,b,a,f,g,h,q,n,p,r,s,t){return new e(d,c,b,a,f,g,h,q,n,p,r,s,t)}})})},"MW/rtc/plugins/datatip/DataTip":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/on MW/rtc/plugins/datatip/DataTipUtilities MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType MW/rtc/plugins/tooltip/HoverableTooltipPlugin".split(" "),function(h,f,g,e,d,c,b,a,k){return h(k,{_MATRIX_MAX_COLUMN:5,_SCROLLABLE_CLASSNAME:"scrollableOutput",
_DATATIP_CSS_CLASS:"rtcDataTipElement",_DO_NOT_SHOW_TOOLTIP:void 0,_DATATIP_ACTION_ID:"rtc_datatips",_DATATIP_PREFERENCE_KEY:"LiveEditorDataTips",_TIMEOUT_VALUE:11E3,_CANCEL_REASON:"DatatipCancel",constructor:function(a,b,c,d,e,k,h,t,u,v,w,x,B){this._internalDocument=a;this._view=b;this._editorDataService=c;this._outputHandlerService=d;this._functionService=e;this._preferencesService=k;this._actionService=h;this._document=t;this._tokenService=u;this._domNode=v;this._codeBlockService=w;this._documentDebugServices=
x;this._lineNumberService=B;this._showDataTips=!0;a=[{id:this._DATATIP_ACTION_ID,enabled:!0,selected:!0,callback:f.hitch(this,"_onActionChange")}];this._actionService.loadActions(a);this.own(g.after(this._actionService,"onActionChange",f.hitch(this,"_onActionChange"),!0));this.own(g.after(this._documentDebugServices,"onStackChanged",f.hitch(this,"_handleStackChanged")));this._currentWorkspace=null},_handleStackChanged:function(){this._currentWorkspace=this._documentDebugServices.getActiveWorkspace()},
_onActionChange:function(a){a.id===this._DATATIP_ACTION_ID&&(this._showDataTips=a.newValue)},priority:function(){return 4},getTooltipContent:function(a,b,d){this._latestPromise&&(this._latestPromise.cancel(this._CANCEL_REASON),this._latestPromise=null);if(this._isPreferenceDisabled())d(this._DO_NOT_SHOW_TOOLTIP);else{var e=this._tokenService.getTokensData().tokens,g=c.getValidIdentifierTill(b,this._document,this._internalDocument,e);if(g)if(e=this._isDebugging(),b=b.getLineColumn().line,e){var k=
this._lineNumberService.getCodeLineNumberFromLineNumber(b-1);this._codeBlockService.whenSynchronized(f.hitch(this,function(){this._isHoveringInCurrentWorkspace(k)?this._requestDatatip(g,a,d):d(this._DO_NOT_SHOW_TOOLTIP)}))}else this._isInsideFunction(b)?d(this._DO_NOT_SHOW_TOOLTIP):this._requestDatatip(g,a,d);else d(this._DO_NOT_SHOW_TOOLTIP)}},_requestDatatip:function(a,b,c){this._latestPromise=this._editorDataService.request("rtc.datatip",{variablename:a.trim()},this._TIMEOUT_VALUE);a=f.hitch(this,
"_updateDataTip",b,c);c=f.hitch(this,"_errorCallback",c);this._latestPromise.then(a,c)},_isPreferenceDisabled:function(){return!this._preferencesService.getValue(this._DATATIP_PREFERENCE_KEY,!0)||!this._showDataTips},_updateDataTip:function(a,b,f){if(f=f.result){var g={};"matrix"===f.type&&(g.createPromptController=!1,g.maxColumns=this._MATRIX_MAX_COLUMN);(f=this._outputHandlerService.handleRawOutput(f,g))?(f=f.getOutput(),f.isReady()?(g=f.getDomElement(),f.startup(),a=c.createTooltipDiv(this._view,
g,a,this._DATATIP_CSS_CLASS,this._domNode),b(a,!0),a&&(d(a,"mouseover",function(a){a.stopPropagation()}),e.add(a,this._SCROLLABLE_CLASSNAME))):b(this._DO_NOT_SHOW_TOOLTIP)):b(this._DO_NOT_SHOW_TOOLTIP)}else b(this._DO_NOT_SHOW_TOOLTIP)},_errorCallback:function(a,b){b!==this._CANCEL_REASON&&a(void 0)},_isInsideFunction:function(a){return this._functionService.isLineInFunction(a)},_isDebugging:function(){return b.getInstance().isDebugging},_isHoveringInCurrentWorkspace:function(b){var c;this._currentWorkspace&&
(c=this._codeBlockService.getInnermostBlockOfType(this._currentWorkspace.getLineNumber(),a.FUNCTION_DEFINITION));b=this._codeBlockService.getInnermostBlockOfType(b,a.FUNCTION_DEFINITION);return!c||!b?c===b:c.id===b.id},onTooltipClose:function(){}})})},"MW/rtc/plugins/datatip/DataTipUtilities":function(){define(["dojo/dom-construct","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities"],function(h,f,g){return{_TOOLTIP_PADDING:50,_TOOLTIP_MAX_WIDTH:700,_TOOLTIP_MAX_HEIGHT:500,
__DATATIP_TO_VIEWPORT_DIMENSION_RATIO:0.7,getValidIdentifierTill:function(e,d,c,b){d=this._getIdentifierTill(e,d,c);if(!d)return"";e=e.getLineColumn().line-1;c=d.text;return this._isInvalidIdentifier(c,d.startColumn,d.endColumn,e,b)?"":c},_getIdentifierTill:function(e,d,c){e=f.getWordAtPosition(c,e);if(!e||!e.text||this._isInvalidVariableName(e,d))return null;var b=e.text,a=e.startLineCol.column,g=e.endLineCol.column,h=e.startLineCol.line,m;0!==a&&(m=this._getCharAtLocation(d,h,a-1));if("."===m){if(1>=
a)return null;a=c.getPositionForLineColumn(h+1,a-1);d=this._getIdentifierTill(a,d,c);if(!d)return null;d=d.text+"."+b;g=e.endLineCol.column;a=g-d.length}else d=b;return{text:d,startColumn:a,endColumn:g}},_isInvalidVariableName:function(e,d){var c=e.startLineCol.line,b=e.startLineCol.column;return 1>=b?!1:"."===this._getCharAtLocation(d,c,b-1)&&"."===this._getCharAtLocation(d,c,b-2)},_getCharAtLocation:function(e,d,c){return e.getTextCharacters(d,c,1)},_isInvalidIdentifier:function(e,d,c,b,a){e=g.getMatchingTokenInLine(a[b],
d,c);return!e?!1:g.isCommentToken(e)||g.isMatlabStringToken(e)?!0:!1},createTooltipDiv:function(e,d,c,b,a){var f=e.getDomTargetPosition();e=e.getCoordinateForNode(c);c=e.y-f.scrollTop;f=Math.min(this._TOOLTIP_MAX_HEIGHT,0.7*Math.max(c,f.clientHeight-(c+e.height)));a=Math.min(this._TOOLTIP_MAX_WIDTH,0.7*a.clientWidth);return h.create("div",{innerHTML:d.outerHTML?d.outerHTML:d,className:b,style:{"max-height":f+"px","max-width":a+"px"}})}}})},"MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities":function(){define(["./TokenConstants"],
function(h){return{isTokenStartOfBlock:function(f){f=f.getType();return f===h.FOR||f===h.PARFOR||f===h.IF||f===h.WHILE||f===h.TRY||f===h.SWITCH||f===h.FUNCTION||f===h.NESTED||f===h.CLASSDEF||f===h.PROPERTIES||f===h.ENUMERATION||f===h.SPMD||f===h.EVENTS||f===h.METHODS},isTokenEndOfBlock:function(f){return f.getType()===h.END},isTokenStartOfMidBlock:function(f){f=f.getType();return f===h.ELSE||f===h.ELSEIF||f===h.CATCH||f===h.OTHERWISE||f===h.CASE},isSectionTitleToken:function(f){return f.getType()===
h.SECTION_TITLE},isWhitespaceToken:function(f){return f.getType()===h.WHITE},isTokenStartOfBlockIndent:function(f){return this.isTokenStartOfBlock(f)||this.isTokenStartOfMidBlock(f)},isCommentToken:function(f){f=f.getType();return h.COMMENT===f||h.SECTION_TITLE===f||h.BLKCOM===f||h.BLKSTART===f||h.BLKEND===f||h.PRAGMA===f},isBlockCommentToken:function(f){f=f.getType();return h.BLKCOM===f||h.BLKSTART===f||h.BLKEND===f},isSwitchToken:function(f){return f.getType()===h.SWITCH},isEndOfLineToken:function(f){return f.getType()===
h.EOL||f.getType()===h.SEOL||f.getType()===h.CEOL||f.getType()===h.IEOL},isFunctionToken:function(f){return f.getType()===h.FUNCTION||f.getType()===h.NESTED},isIndentableFunction:function(f){return f.getType()===h.NESTED},isMatlabStringToken:function(f){f=f.getType();return f===h.STRING||f===h.STRING_LITERAL},isMatlabUntermDoubleQuoteStringToken:function(f){return f.getType()===h.UNTERM_STRING_LITERAL},isMatlabUntermSingleQuoteStringToken:function(f){return f.getType()===h.UNTERM},isDotDotDotToken:function(f){return f.getType()===
h.DOTDOTDOT},getMatchingTokenInLine:function(f,g,e){var d=null;f.some(function(c){var b=c.getPositionInfo().column,a=b+c.getValue().length;if(g>=b&&g<=a&&e>=b&&e<=a)return d=c,!0});return d}}})},"MW/rtc/plugins/language/matlab/tokenizer/TokenConstants":function(){define([],function(){var h={FUNCTION:1,NESTED:2,IF:3,SWITCH:4,TRY:5,WHILE:6,FOR:7,END:8,ELSE:9,ELSEIF:10,BREAK:11,RETURN:12,PARFOR:13,GLOBAL:15,PERSISTENT:16,CATCH:20,CONTINUE:21,CASE:22,OTHERWISE:23,CLASSDEF:25,PROPERTIES:28,METHODS:30,
EVENTS:31,ENUMERATION:32,SPMD:33,PARSECTION:34,SECTION:35,ID:40,EEND:41,INT:42,FLOAT:43,STRING:44,DUAL:45,BANG:46,QUEST:47,SEMI:50,COMMA:51,LP:52,RP:53,LB:54,RB:55,LC:56,RC:57,FEEND:58,TRANS:60,DOTTRANS:61,NOT:62,AT:63,DOLLAR:64,BACKQUOTE:65,DOUBLEQUOTE:66,SHARP:67,PLUS:70,MINUS:71,MUL:72,DIV:73,LDIV:74,EXP:75,COLON:76,DOT:80,DOTMUL:81,DOTDIV:82,DOTLDIV:83,DOTEXP:84,AND:85,OR:86,ANDAND:87,OROR:88,LT:89,GT:90,LE:91,GE:92,EQ:93,NE:94,EQUALS:95,CNE:96,EOL:100,SEOL:101,CEOL:102,IEOL:103,COMMENT:105,BLKSTART:106,
BLKCOM:107,BLKEND:108,SECTION_TITLE:109,PRAGMA:110,DOTDOTDOT:111,DOTDOT:112,DEEP_NEST:113,DEEP_STMT:114,WHITE:116,NEGERR:118,SEMERR:119,EOLERR:120,UNTERM:121,BADCHAR:122,DEEP_PAREN:123,FP_ERR:124,RES_ERR:125,DEEP_COM:126,BEGIN_TYPE:127,END_TYPE:128,STRING_LITERAL:129,UNTERM_STRING_LITERAL:130},f={"0":"NA",1:"function",2:"nested",3:"if",4:"switch",5:"try",6:"while",7:"for",8:"end",9:"else",10:"elseif",11:"break",12:"return",13:"parfor",14:"NA",15:"global",16:"persistent",17:"NA",18:"NA",19:"NA",20:"catch",
21:"continue",22:"case",23:"otherwise",24:"NA",25:"classdef",26:"NA",27:"NA",28:"properties",29:"NA",30:"methods",31:"events",32:"enumeration",33:"reserved_mcos_keyword_33",34:"spmd",35:"reserved_mcos_keyword_35",36:"NA",37:"NA",38:"NA",39:"NA",40:"ID",41:"\x3cend\x3e",42:"\x3cint\x3e",43:"\x3cfloat.",44:"\x3cstring\x3e",45:"\x3cdual\x3e",46:"\x3cBANG\x3e",47:"?",48:"NA",49:"NA",50:";",51:",",52:"(",53:")",54:"[",55:"]",56:"{",57:"}",58:"NA",59:"NA",60:"'",61:".'",62:"~",63:"@",64:"$",65:"`",66:"\\",
67:"#",68:"NA",69:"NA",70:"+",71:"-",72:"*",73:"/",74:"\\\\",75:"^",76:":",77:"::",78:"NA",79:"NA",80:".",81:".*",82:"./",83:".\\",84:".^",85:"\x26",86:"|",87:"\x26\x26",88:"||",89:"\x3c",90:"\x3e",91:"\x3c\x3d",92:"\x3e\x3d",93:"\x3d\x3d",94:"~\x3d",95:"\x3d",96:"\x3cCNE\x3e",97:"NA",98:"NA",99:"NA",100:"\x3cEOL\x3e",101:"\x3cSEOL\x3e",102:"\x3cCEOL\x3e",103:"\x3cIEOL\x3e",104:"NA",105:"\x3ccomment\x3e",106:"\x3cbegin block comment\x3e",107:"\x3cblock comment\x3e",108:"\x3cend block comment\x3e",
109:"%%",110:"PRAGMA",111:"...",112:"\x3cDOT DOT\x3e",113:"\x3cDEEP NEST\x3e",114:"\x3cDEEP STMT\x3e",115:"NA",116:"\x3cwhitespace\x3e",117:"NA",118:"\x3cNEG ERROR\x3e",119:"\x3cSEM ERROR\x3e",120:"\x3cEOL ERROR\x3e",121:"\x3cunterm string\x3e",122:"\x3cbadchar\x3e",123:"\x3cDEEP PAREN\x3e",124:"NA",125:"\x3cRES ERROR\x3e",126:"\x3cDEEP COM\x3e",127:"NA",129:"\x3cstring literal\x3e",130:"\x3cunterm string literal\x3e"},g={"0":339,1:333,2:333,3:333,4:333,5:333,6:333,7:333,8:333,9:333,10:333,11:333,
12:333,13:333,14:333,15:333,16:333,17:333,18:333,19:333,20:333,21:333,22:333,23:333,24:333,25:333,26:333,27:333,28:333,29:333,30:333,31:333,32:333,33:333,34:333,35:333,44:44,45:45,46:338,64:122,65:122,66:122,67:122,105:105,106:106,107:107,108:108,109:109,110:110,111:333,121:337,122:122,125:122,129:44,130:337};h.getValueOfToken=function(e){return f[e]};h.getCategoryOfToken=function(e){return g[e]};return h})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType":function(){define([],function(){return{FOR_LOOP:"for",
WHILE_LOOP:"while",IF_STATEMENT:"if",FUNCTION_DEFINITION:"function"}})},"MW/rtc/plugins/tooltip/HoverableTooltipPlugin":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{priority:function(){throw Error("Unimplemented API: MW.rtc.plugins.tooltip.HoverableTooltipPlugin.priority");},getTooltipContent:function(f,e,d){throw Error("Unimplemented API: MW.rtc.plugins.tooltip.HoverableTooltipPlugin.getTooltipContent");}})})},"MW/rtc/plugins/draganddrop/DragAndDropProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/draganddrop/DragAndDrop"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.document rtc.cursor rtc.focusservice rtc.cutcopypaste.converter rtc.draganddropnotifier rtc.view rtc.internaldocument rtc.divselection rtc.cursorcontroller".split(" ")}},createInstance:function(e,d,c,b,a,f,h,m,q){return new g(e,d,c,b,a,f,h,m,q)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/draganddrop/DragAndDrop":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/has dojo/on MW/rtc/model/CodeUtilities MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),
function(h,f,g,e,d,c,b,a){return h(null,{_COPY_MOVE_EFFECT:"copyMove",_COPY_EFFECT:"copy",_NO_EFFECT:"none",_MOUSE_DOWN:"mouseDown",_TEXT_MIMETYPE_FOR_IE:"text",constructor:function(a,b,c,d,f,h,r,s,t){this._document=a;this._focusService=c;this._cursor=b;this._converter=d;this._view=h;this._internalDocument=r;this._divSelection=s;this._cursorController=t;this._connections=[];this._draggedTextInfo=null;this._connections.push(e.after(f,"onDragEnter",g.hitch(this,"_handleDragEnter"),!0));this._connections.push(e.after(f,
"onDragOver",g.hitch(this,"_handleDragOver"),!0));this._connections.push(e.after(f,"onDragLeave",g.hitch(this,"_handleDragLeave"),!0));this._connections.push(e.after(f,"onDrop",g.hitch(this,"_handleDrop"),!0));this._view.setDraggable(!0);this._connections.push(e.after(f,"onDragStart",g.hitch(this,"_handleDragStart"),!0));this._connections.push(e.after(f,"onDragEnd",g.hitch(this,"_handleDragEnd"),!0))},_handleDragEnter:function(a){this._focusService.setFocus();this._cursorController.clearSelection();
this._handleDragOver(a)},_handleDragOver:function(a){this._cursorController.setCursorToEvent(a);this._cursor.isCursorReadOnly()&&(a.dataTransfer.dropEffect=this._NO_EFFECT)},_handleDragLeave:function(a){this._cursor.isCursorReadOnly()&&(a.dataTransfer.dropEffect=this._NO_EFFECT)},_handleDragStart:function(a){"function"===typeof a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(this._getDragImage(),0,0);this._draggedTextInfo={coordinates:this._cursorController.getSelectionLineColumn()};this._draggedTextInfo.selectionInfo=
this._cursorController.getSelection();a.dataTransfer.effectAllowed=this._COPY_MOVE_EFFECT;this._draggedTextInfo.operation=this._COPY_MOVE_EFFECT;d("mac")?a.altKey&&(!a.metaKey&&!a.shiftKey&&!a.ctrlKey)&&(a.dataTransfer.effectAllowed=this._COPY_EFFECT,this._draggedTextInfo.operation=this._COPY_EFFECT):a.ctrlKey&&(!a.altKey&&!a.shiftKey)&&(a.dataTransfer.effectAllowed=this._COPY_EFFECT,this._draggedTextInfo.operation=this._COPY_EFFECT);this._cursor.isCursorReadOnly()&&(this._draggedTextInfo.operation=
this._COPY_EFFECT,a.dataTransfer.effectAllowed=this._COPY_EFFECT);this._divSelection.lockSelection();this._setDataTransferObject(a)},_setDataTransferObject:function(b){var c=this._converter.convertToClipboard(this._cursorController.getSelection());c.some(function(b){if(b.flavor===a.MATLAB_RICHTEXT)return this._draggedTextInfo.flavor_content=b.content,!0},this);try{c.forEach(function(a){b.dataTransfer.setData(a.flavor,a.content)},this)}catch(d){b.dataTransfer.setData(this._TEXT_MIMETYPE_FOR_IE,this._cursorController.selectedText())}},
_handleDrop:function(b){if(this._cursor.isCursorReadOnly())f.stop(b),b.preventDefault();else{this._document.startEdit();if(this._draggedTextInfo){var c=this._draggedTextInfo.flavor_content;this._divSelection.unlockSelection();this._cursorController.clearSelection();this._draggedTextInfo.operation===this._COPY_MOVE_EFFECT&&this._deleteSelectedText();this._draggedTextInfo=null}var d=g.hitch(this,function(d){try{return d===a.MATLAB_RICHTEXT&&!b.dataTransfer.getData(d)&&c?c:b.dataTransfer.getData(d)}catch(e){if(c)return c;
if(d===a.TEXT)return b.dataTransfer.getData(this._TEXT_MIMETYPE_FOR_IE)}});(d=this._converter.convertContentFromSource(d))&&this._document.insertContentAtCurrentPosition(d);this._document.endEdit()}},_handleDragEnd:function(a){this._draggedTextInfo&&(this._divSelection.unlockSelection(),this._rePaintSelectedText(),this._draggedTextInfo=null)},_deleteSelectedText:function(){this._draggedTextInfo.coordinates.forEach(function(a){var b=a.start;a=a.end;b.line>a.line?this._document.deleteText(a.line,a.column,
b.line,b.column):b.line===a.line&&b.column>a.column?this._document.deleteText(b.line,a.column,a.line,b.column):this._document.deleteText(b.line,b.column,a.line,a.column)},this)},_rePaintSelectedText:function(){this._cursorController.setSelection(this._draggedTextInfo.selectionInfo)},_getDragImage:function(){if(!this._invisibleDragImage){var a=document.createElement("img");a.src="";a.style.display="none";this._invisibleDragImage=a}return this._invisibleDragImage},destroy:function(){this._view.setDraggable(!1);
this._connections.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/draganddrop/DragAndDropNotifierProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/draganddrop/DragAndDropEventNotifier"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view"]}},createInstance:function(e){e=e.getDomtarget();return new g(e,e)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/draganddrop/DragAndDropEventNotifier":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/on"],function(h,f,g){return h(null,{constructor:function(e,d){this._isDragging=!1;this._dndEventListeners=[];this._dndEventListeners.push(g(e,"dragenter",f.hitch(this,"_handleDragEnter")));this._dndEventListeners.push(g(e,"dragleave",f.hitch(this,"_handleDragLeave")));this._dndEventListeners.push(g(e,"dragover",f.hitch(this,"_handleDragOver")));this._dndEventListeners.push(g(d,"dragstart",f.hitch(this,"_handleDragStart")));this._dndEventListeners.push(g(d,"dragend",f.hitch(this,
"_handleDragEnd")));this._dndEventListeners.push(g(e,"drop",f.hitch(this,"_handleDrop")))},_handleDragEnter:function(e){this._isDragging||(this._isDragging=!0,this.onDragEnter(e));e.preventDefault()},_handleDragLeave:function(e){e.preventDefault();this.onDragLeave(e)},_handleDragOver:function(e){e.preventDefault();this.onDragOver(e)},_handleDragEnd:function(e){this._isDragging=!1;e.preventDefault();this.onDragEnd(e)},_handleDragStart:function(e){this.onDragStart(e)},_handleDrop:function(e){this._isDragging=
!1;e.preventDefault();this.onDrop(e)},onDragEnter:function(e){},onDragLeave:function(e){},onDragOver:function(e){},onDragStart:function(e){},onDragEnd:function(e){},onDrop:function(e){},destroy:function(){this._dndEventListeners.forEach(function(e){e.remove()})}})})},"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStack"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.featureinterface rtc.view rtc.bordercontainer rtc.focusservice rtc.actionservice debug.control".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStack":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/PersistentStackModelFactory ./BreadcrumbStackView".split(" "),function(h,f,g,e,d,c,b){return f(e,{constructor:function(a,e,f,m,q,n){this._featureInterface=a;this._view=e;this._borderContainer=f;this._focusService=m;this._actionService=
q;this._debuggerManager=n;this._aspectHandles=[];this._debugServices=d.getInstance();this._persistentStackModel=c.getInstance();a=g.hitch(this,"_changeWorkspace");e=g.hitch(this,"_stepOut");this._view=new b(this._persistentStackModel,this._featureInterface,this._view,this._borderContainer,this._focusService,this._actionService,this._debuggerManager,a,e);this.own(this._view);this.own(h.after(this._debugServices,"onDebugModeChanged",g.hitch(this,"_handleOnDebugMode"),!0));this.own(h.after(this._debugServices,
"onDBCont",g.hitch(this,"_handleOnDBCont"),!0))},_handleOnDebugMode:function(a){a||this._view.hideStackBar()},_handleOnDBCont:function(){this._view.disable()},_changeWorkspace:function(a){a-=this._persistentStackModel.getActiveWorkspaceIndex();this._debugServices.dbUpDown(a)},_stepOut:function(){this._debugServices.debugStepOut()}})})},"MW/rtc/plugins/debug/PersistentStackModelFactory":function(){define(["MW/rtc/plugins/debug/PersistentStackModel"],function(h){var f=null;return{getInstance:function(){null===
f&&(f=new h);return f}}})},"MW/rtc/plugins/debug/PersistentStackModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/DebugStackFrame mw-utils/Utils ./PersistentStackModelUpdateEvent".split(" "),function(h,f,g,e,d,c,b,a){return h(e,{constructor:function(){this._debugServices=d.getInstance();this._stackFrames=[];this.own(g.after(this._debugServices,"onStackChanged",f.hitch(this,"_handleStackChanged"),
!0));this._debugServices.requestStackState()},getStackFrames:function(){return this._stackFrames},getExecutionPoint:function(){for(var a=0;a<this._stackFrames.length;a+=1){var b=this._stackFrames[a];if(b.isExecutionPoint())return b}return null},getActiveWorkspaceIndex:function(){for(var a=0;a<this._stackFrames.length;a+=1)if(this._stackFrames[a].isActiveWorkspace())return a;return-1},hasStack:function(){return 0!==this._stackFrames.length&&-1!==this.getActiveWorkspaceIndex()},getStackDepth:function(){return this._stackFrames.length},
onModelUpdated:function(a){},_handleStackChanged:function(a,b){var d=a.map(function(a,d){var e=0===d,f=d===b,g=a.getLineNumber(),k=0>g;k&&(g*=-1);return new c(a.getName(),a.getFullPath(),g,e,f,k)},this),e=this._createStackUpdatedEvent(d,b);this._stackFrames=d;this.onModelUpdated(e)},_createStackUpdatedEvent:function(c,d){var e=c.map(function(a){return a.getName()}),f=this._stackFrames.map(function(a){return a.getName()}),e=!b.arrayEquals(e,f),f=this.getActiveWorkspaceIndex();return new a(e,d!==f)}})})},
"MW/rtc/plugins/debug/DebugStackFrame":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/StackFrame"],function(h,f){return h(f,{constructor:function(f,e,d,c,b,a){this._name=f;this._fullPath=e;this._lineNumber=d;this._isExecutionPoint=c;this._isActiveWorkspace=b;this._isLeavingFrame=a},isExecutionPoint:function(){return this._isExecutionPoint},isActiveWorkspace:function(){return this._isActiveWorkspace},isLeavingFrame:function(){return this._isLeavingFrame}})})},"MW/rtc/plugins/debug/PersistentStackModelUpdateEvent":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(f,g){this._hasStackChange=f;this._hasWorkspaceChange=g},hasStackChange:function(){return this._hasStackChange},hasWorkspaceChange:function(){return this._hasWorkspaceChange}})})},"MW/rtc/plugins/debug/breadcrumbstack/BreadcrumbStackView":function(){define("dijit/Destroyable dijit/layout/ContentPane dijit/Tooltip dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/dom-style dojo/fx/easing dojo/i18n!l10n/nls/breadcrumbStack dojo/on dojo/query dojo/string mw-log/Log mw-menu/ContextMenu mw-menu/MenuItem mw-navigationbar/NavigationBar MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip MW/rtc/plugins/descriptivetooltip/DescriptiveTooltipUtilities MW/uiframework/FocusManager".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B){return e(h,{_OVERFLOW_TOLERANCE:2,_TOP_REGION:"top",_BREADCRUMB_BAR_TRAY_ANIM_DURATION:500,_TRAY_MAX_HEIGHT:30,_TRAY_MIN_HEIGHT:1,_TRAY_STATES:{HIDDEN:0,APPEARING:1,VISIBLE:2,DISAPPEARING:3},_FUNCTION_NAME_REGEX:/[A-Za-z0-9_]+$/,_FUNCTION_HANDLE_REGEX:/^@\(/,_BLANK_IMAGE:"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d",_BREADCRUMB_BAR_TRAY_CLASS:"breadcrumbBarTray",_BREADCRUMB_BAR_CONTAINER_CLASS:"breadcrumbBarContainer",
_BREADCRUMB_BAR_CLASS:"breadcrumbBar",_STEP_OUT_CONTAINER_CLASS:"stepOutContainer",_STEP_OUT_BUTTON_CLASS:"stepOutButton",_CALL_STACK_CONTAINER_CLASS:"callStackContainer",_CALL_STACK_BUTTON_CLASS:"callStackButton",_CALL_STACK_BUTTON_ACTIVE_CLASS:"dropdownActive",_OVERFLOW_INDICATOR_CLASS:"overflowIndicator",_DISABLEMENT_OVERLAY_CLASS:"disablementOverlay",_DISABLED_CLASS:"disabled",_DROP_DOWN_MENU_CLASS:"rtcStackDropdownMenu",_DROP_DOWN_MENU_ITEM_CLASS:"rtcCallStackDropdownItem",_DROP_DOWN_MENU_OFFSET_Y:2,
_IS_ACTIVE_CLASS:"rtcCallStackDropdownItemIsActive",_CURRENT_FRAME_CLASS:"currentFrame",_TOOLTIP_CLASS:"breadcrumbTooltip",_SPLIT_BUTTON_SELECTOR:".mwSplitButton",_TEXT_NODE_SELECTOR:".mwTextNode",constructor:function(a,d,e,g,k,h,l,m,n){this._model=a;this._featureInterface=d;this._view=e;this._borderContainer=g;this._focusService=k;this._actionService=h;this._debuggerManager=l;this._changeWorkspaceCallback=m;this._stepOutCallback=n;this._breadcrumbBarTray=new f({"class":this._BREADCRUMB_BAR_TRAY_CLASS});
this._trayState=this._TRAY_STATES.HIDDEN;this._currentFrameDiv=this._breadcrumbBar=this._breadcrumbBarContainer=this._currentTrayAnimation=null;this._breadcrumbTooltips=[];this._navigationMaxScrollLeft=0;this._stepOutButton=this._overflowIndicator=null;this._stepOutButtonListeners=[];this._callStackButtonTooltip=this._callStackButton=this._stepOutButtonTooltip=null;this._callStackButtonListeners=[];this._stackContextMenu=null;this._menuItemClickListeners=[];this._isLiveEditorEval=!0;this.own(b.after(this._view,
"onResize",c.hitch(this,"_handleResize"),!0));this.own(b.after(this._model,"onModelUpdated",c.hitch(this,"_handleModelUpdated"),!0));this._initBreadCrumbsModule()},destroy:function(){this._hideTray(c.hitch(this,"_removeBreadcrumbBarContainer"));this._breadcrumbBarTray.destroy();this._breadcrumbBarTray=null;this.inherited(arguments)},enable:function(){this._disablementOverlay&&(k.remove(this._disablementOverlay,this._DISABLED_CLASS),k.remove(this._breadcrumbBarContainer,this._DISABLED_CLASS))},disable:function(){this._stackContextMenu&&
this._stackContextMenu.close();this._disablementOverlay&&(k.add(this._disablementOverlay,this._DISABLED_CLASS),k.add(this._breadcrumbBarContainer,this._DISABLED_CLASS))},_initBreadCrumbsModule:function(){this._navigationBar=e([v])({currentLocation:"",metaData:{hasChildren:!1,breadCrumbObjectsArray:[]}});this.own(n(this._navigationBar,"locationChanged",c.hitch(this,"_handleLocationChange")))},_handleLocationChange:function(a){this._changeWorkspaceCallback(parseInt(a,10))},_handleResize:function(){this._breadcrumbBarContainer&&
(this._updateOverflowIndicatorVisibility(),this._updateNavigationBarScrollLeft())},_handleModelUpdated:function(a){a=a.hasStackChange();!this._model.hasStack()||2>this._getPrunedStackFramesFromModel().length?this._hideTray(c.hitch(this,"_removeBreadcrumbBarContainer")):(this._showTray(),this._breadcrumbBarContainer||this._addBreadcrumbBarContainer(),a&&(this._updateBreadcrumbValues(),this._updateStepOutButton()),this._updateActiveWorkspace(),this.enable())},_updateActiveWorkspace:function(){this._currentFrameDiv&&
k.remove(this._currentFrameDiv,this._CURRENT_FRAME_CLASS);var a=this._model.getActiveWorkspaceIndex(),b=this._breadcrumbBar.querySelectorAll(this._SPLIT_BUTTON_SELECTOR);(this._currentFrameDiv=b[b.length-1-a])&&k.add(this._currentFrameDiv,this._CURRENT_FRAME_CLASS)},_updateBreadcrumbValues:function(){var a=this._getPrunedStackFramesFromModel().map(function(a,b){return{textToDisplay:a.getName(),pathToNavigateOnClick:b.toString()}}).reverse();this._navigationBar.setCurrentLocation("",{locationIcon:this._BLANK_IMAGE,
hasChildren:!1,breadCrumbObjectsArray:a});this._destroyBreadcrumbTooltips();p(this._TEXT_NODE_SELECTOR,this._navigationBar.domNode).forEach(function(a){if(""!==a.innerText){var b=x.styleAsCode(a.innerText),b=r.substitute(q.workspaceLabel,{"0":b}),c=this._buildDescriptionString(a.innerText,q.workspaceDescriptionForFunctions,q.workspaceDescriptionGeneric);this._breadcrumbTooltips.push(new w({targetNode:a,label:b,description:c,cssClasses:this._TOOLTIP_CLASS}))}},this);this._updateNavigationBarScrollLeft();
this._updateOverflowIndicatorVisibility()},_buildDescriptionString:function(a,b,c){if(this._FUNCTION_HANDLE_REGEX.test(a))return b;a=this._buildShortFunctionName(a);return r.substitute(c,{"0":a})},_buildShortFunctionName:function(a){var b=a.match(this._FUNCTION_NAME_REGEX);return null===b?(s.error("Couldn't extract function name from: "+a),""):x.styleAsCode(b[0])},_destroyBreadcrumbTooltips:function(){this._breadcrumbTooltips.forEach(function(a){a.destroy()});this._breadcrumbTooltips=[]},_addBreadcrumbBarContainer:function(){this._breadcrumbBarContainer=
a.create("div",{className:this._BREADCRUMB_BAR_CONTAINER_CLASS});a.place(this._breadcrumbBarContainer,this._breadcrumbBarTray.domNode,"last");B.refuseFocus(this._breadcrumbBarContainer);this._breadcrumbBarContainerMouseListener=n(this._breadcrumbBarContainer,"mousedown",c.hitch(this,function(){this._stackContextMenu&&this._stackContextMenu.close()}));this._addBreadcrumbBar();this._addStepOutButton();this._addCallStackButton();this._addOverflowIndicator();this._disablementOverlay=a.create("div",{className:this._DISABLEMENT_OVERLAY_CLASS});
a.place(this._disablementOverlay,this._breadcrumbBarContainer,"last");this._breadcrumbBarContainer.addEventListener("contextmenu",function(a){a.preventDefault();a.stopPropagation()},!0);this._breadcrumbBar.addEventListener("wheel",function(a){a.preventDefault();a.stopPropagation()},!0)},_addBreadcrumbBar:function(){this._breadcrumbBar=a.create("div",{className:this._BREADCRUMB_BAR_CLASS});this._navigationBar.placeAt(this._breadcrumbBar,"first");this._navigationBar.startup();a.place(this._breadcrumbBar,
this._breadcrumbBarContainer,"last")},_addStepOutButton:function(){var b=a.create("div",{"class":this._STEP_OUT_CONTAINER_CLASS});this._stepOutButton=a.create("div",{"class":this._STEP_OUT_BUTTON_CLASS});a.place(this._stepOutButton,b,"first");a.place(b,this._breadcrumbBarContainer,"last");this._stepOutButtonListeners.push(n(this._stepOutButton,"click",c.hitch(this,function(){this._stepOutCallback()})));this._stepOutButtonListeners.push(n(this._stepOutButton,"mouseover",c.hitch(this,function(){this.onStepOutHover()})));
this._stepOutButtonListeners.push(n(this._stepOutButton,"mouseout",c.hitch(this,function(){this.onStepOutHoverAway()})));this._updateStepOutButton()},_updateStepOutButton:function(){this._stepOutButtonTooltip&&this._stepOutButtonTooltip.destroy();var a=this._getPrunedStackFramesFromModel(),b=x.styleAsCode(a[0].getName()),b=r.substitute(q.stepOutLabel,{"0":b}),a=this._buildDescriptionString(a[0].getName(),q.stepOutDescriptionForFunctions,q.stepOutDescriptionGeneric),c=this._actionService.getAction(this._debuggerManager.DEBUG_STEP_OUT_ACTION_ID);
this._stepOutButtonTooltip=new w({targetNode:this._stepOutButton,label:b,description:a,keyBinding:c.shortcut,cssClasses:this._TOOLTIP_CLASS})},_addCallStackButton:function(){var b=a.create("div",{"class":this._CALL_STACK_CONTAINER_CLASS});this._callStackButton=a.create("div",{"class":this._CALL_STACK_BUTTON_CLASS});a.place(this._callStackButton,b,"first");a.place(b,this._breadcrumbBarContainer,"last");this._stackContextMenu=new t({targetNodes:[this._callStackButton],onOpen:c.hitch(this,function(){k.add(this._callStackButton,
this._CALL_STACK_BUTTON_ACTIVE_CLASS);this._focusService.setBlur()}),onClose:c.hitch(this,function(){k.remove(this._callStackButton,this._CALL_STACK_BUTTON_ACTIVE_CLASS);this._focusService.setFocus()})});k.add(this._stackContextMenu.domNode,this._DROP_DOWN_MENU_CLASS);var d=!1;this._callStackButtonListeners.push(n(this._callStackButton,"mousedown",c.hitch(this,function(){d=this._stackContextMenu.isMenuOpen()})));this._callStackButtonListeners.push(n(this._callStackButton,"mouseup",c.hitch(this,function(){d||
this._openStackMenu(this._callStackButton)})));this._callStackButtonTooltip=new w({targetNode:this._callStackButton,label:q.functionCallStackLabel,description:q.functionCallStackDescription,cssClasses:this._TOOLTIP_CLASS})},_addOverflowIndicator:function(){this._overflowIndicator=a.create("div",{"class":this._OVERFLOW_INDICATOR_CLASS});a.place(this._overflowIndicator,this._breadcrumbBarContainer,"last");this._updateOverflowIndicatorVisibility()},_updateNavigationBarScrollLeft:function(){var a=this._breadcrumbBar,
b=a.scrollWidth-a.clientWidth;this._navigationMaxScrollLeft!==b&&(this._navigationMaxScrollLeft=a.scrollLeft=b)},_removeBreadcrumbBarContainer:function(){this._breadcrumbBarContainer&&(this._breadcrumbBarContainerMouseListener.remove(),this._breadcrumbBarContainerMouseListener=null,this._callStackButtonListeners.forEach(function(a){a.remove()}),this._callStackButtonListeners=[],this._callStackButtonTooltip.destroy(),this._callStackButtonTooltip=null,this._stepOutButtonListeners.forEach(function(a){a.remove()}),
this._stepOutButtonListeners=[],this._stepOutButtonTooltip.destroy(),this._stepOutButtonTooltip=null,a.destroy(this._stepOutButton),this._stepOutButton=null,this._destroyBreadcrumbTooltips(),this._destroyStackMenuItems(),this._stackContextMenu.destroy(),this._stackContextMenu=null,this._callStackButton&&(g.hide(this._callStackButton),this._callStackButton=null),a.destroy(this._overflowIndicator),a.destroy(this._disablementOverlay),a.destroy(this._breadcrumbBar),a.destroy(this._breadcrumbBarContainer),
this._currentFrameDiv=this._breadcrumbBarContainer=this._breadcrumbBar=this._disablementOverlay=this._overflowIndicator=null)},_updateOverflowIndicatorVisibility:function(){var a=this._breadcrumbBar,b=a.scrollLeft;k.toggle(this._overflowIndicator,this._DISABLED_CLASS,!(a.clientWidth<a.scrollWidth&&b>=this._OVERFLOW_TOLERANCE))},_openStackMenu:function(a){this._destroyStackMenuItems();var b=this._model.getActiveWorkspaceIndex();this._getPrunedStackFramesFromModel().forEach(function(a,d){var e=new u({text:a.getName()});
this._menuItemClickListeners.push(e.on("click",c.hitch(this,function(){b!==d&&this._changeWorkspaceCallback(d)})));k.toggle(e.domNode,this._IS_ACTIVE_CLASS,b===d);k.add(e.domNode,this._DROP_DOWN_MENU_ITEM_CLASS);this._stackContextMenu.addChild(e)},this);a=a.getBoundingClientRect();this._stackContextMenu.open({x:a.right,y:a.bottom+this._DROP_DOWN_MENU_OFFSET_Y})},_destroyStackMenuItems:function(){this._menuItemClickListeners.forEach(function(a){a.remove()});this._menuItemClickListeners=[];var a=this._stackContextMenu;
a.getChildren().forEach(function(b){b.destroy();a.removeChild(b)})},onStepOutHover:function(){},onStepOutHoverAway:function(){},_getPrunedStackFramesFromModel:function(){var a=this._model.getStackFrames();return this._isLiveEditorEval?a.slice(0,-1):a},hideStackBar:function(){this._hideTray(c.hitch(this,"_removeBreadcrumbBarContainer"))},_showTray:function(){switch(this._trayState){case this._TRAY_STATES.HIDDEN:this._borderContainer.addWithProperties(this._breadcrumbBarTray,{region:this._TOP_REGION,
maxSize:this._TRAY_MAX_HEIGHT,isResizable:!0,layoutOrder:0});this._borderContainer.setFreeDimension("top",this._TRAY_MIN_HEIGHT);this._breadcrumbBarTray.startup();this._animateShowTray();break;case this._TRAY_STATES.DISAPPEARING:this._currentTrayAnimation.stop(),this._animateShowTray()}},_animateShowTray:function(){this._trayState=this._TRAY_STATES.APPEARING;this._currentTrayAnimation=d.animateProperty({node:this._breadcrumbBarTray.domNode,duration:this._BREADCRUMB_BAR_TRAY_ANIM_DURATION,easing:m.quadInOut,
properties:{height:this._TRAY_MAX_HEIGHT},onAnimate:c.hitch(this,"_resizeDuringAnimation"),onEnd:c.hitch(this,function(){this._trayState=this._TRAY_STATES.VISIBLE;this._currentTrayAnimation=null})}).play()},_hideTray:function(a){switch(this._trayState){case this._TRAY_STATES.VISIBLE:this._animateHideTray(a);break;case this._TRAY_STATES.APPEARING:this._currentTrayAnimation.stop(),this._animateHideTray(a)}},_animateHideTray:function(a){this._trayState=this._TRAY_STATES.DISAPPEARING;this._currentTrayAnimation=
d.animateProperty({node:this._breadcrumbBarTray.domNode,duration:this._BREADCRUMB_BAR_TRAY_ANIM_DURATION,easing:m.quadInOut,properties:{height:this._TRAY_MIN_HEIGHT},onAnimate:c.hitch(this,"_resizeDuringAnimation"),onEnd:c.hitch(this,function(){this._borderContainer.removeChild(this._breadcrumbBarTray);this._featureInterface.resize();this._trayState=this._TRAY_STATES.HIDDEN;this._currentTrayAnimation=null;a()})}).play()},_resizeDuringAnimation:function(a){a=parseInt(a.height,10);this._borderContainer.setFreeDimension("top",
a);this._featureInterface.resize()}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(h){var f={linear:function(f){return f},quadIn:function(f){return Math.pow(f,2)},quadOut:function(f){return-1*f*(f-2)},quadInOut:function(f){f*=2;return 1>f?Math.pow(f,2)/2:-1*(--f*(f-2)-1)/2},cubicIn:function(f){return Math.pow(f,3)},cubicOut:function(f){return Math.pow(f-1,3)+1},cubicInOut:function(f){f*=2;return 1>f?Math.pow(f,3)/2:(Math.pow(f-2,3)+2)/2},quartIn:function(f){return Math.pow(f,4)},
quartOut:function(f){return-1*(Math.pow(f-1,4)-1)},quartInOut:function(f){f*=2;return 1>f?Math.pow(f,4)/2:-0.5*(Math.pow(f-2,4)-2)},quintIn:function(f){return Math.pow(f,5)},quintOut:function(f){return Math.pow(f-1,5)+1},quintInOut:function(f){f*=2;return 1>f?Math.pow(f,5)/2:(Math.pow(f-2,5)+2)/2},sineIn:function(f){return-1*Math.cos(f*(Math.PI/2))+1},sineOut:function(f){return Math.sin(f*(Math.PI/2))},sineInOut:function(f){return-1*(Math.cos(Math.PI*f)-1)/2},expoIn:function(f){return 0==f?0:Math.pow(2,
10*(f-1))},expoOut:function(f){return 1==f?1:-1*Math.pow(2,-10*f)+1},expoInOut:function(f){if(0==f)return 0;if(1==f)return 1;f*=2;if(1>f)return Math.pow(2,10*(f-1))/2;--f;return(-1*Math.pow(2,-10*f)+2)/2},circIn:function(f){return-1*(Math.sqrt(1-Math.pow(f,2))-1)},circOut:function(f){return Math.sqrt(1-Math.pow(f-1,2))},circInOut:function(f){f*=2;return 1>f?-0.5*(Math.sqrt(1-Math.pow(f,2))-1):0.5*(Math.sqrt(1-Math.pow(f-2,2))+1)},backIn:function(f){return Math.pow(f,2)*(2.70158*f-1.70158)},backOut:function(f){f-=
1;return Math.pow(f,2)*(2.70158*f+1.70158)+1},backInOut:function(f){f*=2;if(1>f)return Math.pow(f,2)*(3.5949095*f-2.5949095)/2;f-=2;return(Math.pow(f,2)*(3.5949095*f+2.5949095)+2)/2},elasticIn:function(f){if(0==f||1==f)return f;f-=1;return-1*Math.pow(2,10*f)*Math.sin((f-0.075)*2*Math.PI/0.3)},elasticOut:function(f){return 0==f||1==f?f:Math.pow(2,-10*f)*Math.sin((f-0.075)*2*Math.PI/0.3)+1},elasticInOut:function(f){if(0==f)return 0;f*=2;if(2==f)return 1;var e=0.3*1.5,d=e/4;if(1>f)return f-=1,-0.5*Math.pow(2,
10*f)*Math.sin((f-d)*2*Math.PI/e);f-=1;return 0.5*Math.pow(2,-10*f)*Math.sin((f-d)*2*Math.PI/e)+1},bounceIn:function(g){return 1-f.bounceOut(1-g)},bounceOut:function(f){f<1/2.75?f=7.5625*Math.pow(f,2):f<2/2.75?f=7.5625*Math.pow(f-1.5/2.75,2)+0.75:f<2.5/2.75?(f-=2.25/2.75,f=7.5625*Math.pow(f,2)+0.9375):(f-=2.625/2.75,f=7.5625*Math.pow(f,2)+0.984375);return f},bounceInOut:function(g){return 0.5>g?f.bounceIn(2*g)/2:f.bounceOut(2*g-1)/2+0.5}};h.setObject("dojo.fx.easing",f);return f})},"mw-menu/ContextMenu":function(){define("dojo/_base/declare dojo/_base/lang dijit/focus dojo/keys dojo/on dojo/query dijit/registry dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container mw-menu/mixins/KeyNavMixin mw-menu/mixins/OnOpenMixin mw-menu/mixins/OnCloseMixin mw-menu/mixins/ContainerFocusMixin mw-menu/mixins/MenuFocusMixin mw-menu/mixins/property/MaxHeightMixin mw-mixins/property/TagMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/Menu.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x){return h(w.validate([k,q,l,m,n,p,r,s,t,u,v]),{baseClass:"mwWidget mwContextMenu",disabled:!1,templateString:x,postCreate:function(){this.inherited(arguments);this._activeEventListeners=[];this._onOpenEventListenersInfo=[{event:"wheel",target:document.body,callback:f.hitch(this,"_onWheel")},{event:"mousewheel",target:document.body,callback:f.hitch(this,"_onWheel")},{event:"mousedown",target:document.body,callback:f.hitch(this,function(a){this._shouldCloseMenu(a.target)&&
this.closeMenu()}),useCapture:!0},{event:"mouseenter",target:document.body,callback:f.hitch(this,this._onMouseMovement),useCapture:!0},{event:"mouseover",target:document.body,callback:f.hitch(this,this._onMouseMovement),useCapture:!0},{event:"keydown",target:this.domNode,callback:f.hitch(this,function(a){a.keyCode===e.ESCAPE&&(this.closeMenu(),document.body.classList.contains("mwHasFocusManager")?this.emit("restorefocus"):g.focus(this._previousFocusNode))})},{event:"change",target:this.domNode,callback:f.hitch(this,
function(a){a=b.getEnclosingWidget(a.target);a.domNode.hasAttribute("data-composite-child")&&(a=b.byNode(document.getElementById(a.domNode.getAttribute("data-composite-primary-id"))));(a.get("closeMenuOnClick")||void 0===a.get("closeMenuOnClick"))&&this.closeMenu()})},{event:"close",target:this.domNode,callback:f.hitch(this,this._cleanupOnClose)}];this.own(d(this.domNode,"open",f.hitch(this,this._handleOpen)));this.set("disabled",this.disabled)},_setDisabledAttr:function(a){if("boolean"===typeof value)throw Error("Expected 'disabled' property to be a boolean");
a?this._removeRightClickEventListener():this._addRightClickEventListener();this._set("disabled",a)},_addRightClickEventListener:function(){this._rightClickListener||(this._rightClickListener=d(document.body,"contextmenu",f.hitch(this,this._createCallback(f.hitch(this,this._onContextMenu),f.hitch(this,this._onDoubleContextMenu),200,!0))),this.own(this._rightClickListener))},_removeRightClickEventListener:function(){this._rightClickListener&&(this._rightClickListener.remove(),delete this._rightClickListener)},
_addOnOpenEventListeners:function(){if(this._activeEventListeners.length<this._onOpenEventListenersInfo.length)for(var a=0;a<this._onOpenEventListenersInfo.length;a++)this._onOpenEventListenersInfo[a].useCapture?(this._onOpenEventListenersInfo[a].target.addEventListener(this._onOpenEventListenersInfo[a].event,this._onOpenEventListenersInfo[a].callback,!0),this._activeEventListeners[a]=[{target:this._onOpenEventListenersInfo[a].target,event:this._onOpenEventListenersInfo[a].event,callback:this._onOpenEventListenersInfo[a].callback,
useCapture:!0}]):this._activeEventListeners[a]=this.own(d(this._onOpenEventListenersInfo[a].target,this._onOpenEventListenersInfo[a].event,this._onOpenEventListenersInfo[a].callback))},_removeOnOpenEventListeners:function(){if(0<this._activeEventListeners.length)for(;0<this._activeEventListeners.length;){var a=this._activeEventListeners.pop()[0];a.useCapture?a.target.removeEventListener(a.event,a.callback,!0):a.remove()}},_onWheel:function(a){this.isDescendant(a.target)||this.closeMenu()},isMenuOpen:function(){return this.domNode&&
this.domNode.parentElement&&"none"!==this.domNode.parentElement.style.display},open:function(a){this.openMenu(a)},openMenu:function(a){if(!this.get("disabled")){this._computeTargetNodes(a);a.doNotClose=this._nodeMatchesSelector(a.target,".galleryPopup, .galleryPopup  *, .mwSectionPopup, .mwSectionPopup *");if(a.target){var c=b.getEnclosingWidget(a.target);c&&c.id&&this.domNode.setAttribute("data-target-id",c.id)}if("contextmenu"===a.type)this._handleRightClick(a);else if(a.target instanceof HTMLElement&&
isNaN(a.x)&&isNaN(a.y))this._handleOpenWithDomNode(a);else if(!a.target&&!isNaN(a.x)&&!isNaN(a.y))this._handleOpenWithXY(a);else throw Error("Invalid parameters passed");}},_onMouseMovement:function(a){this.isDescendant(a.target)||(a.stopImmediatePropagation(),a.preventDefault())},_nodeMatchesSelector:function(a,b){var c=!1;a&&b&&(a.matches?c=a.matches(b):a.matchesSelector?c=a.matchesSelector(b):a.webkitMatchesSelector?c=a.webkitMatchesSelector(b):a.mozMatchesSelector?c=a.mozMatchesSelector(b):a.msMatchesSelector?
c=a.msMatchesSelector(b):a.oMatchesSelector&&(c=a.oMatchesSelector(b)));return c},_handleRightClick:function(a){var b;if(0<=this._contextMenuNodes.indexOf(a.target)){if(this.willOpenCallback&&(b=this.willOpenCallback({target:a.target,x:a.clientX,y:a.clientY})))return;this._previousFocusNode=a.target;1>a.pageX&&1>a.pageY?this._showMenu({around:a.target,popup:this,doNotClose:a.doNotClose}):this._showMenu({x:a.pageX,y:a.pageY,popup:this,doNotClose:a.doNotClose})}},_handleOpenWithDomNode:function(a){var b;
if(0<=this._contextMenuNodes.indexOf(a.target)){if(this.willOpenCallback&&(b=this.willOpenCallback({target:a})))return;this._previousFocusNode=a.target;this._showMenu({around:a.target,popup:this,doNotClose:a.doNotClose})}},_handleOpenWithXY:function(a){var b;if(this.willOpenCallback&&(b=this.willOpenCallback({target:a.target})))return;this._showMenu({x:a.x,y:a.y,popup:this})},_showMenu:function(b){a.open(b)},_handleOpen:function(){this._addOnOpenEventListeners();this._handleEmptyContextMenu()},_handleEmptyContextMenu:function(){0===
this.domNode.children.length?this.domNode.parentElement&&(this.domNode.parentElement.style.display="none"):this.domNode.parentElement&&(this.domNode.parentElement.style.display="")},close:function(){this.closeMenu()},closeMenu:function(){a.close(this)},_cleanupOnClose:function(){this._removeOnOpenEventListeners();this.domNode&&(this.domNode.removeAttribute("data-target-id"),this.domNode.parentNode&&(this.domNode.parentNode.style.overflowX="visible",this.domNode.parentNode.style.overflowY="visible"))},
_shouldCloseMenu:function(a){var b=!0;if(!this.isMenuOpen())return!1;if(a&&(this.isDescendant(a)||this.targetNodes&&0<=this.targetNodes.indexOf(a)))b=!1;return b},_setTargetNodesAttr:function(a){if(null===a||void 0===a)a=[];this._set("targetNodes",a)},_computeTargetNodes:function(a){this._contextMenuNodes=[];this.targetNodes&&this.targetNodes.forEach(function(b){"string"===typeof b?c(b).forEach(function(a){var b=a.querySelectorAll("*");Object.keys(b).forEach(function(a){this._contextMenuNodes.push(b[a])},
this);this._contextMenuNodes.push(a)},this):"function"===typeof b?(b=b(a))&&(1<b.length?b.forEach(function(a){this._contextMenuNodes.push(a)}.bind(this)):this._contextMenuNodes.push(b)):this._contextMenuNodes.push(b)},this);return this._contextMenuNodes},_onContextMenu:function(a){a.preventDefault();this.openMenu(a)},_onDoubleContextMenu:function(a){a.preventDefault()},_getTargetNode:function(a){null!==a&&a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));
return a},_createCallback:function(a,b,c,d){var e=0,f;void 0===c&&(c=200);return function(g){!0===d&&-0<=this._computeTargetNodes(g).indexOf(g.target)&&g.preventDefault();e+=1;1===e?f=setTimeout(function(){e=0;a(g)},c):2===e&&(clearTimeout(f),e=0,b(g))}},destroy:function(){this._removeOnOpenEventListeners();this.inherited(arguments)}})})},"mw-menu/mixins/KeyNavMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/keys","mw-menu/mixins/ContainerFocusMixin"],function(h,f,
g,e,d){h=h(null,{postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",f.hitch(this,"_onKeyDown")),g(this.domNode,"synkeydown",f.hitch(this,"_onKeyDown")))},_onKeyDown:function(c){c.keyCode===e.DOWN_ARROW?(this._handleFocusNext(c.target),c.preventDefault()):c.keyCode===e.UP_ARROW?(this._handleFocusPrevious(c.target),c.preventDefault()):c.keyCode===e.PAGE_UP||c.keyCode===e.HOME?(this._moveToFirstChild(c.target),c.preventDefault()):c.keyCode===e.PAGE_DOWN||c.keyCode===e.END?
(this._moveToLastChild(c.target),c.preventDefault()):c.keyCode===e.TAB&&(this._handleFocusNext(c.target),c.preventDefault())},_handleFocusNext:function(c){(null===c||this._isActiveElement(c))&&this.focusNext(this._getTargetNode(c))},_handleFocusPrevious:function(c){(null===c||this._isActiveElement(c))&&this.focusPrevious(this._getTargetNode(c))},_moveToFirstChild:function(){this.focusFirst()},_moveToLastChild:function(){this.focusLast()},_getTargetNode:function(c){return c},_isActiveElement:function(c){return c.hasAttribute("data-composite-primary")?
c.contains(document.activeElement):c===document.activeElement}});h._dependencies=[{mixin:d,orderDependent:!1}];return h})},"mw-menu/mixins/ContainerFocusMixin":function(){define(["dojo/_base/declare","mw-dom-utils/domUtils","dijit/focus"],function(h,f,g){return h(null,{isCyclic:!0,_setIsCyclicAttr:function(e){if("boolean"!==typeof e)throw Error("'isCyclic' property expects a boolean value.");this._set("isCyclic",e)},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwContainerFocusMixin");
this.focusNode=this.focusNode||this.domNode},focus:function(e){this.inherited(arguments);e?this._focusNearestFocusableNode(e,!0,"next"):this.focusNode&&f.isFocusable(this.focusNode)&&g.focus(this.focusNode)},focusNext:function(e){this.inherited(arguments);e||(e=document.activeElement&&f.isDescendant(document.activeElement,this.domNode)?document.activeElement:this.domNode);this._focusNearestFocusableNode(e,!1,"next")},focusPrevious:function(e){this.inherited(arguments);e||(e=document.activeElement&&
f.isDescendant(document.activeElement,this.domNode)?document.activeElement:this.domNode);this._focusNearestFocusableNode(e,!1,"previous")},focusFirst:function(){this.inherited(arguments);this._focusNearestFocusableNode(null,!1,"next")},focusLast:function(){this.inherited(arguments);this._focusNearestFocusableNode(null,!1,"previous")},_focusNearestFocusableNode:function(e,d,c){e=this._getAppropriateNodeFromInput(e);if(0<f.getChildren(this.domNode).length&&(null==e||f.isDescendant(e,this.domNode,!0)))e=
this._findFocusableChild(e,d,c),null!==e&&(f.isElementInViewport(e)||e.scrollIntoView(!0),g.focus(e))},_findFocusableChild:function(e,d,c){var b=!1,a,g=!1;e=this._getAppropriateNodeFromInput(e);null==d&&(d=!0);if(!c||0>["next","previous"].indexOf(c))c="next";if(e===this.domNode)b=!0;else for((a=e)&&!d&&(a=f.getAdjacentElement(a,c));a&&!f.isFocusable(a);){if(a===e){if(g)return null;g=!0}a=f.getAdjacentElement(a,c)}if(b||!a&&this.isCyclic||null==e){switch(c){case "next":a=f.getFirstChild(this.domNode);
break;case "previous":a=f.getLastChild(this.domNode)}a=this._findFocusableChild(a,!0,c)}a&&(e=this._getAppropriateNodeFromInput(a));return e},_getAppropriateNodeFromInput:function(e){if(null==e)return null;e=e.focusNode||e.domNode||e;if(!(e instanceof Element))throw Error("Input argument expects a Widget or DOM node.");return e}})})},"mw-dom-utils/domUtils":function(){define(["dojo/sniff"],function(h){var f={},g={INVALID_ELEMENT:"The input parameter must be an instance of an Element object.",INVALID_STRING:"The input parameter must be of type 'string'.",
INVALID_BOOLEAN:"The input parameter must be of type 'boolean'.",INVALID_OBJECT:"The input parameter must be of type 'object'.",INVALID_FOCUS_EVENT:"The input parameter must be a 'FocusEvent' object.",INVALID_STYLE:"The style specified is invalid.",INVALID_VALUE:"The value specified is invalid.",INTEGER_INDEX:"index argument expects an integer.",STRING_INDEX:"index argument expects an string.",SPOUSE_NODE:"A function which returns a spouse node if it exists must be provided."},e=function(a){if(!(a instanceof
Element))throw Error(g.INVALID_ELEMENT);},d=function(a){if(-1===["String","string"].indexOf(typeof a))throw Error(g.INVALID_STRING);},c=function(a){if(-1===["Boolean","boolean"].indexOf(typeof a))throw Error(g.INVALID_BOOLEAN);},b=function(a){if(-1===["Object","object"].indexOf(typeof a))throw Error(g.INVALID_OBJECT);};f._qeSetup=function(){f._qeTools={};f._qeTools.errorMessages=g;f._qeTools.validateElement=e;f._qeTools.validateString=d;f._qeTools.validateBoolean=c;f._qeTools.validateObject=b;f._qeTools.overrideErrorMessaged=
function(a){g=a};f._qeTools.overrideValidateElement=function(a){e=a};f._qeTools.overrideValidateString=function(a){d=a};f._qeTools.overrideValidateBoolean=function(a){c=a};f._qeTools.overrideValidateObject=function(a){b=a}};f.isLeftMouseButton=function(a){return!0===a.synthetic&&h("trident")?1===a.button:0===a.button};f.parseFocusEvent=function(a){if(!(a instanceof FocusEvent))throw Error(g.INVALID_FOCUS_EVENT);var b={};b.lostFocusNode=a.target;b.gainedFocusNode=h("chrome")||h("safari")?a.relatedTarget:
document.activeElement;b.type=a.type;b.eventdata=a;return b};f.getParent=function(a){e(a);return a.parentNode};f.findParentNode=function(a,b,c){var d=null,e;a.domNode&&(a=a.domNode);for(;a&&a!==window.document;){if(c){if(a.hasAttribute(b)&&a.getAttribute(b)===c){d=a;break}}else{if(a.hasAttribute(b)){d=a;break}if(a.classList.contains(b)){d=a;break}}a=(e=a.getAttribute("dijitpopupparent"))?document.getElementById(e):a.parentNode}return d};f.getNodeType=function(a){e(a);return{1:"Element",3:"Text",7:"Processing Instruction",
8:"Comment",9:"Document",10:"Document Type",11:"Document Fragment"}[a.nodeType]};f.getById=function(a){d(a);return window.document.getElementById(a)};f.getByClass=function(a){d(a);return window.document.getElementsByClassName(a)};f.getByAttr=function(a){d(a);return window.document.querySelectorAll("["+a+"]")};f.getByAttrValue=function(a,b){d(a);d(b);return window.document.querySelectorAll("["+a+"\x3d"+b.replace(/['".\\]/g,"\\$\x26").replace(/[\\]/g,"\\$\x26")+"]")};f.getByName=function(a){d(a);return window.document.getElementById("[name\x3d"+
a+"]")};f.getByTag=function(a){d(a);return window.document.getElementsByTagName(a)};f.matchesSelector=function(a,b){if(!a||!b)return!1;e(a);d(b);return a[a.msMatchesSelector?"msMatchesSelector":"matches"](b)};f.getComputedStyle=function(a,b){e(a);return b?(d(b),window.getComputedStyle(a,null)[b]):window.getComputedStyle(a,null)};f.getStyle=function(a,b){e(a);d(b);if(void 0===a.style[b])throw Error(g.INVALID_STYLE);return a.style[b]};f.setStyle=function(a,b,c){e(a);d(b);d(c);a.style[b]=c;if(a.style[b]!==
c)throw Error(g.INVALID_VALUE);};f.hasAttr=function(a,b){e(a);d(b);return a.hasAttribute(b)};f.hasAttrValue=function(a,b,c){e(a);d(b);d(c);return a.hasAttribute(b)&&a.getAttribute(b)===c};f.getAttr=function(a,b){e(a);d(b);return a.getAttribute(b)};f.setAttr=function(a,b,c){e(a);d(b);d(c);a.setAttribute(b,c)};f.addAttr=function(a,b){e(a);d(b);a.setAttribute(b,"")};f.removeAttr=function(a,b){e(a);d(b);a.removeAttribute(b)};f.getClasses=function(a){e(a);return a.classList?a.classList:{_element:a,_getClassArray:function(){return this._element.className.split(" ")},
_updateClassName:function(a){this._element.className=a.join(" ");this.length=a.length},length:a.className.split(" ").length,item:function(a){return this._getClassArray()[a]},contains:function(a){for(var b=this._getClassArray(),c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},add:function(a){var b=this._getClassArray();b.push(a);this._updateClassName(b)},remove:function(a){var b=this._getClassArray();a=b.indexOf(a);0<=a&&(b.splice(a,1),this._updateClassName(b))},toggle:function(a){if(this.contains(a))return this.remove(a),
!1;this.add(a);return!0}}};f.getClass=function(a,b){if(null==b||"number"!==typeof b||0>b||0!==b%1)throw Error(g.INTEGER_INDEX);return f.getClasses(a).item(b)};f.addClass=function(a,b){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return f.getClasses(a).add(b)};f.removeClass=function(a,b){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return f.getClasses(a).remove(b)};f.toggleClass=function(a,b,c){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return c?f.getClasses(a).toggle(b,
c):f.getClasses(a).toggle(b)};f.containsClass=function(a,b){if(null==b||"string"!==typeof b)throw Error(g.STRING_INDEX);return f.getClasses(a).contains(b)};f.classCount=function(a){return f.getClasses(a).length};f.getChildCount=function(a){e(a);return a.childElementCount};f.getChildren=function(a){e(a);return a.children};f.isDescendant=function(a,b,c){e(a);e(b);if(c&&a===b)return!0;for(;a&&a!==window.document;)if(a=f.getParent(a),a===b)return!0;return!1};f.isDescendantOrInLaw=function(a,b,c,d){var e;
if("function"!==typeof c)throw Error(g.SPOUSE_NODE);e=f.isDescendant(a,b,d);!1===e&&(a=c(a)||a.parentNode)&&a!==window.document&&(e=f.isDescendantOrInLaw(a,b,c,d));return e};f.getFirstChild=function(a){e(a);return!f.isContainer(a)||1>f.getChildCount(a)?null:f.getChildren(a)[0]};f.getLastChild=function(a){var b;e(a);b=f.getChildCount(a);return!f.isContainer(a)||1>b?null:f.getChildren(a)[b-1]};f.isContainer=function(a){e(a);return 0<f.getChildCount(a)};f.getAdjacentElement=function(a,b){e(a);if(!b||
0>["next","previous"].indexOf(b))b="next";return a=a[b+"Sibling"]};f.getElementPositionInViewPort=function(a){e(a);a=a.getBoundingClientRect();return{x:a.left,y:a.top,w:a.right-a.left,h:a.bottom-a.top}};f.getElementPositionOnPage=function(a){e(a);a=f.getElementPositionInViewPort(a);a.x+=window.pageXOffset;a.y+=window.pageYOffset;return a};f.setPositionExtents=function(a,c){b(c);var d={};d.top=c.t?c.t:c.top?c.top:"auto";d.right=c.r?c.r:c.right?c.right:"auto";d.bottom=c.b?c.b:c.bottom?c.bottom:"auto";
d.left=c.l?c.l:c.left?c.left:"auto";["top","right","bottom","left"].forEach(function(b){f.setStyle(a,b,d[b])})};f.isFocusable=function(a){e(a);return a&&!a.hasAttribute("disabled")&&(!a.hasAttribute("aria-disabled")||"true"!==a.getAttribute("aria-disabled"))&&"none"!==a.style.display&&!a.hasAttribute("data-refuse-key-nav")};f.isElementInViewport=function(a,b){var c,d,f,g;e(a);c=a.getBoundingClientRect();d=window.innerWidth||document.documentElement.clientWidth;f=window.innerHeight||document.documentElement.clientHeight;
g=function(a,b){return document.elementFromPoint(a,b)};return 0>=c.width||0>=c.height||0>c.right||0>c.bottom||c.left>d||c.top>f?!1:2>c.width&&2>c.height?(d=c.left+(c.right-c.left)/2,f=c.top+(c.bottom-c.top)/2,a.contains(g(d,f))):2>c.width?(d=c.left+(c.right-c.left)/2,b?a.contains(g(d,c.top+1))&&a.contains(g(d,c.bottom-1)):a.contains(g(d,c.top+1))||a.contains(g(d,c.bottom-1))):2>c.height?(f=c.top+(c.bottom-c.top)/2,b?a.contains(g(c.left+1,f))&&a.contains(g(c.right-1,f)):a.contains(g(c.left+1,f))||
a.contains(g(c.right-1,f))):b?a.contains(g(c.left+1,c.top+1))&&a.contains(g(c.right-1,c.top+1))&&a.contains(g(c.right-1,c.bottom-1))&&a.contains(g(c.left+1,c.bottom-1)):a.contains(g(c.left+1,c.top+1))||a.contains(g(c.right-1,c.top+1))||a.contains(g(c.right-1,c.bottom-1))||a.contains(g(c.left+1,c.bottom-1))};f._obscuredProps={};f._obscuredProps.sawPosAbsolute=!1;f._obscuredProps.elementPosition=null;f.isElementObscuredByParent=function(a,b){var c,d,g,h;e(a);h=!1;if(g=f.getParent(a))if(b||(f._obscuredProps.elementPosition=
f.getElementPositionOnPage(a),f._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(a,null).position),c=f._obscuredProps.elementPosition,d=f._obscuredProps.sawPosAbsolute,g&&"Element"===f.getNodeType(g)&&"BODY"!==g.nodeName){var p=f.getElementPositionOnPage(g);g=window.getComputedStyle(g,null);/relative|absolute/.test(g.position)&&(d=f._sawPosAbsolute=!1);!d&&/hidden|auto|scroll/.test(g.overflow)&&(h=c.y<p.y||c.y+c.h>p.y+p.h||c.x<p.x||c.x+c.w>p.x+p.w)}return h};f.isElementObscuredByAncestor=
function(a){var b,c;e(a);b=!1;f._obscuredProps.elementPosition=f.getElementPositionOnPage(a);for(f._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(a,null).position;(c=f.getParent(a))&&"Element"===f.getNodeType(c)&&"BODY"!==c.nodeName;)b=f.isElementObscuredByParent(a,!0),a=c;return b};return f})},"mw-menu/mixins/OnOpenMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry"],function(h,f,g){return h(null,{_focusOnOpen:!0,_matchMinWidthToInvokingWidget:!0,
onOpen:function(){setTimeout(f.hitch(this,function(){if(this._focusOnOpen&&this.focus){var e=window.pageXOffset,d=window.pageYOffset;this.focus();window.scrollTo(e,d)}}),0);this._emitOpenEvent();this._updateLayout()},_updateLayout:function(){this._removeAllWidths();this._matchMinWidthToInvokingWidget&&this._updateWidth();this._updateHeight()},_removeAllWidths:function(){this.domNode.style.width="";this.getChildren().forEach(function(e){e.domNode.style.width=""})},_updateWidth:function(){if(this._invokingWidget&&
this.domNode.offsetWidth<this._invokingWidget.domNode.offsetWidth){var e=0;this.domNode.parentElement&&(e=g.getMarginBox(this.domNode.parentElement).w-g.getMarginBox(this.domNode).w);this.domNode.style.width=this._invokingWidget.domNode.offsetWidth-e+"px"}},_updateHeight:function(){if(this.domNode&&this.domNode.parentElement&&this.domNode.parentElement.classList&&this.domNode.parentElement.classList.contains("dijitPopup")){var e,d=this.domNode,c=d.parentElement;e=window.getComputedStyle(d,null);var b=
window.getComputedStyle(c,null),b=parseInt(e.borderTopWidth)+parseInt(e.borderBottomWidth)+parseInt(b.borderTopWidth)+parseInt(b.borderBottomWidth);e="ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints?window.innerHeight||document.documentElement.clientHeight:document.documentElement.clientHeight;""!==d.style.height&&(d.style.height="");c.offsetTop+d.clientHeight>e&&(d.style.height=e-c.offsetTop-b+"px");c.style.overflow="hidden";c.style.overflowX=
"hidden";c.style.overflowY="hidden"}},_setFocusOnOpenAttr:function(e){if("boolean"!==typeof e)throw Error("'focusOnOpen' property expects a boolean value.");this._set("_focusOnOpen",e)},_emitOpenEvent:function(){this.emit("open",{})}})})},"mw-menu/mixins/OnCloseMixin":function(){define(["dojo/_base/declare","mw-menu/mixins/OnOpenMixin"],function(h,f){var g=h(null,{_closeEventData:{},onClose:function(){this._emitCloseEvent();this._closeEventData={}},_emitCloseEvent:function(){this.emit("close",this._closeEventData)}});
g._dependencies=[{mixin:f,orderDependent:!1}];return g})},"mw-menu/mixins/MenuFocusMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/has dojo/touch dojo/keys dijit/popup dijit/registry mw-dom-utils/domUtils mw-utils/widgetUtils mw-menu/mixins/ContainerFocusMixin".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){var q=e("touch")&&!window.PointerEvent;h=h(null,{postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwMenuFocusMixin");this.focusNode=this.focusNode||
this.domNode;this.own(g(this.domNode,"close",f.hitch(this,this._handleClose)))},focus:function(){this.inherited(arguments);this._addFocusListeners()},_focusLost:function(b){setTimeout(f.hitch(this,function(){if(l.isMenuOpen(this)){var c=b instanceof FocusEvent?a.getEnclosingWidget(k.parseFocusEvent(b).gainedFocusNode):a.getEnclosingWidget(b.target),d,e,f;(d=c?c.focusNode&&c.focusNode instanceof Element?c.focusNode:c.domNode?c.domNode:null:null)&&d.hasAttribute("data-composite-child")&&(c=a.getEnclosingWidget(document.getElementById(d.getAttribute("data-composite-primary-id"))));
d=this.isDescendant(c,this);e=c&&c.domNode&&-1<[].slice.call(document.querySelectorAll(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu *")).indexOf(c.domNode);f=this._invokingWidget&&c===this._invokingWidget;(!c||!d&&!e&&!f)&&this._focusChange(c)}}),0)},_handleKeydown:function(a){a.keyCode===c.ESCAPE&&this._focusLost(a)},_handleClose:function(){this._removeFocusListeners()},_addFocusListeners:function(){this.focusNode&&(this._focusNodeBlurListener=g(this.focusNode,"blur",f.hitch(this,
"_focusLost")),this.own(this._focusNodeBlurListener),this._windowBlurListener=g(window,"blur",f.hitch(this,"_focusLost")),this.own(this._windowBlurListener),this._documentClickListener=g(document.body,q?d.press:"mousedown",f.hitch(this,"_focusLost")),this.own(this._documentClickListener),this._escapeKeydownListener=g(document.body,"keydown",f.hitch(this,"_handleKeydown")),this.own(this._escapeKeydownListener))},_removeFocusListeners:function(){this._focusNodeBlurListener&&(this._focusNodeBlurListener.remove(),
delete this._focusNodeBlurListener);this._windowBlurListener&&(this._windowBlurListener.remove(),delete this._windowBlurListener);this._documentClickListener&&(this._documentClickListener.remove(),delete this._documentClickListener);this._escapeKeydownListener&&(this._escapeKeydownListener.remove(),delete this._escapeKeydownListener)},_focusChange:function(a){this._closeEventData={mwEventData:{gainedFocusWidget:a}};null==a?this.closeRequest(!1):!this.isInvokingWidget(a)&&!this.isDescendant(a,this)&&
this.closeRequest(!1)},closeRequest:function(a){if(null==a||0>[!0,!1].indexOf(a))a=!0;this.close&&this.close();this._invokingWidget&&this._invokingWidget.isMenuOpen()&&this._invokingWidget.closeMenu(a);l.isMenuOpen(this)&&b.close(this)},isInvokingWidget:function(b){if(null==b)return!1;b instanceof HTMLElement&&(b=a.getEnclosingWidget(b));return b===this._invokingWidget},isDescendant:function(a,b){if(null==a)return!1;a.domNode&&(a=a.domNode);null==b?b=this.domNode:b.domNode&&(b=b.domNode);return k.isDescendantOrInLaw(a,
b,function(a){return a.hasAttribute("dijitpopupparent")?document.getElementById(a.getAttribute("dijitpopupparent")):null},!0)}});h._dependencies=[{mixin:m,orderDependent:!0}];return h})},"mw-utils/widgetUtils":function(){define(["dijit/registry","mw-utils/domUtils"],function(h,f){var g={findParentWidget:function(e,d){var c=null,b;for(e instanceof HTMLElement&&(e=h.getEnclosingWidget(e));e;){if(e.get("type")===d){c=e;break}if(f.containsClass(e.domNode,d)){c=e;break}e=(b=f.getAttr(e.domNode.parentNode,
"dijitpopupparent"))?h.byId(b):e.getParent()}return c},isMenuChild:function(e){return null!=f.findParentNode(e,"dijitPopup")},getParentMenu:function(e){e=f.findParentNode(e,"dijitPopup");return!e?null:h.getEnclosingWidget(e.children[0])},isInvokingWidget:function(e,d){return d?g.getMenuWidget(e)===d:null!=g.getMenuWidget(e)},getInvokingWidget:function(e){if(e._invokingWidget)return e._invokingWidget;e=f.findParentNode(e,"dijitPopup");return!e?null:h.getEnclosingWidget(document.getElementById(e.getAttribute("dijitpopupparent")))},
getMenuWidget:function(e){return e.menu||e.dropDown},isMenuOpen:function(e){if(null==e)return!1;var d=e;e.domNode&&e.domNode.hasAttribute("data-composite-child")&&(e=document.getElementById(e.domNode.getAttribute("data-composite-primary-id")),d=h.getEnclosingWidget(e));return d&&d.dropDown&&(f.containsClass(d.domNode,"dijitOpened")||f.containsClass(d.domNode,"dijitHasDropDownOpen"))||d&&d.isMenuOpen&&d.isMenuOpen()||d&&d.domNode&&f.findParentNode(d,"dijitPopup")&&(d.getParent&&d.getParent()&&d.getParent().isMenuOpen&&
d.getParent().isMenuOpen()||"none"!==f.getStyle(f.findParentNode(d,"dijitPopup"),"display"))},isDescendant:function(e,d){if(null==e)return!1;e.domNode&&(e=e.domNode);if(null==d)return!1;d.domNode&&(d=d.domNode);return f.isDescendantOrInLaw(e,d,function(c){if((c=h.getEnclosingWidget(c))&&g.isMenuChild(c)&&g.isMenuOpen(c))if((c=g.getInvokingWidget(c))&&c.domNode)return c.domNode;return null},!0)},getPrimaryWidget:function(e){var d;if(e.domNode)d=e.domNode;else if(e instanceof HTMLElement)d=e;else throw Error("The input value must be a widget or HTML Element.");
return d&&d.hasAttribute("data-composite-child")?h.getEnclosingWidget(f.getById(d.getAttribute("data-composite-primary-id"))):e}};return g})},"mw-utils/domUtils":function(){define(["dojo/sniff"],function(h){var f={messages:{INVALID_ELEMENT:"The input parameter must be an instance of an Element object.",INVALID_STRING:"The input parameter must be of type 'string'.",INVALID_FOCUS_EVENT:"The input parameter must be a 'FocusEvent' object.",INVALID_STYLE:"The style specified is invalid.",INVALID_VALUE:"The value specified is invalid.",
INTEGER_INDEX:"index argument expects an integer.",STRING_INDEX:"index argument expects an string.",SPOUSE_NODE:"A function which returns a spouse node if it exists must be provided."},_validateElement:function(g){if(!(g instanceof Element))throw Error(f.messages.INVALID_ELEMENT);},_validateString:function(g){if("String"===typeof g)throw Error(f.messages.INVALID_STRING);},isLeftMouseButton:function(f){return!0===f.synthetic&&h("ie")?1===f.button:0===f.button},parseFocusEvent:function(g){if(!(g instanceof
FocusEvent))throw Error(f.messages.INVALID_FOCUS_EVENT);var e={};e.lostFocusNode=g.target;e.gainedFocusNode=h("chrome")||h("safari")?g.relatedTarget:document.activeElement;e.type=g.type;e.eventdata=g;return e},getParent:function(g){f._validateElement(g);return g.parentNode},findParentNode:function(g,e,d){var c=null,b;g.domNode&&(g=g.domNode);for(;g&&g!==window.document;){if(f.hasAttr(g,e)){c=g;break}if(f.hasAttrValue(g,e,d)){c=g;break}if(f.containsClass(g,e)){c=g;break}g=(b=f.getAttr(g,"dijitpopupparent"))?
f.getById(b):g.parentNode}return c},getNodeType:function(g){f._validateElement(g);return{1:"Element",3:"Text",7:"Processing Instruction",8:"Comment",9:"Document",10:"Document Type",11:"Document Fragment"}[g.nodeType]},getById:function(g){f._validateString(g);return window.document.getElementById(g)},getByClass:function(g){f._validateString(g);return window.document.getElementsByClassName(g)},getByAttr:function(g){f._validateString(g);return window.document.querySelectorAll("["+g+"]")},getByAttrValue:function(g,
e){f._validateString(g);f._validateString(e);return window.document.querySelectorAll("["+g+"\x3d"+e.replace(/['".\\]/g,"\\$\x26").replace(/[\\]/g,"\\$\x26")+"]")},getByName:function(g){f._validateString(g);return window.document.getElementById("[name\x3d"+g+"]")},getByTag:function(g){f._validateString(g);return window.document.getElementsByTagName(g)},getComputedStyle:function(g,e){f._validateElement(g);return e?(f._validateString(e),window.getComputedStyle(g,null)[e]):window.getComputedStyle(g,null)},
getStyle:function(g,e){f._validateElement(g);f._validateString(e);if(void 0===g.style[e])throw Error(f.messages.INVALID_STYLE);return g.style[e]},setStyle:function(g,e,d){f._validateElement(g);f._validateString(e);f._validateString(d);g.style[e]=d;if(g.style[e]!==d)throw Error(f.messages.INVALID_VALUE);},hasAttr:function(g,e){f._validateElement(g);f._validateString(e);return g.hasAttribute(e)},hasAttrValue:function(g,e,d){f._validateElement(g);f._validateString(e);f._validateString(d);return g.hasAttribute(e)&&
g.getAttribute(e)===d},getAttr:function(g,e){f._validateElement(g);f._validateString(e);return g.getAttribute(e)},setAttr:function(g,e,d){f._validateElement(g);f._validateString(e);f._validateString(d);g.setAttribute(e,d)},addAttr:function(g,e){f._validateElement(g);f._validateString(e);g.setAttribute(e,"")},removeAttr:function(g,e){f._validateElement(g);f._validateString(e);g.removeAttribute(e)},getClasses:function(g){f._validateElement(g);return g.classList?g.classList:{_element:g,_getClassArray:function(){return this._element.className.split(" ")},
_updateClassName:function(e){this._element.className=e.join(" ");this.length=e.length},length:g.className.split(" ").length,item:function(e){return this._getClassArray()[e]},contains:function(e){for(var d=this._getClassArray(),c=0;c<d.length;c++)if(d[c]===e)return!0;return!1},add:function(e){var d=this._getClassArray();d.push(e);this._updateClassName(d)},remove:function(e){var d=this._getClassArray();e=d.indexOf(e);0<=e&&(d.splice(e,1),this._updateClassName(d))},toggle:function(e){if(this.contains(e))return this.remove(e),
!1;this.add(e);return!0}}},getClass:function(g,e){if(null==e||"number"!==typeof e||0>e||0!==e%1)throw Error(f.messages.INTEGER_INDEX);return f.getClasses(g).item(e)},addClass:function(g,e){if(null==e||"string"!==typeof e)throw Error(f.messages.STRING_INDEX);return f.getClasses(g).add(e)},removeClass:function(g,e){if(null==e||"string"!==typeof e)throw Error(f.messages.STRING_INDEX);return f.getClasses(g).remove(e)},toggleClass:function(g,e){if(null==e||"string"!==typeof e)throw Error(f.messages.STRING_INDEX);
return f.getClasses(g).toggle(e)},containsClass:function(g,e){if(null==e||"string"!==typeof e)throw Error(f.messages.STRING_INDEX);return f.getClasses(g).contains(e)},classCount:function(g){return f.getClasses(g).length},getChildCount:function(g){f._validateElement(g);return g.childElementCount},getChildren:function(g){f._validateElement(g);return g.children},isDescendant:function(g,e,d){f._validateElement(g);f._validateElement(e);if(d&&g===e)return!0;for(;g&&g!==window.document;)if(g=f.getParent(g),
g===e)return!0;return!1},isDescendantOrInLaw:function(g,e,d,c){var b;if("function"!==typeof d)throw Error(f.messages.SPOUSE_NODE);b=f.isDescendant(g,e,c);!1===b&&(g=d(g)||g.parentNode)&&g!==window.document&&(b=f.isDescendantOrInLaw(g,e,d,c));return b},getFirstChild:function(g){f._validateElement(g);return!f.isContainer(g)||1>f.getChildCount(g)?null:f.getChildren(g)[0]},getLastChild:function(g){var e;f._validateElement(g);e=f.getChildCount(g);return!f.isContainer(g)||1>e?null:f.getChildren(g)[e-1]},
isContainer:function(g){f._validateElement(g);return 0<f.getChildCount(g)},getAdjacentElement:function(g,e){f._validateElement(g);if(!e||0>["next","previous"].indexOf(e))e="next";return g=g[e+"Sibling"]},getElementPositionInViewPort:function(g){f._validateElement(g);g=g.getBoundingClientRect();return{x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top}},getElementPositionOnPage:function(g){f._validateElement(g);g=f.getElementPositionInViewPort(g);g.x+=window.pageXOffset;g.y+=window.pageYOffset;return g},
isFocusable:function(g){f._validateElement(g);return g&&!g.hasAttribute("disabled")&&(!g.hasAttribute("aria-disabled")||"true"!==g.getAttribute("aria-disabled"))&&"none"!==g.style.display&&!g.hasAttribute("data-refuse-key-nav")},isElementInViewport:function(g){var e,d,c,b;f._validateElement(g);e=g.getBoundingClientRect();d=window.innerWidth||doc.documentElement.clientWidth;c=window.innerHeight||doc.documentElement.clientHeight;b=function(a,b){return document.elementFromPoint(a,b)};return 0>e.right||
0>e.bottom||e.left>d||e.top>c?!1:g.contains(b(e.left,e.top))||g.contains(b(e.right,e.top))||g.contains(b(e.right,e.bottom))||g.contains(b(e.left,e.bottom))},_obscuredProps:{}};f._obscuredProps.sawPosAbsolute=!1;f._obscuredProps.elementPosition=null;f.isElementObscuredByParent=function(g,e){var d,c,b,a;f._validateElement(g);a=!1;if(b=f.getParent(g))if(e||(f._obscuredProps.elementPosition=f.getElementPositionOnPage(g),f._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(g,null).position),
d=f._obscuredProps.elementPosition,c=f._obscuredProps.sawPosAbsolute,b&&"Element"===f.getNodeType(b)&&"BODY"!==b.nodeName){var k=f.getElementPositionOnPage(b);b=window.getComputedStyle(b,null);/relative|absolute/.test(b.position)&&(c=f._sawPosAbsolute=!1);!c&&/hidden|auto|scroll/.test(b.overflow)&&(a=d.y<k.y||d.y+d.h>k.y+k.h||d.x<k.x||d.x+d.w>k.x+k.w)}return a};f.isElementObscuredByAncestor=function(g){var e,d;f._validateElement(g);e=!1;f._obscuredProps.elementPosition=f.getElementPositionOnPage(g);
for(f._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(g,null).position;(d=f.getParent(g))&&"Element"===f.getNodeType(d)&&"BODY"!==d.nodeName;)e=f.isElementObscuredByParent(g,!0),g=d;return e};return f})},"mw-menu/mixins/property/MaxHeightMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{maxHeight:800,_setMaxHeightAttr:function(f){if("number"!==typeof f)throw Error("'MaxHeight' property expects a Number!");this.domNode.style.maxHeight=f+"px";this._set("maxHeight",
f)}})})},"mw-mixins/property/TagMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{tag:"",_setTagAttr:function(f){if("string"!==typeof f)throw Error("tag property expects a 'String'");this.domNode.setAttribute("data-tag",f);this._set("tag",f)},postCreate:function(){this.inherited(arguments);this.set("tag",this.get("tag"))}})})},"mw-mixins/property/VisualFamilyMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{visualFamily:"default",_setVisualFamilyAttr:function(f){if("string"!==
typeof f||0===f.length)throw Error("'visualFamily' property expects a literal non-empty string!");var g=this._getClassNameForVisualFamily(this.get("visualFamily"));this.domNode.classList.remove(g);g=this._getClassNameForVisualFamily(f);this.domNode.classList.add(g);this._set("visualFamily",f)},_getClassNameForVisualFamily:function(f){return"mw"+f.charAt(0).toUpperCase()+f.slice(1)+"VisualFamily"}})})},"mw-mixins/mixinDependencyValidator":function(){define([],function(){return{validate:function(h){return h}}})},
"mw-menu/MenuItem":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/property/TagMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/IconMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowIconMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuItem.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H){return h(F.validate([f,g,e,d,c,a,k,l,m,q,n,p,r,s,t,u,v,w,b,x,B,A,D]),{baseClass:"mwWidget mwSharedMenuItem mwMenuItem",templateString:H,closeMenuOnClick:!0,_emitClickEvent:function(){this.emit("click",{mwEventData:{value:this.get("text")},_dojo_click:!0})},_qeClick:function(){this._emitClickEvent()}})})},"mw-menu/mixins/MenuItemTextColorMixin":function(){define(["dojo/_base/declare","mw-mixins/property/DescriptionMixin","mw-menu/mixins/property/ShowDescriptionMixin"],
function(h,f,g){h=h(null,{_setDescriptionAttr:function(e){this.inherited(arguments);""!==e?this.textNode.classList.add("mwBlueText"):this.textNode.classList.remove("mwBlueText")},_setShowDescriptionAttr:function(e){this.inherited(arguments);e?this.textNode.classList.add("mwBlueText"):this.textNode.classList.remove("mwBlueText")},postCreate:function(){this.inherited(arguments);(this.get("showDescription")&&""===this.get("description")||!this.get("showDescription")&&""!==this.get("description"))&&this.textNode.classList.remove("mwBlueText")}});
h._dependencies=[{mixin:f,orderDependent:!0},{mixin:g,orderDependent:!0}];return h})},"mw-mixins/property/DescriptionMixin":function(){define(["dojo/_base/declare","mw-event-utils/platformize"],function(h,f){return h(null,{description:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDescriptionMixin");this.set("description",this.get("description"))},_setDescriptionAttr:function(f){if("string"!==typeof f)throw Error("'description' property expects a literal string!");
this._updateDescription(f);this._set("description",f)},_updateDescription:function(f){this._lastKnownDescription=f;if(this.descriptionNode)this.descriptionNode.textContent=f,!1===this.get("showDescription")?this.domNode.classList.add("mwHideDescription"):""===f?this.domNode.classList.add("mwHideDescription"):this.domNode.classList.remove("mwHideDescription");else{var e=this;setTimeout(function(){e._destroyed||e._updateTitle(f)},200)}},_updateTitle:function(g,e){var d;e?(""!==g&&void 0!==g&&(g=""===
this._lastKnownDescription?g:" ("+g+")"),d=this._lastKnownDescription+g):d=this.get("shortcut")?g?g+" ("+f.getPlatformSpecificString(this.get("shortcut"))+")":f.getPlatformSpecificString(this.get("shortcut")):g;this.domNode.setAttribute("title",d)}})})},"mw-event-utils/platformize":function(){define(["dojo/sniff"],function(h){var f=[{regExp:/ctrl|cntrl|control/gi,macString:"\u2303",otherPlatformsString:"Ctrl"},{regExp:/meta/gi,macString:"\u2318",otherPlatformsString:"Ctrl"},{regExp:/shift/gi,macString:"\u21e7",
otherPlatformsString:"Shift"},{regExp:/alt/gi,macString:"\u2325",otherPlatformsString:"Alt"},{regExp:/enter/gi,macString:"\u23ce",otherPlatformsString:"Enter"},{regExp:/delete/gi,macString:"\u2326",otherPlatformsString:"Delete"},{regExp:/del/gi,macString:"\u2326",otherPlatformsString:"Del"},{regExp:/Spacebar/gi,macString:"\u2423",otherPlatformsString:"Spacebar"},{regExp:/space/gi,macString:"\u2423",otherPlatformsString:"Space"},{regExp:/up/gi,macString:"\u2191",otherPlatformsString:"Up"},{regExp:/down/gi,
macString:"\u2193",otherPlatformsString:"Down"},{regExp:/left/gi,macString:"\u2190",otherPlatformsString:"Left"},{regExp:/right/gi,macString:"\u2192",otherPlatformsString:"Right"}];return{getPlatformSpecificString:function(g,e){e=e||{};g=g.replace(/ /g,"");g=g.replace(/_/g,"+");g=g.toUpperCase();f.forEach(function(d){var c;h("mac")?(c=d.macString,!e.dontConvertCtrlToCmd&&"\u2303"===c&&(c="\u2318")):c=d.otherPlatformsString;g=g.replace(d.regExp,c)});return g=h("mac")?g.replace(/\+(?!$)/g,""):g}}})},
"mw-menu/mixins/property/ShowDescriptionMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{showDescription:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowDescriptionMixin")},_setShowDescriptionAttr:function(f){if("boolean"!==typeof f)throw Error("'showDescription' property expects a Boolean!");!1===f?this.domNode.classList.add("mwHideDescription"):this.descriptionNode&&""===this.descriptionNode.textContent?this.domNode.classList.add("mwHideDescription"):
this.domNode.classList.remove("mwHideDescription");this._set("showDescription",f)}})})},"mw-menu/mixins/property/CloseMenuOnClickMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dijit/popup"],function(h,f,g,e){return h(null,{closeMenuOnClick:!1,postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"change",f.hitch(this,"_onChange")));this.domNode.classList.add("mwCloseMenuOnClickMixin");this.set("closeMenuOnClick",this.get("closeMenuOnClick"))},_setCloseMenuOnClickAttr:function(d){if("boolean"!==
typeof d)throw Error("'closeMenuOnClick' property expects a Boolean!");this._set("closeMenuOnClick",d);d?this.domNode.classList.add("mwClosePopupOnClick"):this.domNode.classList.remove("mwClosePopupOnClick")},_onChange:function(){this.get("closeMenuOnClick")&&(e.close(),this.emit("closeRequest"))}})})},"mw-mixins/property/DisabledMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{disabled:!1,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDisabledMixin");
this.set("disabled",this.get("disabled"))},startup:function(){this.inherited(arguments);this.get("disabled")&&(this.domNode.dojoClick=!1)},_disableInteractionHandler:function(f){f.preventDefault();f.stopImmediatePropagation();f.stopPropagation()},_addDisableInteractions:function(f){null!==f&&(f.addEventListener("mousedown",this._disableInteractionHandler,!0),f.addEventListener("click",this._disableInteractionHandler,!0))},_removeDisableInteractions:function(f){null!==f&&(f.removeEventListener("mousedown",
this._disableInteractionHandler,!0),f.removeEventListener("click",this._disableInteractionHandler,!0))},_getDisabledNode:function(){return this.domNode},_updateDisableNode:function(f){var g=this._getDisabledNode();f?(this.domNode.classList.add("mwDisabled"),this.domNode.classList.remove("mwEnabled"),this._addDisableInteractions(g)):(this.domNode.classList.add("mwEnabled"),this.domNode.classList.remove("mwDisabled"),this._removeDisableInteractions(g))},_setDisabledAttr:function(f){if("boolean"!==typeof f)throw Error("'disabled' property expects a boolean!");
this._set("disabled",f);this._updateDisableNode(f);this.set("hovering",!1);this.set("active",!1);this._setAriaDisabled();this.baseClass.split(" ").forEach(function(g){f?this.domNode.classList.add(g+"Disabled"):this.domNode.classList.remove(g+"Disabled")}.bind(this));f?this.domNode.classList.add("dijitDisabled"):this.domNode.classList.remove("dijitDisabled");this._setTabIndexOnNode(this.focusNode)},_setTabIndexOnNode:function(f){this.get("disabled")&&!this.get("dropDownNeverDisabled")?f.removeAttribute("tabIndex"):
f.setAttribute("tabIndex","0")},_setAriaDisabled:function(){(this.disabledNode?this.disabledNode:this.domNode).setAttribute("aria-disabled",this.get("disabled")&&!this.get("dropDownNeverDisabled")?"true":"false")}})})},"mw-mixins/property/IconMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/on"],function(h,f,g,e){return h(null,{_iconTypes:{DATA_URI:"data_uri",CSS_CLASS:"css_class"},icon:"",_lastIconApplied:"",postCreate:function(){this.inherited(arguments);
this.domNode.classList.add("mwIconMixin");this.set("icon",this.get("icon"))},_setIconAttr:function(d){if("string"!==typeof d)throw Error("'icon' property expects a literal string!");this._set("icon",d);this._updateDOM(d)},_updateDOM:function(d){this._removeOldIcon();this._applyNewIcon(d)},_removeOldIcon:function(){var d=this._lastIconApplied,c=this._getIconType(d);c===this._iconTypes.DATA_URI?this._removeImageStyles(this.iconNode):c===this._iconTypes.CSS_CLASS&&""!==d&&d.trim().split(" ").forEach(function(b){this.iconNode.classList.remove(b)},
this)},_applyNewIcon:function(d){var c=this._getIconType(d);if(c===this._iconTypes.DATA_URI){var b=g.create("img",{src:d});this.own(e.once(b,"load",f.hitch(this,function(){this._applyImageStyles(this.iconNode,d,b);this.emit("iconapplied");this.emit("updatelayout");g.destroy(b)})))}else c===this._iconTypes.CSS_CLASS&&""!==d&&d.trim().split(" ").forEach(function(a){this.iconNode.classList.add(a)},this);0===d.length?this.domNode.classList.add("mwNoIcon"):this.domNode.classList.remove("mwNoIcon");this._lastIconApplied=
d},_getIconType:function(d){var c="";return c=-1<d.indexOf("data:")?this._iconTypes.DATA_URI:this._iconTypes.CSS_CLASS},_applyImageStyles:function(d,c,b){d.style.backgroundImage="url("+c+")";d.style.width=b.width+"px";d.style.height=b.height+"px"},_removeImageStyles:function(d){d.style.backgroundImage="";d.style.width="";d.style.height=""}})})},"mw-mixins/property/ShortcutMixin":function(){define(["dojo/_base/declare","mw-event-utils/platformize","mw-mixins/property/DescriptionMixin"],function(h,
f,g){h=h(null,{shortcut:"",platformizeShortcut:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShortcutMixin");this.set("shortcut",this.get("shortcut"))},_setShortcutAttr:function(e){if("string"!==typeof e)throw Error("'shortcut' property expects a literal string!");this._updateShortcut(e);this._set("shortcut",e)},_updateShortcut:function(e){this.shortcutKeyNode?(this.shortcutKeyNode.textContent=this._getPlatformizedShortcut(e),!1===this.get("showShortcut")?this.domNode.classList.add("mwHideShortcut"):
""===e?this.domNode.classList.add("mwHideShortcut"):this.domNode.classList.remove("mwHideShortcut")):this._updateTitle(this._getPlatformizedShortcut(e),!0)},_getPlatformizedShortcut:function(e){return this.get("platformizeShortcut")?f.getPlatformSpecificString(e):e},_setPlatformizeShortcutAttr:function(e){if("boolean"!==typeof e)throw Error("'platformizeShortcut' property expects a boolean value!");this._set("platformizeShortcut",e);this._updateShortcut(this.get("shortcut"))}});h._dependencies=[{mixin:g,
orderDependent:!0,type:"shortcut"}];return h})},"mw-menu/mixins/property/ShowIconMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{showIcon:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowIconMixin")},_setShowIconAttr:function(f){if("boolean"!==typeof f)throw Error("'showIcon' property expects a Boolean!");f?this.domNode.classList.remove("mwHideIcon"):this.domNode.classList.add("mwHideIcon");this._set("showIcon",f)}})})},"mw-menu/mixins/property/ShowTextMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{showText:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowTextMixin")},_setShowTextAttr:function(f){if("boolean"!==typeof f)throw Error("'showText' property expects a Boolean!");f?this.domNode.classList.remove("mwHideText"):this.domNode.classList.add("mwHideText");this._set("showText",f)}})})},"mw-menu/mixins/property/ShowShortcutMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{showShortcut:!0,postCreate:function(){this.inherited(arguments);
this.domNode.classList.add("mwShowShortcutMixin")},_setShowShortcutAttr:function(f){if("boolean"!==typeof f)throw Error("'showShortcut' property expects a Boolean!");!1===f?this.domNode.classList.add("mwHideShortcut"):this.shortcutNode&&""===this.shortcutNode.textContent?this.domNode.classList.add("mwHideShortcut"):this.domNode.classList.remove("mwHideShortcut");this._set("showShortcut",f)}})})},"mw-mixins/property/TextMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{text:"",
postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwTextMixin");this.set("text",this.get("text"))},_setTextAttr:function(f){if("string"!==typeof f)throw Error("'text' property expects a literal string!");this._updateTextInDOM(f);this._set("text",f)},_updateTextInDOM:function(f){this._placeTextInNode(f);0===this._getTextForDOM(f).length?this.domNode.classList.add("mwNoText"):this.domNode.classList.remove("mwNoText")},_placeTextInNode:function(f,g){void 0===g&&(g=this.textNode);
for(;g.firstChild;)g.removeChild(g.firstChild);var e=this._getTextForDOM(f,g);if(0<e.length){var d=document.createElement("span");d.classList.add("mwTextLine");d.textContent=e;g.appendChild(d);g.classList.remove("mwEmptyNode")}else g.classList.add("mwEmptyNode")},_getTextForDOM:function(f){return f}})})},"mw-menu/mixins/SingleLineTextMixin":function(){define(["dojo/_base/declare","mw-mixins/property/TextMixin"],function(h,f){var g=h(null,{_getTextForDOM:function(e){e=this.inherited(arguments);return e=
e.replace(/\n/g," ")}});g._dependencies=[{mixin:f,orderDependent:!0}];return g})},"mw-mixins/AccessibilityClickMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/keys"],function(h,f,g,e){return h(null,{postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",f.hitch(this,function(d){d.keyCode===e.SPACE&&-1===Array.prototype.slice.call(this.domNode.classList).indexOf("mwComboBox")&&d.preventDefault();setTimeout(f.hitch(this,function(){if(!0!==
this.get("disabled"))switch(d.keyCode){case e.ENTER:this._emitClickEvent(d);break;case e.SPACE:this._emitClickEvent(d)}}),0)})));this.own(g(this.domNode,"keyup",f.hitch(this,function(d){var c=d.keyCode===e.ENTER||d.keyCode===e.SPACE,b=/input|button|textarea/i.test(d.target.nodeName);c&&!b&&d.stopPropagation()})))},_emitClickEvent:function(d){g.emit(d.target,"click",{bubbles:!0,cancelable:!0,mwEventData:{keyCode:d.keyCode},_dojo_click:!0})},_qeClick:function(){this.emit("click")}})})},"mw-mixins/PreventSelectionMixin":function(){define(["dojo/_base/declare",
"dojo/on"],function(h,f){return h(null,{postCreate:function(){this.inherited(arguments);this._getNonSelectableNodes().forEach(function(g){f(g,"selectstart",function(e){if((document.documentMode||"Netscape"===navigator.appName&&-1===navigator.appVersion.indexOf("Trident"))&&("INPUT"!==e.target.nodeName||"TEXTAREA"!==e.target.nodeName))return!1;e.preventDefault()})})},_getNonSelectableNodes:function(){return[this.domNode]}})})},"mw-menu/mixins/FocusableMenuChildMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom dojo/on dojo/mouse dojo/touch dijit/focus dijit/registry mw-dom-utils/domUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(null,{postCreate:function(){this.inherited(arguments);var a=g("touch")&&!window.PointerEvent;this.own(d(this.domNode,"click",f.hitch(this,"_onMouseClick")),d(this.domNode,a?b.release:"mouseup",f.hitch(this,"_onMouseUp")),d(this.domNode,c.enter,f.hitch(this,"_onMouseEnter")),d(this.domNode,"focusout",f.hitch(this,"_focusLost")));this.domNode.classList.add("mwFocusableMenuChildMixin")},_focusLost:function(a){setTimeout(f.hitch(this,function(){var b,c=l.parseFocusEvent(a).gainedFocusNode,
d=k.getEnclosingWidget(c);if(d&&(b=d.focusNode||d.domNode)&&b.hasAttribute("data-composite-child"))if(d=k.getEnclosingWidget(e.byId(b.getAttribute("data-composite-primary-id"))),d===this)return;this!==d&&(b=this.getParentWidget(),(null==d||l.isFocusable(c))&&(b&&b._focusChange)&&b._focusChange(d),this.focusLost&&this.focusLost(d))}),0)},_onMouseClick:function(a){a.mwEventData?(this.focus(),this.closeMenuOnClick&&this._requestClose(!1)):(a.preventDefault(),a.stopImmediatePropagation())},_onMouseEnter:function(a){this.focusNode&&
l.isFocusable(this.focusNode)&&this.focus()},_onMouseUp:function(a){a.preventDefault();a.stopPropagation();!(this.getParentWidget()&&!0===this.getParentWidget()._mouseDownTriggered)&&l.isFocusable(this.focusNode)&&this._emitClickEvent&&(l.isLeftMouseButton(a)||"dojotouchend"===a.type)&&this._emitClickEvent(a)},_requestClose:function(a){var b=this.getParentWidget();null!=b&&b.closeRequest&&(b._closeEventData={mwEventData:{gainedFocusWidget:null}},b.closeRequest(a?a:!1))},focus:function(){this.inherited(arguments);
l.isFocusable(this.focusNode)&&(a.focus(this.focusNode||this.domNode),(this.focusNode||this.domNode).focus())},getParentWidget:function(a){if(null==a)if(this.domNode)a=this.domNode;else return null;a.domNode&&(a=a.domNode);if(a.parentNode)a=l.getParent(a);else return null;return k.getEnclosingWidget(a)}})})},"mw-menu/mixins/MenuChildResizeMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){var g="icon text shortcut description showIcon showText showShortcut showDescription".split(" ");
return h(null,{postCreate:function(){this.inherited(arguments);this.watch(f.hitch(this,function(e,d,c){-1<g.indexOf(e)&&("icon"!==e||this._getIconType(c)!==this._iconTypes.DATA_URI)&&this.emit("updatelayout")}));this.domNode.classList.add("mwMenuChildResizeMixin")}})})},"mw-navigationbar/NavigationBar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/Evented dojo/on dojo/query dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dijit/_TemplatedMixin dijit/layout/_LayoutWidget dojo/text!./templates/navigationBar.html mw-navigationbar/BreadCrumbsModule mw-navigationbar/ActionToolbar mw-overlay-utils/BusyOverlay ./toolbaractions/BackNavigationAction ./toolbaractions/DataSource ./toolbaractions/ForwardNavigationAction".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v){return h([q,m,e],{templateString:n,constructor:function(a){a=a||{};this.currentLocation=a.currentLocation;this.visitedLocations=[];this._breadCrumbObjectsArray=a.metaData.breadCrumbObjectsArray;this.getChildNodes=a.getChildNodes;this.dataSource=new u;this.metaData=a.metaData;this._userActionsList=a.userActionsList;""!=this.currentLocation&&this.dataSource.addToDataList(this.currentLocation);this.hasChildren=a.metaData&&a.metaData.hasChildren?a.metaData.hasChildren:
!1},postCreate:function(a){this.inherited(arguments);this.currentLocationNode.textContent="";b.set(this.currentLocationNode,"data-tag",this.currentLocation);this._setLocationIcon(this.metaData.locationIcon);this._initializeNavigationActions();this._initializeBreadCrumbsModule();d(this,"rebuildLocationNode",this._rebuildLocationNode);this.busySpinner=new s(s.SIZE.SMALL)},startup:function(){this.inherited(arguments);this.resize()},_setLocationIcon:function(a){this.iconNode.setAttribute("style","background-image: url('"+
a+"')");this.iconNode.setAttribute("title",this.currentLocation)},resizeWidget:function(a){this.resize()},_initializeNavigationActions:function(){this._actionsList=[];var a=this._getBackButtonAction(),b=this._getForwardButtonAction();this._actionsList.push(a);this._actionsList.push(b);if(this._userActionsList)for(var c=0;c<this._userActionsList.length;c++)this._actionsList.push(this._userActionsList[c]);this.actionToolbar=new r({actionsList:this._actionsList,navigationBarNode:this.navigationBarNode});
d(a,"locationChanged",f.hitch(this,function(a){this.navigatingBackOrForward=!0;this.emit("locationChanged",a)}));d(b,"locationChanged",f.hitch(this,function(a){this.navigatingBackOrForward=!0;this.emit("locationChanged",a)}))},_initializeBreadCrumbsModule:function(){this.breadCrumbsModule=new p({breadCrumbObjectsArray:this._breadCrumbObjectsArray,getChildNodes:this.getChildNodes,hasChildren:this.hasChildren});d(this.breadCrumbsModule,"locationChanged",f.hitch(this,function(a){this.navigatingBackOrForward=
!1;this.emit("locationChanged",a)}));k.place(this.breadCrumbsModule.breadCrumbsParentNode,this.currentLocationNode)},_getBackButtonAction:function(){return new t({dataSource:this.dataSource})},_getForwardButtonAction:function(){return new v({dataSource:this.dataSource})},getCurrentLocation:function(){return this.currentLocation},setCurrentLocation:function(a,c){this.currentLocation=a;this.hasChildren=c.hasChildren;this.metaData.locationIcon=c.locationIcon;var d=this.breadCrumbsModule.buildLocationNode(c.breadCrumbObjectsArray,
c.hasChildren);b.set(this.currentLocationNode,"data-tag",this.currentLocation);k.place(d,this.currentLocationNode);this._setLocationIcon(c.locationIcon);this.getChildNodes&&this.breadCrumbsModule.menu.isMenuOpen()&&this.breadCrumbsModule.closeBreadCrumbMenu();this.navigatingBackOrForward||this.dataSource.addToDataList(a);this.navigatingBackOrForward=!1},_rebuildLocationNode:function(){var a=this.breadCrumbsModule.rebuildLocationNode(this.hasChildren);k.place(a,this.currentLocationNode);this.isBusy&&
this.removeBusyMode()},isNavigatingBackOrForward:function(){return this.navigatingBackOrForward},reset:function(){this.navigatingBackOrForward=!1;this.dataSource.setOldLocationNode()},showBusyAffordance:function(){this.isBusy=!0;this._showSpinnerInIconNode()},removeBusyMode:function(){this.isBusy=!1;this._removeSpinnerInIconNode()},_showSpinnerInIconNode:function(){this._setLocationIcon("");this.busySpinner.set("target",this.iconNode);this.busySpinner.show()},_removeSpinnerInIconNode:function(){this.busySpinner&&
this.busySpinner.hide();this._setLocationIcon(this.metaData.locationIcon)}})})},"mw-navigationbar/BreadCrumbsModule":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-class dojo/Evented dojo/keys dojo/on dojo/dom-style dijit/popup mw-menu/Menu mw-menu/MenuItem mw-form/SplitButton".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){return h([a],{constructor:function(a){this.breadCrumbObjectsArray=a.breadCrumbObjectsArray;this.breadCrumbsParentNode=
c.create("div");b.add(this.breadCrumbsParentNode,"breadCrumbsParentNode");this.getChildNodes=a.getChildNodes;this._hasDynamicMenu="function"===typeof a.getChildNodes;this.buildLocationNode(this.breadCrumbObjectsArray,a.hasChildren);this.menu=new n({style:"display: none;"})},rebuildLocationNode:function(a){return this.buildLocationNode(this.breadCrumbObjectsArray,a)},buildLocationNode:function(a,b){this.breadCrumbObjectsArray=a;c.empty(this.breadCrumbsParentNode);return this._renderBreadCrumbs(this.breadCrumbObjectsArray,
b)},_renderBreadCrumbs:function(a,b){if(0<a.length){for(var d=0;d<a.length;d++){var e=this._buildBreadCrumbs(a[d]);d===a.length-1&&!b&&c.destroy(e.focusNode);e.startup();e.placeAt(this.breadCrumbsParentNode)}return this.breadCrumbsParentNode}},_buildBreadCrumbs:function(a){var c=new r({hasDynamicMenu:this._hasDynamicMenu});c.set("text",a.textToDisplay);d.set(c.domNode,"data-test-id",a.textToDisplay);c.on("click",g.hitch(this,function(a){a.stopPropagation();a.preventDefault();a=dijit.registry.getEnclosingWidget(a.target).domNode.getAttribute("path");
this.emit("locationChanged",a)}));this._hasDynamicMenu&&this._setArrowNodeListeners(c);b.add(c.arrowIconNode,"arrowIconNode");b.add(c.dropDownNode,"breadCrumbDropDownNode");d.set(c.domNode,"path",a.pathToNavigateOnClick);return c},_setArrowNodeListeners:function(a){a.on("blur",g.hitch(a,function(){b.add(this.arrowIconNode,"arrowIconNode")}));a.on("dropdownclick",g.hitch(this,function(a){a=dijit.registry.getEnclosingWidget(a.target);this._toggleDropdownState(a)}))},_toggleDropdownState:function(a){a.arrowIconNode.classList.contains("arrowIconNode")?
(0<this.menu.getChildren().length&&this.menu.isMenuOpen()&&this.closeBreadCrumbMenu(),this._switchButtonToDropDownState(a)):this._switchButtonToNormalState(a)},closeBreadCrumbMenu:function(){q.close(this.menu)},_switchButtonToNormalState:function(a){a=a.arrowIconNode;b.remove(a,"downArrowIconNode");b.add(a,"arrowIconNode")},_switchButtonToDropDownState:function(a){var c=a.arrowIconNode;b.remove(c,"arrowIconNode");b.add(c,"downArrowIconNode");this._populateMenuItems(a)},_listSub:function(a,c){if(0<
c.length&&!a.arrowIconNode.classList.contains("arrowIconNode")){this.menu.destroyDescendants();for(var d=this,e=0;e<c.length;e++){var f=new p({text:c[e].label,path:c[e].path,icon:"iconMenuDropdown"});m.set(f.iconNode,"background-image","url(' "+c[e].icon+"')");f.set("data-tag",c[e].label);b.add(f.domNode,"navBarDropDownMenu");var k=a.domNode.getAttribute("path");this._highlightMenuItemIfItIsInCurrentLocation(k,f);f.on("click",g.hitch(f,function(a){a=dijit.registry.getEnclosingWidget(a.target);d.emit("locationChanged",
a.path)}));this.menu.addChild(f)}this.menu.on("close",g.hitch(a,function(){b.remove(a.arrowIconNode,"downArrowIconNode");b.add(a.arrowIconNode,"arrowIconNode")}));a.set("menu",this.menu);a.set("aroundNode",a.dropDownNode);a.showMenu()}},_highlightMenuItemIfItIsInCurrentLocation:function(a,c){for(var d=0;d<this.breadCrumbObjectsArray.length;d++)this.breadCrumbObjectsArray[d].pathToNavigateOnClick===a&&this.breadCrumbObjectsArray[d+1]&&this.breadCrumbObjectsArray[d+1].pathToNavigateOnClick===c.path&&
b.add(c.textNode.getElementsByClassName("mwTextLine")[0],"highlightMenuItem")},_populateMenuItems:function(a){var b=this.getChildNodes({path:a.domNode.getAttribute("path")}),c=this;b.path=a.domNode.getAttribute("path");this.context=b;f.when(b.listFolderComplete,function(b){if(a.arrowIconNode.classList.contains("downArrowIconNode"))return c._listSub(a,b.folders),b})}})})},"mw-menu/Menu":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container mw-menu/mixins/KeyNavMixin mw-menu/mixins/OnOpenMixin mw-menu/mixins/OnCloseMixin mw-menu/mixins/ContainerFocusMixin mw-menu/mixins/MenuFocusMixin mw-menu/mixins/property/MaxHeightMixin mw-mixins/property/TagMixin mw-mixins/property/DestroyedMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/Menu.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return h(r.validate([g,c,e,d,q,b,a,k,l,m,n,p]),{baseClass:"mwWidget mwMenu",templateString:s,_getTargetNode:function(a){a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));return a},isMenuOpen:function(){return this.domNode&&this.domNode.parentElement?"none"!==this.domNode.parentElement.style.display:!1}})})},"mw-mixins/property/DestroyedMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,
{_destroyed:!1,destroy:function(){this._set("_destroyed",!0);this.inherited(arguments)},isDestroyed:function(){return this.get("_destroyed")}})})},"mw-form/SplitButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/ArrowModeMixin mw-mixins/property/SizeMixin mw-mixins/property/TabIndexNodesMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-mixins/ResizeMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonTextMixin mw-form/mixins/property/DropDownButtonSizeMixin mw-form/mixins/property/DropDownNeverDisabledMixin mw-form/mixins/SplitButtonToggleSplitButtonMenuMixin mw-form/mixins/SplitButtonToggleSplitButtonFocusMixin mw-mixins/mixinDependencyValidator dojo/text!mw-form/templates/DropDownButton.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P){return h(M.validate([f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N]),{baseClass:"mwWidget mwSplitButton",templateString:P,cssStateNodes:{buttonNode:"mwButtonNode",dropDownNode:"mwDropDownNode"},_qeClick:function(){this.emit("click")}})})},"mw-mixins/property/MenuMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-geometry dojo/has dojo/keys dojo/on dojo/touch dijit/focus dijit/popup dijit/Viewport dijit/_WidgetBase".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){var p={left:[0],center:[1],right:[2],all:[0,1,2],none:[]},r=function(a){if(!0===a.synthetic&&window.syn&&-1!==a.type.indexOf("mouse"))switch(a.button){case window.syn.mouse.browser.left[a.type].button:return 0;case window.syn.mouse.browser.right[a.type].button:return 2;default:return 1}else return a.button},s={down_arrow:[b.DOWN_ARROW],right_arrow:[b.RIGHT_ARROW],left_arrow:[b.LEFT_ARROW],up_arrow:[b.UP_ARROW],enter:[b.ENTER],space:[b.SPACE],a11y:[b.ENTER,b.SPACE],
down_arrow_a11y:[b.DOWN_ARROW,b.ENTER,b.SPACE],right_arrow_a11y:[b.RIGHT_ARROW,b.ENTER,b.SPACE],left_arrow_a11y:[b.LEFT_ARROW,b.ENTER,b.SPACE],up_arrow_a11y:[b.UP_ARROW,b.ENTER,b.SPACE],none:[]},t={below:["below","below-alt"],vertical:["below","below-alt","above","above-alt"],horizontal:["after","before"]};return h(null,{menu:null,menuNode:null,aroundNode:null,_clickButtons:p.left,_keyPressButtons:s.a11y,_menuOrientation:t.vertical,_setMenuAttr:function(a){this._validateMenuAttr(a);this._set("menu",
a)},_validateMenuAttr:function(a){if(null!==a&&!(a instanceof n))throw Error("'menu' property expects a widget");},_setMenuNodeAttr:function(a){if(!(a instanceof HTMLElement))throw Error("'menuNode' property expects a DOM node.");a?this._set("menuNode",a):this._set("menuNode",this.focusNode||this.domNode)},_setAroundNodeAttr:function(a){if(!(a instanceof HTMLElement))throw Error("'aroundNode' property expects a DOM node.");a?this._set("aroundNode",a):this._set("aroundNode",this.domNode)},_setClickButtonsAttr:function(a){if("string"!==
typeof a||-1===p.hasOwnProperty(a))throw Error("'clickButtons' property expects one of these values: "+Object.keys(p));this._set("_clickButtons",p[a])},_setKeyPressButtonsAttr:function(a){if("string"!==typeof a||-1===s.hasOwnProperty(a))throw Error("'keyPressButtons' property expects one of these values: "+Object.keys(s));this._set("_keyPressButtons",s[a])},_setMenuOrientationAttr:function(a){if("string"!==typeof a||-1===t.hasOwnProperty(a))throw Error("'menuOrientation' property expects one of these values: "+
Object.keys(t));this._set("_menuOrientation",t[a])},postCreate:function(){var b;this.inherited(arguments);this.domNode.classList.add("mwMenuMixin");this.menuNode=this.menuNode||this.focusNode||this.domNode;this.aroundNode=this.aroundNode||this.domNode;b=c("touch")&&!window.PointerEvent;this.own(a(this.menuNode,b?k.press:"mousedown",f.hitch(this,"_onPress")),a(this.menuNode,"mousedown",f.hitch(this,"_onMouseDown")),a(this.menuNode,"keydown",f.hitch(this,"_onKeyDown")),a(this.menuNode,"keyup",f.hitch(this,
"_onKeyUp")),a(this.domNode,"click",f.hitch(this,"_onMouseClick")),this.watch("disabled",f.hitch(this,function(a,b,c){c&&this._handleClosingPopup(!1)})))},_onPress:function(a){var b=-1<this._clickButtons.indexOf(r(a))||"touchstart"===a.type,c=!this.isMenuOpen()||this._closeMenuOnParentClick();this.get("menu")&&(this.get("menu")._lastPressEvent=a);b&&c?(this.get("menu")&&(this.get("menu")._mouseDownTriggered=!0,setTimeout(f.hitch(this,function(){this.get("menu")&&"_mouseDownTriggered"in this.get("menu")&&
delete this.get("menu")._mouseDownTriggered}),300)),this.toggleMenu(a.target)):this.isMenuOpen()&&(a.preventDefault(),a.stopImmediatePropagation())},_onMouseDown:function(a){this.inherited(arguments);var b=this.get("menu")&&"_mouseDownTriggered"in this.get("menu"),c=this.get("menu")&&"_lastPressEvent"in this.get("menu")&&"touchstart"===this.get("menu")._lastPressEvent.type;if(this.isMenuOpen()||b&&c)a.preventDefault(),a.stopImmediatePropagation()},_onMouseClick:function(a){this.get("menu")&&"_mouseDownTriggered"in
this.get("menu")&&delete this.get("menu")._mouseDownTriggered;this.inherited(arguments);e.isDescendant(a.target,this.menuNode)&&a.stopImmediatePropagation()},_onKeyDown:function(a){this.inherited(arguments);if(!this.get("disabled")||this.get("dropDownNeverDisabled"))if(a.keyCode===b.ESCAPE)this.domNode.classList.contains("mwFocusableMenuChildMixin")?this.closeMenu(!1):this.closeMenu(!0);else if(-1<this._keyPressButtons.indexOf(a.keyCode)&&(!this.isMenuOpen()||this._closeMenuOnParentClick()&&this.isMenuOpen()))this._toggleOnKeyUp=
!0},_onKeyUp:function(a){this.inherited(arguments);this._toggleOnKeyUp&&(delete this._toggleOnKeyUp,(!this.isMenuOpen()||this.closeMenuOnClick)&&this.toggleMenu(a.target))},_onBlur:function(){this.isMenuOpen()&&(this.get("menu")._invokingWidget===this&&!this.get("menu").domNode.classList.contains("mwMenu")&&!this.get("menu").domNode.classList.contains("mwSectionPopup"))&&(e.isDescendant(document.activeElement,this.domNode)?this.closeMenu(!0):this.closeMenu(!1));this.inherited(arguments)},_qeDropDownClick:function(){this.toggleMenu()},
toggleMenu:function(a){a=a||this.menuNode;a=a.domNode||a;e.isDescendant(a,this.menuNode)&&(this.isMenuOpen()?this.closeMenu(!0):this.openMenu())},openMenu:function(){this._showMenu()},_showMenu:function(){null!=this.get("menu")&&setTimeout(f.hitch(this,function(){var b,c,e=this;if(null!=e.get("menu")){null==this.aroundNode&&(c=b=0);"_invokingWidget"in this.get("menu")&&this.get("menu")._invokingWidget&&(this.get("menu")._lastInvokingWidget=this.get("menu")._invokingWidget);this.get("menu")._invokingWidget=
this;this.domNode.classList.add("mwHasMenuOpened");this.get("menu")._onPositionListener=g.around(d,"position",function(a){return function(b,c){var d="ontouchstart"in window||navigator.maxTouchPoints,e=document.body.clientWidth>window.innerWidth;return c&&d&&e?a(b,!1):a(b,c)}});this.get("menu").own(this.get("menu")._onPositionListener);m.open({parent:this,popup:e.get("menu"),x:b,y:c,around:e.aroundNode,orient:e._menuOrientation,maxHeight:e.get("maxHeight"),onCancel:function(){if(e.domNode.classList.contains("mwFocusableMenuChildMixin")){var a=
e.getParent();e.closeMenu(!1);a._closeEventData={mwEventData:{gainedFocusWidget:null}};a.closeRequest(!1)}else e.closeMenu(!0)},onClose:function(){e.get("menu")&&"_lastInvokingWidget"in e.get("menu")?(null!=e.get("menu")._lastInvokingWidget&&e._cleanUpAfterClose(e,!0),delete e.get("menu")._lastInvokingWidget):e._cleanUpAfterClose(e,!1);e.get("menu")&&"_onPositionListener"in e.get("menu")&&(e.get("menu")._onPositionListener.remove(),delete e.get("menu")._onPositionListener)}});var f=e.own(a(q,"resize",
function(){e.getParentWidget?e.closeMenu(!1):e.closeMenu(!0);f.length?[].slice.call(f).forEach(function(a){a.remove()}):f.remove()}))}}),0)},closeMenu:function(a){var b=this._handleClosingPopup(a);this._handleFocusOnClose(a,b)},_handleClosingPopup:function(a){if(this.isMenuOpen()){if(this.get("menu")){this.get("menu").getChildren().forEach(function(b){"menu"in b&&b.isMenuOpen()&&(b.get("menu")._closeEventData=this._closeEventData,b.closeMenu(a))},this);var b=this.get("menu")._closeEventData;m.close(this.get("menu"));
return b}}else if(this.get("menu"))return this.get("menu")._closeEventData},_handleFocusOnClose:function(a,b){!0===a?this.focus?this.focus():l.focus(this.focusNode||this.domNode):b&&"mwEventData"in b&&"gainedFocusWidget"in b.mwEventData&&b.mwEventData.gainedFocusWidget?l.focus(b.mwEventData.gainedFocusWidget.focusNode||b.mwEventData.gainedFocusWidget.domNode):l.focus(document.body)},startup:function(){if(!this._started){if(!this.get("menu")&&this.srcNodeRef){var a=query("[widgetId]",this.srcNodeRef)[0];
a&&this.set("menu",registry.byNode(a))}this.get("menu")&&m.hide(this.get("menu"));this.inherited(arguments)}},destroy:function(){this.isMenuOpen()&&this.closeMenu(!0);this.inherited(arguments)},_closeMenuOnParentClick:function(){return!0},_cleanUpAfterClose:function(a,b){!b&&a.get("menu")&&delete a.get("menu")._invokingWidget;a.domNode&&a.domNode.classList.remove("mwHasMenuOpened")},isMenuOpen:function(){return this.get("menu")&&this.get("menu")._invokingWidget&&this.get("menu")._invokingWidget===
this&&this.get("menu").domNode&&this.get("menu").domNode.parentElement&&this.get("menu").domNode.parentElement.classList.contains("dijitPopup")?"none"!==this.get("menu").domNode.parentElement.style.display:!1}})})},"mw-mixins/property/HasDynamicMenuMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-mixins/property/MenuMixin"],function(h,f,g){h=h(null,{hasDynamicMenu:!1,_setHasDynamicMenuAttr:function(e){this._set("hasDynamicMenu",e)},postCreate:function(){this.inherited(arguments);
this.domNode.classList.add("mwHasDynamicMenuMixin");this.set("hasDynamicMenu",this.get("hasDynamicMenu"))},openMenu:function(){this.get("hasDynamicMenu")?this.emit("dropdownclick",{}):this._showMenu()},showMenu:function(){this._showMenu();var e=this.menu.on("updatelayout",f.hitch(this.menu,function(){this._updateLayout&&this._updateLayout()})),d=this.menu.on("close",function(){e.remove();d.remove()})}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"mw-mixins/property/IconAlignmentMixin":function(){define(["dojo/_base/declare",
"dojo/dom-construct","mw-mixins/property/TextMixin","mw-mixins/property/IconMixin"],function(h,f,g,e){h=h(null,{CLASS_NAME_PREFIX:"mwIconAlignment",constructor:function(){this.ICON_ALIGNMENT_CONFIGURATION={top:{className:this.CLASS_NAME_PREFIX+"Top",textNodeLocation:"after"},right:{className:this.CLASS_NAME_PREFIX+"Right",textNodeLocation:"before"},bottom:{className:this.CLASS_NAME_PREFIX+"Bottom",textNodeLocation:"before"},left:{className:this.CLASS_NAME_PREFIX+"Left",textNodeLocation:"after"}}},
iconAlignment:"left",_supportedValues:["top","right","bottom","left"],postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwIconAlignmentMixin")},_setIconAlignmentAttr:function(d){if(!(this.get("iconAlignment")===d&&this._started)){if(-1===this._supportedValues.indexOf(d))throw Error("'iconAlignment' property expects one of these values: "+this._supportedValues);var c=this.ICON_ALIGNMENT_CONFIGURATION[this.get("iconAlignment")].className;this.domNode.classList.remove(c);this.domNode.classList.add(this.ICON_ALIGNMENT_CONFIGURATION[d].className);
f.place(this.textNode,this.iconNode,this.ICON_ALIGNMENT_CONFIGURATION[d].textNodeLocation);this._set("iconAlignment",d)}}});h._dependencies=[{mixin:g,orderDependent:!1},{mixin:e,orderDependent:!1}];return h})},"mw-mixins/property/ArrowModeMixin":function(){define(["dojo/_base/declare"],function(h){var f=["auto","inline","block"];return h(null,{arrowMode:"auto",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwArrowModeMixin")},_setArrowModeAttr:function(g){if("string"!==
typeof g||-1===f.indexOf(g))throw Error("'arrowMode' property expects one of these values: "+f);this.domNode.classList.add("mwArrowMode"+this._capitalize(g));f.forEach(function(e){e!==g&&this.domNode.classList.remove("mwArrowMode"+this._capitalize(e))},this);this._set("arrowMode",g)},_capitalize:function(f){return f.charAt(0).toUpperCase()+f.slice(1)}})})},"mw-mixins/property/SizeMixin":function(){define(["dojo/_base/lang","dojo/_base/declare"],function(h,f){return f(null,{width:"auto",height:"auto",
_allowedValues:["auto"],postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwSizeMixin");this.on("updatelayout",h.hitch(this,this._updateLayout))},startup:function(){this.inherited(arguments);this._updateLayout()},_updateLayout:function(){this._setWidthAttr(this.get("width"));this._setHeightAttr(this.get("height"))},_setWidthAttr:function(f){this._setSize("width",f)},_setHeightAttr:function(f){this._setSize("height",f)},_validateSizeInput:function(f){if(!("string"===typeof f&&
"auto"===f||"number"===typeof f&&0<f))throw Error(" Property should either be 'auto' or a positive integer");},_setSize:function(f,e){this._validateSizeInput(e);this._set(f,e);if(this._started){var d="",d=0<=this._allowedValues.indexOf(e)?e:this._getAdjustedSize(f,e,this.domNode);this.domNode.style[f]=d}},_getAdjustedSize:function(f,e,d){return e+"px"}})})},"mw-mixins/property/TabIndexNodesMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-mixins/property/DisabledMixin"],function(h,
f,g){var e=function(d){if(("object"!==typeof d||d.constructor!==Array)&&0<d.length&&d[0].constructor!==HTMLDivElement)throw Error("'tabIndexNodes' property expects an array of DOM nodes as input.");};h=h(null,{tabIndexNodes:[],addTabIndexNodes:function(d){e(d);this.set("tabIndexNodes",this.get("tabIndexNodes").concat(d))},removeTabIndexNodes:function(d){e(d);var c,b,a,f=this.get("tabIndexNodes");d.forEach(function(d){a=f.indexOf(d);-1===a?(c=f,b=[]):(c=f.slice(0,a),b=f.slice(a+1,a+1+(f.length-a)));
f=c.concat(b);d.removeAttribute("tabIndex")});this.set("tabIndexNodes",f)},_setTabIndexNodesAttr:function(d){e(d);this._set("tabIndexNodes",d);this._updateTabIndices()},_setDisabledAttr:function(d){this.inherited(arguments);this._updateTabIndices()},_updateTabIndices:function(){this.get("tabIndexNodes").forEach(f.hitch(this,function(d){this._setTabIndexOnNode(d)}))}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"mw-mixins/property/ValidationMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/mouse dojo/dom-geometry dojo/dom-construct dojo/on dojo/_base/window dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),
function(h,f,g,e,d,c,b,a,k){var l=h([a,k],{templateString:'\x3cdiv class\x3d"mwValidationTooltipDialog"\x3e\x3cdiv class\x3d"mwArrowNode" data-dojo-attach-point\x3d"arrowNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"mwContentsNode" data-dojo-attach-point\x3d"contentsNode"\x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',_setTextAttr:function(a){this.textNode.textContent=
a;this._set("text",a)}}),m=["error","warning","normal"];return h(null,{warningText:"",errorText:"",validationState:"normal",_setErrorTextAttr:function(a){if("string"!==typeof a)throw Error("errorText property expects a 'string'!");this.validationTooltip&&this.validationTooltip.set("text",a);this._set("errorText",a)},_setWarningTextAttr:function(a){if("string"!==typeof a)throw Error("warningText property expects a 'string'!");this.validationTooltip&&this.validationTooltip.set("text",a);this._set("warningText",
a)},_setValidationStateAttr:function(a){if("string"!==typeof a)throw Error("validationState property expects a 'string'!");if(-1===m.indexOf(a.toLowerCase()))throw Error("validationState property expects the value to be 'normal', 'error' or 'warning'!");this._set("validationState",a);var b=!1,c=!1;"error"===a.toLowerCase()?(c=!0,this._createValidationTooltip(),this.validationTooltip.set("text",this.get("errorText"))):"warning"===a.toLowerCase()&&(b=!0,this._createValidationTooltip(),this.validationTooltip.set("text",
this.get("warningText")));this.validationTooltip&&(this.domNode.classList.contains("mwWidgetFocused")&&(this.validationTooltip.domNode.classList.add("mwValidationFocused"),this._placeTooltip()),c?(this._getDomNodeForValidationClasses().classList.add("mwValidationError"),this.validationTooltip.domNode.classList.add("mwErrorTooltip")):(this._getDomNodeForValidationClasses().classList.remove("mwValidationError"),this.validationTooltip.domNode.classList.remove("mwErrorTooltip")),b?this.validationTooltip.domNode.classList.add("mwWarningTooltip"):
this.validationTooltip.domNode.classList.remove("mwWarningTooltip"),"normal"===a.toLowerCase()&&(this.validationTooltip.domNode.style.visibility="hidden"))},_createValidationTooltip:function(){this.validationTooltip||(this.validationTooltip=new l,this.validationTooltip.startup(),this.own(this.validationTooltip),this._addTooltipEvents())},_flipDomOrder:function(a){var b=a.children[1];d.place(a.children[0],d.place(b,a),"after");d.place(b.children[0],d.place(b.children[1],b),"after")},_tooltipOrientation:function(){return this.validationTooltip.domNode.classList.contains("mwTooltipLeft")?
"left":"right"},_getDomNodeForValidationClasses:function(){return this.domNode},_placeTooltip:function(){if(this.validationTooltip&&("error"===this.validationState||"warning"===this.validationState)){d.place(this.validationTooltip.domNode,b.body());var a=e.position(this.domNode),c,f,g,k,h,l,m,w=!1;c=a.x;f=a.y;g=a.w;"error"===this.validationState?(this._getDomNodeForValidationClasses().classList.add("mwValidationError"),this.validationTooltip.set("text",this.errorText),this.validationTooltip.domNode.classList.add("mwErrorTooltip")):
"warning"===this.validationState&&(this.validationTooltip.set("text",this.warningText),this.validationTooltip.domNode.classList.add("mwWarningTooltip"));this.validationTooltip.domNode.style.visibility="visible";l=e.position(this.validationTooltip.domNode).h/2;h=e.position(this.domNode).h/2;a=this.validationTooltip.domNode;m=e.position(b.body()).w;k=this._calculateTooltipWidth();var x=(document.documentElement||document.body.parentNode||document.body).scrollTop;c+g+k>m?(w=!0,c=c-k+"px",f=f+h-l+x+"px",
a.children[0].classList.contains("mwArrowNode")&&this._flipDomOrder(a)):(c=c+g+"px",f=f+h-l+x+"px");w?(this.validationTooltip.domNode.classList.add("mwTooltipLeft"),this.validationTooltip.domNode.classList.remove("mwTooltipRight")):(this.validationTooltip.domNode.classList.remove("mwTooltipLeft"),this.validationTooltip.domNode.classList.add("mwTooltipRight"));this.validationTooltip.domNode.style.left=c;this.validationTooltip.domNode.style.top=f}},_calculateTooltipWidth:function(){this.validationTooltip.domNode.classList.add("mwTooltipLeft");
var a=e.position(this.validationTooltip.domNode).w;this.validationTooltip.domNode.classList.remove("mwTooltipLeft");return a},_addTooltipEvents:function(){this.own(c(this,g.enter,f.hitch(this,function(){this._placeTooltip()})),c(this,g.leave,f.hitch(this,function(){this.validationTooltip&&(this.validationTooltip.domNode.style.visibility="hidden")})),c(this.focusNode,"focus",f.hitch(this,function(){this._placeTooltip();this.validationTooltip&&("error"===this.get("validationState")||"warning"===this.get("validationState"))&&
this.validationTooltip.domNode.classList.add("mwValidationFocused")})),c(this.focusNode,"blur",f.hitch(this,function(){this.validationTooltip&&(this.validationTooltip.domNode.classList.remove("mwValidationFocused"),this.validationTooltip.domNode.style.visibility="hidden")})))}})})},"mw-mixins/ResizeMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_isResized:!1,startup:function(){this.inherited(arguments);if(!this._isResized){for(var f={parentNode:this.domNode},g=!0;(f=f.parentNode)&&
f!==document;)if("none"===f.style.display){g=!1;break}g&&this.resize()}},resize:function(){this.inherited(arguments);this.getChildren&&this.getChildren().forEach(function(f){f.resize&&f.resize()},this);this._isResized=!0}})})},"mw-form/mixins/property/DropDownButtonIconAlignmentMixin":function(){define(["dojo/_base/declare","mw-mixins/property/IconAlignmentMixin","mw-mixins/property/ArrowModeMixin","mw-form/mixins/property/DropDownButtonArrowModeMixin"],function(h,f,g,e){h=h(null,{_supportedValues:["left",
"top"],_setIconAlignmentAttr:function(){this.inherited(arguments);this.set("arrowMode",this.get("arrowMode"))}});h._dependencies=[{mixin:f,orderDependent:!0},{mixin:g,orderDependent:!1},{mixin:e,orderDependent:!1}];return h})},"mw-form/mixins/property/DropDownButtonArrowModeMixin":function(){define(["dojo/_base/declare","mw-mixins/property/ArrowModeMixin","mw-mixins/property/TextMixin","mw-form/mixins/property/DropDownButtonTextMixin"],function(h,f,g,e){h=h(null,{_setArrowModeAttr:function(){this.inherited(arguments);
this.set("text",this.get("text"))}});h._dependencies=[{mixin:f,orderDependent:!0},{mixin:g,orderDependent:!1},{mixin:e,orderDependent:!1}];return h})},"mw-form/mixins/property/DropDownButtonTextMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","mw-mixins/property/TextMixin","mw-mixins/property/SizeMixin","mw-form/mixins/property/DropDownButtonSizeMixin"],function(h,f,g,e,d){h=h(null,{_updateTextInDOM:function(c){this.inherited(arguments);this._placeTextAndResize(c)},_placeTextAndResize:function(c){var b=
this._getPeerAndPosition();f.place(this.textNode,b.peer,b.position);this._placeTextInNode(c,this.lastTextLineNode);this.set("width",this.get("width"));this.set("height",this.get("height"))},_getPeerAndPosition:function(){var c={};this._isInline()?(c.peer=this.arrowNode,c.position="before"):(c.peer=this.iconNode,c.position="after");return c},_getSplitTextAtLastNewLineCharacter:function(c){var b={};if(this._isInline()){var a=c.lastIndexOf("\n");0<=a?(b.mainText=c.substring(0,a),b.lastTextLine=c.substring(a+
1,c.length)):"left"===this.get("iconAlignment")?(b.mainText="",b.lastTextLine=c):(b.mainText=c,b.lastTextLine="")}else b.mainText=c,b.lastTextLine="";return b},_isInline:function(){return"inline"===this.get("arrowMode")||"auto"===this.get("arrowMode")&&"top"===this.get("iconAlignment")},_getTextForDOM:function(c,b){c=this.inherited(arguments);var a=this._getSplitTextAtLastNewLineCharacter(c);return b===this.textNode?a.mainText:b===this.lastTextLineNode?a.lastTextLine:c}});h._dependencies=[{mixin:g,
orderDependent:!0},{mixin:e,orderDependent:!1},{mixin:d,orderDependent:!1}];return h})},"mw-form/mixins/property/DropDownButtonSizeMixin":function(){define(["dojo/_base/declare","dojo/dom-geometry","mw-mixins/property/SizeMixin"],function(h,f,g){h=h(null,{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,doNotSize:!1,_setSize:function(e,d){this.inherited(arguments);if(this._started&&!this.doNotSize){var c="";if("auto"!==d){var b,a,g;a=f.getMarginBox(this.get("iconNode"));var h=f.getMarginBox(this.get("textNode"));
g=f.getMarginBox(this.get("arrowNode"));c=parseFloat(this._getAdjustedSize(e,d,this.domNode));if("width"===e&&"left"===this.get("iconAlignment")&&"inline"===this.get("arrowMode"))b=a.w+g.w,c<b?(b=c/2,c/=2):(a=b/2-a.w,g=b/2-g.w,b=c/2-a,c=c/2-g),this._setDomStyles("width",b,c);else if("height"===e&&"top"===this.get("iconAlignment")&&("inline"===this.get("arrowMode")||"auto"===this.get("arrowMode")))b=a.h+h.h+g.h+1,0>b&&(b=0),c<b?(b=c/2,c/=2):(a=b/2-a.h,g=b/2-(h.h+g.h),b=c/2-a+1,c=c/2-g-1),this._setDomStyles("height",
b,c);else if("width"===e&&"left"===this.get("iconAlignment")&&("block"===this.get("arrowMode")||"auto"===this.get("arrowMode")))b=c-g.w,c=g.w,this._setDomStyles("width",b,c);else if("height"===e&&"top"===this.get("iconAlignment")&&"block"===this.get("arrowMode"))b=c-g.h-3,c=g.h+1,this._setDomStyles("height",b,c);else if("width"===e)c=(c<this.maxWidth?c:this.maxWidth)>this.minWidth?c:this.minWidth,this._setDomStyles("width",c,c);else if("height"===e)c=(c<this.maxHeight?c:this.maxHeight)>this.minHeight?
c:this.minHeight,this._setDomStyles("height",c,c);else throw Error("Invalid property value. The size type property expects one of these values: {'width', 'height', 'auto'}");}else this.domNode.style["min"+this._capitalize(e)]=this["min"+this._capitalize(e)]+"px";this._set(e,d)}},_setDomStyles:function(e,d,c){this.buttonNode.style[e]=d+"px";this.buttonNode.style["max"+this._capitalize(e)]=d+"px";this.dropDownNode.style[e]=c+"px";this.dropDownNode.style["max"+this._capitalize(e)]=c+"px"},_capitalize:function(e){return e.charAt(0).toUpperCase()+
e.slice(1)}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"mw-form/mixins/property/DropDownNeverDisabledMixin":function(){define("dojo/_base/declare dojo/dom-geometry mw-mixins/property/DisabledMixin mw-mixins/property/IconMixin mw-mixins/property/TextMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonSizeMixin".split(" "),function(h,f,g,e,d,c,b,a){h=h(null,{dropDownNeverDisabled:!1,
_laskKnownDisabledNode:null,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDropDownNeverDisabledMixin");this.set("dropDownNeverDisabled",this.get("dropDownNeverDisabled"))},_setDropDownNeverDisabledAttr:function(a){if("boolean"!==typeof a)throw Error("'dropDownNeverDisabled' property expects a boolean!");this._set("dropDownNeverDisabled",a);a?this.domNode.classList.add("mwDropDownNeverDisabledTrue"):this.domNode.classList.remove("mwDropDownNeverDisabledTrue");this._updateInteractions(a);
this._setAriaDisabled();this._setTabIndexOnNode(this.focusNode)},_updateInteractions:function(a){a=this._getDisabledNode();this._removeDisableInteractions(this._laskKnownDisabledNode);this._addDisableInteractions(a);this._updateLastKnownDisabledNode(a)},_updateDisableNode:function(a){a?(this.domNode.classList.add("mwDisabled"),this.domNode.classList.remove("mwEnabled")):(this.domNode.classList.add("mwEnabled"),this.domNode.classList.remove("mwDisabled"));this._updateInteractions(a)},_updateLastKnownDisabledNode:function(a){this._laskKnownDisabledNode=
a},_getDisabledNode:function(){var a;this.get("disabled")?this.dropDownNeverDisabled?a=this.buttonNode:this.dropDownNeverDisabled||(a=this.domNode):a=null;return a},_getOverlayPositionExtents:function(){var a=f.getBorderExtents(this.domNode);if(this.get("dropDownNeverDisabled")){var b=f.getMarginBox(this.focusNode);"left"===this.get("iconAlignment")?a.r=-b.w:"top"===this.get("iconAlignment")&&(a.b=-b.h)}return{t:-a.t+"px",r:-a.r+"px",b:-a.b+"px",l:-a.l+"px"}}});h._dependencies=[{mixin:g,orderDependent:!0},
{mixin:e,orderDependent:!0},{mixin:d,orderDependent:!0},{mixin:c,orderDependent:!0},{mixin:b,orderDependent:!0},{mixin:a,orderDependent:!0}];return h})},"mw-form/mixins/SplitButtonToggleSplitButtonMenuMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-construct dojo/on mw-dom-utils/domUtils mw-utils/widgetUtils mw-mixins/property/MenuMixin".split(" "),function(h,f,g,e,d,c,b,a){h=h(null,{buildRendering:function(){this.inherited(arguments);e.place(this.buttonNode,this.focusNode,
"before")},_onMouseClick:function(a){this.inherited(arguments);g.isDescendant(a.target,this.buttonNode)&&this.isMenuOpen()&&this.closeMenu(!1)}});h._dependencies=[{mixin:a,orderDependent:!0}];return h})},"mw-form/mixins/SplitButtonToggleSplitButtonFocusMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","mw-dom-utils/domUtils"],function(h,f,g,e){return h(null,{postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"mousedown",f.hitch(this,function(d){this.buttonNode.contains(d.target)&&
setTimeout(f.hitch(this,function(){this.focusNode.focus()}),0)})),g(this.focusNode,"focus",f.hitch(this,"_handleFocus")),g(this.focusNode,"blur",f.hitch(this,"_handleBlur")))},_handleFocus:function(){this.baseClass.split(" ").forEach(f.hitch(this,function(d){e.toggleClass(this.domNode,d+"Focused",!0)}))},_handleBlur:function(){this.baseClass.split(" ").forEach(f.hitch(this,function(d){e.toggleClass(this.domNode,d+"Focused",!1)}))}})})},"mw-navigationbar/ActionToolbar":function(){define("dojo/_base/declare dojo/dom dojo/dom-construct dojo/dom-class dojo/on dojo/dom-attr".split(" "),
function(h,f,g,e,d,c){return h([],{constructor:function(b){b=b||{};this._actionsList=b.actionsList;this.navigationBarNode=b.navigationBarNode;this.actionToolbarContainer=g.create("div");e.add(this.actionToolbarContainer,"actionToolbarContainerNode");this.navigationBarNode.appendChild(this.actionToolbarContainer);g.place(this.actionToolbarContainer,this.navigationBarNode,"first");var a=this;this._actionsList.forEach(function(b){var f=g.create("div");a[b.id]=b;d(f,"click",function(){b.callback(a)});
e.add(f,b.actionClass);c.set(f,"title",b.text);b.disabled?(f.setAttribute("enabled","false"),e.remove(f,"actionEnabled"),e.add(f,"actionDisabled")):(f.setAttribute("enabled","true"),e.add(f,"actionEnabled"),e.remove(f,"actionDisabled"));a.actionToolbarContainer.appendChild(f)})}})})},"mw-overlay-utils/BusyOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-style dojo/dom-attr dojo/query dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/on dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin spinner/spin mw-log/Log dojo/text!./templates/busyOverlayTemplate.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,zIndex:2E9,top:"50%",left:"50%"},u={lines:11,length:8,width:4,radius:12,corners:0.5,className:"spinner spinnerLarge"},v={lines:11,length:5,width:3,radius:8,corners:1,className:"spinner spinnerMedium"},w={lines:11,length:4,width:2,radius:6,corners:1,className:"spinner spinnerSmall"},x={lines:9,length:2,width:2,radius:4,corners:0,className:"spinner spinnerXSmall"};f.mixin(u,t);f.mixin(v,
t);f.mixin(w,t);f.mixin(x,t);h=h("MW.utils.BusyOverlay",[q,n],{_displayed:!1,_started:!1,_spinner:null,_size:null,target:null,_text:"",_textSpan:null,_spinnerTextNode:null,templateString:s,constructor:function(c){this._textSpan=a.create("span");this._spinnerTextNode=a.create("div");Object.defineProperty(this,"text",{set:function(a){this._text=a;this._text&&"string"===typeof this._text||(this._text="");this._textSpan.textContent=this._text;this._started&&this._updateTitle()},get:function(){return this._text},
enumerable:!0,configurable:!0});this._setSpinnerSize(c);b.add(this._spinnerTextNode,"spinnerText");c&&c.text&&this.set("text",c.text)},_setSpinnerSize:function(a){try{if(null===a||void 0===a||a.text&&!a.size)this._size=f.clone(u);else if("object"===typeof a)this._size=a.size?f.clone(a.size):f.clone(a);else throw Error("Incorrect argument passed to BusyOverlay Object.");}catch(b){r.error(b.message)}},_updateTitle:function(){b.remove(this._textSpan,"spinnerCenter");this._textSpan.offsetWidth>=this._spinnerTextNode.offsetWidth?
d.set(this._spinnerTextNode,"title",this._text):d.set(this._spinnerTextNode,"title","");b.add(this._textSpan,"spinnerCenter")},_updateTextStyle:function(){var a=k.position(this._underlayNode).h/2+2*this._size.radius+15+"px";e.set(this._spinnerTextNode,"top",a)},startup:function(){if(!this._started){this._spinner=new p(this._size);if(this.target){if("string"===typeof this.target){var b=m.byId(this.target);this.target=b?b.domNode:g.byId(this.target)}a.place(this.domNode,this.target);a.place(this._textSpan,
this._spinnerTextNode);a.place(this._spinnerTextNode,this._busyOverlayNode)}this._text&&(this._updateTitle(),this.own(l(window,"resize",this._updateTextStyle.bind(this))));this._started=!0;this.inherited(arguments)}},postCreate:function(){this._underlayNode.style.zIndex=2E9-1;this.inherited(arguments)},show:function(){this._displayed||(this._started||this.startup(),this._displayed=!0,this._busyOverlayNode.style.display="inline",this._busyOverlayNode.className="mw-busyIndicator",this._updateTextStyle(),
e.set(this._spinnerTextNode,"display","block"),this._spinner.spin(this._spinnerNode),this.onShow())},hide:function(){this._displayed&&(this._displayed=!1,this._busyOverlayNode.style.display="none",this._spinner.stop(),this._spinnerTextNode.style.display="none",this.onHide())},uninitialize:function(){this.hide();this._spinner=this.target=null;this._displayed=!1;c(".spinnerText").forEach(a.destroy);this._spinnerTextNode=this._textSpan=null;this.inherited(arguments)},isVisible:function(){return this._displayed},
onShow:function(){},onHide:function(){this.inherited(arguments)}});h.SIZE={LARGE:u,MEDIUM:v,SMALL:w,XSMALL:x};Object.freeze(h.SIZE);Object.freeze(h.SIZE.LARGE);Object.freeze(h.SIZE.MEDIUM);Object.freeze(h.SIZE.SMALL);Object.freeze(h.SIZE.XSMALL);return h})},"spinner/spin":function(){define([],function(){function h(a,b){var c=document.createElement(a||"div"),d;for(d in b)c[d]=b[d];return c}function f(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function g(a,b,c,d){var e=
["opacity",b,~~(100*a),c,d].join("-");c=0.01+100*(c/d);d=Math.max(1-(1-a)/b*(100-c),a);var f=m.substring(0,m.indexOf("Animation")).toLowerCase();l[e]||(q.insertRule("@"+(f&&"-"+f+"-"||"")+"keyframes "+e+"{0%{opacity:"+d+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+"}100%{opacity:"+d+"}}",q.cssRules.length),l[e]=1);return e}function e(a,b){var c=a.style,d,e;b=b.charAt(0).toUpperCase()+b.slice(1);for(e=0;e<k.length;e++)if(d=k[e]+b,void 0!==c[d])return d;if(void 0!==c[b])return b}
function d(a,b){for(var c in b)a.style[e(a,c)||c]=b[c];return a}function c(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)void 0===a[d]&&(a[d]=c[d])}return a}function b(a){this.opts=c(a||{},b.defaults,n)}function a(){function a(b,c){return h("\x3c"+b+' xmlns\x3d"urn:schemas-microsoft.com:vml" class\x3d"spin-vml"\x3e',c)}q.addRule(".spin-vml","behavior:url(#default#VML)");b.prototype.lines=function(b,c){function e(){return d(a("group",{coordsize:h+" "+h,coordorigin:-k+" "+-k}),
{width:h,height:h})}function g(b,h,l){f(m,f(d(e(),{rotation:360/c.lines*b+"deg",left:~~h}),f(d(a("roundrect",{arcsize:c.corners}),{width:k,height:c.width,left:c.radius,top:-c.width>>1,filter:l}),a("fill",{color:"string"==typeof c.color?c.color:c.color[b%c.color.length],opacity:c.opacity}),a("stroke",{opacity:0}))))}var k=c.length+c.width,h=2*k,l=2*-(c.width+c.length)+"px",m=d(e(),{position:"absolute",top:l,left:l});if(c.shadow)for(l=1;l<=c.lines;l++)g(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius\x3d2,makeshadow\x3d1,shadowopacity\x3d.3)");
for(l=1;l<=c.lines;l++)g(l);return f(b,m)};b.prototype.opacity=function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;if(a&&b+d<a.childNodes.length&&(a=(a=(a=a.childNodes[b+d])&&a.firstChild)&&a.firstChild))a.opacity=c}}var k=["webkit","Moz","ms","O"],l={},m,q=function(){var a=h("style",{type:"text/css"});f(document.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,
zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};b.defaults={};c(b.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,e=b.el=d(h(0,{className:c.className}),{position:c.position,width:0,zIndex:c.zIndex});d(e,{left:c.left,top:c.top});a&&a.insertBefore(e,a.firstChild||null);e.setAttribute("role","progressbar");b.lines(e,b.opts);if(!m){var f=0,g=(c.lines-1)*(1-c.direction)/2,k,l=c.fps,n=l/c.speed,q=(1-c.opacity)/(n*c.trail/100),p=n/c.lines;(function L(){f++;for(var a=
0;a<c.lines;a++)k=Math.max(1-(f+(c.lines-a)*p)%n*q,c.opacity),b.opacity(e,a*c.direction+g,k,c);b.timeout=b.el&&setTimeout(L,~~(1E3/l))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(a,b){function c(a,f){return d(h(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:f,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*e+b.rotate)+"deg) translate("+
b.radius+"px,0)",borderRadius:(b.corners*b.width>>1)+"px"})}for(var e=0,k=(b.lines-1)*(1-b.direction)/2,l;e<b.lines;e++)l=d(h(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:m&&g(b.opacity,b.trail,k+e*b.direction,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&f(l,d(c("#000","0 0 4px #000"),{top:"2px"})),f(a,f(l,c("string"==typeof b.color?b.color:b.color[e%b.color.length],"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,
b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var p=d(h("group"),{behavior:"url(#default#VML)"});!e(p,"transform")&&p.adj?a():m=e(p,"animation");return b})},"mw-navigationbar/toolbaractions/BackNavigationAction":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/on dojo/query dojo/_base/lang ./Action dojo/i18n!../l10n/nls/navigationBar".split(" "),function(h,f,g,e,d,c,b,a,k){return h([a,g],{constructor:function(a){a=a||{};this.dataSource=a.dataSource;
this.id="backButtonWidget";this.enabled=!1;this.actionClass="navBarBackButton";this.text=k.back;this.callback=b.hitch(this,function(a){this.enabled&&(this.dataSource.oldLocation=this.dataSource.currentNode,this.emit("locationChanged",this.dataSource.currentNode.prev.value),this.dataSource.updateCurrentNode(this.dataSource.currentNode.prev))});d(this.dataSource,"currentNodeUpdated",b.hitch(this,function(a){a=this._getBackNavActionNode();null!==this.dataSource.currentNode.prev?(this.enabled=!0,a.setAttribute("enabled",
"true"),e.remove(a,"actionDisabled"),e.add(a,"actionEnabled")):(this.enabled=!1,a.setAttribute("enabled","false"),e.remove(a,"actionEnabled"),e.add(a,"actionDisabled"))}))},_getBackNavActionNode:function(){return c(".navBarBackButton")[0]},postCreate:function(a){this.inherited(arguments)}})})},"mw-navigationbar/toolbaractions/Action":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{id:"",text:"",actionClass:"",enabled:function(){return!1},constructor:function(g){f.mixin(this,
g)},callback:function(){}})})},"mw-navigationbar/toolbaractions/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Evented","./LocationNode"],function(h,f,g,e){return h([g],{constructor:function(d){this.dataList=[];this.locked=!1},addToDataList:function(d){0===this.dataList.length?(this.currentNode=d=new e({val:d}),this.dataList.push(d)):(d=new e({val:d}),d.prev=this.currentNode,this.currentNode=this.currentNode.next=d);this.updateCurrentNode(d)},updateCurrentNode:function(d){this.currentNode=
d;this.emit("currentNodeUpdated",this.currentNode)},setOldLocationNode:function(){this.updateCurrentNode(this.oldLocation)}})})},"mw-navigationbar/toolbaractions/LocationNode":function(){define(["dojo/_base/declare"],function(h){return h([],{constructor:function(f){this.value=f.val;this.next=this.prev=null}})})},"mw-navigationbar/toolbaractions/ForwardNavigationAction":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/on dojo/query dojo/_base/lang ./Action dojo/i18n!../l10n/nls/navigationBar".split(" "),
function(h,f,g,e,d,c,b,a,k){return h([a,g],{constructor:function(a){a=a||{};this.dataSource=a.dataSource;this.id="forwardButtonWidget";this.actionClass="navBarForwardButton";this.enabled=!1;this.text=k.forward;this.callback=b.hitch(this,function(a){this.enabled&&(this.dataSource.oldLocation=this.dataSource.currentNode,this.emit("locationChanged",this.dataSource.currentNode.next.value),this.dataSource.updateCurrentNode(this.dataSource.currentNode.next))});d(this.dataSource,"currentNodeUpdated",b.hitch(this,
function(a){a=this._getForwardNavActionNode();null!==this.dataSource.currentNode.next?(this.enabled=!0,a.setAttribute("enabled","true"),e.remove(a,"actionDisabled"),e.add(a,"actionEnabled")):(this.enabled=!1,a.setAttribute("enabled","false"),e.remove(a,"actionEnabled"),e.add(a,"actionDisabled"))}))},_getForwardNavActionNode:function(){return c(".navBarForwardButton")[0]},postCreate:function(a){this.inherited(arguments)}})})},"MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip":function(){define("dijit/Destroyable dijit/Tooltip dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on MW/rtc/plugins/view/tooltip/TooltipUtilities".split(" "),
function(h,f,g,e,d,c,b){return g(h,{_TOOLTIP_WRAPPER_CLASS:"rtcDescriptiveTooltip",_TOOLTIP_DESCRIPTION_CLASS:"detailedDescription",_TOOLTIP_SHORTCUT_INFO_CLASS:"shortcutInfo",_TOOLTIP_KEY_BINDING_CLASS:"keyBinding",_TOOLTIP_DELAY:400,constructor:function(a){if(!a.targetNode||!a.label)throw Error("Required arguments not provided");this._targetNode=a.targetNode;a=this._buildMessage(a.label,a.description,a.cssClasses,a.keyBinding);this.own(c(this._targetNode,"mouseenter",e.hitch(this,"_showTooltip",
a)));this.own(c(this._targetNode,"mouseleave",e.hitch(this,"_hideTooltip")));this.own(c(this._targetNode,"click",e.hitch(this,"_hideTooltip")));this._tooltipTimer=null},_showTooltip:function(a){this._tooltipTimer=setTimeout(e.hitch(this,function(){f.show(a,this._targetNode,["below","above"])}),this._TOOLTIP_DELAY)},_hideTooltip:function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null;f.hide(this._targetNode)},_buildMessage:function(a,b,c,e){e&&(e=d.create("span",{"class":this._TOOLTIP_KEY_BINDING_CLASS,
innerHTML:e}),a=d.create("span",{"class":this._TOOLTIP_SHORTCUT_INFO_CLASS,innerHTML:"("+e.outerHTML+")"}).outerHTML+a);b&&(b=d.create("span",{"class":this._TOOLTIP_DESCRIPTION_CLASS,innerHTML:b}),a=a+"\x3cbr\x3e"+b.outerHTML);return this._wrapTooltipContent(a,c)},_wrapTooltipContent:function(a,c){var e=this._TOOLTIP_WRAPPER_CLASS;c&&(e=e+" "+c);return d.create("div",{"class":e,innerHTML:b.createUnfocusableTooltipTextHTML(a)}).outerHTML},destroy:function(){this.inherited(arguments);this._hideTooltip()}})})},
"MW/rtc/plugins/view/tooltip/TooltipUtilities":function(){define(["dojo/dom-construct","MW/uiframework/FocusManager"],function(h,f){return{createUnfocusableTooltipTextHTML:function(g){g=h.toDom("\x3cdiv\x3e"+g+"\x3c/div\x3e");f.refuseFocus(g);return g.outerHTML}}})},"MW/uiframework/FocusManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/query dijit/popup dijit/registry".split(" "),function(h,f,g,e,d,c,b,a){var k=function(a){for(;a;){if(a.getAttribute&&
"refuse"===a.getAttribute("data-focus")||"refuse"===e.get(a,"data-focus"))return!0;a=a.parentNode}return!1},l=function(a){for(;a;){if("temporary"===e.get(a,"data-focus"))return!0;a=a.parentNode}return!1},m=function(a){for(var b=c("[data-tag\x3d'motwToolstrip.figureTab.menuAndToolbars.menubarWrapper']"),b=0<b.length?b[0]:null;a&&!("accept"===e.get(a,"data-focus")||b&&g.isDescendant(a,b));){if("refuse"===e.get(a,"data-focus"))return!1;a=a.parentNode}return!0},q=null,n=null,p=null,r=h(null,{_restoreFocusToLastNonRefuseElementHandler:function(){r.restoreToLastNonRefuseElement()},
_restoreFocusHandler:function(){r.restoreFocus()},_blurHandler:function(){r._windowBlurred=!0},_mouseDownHandler:function(c){!l(c.target)&&!m(c.target)&&(k(c.target)?setTimeout(function(){0===b._stack.length&&(a.getEnclosingWidget(n)&&a.getEnclosingWidget(n).set("focused",!0),n&&n.focus())},0):0<b._stack.length?setTimeout(function(){n&&n.focus()},0):n=c.target)},_focusHandler:function(a){if("IFRAME"!==a.target.tagName)if(!0===r._windowBlurred)r._windowBlurred=!1,r.restoreFocus();else if(q=a.target,
!k(q)&&!l(q)&&(p=a.target),!(q.getAttribute&&"temporary"===q.getAttribute("data-focus")||"temporary"===e.get(q,"data-focus"))&&!l(q))m(q)?a.target!==document.body&&(n=a.target):k(q)?n?setTimeout(function(){var c;if(!(c=0===b._stack.length&&n))a:{for(c=a.target;c;){if(d.contains(c,"dijitPopup")){c=!0;break a}c=c.parentNode}c=!1}c&&n.focus()},0):document.activeElement.blur():a.target!==document.body&&(n=a.target)},_closeHandler:function(a){a.target.contains(document.activeElement)&&n&&n.focus()},constructor:function(a,
b){r._instantiated=!0;b&&r.refuseFocus(b.domNode);document.addEventListener("restorefocustolastnonrefuseelement",this._restoreFocusToLastNonRefuseElementHandler);document.addEventListener("restorefocus",this._restoreFocusHandler);window.addEventListener("blur",this._blurHandler);window.addEventListener("focus",this._focusHandler,!0);document.addEventListener("mousedown",this._mouseDownHandler,!0);document.addEventListener("close",this._closeHandler,!0);document.body.classList.add("mwHasFocusManager")},
destroy:function(){document.removeEventListener("restorefocustolastnonrefuseelement",this._restoreFocusToLastNonRefuseElementHandler);document.removeEventListener("restorefocus",this._restoreFocusHandler);window.removeEventListener("blur",this._blurHandler);window.removeEventListener("focus",this._focusHandler,!0);document.removeEventListener("mousedown",this._mouseDownHandler,!0);document.body.classList.remove("mwHasFocusManager")}});r.refuseFocus=function(a){a.setAttribute("data-focus","refuse")};
r.acceptFocus=function(a){a.setAttribute("data-focus","accept")};r.temporaryFocus=function(a){a.setAttribute("data-focus","temporary")};r.restoreFocus=function(a){a?n.focus():setTimeout(function(){n&&n.focus()},0)};r.restoreToLastNonRefuseElement=function(){setTimeout(f.hitch(this,function(){p&&p.focus()},0))};r.isAvailable=function(){return!0===r._instantiated?!0:!1};return r})},"MW/rtc/plugins/descriptivetooltip/DescriptiveTooltipUtilities":function(){define(["dojo/dom-construct"],function(h){return{_CODE_FORMAT_CLASS:"codeFormat",
styleAsCode:function(f){return h.create("span",{"class":this._CODE_FORMAT_CLASS,textContent:f}).outerHTML}}})},"MW/rtc/plugins/debug/executionarrow/ExecutionArrowDecoratorProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/margin/ExecutionArrowDecorator","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{isApplicable:function(c){return g.isPlainCodeFile(c)},requires:function(){return{isApplicable:["rtc.backingstore"],
createInstance:"rtc.editordataservice rtc.linenumberservice rtc.view rtc.featureinterface rtc.document rtc.service.documentloaded".split(" ")}},createInstance:function(c,b,a,d,f,g){return new e(c,b,a,d,f,g)}})})},"MW/rtc/margin/ExecutionArrowDecorator":function(){define("dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/mouse dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/margin/AbstractLineMarginDecorator".split(" "),function(h,f,g,e,d,c,b,a,k){return c(k,{EXECUTION_ARROW_FEATURE_ID:"matlab.debug.executionarrow",
NO_LINE:-1,constructor:function(a,c,d,e,f,g){this._editorDataService=a;this._lineNumberService=c;this._view=d;this._document=f;this._documentLoadedService=g;this._topOfStack=[];this._exitingStack=[];this._inStack=[];this._currentMouseClickPosition=this.NO_LINE;this.own(this._editorDataService.listenTo(this.EXECUTION_ARROW_FEATURE_ID,b.hitch(this,"_updateData")))},_updateData:function(a){this._topOfStack=a.TOP_OF_STACK;this._inStack=a.IN_STACK;this._exitingStack=a.EXITING_STACK;this.onUpdate()},handleMouseDown:function(a,
b){d.isLeft(a)&&(this._currentMouseClickPosition=this._lineNumberService.getCodeLineNumberAtOrBeforeLineNumber(b)-1,this.onUpdate())},handleMouseUp:function(a,b){d.isLeft(a)&&(this._currentMouseClickPosition=this.NO_LINE,this.onUpdate())},handleMouseLeave:function(){this._currentMouseClickPosition!==this.NO_LINE&&(this._currentMouseClickPosition=this.NO_LINE,this.onUpdate())},_mouseClickAtLine:function(a){return this._currentMouseClickPosition===a},hasLayerForLineNumber:function(a,b){return!this._mouseClickAtLine(a)&&
(this._isOnTopOfStack(a)||this._isInStack(a)||this._isExitingStack(a))},_isOnTopOfStack:function(a){return this._doesStackDataIncludeLineNumber(this._topOfStack,a)},_doesStackDataIncludeLineNumber:function(a,b){return-1!==a.indexOf(b)},_isInStack:function(a){return this._doesStackDataIncludeLineNumber(this._inStack,a)},_isExitingStack:function(a){return this._doesStackDataIncludeLineNumber(this._exitingStack,a)},createDecorationForLineNumber:function(b,c){a.assert(this.hasLayerForLineNumber(b,c),
"Unexpected call to ExecutionArrowDecorator createDecorationForLineNumber - which hasLayerForLineNumber returns false");var d=e.create("div");this._applyStyle(d,b,c);return d},_applyStyle:function(a,b,c){var d=[];g.add(a,"commonArrow");d.push("debugging");var e;this._isOnTopOfStack(b)?e=this._augmentArrowCssClass("topOfStackArrow",c):this._isExitingStack(b)?e=this._augmentArrowCssClass("exitingStackArrow",c):this._isInStack(b)&&(e=this._augmentArrowCssClass("inStackArrow",c));d.push(e);g.add(a,e);
this._addTestTag(a,d,b)},_augmentArrowCssClass:function(a,b){return a+(b?"OverBreakpoint":"")},_addTestTag:function(a,b,c){c=b&&0<b.length?c+"_"+b.join("_"):c+"_invalid";f.set(a,"data-testid",c)},getWidth:function(){return 15}})})},"MW/rtc/plugins/debug/executionlines/ExecutionLinesPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/executionlines/ExecutionLinesPlugin","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:"rtc.document rtc.cursor debug.documentdebugservices rtc.view.decoration rtc.linenumberservice rtc.embeddedoutputs.linenumbertracker rtc.service.documentloaded rtc.backingstore".split(" ")}},createInstance:function(e,d,c,b,a,g,h,m){return new f(e,d,c,b,a,g,h,m)}})})},"MW/rtc/plugins/debug/executionlines/ExecutionLinesPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/PositionUtilities MW/rtc/model/Range".split(" "),
function(h,f,g,e,d,c){return h(e,{EXECUTION_LINE_CSS:"executionLine",EXECUTION_POINT_CSS:"activeLine",STACK_LINE_CSS:"inStack",constructor:function(b,a,c,d,e,h,n,p){this._document=b;this._cursor=a;this._documentDebugServices=c;this._decorator=d.createLayerDecorator();this._lineNumberService=e;this._lineNumberTracker=h;this._documentLoadedService=n;this._backingStore=p;this._currentStackLineRanges=[];this.own(g.after(this._documentDebugServices,"onStackChanged",f.hitch(this,"_handleStackChanged")));
this._setupBackingStoreListener();this._drawExecutionLinesAfterDocumentReady()},_setupBackingStoreListener:function(){this._backingStore.onFilePathUpdated&&this.own(g.after(this._backingStore,"onFilePathUpdated",f.hitch(this,"_handleFilePathUpdated")))},_handleFilePathUpdated:function(){this._clearViewAndApplyChanges()},_handleStackChanged:function(){this._drawExecutionLinesAfterDocumentReady()},_drawExecutionLinesAfterDocumentReady:function(){this._documentLoadedService.whenDocumentLoadedWithText(f.hitch(this,
function(){this._drawExecutionLines()}))},_drawExecutionLines:function(){var b=this._documentDebugServices.getStackFrames();this._clearView();this._deleteCurrentStackLineRanges();this._validStackForFile(b)&&(b.forEach(function(a){if(null!=a.getLineNumber()){var b=a.getLineNumber()-1,d=this._getCurrentLineNumberFromPreExecutionLineNumber(b);this._stackLineAlreadyHighlighted(d)||(b=this._document.createPositionAtLineColumn(d,0),d=this._document.createPositionAtLineColumn(d,0,!0),b=new c(b,d),d=[this.EXECUTION_LINE_CSS],
a.isExecutionPoint()?d.push(this.EXECUTION_POINT_CSS):d.push(this.STACK_LINE_CSS),this._decorator.addClass(b,d),this._currentStackLineRanges.push(b))}},this),this._decorator.applyChanges())},_getCurrentLineNumberFromPreExecutionLineNumber:function(b){b=this._lineNumberTracker.createPositionFromOldLineNumber(b);var a=b.getLineColumn().line;b.destroy();return a-1},_stackLineAlreadyHighlighted:function(b){var a=!1;b=this._document.createPositionAtLineColumn(b,0);for(var c=0;c<this._currentStackLineRanges.length;c++){var e=
this._currentStackLineRanges[c].getStartPosition();if(0===d.comparePositions(e,b)){a=!0;break}}b.destroy();return a},_deleteCurrentStackLineRanges:function(){this._currentStackLineRanges.forEach(function(b){b.destroy()},this);this._currentStackLineRanges=[]},_validStackForFile:function(b){var a=this._lineNumberService.getNumberOfCodeLines();return!b.some(function(b){if(b.getLineNumber()>a)return!0},this)},_clearView:function(){this._currentStackLineRanges.forEach(function(b){this._decorator.clearRange(b)},
this)},_clearViewAndApplyChanges:function(){this._clearView();this._deleteCurrentStackLineRanges();this._decorator.applyChanges()},destroy:function(){this.inherited(arguments);this._deleteCurrentStackLineRanges()}})})},"MW/rtc/plugins/debug/DatatipPluginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/datamodel/FileBackingStoreUtilities","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DataTipPlugin"],function(h,f,g,e,d){return h(e,{isApplicable:function(c){return g.isPlainCodeFile(c)},
requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.editordataservice rtc.internaldocument rtc.view rtc.document matlab.tokens rtc.domnode".split(" ")}},createInstance:function(c,b,a,e,f,g){return new d(c,b,a,e,f,g)}})})},"MW/rtc/plugins/debug/DataTipPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/datatip/DataTipUtilities","MW/rtc/plugins/tooltip/HoverableTooltipPlugin"],function(h,f,g,e,d){return h(d,
{_TOOLTIP_PADDING:50,_DATATIP_CSS_CLASS:"datatipElement",constructor:function(c,b,a,d,e,f){this._editorDataService=c;this._internalDocument=b;this._view=a;this._document=d;this._tokenService=e;this._domNode=f},priority:function(){return 10},getTooltipContent:function(c,b,a){var d=this._tokenService.getTokensData().tokens;(b=e.getValidIdentifierTill(b,this._document,this._internalDocument,d))?this._editorDataService.request("matlab.datatip",{variablename:b.trim()}).then(f.hitch(this,function(b){var d=
void 0;(b=b.result)&&(d=e.createTooltipDiv(this._view,"\x3cpre\x3e"+b+"\x3c/pre\x3e",c,this._DATATIP_CSS_CLASS,this._domNode));a(d,!0)}),function(){a(void 0)}):a(void 0)}})})},"MW/rtc/plugins/debug/DebuggerManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/debug/DebuggerManager"],function(h,f,g,e){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice"]}},
createInstance:function(d){var c=g.getInstance();return new e(d,c)}})})},"MW/rtc/plugins/debug/DebuggerManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/i18n!l10n/nls/rtcDebug"],function(h,f,g,e){return h(null,{DEBUG_CONTINUE_ACTION_ID:"rtc_debug_continue",DEBUG_STEP_ACTION_ID:"rtc_debug_step",DEBUG_STEP_IN_ACTION_ID:"rtc_debug_step_in",DEBUG_STEP_OUT_ACTION_ID:"rtc_debug_step_out",DEBUG_QUIT_ACTION_ID:"rtc_debug_quit",constructor:function(d,c){this._actionService=
d;this._debuggerActions=c;this._createActions()},_createActions:function(){var d=[{id:this.DEBUG_CONTINUE_ACTION_ID,enabled:!0,key:"f5",platformKey:{mac:"f5"},shortcut:e.debugContinueShortcut,text:e.debugContinueLabel,description:e.debugContinueDescription,callback:f.hitch(this,"_debugActionCallback",f.hitch(this._debuggerActions,"debugContinue"))},{id:this.DEBUG_STEP_ACTION_ID,enabled:!0,key:"f10",platformKey:{mac:"f10"},text:e.debugStepLabel,shortcut:e.debugStepShortcut,description:e.debugStepDescription,
callback:f.hitch(this,"_debugActionCallback",f.hitch(this._debuggerActions,"debugStep"))},{id:this.DEBUG_STEP_IN_ACTION_ID,enabled:!0,key:"f11",platformKey:{mac:"f11"},text:e.debugStepInLabel,shortcut:e.debugStepInShortcut,description:e.debugStepInDescription,callback:f.hitch(this,"_debugActionCallback",f.hitch(this._debuggerActions,"debugStepIn"))},{id:this.DEBUG_STEP_OUT_ACTION_ID,enabled:!0,key:"shift_f11",platformKey:{mac:"shift_f11"},text:e.debugStepOutLabel,shortcut:e.debugStepOutShortcut,description:e.debugStepOutDescription,
callback:f.hitch(this,"_debugActionCallback",f.hitch(this._debuggerActions,"debugStepOut"))},{id:this.DEBUG_QUIT_ACTION_ID,enabled:!0,key:"shift_f5",platformKey:{mac:"shift_f5"},text:e.debugExitLabel,shortcut:e.debugExitShortcut,description:e.debugExitDescription,callback:f.hitch(this,"_debugActionCallback",f.hitch(this._debuggerActions,"debugExit"))}];this._actionService.loadActions(d)},_debugActionCallback:function(d){return this._debuggerActions.isDebugging?(d(),!0):!1}})})},"MW/rtc/plugins/debug/DebugLineFocusPluginProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/debug/DebugLineFocusPlugin","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.view rtc.cursor debug.documentdebugservices rtc.embeddedoutputs.linenumbertracker rtc.service.documentloaded rtc.indentutilities".split(" ")}},createInstance:function(e,d,c,b,a,g){return new f(e,d,c,b,a,g)}})})},"MW/rtc/plugins/debug/DebugLineFocusPlugin":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h(e,{_PERCENT_TO_SCROLL_TO:0.25,constructor:function(d,c,b,a,e,h){this._view=d;this._cursor=c;this._documentDebugServices=b;this._lineNumberTracker=a;this._documentLoadedService=e;this._indentUtilities=h;this.own(g.after(this._documentDebugServices,"onStackChanged",f.hitch(this,"_moveCursorAndScrollToLineOnDocumentReady")));this._moveCursorAndScrollToLineOnDocumentReady()},_moveCursorAndScrollToLineOnDocumentReady:function(){this._documentLoadedService.whenDocumentLoadedWithText(this._moveCursorAndScrollToLine.bind(this))},
_moveCursorAndScrollToLine:function(){var d=this._documentDebugServices.getActiveWorkspace();null===d||null===d.getLineNumber()||(d=d.getLineNumber(),d=this._getLineColumnInfoToScrollTo(d),this._cursor.setLineColumn(d.line+1,d.column+1),this._scrollToLineColumn(d.line+1,d.column+1))},_getLineColumnInfoToScrollTo:function(d){d=this._lineNumberTracker.getNewLineNumberFromOldLineNumber(d-1);var c=this._indentUtilities.findFirstNonWhitespaceTokenInLine(d);return c?c.getPositionInfo():{line:d,column:0}},
_scrollToLineColumn:function(d,c){var b=this._view.getClientHeight()*this._PERCENT_TO_SCROLL_TO;this._view.scrollLineColumnIntoView(d,c,b)}})})},"MW/rtc/plugins/debug/DebugStackModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/DebugStackModel","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.embeddedoutputs.statehandler"]}},createInstance:function(e){return new f(e)}})})},
"MW/rtc/plugins/debug/DebugStackModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/DebugStackFrame MW/rtc/plugins/debug/DebugStackUtilities MW/rtc/plugins/debug/PersistentStackModelFactory".split(" "),function(h,f,g,e,d,c,b,a){return h(e,{constructor:function(b){this._debugServices=d.getInstance();this._persistentStackModel=a.getInstance();this._stateHandler=b;this._stackFrames=[];this.own(g.after(this._persistentStackModel,
"onModelUpdated",f.hitch(this,"_handleStackChanged"),!0));this.own(g.after(this._debugServices,"onDBCont",f.hitch(this,"_handleDbCont")));this.own(g.after(this._debugServices,"onDebugModeChanged",f.hitch(this,"_handleDebugMode"),!0));this.own(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0));this._debugServices.requestStackState()},getStackFrames:function(){return this._stackFrames},getExecutionPoint:function(){return b.getExecutionPointFrame(this._stackFrames)},
onModelUpdated:function(){},_stateChangeListener:function(a){a===this._stateHandler.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED&&this._reset()},_handleDebugMode:function(a){a||this._reset()},_handleDbCont:function(){this._reset()},_handleStackChanged:function(){this._clearStackFrames();this._stackFrames=this._persistentStackModel.getStackFrames();this.onModelUpdated()},_reset:function(){this._clearStackFrames();this.onModelUpdated()},_clearStackFrames:function(){this._stackFrames=[]}})})},"MW/rtc/plugins/debug/DebugStackUtilities":function(){define([],
function(){return{getActiveWorkspaceFrame:function(h){for(var f=0;f<h.length;f+=1){var g=h[f];if(g.isActiveWorkspace())return g}return null},getExecutionPointFrame:function(h){for(var f=0;f<h.length;f+=1){var g=h[f];if(g.isExecutionPoint())return g}return null}}})},"MW/rtc/plugins/debug/DocumentDebugServicesProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/debug/DocumentDebugServices","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["debug.stack.model","rtc.backingstore"]}},createInstance:function(e,d){return new f(e,d)}})})},"MW/rtc/plugins/debug/DocumentDebugServices":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/debug/DebugStackUtilities".split(" "),function(h,f,g,e,d,c){return h(e,{constructor:function(b,a){this._debugServices=d.getInstance();this._debugStackModel=
b;this._backingStore=a;this._documentStackFrames=[];this.own(g.after(this._debugStackModel,"onModelUpdated",f.hitch(this,"_handleStackModelUpdate"),!0));this.own(g.after(this._debugServices,"onDBStop",f.hitch(this,"_handleOnDBStop"),!0))},getStackFrames:function(){return this._documentStackFrames},getExecutionPoint:function(){return c.getExecutionPointFrame(this._documentStackFrames)},getActiveWorkspace:function(){return c.getActiveWorkspaceFrame(this._documentStackFrames)},_handleStackModelUpdate:function(){var b=
this._debugStackModel.getStackFrames().filter(function(a){if(a.getFullPath()===this._backingStore.getAbsoluteFilePath())return a},this);if(0!==b.length||0!==this._documentStackFrames.length)this._documentStackFrames=b,this.onStackChanged(this._documentStackFrames)},onStackChanged:function(b){},_handleOnDBStop:function(b,a){if(this._backingStore.getAbsoluteFilePath()===b)this.onDBStop(b,a)},onDBStop:function(b,a){}})})},"MW/rtc/plugins/debug/DocumentLoadedServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/debug/DocumentLoadedService","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document"]}},createInstance:function(e,d){return new f(e,d)}})})},"MW/rtc/plugins/debug/DocumentLoadedService":function(){define(["dojo/aspect","dojo/Deferred","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e,d){return g(d,{constructor:function(c,
b){this._internalDocument=c;this._document=b;this._isLoaded=!1;this._promise=new f;this._listeners=[h.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleDocumentChanged")),h.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleDocumentReset"))]},whenDocumentLoadedWithText:function(c){this._promise.then(c,function(b){})},onDocumentLoadedWithText:function(){},isDocumentLoadedWithText:function(){return this._isLoaded},_handleDocumentChanged:function(){this._document.getText()&&
this._flushEvents()},_handleDocumentReset:function(){this._document.getText()&&this._flushEvents()},_flushEvents:function(){this._isLoaded=!0;this._promise.resolve();this.onDocumentLoadedWithText();this._cleanupListeners()},_cleanupListeners:function(){this._listeners.forEach(function(c){c.remove()});this._listeners=[]},destroy:function(){this.inherited(arguments);this._cleanupListeners();this._promise.reject();this._promise=[]}})})},"MW/rtc/plugins/debug/RunToLineServiceProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/RunToLineService"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice","matlab.code.codeblocks","rtc.execution.actions","debug.documentdebugservices","rtc.code.executablelines"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)}})})},"MW/rtc/plugins/debug/RunToLineService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/execution/RunToLineEventData MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType".split(" "),
function(h,f,g,e,d,c,b){return h(d,{constructor:function(a,b,c,d,e){this._actionService=a;this._mtreeCodeBlockService=b;this._executionActions=c;this._documentDebugServices=d;this._executableLineService=e;this._currentFileStackFrames=[];this.own(g.after(this._documentDebugServices,"onStackChanged",f.hitch(this,"_handleStackChanged"),!0))},runToLine:function(a,b){var d=new c(a-1);this._actionService.executeAction(b,d)},getPossibleAction:function(a){var b=new e;this._mtreeCodeBlockService.whenSynchronized(f.hitch(this,
function(){var c=this._getAction(a);b.resolve(c)}));return b},_getAction:function(a){if(!this._executableLineService.isCodeLineExecutable(a))return null;var b=this._actionService.getAction(this._executionActions.RUN_TO_LINE_ACTION_ID);if(b.enabled)return b;b=this._actionService.getAction(this._executionActions.CONTINUE_TO_LINE_ACTION_ID);return b.enabled&&this._shouldShowContinueForLineNumber(a)?b:null},_shouldShowContinueForLineNumber:function(a){var c=this._mtreeCodeBlockService.getInnermostBlockOfType(a,
b.FUNCTION_DEFINITION),d=this._getRelevantStackFrameLineNumbers(a,c);return 0<d.length?d.some(function(b){return this._checkLoopsAndLineNumbers(a,b)},this):null!==c},_getRelevantStackFrameLineNumbers:function(a,b){var c=[];this._currentFileStackFrames.forEach(function(a){a=a.getLineNumber();this._isStackFrameRelevant(a,b)&&c.push(a)},this);return c},_isStackFrameRelevant:function(a,b){if(null===b){if(!this._mtreeCodeBlockService.isLineInFunction(a))return!0}else if(this._isStackFrameInSameFunctionBlock(a,
b))return!0;return!1},_isStackFrameInSameFunctionBlock:function(a,c){var d=this._mtreeCodeBlockService.getInnermostBlockOfType(a,b.FUNCTION_DEFINITION);return null===d?!1:d.id===c.id},_checkLoopsAndLineNumbers:function(a,b){if(this._mtreeCodeBlockService.isLineInLoop(a)&&this._mtreeCodeBlockService.isLineInLoop(b)){var c=this._mtreeCodeBlockService.getOutermostLoop(b),d=this._mtreeCodeBlockService.getOutermostLoop(a);if(c.id===d.id)return!0}return b<a},_handleStackChanged:function(a){this._currentFileStackFrames=
a}})})},"MW/rtc/plugins/execution/RunToLineEventData":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{constructor:function(f){this.lineNumber=f}})})},"MW/rtc/plugins/debug/DocumentDirtyDebugServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/debug/DocumentDirtyDebugService"],function(h,f,g,e,d){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.document"]}},createInstance:function(c){var b=e.getInstance();return new d(c,b)}})})},"MW/rtc/plugins/debug/DocumentDirtyDebugService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h(e,{constructor:function(d,c){this._document=d;this._debugServices=c;this._documentDirtiedWhileDebugging=!1;this.own(g.after(this._debugServices,"onDebugModeChanged",f.hitch(this,
"_handleDebugModeChanged")));this.own(g.after(this._document,"onChange",f.hitch(this,"_handleDocumentChanged")))},onDocumentDirtiedWhileDebugging:function(){},_handleDebugModeChanged:function(){this._documentDirtiedWhileDebugging=!1},_handleDocumentChanged:function(){this._debugServices.isDebugging&&!this._documentDirtiedWhileDebugging&&(this._documentDirtiedWhileDebugging=!0,this.onDocumentDirtiedWhileDebugging())}})})},"MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactoryProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactory"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new e}})})},"MW/rtc/plugins/debug/contextualbuttons/ContextualButtonFactory":function(){define(["dojo/_base/declare","MW/rtc/plugins/buttonfactory/ButtonFactory"],function(h,f){return h(f,{_CONTEXTUAL_DEBUG_BUTTON_CSS:"contextualDebugButton",
createButton:function(f,e,d){f.push(this._CONTEXTUAL_DEBUG_BUTTON_CSS);return this.inherited(arguments)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModelProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModel"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.document rtc.linenumberservice rtc.code.hover debug.runtolineservice debug.documentdirtyservice rtc.cursorcontroller".split(" ")}},
createInstance:function(d,c,b,a,f,g){return new e(d,c,b,a,f,g)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct MW/rtc/abstract/AbstractPlugin MW/rtc/model/Range".split(" "),function(h,f,g,e,d,c){return h(d,{constructor:function(b,a,c,d,e,h){this._document=b;this._lineNumberService=a;this._codeHoverService=c;this._runToLineService=d;this._documentDirtyService=e;this._cursorController=h;
this._promise=null;this.own(g.after(this._codeHoverService,"onMouseEnter",f.hitch(this,"_handleMouseEnteredCode"),!0));this.own(g.after(this._codeHoverService,"onMouseLeave",f.hitch(this,"_handleMouseLeftCode"),!0));this.own(g.after(this._cursorController,"onUpdate",f.hitch(this,"_handleCursorControllerUpdate")));this.own(g.after(this._documentDirtyService,"onDocumentDirtiedWhileDebugging",f.hitch(this,"onClear")));this.own(g.after(this._document,"onChange",f.hitch(this,"onClear")))},onUpdate:function(b,
a,c,d){},onClear:function(){},_handleMouseEnteredCode:function(b){this._promise=this._runToLineService.getPossibleAction(b);this._promise.then(f.hitch(this,"_updateIfActionExists",b),function(){})},_updateIfActionExists:function(b,a){if(a){var c=this._lineNumberService.getLineNumberFromCodeLineNumber(b);if(c=this._getRangeForLineNumber(c)){var d=f.hitch(this,"_runToHere",b,a.id);this.onUpdate(c,d,a.text,a.description)}}},_getRangeForLineNumber:function(b){var a=this._document.getLineText(b+1),d=a.search(/\S/),
a=a.length;if(0>d)return null;d=this._document.createPositionAtLineColumn(b,d);b=this._document.createPositionAtLineColumn(b,a);return new c(d,b)},_handleMouseLeftCode:function(b){this._promise&&(this._promise.cancel("Left the current line"),this._promise=null);this.onClear()},_handleCursorControllerUpdate:function(){if(this._cursorController.hasSelection())this.onClear()},_runToHere:function(b,a){this._runToLineService.runToLine(b,a);this.onClear()},destroy:function(){this.inherited(arguments);this._promise&&
(this._promise.cancel("Destroying"),this._promise=null)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereViewProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereView"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.contextualbuttons.runtohere.viewmodel","debug.contextualbuttons.buttonfactory",
"rtc.view.decoration"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/debug/contextualbuttons/runtohere/RunToHereView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/view/decoration/DecorationUtilities MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip dojo/text!MW/rtc/plugins/debug/css/run_here_14.svg".split(" "),function(h,f,g,e,d,c,b){return h(e,{_CSS_CLASS:"runToHere",_DOM_LOCATION:d.PLACEMENT.BEFORE,constructor:function(a,
b,c){this._runToHereViewModel=a;this._contextualButtonFactory=b;this._decorator=c.createDecorator(1);this._currentRange=this._currentButtonNode=this._tooltip=null;this.own(g.after(this._runToHereViewModel,"onUpdate",f.hitch(this,"_handleUpdate"),!0));this.own(g.after(this._runToHereViewModel,"onClear",f.hitch(this,"_handleClear")))},_handleUpdate:function(a,b,c,d){this._removeCurrentButton();this._addButton(a,b,c,d);this._decorator.applyChanges()},_handleClear:function(){this._hideCurrentButton()},
_addButton:function(a,d,e,f){this._currentButtonNode=this._contextualButtonFactory.createButton([this._CSS_CLASS],b,d);this._currentRange=a;this._decorator.addDomNode(this._currentButtonNode,this._currentRange,this._DOM_LOCATION);this._tooltip=new c({targetNode:this._currentButtonNode,label:e,description:f})},_removeCurrentButton:function(){this._currentButtonNode&&(this._tooltip&&(this._tooltip.destroy(),this._tooltip=null),this._decorator.removeDomNode(this._currentButtonNode,this._currentRange,
this._DOM_LOCATION),this._currentButtonNode=null,this._currentRange.destroy(),this._currentRange=null)},_hideCurrentButton:function(){this._currentButtonNode&&(this._tooltip&&(this._tooltip.destroy(),this._tooltip=null),this._currentButtonNode.style.display="none")},destroy:function(){this.inherited(arguments);this._removeCurrentButton()}})})},"MW/rtc/view/decoration/DecorationUtilities":function(){define(["dojo/dom-construct","MW/rtc/view/ViewUtilities"],function(h,f){return{PLACEMENT:{BEFORE:0,
AFTER:1,BETWEEN:2},_FULL_LINE_LAYER_CSS:"highlightViewLayer",createViewForTextNode:function(f,e,d){var c=document.createDocumentFragment();if(!f)return c.appendChild(d),c;var b=0,a=0;e.forEach(function(e){b=e.start;this._createViewAndAppend(f,a,b,d,c);a=e.end;var h=this._createViewAndAppend(f,b,a,d,c);h&&this._applyDecoration(h,e)},this);this._createViewAndAppend(f,a,f.length,d,c);return c},_createViewAndAppend:function(f,e,d,c,b){var a=null;d>e&&(a=c.cloneNode(!1),a.textContent=f.substring(e,d),
b.appendChild(a));return a},_applyDecoration:function(f,e){var d=e.styles,c;for(c in d)d.hasOwnProperty(c)&&(f.style[c]=d[c]);var d=e.classes,b;for(b in d)d.hasOwnProperty(b)&&f.classList.add(b)},createNewLayerForDecorator:function(g,e,d){var c=h.create("div",{"class":this._FULL_LINE_LAYER_CSS});g=e.getDescriptorsForLayerDecorator(g);if(!g)return c;e=d.getDocumentDimension().width;c.style.width=e+"px";g.forEach(function(b){var a=b.getRange().getStartPosition(),e=f.getVerticalDimensionsBetweenPositions(a,
a,d),g=e.bottom-e.top,e=e.top,a="fullLineHighlight_"+a.getLine(),g=h.create("div",{style:{top:e+"px",height:g+"px"},"data-testid":a},c);b=b.getClasses();for(var m in b)b.hasOwnProperty(m)&&g.classList.add(m)},this);return c}}})},"MW/rtc/view/ViewUtilities":function(){define([],function(){return{assert:function(h,f){if(!h)throw Error(f);},isDescendant:function(h,f){for(var g=h.parentNode;g;){if(g===f)return!0;g=g.parentNode}return!1},isDomTextNode:function(h){return h&&h.nodeType===Node.TEXT_NODE},
hasViewOnlyText:function(h){return h.box.textContent!==h.getText()},getVerticalDimensionsBetweenPositions:function(h,f,g){return{top:this.getTopOfPositionLine(h,g),bottom:this.getBottomOfPositionLine(f,g)}},getTopOfPositionLine:function(h,f){return f.getNodeTop(h.getNode().rootContainer(),!0)},getBottomOfPositionLine:function(h,f){return f.getNodeBottom(h.getNode().rootContainer(),!0)}}})},"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactoryProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactory"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice","rtc.document","rtc.embeddedoutputs.linenumbertracker"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsiteFactory":function(){define(["dojo/_base/declare",
"MW/rtc/abstract/AbstractPlugin","MW/rtc/model/Range","MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsite"],function(h,f,g,e){return h(f,{_STEP_IN_FEATURE_ID:"code.stepinanywhere",constructor:function(d,c,b){this._editorDataService=d;this._document=c;this._lineNumberTracker=b},_createRange:function(d,c,b){var a=this._lineNumberTracker.getNewLineNumberFromOldLineNumber(c);c=this._document.createPositionAtLineColumn(a,b,!0);d=this._document.createPositionAtLineColumn(a,b+d.length,!0);c.setLive(!0);
d.setLive(!0);return new g(c,d)},create:function(d,c,b,a){b=this._createRange(d,b,a);return new e(this._editorDataService,d,c,b)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/FunctionCallsite":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{_STEP_IN_FEATURE_ID:"code.stepinanywhere",constructor:function(f,e,d,c){this._editorDataService=f;this._functionName=e;this._uniqueId=d;this._range=c;this._performingStepIn=!1},getFunctionName:function(){return this._functionName},
getRange:function(){return this._range},getUniqueId:function(){return this._uniqueId},stepIn:function(){this._performingStepIn||(this._performingStepIn=!0,this._editorDataService.request(this._STEP_IN_FEATURE_ID,{uniqueId:this._uniqueId}))},destroy:function(){this._range&&this._range.destroy()}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManagerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory",
"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManager"],function(h,f,g,e,d){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice","rtc.id","debug.contextualbuttons.stepin.functioncallsitefactory","rtc.service.documentloaded","debug.documentdebugservices"]}},createInstance:function(c,b,a,f,g){var h=e.getInstance();return new d(c,b,a,f,g,h)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInManager":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h(e,{_FUNCTION_CALLSITE_QUERY:"code.stepinanywhere.query",constructor:function(d,c,b,a,e,h){this._editorDataService=d;this._editorId=c;this._functionCallsiteFactory=b;this._documentLoadedService=a;this._documentDebugServices=e;this._debugServices=h;this._previousTopOfStack=this._promise=null;this._functionCallsites=[];this.own(g.after(this._documentDebugServices,"onStackChanged",f.hitch(this,"_updateFunctionCallsitesIfAtExecutionPoint")));
this.own(g.after(this._debugServices,"onDBCont",f.hitch(this,"_handleDBCont")))},onFunctionCallsitesUpdated:function(d){},_updateFunctionCallsitesIfAtExecutionPoint:function(){var d=this._documentDebugServices.getExecutionPoint();null!==d&&!this._isSameAsPreviousTopOfStack(d)&&(this._previousTopOfStack=d,d=d.getLineNumber(),this._documentLoadedService.whenDocumentLoadedWithText(f.hitch(this,"_updateFunctionCallsites",d-1)))},_isSameAsPreviousTopOfStack:function(d){return null===this._previousTopOfStack||
this._previousTopOfStack.getName()!==d.getName()||this._previousTopOfStack.getFullPath()!==d.getFullPath()||this._previousTopOfStack.getLineNumber()!==d.getLineNumber()||this._previousTopOfStack.isExecutionPoint()!==d.isExecutionPoint()||this._previousTopOfStack.isLeavingFrame()!==d.isLeavingFrame()?!1:!0},_updateFunctionCallsites:function(d){this._clearFunctionCallsites();0>d||this._addAllNewFunctionCallsites()},_addAllNewFunctionCallsites:function(){this._promise=this._editorDataService.request(this._FUNCTION_CALLSITE_QUERY,
{editorId:this._editorId});this._promise.then(f.hitch(this,function(d){this._promise=null;d.stepInInformation&&(d.stepInInformation.forEach(function(c){this._addFunctionCallsite(c.functionIdentifier,c.uniqueId,c.line,c.column)},this),this.onFunctionCallsitesUpdated(this._functionCallsites))}),f.hitch(this,function(d){}))},_addFunctionCallsite:function(d,c,b,a){d=this._functionCallsiteFactory.create(d,c,b,a);this._functionCallsites.push(d)},_handleDBCont:function(){this._previousTopOfStack=null;this._clearFunctionCallsites()},
_clearFunctionCallsites:function(){this._promise&&(this._promise.cancel("Cancel function callsite query request"),this._promise=null);this._functionCallsites.forEach(function(d){d.destroy()});this._functionCallsites=[];this.onFunctionCallsitesUpdated(this._functionCallsites)},destroy:function(){this.inherited(arguments);this._clearFunctionCallsites()}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInViewProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInView"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["debug.contextualbuttons.stepin.manager","debug.contextualbuttons.buttonfactory","rtc.view.decoration"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/debug/contextualbuttons/stepin/StepInView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/i18n!l10n/nls/execution dojo/string MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/view/decoration/DecorationUtilities MW/rtc/plugins/descriptivetooltip/DescriptiveTooltip MW/rtc/plugins/descriptivetooltip/DescriptiveTooltipUtilities dojo/text!MW/rtc/plugins/debug/css/step_in_14.svg".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(b,{_CSS_CLASS:"stepIn",_LEFT_IS_NONWHITESPACE_CSS_CLASS:"includeLeftMargin",_DOM_LOCATION:k.PLACEMENT.BETWEEN,constructor:function(b,c,d){this._stepInManager=b;this._contextualButtonFactory=c;this._decorator=d.createDecorator(0,!0);this._buttonsToInfoMap=a.createMap();this.own(g.after(this._stepInManager,"onFunctionCallsitesUpdated",f.hitch(this,"_addButtons"),!0))},_addButtons:function(a){a.forEach(function(a){this._addButton(a)},this);this._decorator.applyChanges()},
_addButton:function(a){var b=a.getRange(),c=a.getFunctionName(),d=[this._CSS_CLASS];this._isNonWhitepaceCharacterToLeft(b)&&d.push(this._LEFT_IS_NONWHITESPACE_CSS_CLASS);d=this._contextualButtonFactory.createButton(d,q,f.hitch(a,"stepIn"));e.set(d,"data-testid","stepin_"+c);this._addButtonNode(d,b);a=this._addButtonListener(d,a);c=this._addButtonTooltip(d,c);this._buttonsToInfoMap.set(d,{range:b,destroyListener:a,tooltip:c})},_isNonWhitepaceCharacterToLeft:function(a){a=a.getStartPosition();var b=
a.getColumn()-1;return 0===b?!1:""!==a.getNode().getCodeText().charAt(b-1).trim()},_addButtonNode:function(a,b){this._decorator.addDomNode(a,b,this._DOM_LOCATION)},_addButtonListener:function(a,b){return g.before(b,"destroy",f.hitch(this,"_removeButton",a))},_addButtonTooltip:function(a,b){var e=m.styleAsCode(b);return new l({targetNode:a,label:c.substitute(d.stepInAnywhereLabel,[e]),description:c.substitute(d.stepInAnywhereDescription,[e])})},_removeButton:function(a){var b=this._buttonsToInfoMap.get(a);
b&&(this._removeButtonWithInfo(a,b),this._buttonsToInfoMap.delete(a))},_removeButtonWithInfo:function(a,b){b.destroyListener.remove();b.tooltip.destroy();this._decorator.removeDomNode(a,b.range,this._DOM_LOCATION)},destroy:function(){this.inherited(arguments);this._buttonsToInfoMap.forEach(f.hitch(this,function(a,b){this._removeButtonWithInfo(b,a)}));this._buttonsToInfoMap.clear()}})})},"MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBarProvider":function(){define(["dojo/_base/declare","dojo/has",
"MW/rtc/core/provider/PluginProvider","./VirtualKeyboardShortcutBar"],function(h,f,g,e){return h([g],{requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.keyhandler"]}},isApplicable:function(){return f("ios")},createInstance:function(d,c){return new e(d,c)}})})},"MW/rtc/plugins/device/ios/VirtualKeyboardShortcutBar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{REFOCUS_DELAY:0,constructor:function(e,d){this._cursor=
e;this._keyHandler=d;this._handler=g.after(this._cursor,"onUpdate",f.hitch(this,"onCursorUpdate"))},destroy:function(){this._handler.remove();this._timeout&&window.clearTimeout(this._timeout)},onCursorUpdate:function(){var e=this;this._timeout&&window.clearTimeout(this._timeout);this._timeout=window.setTimeout(function(){e._timeout=null;e._doUpdateVirtualKeyboard()},this.REFOCUS_DELAY)},_doUpdateVirtualKeyboard:function(){document.activeElement===this._keyHandler.keyCapture&&this._cursor.hasSelection()!==
this._virtualKeyboardShowsSelection&&this._refocus()},_refocus:function(){this._keyHandler.keyCapture.blur();this._keyHandler.keyCapture.focus();this._virtualKeyboardShowsSelection=0<this._keyHandler.keyCapture.selectionEnd-this._keyHandler.keyCapture.selectionStart}})})},"MW/rtc/plugins/editordataservice/EditorDataServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider"],function(h,f){return h(f,{requires:function(){return{createInstance:["rtc.editordataservicemanager",
"rtc.backingstore","rtc.editordataservice.plugincontainer","rtc.internaldocument","rtc.document"]}},createInstance:function(f,e,d,c,b){this._editorDataSeviceProvider=f.getEditorDataServiceProvider(d?d:[],e,c,b);return this._editorDataSeviceProvider.getEditorDataService()},destroyInstance:function(f){this._editorDataSeviceProvider.dispose()}})})},"MW/rtc/plugins/editordataservice/EditorDataServiceManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/editordataservice/EditorDataServiceManagerFactory"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return g.getInstance()},destroyInstance:function(e){}})})},"MW/rtc/editordataservice/EditorDataServiceManagerFactory":function(){define(["MW/rtc/editordataservice/EditorDataServiceManager"],function(h){var f=null;return{getInstance:function(){null===f&&(f=new h);return f}}})},"MW/rtc/editordataservice/EditorDataServiceManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-peermodel/PeerModelManager mw-messageservice/MessageService MW/rtc/editordataservice/EditorDataServiceProvider mw-utils/Utils".split(" "),
function(h,f,g,e,d,c,b){return h(null,{_RETRY_TIME_MILLISECONDS:250,_START_MESSAGE:"/editordataservice/start",_STARTED_MESSAGE:"/editordataservice/started/",constructor:function(a){this._isPeerModelInitialized=!1;this._namespace=a;this._mockFeatureDataServices={};this._mockRequestService={};this._namespaceUID={};this._startedInitialization=!1;this._initializationRetryTimer=null;this._messageService=d},_initializeRoot:function(){this._root=this._peerModel.setRoot("root",{one:1})},start:function(){this._initializePeerModel();
this._peerModel.hasRoot()||this._initializeRoot();this._peerModel.isSyncEnabled()||this._peerModel.setSyncEnabled(!0)},_initializePeerModel:function(){this._startedInitialization||(this._startedInitialization=!0,this._namespaceUID=b.generateUuid(),this._peerModel=e.getServerInstance(this._namespace?this._namespace:"/editordataservice/"+this._namespaceUID),this._namespace||(this._messageService.subscribe(this._STARTED_MESSAGE+this._namespaceUID,this._serverSideEditorDataServiceInitialized,this),this._initializeServerSideEditorDataService()))},
_initializeServerSideEditorDataService:function(){this._isPeerModelInitialized?this._initializationRetryTimer=null:(this._messageService.publish(this._START_MESSAGE,this._namespaceUID),this._initializationRetryTimer=setTimeout(f.hitch(this,this._initializeServerSideEditorDataService),this._RETRY_TIME_MILLISECONDS))},_serverSideEditorDataServiceInitialized:function(){!0!==this._isPeerModelInitialized&&(this._messageService.unsubscribe(this._STARTED_MESSAGE+this._namespaceUID,this._serverSideEditorDataServiceInitialized,
this),this._initializationRetryTimer&&(clearTimeout(this._initializationRetryTimer),this._initializationRetryTimer=null),this._isPeerModelInitialized=!0)},stop:function(){this.isInitialized()&&(this._root.destroy(),this._root=null,this._peerModel.setSyncEnabled(!1),this._mockFeatureDataServices={},this._mockRequestService={},this._isPeerModelInitialized=!1,this._namespace="",this._initializeRoot())},isInitialized:function(){return this._isPeerModelInitialized},installMockDataService:function(a,b){this._mockFeatureDataServices[a]=
b},removeMockDataService:function(a){delete this._mockFeatureDataServices[a]},installMockRequestService:function(a,b){this._mockRequestService[a]=b},removeMockRequestService:function(a,b){delete this._mockRequestService[a]},_getMockDataServices:function(){return f.clone(this._mockFeatureDataServices)},_getMockRequestServices:function(){return f.clone(this._mockRequestService)},getEditorDataServiceProvider:function(a,b,d,e){this.start();b=this._addEditorOpenedNode(b);return new c(b,a,this._getMockDataServices(),
d,e,this._getMockRequestServices())},_addEditorOpenedNode:function(a){return this._root.addChild("editor",{uniqueId:a.getUniqueId()})}})})},"MW/rtc/editordataservice/EditorDataServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","mw-utils/Utils"],function(h,f,g,e,d){return h(null,{PROPERTY_SET_ID:"propertySet",DOCUMENT_STATE_ID_SUFFIX:".documentstate",constructor:function(c,b,a,d,e,g){this._peerNode=c;this._mockFeatureDataServices=a;this._document=
e;this._internalDocument=d;this._connections=[];this._mockRequestDataServices=g;this._fullyRegisteredFeatures={};this._registeredClientSideDataServices=[];this._clientSidePlugins={};b.forEach(f.hitch(this,function(a){this._clientSidePlugins[a.getFeatureId()]=a}));this._clientSideDataTable={};this._clientSideDataListeners={};this._editorDataServiceBroadcast=this._createDataBroadcastDependency();this._registerDocumentListenerWithNode(d)},_registerDocumentListenerWithNode:function(c){var b=f.hitch(this,
function(){this._dispatchNewText(this._document)});this._connections.push(g.after(this._document,"onChange",b,!0));this._connections.push(g.after(c,"onDocumentReset",b,!0));this._dispatchNewText(this._document)},_hasMockInstalled:function(c){return this._mockFeatureDataServices.hasOwnProperty(c)},_dispatchNewText:function(c){var b=c.getCodeText(),a=c.getState();clearTimeout(this._textToServerTimerId);this._textToServerTimerId=setTimeout(f.hitch(this,function(){this._dispatchEventToServer("documentChanged",
{data:b,documentState:a})}),200);for(var d in this._mockFeatureDataServices)this._mockFeatureDataServices.hasOwnProperty(d)&&(c=(0,this._mockFeatureDataServices[d])(b,this._document.getState()),this._putDataInFeatureTableAndBroadcastUpdate(d,c),this._peerNode.dispatchEvent(this.PROPERTY_SET_ID,this._peerNode,this._createMockFeatureMessage(d,c)))},_putDataInFeatureTableAndBroadcastUpdate:function(c,b){this._peerNode.setProperty(c,b);this._peerNode.setProperty(c+this.DOCUMENT_STATE_ID_SUFFIX,this._document.getState())},
_dispatchEventToServer:function(c,b){this._peerNode.dispatchPeerEvent(c,this._peerNode,b)},_createMockFeatureMessage:function(c,b){return{key:c,newValue:b}},getEditorDataService:function(){var c=this._peerNode,b=f.hitch(this,this._registerFeatureWithNode),a=this.PROPERTY_SET_ID,g=f.hitch(this,this._dispatchEventToServer),h=this._mockRequestDataServices,m=this._fullyRegisteredFeatures,q=f.hitch(this,this._isClientSideRegisteredFeature),n=this._clientSideDataListeners,p=this._clientSideDataTable;return{listenTo:function(d,
e){b(d);var f=function(b){b.type===a&&(b=b.data,b.key===d&&(m[d]=!0,e(b.newValue)))};if(q(d))return n[d]||(n[d]=[]),n[d].push(e),{remove:function(){}};c.addEventListener(a,f);return{remove:function(){c.removeEventListener(a,f)}}},get:function(a){b(a);return q(a)?p[a]:c.getProperty(a)},request:function(a,f,m){b(a);var n=d.generateUuid();f={internalRequestId:n,requestData:f};var q=new e;if(h.hasOwnProperty(a))q.resolve((0,h[a])(f));else{var p=function(a){return function(b){b.data.internalRequestId===
a&&(clearTimeout(B),b.error?q.reject(b.error):q.resolve(b.data),q.isFulfilled()&&c.removePeerEventListener(x,p))}}(n),x=a+".RESPONSE";c.addPeerEventListener(x,p);g(a,f);var B=setTimeout(function(){q.reject("EditorDataService timed out for the feature "+a);c.removePeerEventListener(x,p)},m||5E3)}return q.promise}}},_registerFeatureWithNode:function(c){!this._hasMockInstalled(c)&&(!this.hasFeatureBeenRegisteredWithServer(c)&&!this._isDocumentStateId(c)&&!this._isClientSideRegisteredFeature(c))&&(this._clientSidePlugins[c]?
(this._clientSidePlugins[c].beginBroadcasting(this._editorDataServiceBroadcast),this._appendFeatureToClientSideRegisteredList(c)):this._dispatchEventToServer("registerFeature",{featureId:c}))},_createDataBroadcastDependency:function(){var c=f.hitch(this,this._putDataIntoClientSideTable);return{updateFeatureData:function(b,a){c(b,a)}}},_putDataIntoClientSideTable:function(c,b){this._clientSideDataTable[c]=b;var a=this._clientSideDataListeners[c];a&&a.forEach(function(a){a()})},_isClientSideRegisteredFeature:function(c){return 0<=
this._registeredClientSideDataServices.indexOf(c)},_appendFeatureToClientSideRegisteredList:function(c){this._registeredClientSideDataServices.push(c)},_isDocumentStateId:function(c){return c&&-1!==c.indexOf(this.DOCUMENT_STATE_ID_SUFFIX,c.length-this.DOCUMENT_STATE_ID_SUFFIX.length)},hasFeatureBeenRegisteredWithServer:function(c){return!!this._fullyRegisteredFeatures[c]},dispose:function(){this._connections.forEach(function(c){c.remove()});this._peerNode.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/EvalTextCacheProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/EvalTextCache","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.id","rtc.backingstore","rtc.editordataservice"]}},createInstance:function(e,d,c){return new f(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/EvalTextCache":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h(e,{_EVAL_TEXT_CACHE_FEATURE_ID:"matlab.code.evaluationtextcache",
constructor:function(d,c,b){this._backingStore=c;this._editorId=d;this._editorDataService=b;this._editorDataService.request(this._EVAL_TEXT_CACHE_FEATURE_ID,{id:this._editorId,filePath:this._backingStore.getAbsoluteFilePath()}).then(function(){},function(){});this.own(g.after(this._backingStore,"onFilePathUpdated",f.hitch(this,"_handleFilePathUpdated")))},_handleFilePathUpdated:function(){this._editorDataService.request(this._EVAL_TEXT_CACHE_FEATURE_ID,{id:this._editorId,filePath:this._backingStore.getAbsoluteFilePath()}).then(function(){},
function(){})}})})},"MW/rtc/plugins/embeddedoutputs/ClearOutputsCacheProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/ClearOutputsCache","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.actionservice","rtc.id","rtc.embeddedoutputs.model","rtc.code.matlabfiletype"]}},createInstance:function(e,d,c,b){return new f(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/ClearOutputsCache":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions mw-utils/Utils ./MessageServiceFactory".split(" "),
function(h,f,g,e,d,c){return h(null,{_CLEAR_SERVER_OUTPUTS_CACHE_NAMESPACE:"/embeddedOutputs/clearOutputsCacheRequest/",constructor:function(b,a,d,h){this._messageService=c.getInstance();this._clearServerOutputsCacheNamespace=this._CLEAR_SERVER_OUTPUTS_CACHE_NAMESPACE+a;this._actionService=b;this._outputsModel=d;this._editorId=a;this._fileTypeService=h;this._enabled=!1;this._supportedFileTypeChangeListener=g.after(this._fileTypeService,"onSupportedFileTypeChange",f.hitch(this,"_handleSupportedFileTypeChange"),
!0);this._actions=[{id:"rtc_clear_all_output",enabled:!1,contextMenuGroup:"Output",text:e.clearAllOutput,callback:f.hitch(this,"_clearOutputs")}];this._aspectHandles=[];this._enableClearOutputs()},_clearOutputs:function(){var b={requestId:d.generateUuid(),editorId:this._editorId};this._messageService.publish(this._clearServerOutputsCacheNamespace,b);this._outputsModel.clearAllOutputs();this.onOutputsCleared()},onOutputsCleared:function(){},_updateActionState:function(){var b=this._outputsModel.hasOutputs();
this._actionService.updateAction("rtc_clear_all_output",{enabled:b})},_enableClearOutputs:function(){this._enabled||(this._aspectHandles.push(g.after(this._outputsModel,"onModelUpdated",f.hitch(this,this._updateActionState))),this._actionService.loadActions(this._actions),this._enabled=!0)},_disableClearOutputs:function(){this._enabled&&(this._aspectHandles.forEach(function(b){b.remove()}),this._aspectHandles=[],this._actionService.removeAction("rtc_clear_all_output"),this._enabled=!1)},_handleSupportedFileTypeChange:function(b){b?
this._enableClearOutputs():this._disableClearOutputs()},destroy:function(){this._disableClearOutputs();this._supportedFileTypeChangeListener.remove();this._supportedFileTypeChangeListener=null}})})},"MW/rtc/plugins/embeddedoutputs/MessageServiceFactory":function(){define(["dojo/_base/lang","MW/rtc/messageservice/MessageServiceFactory"],function(h,f){return new f})},"MW/rtc/plugins/embeddedoutputs/CurrentOutputServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/CurrentOutputService",
"MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.embeddedoutputs","rtc.cursor","rtc.cursor.view","rtc.embeddedoutputs.model","rtc.exportnotifier"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/CurrentOutputService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","mw-utils/Utils","MW/rtc/model/Position"],function(h,f,
g,e,d){return h(null,{_cursor:null,_aspectHandles:null,constructor:function(c,b,a,d,e){this._cursor=b;this._cursorView=a;this._embeddedOutputs=c;this._embeddedOutputsView=c.getEmbeddedOutputsView();this._embeddedOutputsModel=d;this._selectedOutputs=[];this._lastCursorPosition=this._focusedOutput=null;this._aspectHandles=[];this._aspectHandles.push(g.after(this._cursorView,"onChange",f.hitch(this,"_handleCursorViewOnUpdate"),!0));this._aspectHandles.push(g.after(this._embeddedOutputsView,"onOutputClick",
f.hitch(this,"_handleOutputClick"),!0));this._aspectHandles.push(g.after(this._embeddedOutputsView,"onViewToggled",f.hitch(this,"_handleViewToggled"),!0));this._aspectHandles.push(g.after(d,"onModelUpdated",f.hitch(this,"_handleModelUpdated"),!0));this._aspectHandles.push(g.after(e,"onExportStart",f.hitch(this,"_handleOnExportStart"),!0));this._aspectHandles.push(g.after(this._embeddedOutputs,"onEmbeddedOutputsStateChange",f.hitch(this,"_handleEmbeddedOutputsStateChange"),!0));this._embeddedOutputsView.registerCurrentOutputService(this)},
_handleEmbeddedOutputsStateChange:function(c){c&&this._embeddedOutputsView.registerCurrentOutputService(this)},_handleModelUpdated:function(c){c=this._focusedOutput;var b=this._selectedOutputs;this._focusedOutput&&(this._focusedOutput=this._embeddedOutputsModel.findOutput(f.hitch(this,function(a){return a===this._focusedOutput})));this._selectedOutputs=this._getOutputsAssociatedWithCursor();(this._focusedOutput!==c||!e.arrayEquals(this._selectedOutputs,b))&&this._emitCurrentState()},_handleCursorViewOnUpdate:function(){this._cursor.position.isEqualTo(this._lastCursorPosition)||
(this._lastCursorPosition=new d(this._cursor.position.getNode(),this._cursor.position.getOffset()),this._selectedOutputs=this._getOutputsAssociatedWithCursor(),this._focusedOutput=null,this._emitCurrentState())},_handleOnExportStart:function(){this._focusedOutput=null;this._emitCurrentState()},_handleOutputClick:function(c){this._focusedOutput=c;this._selectedOutputs=[c];this._emitCurrentState()},_handleViewToggled:function(){this._focusedOutput=null;this._selectedOutputs=[];this._emitCurrentState();
this._lastCursorPosition=new d(this._cursor.getNode(),this._cursor.getOffset());this._selectedOutputs=this._getOutputsAssociatedWithCursor();this._emitCurrentState()},_emitCurrentState:function(){this.onOutputSelected({selectedOutputs:this._selectedOutputs,focusedOutput:this._focusedOutput})},_getOutputsAssociatedWithCursor:function(){var c=this._cursor.getNode().rootContainer();return this._embeddedOutputsView.getOutputsAssociatedWithNode(c)},onOutputSelected:function(c){},destroy:function(){this._aspectHandles.forEach(function(c){c.remove()});
this._aspectHandles=[]}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/EmbeddedOutputs","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.view rtc.cursor rtc.cursor.view rtc.actionservice rtc.id rtc.focusservice rtc.bordercontainer rtc.code.codechange rtc.code.matlabfiletype rtc.code.sections.model rtc.code.sections.stale.model rtc.embeddedoutputs.statehandler rtc.domnode rtc.clipboard rtc.contextmenu.generator rtc.margin margin.statusactionbar rtc.keyhandler rtc.embeddedoutputs.linenumbertracker rtc.editordataservice rtc.embeddedoutputs.model rtc.preferences.service rtc.backingstore rtc.document.executablecode.executablecodeservice rtc.embeddedoutputs.syntaxerrors rtc.messagebar.rightmargincontainer rtc.embeddedoutputs.outputhandler rtc.embeddedoutputs.splitterpositionmodel rtc.embeddedoutputs.triggers rtc.embeddedoutputs.executiondatamanager rtc.embeddedoutputs.viewservice debug.documentdebugservices rtc.service.documentloaded rtc.code.codeanalyzermodel".split(" ")}},
createInstance:function(e,d,c,b,a,g,h,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I,E,K,Y,Z,S,V){return new f(e,d,c,b,a,g,h,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I,E,K,Y,Z,S,V)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputs":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions mw-log/Log MW/rtc/misc/Synchronizer MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Range mw-utils/Utils ./EmbeddedOutputsContextMenuModel ./model/EmbeddedOutputsLoad16a ./model/EmbeddedOutputsSave16a ./view/EmbeddedOutputsView ./OutputQueue".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h([],{EMPTY_SAVE_STATE:{metaData:{evaluationState:"manual",layoutState:"code",outputStatus:"ready"},outputArray:[],regionArray:[]},EMBEDDED_OUTPUTS_FEATURE_ID:"matlab.code.embeddedoutputs",constructor:function(a,b,c,d,e,k,h,l,m,n,q,H,L,N,M,P,Q,O,I,E,K,Y,Z,S,V,ha,U,ea,W,aa,ba,$,ka,da,fa,qa){this._cursor=d;this._cursorView=e;this._focusService=l;this._internalDocument=b;this._document=a;this._parentBorderContainer=m;this._actionService=k;this._rtcView=c;
this._codeChangeService=n;this._fileTypeService=q;this._sectionModel=H;this._staleSectionModel=L;this._stateHandler=N;this._rtcDomNode=M;this._clipboard=P;this._contextMenuGenerator=Q;this._editorId=h;this._keyHandler=E;this._lineNumberTracker=K;this._outputsModel=Z;this._preferences=S;this._backingStore=V;this._executableCodeService=ha;this._syntaxErrorHandler=U;this._outputHandler=W;this._splitterPositionModel=aa;this._triggers=ba;this._executionDataManager=$;this._documentDebugServices=da;this._documentLoadedService=
fa;this._codeAnalyzerModel=qa;this._aspectHandles=[];this._embeddedOutputsEnabled=!1;this._synchronizer=null;this._aspectHandles.push(g.after(this._fileTypeService,"onFileTypeChange",f.hitch(this,"_handleFileTypeChange"),!0));this._view=new p(this._outputsModel,this._parentBorderContainer,this._cursor,this._cursorView,this._rtcView,this._focusService,this._stateHandler,this._actionService,this._internalDocument,this._document,this._sectionModel,this._staleSectionModel,this._rtcDomNode,O,I,this._contextMenuGenerator,
this._preferences,this._syntaxErrorHandler,ea,this._splitterPositionModel,this._editorId,this._executionDataManager,this._backingStore,this._lineNumberTracker,ka,this._documentDebugServices,this._documentLoadedService);Y.request(this.EMBEDDED_OUTPUTS_FEATURE_ID,{id:h}).then(function(){},function(){});this._enableEmbeddedOutputs()},_handleFileTypeChange:function(){this._synchronizer||(this._synchronizer=new c([this._fileTypeService,this._codeAnalyzerModel]),this._synchronizer.whenAllReady(f.hitch(this,
function(){this._synchronizer.destroy();this._synchronizer=null;this._handleValidFileTypeChange()})))},_handleValidFileTypeChange:function(){this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.ClassDefinitionFile||this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.FunctionFile?this._disableEmbeddedOutputs():this._enableEmbeddedOutputs()},_enableEmbeddedOutputs:function(){this._embeddedOutputsEnabled||(this._view.enable(),this._rightPanel=this._view.getRightScrollPane(),
this._embeddedOutputsContextModel=new m(this._actionService),this._contextMenuGenerator.createContextMenu(this._rightPanel,this._embeddedOutputsContextModel),this._load16a=new q(this._document,this._internalDocument,this._editorId,this._outputsModel,this._outputHandler,this._view,this._triggers,this._splitterPositionModel),this._saveAs16a=new n(this._internalDocument,this._outputsModel,this._view,this._triggers,this._splitterPositionModel),this._triggers.enableTriggers(),this._embeddedOutputsEnabled=
!0,this.onEmbeddedOutputsStateChange(this._embeddedOutputsEnabled))},_disableEmbeddedOutputs:function(){this._embeddedOutputsEnabled&&(this._outputsModel.clear(),this._view.disable(),this._load16a.destroy(),this._load16a=null,this._saveAs16a.destroy(),this._saveAs16a=null,this._triggers.disableTriggers(),this._embeddedOutputsContextModel=this._rightPanel=null,this._embeddedOutputsEnabled=!1,this.onEmbeddedOutputsStateChange(this._embeddedOutputsEnabled))},onEmbeddedOutputsStateChange:function(a){},
isEmbeddedOutputsEnabled:function(){return this._embeddedOutputsEnabled},save:function(){if(!this._embeddedOutputsEnabled)return this.EMPTY_SAVE_STATE;try{return this._saveAs16a.get16aSaveObject()}catch(a){return d.assert(!1,"Exception occurred while saving outputs. Outputs will not be saved:"+a),this.EMPTY_SAVE_STATE}},load:function(a){var b=this._view.getLayoutView(),c=this._triggers.getEvaluationState(),e=this._view.getReadyBusyIndicatorState();try{this._load16a.loadFrom16a(a)}catch(f){d.assert(!1,
"Exception occurred while loading outputs. Outputs will not be loaded:"+f),this._splitterPositionModel.setDefaultRightPanelProportion(),this._view.setLayoutState(b),this._outputsModel.clear(),this._triggers.setEvaluationState(c),this._view.setReadyBusyIndicatorState(e)}},getEmbeddedOutputsView:function(){return this._view},destroy:function(){this._stateHandler.destroy();this._disableEmbeddedOutputs();this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/misc/Synchronizer":function(){define(["dojo/_base/declare",
"dojo/aspect","dojo/_base/lang","dojo/Deferred"],function(h,f,g,e){return h([],{constructor:function(d){this._synchronizables=d.map(function(c){return{isWaitingForUpdate:!1,synchronizable:c}});this._allReadyPromise=null},whenAllReady:function(d){this._areAllReady()?d():(this._allReadyPromise||(this._allReadyPromise=new e),this._allReadyPromise.then(d),this._addWhenReadyCallbacks())},_areAllReady:function(){return 0===this._getAllDirty().length},_getAllDirty:function(){return this._synchronizables.filter(function(d){return!d.synchronizable.isReady()})},
_getAllNeedingUpdate:function(){return this._getAllDirty().filter(function(d){return!d.isWaitingForUpdate})},_addWhenReadyCallbacks:function(){this._getAllNeedingUpdate().forEach(function(d){d.synchronizable.whenReady(g.hitch(this,this._handleSynchronizableBecomingClean))},this)},_handleSynchronizableBecomingClean:function(){this._areAllReady()?this._allReadyPromise&&(this._allReadyPromise.resolve(),this._allReadyPromise=null):this._addWhenReadyCallbacks()},destroy:function(){this._synchronizables=
[];this._allReadyPromise&&this._allReadyPromise.reject();this._allReadyPromise=null}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsContextMenuModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/contextmenu/ContextMenuModel"],function(h,f,g,e){return h(e,{constructor:function(d){this._groupActionsMap={CopyOutput:["rtc_copy_output","rtc_copy_all_output"],ClearOutput:["rtc_clear_all_output"],Align:["rtc_alignment_toggle"],ModeInteraction:"figure_zoom_in figure_zoom_out figure_reset_mode figure_rotate_xy figure_rotate_xz figure_rotate_yz figure_reset_rotatemode".split(" ")};
this._groupList=["ModeInteraction","CopyOutput","ClearOutput","Align"];this._actionService=d},getGroups:function(){return this._groupList},getActions:function(d){d=this._groupActionsMap[d];if(!d)return[];var c=[];d.forEach(function(b){(b=this._getActionInfo(b))&&c.push(b)},this);return c},_getActionInfo:function(d){var c=this._actionService.getAction(d),b=null;if(c){var a=c.text||c.description;if(void 0===a)return b;b={id:d,label:a,shortcut:c.shortcut,callback:f.hitch(this._actionService,"executeAction",
d,{}),enabled:c.enabled}}return b}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsLoad16a":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/Range MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/model/Region mw-utils/Utils".split(" "),function(h,f,g,e,d,c,b,a){return h(null,{constructor:function(a,b,c,d,e,f,g,h){this._document=a;this._internalDocument=b;this._editorId=c;this._outputsModel=
d;this._outputHandler=e;this._eoView=f;this._triggers=g;this._splitterPositionModel=h},destroy:function(){},loadFrom16a:function(a){a.metaData&&(this._eoView.setLayoutState(a.metaData.layoutState),this._splitterPositionModel.loadSplitterPosition(a));a.regionArray&&a.outputArray&&this._loadRegionsAndOutputs(a.regionArray,a.outputArray);a.metaData&&(this._triggers.setEvaluationState(a.metaData.evaluationState),this._eoView.setReadyBusyIndicatorState(a.metaData.outputStatus))},_loadRegionsAndOutputs:function(a,
b){this._cleanData(a,b);this._loadRegionsWithoutOutputs(a);this._loadOutputs(a,b)},_loadRegionsWithoutOutputs:function(c){var d=[];c.forEach(function(c){var e=this._internalDocument.getLineNode(c.startLine),f=this._internalDocument.getLineNode(c.endLine);c={sectionBreak:c.code.sectionBreak,endOfSection:c.code.endOfSection,regionString:c.code.regionString,regionNumber:c.code.regionNumber,regionPositions:this._document.getPositionsInNodeRange(e,f)};c=new b(c,a.generateUuid());d.push(c)},this);this._outputsModel.setRegions(d)},
_loadOutputs:function(a,b){var d=[],f=[],g=[],h=this._outputsModel.getRegions();a.forEach(function(a){a.outputIndexes.forEach(function(c){d[c]||(d[c]={outputData:b[c],regionNumbers:[]});d[c].regionNumbers.push(a.code.regionNumber)})});a.forEach(function(a,b){a.outputIndexes.forEach(function(a){a=d[a];if(b===a.regionNumbers[a.regionNumbers.length-1]){var c=a.outputData;c.lineNumbers=this._getLineNumbers(c,a.regionNumbers,h);0<c.lineNumbers.length&&f.push(c)}},this);g.push(b)},this);var r=e.createFullFileRange(this._document,
this._internalDocument);this._outputHandler.handleStartOfEvaluation(r);this._outputHandler.handleOutputsData(f,g,c.LOADED_FROM_DISK_EVALUATION_ID,r);this._outputHandler.handleEndOfEvaluation(r,c.LOADED_FROM_DISK_EVALUATION_ID,"");r.destroy()},_getLineNumbers:function(a,b,d){return a.lineNumbers&&0<a.lineNumbers.length?a.lineNumbers:c.getLineNumbersFromRegionNumbers(b,d,this._internalDocument)},_cleanData:function(a,b){this._cleanRegionData(a);this._cleanOutputsRegionData(b);this._cleanOutputsFigureSizeData(b)},
_cleanRegionData:function(a){a.forEach(function(a){a.outputIndexes.forEach(function(b,c){a.outputIndexes[c]=parseInt(b,10)},this);a.code.sectionBreak="true"===a.code.sectionBreak;a.code.endOfSection="true"===a.code.endOfSection;a.code.regionNumber=parseInt(a.code.regionNumber,10);a.startLine=parseInt(a.startLine,10);a.endLine=parseInt(a.endLine,10)},this)},_cleanOutputsRegionData:function(a){a.forEach(function(a){var b=a.outputData;b.regionNumbers&&(b.regionNumbers=b.regionNumbers.map(function(a){return parseInt(a,
10)}));if(b.truncationInfo){var c=b.truncationInfo;b.truncationInfo.wasTruncatedMidLine="true"===c.wasTruncatedMidLine;b.truncationInfo.wasTruncatedAtLineBreak="true"===c.wasTruncatedAtLineBreak}a.lineNumbers=a.lineNumbers?a.lineNumbers.map(function(a){return parseInt(a,10)}):[]})},_cleanOutputsFigureSizeData:function(a){a.forEach(function(a){a=a.outputData;a.figureSize&&(a.figureSize=a.figureSize.map(function(a){return parseInt(a,10)}))})}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities":function(){define(["dojo/dom-construct",
"MW/rtc/model/CodeUtilities","MW/rtc/model/PositionUtilities"],function(h,f,g){return{LOADED_FROM_DISK_EVALUATION_ID:"Load from disk",isLoadedFromDisk:function(e){return e===this.LOADED_FROM_DISK_EVALUATION_ID},convertPositionToRegionNumber:function(e,d){if(0===d.length)throw Error("There should be at least one region.");var c=e.line,b=0;d.some(function(a,d){return a.code.regionPositions[0].line<=c?(b=d,!1):!0},this);return b},getLineNumbersFromRegionNumbers:function(e,d,c){var b=[];e.forEach(function(a){d[a].code.regionPositions.forEach(function(a){f.isCodeContainer(a.getNode(),
!0)&&(a=f.getCodeLineNumberFromPosition(c,a),b.push(a))},this)},this);return b},createPositionsFromRegionNumbers:function(e,d,c){var b=[];e.forEach(function(a){d[a].code.regionPositions.forEach(function(a){a=c.createLinePosition(a.getNode(),!1);b.push(a)},this)},this);return b},isOutputAssociatedWithRegion:function(e,d){var c=d.code.regionPositions[0],b=d.code.regionPositions[d.code.regionPositions.length-1];return e.codeLinePositions.some(function(a){return a.line>=c.line&&a.line<=b.line},this)},
mergeCodeLinePositions:function(e,d){for(var c=0,b=0,a=[];c<e.length&&b<d.length;){var f=e[c],h=d[b],m=g.comparePositions(f,h);0>m?c++:(0<m?f=h:(h.destroy(),c++),b++);a.push(f)}h=[];c<e.length?h=e.slice(c):b<d.length&&(h=d.slice(b));return a=a.concat(h)}}})},"MW/rtc/plugins/embeddedoutputs/model/Region":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g){this.code=f;this.uid=g}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsSave16a":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/CodeUtilities","MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities"],function(h,f,g,e){return h(null,{constructor:function(d,c,b,a,e){this._internalDocument=d;this._outputsModel=c;this._eoView=b;this._triggers=a;this._splitterPositionModel=e},destroy:function(){},get16aSaveObject:function(){var d=this._outputsModel.getRegions(),c=[],b=[],a={};this._get16aDataStructureFrom18aPlusModel(d).forEach(function(d){var e=d.code.regionPositions[0],f=d.code.regionPositions[d.code.regionPositions.length-
1];if(!e.isValid()||!f.isValid())throw Error("Position not valid.");var e=this._internalDocument.getLineNumber(e.getNode()),f=this._internalDocument.getLineNumber(f.getNode()),h={code:{sectionBreak:d.code.sectionBreak,endOfSection:d.code.endOfSection,regionString:d.code.regionString,regionNumber:d.code.regionNumber},startLine:e,endLine:f,outputIndexes:[]};d.outputs.forEach(function(b){var d=[],e=b.uid,f=a[e];if(void 0===f){b.codeLinePositions.forEach(function(a){g.isCodeContainer(a.getNode())&&(a=
g.getCodeLineNumberFromPosition(this._internalDocument,a),0<a&&d.push(a))},this);if(0===d.length)return;c.push({type:b.type,outputData:b.getSerializableData(),lineNumbers:d});f=c.length-1;a[e]=f}h.outputIndexes.push(f)},this);b.push(h)},this);return{metaData:{evaluationState:this._triggers.getEvaluationState(),layoutState:this._eoView.getLayoutView(),outputStatus:this._eoView.getReadyBusyIndicatorState(),splitterState:{proportion:this._splitterPositionModel.getRightPanelProportion()}},outputArray:c,
regionArray:b}},_get16aDataStructureFrom18aPlusModel:function(d){var c,b=[];c=d.map(function(a){var c=this._outputsModel.getOutputsForRegion(a);b=b.concat(c);return{code:a.code,outputs:[]}},this);b.forEach(function(a){a.codeLinePositions.forEach(function(b){b=e.convertPositionToRegionNumber(b,d);b=c[b].outputs;-1===b.indexOf(a)&&b.push(a)})});return c}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsView":function(){define("dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/on ./EmbeddedOutputsViewModel ./EmbeddedOutputsStaleOutput ./LineBusyIndicator ./ReadyBusyIndicator ./RightPanel ./ViewToggler ./ScrollableOutputStyler ./inline/InlineView ./onright/OnrightView ./onright/SplitterPositionController".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){return h(null,{constructor:function(a,b,d,e,f,k,h,l,m,n,q,p,r,M,P,Q,O,I,E,K,Y,Z,S,V,ha,U,ea){this._outputsModel=a;this._parentBorderContainer=b;this._cursor=d;this._cursorView=e;this._rtcView=f;this._focusService=k;this._stateHandler=h;this._actionService=l;this._internalDocument=m;this._document=n;this._sectionModel=q;this._staleSectionModel=p;this._rtcDomNode=r;this._margin=M;this._statusActionBar=P;this._contextMenuGenerator=Q;this._preferences=O;this._syntaxErrorHandler=
I;this._rightmargincontainer=E;this._splitterPositionModel=K;this._editorId=Y;this._executionDataManager=Z;this._backingStore=S;this._lineNumberTracker=V;this._viewService=ha;this._documentDebugServices=U;this._documentLoadedService=ea;this._aspectHandles=[];this._savedViewState=null;this._viewModel=new c(a,g.hitch(this,"_createOutputDivsFromOutputs"))},enable:function(){this._staleOutputManager=new b(this._viewModel,this._stateHandler,this._syntaxErrorHandler,this._viewService);this._aspectHandles.push(e.after(this._viewModel,
"onModelUpdated",g.hitch(this,"_layoutView",!1,!1,!1),!0));this._splitterPositionController=new r(this._splitterPositionModel,this._parentBorderContainer,g.hitch(this,"_isOnRightView"));this._rightPanel=new l(this._parentBorderContainer,this._splitterPositionController,this._splitterPositionModel);this._viewToggler=new m(this._rightmargincontainer,this._actionService,this._editorId,this._savedViewState);this._inlineView=new n(this._viewModel,this._cursor,this._rtcView,this._internalDocument,this._actionService,
this._syntaxErrorHandler);this._aspectHandles.push(e.after(this._inlineView,"onOutputClicked",g.hitch(this,"_handleOutputClicked"),!0));this._onrightView=new p(this._rtcView,this._viewModel,this._cursor,this._cursorView,this._parentBorderContainer,this._rightPanel,this._focusService,this._actionService,this._contextMenuGenerator,this._stateHandler,this._internalDocument);this._aspectHandles.push(e.after(this._onrightView,"onOutputClicked",g.hitch(this,"_handleOutputClicked"),!0));this._currentView=
this._onrightView;this._disabledView=this._inlineView;this._savedViewState&&(this.setLayoutState(this._savedViewState),this._savedViewState=null);this._readyBusyIndicator=new k(this._outputsModel,this._cursor,this._stateHandler,this._internalDocument,this._focusService,this._rtcDomNode,this._margin,this._statusActionBar,this._rtcView,this._preferences,this._syntaxErrorHandler,this._document,this._backingStore,this._lineNumberTracker);this._lineBusyIndicator=new a(this._outputsModel,this._rtcView,
this._stateHandler,this._internalDocument,this._margin,this._rtcDomNode,this._statusActionBar,this._document,this._preferences,this._executionDataManager,this._backingStore,this._lineNumberTracker,this._viewService,this._documentDebugServices,this._documentLoadedService);this._aspectHandles.push(e.after(this._onrightView,"onAlign",g.hitch(this,"onAlign")));this._aspectHandles.push(e.after(this._parentBorderContainer,"layout",g.hitch(this,"_layoutView",!1,!0,!1),!0));this._setupStyler(this._parentBorderContainer,
this._viewModel);this._actions=[{id:"_rtc_toggle_outputs_view",enabled:!0,key:"ctrl_alt_i",callback:g.hitch(this,"toggle",!0)},{id:"rtc_on_right_view",enabled:!0,selected:this._isOnRightView(),callback:g.hitch(this,"_toggleState",this._onrightView.getState(),!0)},{id:"rtc_inline_view",enabled:!0,selected:this._isInlineView(),callback:g.hitch(this,"_toggleState",this._inlineView.getState(),!0)},{id:"rtc_inline_view_no_animation",enabled:!0,callback:g.hitch(this,"_toggleState",this._inlineView.getState(),
!1)},{id:"_rtc_on_right_view_no_animation",enabled:!0,callback:g.hitch(this,"_toggleState",this._onrightView.getState(),!1)}].concat(this._inlineView.getActions(),this._onrightView.getActions());this._actionService.loadActions(this._actions);this._aspectHandles.push(e.after(this._actionService,"onActionChange",g.hitch(this,"_onActionChange"),!0))},disable:function(){var a=this;this._actions.forEach(function(b){a._actionService.getAction(b.id)&&(a._actionService.updateAction(b.id,{enabled:!1}),a._actionService.removeAction(b.id))});
this._viewModel.clear();this._staleOutputManager.destroy();this._readyBusyIndicator.destroy();this._lineBusyIndicator.destroy();this._scrollableOutputStyler.destroy();this._splitterPositionController.destroy();this._rightPanel.destroy();this._viewToggler.destroy();this._savedViewState=this.getLayoutView();this._currentView=null;this._inlineView.destroy();this._onrightView.destroy();this._aspectHandles.forEach(function(a){a.remove()})},getRightScrollPane:function(){return this._rightPanel.getScrollPane()},
onAlign:function(){this._scrollableOutputStyler.layout()},outputChanged:function(){this._outputStyleChanged()},onViewToggled:function(a){},_setupStyler:function(a,b){this._scrollableOutputStyler=new q(b,this._rtcDomNode);this._aspectHandles.push(e.after(this,"_layoutView",g.hitch(this._scrollableOutputStyler,"layout"),!0));this._aspectHandles.push(e.after(this._scrollableOutputStyler,"scrollableStylesChanged",g.hitch(this,"_outputStyleChanged"),!0))},toggle:function(a){if(!this._toggling){this._toggling=
!0;this._actionService.updateAction("_rtc_toggle_outputs_view",{enabled:!1});var b=this._disabledView,c=this._currentView.disable(a);this._disabledView=this._currentView;this._currentView=b;this._actionService.updateAction("rtc_on_right_view",{enabled:!0,selected:this._isOnRightView()});this._actionService.updateAction("rtc_inline_view",{enabled:!0,selected:this._isInlineView()});this._viewModel.refreshViewModel();if(c&&a)var e=this,f=d(c,"End",function(){f.remove();e._toggleComplete(a)});else this._toggleComplete(a);
this._focusService.setFocus()}},_toggleComplete:function(a){this._scrollableOutputStyler.clearListeners();this._redrawCurrentView(a);this._toggling=!1;this._actionService.updateAction("_rtc_toggle_outputs_view",{enabled:!0});this.onViewToggled(this._isOnRightView());if(this._lastToggleRequest){var b=this._lastToggleRequest;this._lastToggleRequest=null;this._toggleState(b,a)}},_redrawCurrentView:function(a){this._currentView.enable(a);this._layoutView(a,!1,!0)},_redrawRTCView:function(a){this._rtcView.onLayoutChange(a?
this._cursor.position:null)},_outputStyleChanged:function(a){this._isOnRightView()?this._onrightView.align(a):this._redrawRTCView(!1)},_isInlineView:function(){return this._currentView===this._inlineView},_isOnRightView:function(){return this._currentView===this._onrightView},_toggleState:function(a,b){this._currentView.getState()!==a&&this.toggle(b)},_layoutView:function(a,b,c){if(!this._isOnRightView()||!b)this._currentView.layout(this._viewModel,a,b),this._redrawRTCView(c)},_createOutputDivsFromOutputs:function(a){return this._currentView.createOutputDivsFromOutputs(a)},
getOutputsAssociatedWithNode:function(a){return this._viewModel.getOutputsAssociatedWithNode(a)},_onActionChange:function(a){"rtc_on_right_view"===a.id&&"selected"===a.key&&a.newValue?this._toggleOnActionChanged(this._onrightView.getState()):"rtc_inline_view"===a.id&&("selected"===a.key&&a.newValue)&&this._toggleOnActionChanged(this._inlineView.getState())},_toggleOnActionChanged:function(a){this._toggling?this._lastToggleRequest=a:this._toggleState(a,!0)},setLayoutState:function(a){this._toggleState(a,
!1)},setReadyBusyIndicatorState:function(a){this._readyBusyIndicator.setState(a)},getLayoutView:function(){return this._currentView.getState()},getReadyBusyIndicatorState:function(){return this._readyBusyIndicator.getState()},getOutputFromOutputDiv:function(a){return this._viewModel.getOutputFromOutputDiv(a)},getOutputDivsForRange:function(a,b){return this._viewModel.getOutputDivsForRange(a,b)},getOutputWrapperFromElement:function(a){return this._viewModel.getOutputWrapperFromElement(a)},registerCurrentOutputService:function(a){this._onrightView.registerCurrentOutputService(a)},
_handleOutputClicked:function(a){if(a=this.getOutputWrapperFromElement(a))a=this._viewModel.getOutputFromOutputDiv(a),this.onOutputClick(a)},onOutputClick:function(a){}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewModel":function(){define("dojo/_base/declare dojo/aspect dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-style mw-log/Log mw-utils/Utils MW/rtc/model/NodeUtilities MW/rtc/model/PositionUtilities".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h(null,{constructor:function(a,
b){this._createWrapperCallback=b;this._outputsModel=a;this._aspectHandles=[];this._regions=[];this._positionToOutputMap=new Map;this._uidToOutputMap={};this._aspectHandles.push(f.after(this._outputsModel,"onModelUpdated",g.hitch(this,"_updateViewModel"),!0));this._updateViewModel()},getOutputsAssociatedWithNode:function(a){return this.getOutputDivsForNode(a.rootContainer()).map(function(a){return this.getOutputFromOutputDiv(a)},this)},getOutputDivs:function(){var a=[];this._forEachOutput(function(b){a.push(b.domElement)});
return a},getRegions:function(){return this._regions},getOutputDivsForNode:function(b){b=l.getPositions(b);for(var c=[],d=0;d<b.length;d++){var e=this._positionToOutputMap.get(b[d]);void 0!==e&&c.push(e)}c=a.unique(c);c.sort(function(a,b){return a._index-b._index});return c.map(function(a){return a.domElement})},getOutputDivsForRange:function(a,b){var c=k.getParagraphNodesInRange(a,b);return this._getOutputDivsForNodes(c)},_getOutputDivsForNodes:function(a){var b=[],c=this;this._forEachOutput(function(d){c._isOutputAssociatedWithNode(d,
a)&&b.push(d.domElement)},this);return b},_forEachOutput:function(a){var b,c,d,e,f;for(b=0;b<this._regions.length;b++){d=this._regions[b];e=d.outputUidArray;for(c=0;c<e.length;c++)f=d.outputsByUid[d.outputUidArray[c]],a(f)}},_isOutputAssociatedWithNode:function(a,b){return a.codeLinePositions.some(function(a){return-1<b.indexOf(a.getNode())})},doesNodeHaveOutputs:function(a){a=l.getPositions(a);for(var b=0;b<a.length;b++)if(void 0!==this._positionToOutputMap.get(a[b]))return!0;return!1},refreshViewModel:function(){this._updateViewModel()},
onModelUpdated:function(){},clear:function(){this._regions=[];this._positionToOutputMap.clear();this._uidToOutputMap={};this.onModelUpdated()},destroy:function(){this.clear();this._uidToOutputMap=this._positionToOutputMap=null;this._aspectHandles.forEach(function(a){a.remove()})},getLineNumbersForOutput:function(a){a=a.getAttribute("uid");return this._uidToOutputMap[a].codeLinePositions.map(function(a){return a.getLineColumn().line-1})},getClosestNodeWithOutputToLineNumber:function(a,b,c){b=b||Number.NEGATIVE_INFINITY;
c=c||Number.POSITIVE_INFINITY;var d=null,e=Number.NEGATIVE_INFINITY;this._forEachOutput(function(f){f.codeLinePositions.forEach(function(f){if(f.isValid()){var g=f.getLineColumn().line-1;if(!(g<b||g>c)){var k=Math.abs(a-g),h=Math.abs(a-e);k<=h&&(d=f.node,e=g)}}})});return d},_updateViewModel:function(a,b){b?this._updateViewRegionsFromChangelist(b):this._updateViewRegions();var c=0;this._forEachOutput(function(a){a._index=c;c++});this.onModelUpdated(a)},_updateViewRegions:function(){this._preserveExistingHeights();
this._positionToOutputMap.clear();this._uidToOutputMap={};this._regions=this._outputsModel.getRegions().map(function(a){var b=a.code.regionPositions;a=this._outputsModel.getOutputsForRegion(a);var c=this._createOutputMap(a);c.outputUidArray.forEach(function(a){var b=c.outputMap[a];this._uidToOutputMap[a]=b;this._addViewModelOutputToPositionMap(b)},this);return{positions:b,outputsByUid:c.outputMap,outputUidArray:c.outputUidArray}},this)},_preserveExistingHeights:function(){var a=[];this._forEachOutput(function(b){var c=
b.domElement.parentElement;c&&a.push({previousWrapper:c,previousClientHeight:b.domElement.clientHeight})});a.forEach(function(a){c.set(a.previousWrapper,"height",a.previousClientHeight+"px")})},_updateViewRegionsFromChangelist:function(a){var c=this._regions;a.forEach(function(a){var d=a.removedOutputId,e=a.outputIndex,f=a.output,g=c[a.regionNumber];switch(a.type){case this._outputsModel.CHANGE_TYPE.ADD:this._addOutput(g,f,e);break;case this._outputsModel.CHANGE_TYPE.REMOVE:e=g.outputUidArray.indexOf(d);
if(0>e){b.error("Invalid output index; skipping output.");break}this._removeOutput(g,d,e);break;case this._outputsModel.CHANGE_TYPE.REPLACE:this._removeOutput(g,d,e);this._addOutput(g,f,e);break;case this._outputsModel.CHANGE_TYPE.UPDATE:this._updateOutput(g,f)}},this);this._regions=c},_createOutputMap:function(a){var b={},c=[];a.forEach(function(a){b[a.uid]=this._createViewModelOutput(a.codeLinePositions,a);c.push(a.uid)},this);return{outputMap:b,outputUidArray:c}},_addOutput:function(a,b,c){var d=
a.outputsByUid;a=a.outputUidArray;var e=this._createViewModelOutput(b.codeLinePositions,b);d[b.uid]=e;a.splice(c,0,b.uid);this._uidToOutputMap[b.uid]=e;this._addViewModelOutputToPositionMap(e)},_createViewModelOutput:function(a,b){return{domElement:this._createOutputWrapper(b),codeLinePositions:a,_modelOutput:b,_index:-1}},_removeOutput:function(a,b,c){var d=a.outputsByUid;a=a.outputUidArray;delete this._uidToOutputMap[b];this._removeViewModelOutputToPositionMap(d[b]);a.splice(c,1);delete d[b]},_updateOutput:function(a,
b){var c=a.outputsByUid;this._removeViewModelOutputToPositionMap(c[b.uid]);var d=this._createViewModelOutput(b.codeLinePositions,b);c[b.uid]=d;this._uidToOutputMap[b.uid]=d;this._addViewModelOutputToPositionMap(d)},_addViewModelOutputToPositionMap:function(a){a.codeLinePositions.forEach(function(b){this._positionToOutputMap.set(b,a)},this)},_removeViewModelOutputToPositionMap:function(a){a.codeLinePositions.forEach(function(a){this._positionToOutputMap["delete"](a)},this)},_createOutputWrapper:function(a){var b=
this._createWrapperCallback(a.codeLinePositions);d.add(b,a.getCssTag());b.setAttribute("uid",a.uid);a=a.getDomElement();var c=a.parentElement;c&&(b.setAttribute("data-scroll-top",c.getAttribute("data-scroll-top")),b.setAttribute("data-scroll-left",c.getAttribute("data-scroll-left")));e.place(a,b,"last");return b},getOutputFromOutputDiv:function(a){a=a.getAttribute("uid");return(a=this._uidToOutputMap[a])?a._modelOutput:null},hasOutputs:function(){return this._regions.some(function(a){return a.outputUidArray&&
0<a.outputUidArray.length})},getOutputWrapperFromElement:function(a){for(var b=d.contains(a,"rightPaneElement"),c=d.contains(a,"inlineElement"),e=d.contains(a,"rtePane");!b&&!c&&!e;){a=a.parentElement;if(!a)return null;b=d.contains(a,"rightPaneElement");c=d.contains(a,"inlineElement");e=d.contains(a,"rtePane")}return d.contains(a,"rtePane")?null:a},startupOutputs:function(){this._outputsModel.getOutputs().forEach(function(a){a.startup()})}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsStaleOutput":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","dojo/query","dojo/dom-class"],function(h,f,g,e,d){return h(null,{_STALE_OUTPUT_CLASS:"stale_output",_STALE_OUTPUT_SELECTOR:".stale_output",constructor:function(c,b,a,d){this._stateHandler=b;this._viewModel=c;this._syntaxErrorHandler=a;this._viewService=d;this._aspectHandles=[g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0),g.after(this._syntaxErrorHandler,"onEvaluationCompletedWithNoSyntaxErrors",f.hitch(this,"_clearAllStale")),g.after(this._syntaxErrorHandler,
"onSyntaxError",f.hitch(this,"_unstaleSyntaxError"))]},_stateChangeListener:function(c,b){if(c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED){var a=b.evaluationRange,d=a.getStartPosition().getNode(),a=a.getEndPosition().getNode();this._viewService.executeViewAction(f.hitch(this,"_setOutputsInRangeStale",d,a))}},_unstaleSyntaxError:function(){var c=this._syntaxErrorHandler.getFirstSyntaxErrorOutput();c&&d.remove(c.getDomElement(),this._STALE_OUTPUT_CLASS)},_clearAllStale:function(){this._viewModel.getOutputDivs().forEach(function(c){d.remove(this._getTargetDiv(c),
this._STALE_OUTPUT_CLASS)},this)},_setOutputsInRangeStale:function(c,b){this._viewModel.getOutputDivsForRange(c,b).forEach(function(a){d.add(this._getTargetDiv(a),this._STALE_OUTPUT_CLASS)},this)},_getTargetDiv:function(c){return c.children[0]},destroy:function(){this._aspectHandles.forEach(function(c){c.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/embeddedoutputs/view/LineBusyIndicator":function(){define("dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/_base/declare dojo/_base/lang MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/embeddedoutputs/view/AnimationUtilities MW/rtc/view/ViewEventUtilities MW/rtc/view/ViewUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return d(null,{_ANIMATION_LENGTH:1E3,_ONE_SECOND:1E3,_PADDING:2,constructor:function(a,b,d,e,f,l,m,q,x,B,A,D,F,H,L){this._model=a;this._view=b;this._stateManager=d;this._internalDocument=e;this._margin=f;this._rtcDomNode=l;this._statusActionBar=m;this._document=q;this._preferences=x;this._executionDataManager=B;this._backingStore=A;this._lineNumberTracker=D;this._viewService=F;this._documentDebugServices=H;this._documentLoadedService=L;this._debugServices=k.getInstance();
this._currentEndPosition=this._currentStartPosition=null;this._positionChangeListeners=[];this._aspectHandles=[];this._aspectHandles.push(h.after(this._stateManager,"stateChanged",c.hitch(this,"_stateChangeListener"),!0));this._aspectHandles.push(h.after(this._internalDocument,"onDocumentChanged",c.hitch(this,"_onFormatChange"),!0));this._aspectHandles.push(h.after(this._view,"onViewUpdated",c.hitch(this,"_viewUpdated"),!0));this._aspectHandles.push(h.after(this._margin,"onResize",c.hitch(this,"_setMarginPositioning")));
this._aspectHandles.push(h.after(this._executionDataManager,"onDataUpdate",c.hitch(this,"_handleDataUpdate"),!0));this._aspectHandles.push(h.after(this._debugServices,"onDBCont",c.hitch(this,"_handleDBCont")));this._aspectHandles.push(h.after(this._documentDebugServices,"onStackChanged",c.hitch(this,"_handleStackChanged"),!0));this._indicator=g.create("div",{className:"busyLineIndicator"});g.place(this._indicator,l,"last");this._convertedCache=[];this._gutterTop=0;this._busyLineAnimationTimer=null;
this._isPaused=!1},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._removeIndicator();g.destroy(this._indicator)},_stateChangeListener:function(a,b){switch(a){case this._stateManager.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE:this._removeIndicator(),this._convertedCache=[],this._isPaused=!1}},_handleDataUpdate:function(a){this._isPaused||(this._removeIndicator(),this._setCacheOnDataUpdate(a),this._setBusyLine())},_handleStackChanged:function(a){if(0!==
a.length){this._isPaused=!0;var b=a[a.length-1].getLineNumber()-1;0>b&&(b=-b);this._documentLoadedService.whenDocumentLoadedWithText(c.hitch(this,function(){var a=this._lineNumberTracker.createPositionFromOldLineNumber(b);this._setAnimationPercent(0);this._setCache([a]);this._setBusyLine();this._stopAnimation();a.destroy()}))}},_handleDBCont:function(){this._isPaused=!1;this._stateManager.isRunning()?this._startAnimation():this._removeIndicator()},_onFormatChange:function(c){c=a.getEventsOfType(c,
b.FORMAT_CHANGE_EVENT);this._isBusy()&&0<c.length&&(c=c[0],"code"===c.oldFormat&&(this._isRangeWithinBusyRegion(c.startLine+1,c.endLine+1)?this._removeIndicator():this._convertedCache.push({start:c.startLine+1,end:c.endLine+1})),this._setPositioning())},_checkCache:function(){return!this._convertedCache.length?!1:this._convertedCache.some(function(a){return this._isRangeWithinBusyRegion(a.start,a.end)},this)},_isRangeWithinBusyRegion:function(a,b){var c=this._currentStartPosition.getLineColumn().line,
d=this._currentEndPosition.getLineColumn().line;return a>=c&&a<=d||b>=c&&b<=d},_isBusy:function(){return f.contains(this._indicator,"busy")},_setCacheOnDataUpdate:function(a){(a=this._model.getRegions()[a-1])&&this._setCache(a.code.regionPositions)},_setCache:function(a){this._clearCache();this._currentStartPosition=this._document.createLinePosition(a[0].getNode());this._positionChangeListeners.push(h.after(this._currentStartPosition,"onChange",c.hitch(this,"_setBusyLine")));this._currentEndPosition=
this._document.createLinePosition(a[a.length-1].getNode());this._positionChangeListeners.push(h.after(this._currentEndPosition,"onChange",c.hitch(this,"_setBusyLine")))},_clearCache:function(){this._currentStartPosition&&this._currentEndPosition&&(this._document.deletePosition(this._currentStartPosition),this._document.deletePosition(this._currentEndPosition),this._currentEndPosition=this._currentStartPosition=null,this._positionChangeListeners.forEach(function(a){a.remove()}),this._positionChangeListeners=
[])},_setBusyLine:function(){this._currentStartPosition&&(this._currentEndPosition&&!this._checkCache())&&this._viewService.executeViewAction(c.hitch(this,"_setPositionAndAddIndicator"))},_setPositionAndAddIndicator:function(){this._setPositioning();this._addIndicator()},_setPositioning:function(){if(this._currentStartPosition&&this._currentEndPosition){var a=q.getVerticalDimensionsBetweenPositions(this._currentStartPosition,this._currentEndPosition,this._view),b=a.bottom-a.top,a=a.top,c=this._view.getDomTargetPosition().scrollTop;
e.set(this._indicator,{top:this._gutterTop+a-c+"px",height:b+"px"});this._setMarginPositioning()}},_addIndicator:function(){this._startAnimation();f.add(this._indicator,"busy")},_removeIndicator:function(){f.remove(this._indicator,"busy");e.set(this._indicator,{top:"0px",height:"0px"});this._stopAnimation();this._clearCache()},_startAnimation:function(){if(null===this._busyLineAnimationTimer){var a=l.getAnimationFrameRate(this._preferences),a=this._ONE_SECOND/a,b=this._ANIMATION_LENGTH/a,d=0,e=1;
this._busyLineAnimationTimer=setInterval(c.hitch(this,function(){var a=d/b;1<a||0>a?e*=-1:this._setAnimationPercent(a);d+=e}),a)}},_setAnimationPercent:function(a){e.set(this._indicator,{backgroundColor:"rgba(0,0,0,"+(0.5-0.25*a)+")",boxShadow:"0px 0px "+5*a+"px rgba(0, 0, 0, 0.5)"})},_stopAnimation:function(){null!==this._busyLineAnimationTimer&&(clearInterval(this._busyLineAnimationTimer),this._busyLineAnimationTimer=null)},_setMarginPositioning:function(){var a=this._statusActionBar.getMarginElement().style,
b=parseFloat(a.left)+this._PADDING,a=parseFloat(a.width);e.set(this._indicator,{left:b+"px",width:a+"px"})},_viewUpdated:function(a){if(m.hasOffsetHeightEvent(a)){var b=this._statusActionBar.getMarginElement();if(q.isDescendant(b,this._rtcDomNode)){var b=b.getBoundingClientRect().top,c=this._rtcDomNode.getBoundingClientRect().top;this._gutterTop=b-c}else this._gutterTop=0}(m.hasScrollEvent(a)||m.hasHeightEvent(a)||m.hasLayoutEvent(a))&&this._setPositioning()}})})},"MW/rtc/plugins/embeddedoutputs/view/AnimationUtilities":function(){define([],
function(){return{_ANIMATION_FRAMERATE:30,_ANIMATION_FRAMERATE_THROTTLED:10,_SHOULD_THROTTLE_PREFERENCE:"LiveEditorEmbeddedOutputsThrottleFrameRate",constructor:function(){},destroy:function(){},getAnimationFrameRate:function(h){return h.getValue(this._SHOULD_THROTTLE_PREFERENCE,!1)?this._ANIMATION_FRAMERATE_THROTTLED:this._ANIMATION_FRAMERATE}}})},"MW/rtc/plugins/embeddedoutputs/view/ReadyBusyIndicator":function(){define("dijit/Tooltip dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/actions dojo/text!MW/rtc/plugins/embeddedoutputs/view/templateError.html MW/rtc/plugins/debug/DebugServicesFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutput MW/rtc/plugins/embeddedoutputs/view/AnimationUtilities MW/rtc/plugins/embeddedoutputs/view/Spinner MW/rtc/plugins/view/tooltip/TooltipUtilities MW/rtc/view/ViewEventUtilities MW/rtc/view/ViewUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){return b(null,{_READY_MESSAGE:"",_BUSY_MESSAGE:k.scriptIsBusy,_PAUSED_MESSAGE:k.scriptIsPaused,_ERROR_MESSAGE:k.scriptHasError,_INDICATOR_STATES:{READY:"ready",ERROR:"error"},_SCROLL_PERCENT:33,_SPINNER_SIZE:16,_ANIMATION_LENGTH:1E3,constructor:function(b,c,d,g,k,l,q,t,s,L,N,M,P,Q){this._model=b;this._cursor=c;this._stateHandler=d;this._internalDocument=g;this._focusService=k;this._rtcDomNode=l;this._statusActionBar=t;this._view=s;this._syntaxErrorHandler=
N;this._document=M;this._backingStore=P;this._lineNumberTracker=Q;this._debugServices=m.getInstance();this._aspectHandles=[];this._aspectHandles.push(f.after(this._stateHandler,"stateChanged",a.hitch(this,"_stateChangeListener"),!0));this._aspectHandles.push(f.after(g,"onDocumentReset",a.hitch(this,"_resetError")));this._aspectHandles.push(f.after(this._model,"onModelUpdated",a.hitch(this,"_resetError")));this._aspectHandles.push(f.after(q,"onResize",a.hitch(this,"_setMarginPositioning")));this._aspectHandles.push(f.after(this._view,
"onViewUpdated",a.hitch(this,"_handleViewUpdated"),!0));this._aspectHandles.push(f.after(this._syntaxErrorHandler,"onSyntaxError",a.hitch(this,"_handleSyntaxError")));this._aspectHandles.push(f.after(this._debugServices,"onDBStop",a.hitch(this,"_handleDBStop"),!0));this._aspectHandles.push(f.after(this._debugServices,"onDBCont",a.hitch(this,"_handleDBCont")));this._indicator=null;this._isPaused=!1;this._createBusyIndicator();this._setMarginPositioning();this._busySpinner=new p({size:this._SPINNER_SIZE,
animationLength:this._ANIMATION_LENGTH,frameRate:n.getAnimationFrameRate(L)});this._tooltip=new h({connectId:[this._indicator],label:r.createUnfocusableTooltipTextHTML(this._READY_MESSAGE)});this._currentIndicator=this._INDICATOR_STATES.READY;this._clickHandle=null;e.place(this._indicator,l,"last")},_createBusyIndicator:function(){this._indicator=e.create("div",{className:"busyHolder"});this._holder=e.create("div",{className:"progressHolder"});e.place(this._holder,this._indicator)},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});
this._destroyPausePosition();this._tooltip.destroy();this._aspectHandles=[];this._removeClickHandle();e.destroy(this._indicator)},_stateChangeListener:function(a,b){switch(a){case this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED:this._clearStatus();break;case this._stateHandler.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED:this._updateBusyRegion(b);break;case this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE:this._busySpinner.remove(),this._isPaused=!1,this._destroyPausePosition(),this._model.hasError()?
this._setError():this._ready()}},_clearStatus:function(){this._busySpinner.remove();g.remove(this._indicator,"error");this._holder.innerHTML=""},_handleSyntaxError:function(){var a=this._syntaxErrorHandler.getFirstSyntaxErrorOutput();a&&this._clickMethod(a.codeLinePositions[0])},_updateBusyRegion:function(a){if(!this._isPaused&&(this._destroyPausePosition(),void 0!==a&&(a=this._model.getRegions()[a])))this._setClickPosition(a),g.add(this._indicator,"busy"),this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._BUSY_MESSAGE),
this._startAnimation()},_handleDBStop:function(a,b){this._isPaused=!0;this._stateHandler.isRunning()&&(this._busySpinner.pause(),this._tooltip.label=this._PAUSED_MESSAGE,a===this._backingStore.getAbsoluteFilePath()&&(0>b&&(b=-b),this._destroyPausePosition(),this._pausePosition=this._lineNumberTracker.createPositionFromOldLineNumber(b),this._removeClickHandle(),this._createClickHandle(this._pausePosition)))},_handleDBCont:function(){this._isPaused=!1;this._stateHandler.isRunning()&&this._startAnimation()},
_destroyPausePosition:function(){this._pausePosition&&(this._pausePosition.destroy(),this._pausePosition=null)},_setClickPosition:function(a){a=a.code.regionPositions[0];this._removeClickHandle();this._createClickHandle(a)},_startAnimation:function(){this._busySpinner.isActive()||(this._busySpinner.placeAt(this._holder),this._busySpinner.startup())},_ready:function(){this._currentIndicator=this._INDICATOR_STATES.READY;g.remove(this._indicator,"busy");this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._READY_MESSAGE);
this._removeClickHandle()},_resetError:function(){this._currentIndicator===this._INDICATOR_STATES.ERROR&&!this._model.hasError()&&(this._clearStatus(),this._currentIndicator=this._INDICATOR_STATES.READY,this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._READY_MESSAGE))},_setError:function(){this._currentIndicator=this._INDICATOR_STATES.ERROR;g.add(this._indicator,"error");this._holder.innerHTML=l;g.remove(this._indicator,"busy");this._tooltip.label=r.createUnfocusableTooltipTextHTML(this._ERROR_MESSAGE);
var a=this._model.findOutput(function(a){return a.isInstanceOf(q)});this._removeClickHandle();this._createClickHandle(a.codeLinePositions[0])},_createClickHandle:function(b){this._clickHandle=c(this._indicator,"click",a.hitch(this,"_clickMethod",b))},_clickMethod:function(a){var b=a.getNode();this._cursor.hasSelection()&&this._cursor.releaseAnchor();a.getLineColumn().line!==this._cursor.getLineColumn().line&&this._cursor.setPosition(b,0,!1);this._view.scrollNodeToPercent(b,this._SCROLL_PERCENT);this._focusService.setFocus()},
_removeClickHandle:function(){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=null)},setState:function(a){this._resetError();a===this._INDICATOR_STATES.ERROR&&this._setError()},getState:function(){return this._currentIndicator},_setMarginPositioning:function(){var a=this._statusActionBar.getMarginElement(),a=parseFloat(a.style.left)+2,b=(a-this._SPINNER_SIZE)/2;d.set(this._indicator,{width:a+"px",height:this._SPINNER_SIZE+4+"px"});d.set(this._holder,{left:b+"px"})},_handleViewUpdated:function(a){if(s.hasOffsetHeightEvent(a)){a=
this._statusActionBar.getMarginElement();var b=0;t.isDescendant(a,this._rtcDomNode)&&(a=a.getBoundingClientRect().top,b=this._rtcDomNode.getBoundingClientRect().top,b=a-b);d.set(this._indicator,{top:b+"px"})}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query mw-html-utils/HtmlUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./ErrorOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a){return h([c],{type:a.OUTPUT_TYPE,constructor:function(a){this._data=a.data;this._diagnosticMessageFormatter=a.diagnosticMessageFormatter;this._lineNumberTracker=a.lineNumberTracker;a=d.treatHtmlLikeCommandWindow(this._data.text);this._domElement=this._diagnosticMessageFormatter.createErrorMessageWithStack(a).getDomNode();this._data.stackLineNumber&&(this.stackLineNumber=this._lineNumberTracker.createPositionFromOldLineNumber(this._data.stackLineNumber-1),this.identifier=
this._data.identifier)},getCssTag:function(){return a.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return{text:this._removeScrollToLinks(this._data.text),errorType:this._data.errorType}},getText:function(){return b.getText(this._data.text)},getHTML:function(a,b){var c=this._domElement.cloneNode(!0);e(".doNotExport",c).forEach(function(a){g.destroy(a)});return c.innerHTML},_removeScrollToLinks:function(a){var b=RegExp('\x3ca href\x3d"matlab:opentoline\\(\'(?:[^\\/\\\\]*?\\.mlx)\', (?:[0-9]+), (?:[0-9]+)\\)" style\x3d"font-weight:bold"\x3e([^\x3c]*?)\x3c\\/a\x3e',
"g");a=a.replace(/<a href="matlab:opentoline\('(?:[^\/\\]*?\.mlx)', (?:[0-9]+), (?:[0-9]+)\)">([^<]*?)<\/a>/g,"$1");return a=a.replace(b,"\x3cstrong\x3e$1\x3c/strong\x3e")},getErrorType:function(){return this._data.errorType}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput":function(){define(["dojo/_base/declare","mw-utils/Utils"],function(h,f){return h(null,{type:null,uid:null,codeLinePositions:null,constructor:function(){this.uid=f.generateUuid()},destroy:function(){},getCodeLinePositions:function(){return this.codeLinePositions},
setCodeLinePositions:function(f){this.codeLinePositions=f},getCssTag:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getCssTag()");},getDomElement:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getDomElement()");},startup:function(){},getSerializableData:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getSerializableData()");},getText:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getText()");
},getHTML:function(f,e){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getHTML()");},isReady:function(){return!0},getReadyPromise:function(){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutput.getReadyPromise()");}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility":function(){define(["dojo/dom-construct"],function(h){return{getText:function(f){f=h.create("div",{innerHTML:f});f.innerHTML=f.innerHTML.replace(/<br>/g,
"\n");var g=f.textContent;h.destroy(f);return g},removeControlCharacters:function(f){return f.replace(/[\x00-\x07\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")},processBackspaceCharacters:function(f){for(;-1!==f.indexOf("\b");)f=f.replace(/[\s\S]?\x08/,"");return f}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"error",CSS_TAG:"embeddedOutputsErrorElement",SYNTAX_ERROR_TYPE:"syntax",RUNTIME_ERROR_TYPE:"runtime"}})},"MW/rtc/plugins/embeddedoutputs/view/Spinner":function(){define(["dojo/_base/declare",
"dojo/_base/lang"],function(h,f){return h(null,{_SVG_NAMESPACE:"http://www.w3.org/2000/svg",_ONE_SECOND:1E3,constructor:function(f){f=f||{};this.size=f.size||24;this.frameRate=f.frameRate||30;this.animationLength=f.animationLength||1E3;this._reset();this._initializeSizing();this._createSpinner()},destroy:function(){this.remove();this._reset()},isActive:function(){return null!==this._spinnerTimer},placeAt:function(f){this._attachPoint=f;this._attachPoint.appendChild(this._spinner)},remove:function(){this.stop();
this._attachPoint&&this._spinner.parentNode===this._attachPoint&&(this._attachPoint.removeChild(this._spinner),this._attachPoint=null)},startup:function(){if(this._attachPoint){var g=this._ONE_SECOND/this.frameRate;this._startTime=(new Date).getTime();this._spinnerTimer=setInterval(f.hitch(this,"_processFrame"),g)}},stop:function(){clearInterval(this._spinnerTimer);this._spinnerTimer=null},pause:function(){this.stop();this._renderPercentage(0)},_reset:function(){this._attachPoint=this._spinnerTimer=
this._spinner=null;this._startTime=0},_initializeSizing:function(){this._centerX=this.size/2;this._centerY=this.size/2;this._width=this.size/6;this._radius=(this.size-this._width)/2;this._circumference=2*Math.PI*this._radius;this._rotationalOffset=0.25*this._circumference},_createSpinner:function(){this._spinner=document.createElementNS(this._SVG_NAMESPACE,"svg");this._spinner.setAttribute("height",this.size+"px");this._spinner.setAttribute("width",this.size+"px");var f=this._createCircle();f.setAttribute("class",
"donutGutter");this._spinner.appendChild(f);this._animatedElement=this._createCircle();this._animatedElement.setAttribute("class","donutProgress");this._spinner.appendChild(this._animatedElement)},_createCircle:function(){var f=document.createElementNS(this._SVG_NAMESPACE,"circle");f.setAttribute("r",this._radius);f.setAttribute("cx",this._centerX);f.setAttribute("cy",this._centerY);f.setAttribute("style","stroke-width: "+this._width+"px;");return f},_processFrame:function(){var f=this._getCurrentPercent(this._startTime,
this.animationLength);this._renderPercentage(f)},_renderPercentage:function(f){var e=this._getHeadPercent(f),d=this._getTailPercent(f);f=this._getStrokeLength(e,d,this._circumference);e=this._getStrokeGap(e,d,this._circumference);d=this._getStrokeStart(d,this._circumference);this._animatedElement.style["stroke-dasharray"]=f+", "+e;this._animatedElement.style["stroke-dashoffset"]=this._rotationalOffset-d},_getCurrentPercent:function(f,e){return((new Date).getTime()-f)%e/e},_getHeadPercent:function(f){var e=
1+Math.pow(f/702664100,0.2632525);return 0.75>=f?228.9139+-228.91373830770002/e:1},_getTailPercent:function(f){var e=1+Math.pow(f/0.6602402,7.174857);return 0.25<=f?1.050912+-1.0519016562/e:0},_getStrokeLength:function(f,e,d){return(f-e)*d},_getStrokeGap:function(f,e,d){return(1-(f-e))*d},_getStrokeStart:function(f,e){return f*e}})})},"MW/rtc/plugins/embeddedoutputs/view/RightPanel":function(){define("dojo/_base/declare dojo/_base/fx dojo/dom-construct dojo/dom-style dojo/on dijit/layout/ContentPane mw-log/Log ./SplitterMixin".split(" "),
function(h,f,g,e,d,c,b,a){return h(null,{_PLACEMENT_CONFIG:{hasSplitter:!0,isResizable:!0,isProportional:!0,isCollapsible:!1,region:"right",minSize:10,proportion:null},constructor:function(a,b,d){this._aspectHandles=[];this._hidden=!1;this._outputScrollPane=g.create("div",{className:"outputScrollPane mwDoNotApplyCustomScrollbarCSS"});this._setDataTestId(this._outputScrollPane,"rtc_outputScrollPane");this._parentBorderContainer=a;this._splitterPositionModel=d;this._splitterPositionController=b;this._contentPanel=
new c({className:"outputsOnRight",content:this._outputScrollPane});this._initializeAndSetupBorderContainer()},_initializeAndSetupBorderContainer:function(){a.setup(this._parentBorderContainer);b.assert(this._parentBorderContainer,"BorderContainer should have been constructed");b.assert(!this._parentBorderContainer.getChildInRegion(this._PLACEMENT_CONFIG.region),"There should have been no child placed here");this._parentBorderContainer.getChildInRegion(this._PLACEMENT_CONFIG.region)||(this._parentBorderContainer.installConnections(),
this._parentBorderContainer.hoverOverSplitter(this._PLACEMENT_CONFIG.region),this._splitterPositionController.addContentPanel(this._PLACEMENT_CONFIG,this._contentPanel))},getScrollPane:function(){return this._outputScrollPane},getContentPane:function(){return this._contentPanel.domNode},canScroll:function(){return this._outputScrollPane.scrollHeight>this._outputScrollPane.clientHeight},replaceContent:function(a){g.place(a,this._outputScrollPane,"only");this.contentChanged()},contentChanged:function(){},
onShow:function(){},onHide:function(){},show:function(a){var b=this._splitterPositionModel.getRightPanelProportion();if(a)return e.set(this.getContentPane(),"opacity","0"),b=this._parentBorderContainer.getDerivedRightProportion(),this._parentBorderContainer.addWithProperties(this._contentPanel,this._PLACEMENT_CONFIG),this._parentBorderContainer.setProportion("right",b),this.onShow(),f.fadeIn({node:this.getContentPane()}).play();e.set(this.getContentPane(),"opacity","1");b=this._parentBorderContainer.getDerivedRightProportion();
this._parentBorderContainer.addWithProperties(this._contentPanel,this._PLACEMENT_CONFIG);this._parentBorderContainer.setProportion("right",b);this.onShow();return[]},hide:function(a){if(a){var b=this;this._fadeAnim=f.fadeOut({node:this.getContentPane()}).play();d(this._fadeAnim,"End",function(){g.empty(b._outputScrollPane)});this._parentBorderContainer.removeChild(this._contentPanel);this.onHide();return this._fadeAnim}e.set(this.getContentPane(),"opacity","0");g.empty(this._outputScrollPane);this._parentBorderContainer.removeChild(this._contentPanel);
this.onHide();return[]},destroy:function(){b.assert(this._parentBorderContainer,"BorderContainer should have been constructed");this._parentBorderContainer.uninstallConnections();this._contentPanel&&this._contentPanel.content.parentElement&&this._parentBorderContainer.removeChild(this._contentPanel);g.destroy(this._outputScrollPane);this._contentPanel=null;this._aspectHandles.forEach(function(a){a.remove()})},_setDataTestId:function(a,b){a.setAttribute("data-testid",b)}})})},"MW/rtc/plugins/embeddedoutputs/view/SplitterMixin":function(){define(["dojo/_base/lang",
"dojo/aspect","dojo/dom-class","dojo/dom-style","dojo/mouse"],function(h,f,g,e,d){return{_MIN_RIGHT_WIDTH:50,installConnections:function(){this._aspectHandles.push(f.after(this,"_setupChild",h.hitch(this,this._setupSplitterLayout)));this._aspectHandles.push(f.before(this,"_beginSplitterDrag",h.hitch(this,this._makeSplitterVisible)));this._aspectHandles.push(f.before(this,"_endSplitterDrag",h.hitch(this,this._updateAfterSplitterDrag)));this._aspectHandles.push(f.after(this,"setFreeDimension",h.hitch(this,
this.setDims)));this._aspectHandles.push(f.after(this,"addChild",h.hitch(this,this._updateAfterChildAdded),!0))},_updateAfterChildAdded:function(c){c=c.region;this._initializedRegions[c]||(this._updateMaxWidthAndCache(),this._initializedRegions[c]=!0)},uninstallConnections:function(){this._aspectHandles.forEach(function(c){c.remove()})},setup:function(c){this._aspectHandles=[];this._maxCenterWidth=null;this._initializedRegions={};h.mixin(c,this);g.add(c.domNode,"borderContainerWithSplitter")},hoverOverSplitter:function(c){this._splitterToMakeInvisible=
c},_setupSplitterLayout:function(){this.splitter=this._borderInfo[this._splitterToMakeInvisible]},_makeSplitterVisible:function(c,b){(d.isLeft(b)||d.isRight(b))&&g.add(this.splitter.splitterNode,"visibleSplitter")},_updateAfterSplitterDrag:function(){this._makeSplitterInvisible();this._updateMaxWidthAndCache()},_makeSplitterInvisible:function(){g.remove(this.splitter.splitterNode,"visibleSplitter")},cache:function(){var c=this.getChildInRegion("center"),b=this.getChildInRegion("right");c&&b&&(this._centerWidth=
e.get(c.domNode,"width"),this._rightWidth=e.get(b.domNode,"width"))},setDims:function(){if(!this._centerWidth||!this._rightWidth)return this.cache(),null;var c=this.getChildInRegion("center"),b=this.getChildInRegion("right");if(!c||!b)return null;c=e.get(c.domNode,"width");b=e.get(b.domNode,"width");b=c+b;c=this._centerWidth+this._rightWidth-b;if(0===c)return null;0<c?c=Math.max(this._MIN_RIGHT_WIDTH,this._rightWidth-c):(c=Math.min(this._maxCenterWidth,this._centerWidth+-1*c),c=b-c);var a=e.get(this.domNode,
"width");this.setProportion("right",c/a);this.cache();return{center:b-c,right:c}},_updateMaxWidthAndCache:function(){var c=this.getChildInRegion("center");c&&(this._maxCenterWidth=e.get(c.domNode,"width"),this.cache())},getDerivedRightProportion:function(){var c=this.getChildInRegion("left"),b=c?e.get(c.domNode,"width"):0,c=e.get(this.domNode,"width"),b=c-(b+this._centerWidth);b<this._MIN_RIGHT_WIDTH&&(b=this._MIN_RIGHT_WIDTH);return b/c}}})},"MW/rtc/plugins/embeddedoutputs/view/ViewToggler":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/aspect dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr dijit/Tooltip dojo/i18n!l10n/nls/actions mw-form/ToggleButton MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum MW/rtc/plugins/view/tooltip/TooltipUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h(null,{_INLINE_TOOLTIP_MESSAGE:'\x3cdiv data-testid\x3d"inlineTooltip"\x3e'+l.showInline+"\x3c/div\x3e",_ONRIGHT_TOOLTIP_MESSAGE:'\x3cdiv data-testid\x3d"onRightTooltip"\x3e'+l.showOnRight+"\x3c/div\x3e",_TOGGLE_PANEL:"toggleButtonPanel",_TOGGLE_PANEL_PRIORITY:1,_ONRIGHT_DATATEST_ID:"outputsOnRightButton",_INLINE_DATATEST_ID:"outputsInlineButton",_BUTTON_GROUP:"embeddedOutputsViewToggleGroup",constructor:function(a,b,c,d){this._rightmargincontainer=a;this._actionDataService=
b;this._editorId=c;this._isOnRight=this._checkOnRight(d);this._aspectHandles=[];this._aspectHandles.push(e.after(this._actionDataService,"onActionChange",f.hitch(this,"_handleActionChange"),!0));this._setupButtons()},_checkOnRight:function(a){return!a?!0:a===q.ON_RIGHT_VIEW_STATE},_handleActionChange:function(a){"rtc_on_right_view"===a.id&&"selected"===a.key&&a.newValue?this._highlightOnRight():"rtc_inline_view"===a.id&&("selected"===a.key&&a.newValue)&&this._highlightInline()},_setupButtons:function(){this._addButtonPanel();
this._aspectHandles.push(this._outputsOnRightButton.on("change",f.hitch(this,"_toggleToOnRight")));this._aspectHandles.push(this._outputsInlineButton.on("change",f.hitch(this,"_toggleToInline")))},_addButtonPanel:function(){this._createButtonPanel();this._setupTooltips();this._initializeButtonPanelPosition()},_createButtonPanel:function(){var b=d.create("div",{className:this._TOGGLE_PANEL});this._outputsOnRightButton=this._createButton("onright",this._isOnRight);this._outputsInlineButton=this._createButton("inline",
!this._isOnRight);a.set(this._outputsInlineButton.domNode,"data-testid",this._INLINE_DATATEST_ID);a.set(this._outputsOnRightButton.domNode,"data-testid",this._ONRIGHT_DATATEST_ID);this._outputsOnRightButton.placeAt(b);this._outputsInlineButton.placeAt(b);this._outputsOnRightButton.startup();this._outputsInlineButton.startup();this._buttonPanel=b},_createButton:function(a,b){return new m({icon:"toggleButton "+a,checked:b,buttonGroup:this._BUTTON_GROUP+this._editorId})},_initializeButtonPanelPosition:function(){this._rightmargincontainer.addLayer(this._buttonPanel,
this._TOGGLE_PANEL_PRIORITY)},_setupTooltips:function(){this._inlineTooltip=new k({connectId:this._outputsInlineButton,label:n.createUnfocusableTooltipTextHTML(this._INLINE_TOOLTIP_MESSAGE),position:["below-centered"]});this._onRightTooltip=new k({connectId:this._outputsOnRightButton,label:n.createUnfocusableTooltipTextHTML(this._ONRIGHT_TOOLTIP_MESSAGE),position:["below-centered"]})},_toggleToInline:function(a){this._isOnRight&&this._actionDataService.updateAction("rtc_inline_view",{selected:a.mwEventData.newValue})},
_toggleToOnRight:function(a){this._isOnRight||this._actionDataService.updateAction("rtc_on_right_view",{selected:a.mwEventData.newValue})},_highlightOnRight:function(){this._isOnRight=!0;this._outputsOnRightButton.set("checked",!0);this._onRightTooltip.close();this._inlineTooltip.close()},_highlightInline:function(){this._isOnRight=!1;this._outputsInlineButton.set("checked",!0);this._onRightTooltip.close();this._inlineTooltip.close()},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});
d.destroy(this._outputsInlineButton);d.destroy(this._outputsOnRightButton);d.destroy(this._buttonPanel);this._inlineTooltip.destroy();this._onRightTooltip.destroy()}})})},"mw-form/ToggleButton":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/VerticalAlignmentMixin mw-mixins/event/ChangeEventMixin mw-mixins/IconAndTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/ToggleButton.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D){return h(A.validate([g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B]),{baseClass:"mwWidget mwToggleButton",templateString:D,postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"keydown",this._handleKeydown.bind(this)),f(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){switch(a.keyCode){case 13:this.get("disabled")||a.target.click();break;case 32:a.preventDefault()}},_handleKeyup:function(a){switch(a.keyCode){case 32:this.get("disabled")||
a.target.click()}}})})},"mw-mixins/property/CheckedMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","mw-mixins/event/ChangeEventMixin"],function(h,f,g,e){h=h(null,{checked:!1,checkableNode:null,postCreate:function(){this.get("checkableNode")||this.set("checkableNode",this.domNode);this.inherited(arguments);this.domNode.classList.add("mwCheckedMixin");this.own(g(this.get("checkableNode"),"click",f.hitch(this,"_onClick")))},_setCheckedAttr:function(d){this._set("checked",d);
this._setAriaPressed();this._setAriaChecked();this.baseClass.split(" ").forEach(function(c){d?this.domNode.classList.add(c+"Checked"):this.domNode.classList.remove(c+"Checked")},this)},_setCheckableNodeAttr:function(d){this.checkableNode=d||this.domNode},_setAriaPressed:function(){var d=this.focusNode?this.focusNode:this.domNode;d.hasAttribute("aria-pressed")&&d.setAttribute("aria-pressed",this.get("checked"))},_setAriaChecked:function(){var d=this.focusNode?this.focusNode:this.domNode;d.hasAttribute("aria-checked")&&
d.setAttribute("aria-checked",this.get("checked"))},_onClick:function(){var d=this.get("checked"),c=!this.get("checked");this.set("checked",c,!0);this._triggerChangeEvent("checked",d,c)}});h._dependencies=[{mixin:e,orderDependent:!1}];return h})},"mw-mixins/event/ChangeEventMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{_triggerChangeEvent:function(f,e,d){this.emit("change",{mwEventData:{propertyName:f,oldValue:e,newValue:d}})},_qeTypeOverWithEnter:function(f){var e=
this.get("value");this.set("value",f);this._triggerChangeEvent("value",e,f)},postCreate:function(){this.inherited(arguments);this.own(this.on("change",f.hitch(this,function(f){f.preventDefault();f.mwEventData||(f.stopPropagation(),this._triggerChangeEvent("checked",!this.get("checked"),this.get("checked")))})))}})})},"mw-mixins/property/ButtonGroupMixin":function(){define(["dojo/_base/declare","dojo/query","dijit/registry","mw-mixins/property/CheckedMixin","mw-mixins/event/ChangeEventMixin"],function(h,
f,g,e,d){h=h(null,{buttonGroup:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwButtonGroupMixin")},_setButtonGroupAttr:function(c){if("string"!==typeof c)throw Error("'buttonGroup' property expects a literal string!");0<c.length?this.domNode.setAttribute("data-mw-buttongroup",c):this.domNode.removeAttribute("data-mw-buttongroup");this._set("buttonGroup",c)},_setCheckedAttr:function(c,b){this.inherited(arguments);c&&this.get("buttonGroup")&&g.toArray().forEach(function(a){this._shouldUncheckWidget(a)&&
(a.set("checked",!1),b&&a._triggerChangeEvent("checked",!0,!1))},this)},_shouldUncheckWidget:function(c){return c.get("buttonGroup")===this.get("buttonGroup")&&c!==this&&c.get("checked")},_onClick:function(c){if(this.get("checked")&&this.get("buttonGroup"))return c.stopPropagation(),c.preventDefault(),!1;this.inherited(arguments)}});h._dependencies=[{mixin:e,orderDependent:!0},{mixin:d,orderDependent:!1}];return h})},"mw-mixins/property/HorizontalAlignmentMixin":function(){define(["dojo/_base/declare"],
function(h){var f=["left","center","right"],g={};Object.keys(f).forEach(function(e){g[f[e]]="mwHorizontalAlignment"+(f[e].charAt(0).toUpperCase()+f[e].slice(1))});return h(null,{horizontalAlignment:"center",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwHorizontalAlignmentMixin")},_setHorizontalAlignmentAttr:function(e){if(-1===f.indexOf(e))throw Error("'Vertical alignment' property expects '' one of these values: "+f);this._applyHorizontalAlignmentClass(e);this._set("horizontalAlignment",
e)},_applyHorizontalAlignmentClass:function(e){var d;d=this.get("horizontalAlignment");(d=g[d])&&this.domNode.classList.remove(d);this.domNode.classList.add(g[e])}})})},"mw-mixins/property/VerticalAlignmentMixin":function(){define(["dojo/_base/declare","mw-mixins/property/SizeMixin"],function(h,f){var g=["top","middle","bottom"],e={};Object.keys(g).forEach(function(c){e[g[c]]="mwVerticalAlignment"+(g[c].charAt(0).toUpperCase()+g[c].slice(1))});var d=h(null,{verticalAlignment:"middle",postCreate:function(){this.inherited(arguments);
this.domNode.classList.add("mwVerticalAlignmentMixin")},_setVerticalAlignmentAttr:function(c){if(-1===g.indexOf(c))throw Error("'Vertical alignment' property expects '' one of these values: "+g[c]);this._applyVerticalAlignmentClass(c);this._set("verticalAlignment",c)},_applyVerticalAlignmentClass:function(c){var b;b=this.get("verticalAlignment");(b=e[b])&&this.domNode.classList.remove(b);this.domNode.classList.add(e[c])}});d._dependencies=[{mixin:f,orderDependent:!0}];return d})},"mw-mixins/IconAndTextSizingMixin":function(){define(["dojo/_base/declare",
"dojo/dom-style","mw-mixins/property/SizeMixin"],function(h,f,g){h=h(null,{_paddingAndBorder:6,_setSize:function(e,d){this.inherited(arguments);if(this._started){var c="";"auto"===d?this._setSpecialSizeOnAdditionalNodes(e,"none"):(c=this._getAdjustedSize(e,d,this.domNode),this._setSpecialSizeOnAdditionalNodes(e,parseInt(c)-this._paddingAndBorder+"px"));this.contentWrapperNode.style[e]="100%"}},_setSpecialSizeOnAdditionalNodes:function(e,d){"width"===e?this.iconAndTextContainerNode.style.maxWidth=
d:"height"===e&&(this.textNode.style.maxHeight=d)}});h._dependencies=[{mixin:g,orderDependent:!0}];return h})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum":function(){define([],function(){return{INLINE_VIEW_STATE:"document",ON_RIGHT_VIEW_STATE:"code"}})},"MW/rtc/plugins/embeddedoutputs/view/ScrollableOutputStyler":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/has dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/on dojo/query mw-gesture/GestureDetector mw-html-utils/HtmlUtils MW/rtc/events/MouseEventUtil MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){return h(null,{MARGIN_PADDING_BUFFER:30,_SCROLLBAR_THICKNESS:11,_MAX_SCROLLABLE_HEIGHT:250,constructor:function(a,b){this._viewModel=a;this._rtcDomNode=b;this._listeners=new Map},destroy:function(){},layout:function(a,b){this._styleScrollableOutputs(b);this._cleanUpScrollListeners()},scrollableStylesChanged:function(a){},_styleScrollableOutputs:function(a){var b=!1,c=this._viewModel.getOutputDivs(),b=this._styleTextOutputsIfRequired(c)||b;(b=this._styleOutputs(c)||
b)&&this.scrollableStylesChanged(a)},_styleOutputs:function(a){var b=[],b=a.map(function(a){if(a.firstElementChild&&a.firstElementChild.getStyler)return a.firstElementChild.getStyler().getStyleChange(a)});b.forEach(function(a){a&&a.output.firstElementChild.getStyler().applyStyleChange(a)});return 0<b.filter(function(a){return!!a}).length},_styleTextOutputsIfRequired:function(d){d=d.filter(function(a){return c.contains(a,s.CSS_TAG)||c.contains(a,u.CSS_TAG)||c.contains(a,p.CSS_TAG)||c.contains(a,t.CSS_TAG)||
c.contains(a,r.CSS_TAG)}).map(g.hitch(this,"_getTextStyleChange",b),this);d.forEach(g.hitch(this,"_makeTextStyleChange",c,a),this);d.forEach(g.hitch(this,"_makeScrollPositionChange"),this);return 0<d.filter(function(a){return!!a}).length},_getTextStyleChange:function(a,b){var c=a.getMarginBox(b).w-this.MARGIN_PADDING_BUFFER,d=parseFloat(b.getAttribute("data-width")),e=b.scrollHeight,f=parseFloat(b.getAttribute("data-height")),k=parseFloat(b.getAttribute("data-scroll-top"))||0,h=parseFloat(b.getAttribute("data-scroll-left"))||
0,l=Math.max(0,b.scrollHeight-b.clientHeight),m=Math.max(0,b.scrollWidth-b.clientWidth),k=Math.min(l,k),h=Math.min(m,h);return!this._hasWidthChanged(c,d)&&!this._hasHeightChanged(e,f)&&!this._hasScrollPositionChanged(b.scrollTop,k)&&!this._hasScrollPositionChanged(b.scrollLeft,h)?null:{output:b,availableWidth:c,isElementGrowable:this._isElementGrowable(b),isElementOverflown:g.hitch(this,"_isOutputOverflown",b),scrollHeight:b.scrollHeight,scrollTop:k,scrollLeft:h}},_makeTextStyleChange:function(a,
b,c){c&&(c.output.setAttribute("data-width",c.availableWidth),c.output.setAttribute("data-height",c.scrollHeight),c.output.style.maxHeight=(c.isElementGrowable?c.scrollHeight:this._MAX_SCROLLABLE_HEIGHT)+this._SCROLLBAR_THICKNESS+"px",c.isElementOverflown()?a.add(c.output,"scrollableOutput"):a.remove(c.output,"scrollableOutput"))},_makeScrollPositionChange:function(a){a&&(a.isElementOverflown()?(a.output.scrollTop=a.scrollTop,a.output.scrollLeft=a.scrollLeft,this._addListeners(a.output)):this._removeListenersForOutput(a.output))},
_isElementGrowable:function(a){return a.scrollHeight<2*this._MAX_SCROLLABLE_HEIGHT&&a.scrollHeight>this._MAX_SCROLLABLE_HEIGHT},_hasWidthChanged:function(a,b){return this._hasDimensionChanged(a,b)},_hasHeightChanged:function(a,b){return this._hasDimensionChanged(a,b)},_hasDimensionChanged:function(a,b){return a&&0!==a&&a!==b},_hasScrollPositionChanged:function(a,b){return b!==a},_addListeners:function(a){if(!this._listeners.has(a)){var b=k(a,n.MOUSEWHEEL,g.hitch(this,"_checkScroll",a)),c=k(a,"scroll",
g.hitch(this,"_handleScrollEvent",a)),d=new m(a);this._addGestureHandlerForDownEvent(d);this._listeners.set(a,{mouseWheelScrollListener:b,scrollListener:c,gestureDetector:d})}},_removeListenersForOutput:function(a){var b=this._listeners.get(a);b&&(this._removeListeners(b),this._listeners["delete"](a))},clearListeners:function(){this._listeners.forEach(this._removeListeners);this._listeners.clear()},_removeListeners:function(a){a.mouseWheelScrollListener.remove();a.scrollListener.remove();a.gestureDetector.remove()},
_checkScroll:function(a,b){var c=this._checkVerticalScroll(a,b),d=this._checkHorizontalScroll(a,b);(c||d)&&b.stopPropagation()},_handleScrollEvent:function(a,b){this._updateScrollTopAttribute(a);this._updateScrollLeftAttribute(a)},_updateScrollTopAttribute:function(a){a.setAttribute("data-scroll-top",a.scrollTop)},_updateScrollLeftAttribute:function(a){a.setAttribute("data-scroll-left",a.scrollLeft)},_cleanUpScrollListeners:function(){var a=[];this._listeners.forEach(function(b,c){d.isDescendant(c,
this._rtcDomNode)||a.push(c)},this);a.forEach(this._removeListenersForOutput,this)},_checkVerticalScroll:function(a,b){var c=!1,d=a.scrollTop,e=a.scrollHeight-a.clientHeight,f=n.getVerticalScrollDistance(b);0<f?c=0!==d:0>f&&(c=d!==e);return c},_checkHorizontalScroll:function(a,b){var c=!1,d=a.scrollLeft,e=a.scrollWidth-a.clientWidth,f=n.getHorizontalScrollDistance(b);0<f?c=0!==d:0>f&&(c=d!==e);return c},_addGestureHandlerForDownEvent:function(a){a.gestures.down.addGestureHandler({start:g.hitch(this,
function(a){n.isEventInScrollbarTrack(a)&&f.stop(a)})})},_isOutputOverflown:function(a){return 1<=a.scrollHeight-a.getBoundingClientRect().height||1<=a.scrollWidth-a.getBoundingClientRect().width}})})},"mw-gesture/GestureDetector":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/Deferred dojo/touch dojo/on ./GestureUtils ./domEvents/InputCapturer ./registry/GestureRegistry ./util/RemovableGroup".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h([l],{constructor:function(b,c){var d,
e,g,h=this;this.inputCapturer=new a(b);this.own(this.inputCapturer);this.events={};for(d in k.discrete.events)k.discrete.events.hasOwnProperty(d)&&(e=new k.discrete.events[d]({options:c?c:{}}),e.setInputCapturer(this.inputCapturer),e.enable(),this.own(e),this.events[d]=e);for(d in k.discrete.blockers)k.discrete.blockers.hasOwnProperty(d)&&k.discrete.blockers[d].forEach(function(a){h.events[d].prevents(h.events[a])});var l=function(a,b){a.addGestureHandler({start:f.hitch(b,function(b){this._setGesture(a)})})};
this.gestures={};for(g in k.continuous.gestures)k.continuous.gestures.hasOwnProperty(g)&&(e=new k.continuous.gestures[g]({options:c?c:{}}),e.setInputCapturer(this.inputCapturer),e.enable(),this.own(e),this.gestures[g]=e,l(e,this));for(g in k.continuous.blockers)k.continuous.blockers.hasOwnProperty(g)&&k.continuous.blockers[g].forEach(function(a){h.gestures[g].prevents(h.gestures[a])})},_setGesture:function(a){var b=this;this._clearGesture();this._currentGesture=a;a._currentDeferred.promise.always(function(){b._currentGesture=
null})},_clearGesture:function(){this._currentGesture&&this._currentGesture.reset();this._currentGesture=null},remove:function(){this.inherited(arguments);this._clearGesture()},resetAllGestureEvents:function(){for(var a in this.events)this.events.hasOwnProperty(a)&&this.events[a].reset();for(a in this.gestures)this.gestures.hasOwnProperty(a)&&this.gestures[a].reset()},setOptions:function(a){for(var b in this.events)this.events.hasOwnProperty(b)&&this.events[b].setOptions(a);for(b in this.gestures)this.gestures.hasOwnProperty(b)&&
this.gestures[b].setOptions(a)}})})},"mw-gesture/GestureUtils":function(){define(["dojo/mouse"],function(h){var f={touchstart:!0,mousedown:!0,pointerdown:!0,MSPointerDown:!0},g={touchmove:!0,mousemove:!0,dojotouchmove:!0,pointermove:!0,MSPointerMove:!0},e={touchend:!0,mouseup:!0,dojotouchend:!0,pointerup:!0,MSPointerUp:!0},d={touchcancel:!0,mouseout:!0,pointercancel:!0,MSPointerCancel:!0},c={dojotouchmove:!0,dojotouchend:!0},b={mousedown:!0,mousemove:!0,mouseup:!0},a={touchstart:!0,touchmove:!0,touchend:!0,
touchcancel:!0},k={pointerdown:!0,pointermove:!0,pointerup:!0,MSPointerDown:!0,MSPointerMove:!0,MSPointerUp:!0},l={isDownEvent:function(a){return!!f[a.type]},isMoveEvent:function(a){return!!g[a.type]},isUpEvent:function(a){return!!e[a.type]},isCancelEvent:function(a){return!!d[a.type]},isSyntheticEvent:function(a){return!!c[a.type]},isPointerEvent:function(a){return!!k[a.type]},isDragStartEvent:function(a){return"dragstart"===a.type},isEventSinglePrimaryPointer:function(a){var b=!0;a.touches&&1!==
a.touches.length&&(l.isSyntheticEvent(a)||(b=!1));l.isMouseEvent(a)&&!h.isLeft(a)&&(b=!1);l.isPointerEvent(a)&&(b=l.isUpEvent(a)?!0:1===a.buttons);return b},isEventSingleSecondaryPointer:function(a){var b=!1;l.isMouseEvent(a)&&h.isRight(a)&&(b=!0);l.isPointerEvent(a)&&(b=l.isUpEvent(a)?!0:2===a.buttons);return b},isMouseEvent:function(a){return b[a.type]?!0:!1},isTouchEvent:function(b){var c=a[b.type]?!0:!1;return c=c||b.hasOwnProperty("touches")},areEventsInSameLocation:function(a,b){return a.pageX===
b.pageX&&a.pageY===b.pageY&&a.layerX===b.layerX&&a.layerY===b.layerY},areEventsOfSameType:function(a,b){return a.type===b.type},areIdenticMouseEvents:function(a,b){return l.isMouseEvent(a)&&l.isMouseEvent(b)&&l.areEventsOfSameType(a,b)&&l.areEventsInSameLocation(a,b)},getTimeoutCheckFcn:function(a,b){return function(c){b||(b=300);return!a?!1:Math.abs(a._softTimestamp-c._softTimestamp)<=b}},getLocalCheckFcn:function(a,b){return function(c){var d;if(!a)return!1;b||(b=l.isTouchEvent(a)?20:1);d=c.pageX-
a.pageX;c=c.pageY-a.pageY;return Math.sqrt(d*d+c*c)<b}},conglomerateChecks:function(a){return function(b){var c=!0;a.forEach(function(a){c=c&&a(b)});return c}},matchDragStart:function(a){return l.matchOn(a,[l.isDragStartEvent])},matchCancel:function(a){return l.matchOn(a,[l.isCancelEvent])},matchDown:function(a){return l.matchOn(a,[l.isDownEvent,l.isEventSinglePrimaryPointer])},matchDownMove:function(a){a=l.matchOn(a,[l.isDownEvent,l.isEventSinglePrimaryPointer]);return a=l.matchMultipleOn(a,[l.isMoveEvent,
l.isEventSinglePrimaryPointer])},matchDownUp:function(a){a=l.matchOn(a,[l.isDownEvent,l.isEventSinglePrimaryPointer]);a=l.matchMultipleOn(a,[l.isMoveEvent,l.isEventSinglePrimaryPointer],!0);return a=l.matchOn(a,[l.isUpEvent,l.isEventSinglePrimaryPointer])},matchTap:function(a){var b,c;b=l.matchOn(a,[l.isDownEvent,l.isEventSinglePrimaryPointer]);c=l.matchMultipleOn(b,[l.isMoveEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent)],!0);return c=l.matchOn(c,[l.isUpEvent,l.isEventSinglePrimaryPointer,
l.getLocalCheckFcn(b.matchedEvent),l.getTimeoutCheckFcn(b.matchedEvent,a.options.tapTimeout)])},matchTapDown:function(a){var b,c;b=l.matchTap(a);c=l.matchMultipleOn(b,[l.isMoveEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent)],!0);return c=l.matchOn(c,[l.isDownEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent),l.getTimeoutCheckFcn(b.matchedEvent,a.options.tapTimeout)])},matchTapMove:function(a){a=l.matchTapDown(a);return a=l.matchMultipleOn(a,[l.isMoveEvent,
l.isEventSinglePrimaryPointer])},matchTapUp:function(a){a=l.matchTapDown(a);a=l.matchMultipleOn(a,[l.isMoveEvent,l.isEventSinglePrimaryPointer],!0);return a=l.matchOn(a,[l.isUpEvent,l.isEventSinglePrimaryPointer])},matchDoubleTap:function(a){var b,c;b=l.matchTap(a);c=l.matchMultipleOn(b,[l.isMoveEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent)],!0);b=l.matchOn(c,[l.isDownEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent),l.getTimeoutCheckFcn(b.matchedEvent,
a.options.tapTimeout)]);c=l.matchMultipleOn(b,[l.isMoveEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent)],!0);return c=l.matchOn(c,[l.isUpEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent),l.getTimeoutCheckFcn(b.matchedEvent,a.options.tapTimeout)])},matchDoubleTapDown:function(a){var b,c;b=l.matchDoubleTap(a);c=l.matchMultipleOn(b,[l.isMoveEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent)],!0);return c=l.matchOn(c,[l.isDownEvent,l.isEventSinglePrimaryPointer,
l.getLocalCheckFcn(b.matchedEvent),l.getTimeoutCheckFcn(b.matchedEvent,a.options.tapTimeout)])},matchDoubleTapMove:function(a){a=l.matchDoubleTapDown(a);return a=l.matchMultipleOn(a,[l.isMoveEvent,l.isEventSinglePrimaryPointer])},matchDoubleTapUp:function(a){a=l.matchDoubleTapDown(a);a=l.matchMultipleOn(a,[l.isMoveEvent,l.isEventSinglePrimaryPointer],!0);return a=l.matchOn(a,[l.isUpEvent,l.isEventSinglePrimaryPointer])},matchTripleTap:function(a){var b,c;b=l.matchDoubleTap(a);c=l.matchMultipleOn(b,
[l.isMoveEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent)],!0);b=l.matchOn(c,[l.isDownEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent),l.getTimeoutCheckFcn(b.matchedEvent,a.options.tapTimeout)]);c=l.matchMultipleOn(b,[l.isMoveEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent)],!0);return c=l.matchOn(c,[l.isUpEvent,l.isEventSinglePrimaryPointer,l.getLocalCheckFcn(b.matchedEvent),l.getTimeoutCheckFcn(b.matchedEvent,a.options.tapTimeout)])},
matchSecondaryDown:function(a){return l.matchOn(a,[l.isDownEvent,l.isEventSingleSecondaryPointer])},matchSecondaryDownMove:function(a){a=l.matchOn(a,[l.isDownEvent,l.isEventSingleSecondaryPointer]);return a=l.matchMultipleOn(a,[l.isMoveEvent,l.isEventSingleSecondaryPointer])},matchSecondaryDownUp:function(a){a=l.matchOn(a,[l.isDownEvent,l.isEventSingleSecondaryPointer]);a=l.matchMultipleOn(a,[l.isMoveEvent,l.isEventSingleSecondaryPointer],!0);return a=l.matchOn(a,[l.isUpEvent,l.isEventSingleSecondaryPointer])},
matchOn:function(a,b,c){return l.matchEvent(a,l.conglomerateChecks(b),c)},matchMultipleOn:function(a,b,c){return l.matchMultipleEvents(a,l.conglomerateChecks(b),c)},matchMultipleEvents:function(a,b,c){for(c=a=l.matchEvent(a,b,c);c.matchedEvent;)c=l.matchEvent(a,b,!0),c.matchedEvent&&(a=c);return a},matchEvent:function(a,b,c){var d,e,f,g,k,h;d=a.eventList;e=a.detectionList;f=a.eventOffset;k=a.hasFailed;h=a.options;g=null;if(k)return a;(a=d[f])?b(a)?(e[f]=!0,g=a,f++):c||(e[f]=!1,k=!0,f++):c||(k=!0);
return{eventList:d,detectionList:e,eventOffset:f,hasFailed:k,matchedEvent:g,options:h}},detectGesture:function(a,b,c){var d,e,f,g,k,h,l;e=!1;k=0;f=k<a.length;h=Array(a.length);for(c=c?c:{};f;){g=b({eventList:a,detectionList:h,eventOffset:k,hasFailed:!1,matchedEvent:null,options:c});l=[];for(d=k;d<g.detectionList.length;d++)if(g.detectionList[d])l.push(g.eventList[d]);else{l=[];break}f=g.eventOffset===g.eventList.length;d=0!==l.length;!g.hasFailed&&f?(e=!0,f=!1):f=f?g.hasFailed&&!d:!0;g=k<g.eventList.length-
1;if(f=f&&g){k++;for(d=0;d<h.length;d++)h[d]=null}}return{detected:e,potentialEventList:l}}};return l})},"mw-gesture/domEvents/InputCapturer":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on dojo/touch ./DomEventDetector ../GestureUtils ../util/RemovableGroup".split(" "),function(h,f,g,e,d,c,b,a){return h([g],{constructor:function(b){this._useSoftTimestamps=!0;this._prevEvent=null;this._nodeHandlers=new a;this._documentHandlers=new a;this._addNodeHandlers(b)},_addNodeHandlers:function(a){this._nodeHandlers.remove();
this._nodeHandlers.own(e(a,d.press,f.hitch(this,function(b){this._onDown(b,a)})))},_addTemporaryHandlers:function(a){var b=new c(a.ownerDocument,!0);this._documentHandlers.remove();this._documentHandlers.own(e(b,d.release,f.hitch(this,"_onUp")));this._documentHandlers.own(e(b,d.move,f.hitch(this,"_onMove")));this._documentHandlers.own(e(b,d.cancel,f.hitch(this,"_onCancel")));this._documentHandlers.own(e(a,"dragstart",f.hitch(this,"_onDragStart")));this._documentHandlers.own(e(b,"drag",f.hitch(this,
"_onDrag")));this._documentHandlers.own(e(b,"dragend",f.hitch(this,"_onDragEnd")))},_onDown:function(a,b){this._addTemporaryHandlers(b);this._preprocessInput(a)},_onUp:function(a){this._documentHandlers.remove();this._preprocessInput(a)},_onMove:function(a){this._preprocessInput(a)},_onDragStart:function(a){this._preprocessInput(a)},_onDrag:function(a){this._preprocessInput(a)},_onDragEnd:function(a){this._documentHandlers.remove();this._preprocessInput(a)},_onCancel:function(a){"mouseout"!==a.type&&
(this._documentHandlers.remove(),this._preprocessInput(a))},_preprocessInput:function(a){var c=this._prevEvent;if(!c||!b.areIdenticMouseEvents(a,c))a._softTimestamp=this._useSoftTimestamps?Date.now():a.timeStamp,this._prevEvent=a,this._broadcastInput(a)},remove:function(){this._nodeHandlers.remove();this._documentHandlers.remove()},_broadcastInput:function(a){this.emit("receiveInput",a);this.emit("checkBlockers",a);this.emit("broadcastEvents",a)}})})},"mw-gesture/domEvents/DomEventDetector":function(){define(["dojo/_base/declare"],
function(h){return h([],{constructor:function(f,g){this._node=f;this._useCapturePhase=!!g},on:function(f,g){var e=this;this._node.addEventListener(f,g,this._useCapturePhase);return{remove:function(){e._node.removeEventListener(f,g,e._useCapturePhase)}}}})})},"mw-gesture/util/RemovableGroup":function(){define(["dojo/_base/declare"],function(h){return h([],{constructor:function(){this._removables=[]},own:function(f){f&&f.remove&&this._removables.push(f)},remove:function(){this._removables&&this._removables.forEach(function(f){f.remove()});
this._removables=[]}})})},"mw-gesture/registry/GestureRegistry":function(){define(["dojo/_base/declare","../GestureUtils","../gestures/_impl/EventListDiscreteRecognizer","../gestures/_impl/DiscreteSequenceContinuousRecognizer"],function(h,f,g,e){f={events:{cancel:h([g],{_matchFcn:f.matchCancel,_resetOnMatch:!0}),down:h([g],{_matchFcn:f.matchDown,_resetOnMatch:!0}),downMove:h([g],{_matchFcn:f.matchDownMove,_resetOnMatch:!1}),downUp:h([g],{_matchFcn:f.matchDownUp,_resetOnMatch:!0}),tap:h([g],{_matchFcn:f.matchTap,
_resetOnMatch:!0}),tapDown:h([g],{_matchFcn:f.matchTapDown,_resetOnMatch:!0}),tapMove:h([g],{_matchFcn:f.matchTapMove,_resetOnMatch:!1}),tapUp:h([g],{_matchFcn:f.matchTapUp,_resetOnMatch:!0}),doubleTap:h([g],{_matchFcn:f.matchDoubleTap,_resetOnMatch:!0}),doubleTapDown:h([g],{_matchFcn:f.matchDoubleTapDown,_resetOnMatch:!0}),doubleTapMove:h([g],{_matchFcn:f.matchDoubleTapMove,_resetOnMatch:!1}),doubleTapUp:h([g],{_matchFcn:f.matchDoubleTapUp,_resetOnMatch:!0}),tripleTap:h([g],{_matchFcn:f.matchTripleTap,
_resetOnMatch:!0}),secondaryDown:h([g],{_matchFcn:f.matchSecondaryDown,_resetOnMatch:!0}),secondaryMove:h([g],{_matchFcn:f.matchSecondaryDownMove,_resetOnMatch:!1}),secondaryUp:h([g],{_matchFcn:f.matchSecondaryDownUp,_resetOnMatch:!0}),dragStart:h([g],{_matchFcn:f.matchDragStart,_resetOnMatch:!0})},blockers:{tripleTap:["doubleTap","tap"],doubleTap:["tap"],doubleTapDown:["tapDown","down"],tapDown:["down"],doubleTapMove:["tapMove","downMove"],tapMove:["downMove"],doubleTapUp:["tapUp","downUp","doubleTapMove",
"tapMove"],tapUp:["downUp","tapMove"]}};return{continuous:{gestures:{down:h([e],{_recognizerTypes:{start:f.events.down,progress:[f.events.downMove],end:[f.events.downUp],cancel:[f.events.cancel,f.events.dragStart]}}),tapDown:h([e],{_recognizerTypes:{start:f.events.tapDown,progress:[f.events.tapMove],end:[f.events.tapUp],cancel:[f.events.cancel,f.events.dragStart]}}),doubleTapDown:h([e],{_recognizerTypes:{start:f.events.doubleTapDown,progress:[f.events.doubleTapMove],end:[f.events.doubleTapUp],cancel:[f.events.cancel,
f.events.dragStart]}}),secondaryDown:h([e],{_recognizerTypes:{start:f.events.secondaryDown,progress:[f.events.secondaryMove],end:[f.events.secondaryUp],cancel:[f.events.cancel,f.events.dragStart]}})},blockers:{doubleTapDown:["tapDown","down"],tapDown:["down"]}},discrete:f}})},"mw-gesture/gestures/_impl/EventListDiscreteRecognizer":function(){define(["dojo/_base/declare","../../GestureUtils","../DiscreteGestureRecognizer"],function(h,f,g){return h([g],{constructor:function(e){this._eventList=[]},reset:function(){this.inherited(arguments);
this._resetEventList()},_resetEventList:function(){this._eventList=[]},receiveInput:function(e){0<this._eventList.length&&f.isMoveEvent(e)&&f.isMoveEvent(this._eventList[this._eventList.length-1])?this._eventList[this._eventList.length-1]=e:this._eventList.push(e);e=f.detectGesture(this._eventList,this._matchFcn,this._options);this._resetOnMatch&&e.detected?this._resetEventList():this._eventList=e.potentialEventList;e.detected&&this.setRecognizerState(this.RECOGNIZER_STATES.MATCHED)}})})},"mw-gesture/gestures/DiscreteGestureRecognizer":function(){define(["dojo/_base/declare",
"dojo/on","./GestureRecognizer","../util/RemovableGroup","mw-log/Log"],function(h,f,g,e,d){return h([g],{addEventHandler:function(c){c=f(this,"discreteGestureOccurred",c);this.own(c);return c},broadcastEvents:function(c){if(this.getRecognizerState()===this.RECOGNIZER_STATES.MATCHED){this.setRecognizerState(this.RECOGNIZER_STATES.ACTIVE);try{this.emit("discreteGestureOccurred",c)}catch(b){d.warn("Error executing discrete gesture callback. "+b.message),d.warn(b.stack)}this.setRecognizerState(this.RECOGNIZER_STATES.INACTIVE)}}})})},
"mw-gesture/gestures/GestureRecognizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on ../util/RemovableGroup mw-log/Log".split(" "),function(h,f,g,e,d,c){return h([g,d],{RECOGNIZER_STATES:{INACTIVE:"inactive",ACTIVE:"active",MATCHED:"matched"},constructor:function(b){this._recognizerState=this.RECOGNIZER_STATES.INACTIVE;this._options=b&&b.options?b.options:{};this._blockedRecognizers=[];this._inputHandlers=new d},setInputCapturer:function(b){this._inputHandlers.remove();
this._inputCapturer=b;this._enabled&&this._attachInputHandlers()},enable:function(){c.assert(this._inputCapturer,"Gesture recognizer must have an input capturer to be enabled.");this._enabled||(this._enabled=!0,this._attachInputHandlers())},_attachInputHandlers:function(){this._inputHandlers.remove();this._inputHandlers.own(e(this._inputCapturer,"receiveInput",f.hitch(this,"receiveInput")));this._inputHandlers.own(e(this._inputCapturer,"checkBlockers",f.hitch(this,"_checkBlockers")));this._inputHandlers.own(e(this._inputCapturer,
"broadcastEvents",f.hitch(this,"broadcastEvents")))},disable:function(){this._enabled=!1;this._inputHandlers.remove();this.reset()},remove:function(){this.disable();this.inherited(arguments)},prevents:function(b){this._blockedRecognizers.push(b)},setOptions:function(b){this._options=b?b:{}},_checkBlockers:function(){var b=this;this._blockedRecognizers.forEach(function(a){b.getRecognizerState()!==b.RECOGNIZER_STATES.INACTIVE&&a.reset()})},setRecognizerState:function(b){b!==this._recognizerState&&(this._recognizerState=
b,this.onRecognizerStateChange())},getRecognizerState:function(){return this._recognizerState},reset:function(){this.setRecognizerState(this.RECOGNIZER_STATES.INACTIVE)},onRecognizerStateChange:function(){},receiveInput:function(b){},broadcastEvents:function(b){}})})},"mw-gesture/gestures/_impl/DiscreteSequenceContinuousRecognizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/Deferred dojo/aspect dojo/on ../ContinuousGestureRecognizer ../../util/RemovableGroup".split(" "),
function(h,f,g,e,d,c,b,a){return h([b],{_recognizerTypes:{start:{},progress:[],end:[],cancel:[]},constructor:function(b){var e=this;this._recognizerHandlers=new a;this.own(c(this,"always",function(){e.reset();e._recognizerHandlers.remove()}));this._recognizers={start:{},progress:[],end:[],cancel:[]};this._recognizers.start=new this._recognizerTypes.start(b);this._recognizerTypes.progress.forEach(function(a){e._recognizers.progress.push(new a(b))});this._recognizerTypes.end.forEach(function(a){e._recognizers.end.push(new a(b))});
this._recognizerTypes.cancel.forEach(function(a){e._recognizers.cancel.push(new a(b))});d.after(this._recognizers.start,"onRecognizerStateChange",function(){e._recognizers.start.getRecognizerState()===e.RECOGNIZER_STATES.MATCHED&&e.setRecognizerState(e.RECOGNIZER_STATES.MATCHED)});this.own(c(e._recognizers.start,"discreteGestureOccurred",function(a){e._addTemporaryHandlers(e._recognizers.progress,e._recognizers.end,e._recognizers.cancel);e.onStart(a)}))},setInputCapturer:function(a){this.inherited(arguments);
this._callGestureRecognizersFcn("setInputCapturer",a)},enable:function(){this.inherited(arguments);this._callGestureRecognizersFcn("enable")},disable:function(){this.inherited(arguments);this._callGestureRecognizersFcn("disable")},prevents:function(a){this.inherited(arguments);this._callGestureRecognizersFcn("prevents",a)},reset:function(){this.inherited(arguments);this._callGestureRecognizersFcn("reset")},setOptions:function(a){this.inherited(arguments);this._callGestureRecognizersFcn("setOptions",
a)},_callGestureRecognizersFcn:function(a,b){if(this._recognizers){var c=function(c){c[a].call(c,b)};c(this._recognizers.start);this._recognizers.progress.forEach(c);this._recognizers.end.forEach(c);this._recognizers.cancel.forEach(c)}},_addTemporaryHandlers:function(a,b,d){var e=this;a.forEach(function(a){e._recognizerHandlers.own(c(a,"discreteGestureOccurred",f.hitch(e,"onProgress")))});b.forEach(function(a){e._recognizerHandlers.own(c(a,"discreteGestureOccurred",f.hitch(e,"onEnd")))});d.forEach(function(a){e._recognizerHandlers.own(c(a,
"discreteGestureOccurred",f.hitch(e,"onCancel")))})}})})},"mw-gesture/gestures/ContinuousGestureRecognizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/Deferred dojo/on ./GestureRecognizer ../util/RemovableGroup".split(" "),function(h,f,g,e,d,c,b){return h([c],{constructor:function(a){this._temporaryHandlers=new b},onRecognizerStateChange:function(){switch(this.getRecognizerState()){case this.RECOGNIZER_STATES.ACTIVE:this._setCurrentDeferred(new e);break;case this.RECOGNIZER_STATES.MATCHED:this._clearDeferred();
break;case this.RECOGNIZER_STATES.INACTIVE:this._clearDeferred()}},_setCurrentDeferred:function(a){var b=this;this._clearDeferred();this._currentDeferred=a;this._currentDeferred.promise.always(function(){b.emit("always");b._temporaryHandlers.remove();b._currentDeferred=null})},getGestureActive:function(){return this.getRecognizerState()===this.RECOGNIZER_STATES.ACTIVE},_clearDeferred:function(){this._currentDeferred&&!this._currentDeferred.isFulfilled()&&this._currentDeferred.cancel()},addGestureHandler:function(a){a=
this._attachGestureHandler(a);this.own(a);return a},addTemporaryGestureHandler:function(a){a=this._attachGestureHandler(a);this._temporaryHandlers.own(a);return a},_attachGestureHandler:function(a){var c=new b;a&&(a.start&&c.own(d(this,"start",f.hitch(a,a.start))),a.progress&&c.own(d(this,"progress",f.hitch(a,a.progress))),a.end&&c.own(d(this,"end",f.hitch(a,a.end))),a.cancel&&c.own(d(this,"cancel",f.hitch(a,a.cancel))),a.always&&c.own(d(this,"always",f.hitch(a,a.always))));return c},onStart:function(a){this.setRecognizerState(this.RECOGNIZER_STATES.ACTIVE);
this.emit("start",a)},onProgress:function(a){this.getGestureActive()&&this.emit("progress",a)},onEnd:function(a){this.getGestureActive()&&(this.emit("end",a),this._currentDeferred.resolve(),this.setRecognizerState(this.RECOGNIZER_STATES.INACTIVE))},onCancel:function(a){this.getGestureActive()&&(this.emit("cancel",a),this._currentDeferred.cancel(),this.setRecognizerState(this.RECOGNIZER_STATES.INACTIVE))}})})},"MW/rtc/events/MouseEventUtil":function(){define(["dojo/_base/lang","dojo/has","dojo/on"],
function(h,f,g){return{MOUSEWHEEL:!f("mozilla")?"wheel":"DOMMouseScroll",_WHEEL_DELTA:120,_MOZ_PIXEL_DISTANCE:51,_IE_PIXEL_DISTANCE:45,_MAC_PIXEL_DISTANCE:40,_DEFAULT_PIXEL_DISTANCE:100,_WHEEL_MODE_LINE:-40,redirectMouseScroll:function(e,d){var c=h.hitch(this,function(b){d.setScrollTop(d.getScrollTop()-this.getVerticalScrollDistance(b));d.setScrollLeft(d.getScrollLeft()-this.getHorizontalScrollDistance(b))});g(e,this.MOUSEWHEEL,c)},getVerticalScrollDistance:function(e){if(!this.isVerticalScroll(e))return 0;
e=this._normalizeMouseEvent(e).vertical;return this._browserfyScrollDistance(e)},getHorizontalScrollDistance:function(e){if(!this.isHorizontalScroll(e))return 0;e=this._normalizeMouseEvent(e).horizontal;return this._browserfyScrollDistance(e)},isVerticalScroll:function(e){return 0!==this._normalizeMouseEvent(e).vertical},isHorizontalScroll:function(e){return 0!==this._normalizeMouseEvent(e).horizontal},_normalizeMouseEvent:function(e){var d={vertical:0,horizontal:0};if(f("mozilla"))d.vertical=e.axis===
e.VERTICAL_AXIS?e.detail:0,d.horizontal=e.axis===e.HORIZONTAL_AXIS?e.detail:0;else{var c=e.deltaY&&0!==e.deltaY,b=e.wheelDeltaY&&0!==e.wheelDeltaY,a=e.wheelDeltaX&&0!==e.wheelDeltaX,g=e.deltaX&&0!==e.deltaX||a,h=e.shiftKey;if(c||b)h?d.horizontal=b?e.wheelDeltaY:-e.deltaY:d.vertical=b?e.wheelDeltaY:-e.deltaY;g&&(h&&c?d.vertical=a?e.wheelDeltaX:-e.deltaX:d.horizontal=a?e.wheelDeltaX:d.horizontal||-e.deltaX)}return d},_browserfyScrollDistance:function(e){return(f("mozilla")?this._WHEEL_MODE_LINE*this._MOZ_PIXEL_DISTANCE:
f("trident")||f("ie")?this._IE_PIXEL_DISTANCE:f("safari")||f("mac")?this._MAC_PIXEL_DISTANCE:this._DEFAULT_PIXEL_DISTANCE)*e/this._WHEEL_DELTA},isEventInScrollbarTrack:function(e){var d=e.target.getBoundingClientRect(),c=e.clientY>d.top+e.target.clientHeight;return e.clientX>d.left+e.target.clientWidth||c}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"symbolic",CSS_TAG:"embeddedOutputsSymbolicElement"}})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"text",CSS_TAG:"embeddedOutputsTextElement"}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"warning",CSS_TAG:"embeddedOutputsWarningElement"}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"variableString",
CSS_TAG:"embeddedOutputsVariableStringElement"}})},"MW/rtc/plugins/embeddedoutputs/view/inline/InlineView":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/fx dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/dom-style mw-gesture/GestureDetector dojo/fx dojo/on MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/NodeUtilities MW/rtc/model/events/nodechange/NodeChangeEventTypes MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum MW/rtc/plugins/embeddedoutputs/view/ViewModelUtilities ./LineWithOutputLayouter".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v){return h(null,{_VIEW_STATE_NAME:t.INLINE_VIEW_STATE,constructor:function(a,b,f,g,k,h){this._view=f;this._view.registerLayouter(new v(this));this._viewModel=a;this._cursor=b;this._internalDocument=g;this._actionService=k;this._syntaxErrorHandler=h;this._enabled=!1;this._outputDivs={};this._animations=[];this._gestureDetector=null;this._deletedNodes=[];this._lineMap={};this._cacheDiv=c.create("div");this._aspectHandles=[];this._aspectHandles.push(d.after(this._internalDocument,
"onNodeChange",e.hitch(this,"_onNodeChange"),!0));this._aspectHandles.push(d.after(this._internalDocument,"onDocumentChanged",e.hitch(this,"_handleOnDocumentChanged"),!0));this._aspectHandles.push(d.after(this._internalDocument,"onDocumentReset",e.hitch(this,"_handleOnDocumentReset")))},getActions:function(){return[]},getState:function(){return this._VIEW_STATE_NAME},createOutputDivsFromOutputs:function(){var a=c.create("div",{className:"inlineElement eoOutputWrapper"});a.addEventListener("click",
e.hitch(this,function(a){this.onOutputClicked(a.target)}));return a},layout:function(a,b,c){this.isEnabled()&&(this._updateLineMap(),this._updateOutputs(b,c),a.startupOutputs(),this._view.onLayoutChange())},cacheOutput:function(a){c.place(a,this._cacheDiv)},_cacheOutputs:function(a){var b;for(b=0;b<a.length;b+=1)this.cacheOutput(a[b])},isEnabled:function(){return this._enabled},enable:function(){this._enableGestureHandling();this._enabled=!0},disable:function(){this._disableGestureHandling();this._removeOutputs();
this._enabled=!1},_enableGestureHandling:function(){this._gestureDetector||(this._gestureDetector=new k(this._internalDocument.root.box),this._addGestureHandlers(this._gestureDetector))},_disableGestureHandling:function(){this._gestureDetector&&(this._gestureDetector.remove(),this._gestureDetector=null)},_addGestureHandlers:function(a){a.gestures.secondaryDown.addGestureHandler({start:e.hitch(this,function(a){null!==this._viewModel.getOutputWrapperFromElement(a.target)&&f.stop(a)})})},_onNodeChange:function(a){var b;
if(a.type===s.MERGE_NODE&&(b=this.getOutputsForNode(a.node))&&0<b.length){this._cacheOutputs(b);var c=this.getOutputsForNode(a.newNode);c?(c=b.concat(c),this._outputDivs[a.newNode.uid]=c):this._outputDivs[a.newNode.uid]=b;this._outputDivs[a.node.uid]=null}if(a.type===s.SPLIT_NODE&&1===a.lineStartOrEnd&&(b=this.getOutputsForNode(a.node))&&0<b.length)this._outputDivs[a.newNode.uid]=b,this._outputDivs[a.node.uid]=null;a.type===s.DELETE_NODE&&(b=this.getOutputsForNode(a.node))&&0<b.length&&this._deletedNodes.push(a.node)},
_handleOnDocumentChanged:function(a){0<this._deletedNodes.length?(this._deletedNodes=[],this.layout(this._viewModel,!1)):p.hasEventType(a,n.FORMAT_CHANGE_EVENT)&&this.layout(this._viewModel,!1)},_handleOnDocumentReset:function(){this._enabled&&(this._disableGestureHandling(),this._enableGestureHandling())},_removeOutputs:function(){var a=q.getCodeLineNodes(this._internalDocument),b;for(b=0;b<a.length;b+=1){var c=a[b];this.getOutputsForNode(c).length&&this._clearOutput(c)}},_clearOutput:function(a){this._outputDivs[a.uid]=
null;this._view.layoutNode(a)},_updateLineMap:function(){this._lineMap={};this._viewModel.getRegions().forEach(function(a){var b=this._findLastLineNode(a.positions);b&&a.positions.forEach(function(a){a=a.getNode();this._lineMap[a.uid]=b},this)},this)},_updateOutputs:function(a,b){var c={};Object.keys(this._outputDivs).forEach(function(a){c[a]=this._outputDivs[a]},this);this._outputDivs=this._buildOutputMap();var d=q.getCodeLineNodes(this._internalDocument).filter(function(a){return b&&this._hasVisibleOutputs(a)||
this._areOutputsForLineDifferent(a,c,this._outputDivs)},this);d.forEach(function(a){this._view.layoutNode(a)},this);a&&this._fadeInOutputs(d)},_buildOutputMap:function(){var a={},b=0;this._viewModel.getOutputDivs().forEach(function(c){var d=this._findNodeToDisplayOutput(c);d&&(c.setAttribute("data-testid","output_"+b),b++,a[d.uid]||(a[d.uid]=[]),a[d.uid].push(c))},this);return a},_findNodeToDisplayOutput:function(a){var b,c=this._viewModel.getOutputFromOutputDiv(a);if(this._syntaxErrorHandler.isSyntaxError(c))return b=
c.codeLinePositions[c.codeLinePositions.length-1].getNode(),q.isCodeContainer(b,!0)?b:null;for(a=c.codeLinePositions.length-1;0<=a;a--)if(b=c.codeLinePositions[a].getNode(),b=this._lineMap[b.uid])return b;return null},_areOutputsForLineDifferent:function(a,b,c){a=a.uid;b=b[a]||[];var d=c[a]||[];return b.length!==d.length?!0:!b.every(function(a,b){return a===d[b]})},_hasVisibleOutputs:function(a){return 0<(this._outputDivs[a.uid]||[]).length},_fadeInOutputs:function(b){b=this._getOutputsToAnimateByLines(b);
b.forEach(function(b){a.set(b,"opacity","0")});b=b.map(function(a){return g.fadeIn({node:a})},this);l.combine(b).play()},_getOutputsToAnimateByLines:function(a){var b=[];a.forEach(function(a){a=this.getOutputsForNode(a);b=b.concat(this._getOutputsToAnimateByElements(a))},this);return b},_getOutputsToAnimateByElements:function(a){var b=this._getAnimationBuffer();return a.filter(function(a){return!this._view.isElementOutOfView(a,b)},this)},_getAnimationBuffer:function(){var a=this._view.getDomTargetPosition();
return{left:0,right:0,top:a.clientHeight/2,bottom:a.clientHeight/2}},_findLastLineNode:function(a){var b,c;for(b=a.length-1;0<=b;b--)if(c=a[b].getNode(),q.isCodeContainer(c,!0))return c;return null},getOutputsForNode:function(a){return!this.isEnabled()?[]:this._outputDivs[a.uid]||[]},onOutputClicked:function(a){},destroy:function(){this._removeOutputs(!1);this._view.onLayoutChange(this._cursor.position);this._disableGestureHandling();c.destroy(this._cacheDiv);this._aspectHandles.forEach(function(a){a.remove()})}})})},
"MW/rtc/plugins/embeddedoutputs/view/ViewModelUtilities":function(){define(["dojo/dom-class","MW/rtc/plugins/embeddedoutputs/model/RegionUtilities","MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties","MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputProperties"],function(h,f,g,e){return{filterErrorsAndWarnings:function(d){var c={clean:[],errors:[],warnings:[],errorsAndWarnings:[]};if(!d)return c;d.forEach(function(b){this.isErrorOutputDiv(b)?c.errors.push(b):
this.isWarningOutputDiv(b)?c.warnings.push(b):c.clean.push(b)},this);c.errorsAndWarnings=c.errors.concat(c.warnings);return c},isErrorOutputDiv:function(d){return h.contains(d,g.CSS_TAG)},isWarningOutputDiv:function(d){return h.contains(d,e.CSS_TAG)},getHeightOfNodes:function(d){if(0===d.length)return 0;var c=d[d.length-1];return c.offsetTop+c.offsetHeight-d[0].offsetTop},doNodeSetsIntersect:function(d,c){return 0<d.filter(function(b){return-1!=c.indexOf(b)}).length}}})},"MW/rtc/plugins/embeddedoutputs/model/RegionUtilities":function(){define([],
function(){return{regionStartNodesMatch:function(h,f){this.checkRegionIsValid(h);this.checkRegionIsValid(f);return!h.code.regionPositions.length||!f.code.regionPositions.length?!1:h.code.regionPositions[0].getNode()===f.code.regionPositions[0].getNode()},codeRegionsMatch:function(h,f){this.checkRegionIsValid(h);this.checkRegionIsValid(f);if(h.regionString!==f.regionString)return!1;var g=h.regionPositions,e=f.regionPositions;if(g.length!==e.length)return!1;var d;for(d=0;d<g.length;d+=1)if(g[d].getNode()!==
e[d].getNode())return!1;return!0},isPositionWithinRegionRange:function(h,f,g){this.checkRegionIsValid(f);this.checkRegionIsValid(g);this.checkPositionIsValid(h);g=g.code.regionPositions;g=g[g.length-1].line;h=h.line;return f.code.regionPositions[0].line<=h&&h<=g},checkRegionIsValid:function(h){this.assert(h,"No region");this.assert(h.code,"No code in region");this.assert(h.code.regionPositions,"No region positions")},checkPositionIsValid:function(h){this.assert(h.isValid(),"Region position is invalid")},
assert:function(h,f){if(!h)throw Error(f);}}})},"MW/rtc/plugins/embeddedoutputs/view/inline/LineWithOutputLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/view/layoutmanager/layouters/LineLayouter"],function(h,f,g,e,d){return h(d,{constructor:function(c){this._inlineView=c},getApplicableNodeClass:function(){return e},layout:function(c,b){var a=g.create("div",{"class":"inlineWrapper"}),d=b.box;d&&d.lastChild&&0<=d.parentElement.lastChild.className.indexOf("outputParagraph")&&
this._inlineView.cacheOutput(d.parentElement.lastChild);d=this.inherited(arguments);if(!d)return null;g.place(d,a,"last");if((d=this._inlineView.getOutputsForNode(b))&&0<d.length){var e=g.create("div",{"class":"outputParagraph"}),h;for(h=0;h<d.length;h+=1)g.place(d[h],e,"last");f.add(a,"outputs");g.place(e,a,"last")}return a}})})},"MW/rtc/plugins/view/layoutmanager/layouters/LineLayouter":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],
function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f},layout:function(e,d){var c="lineNode mwRichTextComponentLine";e.fixedSize&&(c+=" plainTextFixedSize");d.readOnly&&(c+=" readonly");d.cssClass&&(c+=" "+d.cssClass);return e.layoutInto(d,"div",{"class":c})}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/OnrightView":function(){define("dijit/Destroyable dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/aspect dojo/dom-construct dojo/dom-class dojo/mouse MW/rtc/plugins/embeddedoutputs/view/onright/AlignmentDisabler MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsViewStateEnum MW/rtc/plugins/embeddedoutputs/view/ViewModelUtilities ./AlignmentManager ./CurrentElementManager".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return f(h,{_VIEW_STATE_NAME:l.ON_RIGHT_VIEW_STATE,_MIN_THRESHOLD:5,_MAX_THRESHOLD:95,constructor:function(a,b,c,e,f,h,l,m,B,A,D){this._rtcView=a;this._viewModel=b;this._cursor=c;this._cursorView=e;this._parentBorderContainer=f;this._rightPanel=h;this._focusService=l;this._contextMenuGenerator=B;this._stateHandler=A;this._internalDocument=D;this._alignmentManager=new q(a,b,this._cursor,this._cursorView,this._rightPanel,m,this._internalDocument);this.own(this._alignmentManager);
this._alignmentDisabler=new k(this._stateHandler,this._alignmentManager);this.own(this._alignmentDisabler);this.own(d.after(this._alignmentManager,"onAlign",g.hitch(this,"onAlign")));this._rightClickedOutput=null;this.own(d.after(this._contextMenuGenerator,"onOpen",g.hitch(this,"_handleContextMenuOpen"),!0));this.own(d.after(this._contextMenuGenerator,"onClose",g.hitch(this,"_handleContextMenuClose")));this._rightPanel.getScrollPane().addEventListener("click",g.hitch(this,"_setFocus"));this._rightPanel.getScrollPane().addEventListener("mouseup",
g.hitch(this,"_handleMouseUp"));this._currentElementManager=new n(a,b,this._cursor,this._cursorView,m);this.own(this._currentElementManager)},_setFocus:function(){this._focusService.setFocus()},registerCurrentOutputService:function(a){this._currentElementManager.registerCurrentOutputService(a)},onAlign:function(){},enable:function(a){this._currentElementManager.enable();a=this._rightPanel.show(a);this._alignmentManager.enable();return a},disable:function(a){this._currentElementManager.disable();this._alignmentManager.disable();
return this._rightPanel.hide(a)},getActions:function(){return[]},getState:function(){return this._VIEW_STATE_NAME},createOutputDivsFromOutputs:function(a){var b=c.create("div",{className:"rightPaneElement eoOutputWrapper"});a=g.hitch(this,"_handleClick",a[a.length-1]);b.addEventListener("click",a);return b},_handleClick:function(b,c){!a.isRight(c)&&!(c.target&&"A"===c.target.tagName)&&(this._cursor.hasSelection()&&this._cursor.releaseAnchor(),this._alignmentManager.isEnabled()?(this._alignmentManager.disable(),
this._cursor.setPosition(b.getNode(),0,!1),this.onOutputClicked(c.target),this._scrollPositionToOutput(b,c.currentTarget)||this._alignmentManager.enable()):(this._cursor.setPosition(b.getNode(),0,!1),this.onOutputClicked(c.target)))},_handleMouseUp:function(b){a.isMiddle(b)&&this._focusService.setFocus()},onOutputClicked:function(a){},_scrollPositionToOutput:function(a,b){if(this._rtcView.isNodeInView(a.getNode()))return!1;this._clickAspect&&(this._clickAspect.remove(),this._clickAspect=null);this._clickAspect=
d.after(this._rtcView,"onScroll",g.hitch(this,function(){this._alignmentManager.enable();this._clickAspect.remove();this._clickAspect=null}));var c=Math.max(Math.min(this._getOutputsPercent(b),this._MAX_THRESHOLD),this._MIN_THRESHOLD);this._rtcView.scrollNodeToPercent(a.getNode(),c);return!0},_getOutputsPercent:function(a){var b=this._rightPanel.getScrollPane().getBoundingClientRect();return 100*(a.getBoundingClientRect().top/b.height)},_handleContextMenuOpen:function(a){if(a=this._viewModel.getOutputWrapperFromElement(a))this._rightClickedOutput=
a,b.add(a,"rightClicked")},_handleContextMenuClose:function(){this._rightClickedOutput&&(b.remove(this._rightClickedOutput,"rightClicked"),this._rightClickedOutput=null)},layout:function(a,b,d){var e=c.create("span",{className:"outputContentPane"});a.getOutputDivs().forEach(function(a,b){a.setAttribute("data-testid","output_"+b);c.place(a,e,"last")},this);this._rightPanel.replaceContent(e);a.startupOutputs();this._alignmentManager.layout()},align:function(a){a?this._alignmentManager.checkExtraWhiteSpace():
this._alignmentManager.layout()}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/AlignmentDisabler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/debug/DebugServicesFactory"],function(h,f,g,e){return h(null,{constructor:function(d,c){this._stateHandler=d;this._alignmentManager=c;this._debugServices=e.getInstance();this._aspectHandles=[];this._aspectHandles.push(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_handleStateChange"),!0));this._aspectHandles.push(g.after(this._debugServices,
"onDBStop",f.hitch(this,"_handleDBStop"),!0));this._aspectHandles.push(g.after(this._debugServices,"onDBCont",f.hitch(this,"_handleDBCont"),!0));this._isBeingDisabled=!1},destroy:function(){this._aspectHandles.forEach(function(d){d.remove()});this._aspectHandles=[]},_handleDBStop:function(){this._isBeingDisabled&&this._enableAlignment()},_handleDBCont:function(){this._isBeingDisabled&&this._disableAlignment()},_handleStateChange:function(d){d===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED?
this._handleEvaluationStarted():d===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE&&this._handleEvaluationCompleted()},_handleEvaluationStarted:function(){this._isBeingDisabled=!0;this._disableAlignment()},_disableAlignment:function(){this._alignmentManager.setEnablement({alignOnScroll:!1,autoScroll:!1})},_handleEvaluationCompleted:function(){this._isBeingDisabled=!1;this._enableAlignment()},_enableAlignment:function(){this._isBeingDisabled=!0;this._alignmentManager.setEnablement({alignOnScroll:!0,
autoScroll:!0});this._alignmentManager.isEnabled()&&this._alignmentManager.layout()}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/AlignmentManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/i18n!l10n/nls/actions dojo/on dojo/touch MW/rtc/events/MouseEventUtil MW/rtc/view/ViewEventUtilities mw-utils/Utils ./AlignmentUtils".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){return h(null,{_TOP_BOUND:0,_BOTTOM_BOUND:100,_ACTION_ID:"rtc_alignment_toggle",
constructor:function(d,e,h,l,m,q,v){this._rtcView=d;this._viewModel=e;this._cursor=h;this._cursorView=l;this._outputScrollPane=m.getScrollPane();this._aspectHandles=[];this._actionService=q;this._internalDocument=v;this._userEnabledState=this._allowed=!0;this._enablement={alignOnLayout:!0,alignOnViewChange:!0,alignOnScroll:!0,autoScroll:!0};this._bottomPad=this._topPad=null;this._initializePadding();this._lastAlignedPercentage=0;this._alignStack=[];this._scrollPercent=0;this._updateScrollData();this._resetEquation();
this._overScrollListener=b(this._rtcView.getDomtarget(),k.MOUSEWHEEL,f.hitch(this,"_scroll"),!0);this._lastCursorLine=-1;this._aspectHandles.push(g.after(this._cursorView,"onChange",f.hitch(this,"_updateOnLineChange")));this._aspectHandles.push(b(this._rtcView.getDomtarget(),a.release,f.hitch(this,"_updateOnMouseUp")));this._aspectHandles.push(g.after(this._rtcView,"onViewUpdated",f.hitch(this,"_updateOnViewChange"),!0));d=[{id:this._ACTION_ID,enabled:!0,text:c.disableAlignment,callback:f.hitch(this,
"_toggle")}];this._actionService.loadActions(d)},_updateScrollData:function(){var a=this._rtcView.getDomTargetPosition();this._scrollPercent=100*a.scrollTop/(a.scrollHeight-a.clientHeight)||0},_toggle:function(){this._userEnabledState=!this._userEnabledState;this._updateEnabledState()},_updateEnabledState:function(){var a;this._userEnabledState?(a=c.disableAlignment,this.layout()):(a=c.enableAlignment,q.removeAllAlignment(this._viewModel.getOutputDivs(),this._getAlignmentData()));this._actionService.updateAction(this._ACTION_ID,
{text:a})},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._actionService.removeAction(this._ACTION_ID);this._overScrollListener.remove();this._equation=this._overScrollListener=null;this._alignStack=[]},disable:function(){this._allowed=!1},enable:function(){this._allowed=!0},isEnabled:function(){return this._allowed&&this._userEnabledState},setEnablement:function(a){f.mixin(this._enablement,a)},_scroll:function(a){if(!this._dontAlign()&&this._enablement.alignOnScroll&&
k.isVerticalScroll(a)){var b=k.getVerticalScrollDistance(a),c=0!==this._alignStack.length,d=this._rtcView.getDomTargetPosition(),e=100===this._scrollPercent||d.clientHeight===d.scrollHeight,d=e&&0>b,f=0===this._scrollPercent&&0<b,g=0===this._scrollPercent&&0>b||e&&0<b,h=d||f;if(c||h)e=!0,c&&g&&!h?e=b=this._reverseOverscroll():b=this._overscroll(b,d,f),e&&(this._stopScrollEvent(a),this._scrollHorizontal(a)),b&&(this._lastAlignedPercentage=this._alignStack[this._alignStack.length-1],this.updateAlignment(this._rtcView.getPositionAtPercent(this._lastAlignedPercentage)))}},
_reverseOverscroll:function(){this._alignStack.pop();return 0!==this._alignStack.length},_overscroll:function(a,b,c){var d=this._rtcView.getDomTargetPosition();a=Math.min(Math.max(this._lastAlignedPercentage+-100*a/(d.scrollHeight-d.clientHeight),0),100);var e;if(b){e=this._getNextUnalignedBelow(this._lastAlignedPercentage);if(!e)return!1;e=Math.max(a,e)}if(c){e=this._getNextUnalignedAbove(this._lastAlignedPercentage);if(!e)return!1;e=Math.min(a,e)}if(this._alignStack[this._alignStack.length-1]===
e)return!1;0===this._alignStack.length&&this._alignStack.push(this._lastAlignedPercentage);this._alignStack.push(e);return!0},_stopScrollEvent:function(a){a.stopPropagation();a.preventDefault()},_scrollHorizontal:function(a){a=k.getHorizontalScrollDistance(a);0!==a&&this._rtcView.setScrollLeft(this._rtcView.getDomTargetPosition().scrollLeft-a)},_getNextUnalignedAbove:function(a){for(a=this._rtcView.getPositionAtPercent(a).getNode().rootContainer().previousSibling();a;){if(!this._nodeIsAligned(a))return this._rtcView.getNodePercentScrolled(a,
!0);a=a.previousSibling()}},_getNextUnalignedBelow:function(a){for(a=this._rtcView.getPositionAtPercent(a).getNode().rootContainer().nextSibling();a;){if(!this._nodeIsAligned(a))return this._rtcView.getNodePercentScrolled(a,!0);a=a.nextSibling()}},_nodeIsAligned:function(a){var b=this._viewModel.getOutputDivsForNode(a);if(0===b.length)return!0;var c=this._getAlignmentData().rtcDomTargetData.scrollTop;a={top:a.getTop()-c,bottom:a.getBottom()-c};return q.areOutputsAligned(a,b,this._outputScrollPane,
!0)},_resetEquation:function(){this._equation=q.generateLinearStepwiseFunction(this._scrollPercent,this._lastAlignedPercentage,this._rtcView.getDomTargetPosition());this._alignStack=[]},layout:function(){this._restorePadding();if(!this._dontAlign()&&this._enablement.alignOnLayout){var a=this._outputScrollPane.scrollTop;this.updateAlignment(this._rtcView.getPositionAtPercent(this._lastAlignedPercentage));this._enablement.autoScroll||(this._outputScrollPane.scrollTop=a)}},_updateOnLineChange:function(){var a=
this._cursor.getLineColumn().line;this._lastCursorLine!==a&&(this._lastCursorLine=a,!this._dontAlign()&&this._viewModel.doesNodeHaveOutputs(this._cursor.getNode().rootContainer())&&(this._updateScrollData(),this._lastAlignedPercentage=this._rtcView.getLinePercentScrolled(this._lastCursorLine,!0),this._resetEquation(),this.updateAlignment(this._cursor)))},_updateOnMouseUp:function(){this._dontAlign()||(this._lastCursorLine=this._cursor.getLineColumn().line,this._updateScrollData(),this._lastAlignedPercentage=
this._rtcView.getLinePercentScrolled(this._lastCursorLine,!0),this._resetEquation(),this.updateAlignment(this._cursor))},_updateOnViewChange:function(a){this._updateScrollData();if(!this._dontAlign()&&this._enablement.alignOnViewChange&&(!l.hasSizingEvent(a)||l.isOnlyScrollHeightChange(a)))if(!l.isOnlyHorizontalEvents(a)&&(l.hasVerticalScrollEvent(a)||l.hasHeightEvent(a)||l.hasLayoutEvent(a))){var b=null;l.hasVerticalScrollEvent(a)?(this._lastAlignedPercentage=this._equation(this._scrollPercent),
b=this._rtcView.getPositionAtPercent(this._lastAlignedPercentage)):(this._cursor.isInVisualBounds(this._TOP_BOUND,this._BOTTOM_BOUND)?(b=this._cursor,a=this._rtcView.getLinePercentScrolled(this._cursor.getLineColumn().line,!0)):(b=this._rtcView.getPositionAtPercent(this._lastAlignedPercentage),a=this._lastAlignedPercentage),this._lastAlignedPercentage=a,this._resetEquation());a=this._outputScrollPane.scrollTop;this.updateAlignment(b);this._enablement.autoScroll||(this._outputScrollPane.scrollTop=
a)}},_dontAlign:function(){return!this.isEnabled()||!this._viewModel.hasOutputs()},_initializePadding:function(){this._topPad=e.create("div",{className:"outputTopPad"});this._bottomPad=e.create("div",{className:"outputBottomPad"})},_restorePadding:function(){this._outputScrollPane.children[0]&&(e.place(this._topPad,this._outputScrollPane.children[0],"first"),e.place(this._bottomPad,this._outputScrollPane.children[0],"last"))},updateAlignment:function(a){a=a.getLineColumn().line-1;var b=this._getNodeWithOutputToAlign(a);
if(b){a=this._internalDocument.getLineNumber(b);var c=q.getOutputs(b,a,this._viewModel,this._outputScrollPane);c.outputsAbove=c.outputsAbove.reverse();q.clearMargins(c.comingledOutputs);q.clearInnerMargins(c.currentOutputs);var d=this._getAlignmentData(),e=d.rtcDomTargetData.scrollTop,b={top:b.getTop()-e,bottom:b.getBottom()-e};q.alignCurrentTarget(b,c,!1,d);this._updateAlignment(a,c);this.checkExtraWhiteSpace();this.onAlign()}},_getNodeWithOutputToAlign:function(a){var b=this._getOnscreenNodeWithOutput(a);
b||(b=this._viewModel.getClosestNodeWithOutputToLineNumber(a));return b},_getOnscreenNodeWithOutput:function(a){var b=this._rtcView.getFirstVisibleLineNumber()-1,c=this._rtcView.getLastVisibleLineNumber()-1;return this._viewModel.getClosestNodeWithOutputToLineNumber(a,b,c)},checkExtraWhiteSpace:function(){var a,b=this._outputScrollPane.scrollTop;a=b+this._outputScrollPane.clientHeight;var c=this._bottomPad.clientHeight,d=this._bottomPad.offsetTop+c;d>a&&(a=Math.max(0,c-(d-a)),this._setBottomPadHeight(a));
c=this._topPad.clientHeight;a=this._topPad.offsetTop;a<b&&(a=Math.max(0,c-(b-a)),c-=a,this._setTopPadHeight(a),this._outputScrollPane.scrollTop=b-c)},_setTopPadHeight:function(a){d.set(this._topPad,"height",a+"px")},_setBottomPadHeight:function(a){d.set(this._bottomPad,"height",a+"px")},onAlign:function(){},_updateAlignment:function(a,b){var c=this._outputScrollPane.scrollTop,d=this._getAlignmentsAboveAndBelowCurrent(a),e=d.alignmentsAbove,d=d.alignmentsBelow,f=b.currentOutputs.concat(b.comingledOutputs,
b.dontAlign),f=q.alignTargetsBelow(d,b.outputsBelow,f,this._getAlignmentData());q.alignTargetsAbove(e,b.outputsAbove,f,this._getAlignmentData());this._outputScrollPane.scrollTop=c},_getAlignmentsAboveAndBelowCurrent:function(a){var b=this._getAlignmentData().rtcDomTargetData.scrollTop,c=[],d=[];this._internalDocument.root.children.forEach(function(e,f){var g=this._viewModel.getOutputDivsForNode(e),k={target:{top:e.getTop()-b,bottom:e.getBottom()-b},associatedOutputs:g};0!==g.length&&(f<a?c.push(k):
f>a&&d.push(k))},this);return{alignmentsAbove:c,alignmentsBelow:d}},_getAlignmentData:function(){return{topPad:this._topPad,bottomPad:this._bottomPad,outputScrollPane:this._outputScrollPane,rtcDomTargetData:this._rtcView.getDomTargetPosition()}}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/AlignmentUtils":function(){define(["dojo/dom-class","dojo/dom-style","dojo/fx/easing","MW/rtc/plugins/embeddedoutputs/view/ViewModelUtilities","mw-utils/Utils"],function(h,f,g,e,d){return{getOutputs:function(c,
b,a,e){var f=a.getOutputDivsForNode(c),g=this._getViewableOutputs(e),h=f.map(function(a){return g.indexOf(a)}).sort(function(a,b){return a-b});e=g.slice(h[0],h[h.length-1]+1);c=e.filter(function(a){return 0>f.indexOf(a)});e=e.filter(function(a){return 0<=f.indexOf(a)});var n=g.slice(0,h[0]),h=g.slice(h[h.length-1]+1),n=this._removeOutputsBelongingToLineNumber(n,b,a,this._isOnlyAbove),h=this._removeOutputsBelongingToLineNumber(h,b,a,this._isOnlyBelow);b=e.concat(c,n,h);b=d.differenceOfArrays(g,b);
return{outputsAbove:n,outputsBelow:h,comingledOutputs:c,currentOutputs:e,dontAlign:b}},_removeOutputsBelongingToLineNumber:function(c,b,a,d){return c.filter(function(c){c=a.getLineNumbersForOutput(c);return d(c,b)},this)},_isOnlyAbove:function(c,b){c=c.sort(function(a,b){return a-b});return c[c.length-1]<b},_isOnlyBelow:function(c,b){c=c.sort(function(a,b){return a-b});return c[0]>b},_getViewableOutputs:function(c){c=c.children[0].children;c=[].slice.call(c);var b=h.contains(c[0],"outputTopPad"),
a=h.contains(c[c.length-1],"outputBottomPad");b&&(c=c.slice(1));a&&(c=c.slice(0,c.length-1));return c},clearMargins:function(c){c.forEach(function(b){b.style.removeProperty("margin-top");b.style.removeProperty("margin-bottom")})},clearInnerMargins:function(c){if(!(2>c.length)){c[0].style.removeProperty("margin-bottom");c[c.length-1].style.removeProperty("margin-top");for(var b=1;b<c.length-1;b+=1)c[b].style.removeProperty("margin-bottom"),c[b].style.removeProperty("margin-top")}},generateLinearStepwiseFunction:function(c,
b,a){a=100/(100*(a.clientHeight/a.scrollHeight)||0);var d=Math.min(b/c||0,a),e=b-d*c,f=Math.min((100-b)/(100-c)||0,a),g=b-f*c;return function(a){var h,r;if(a<c)h=d,r=e;else if(a>c)h=f,r=g;else return b;return Math.max(Math.min(h*a+r,100),0)}},areOutputsAligned:function(c,b,a,d){c=this._areOutputsAlignedToCode(c,b,a);b=d?this._areOutputsOnScreen(b,a):!0;return c&&b},removeAllAlignment:function(c,b){var a=b.bottomPad;b.topPad.style.height="0px";a.style.height="0px";c.forEach(function(a){a.style.removeProperty("margin-top");
a.style.removeProperty("margin-bottom")})},alignCurrentTarget:function(c,b,a,d){var e=d.outputScrollPane,g=d.rtcDomTargetData,h=d.topPad;d=d.bottomPad;var n=b.currentOutputs,p=b.outputsAbove;b=b.outputsBelow;this._moveMarginUp(n,p,h);this._moveMarginDown(n,b,d);if(this._needToAlign(c,n,e)){var r=e.scrollTop,s=c.bottom-c.top,t=this._getTopAndBottomOfDivList(n);if(t){var u=t.top,v=t.bottom,w=v-u;if(b.length)var x=b[b.length-1];v=Math.max(0,e.offsetHeight-(t.bottom-r)-((x?x.offsetTop+x.offsetHeight:
v)-v));d.style.height=v+"px";t=this._getTopAndBottomOfDivList(n);u=t.top;v=t.bottom;if(v-u>=e.offsetHeight)s=r-u,0!==s&&(0<s?s=this._moveOutputDown(s,n,p,b,e,h,d,!0,!1):0>s&&(s=Math.abs(s),s=this._moveOutputUp(s,n,p,b,e,h,d,!0,!1)),0<s&&this._setScrollTop(u,e,a));else{if(u<r&&(this._moveOutputDown(r-u,n,p,b,e,h,d,!0,!1),this._areOutputsAlignedToCode(c,n,e)))return;r+=e.offsetHeight;g=c.top>g.clientHeight;if(v>r&&!g&&(this._moveOutputUp(v-r,n,p,b,e,h,d,!0,!1),this._areOutputsAlignedToCode(c,n,e)))return;
t=this._getTopAndBottomOfDivList(n);u=t.top;v=t.bottom;w=v-u;r=e.scrollTop;g=c.top;u-=r;x=c.bottom;v-=r;g>u?(s=this._moveOutputDown(s>w?g-u:x-v,n,p,b,e,h,d,!1,!1),this._areOutputsAlignedToCode(c,n,e)||(c=r-s,c=0<c?c:0,this._setScrollTop(c,e,a),n=s-(r-c),0<n&&(p=f.get(h,"height"),h.style.height=n+p+"px"))):(s=Math.abs(s<w?g-u:x-v),s=this._moveOutputUp(s,n,p,b,e,h,d,!1,!1),this._areOutputsAlignedToCode(c,n,e)||(c=r+s,c!==r&&this._setScrollTop(c,e,a),r=e.scrollTop,n=c-r,0<n&&(p=f.get(d,"height"),d.style.height=
n+p+"px",this._setScrollTop(c,e,a))))}}}},alignTargetsBelow:function(c,b,a,d){for(var e,f,g=d.outputScrollPane,h=d.bottomPad,p=0;p<c.length;p++)if(e=c[p].target,d=c[p].associatedOutputs,f=d.length,b=b.slice(f,b.length),0===f){if(0===b.length)break}else a=this._alignTargetBelow(e,d,b,a,h,g);return a},alignTargetsAbove:function(c,b,a,d){for(var e,f,g=d.outputScrollPane,h=d.topPad,p=c.length-1;0<=p;p--)if(e=c[p].target,d=c[p].associatedOutputs,f=d.length,b=b.slice(f,b.length),0===f){if(0===b.length)break}else a=
this._alignTargetAbove(e,d,b,a,h,g)},_alignTargetBelow:function(c,b,a,g,h,m){this._moveMarginDown(b,a,h);if(b.some(function(a){return 0<=g.indexOf(a)})||this._areOutputsAlignedToCode(c,b,m))return g=g.concat(b);var q=e.getHeightOfNodes(b),n=c.top;c=c.bottom;var p=c-n;m=b[0].offsetTop-m.scrollTop;var r=m+q,s=r-m,q=f.get(b[0],"margin-top"),t;n>m?(t=0,t=p>s?n-m:c-r,b[0].style["margin-top"]=q+t+"px",g=g.concat(b),this._removeMarginFromBelow(t,a,b,h)):(t=0,c=Math.max(0,q-(p>s?r-c:m-n)),n=q-c,b[0].style["margin-top"]=
c+"px",(a=d.getFirstUniqueElement(b,a))?(h=f.get(a,"margin-top"),a.style["margin-top"]=h+n+"px"):(a=f.get(h,"height"),h.style.height=a+n+"px"),g=g.concat(b));return g},_alignTargetAbove:function(c,b,a,g,h,m){this._moveMarginUp(b,a,h);if(b.some(function(a){return 0<=g.indexOf(a)})||this._areOutputsAlignedToCode(c,b,m))return g=g.concat(b);var q=e.getHeightOfNodes(b),n=c.top;c=c.bottom;var p=c-n,r=b[0].offsetTop-m.scrollTop,s=r+q;m=f.get(b[0],"margin-bottom");var t;n>r?(t=0,n=Math.max(0,m-(p>q?n-r:
c-s)),q=m-n,b[0].style["margin-bottom"]=n+"px",(a=d.getFirstUniqueElement(b,a))?(h=f.get(a,"margin-bottom"),a.style["margin-bottom"]=h+q+"px"):(a=f.get(h,"height"),h.style.height=a+q+"px"),g=g.concat(b)):(t=0,t=Math.min(p>q?s-c:r-n,this._getAvailableSpaceAbove(a,b,h)),b[0].style["margin-bottom"]=m+t+"px",g=g.concat(b),this._removeMarginFromAbove(t,a,b,h));return g},_moveMarginUp:function(c,b,a){var e=f.get(c[0],"margin-top");0!==e&&(c[0].style.removeProperty("margin-top"),(c=d.getFirstUniqueElement(c,
b))?(a=f.get(c,"margin-bottom"),c.style["margin-bottom"]=a+e+"px"):(c=f.get(a,"height"),a.style.height=c+e+"px"))},_moveMarginDown:function(c,b,a){var e=f.get(c[c.length-1],"margin-bottom");0!==e&&(c[c.length-1].style.removeProperty("margin-bottom"),(c=d.getFirstUniqueElement(c,b))?(a=f.get(c,"margin-top"),c.style["margin-top"]=a+e+"px"):(c=f.get(a,"height"),a.style.height=c+e+"px"))},_moveOutputUp:function(c,b,a,e,g,h,q,n,p){n?this._setScrollTop(g.scrollTop+c,g,p):(e=d.getFirstUniqueElement(b,e))?
(q=f.get(e,"margin-top"),e.style["margin-top"]=q+c+"px"):(e=f.get(q,"height"),q.style.height=e+c+"px");return this._removeMarginFromAbove(c,a,b,h)},_moveOutputDown:function(c,b,a,e,g,h,q,n,p){if(n){h=this._getTopAndBottomOfDivList(b);if(!h)return;this._setScrollTop(h.top-5,g,p)}else(g=d.getFirstUniqueElement(b,a))?(h=f.get(g,"margin-bottom"),g.style["margin-bottom"]=h+c+"px"):(g=f.get(h,"height"),h.style.height=g+c+"px");return this._removeMarginFromBelow(c,e,b,q)},_removeMarginFromAbove:function(c,
b,a,d){return this._removeMarginFrom(c,b,a,d,"margin-bottom","margin-top")},_removeMarginFromBelow:function(c,b,a,d){return this._removeMarginFrom(c,b,a,d,"margin-top","margin-bottom")},_removeMarginFrom:function(c,b,a,d,e,g){for(var h=[],n=0;n<b.length;n++){if(0>=c)return this._setMargins(h,e,g),0;var p=b[n];if(!(0<=a.indexOf(p))){var r=f.get(p,e),s=Math.max(r-c,0);c-=r-s;var t=f.get(p,g),r=Math.max(t-c,0);c-=t-r;p={domNode:p};p[e]=s;p[g]=r;h.push(p)}}this._setMargins(h,e,g);if(0>=c)return 0;b=f.get(d,
"height");a=Math.max(b-c,0);d.style.height=a+"px";return c-(b-a)},_setMargins:function(c,b,a){c.forEach(function(c){c.domNode.style[b]=c[b]+"px";c.domNode.style[a]=c[a]+"px"},this)},_areOutputsAlignedToCode:function(c,b,a){b=this._getTopAndBottomOfDivList(b);if(!b)return!1;var d=a.scrollTop;a=b.top-d;b=b.bottom-d;d=a>=c.top&&b<=c.bottom;return c.top>=a&&c.bottom<=b||d},_getTopAndBottomOfDivList:function(c){return!c||0===c.length?null:{top:c[0].offsetTop,bottom:c[c.length-1].offsetTop+c[c.length-1].offsetHeight}},
_getAvailableSpaceAbove:function(c,b,a){var d=0;a&&(d+=f.get(a,"height"));c.forEach(function(a){-1===b.indexOf(a)&&(d+=f.get(a,"margin-top"),d+=f.get(a,"margin-bottom"))});return d},_needToAlign:function(c,b,a){return!(this._areOutputsAlignedToCode(c,b,a)&&this._areOutputsOnScreen(b,a))},_areOutputsOnScreen:function(c,b){var a=b.scrollTop,d=this._getTopAndBottomOfDivList(c);if(!d)return!1;var e=d.bottom<=a+b.offsetHeight;return d.top>=a&&e},_setScrollTop:function(c,b,a){a?this._animateScrollTop(c,
b):b.scrollTop=c},_animateScrollTop:function(c,b){(new dojo.Animation({curve:[b.scrollTop,c],onAnimate:function(a){b.scrollTop=a},duration:250,easing:g.quadInOut})).play()}}})},"MW/rtc/plugins/embeddedoutputs/view/onright/CurrentElementManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/aspect dojo/dom-class dojo/query mw-utils/Utils MW/rtc/model/CodeUtilities".split(" "),function(h,f,g,e,d,c,b,a){return h(null,{_LINE_CLASS:"selectedLine",_OUTPUT_CLASS:"selectedOutput",
_FOCUSED_CLASS:"focusedOutput",_OUTPUT_START_CLASS:"selectionStart",_OUTPUT_END_CLASS:"selectionEnd",_OOR_OUTPUT_SELECTOR:".outputsOnRight .selectedOutput",_OOR_FOCUSED_OUTPUT_SELECTOR:".outputsOnRight .focusedOutput",_OOR_ALL_OUTPUTS_SELECTOR:".outputsOnRight .rightPaneElement",_RTC_LINE_SELECTOR:".rtePane .selectedLine",_HIGHLIGHT_ON_HOVER_CLASS:"highlightOnHover",_ACTION_ID:"rtc_current_element_manager_hover_highlighting_toggle",constructor:function(a,b,c,d,e){this._rtcView=a;this._viewModel=b;
this._cursor=c;this._cursorView=d;this._actionService=e;this._currentOutputService=null;this._highlightCodeEnabled=this._highlightOnHoverEnabled=!1;this._currentCursorLineNode=null;this._currentOutputs=[];this._focusedOutput=null;this._isEnabled=!1;this._aspectHandles=[];this._currentOutputServiceHandle=null;this.enable()},registerCurrentOutputService:function(a){this._currentOutputService||(this._currentOutputService=a,this._currentOutputServiceHandle=e.after(this._currentOutputService,"onOutputSelected",
g.hitch(this,"_handleOnOutputSelected"),!0))},enable:function(){this._aspectHandles.push(e.after(this._viewModel,"onModelUpdated",g.hitch(this,"_handleOnModelUpdated")));this._aspectHandles.push(e.after(this._cursorView,"onChange",g.hitch(this,"_handleCursorChange")));this._aspectHandles.push(e.after(this._rtcView,"onVisitNode",g.hitch(this,"_updateCurrentElementOnNodeChange"),!0));this._updateCurrentElementFromCursorPosition();this._isEnabled=!0},disable:function(){this._aspectHandles.forEach(function(a){a.remove()});
this._clearAllStyles();this._currentOutputs=[];this._isEnabled=!1},_handleOnOutputSelected:function(a){this._isEnabled&&((a=a.focusedOutput)&&a.getDomElement().parentElement?this._focusOutput(a.getDomElement().parentElement):this._blurOutput())},_focusOutput:function(a){this._clearAllStyles();this._currentOutputs=[];this._focusedOutput=a;d.add(this._focusedOutput,this._FOCUSED_CLASS)},_blurOutput:function(){this._clearFocusStyles();this._focusedOutput=null;this._updateCurrentElementFromCursorPosition()},
_handleOnModelUpdated:function(){this._addSingleOutputHighlightingClass();this._updateCurrentElementFromCursorPosition()},_handleCursorChange:function(){var a=this._getCursorLineNode();a&&a!==this._currentCursorLineNode&&(this._currentCursorLineNode=a,this._updateCurrentItemSelection())},_updateCurrentElementOnNodeChange:function(a){var b=this._getCursorLineNode();b&&a.some(function(a){if((a=a.rootContainer())&&b.uid===a.uid)return this._currentCursorLineNode=b,!0},this)&&this._updateCurrentItemSelection()},
_updateCurrentElementFromCursorPosition:function(){var a=this._getCursorLineNode();a&&(this._currentCursorLineNode=a,this._updateCurrentItemSelection())},_getCursorLineNode:function(){return!this._cursor.position.isValid()?null:this._cursor.getNode().rootContainer()},destroy:function(){this.disable();this._currentOutputServiceHandle&&(this._currentOutputServiceHandle.remove(),this._currentOutputServiceHandle=null)},_updateCurrentItemSelection:function(){if(a.isCodeContainer(this._currentCursorLineNode)){this._clearCodeStyles();
var c=this._viewModel.getOutputDivsForNode(this._currentCursorLineNode),d=b.differenceOfArrays(this._currentOutputs,c);this._clearOutputStyles(d);if((this._currentOutputs=c)&&0!==c.length)this._setCurrentLineBackground(this._currentCursorLineNode.box),c.forEach(g.hitch(this,this._setCurrentOutputsBackground))}else this._clearAllStyles()},_setCurrentLineBackground:function(a){this._highlightCodeEnabled&&d.add(a,this._LINE_CLASS)},_setCurrentOutputsBackground:function(a,b,c){var e=c[b-1];b=c[b+1];d.toggle(a,
this._OUTPUT_START_CLASS,!e||e!==a.previousSibling);d.toggle(a,this._OUTPUT_END_CLASS,!b||b!==a.nextSibling);d.add(a,this._OUTPUT_CLASS)},_clearAllStyles:function(){this._clearCodeStyles();var a=c(this._OOR_OUTPUT_SELECTOR);a.removeClass(this._OUTPUT_CLASS);a.removeClass(this._OUTPUT_START_CLASS);a.removeClass(this._OUTPUT_END_CLASS);this._clearFocusStyles()},_clearOutputStyles:function(a){a.forEach(function(a){d.remove(a,[this._OUTPUT_CLASS,this._OUTPUT_START_CLASS,this._OUTPUT_END_CLASS])},this);
this._clearFocusStyles()},_clearFocusStyles:function(){this._focusedOutput&&d.remove(this._focusedOutput,this._FOCUSED_CLASS)},_clearCodeStyles:function(){this._highlightCodeEnabled&&c(this._RTC_LINE_SELECTOR).removeClass(this._LINE_CLASS)},_toggleHighlightOnHover:function(){this._highlightOnHoverEnabled?(this._highlightOnHoverEnabled=!1,c(this._OOR_ALL_OUTPUTS_SELECTOR).removeClass(this._HIGHLIGHT_ON_HOVER_CLASS)):(this._highlightOnHoverEnabled=!0,this._addSingleOutputHighlightingClass())},_addSingleOutputHighlightingClass:function(){this._highlightOnHoverEnabled&&
c(this._OOR_ALL_OUTPUTS_SELECTOR).addClass(this._HIGHLIGHT_ON_HOVER_CLASS)}})})},"MW/rtc/plugins/embeddedoutputs/view/onright/SplitterPositionController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred mw-log/Log ../../../../../layout/LayoutContainerEvent".split(" "),function(h,f,g,e,d,c){return h(null,{constructor:function(b,a,d){this._aspectHandles=[];this._splitterPositionModel=b;this._parentBorderContainer=a;this._isOnRightView=d;this._splitterDeferred=null;this._aspectHandles.push(g.after(this._splitterPositionModel,
"onLoaded",f.hitch(this,"_resolveSplitterDeferred")));this._evtListener=this._parentBorderContainer.on(c.SPLITTER_DRAG_ENDED,f.hitch(this,"_updateModel"))},addContentPanel:function(b,a){this._splitterDeferred=new e;if(this._splitterPositionModel.hasSplitterPosition()){var c=this._splitterPositionModel.getRightPanelProportion();this._splitterDeferred.resolve(c)}this._splitterDeferred.then(f.hitch(this,function(c){b.proportion=c;this._parentBorderContainer.addWithProperties(a,b)}),function(a){d.assert("The Deferred that gets the Splitter Position is cancelled: "+
a)})},_resolveSplitterDeferred:function(){if(this._isOnRightView()){var b=this._splitterPositionModel.getRightPanelProportion();this._splitterDeferred.resolve(b)}else this._splitterDeferred.cancel("opening a file with InLine view")},_updateModel:function(){var b=this._parentBorderContainer.getDerivedRightProportion();this._splitterPositionModel.setRightPanelProportion(b)},destroy:function(){this._aspectHandles.forEach(function(b){b.remove()});this._evtListener.remove()}})})},"MW/layout/LayoutContainerEvent":function(){define([],
function(){return{STATE_CHANGED:"state_changed",CHILD_ADDED:"child_added",CHILD_REMOVED:"child_removed",DRAG_OUT_INITIATED:"drag_out_initiated",DRAG_OUT:"drag_out",EXPAND_ALL:"expand",COLLAPSE_ALL:"collapse",SPLITTER_DRAG_STARTED:"splitterDragStarted",SPLITTER_DRAG_ENDED:"splitterDragEnded",CLOSE:"close"}})},"MW/rtc/plugins/embeddedoutputs/OutputQueue":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{_TIMEOUT_PERIOD:33,constructor:function(f){this._outputsHandler=
f;this._outputQueue=[];this._regionNumberQueue=[];this._queueTimeout=this._currentEvaluationRange=this._currentEvaluationId=null},destroy:function(){clearTimeout(this._queueTimeout);this._queueTimeout=null},addToQueue:function(g,e,d,c){this._outputQueue=this._outputQueue.concat(g);this._regionNumberQueue=this._regionNumberQueue.concat(e);this._currentEvaluationId=d;this._currentEvaluationRange=c;0===this._TIMEOUT_PERIOD?this._flushQueue():this._queueTimeout||(this._queueTimeout=setTimeout(f.hitch(this,
"_flushQueue"),this._TIMEOUT_PERIOD))},flushNow:function(){clearTimeout(this._queueTimeout);this._queueTimeout=null;this._flushQueue()},_flushQueue:function(){var f=this._outputQueue,e=this._regionNumberQueue;this._outputQueue=[];this._regionNumberQueue=[];this._queueTimeout=null;0===f.length&&0===e.length||this._outputsHandler.handleOutputsData(f,e,this._currentEvaluationId,this._currentEvaluationRange)}})})},"MW/rtc/plugins/embeddedoutputs/OutputHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/OutputHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.embeddedoutputs.model","rtc.document","rtc.embeddedoutputs.linenumbertracker","rtc.outputhandlerservice","rtc.embeddedoutputs.linecontinuationtracker"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/OutputHandler":function(){define("dojo/_base/declare mw-log/Log mw-utils/Utils ./EmbeddedOutputsUtilities ./outputhandlers/error/ErrorOutputProperties MW/rtc/model/CodeUtilities MW/rtc/model/Range MW/rtc/plugins/embeddedoutputs/model/RegionUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(null,{constructor:function(a,b,c,d,e){this._embeddedOutputsModel=a;this._document=b;this._lineNumberTracker=c;this._lineContinuationTracker=e;this._outputHandlerService=d;this._lastOutputAdded=null},_getOutputFromRawOutput:function(a,b,c){var d=this._createOutputMetaData(a,c);a=this._outputHandlerService.handleRawOutput(a,d);if(null===a)return null;d=a.getOutput();d.evaluationId=c;a.getInstruction()===k.REASSOCIATE_AND_UPDATE?d.setCodeLinePositions(e.mergeCodeLinePositions(d.codeLinePositions,
b)):d.setCodeLinePositions(b);return a},handleOutputsData:function(c,f,h,n){var p=this._embeddedOutputsModel.getRegions();this._embeddedOutputsModel.startBatchOperation();c.forEach(function(b){var c,f=g.unique(b.lineNumbers);f.sort(function(a,b){return a-b});b.lineNumbers=f;f=this._getCodeLinePositions(b);if(null!==f){var l=f[f.length-1],m=!1;0<p.length&&(c=e.convertPositionToRegionNumber(l,p),m=p[c],m=a.isPositionWithinRegionRange(l,m,m));c=m?c:this._embeddedOutputsModel.addRegionForPosition(l);
b=this._getOutputFromRawOutput(b,f,h);if(null!==b)switch(this._lastOutputAdded=b.getOutput(),b.getInstruction()){case k.ADD_OUTPUT:if("error"===b.getOutput().type&&b.getOutput().getErrorType()===d.SYNTAX_ERROR_TYPE){this._embeddedOutputsModel.clearReplacementRange();this._embeddedOutputsModel.prependOutput(c,b.getOutput());break}this._embeddedOutputsModel.addOutput(c,b.getOutput());break;case k.REASSOCIATE_AND_UPDATE:this._embeddedOutputsModel.updateOutputAssociations(b.getOutput(),c);break;case k.UPDATE:this._embeddedOutputsModel.updateOutput(b.getOutput())}}},
this);0<f.length&&(c=p[f[f.length-1]].code.regionPositions,c=c[c.length-1],n=n.getStartPosition(),n=new b(n,c),this._embeddedOutputsModel.clearOldOutputsInRange(n,h));this._embeddedOutputsModel.finishBatchOperation()},handleStartOfEvaluation:function(a){this._embeddedOutputsModel.setReplacementRange(a)},handleEndOfEvaluation:function(a,b,c){this._embeddedOutputsModel.clearReplacementRange();c!==d.SYNTAX_ERROR_TYPE&&this._embeddedOutputsModel.clearOldOutputsInRange(a,b)},clearRegionsOutputs:function(a){a instanceof
Array||(a=[a]);a.forEach(function(a){this._embeddedOutputsModel.clearOutputsForRegionNumber(a)},this)},destroy:function(){},_hasLineNumberInformation:function(a){return void 0!=a.lineNumbers&&0<a.lineNumbers.length},_getCodeLinePositions:function(a){if(!this._hasLineNumberInformation(a))return f.error("Output with no line numbers received. Skipping output. Output data: "+JSON.stringify(a)),null;var b=a.lineNumbers.map(function(a){return this._lineContinuationTracker.getAllContinuationLines(a)},this),
b=[].concat.apply([],b);b.sort(function(a,b){return a-b});b=g.unique(b);return b.map(function(b){return this._lineNumberTracker.createPositionFromOldLineNumber(b-1,a)},this)},_createOutputMetaData:function(a,b){var c={};c.evaluationId=b;"matrix"===a.type&&(c.createPromptController=!0);"text"===a.type&&(c.lineNumber=a.lineNumbers[0],c.lastAddedOutput=this._lastOutputAdded);return c}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction":function(){define([],function(){return{ADD_OUTPUT:0,
REASSOCIATE_AND_UPDATE:1,UPDATE:2}})},"MW/rtc/plugins/embeddedoutputs/LineNumberTrackerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/LineNumberTracker","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.document","rtc.internaldocument","rtc.embeddedoutputs.statehandler"]}},createInstance:function(e,d,c){return new f(e,d,c)}})})},"MW/rtc/plugins/embeddedoutputs/LineNumberTracker":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/CodeUtilities"],function(h,f,g,e,d){return h(e,{constructor:function(c,b,a){this._document=c;this._internalDocument=b;this._stateHandler=a;this._lineNumberMap=[];this._isTracking=!1;this.own(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0))},createPositionFromOldLineNumber:function(c,b){var a=this._getNodeFromOldLineNumber(c,b);return this._document.createLinePosition(a,!1)},getNewLineNumberFromOldLineNumber:function(c,
b){var a=this._getNodeFromOldLineNumber(c,b);return this._internalDocument.getLineNumber(a)},_getNodeFromOldLineNumber:function(c,b){var a;a=this._isTracking?this._lineNumberMap[c].node:d.getCodeLineNodes(this._internalDocument)[c];if(!a)throw a=d.getCodeLineNodes(this._internalDocument),Error("Node is null. isTracking: "+this._isTracking+" ;\noldLineNumber: "+c+" ;\nmapping Length: "+this._lineNumberMap.length+" ;\ncodeLinesLength: "+a.length+" ;\nstack: "+Error().stack+" ;\noutputData: "+JSON.stringify(b)+
" ;\ndocumentText:  \n\x3d\x3d\x3d\x3d\x3dSTART OF DOCUMENT\x3d\x3d\x3d\x3d\x3d\n"+this._document.getText()+" ;\n\x3d\x3d\x3d\x3d\x3dEND OF DOCUMENT\x3d\x3d\x3d\x3d\x3d\n");return a},_stateChangeListener:function(c){c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED?this._startTracking():c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE&&this._reset()},_startTracking:function(){this._reset();this._lineNumberMap=d.getCodeLineNodes(this._internalDocument).map(function(c){return this._document.createLinePosition(c,
!1)},this);this._isTracking=!0},_reset:function(){this._lineNumberMap.forEach(this._document.deletePosition);this._lineNumberMap=[];this._isTracking=!1},destroy:function(){this._reset()}})})},"MW/rtc/plugins/embeddedoutputs/LineContinuationTrackerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/LineContinuationTracker","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.document",
"rtc.internaldocument","rtc.embeddedoutputs.statehandler","matlab.tokens","rtc.linenumberservice"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)}})})},"MW/rtc/plugins/embeddedoutputs/LineContinuationTracker":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/model/CodeUtilities"],function(h,f,g,e,d){return h(e,{constructor:function(c,b,a,d,e){this._document=c;this._internalDocument=b;this._stateHandler=a;this._tokenizer=
d;this._lineNumberService=e;this._lineContinuationMap=[];this._isTracking=!1;this.own(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0))},getAllContinuationLines:function(c){if(this._isTracking)return this._lineContinuationMap[c-1];this._startTracking();return this.getAllContinuationLines(c)},_stateChangeListener:function(c){c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED?this._startTracking():c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE&&
this._reset()},_startTracking:function(){this._reset();for(var c=[],b=d.getCodeLineNodes(this._internalDocument).length-1;0<=b;b--){var a=b+1;c.push(a);a=this._tokenizer.getLexStateForLine(this._lineNumberService.getLineNumberFromCodeLineNumber(a));this._tokenizer.isLineContinuation(a)||(c.forEach(function(a){this._lineContinuationMap[a-1]=c},this),c=[])}this._isTracking=!0},_reset:function(){this._lineContinuationMap=[];this._isTracking=!1},destroy:function(){this.inherited(arguments);this._reset()}})})},
"MW/rtc/plugins/embeddedoutputs/StateHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/StateHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new f}})})},"MW/rtc/plugins/embeddedoutputs/StateHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{CHANGE_TYPE_ENUM:{REGIONS_EVAL_STARTED:1,
REGIONS_EVAL_COMPLETE:2,REGION_EVAL_STARTED:3,SECTION_EVAL_COMPLETE:4},constructor:function(){this._isRunning=!1},stateChanged:function(e,d){switch(e){case this.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED:case this.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED:this._isRunning=!0;break;case this.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE:this._isRunning=!1}},attachListener:function(e,d){var c=f.partial(function(b,a,c){c===b&&a()},e,d);return g.after(this,"stateChanged",c,!0)},isRunning:function(){return this._isRunning},
destroy:function(){}})})},"MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.embeddedoutputs.statehandler","rtc.embeddedoutputs.model"]}},createInstance:function(e,d){return new f(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/SyntaxErrorHandler":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties"],function(h,f,g,e){return h(null,{constructor:function(d,c){this._stateHandler=d;this._eoModel=c;this._hasEvaluatedFirstRegion=!1;this._previousSyntaxError=null;this._evalArgs=[];this._aspectHandles=[];this._aspectHandles.push(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0))},_stateChangeListener:function(d,c){if(d===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED)this._previousSyntaxError=
this.getFirstSyntaxErrorOutput(),this._evalArgs=c;else if(d===this._stateHandler.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED)this._hasEvaluatedFirstRegion||(this._hasEvaluatedFirstRegion=!0,this._clearSyntaxError(this._previousSyntaxError),this.onParseCompletedWithNoSyntaxErrors(this._evalArgs));else if(d===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE)if(this._hasEvaluatedFirstRegion=!1,this._evalArgs=[],"syntax"===c.errorType){var b=this.getFirstSyntaxErrorOutput();this._syntaxErrorsAreSame(this._previousSyntaxError,
b)?this._clearSyntaxError(b):(this._clearSyntaxError(this._previousSyntaxError),this._previousSyntaxError=null);this.onSyntaxError(c)}else this.onEvaluationCompletedWithNoSyntaxErrors(c)},onSyntaxError:function(d){},onParseCompletedWithNoSyntaxErrors:function(d){},onEvaluationCompletedWithNoSyntaxErrors:function(d){},_syntaxErrorsAreSame:function(d,c){if(!d&&!c)return!0;if(!d||!c||!d.codeLinePositions||!c.codeLinePositions||d.codeLinePositions.length!==c.codeLinePositions.length)return!1;var b=d.codeLinePositions.every(function(a,
b){return a.line===c.codeLinePositions[b].line}),a=d.getErrorType()===c.getErrorType()&&d.getText()===c.getText(),e=d.identifier===c.identifier&&!c.identifier;return b&&a&&e},_clearSyntaxError:function(d){d&&this._eoModel.removeOutput(d)},getFirstSyntaxErrorOutput:function(){return this._eoModel.findOutput(this.isSyntaxError)},isSyntaxError:function(d){return d.type===e.OUTPUT_TYPE&&d.getErrorType()===e.SYNTAX_ERROR_TYPE},hasSyntaxError:function(d){return d.some(this.isSyntaxError)},destroy:function(){this._aspectHandles.forEach(function(d){d.remove()})}})})},
"MW/rtc/plugins/embeddedoutputs/OutputRemoverProvider":function(){define(["dojo/_base/declare","./OutputRemover","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.embeddedoutputs","rtc.localfunctionnotifier","rtc.internaldocument","rtc.code.sections.model","rtc.embeddedoutputs.syntaxerrors"]}},createInstance:function(e,d,c,b,a){return new f(e._outputsModel,d,c,b,a)}})})},"MW/rtc/plugins/embeddedoutputs/OutputRemover":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/FunctionStateConstants"],function(h,f,g,e){return h(null,{constructor:function(d,c,b,a,e){this._embeddedOutputsModel=d;this._localFunctionNotifier=c;this._internalDocument=b;this._sectionModel=a;this._syntaxErrorHandler=e;this._functionInfo=null;this._aspectHandles=[];this._aspectHandles.push(g.after(this._localFunctionNotifier,"onValidFunctionsChange",f.hitch(this,"_functionListener"),!0));this._aspectHandles.push(g.after(this._internalDocument,
"onDocumentChanged",f.hitch(this,"_docChangeListener")))},destroy:function(){this._aspectHandles.forEach(function(d){d.remove()});this._aspectHandles=[]},_functionListener:function(d){d.type===e.VALID_FUNCTIONS_ADDED||d.type===e.VALID_FUNCTIONS_CHANGED?(this._functionInfo={startLine:d.validFunctions[0].startLine-1,endLine:d.validFunctions[d.validFunctions.length-1].endLine-1},this._updateToSectionBounds(),this._clearOutputsFromFunction()):d.type===e.VALID_FUNCTIONS_REMOVED&&(this._functionInfo=null)},
_clearOutputsFromFunction:function(){var d=this._functionInfo.endLine,c=this._internalDocument.getLineNode(this._functionInfo.startLine),d=this._internalDocument.getLineNode(d),c=this._embeddedOutputsModel.getSectionRegionsFromNodeRange(c,d);0<c.length&&this._embeddedOutputsModel.clearOutputsForward(c[0].code.regionNumber,this._syntaxErrorHandler.isSyntaxError)},_docChangeListener:function(){this._updateToSectionBounds()&&this._clearOutputsFromFunction()},_updateToSectionBounds:function(){if(!this._functionInfo)return!1;
var d=this._sectionModel.getSections();if(0===d.length)return!1;d=d[d.length-1];if(d.localFunctions){if(d.start.line===this._functionInfo.startLine&&d.end.line===this._functionInfo.endLine)return!1;this._functionInfo.startLine=d.start.line;this._functionInfo.endLine=d.end.line;return!0}return!1}})})},"MW/rtc/plugins/functionnotifier/FunctionStateConstants":function(){define([],function(){return{FUNCTION_ARGS_NAVIGATE_ENTER:"navigateIntoFunctionArgs",FUNCTION_ARGS_NAVIGATE_EXIT:"navigateOutFunctionArgs",
FUNCTION_ARGS_NAVIGATE:"navigateInsideFunctionArgs",FUNCTION_ARGS_NAVIGATE_CHANGE:"navigateBetweenArgs",INNER_NESTED_FUNCTION_CALL:"nestedChildFunctionCall",OUTER_NESTED_FUNCTION_CALL:"ParentFunctionCall",VALID_FUNCTIONS_ADDED:"validFunctionsAdded",VALID_FUNCTIONS_CHANGED:"validFunctionsChanged",VALID_FUNCTIONS_REMOVED:"validFunctionsRemoved",FUNCTIONS_ON_VALID_DOCUMENT_CHANGE:"functionInfoOnValidDocumentChange"}})},"MW/rtc/plugins/embeddedoutputs/CopyOutputsProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/CopyOutputs","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:"rtc.embeddedoutputs.model rtc.embeddedoutputs rtc.clipboard rtc.cursor rtc.actionservice rtc.contextmenu.generator rtc.clipboardtempdirpath".split(" ")}},createInstance:function(e,d,c,b,a,g,h){return new f(e,d,c,b,a,g,h)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/CopyOutputs":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/cutcopypaste/MIMETypes","dojo/i18n!l10n/nls/actions"],function(h,f,g,e,d){return h(null,{RTC_COPY_OUTPUT:"rtc_copy_output",RTC_COPY_ALL_OUTPUT:"rtc_copy_all_output",constructor:function(c,b,a,e,h,m,q){this._outputModel=c;this._outputView=b.getEmbeddedOutputsView();this._clipboard=a;this._cursor=e;this._actionService=h;this._tempDirPath=q;this._actions=[{id:this.RTC_COPY_OUTPUT,enabled:!1,contextMenuGroup:"copyPaste",description:d.copyOutput,callback:f.hitch(this,
this._copyCurrentOutputs)},{id:this.RTC_COPY_ALL_OUTPUT,enabled:!0,contextMenuGroup:"copyPaste",description:d.copyAllOutput,callback:f.hitch(this,this._copyAllOutputs)}];this._selectedOutputs=[];this._handleEmbeddedOutputsStateChange(b.isEmbeddedOutputsEnabled());this._aspectHandles=[];this._aspectHandles.push(g.after(m,"willOpen",f.hitch(this,"_updateSelectedOutputs"),!0));this._aspectHandles.push(g.after(b,"onEmbeddedOutputsStateChange",f.hitch(this,"_handleEmbeddedOutputsStateChange"),!0))},_updateSelectedOutputs:function(c,
b){var a;a=this._outputView.getOutputWrapperFromElement(b);var d=c===this._rightPanel;a?a=[a]:d?a=[]:(a=this._getSelectionRange(),a=this._outputView.getOutputDivsForRange(a.start,a.end));this._selectedOutputs=a.map(function(a){return this._outputView.getOutputFromOutputDiv(a)},this);this._actionService.updateAction("rtc_copy_output",{enabled:0<this._selectedOutputs.length});a=this._outputModel.hasOutputs();this._actionService.updateAction("rtc_copy_all_output",{enabled:a})},_copyOutputs:function(c){var b=
"",a="",d=1<c.length,f=this._tempDirPath,g=[],h=[];d&&(a+="\x3cp\x3e");c.forEach(function(e,h){if(d&&0<h){var n=c[h-1];e.codeLinePositions[e.codeLinePositions.length-1].line!==n.codeLinePositions[n.codeLinePositions.length-1].line&&(a+="\x3c/p\x3e\x3cp\x3e")}n=e.getText();b+=(b?"\n":"")+n;a+=e.getHTML(f,g)});d&&(a+="\x3c/p\x3e");if(1===c.length){var n=c[0];n.getMIMEContent&&(h=h.concat(n.getMIMEContent()))}h=[{flavor:e.HTML,content:a},{flavor:e.TEXT,content:b},{flavor:e.COPY_FOR_COMMAND_WINDOW,content:b}].concat(h);
g.length&&h.push({flavor:e.IMAGE_LIST,content:g});this._clipboard.setClipboardData(h)},_getSelectionRange:function(){var c=this._cursor.selectionInfo(),b=c.startNode.rootContainer(),c=c.endNode.rootContainer();return{start:b,end:c}},_copyCurrentOutputs:function(){this._copyOutputs(this._selectedOutputs)},_copyAllOutputs:function(){var c=this._outputModel.getOutputs();this._copyOutputs(c)},_handleEmbeddedOutputsStateChange:function(c){c?this._actionService.loadActions(this._actions):this._actions.forEach(function(b){this._actionService.getAction(b.id)&&
this._actionService.removeAction(b.id)},this)},destroy:function(){var c=this._actionService;this._actions.forEach(function(b){c.getAction(b.id)&&c.removeAction(b.id)});this._aspectHandles.forEach(function(b){b.remove()})}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/ExecutionManager","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.code.sections.model rtc.embeddedoutputs.model rtc.backingstore rtc.document.executablecode.executablecodeservice rtc.id rtc.embeddedoutputs.outputhandler rtc.embeddedoutputs.statehandler rtc.code.matlabfiletype".split(" ")}},
createInstance:function(e,d,c,b,a,g,h,m,q,n){return new f(e,d,c,b,a,g,h,m,q,n)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionManager":function(){define("./EmbeddedOutputsDataService ./OutputQueue dojo/_base/declare dojo/_base/lang MW/rtc/model/CodeUtilities MW/rtc/model/Range MW/rtc/plugins/debug/DebugServicesFactory".split(" "),function(h,f,g,e,d,c,b){return g([],{constructor:function(a,c,d,g,q,n,p,r,s,t){this._document=a;this._internalDocument=c;this._sectionModel=
d;this._outputsModel=g;this._backingStore=q;this._executableCodeService=n;this._editorId=p;this._outputHandler=r;this._stateHandler=s;this._debugServices=b.getInstance();this._filetype=t;this._outputQueue=new f(this._outputHandler);this._embeddedOutputsDataService=new h(this._editorId,this._outputHandler,this._outputQueue,this._stateHandler,e.hitch(this,"_getAllUpdatedTextRegions"),e.hitch(this,"_getFullEvaluationRangeCallback"))},executeCurrentSection:function(a,b){var c=this._sectionModel.getCurrentSectionNumber();
-1!==c&&this.executeSection(c,a,b)},executeSection:function(a,b,c){var d;d=b?this._sectionModel.getSections().length-1:a;this._executeSectionRange(a,d,b,c)},executeAllSections:function(){var a=this._sectionModel.getSections().length-1;this._executeSectionRange(0,a,!0,!1)},_executeSectionRange:function(a,b,d,e){if(this._isExecutionAllowed()){this._quitDebuggingIfNeeded();var f=this._sectionModel.getSection(a).start,g=this._sectionModel.getSection(b).end,f=this._document.createLinePosition(f.getNode().rootContainer(),
!1),g=this._document.createLinePosition(g.getNode().rootContainer(),!1),f=new c(f,g);this._outputsModel.synchronizeRegionsPartial(a,d);var g=this._getRegionsForSection(a,d).map(this._getTextRegion,this),h=this._executableCodeService.getEvalText(),r=this._document.getState();a=0!==a||!d;e=!e;d=this._backingStore.getFilePath();this._embeddedOutputsDataService.getOutputsForCode(g,h,r,a,e,f,b,d)}},_getFullEvaluationRangeCallback:function(){var a=this._sectionModel.getSection(0),b=this._sectionModel.getSection(this._sectionModel.getSections().length-
1),a=a.start.getNode(),b=b.end.getNode(),a=this._document.createLinePosition(a.rootContainer(),!1),b=this._document.createLinePosition(b.rootContainer(),!1);return new c(a,b)},_getRegionsForSection:function(a,b){var c=this._sectionModel.getSection(a),d=c.start.getNode();b&&(c=this._sectionModel.getSections(),c=c[c.length-1]);c=c.end.getNode();return this._outputsModel.getSectionRegionsFromNodeRange(d,c)},_getTextRegions:function(a,b){return this._outputsModel.getRegions(a,b).map(this._getTextRegion,
this)},_getAllUpdatedTextRegions:function(){this._outputsModel.synchronizeRegions();return this._getTextRegions()},_getTextRegion:function(a){var b=a.code;return{regionLineNumber:d.getCodeLineNumberFromPosition(this._internalDocument,b.regionPositions[0]),regionString:b.regionString,regionNumber:b.regionNumber,endOfSection:b.endOfSection,sectionNumber:b.sectionNumber,regionUid:a.uid}},_quitDebuggingIfNeeded:function(){this._debugServices.isDebugging&&this._debugServices.debugExit()},_isExecutionAllowed:function(){return this._filetype.isScript()},
interrupt:function(){this._embeddedOutputsDataService.interrupt()},destroy:function(){this._outputQueue.destroy();this._outputQueue=null;this._embeddedOutputsDataService.destroy();this._embeddedOutputsDataService=null}})})},"MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsDataService":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-utils/Utils","./MessageServiceFactory"],function(h,f,g,e,d){return h(null,{_EVAL_REGIONS_NAMESPACE:"/embeddedOutputs/evalRegions/",_INTERRUPT_EVAL_NAMESPACE:"/embeddedOutputs/interruptRegion/",
_EVAL_COMPLETE:"/embeddedOutputs/regionsComplete/",_REGION_EVAL_STARTED_NAMESPACE:"/liveEval/regionEvaluating/",_REGIONS_EVAL_COMPLETED_NAMESPACE:"/liveEval/regionsEvaled/",_SECTION_EVAL_COMPLETED_NAMESPACE:"/liveEval/sectionEvaled/",_GET_REGIONS_DATA_REQUEST_NAMESPACE:"/embeddedOutputs/getRegionsDataRequest/",_GET_REGIONS_DATA_RESPONSE_NAMESPACE:"/embeddedOutputs/getRegionsDataResponse/",_CLEAR_REGIONS_OUTPUTS_NAMESPACE:"/embeddedOutputs/clearRegionsOutputsRequest/",_OUTPUT_STREAM_EVENT_NAMESPACE:"/embeddedOutputs/outputStreamEvent/",
_OUTPUT_STREAM_STATUS_NAMESPACE:"/embeddedOutputs/outputStreamStatus/",constructor:function(c,b,a,e,f,g){this._evalRegionsNamespace=this._EVAL_REGIONS_NAMESPACE+c;this._evalCompleteNamespace=this._EVAL_COMPLETE+c;this._interruptRegionsNamespace=this._INTERRUPT_EVAL_NAMESPACE+c;this._getUpdatedTextRegionsNamespace=this._GET_REGIONS_DATA_RESPONSE_NAMESPACE+c;this._editorId=c;this._stateHandler=e;this._outputsHandler=b;this._outputQueue=a;this._getRegionsDataCallback=f;this._getFullEvaluationRangeCallback=
g;this._queuedRequests=[];this._lastQueuedSection=this._lastDocumentState=this._currentlyRunningEvaluationResult=this._currentlyRunningRequest=null;this._regionsEvalFinished=this._outputsFinished=!1;this._messageService=d.getInstance();this._messageService.subscribe(this._REGION_EVAL_STARTED_NAMESPACE+this._editorId,"_regionEvalStarted",this);this._messageService.subscribe(this._REGIONS_EVAL_COMPLETED_NAMESPACE+this._editorId,"_regionsEvalCompleted",this);this._messageService.subscribe(this._SECTION_EVAL_COMPLETED_NAMESPACE+
this._editorId,"_sectionEvaled",this);this._messageService.subscribe(this._GET_REGIONS_DATA_REQUEST_NAMESPACE+this._editorId,"_getRegionsDataRequest",this);this._messageService.subscribe(this._CLEAR_REGIONS_OUTPUTS_NAMESPACE+this._editorId,"_clearRegionsOutput",this);this._messageService.subscribe(this._OUTPUT_STREAM_EVENT_NAMESPACE+this._editorId,"_outputStreamEvent",this);this._messageService.subscribe(this._OUTPUT_STREAM_STATUS_NAMESPACE+this._editorId,"_handleOutputStreamStatus",this)},destroy:function(){this._messageService.unsubscribe(this._REGION_EVAL_STARTED_NAMESPACE+
this._editorId,"_regionEvalStarted",this);this._messageService.unsubscribe(this._REGIONS_EVAL_COMPLETED_NAMESPACE+this._editorId,"_regionsEvalCompleted",this);this._messageService.unsubscribe(this._SECTION_EVAL_COMPLETED_NAMESPACE+this._editorId,"_sectionEvaled",this);this._messageService.unsubscribe(this._GET_REGIONS_DATA_REQUEST_NAMESPACE+this._editorId,"_getRegionsDataRequest",this);this._messageService.unsubscribe(this._CLEAR_REGIONS_OUTPUTS_NAMESPACE+this._editorId,"_clearRegionsOutput",this);
this._messageService.unsubscribe(this._OUTPUT_STREAM_EVENT_NAMESPACE+this._editorId,"_outputStreamEvent",this);this._messageService.unsubscribe(this._OUTPUT_STREAM_STATUS_NAMESPACE+this._editorId,"_handleOutputStreamStatus",this);this._currentlyRunningRequest&&(this._currentlyRunningRequest.evaluationRange.destroy(),this._currentlyRunningRequest=null);this._currentlyRunningEvaluationResult=null},interrupt:function(){this._queuedRequests=[];this._interrupt()},_interrupt:function(){this._currentlyRunningRequest&&
this._messageService.publish(this._interruptRegionsNamespace,this._currentlyRunningRequest.requestId)},_sectionEvaled:function(c){c=c.data;this._outputQueue.flushNow();this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.SECTION_EVAL_COMPLETE,c)},_outputStreamEvent:function(c){var b=c.data.requestId,a=c.data.outputs;c=c.data.completedRegionNumbers||[];if(!(this._currentlyRunningRequest&&b!==this._currentlyRunningRequest.requestId)&&!(0===a.length&&0===c.length)){var d=null,d=this._currentlyRunningRequest?
this._currentlyRunningRequest.evaluationRange:this._getFullEvaluationRangeCallback();this._outputQueue.addToQueue(a,c,b,d)}},_regionEvalStarted:function(c){this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.REGION_EVAL_STARTED,c.data)},_clearRegionsOutput:function(c){c=c.data;this._outputQueue.flushNow();this._outputsHandler.clearRegionsOutputs(c)},_handleOutputStreamStatus:function(c){c.data.streamingFinished&&this._handleOutputStreamingFinished()},_handleOutputStreamingFinished:function(){try{this._outputQueue.flushNow()}catch(c){g.error("Exception occurred while flushing outputs: "+
c)}this._outputsFinished=!0;this._regionsEvalFinished&&this._finishCurrentRequest()},_regionsEvalCompleted:function(c){this._currentlyRunningEvaluationResult={didRunToCompletion:c.data.didRunToCompletion,errorType:c.data.errorType};this._regionsEvalFinished=!0;this._outputsFinished&&this._finishCurrentRequest()},_finishCurrentRequest:function(){var c,b=this._currentlyRunningEvaluationResult.didRunToCompletion,a=this._currentlyRunningEvaluationResult.errorType;c=this._currentlyRunningRequest?this._currentlyRunningRequest.evaluationRange:
this._getFullEvaluationRangeCallback();this._currentlyRunningRequest&&this._outputsHandler.handleEndOfEvaluation(this._currentlyRunningRequest.evaluationRange,this._currentlyRunningRequest.requestId,a);this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE,{didRunToCompletion:b,errorType:a,requestedEvaluationRange:c});this._messageService.publish(this._evalCompleteNamespace);this._currentlyRunningRequest&&(this._currentlyRunningRequest.evaluationRange.destroy(),
this._currentlyRunningRequest=null);this._currentlyRunningEvaluationResult=null;this._regionsEvalFinished=this._outputsFinished=!1;0!==this._queuedRequests.length&&(c=this._queuedRequests.pop(),this._getOutputsForMessage(c))},getOutputsForCode:function(c,b,a,d,f,g,h,n){var p=e.generateUuid();b={requestId:p,regionArray:c,fullText:b,partialEval:d,documentStateToken:a,fullFilePath:n};c=c.map(function(a){return a.regionNumber});g={message:b,requestId:p,evaluationRange:g,regionNumbersToRun:c};p=!this._isOkayToQueue(a,
h);this._lastQueuedSection=h;this._lastDocumentState=a;this._getOutputsForMessage(g,f||p)},_getOutputsForMessage:function(c,b){this._currentlyRunningRequest?b?(this._queuedRequests=[c],this._interrupt()):this._queuedRequests.unshift(c):(this._currentlyRunningRequest=c,this._stateHandler.stateChanged(this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED,{regionNumbersToRun:c.regionNumbersToRun,evaluationRange:c.evaluationRange}),this._outputsHandler.handleStartOfEvaluation(c.evaluationRange),this._messageService.publish(this._evalRegionsNamespace,
c.message))},_getRegionsDataRequest:function(){var c={status:!0,exception:""};try{c.regionsData=this._getRegionsDataCallback()}catch(b){c.exception=b}this._messageService.publish(this._getUpdatedTextRegionsNamespace,c)},_isOkayToQueue:function(c,b){var a=this._lastQueuedSection<b;return c===this._lastDocumentState&&a}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionDataManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/ExecutionDataManager"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.embeddedoutputs.statehandler","rtc.id","rtc.embeddedoutputs.model","rtc.internaldocument","rtc.linenumberservice"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionDataManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","mw-messageservice/MessageService"],function(h,f,g,e,d){return h(e,{_REQUEST_DATA:"/executionData/executionDataRequest/",
_RECEIVE_DATA:"/executionData/executionDataResponse/",_MAX_REQUEST_INTERVAL:500,_DEFAULT_REQUEST_INTERVAL:16,constructor:function(c,b,a,e,h){this._stateHandler=c;this._editorId=b;this._requestInterval=null;this._embeddedOutputsModel=a;this._internalDocument=e;this._lineNumberService=h;this._knownExecutionRunning=!1;this.own(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_handleEvalType"),!0));d.subscribe(this._RECEIVE_DATA+this._editorId,"_handleExecutionData",this)},_handleEvalType:function(c){if(c===
this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED){this._initializeRequests();this._requestIntervalTime=this._DEFAULT_REQUEST_INTERVAL;this._previousRegionCall=0;this._lineRunCounters=[];this._knownExecutionRunning=!0;c=this._lineNumberService.getNumberOfCodeLines();for(var b=0;b<c;b++)this._lineRunCounters[b]=0}else c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE&&(this._terminateRequests(),this._knownExecutionRunning=!1)},_initializeRequests:function(){this._requestInterval=
setInterval(f.hitch(this,"_requestForData"),this._requestIntervalTime)},_terminateRequests:function(){clearInterval(this._requestInterval);this._requestInterval=null},_requestForData:function(){d.publish(this._REQUEST_DATA+this._editorId,{dataSent:"requestData"})},_handleExecutionData:function(c){if(!this._knownExecutionRunning)return!1;this._currentRegion=c.data.checkPoint;var b=!1,a;for(a in c.data.linesData)c.data.linesData.hasOwnProperty(a)&&(this._lineRunCounters[a]+=c.data.linesData[a],b=!0);
this._updateIntervalTime();this._initializeRequests();if(b)this.onDataUpdate(this._currentRegion,this._lineRunCounters);this._previousRegionCall=this._currentRegion},_updateIntervalTime:function(){this._currentRegion!==this._previousRegionCall?this._requestIntervalTime=this._DEFAULT_REQUEST_INTERVAL:(this._requestIntervalTime*=2,this._requestIntervalTime=Math.min(this._requestIntervalTime,this._MAX_REQUEST_INTERVAL));clearInterval(this._requestInterval)},onDataUpdate:function(c,b){},destroy:function(){d.unsubscribe(this._RECEIVE_DATA+
this._editorId,"_handleExecutionData",this)}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModel","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.code.sections.model","rtc.document.executablecode.executablecodeconverter","rtc.embeddedoutputs.statehandler"]}},createInstance:function(e,
d,c,b,a){return new f(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/model/EmbeddedOutputsModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/PositionUtilities MW/rtc/model/Range mw-utils/Utils ./OutputContainer ./Region ./RegionParser ./RegionUtilities ../outputhandlers/error/ErrorOutputProperties".split(" "),function(h,
f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return h(null,{CHANGE_TYPE:{ADD:0,REMOVE:1,REPLACE:2,UPDATE:3},_RELATION:{BEFORE:0,AFTER:1},_COMPARISON:{BEFORE:-1,WITHIN:0,AFTER:1},constructor:function(a,b,c,d,e){this._internalDocument=a;this._document=b;this._sectionModel=c;this._stateHandler=e;this._regionParser=new p(this._document,d);this._regions=[];this._HEAD=new q;this._TAIL=new q;this._HEAD.setNext(this._TAIL);this._TAIL.setPrevious(this._HEAD);this._allOutputsReadyPromise=this._replacementRange=null;this._unresolvedOutputCount=
0;this._isBatchOperationInProgress=!1;this._changes=[];this._aspectHandles=[];this._aspectHandles.push(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"clear")));this._aspectHandles.push(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0));this.synchronizeRegions()},_stateChangeListener:function(a,b){if(a===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED){var c=b.evaluationRange,d=this._sectionModel.getSectionNumberForNode(c.getStartPosition().node),
c=this._sectionModel.getSectionNumberForNode(c.getEndPosition().node);this._clearDeferredOutputsForSections(d,c)}},destroy:function(){this.clear();this._aspectHandles.forEach(function(a){a.remove()})},startBatchOperation:function(){(this._isBatchOperationInProgress||0<this._changes.length)&&d.error("Warning: Started a batch operation, but one is already in progress");this._isBatchOperationInProgress=!0},finishBatchOperation:function(){0<this._changes.length&&(this.onModelUpdated(!0,this._changes),
this._changes=[]);this._isBatchOperationInProgress=!1},_batchAwareModelUpdate:function(a){if(this._isBatchOperationInProgress)this._changes.push(a);else this.onModelUpdated(!0,[a])},synchronizeRegions:function(){this.synchronizeRegionsPartial(0,!0)},synchronizeRegionsPartial:function(a,b){var c=this._getUpdatedCodeRegions(a,b),d=[],e=[],g=this._getEndSectionNumber(a,b);c.forEach(function(b,c){b.regionNumber=c;b.sectionBreak||(b.sectionBreak=!1);b.endOfSection||(b.endOfSection=!1);var f=b.regionPositions[0].getNode();
if(!e.some(function(a){return f===a},this)){var k=this._mergeAllOutputsInCollapsedRegionsForStartNode(this._regions,f);e.push(f)}var h;if(k){var l=b.sectionNumber;l>=a&&l<=g&&this._clearRegionPositions(k);h=new n(b,k.uid);this._getOutputContainersForRegion(k,!0).forEach(function(a){a.setRegion(h)})}else h=new n(b,m.generateUuid());d[b.regionNumber]=h},this);this._blockEvents(f.hitch(this,"_clearStaleRegions",d));this._regions=d;this.onModelUpdated()},_clearDeferredOutputsForSections:function(a,b){this._clearOutputsIf(function(c){var d=
c.getRegion().code.sectionNumber,d=d>=a&&d<=b;c=!c.getOutput().isReady();return d&&c})},_mergeAllOutputsInCollapsedRegionsForStartNode:function(a,b){var c=null,d=[];a.forEach(function(a){r.checkRegionIsValid(a);if(a.code.regionPositions.length&&a.code.regionPositions[0].getNode()===b){var e=this._getOutputContainersForRegion(a,!0);e&&0<e.length&&(d=d.concat(e));c=a;d.forEach(function(a){a.setRegion(c)},this)}},this);return c},_getEndSectionNumber:function(a,b){var c=this._sectionModel.getSections();
return b?c.length-1:a},_getUpdatedCodeRegions:function(a,b){var c=this._getEndSectionNumber(a,b),d=[],e=[];0===a&&b||(this._updateOldRegions(),d=this._getRegionsBeforeSection(a),b||(e=this._getRegionsAfterSection(c)));c=this._sectionModel.getSections().slice(a,c+1);c=this._getNewRegions(c,a);return[].concat(d,c,e)},_getRegionsBeforeSection:function(a){return this._regions.filter(function(b){return b.code.sectionNumber<a}).map(function(a){return a.code})},_getRegionsAfterSection:function(a){return this._regions.filter(function(b){return b.code.sectionNumber>
a}).map(function(a){return a.code})},_updateOldRegions:function(){var a=-1;this._regions.forEach(function(b,c,d){b=b.code;if(-1!==b.sectionNumber){var e=this._sectionModel.getSectionNumberForNode(b.regionPositions[0].node);b.sectionNumber=e;b.endOfSection=!1;e!=a?(b.sectionBreak=!0,0!==c&&(d[c-1].code.endOfSection=!0)):b.sectionBreak=!1;a=e}},this);0<this._regions.length&&(this._regions[this._regions.length-1].code.endOfSection=!0)},_getNewRegions:function(a,b){var c=[];a=a||this._sectionModel.getSections();
b=b||0;a.forEach(function(a,d){var e=a.start.getNode(),f=a.end.getNode(),e=this._regionParser.getCodeRegionsInRange(e,f);0<e.executableRegions.length&&(e.executableRegions[0].sectionBreak=!0,e.executableRegions[e.executableRegions.length-1].endOfSection=!0,e.executableRegions.forEach(function(a){a.sectionNumber=b+d}),c=c.concat(e.executableRegions))},this);return c},prependOutput:function(a,b){if(!b.isReady())throw Error("prependOutput API expects a resolved output");if(this._replacementRange)throw Error("prependOutput should not be used while a replacement is in progress.");
var c=this._findFirstOutputContainerIf(function(b){return b.getRegion().code.regionNumber>=a},this._HEAD,this._TAIL),d=new q(b,this._regions[a]);this._spliceInOutputContainer(d,c,this._RELATION.BEFORE);this._handleDeferredInsertResolved(d)},setReplacementRange:function(a){d.assert(!this._replacementRange,"Warning: Tried to set a new replacement range without clearing the existing one.");a=this._getOutputContainerListForDocumentRange(a);this._replacementRange={head:a.head,insertionPoint:a.head.next(),
tail:a.tail}},clearReplacementRange:function(){this._replacementRange=null},_setInsertionPoint:function(a){if(a===this._HEAD||null===a.next()&&null===a.previous())throw Error("Invalid output container");if(a!==this._TAIL&&!a.getOutput().isReady())throw Error("There shouldn't be any non ready outputs after the execution point.");this._replacementRange.insertionPoint=a},addOutput:function(a,c){this._replacementRange||this.setReplacementRange(b.createFullFileRange(this._document,this._internalDocument));
this._insertWithReplacement(a,c)},_insertWithReplacement:function(a,b){var c=new q(b,this._regions[a]);this._insertContainerWithReplacement(a,c)},_insertContainerWithReplacement:function(a,b){var c=b.getOutput(),d=this._calculateInsertionPoint(c.evaluationId,a);this._setInsertionPoint(d);if(d!==this._replacementRange.tail&&this._isOutputReplaceable(d,c))return this._replaceOutput(b,d),b;this._insertOutput(b,d,this._RELATION.BEFORE)},_replaceOutput:function(a,b){b.setBeingReplacedBy(a);a.setContainerToReplace(b);
var c;c=b.getRegion().code.regionNumber;c=a.getRegion().code.regionNumber<c?this._RELATION.BEFORE:this._RELATION.AFTER;this._spliceInOutputContainer(a,b,c);c===this._RELATION.AFTER?this._setInsertionPoint(a.next()):this._setInsertionPoint(b.next());this._unresolvedOutputCount++;a.then(f.hitch(this,"_handleDeferredReplacementResolved",a,b),f.hitch(this,"_handleDeferredReplacementCancelled",b),f.hitch(this,"_handleOutputPromiseRejection",[a,b]))},_handleDeferredReplacementResolved:function(a,b){this._ensureBatched(f.hitch(this,
function(){this._destroyOutputContainer(b);a.setContainerToReplace(null);this._unresolvedOutputCount--;var c=this._getIndexInRegion(a);this._batchAwareModelUpdate({type:this.CHANGE_TYPE.ADD,regionNumber:a.getRegion().code.regionNumber,output:a.getOutput(),outputIndex:c})}))},_handleDeferredReplacementCancelled:function(a){this._unresolvedOutputCount--;a.getBeingReplacedBy().setContainerToReplace(null);a.setBeingReplacedBy(null);this._updateAllOutputsReadyPromise()},_insertOutput:function(a,b,c){this._spliceInOutputContainer(a,
b,c);this._setInsertionPoint(a.next());this._unresolvedOutputCount++;a.then(f.hitch(this,"_handleDeferredInsertResolved",a),f.hitch(this,"_handleDeferredInsertCancelled"),f.hitch(this,"_handleOutputPromiseRejection",[a]))},_handleDeferredInsertResolved:function(a){this._unresolvedOutputCount--;var b=this._getIndexInRegion(a);this._batchAwareModelUpdate({type:this.CHANGE_TYPE.ADD,regionNumber:a.getRegion().code.regionNumber,output:a.getOutput(),outputIndex:b})},_handleDeferredInsertCancelled:function(){this._unresolvedOutputCount--;
this._updateAllOutputsReadyPromise()},_handleOutputPromiseRejection:function(a){a.forEach(function(a){this._destroyOutputContainer(a)},this);this._updateAllOutputsReadyPromise()},_calculateInsertionPoint:function(a,b){return this._findFirstOutputContainerIf(f.hitch(this,function(a){return this._isInOrAdjacentToRegionNumber(a,b)}),this._replacementRange.insertionPoint.previous(),this._replacementRange.tail)},_isInOrAdjacentToRegionNumber:function(a,b){var c=a.getRegion().code.regionNumber;if(c<b){var d=
a.next();if(d!==this._TAIL&&d.getRegion().code.regionNumber<b)return!1}return c>b&&(c=a.previous(),c!==this._HEAD&&c.getRegion().code.regionNumber>b)?!1:!0},_spliceInOutputContainer:function(a,b,c){c===this._RELATION.BEFORE?(a.setNext(b),a.setPrevious(b.previous()),b.previous().setNext(a),b.setPrevious(a)):(a.setNext(b.next()),a.setPrevious(b),b.next().setPrevious(a),b.setNext(a))},_spliceOutOutputContainer:function(a){a.previous().setNext(a.next());a.next().setPrevious(a.previous());a.setPrevious(null);
a.setNext(null)},_destroyOutputContainer:function(a){a.isResolved()||a.cancel();this._removeContainerAndEmitChangeEvent(a);a.destroy();this._destroyOutput(a.getOutput())},_removeContainerAndEmitChangeEvent:function(a){this._replacementRange&&a===this._replacementRange.insertionPoint&&(this._replacementRange.insertionPoint=a.next());this._spliceOutOutputContainer(a);a.getOutput().isReady()&&this._batchAwareModelUpdate({type:this.CHANGE_TYPE.REMOVE,regionNumber:a.getRegion().code.regionNumber,removedOutputId:a.getOutput().uid})},
_isOutputReplaceable:function(a,b){var c=this._findFirstReadyOutputContainerIf(function(b){return b===a},this._replacementRange.head,this._replacementRange.tail),d=!this._isOutputUsedByCurrentEvaluation(b.evaluationId,a),e=a.getOutput().type===b.type;return c&&d&&e},clear:function(){this.clearAllOutputs();this._clearAllRegions();this.onModelUpdated();this._isBatchOperationInProgress=!1;this._changes=[]},clearOldOutputsInRange:function(a,b){var c=this._getOutputContainerListForDocumentRange(a),d=f.hitch(this,
function(a){return!this._isOutputUsedByCurrentEvaluation(b,a)}),e=this._findOutputContainersIf(d,c.head,c.tail);this._ensureBatched(f.hitch(this,function(){e.forEach(function(a){a.getOutput().isReady()?this._destroyOutputContainer(a):a.getOutput().getReadyPromise().cancel()},this)}))},clearOutputsForward:function(a,b){b=b||function(){return!1};this._ensureBatched(f.hitch(this,function(){this._clearOutputsIf(function(c){var d=c.getRegion().code.regionNumber>=a;c=b(c.getOutput());return d&&!c})}))},
clearAllOutputs:function(){this._clearOutputsIf();this._HEAD.next()!==this._TAIL&&(d.error("Some outputs remained after clearing outputs. This might be because an output was rejected, but no one cleaned it up. Removing all remaining outputs."),this._HEAD.setNext(this._TAIL),this._TAIL.setPrevious(this._HEAD))},clearOutputsForRegionNumber:function(a){this._ensureBatched(f.hitch(this,function(){this._clearOutputsIf(function(b){return b.getRegion().code.regionNumber===a})}))},removeOutput:function(a){(a=
this._findOutputContainerForOutput(a))&&this._destroyOutputContainer(a)},_clearOutputsIf:function(a){var b=this._findOutputContainersIf(a||function(){return!0},this._HEAD,this._TAIL);this._ensureBatched(f.hitch(this,function(){b.forEach(function(a){a.getOutput().isReady()?this._destroyOutputContainer(a):a.getOutput().getReadyPromise().cancel()},this)}))},updateOutput:function(a){var b=this._findOutputContainerForOutput(a);if(!b)throw Error("Output not found");a.isReady()&&this._batchAwareModelUpdate({type:this.CHANGE_TYPE.UPDATE,
regionNumber:b.getRegion().code.regionNumber,output:b.getOutput()})},updateOutputAssociations:function(a,b){var c=this._findOutputContainerForOutput(a);if(!c.getOutput())throw Error("Output not found");if(!this._replacementRange)throw Error("No active replacement range");this._ensureBatched(f.hitch(this,function(){var a=c.getContainerToReplace();a&&(c.next()===this._replacementRange.insertionPoint||a.next()===this._replacementRange.insertionPoint?this._setInsertionPoint(a):this._destroyOutputContainer(a));
this._removeContainerAndEmitChangeEvent(c);this._resetContainerForReuse(c,b);this._insertContainerWithReplacement(b,c)}))},_resetContainerForReuse:function(a,b){a.setRegion(this._regions[b]);if(!a.isResolved()){var c=a.getContainerToReplace();c&&(c.setBeingReplacedBy(null),a.setContainerToReplace(null));this._unresolvedOutputCount--;this._updateAllOutputsReadyPromise()}},_ensureBatched:function(a){if(this._isBatchOperationInProgress)return a();this.startBatchOperation();a=a();this.finishBatchOperation();
return a},_blockEvents:function(a){var b=!1;this._isBatchOperationInProgress&&(this.finishBatchOperation(),b=!0);this.startBatchOperation();a=a();this._changes=[];this.finishBatchOperation();b&&this.startBatchOperation();return a},_isOutputUsedByCurrentEvaluation:function(a,b){if(b.getOutput().evaluationId===a)return!0;var c=b.getBeingReplacedBy();return c&&c.getOutput().evaluationId===a},_destroyOutput:function(a){a.destroy();a.codeLinePositions.forEach(function(a){this._document.deletePosition(a)},
this);a.codeLinePositions=[]},_clearRegionPositions:function(a){a.code.regionPositions.forEach(this._document.deletePosition);a.code.regionPositions=[]},_clearAllRegions:function(){this._regions.forEach(this._clearRegionPositions,this);this._regions=[]},_clearStaleRegions:function(a){var b=[];this._regions.forEach(function(c){c.code.regionPositions&&c.code.regionPositions.length&&!a.some(f.hitch(r,"regionStartNodesMatch",c))&&(b.push(c),this._clearRegionPositions(c))},this);this._clearOutputsIf(function(a){return-1<
b.indexOf(a.getRegion())})},getRegions:function(a,b){return void 0===a||null===a?this._regions:this._regions.slice(a,b)},getOutputs:function(){var a=this._getOutputContainers(!1,!0);return this._getOutputsFromContainers(a)},_getOutputContainers:function(a,b){return a&&!b?this._findOutputContainersIf(function(a){return!a.getOutput().isReady()},this._HEAD,this._TAIL):b&&!a?this._findReadyOutputContainersIf(function(){return!0},this._HEAD,this._TAIL):this._findOutputContainersIf(function(){return!0},
this._HEAD,this._TAIL)},_getOutputsFromContainers:function(a){return a.map(function(a){return a.getOutput()})},getOutputsForRegion:function(a){a=this._getOutputContainersForRegion(a,!1);return this._getOutputsFromContainers(a)},_getOutputContainersForRegion:function(a,b){var c=function(b){return a===b.getRegion()};return b?this._findOutputContainersIf(c,this._HEAD,this._TAIL):this._findReadyOutputContainersIf(c,this._HEAD,this._TAIL)},setRegions:function(a){this.clearAllOutputs();this._clearAllRegions();
this._regions=a;this.onModelUpdated()},hasOutputs:function(){return this._findFirstReadyOutputContainerIf(function(){return!0},this._HEAD,this._TAIL)!==this._TAIL},getSectionRegionsFromNodeRange:function(b,c){var d=a.getLineNumberForNode(b,this._internalDocument),e=a.getLineNumberForNode(c,this._internalDocument),f=[];this._regions.some(function(a){var b=a.code.regionPositions,c=b[b.length-1].line;b[0].line>=d&&c<=e&&f.push(a);if(c>e)return!0},this);return f},onModelUpdated:function(){this._changes=
[];this._updateAllOutputsReadyPromise()},hasError:function(){return this._findFirstReadyOutputContainerIf(function(a){return a.getOutput().type===s.OUTPUT_TYPE},this._HEAD,this._TAIL)!==this._TAIL},findOutput:function(a){var b=this._findFirstReadyOutputContainerIf(function(b){return a(b.getOutput())},this._HEAD,this._TAIL);return b!==this._TAIL?b.getOutput():null},whenOutputsReady:function(a){this._hasUnresolvedOutputs()?(this._allOutputsReadyPromise||(this._allOutputsReadyPromise=new e),this._allOutputsReadyPromise.then(a)):
a()},_updateAllOutputsReadyPromise:function(){this._allOutputsReadyPromise&&!this._hasUnresolvedOutputs()&&(this._allOutputsReadyPromise.resolve(),this._allOutputsReadyPromise=null)},_hasUnresolvedOutputs:function(){return 0<this._unresolvedOutputCount},getOutputsForPosition:function(a){var b=this._findReadyOutputContainersIf(function(b){b=b.getOutput().getCodeLinePositions();return a.line===b[b.length-1].line},this._HEAD,this._TAIL);return this._getOutputsFromContainers(b)},_findFirstReadyOutputContainerIf:function(a,
b,c){this._assertHeadNotEqualToTail(b,c);for(b=b.next();b!==c;){if(b.getOutput().isReady()&&a(b))return b;b=b.next()}return c},_findFirstOutputContainerIf:function(a,b,c){this._assertHeadNotEqualToTail(b,c);for(b=b.next();b!==c;){if(a(b))return b;b=b.next()}return c},_findReadyOutputContainersIf:function(a,b,c){this._assertHeadNotEqualToTail(b,c);var d=[];for(b=b.next();b!==c;)b.getOutput().isReady()&&a(b)&&d.push(b),b=b.next();return d},_findOutputContainersIf:function(a,b,c){this._assertHeadNotEqualToTail(b,
c);var d=[];for(b=b.next();b!==c;)a(b)&&d.push(b),b=b.next();return d},_findOutputContainerForOutput:function(a){var b=this._findFirstOutputContainerIf(function(b){return a===b.getOutput()},this._HEAD,this._TAIL);return b===this._TAIL?null:b},_getOutputContainerListForDocumentRange:function(a){var b={head:null,tail:null},c=a.getStartPosition().getLine(),d=this._findFirstOutputContainerIf(f.hitch(this,function(a){return this._getPrimaryLineForContainer(a)>=c}),this._HEAD,this._TAIL);b.head=d.previous();
var e=a.getEndPosition().getLine();b.tail=this._findFirstOutputContainerIf(f.hitch(this,function(a){return this._getPrimaryLineForContainer(a)>e}),b.head,this._TAIL);return b},_getPrimaryLineForContainer:function(a){a=a.getOutput().codeLinePositions;return a[a.length-1].getLine()},addRegionForPosition:function(a){var b=this._createNewRegionTemplate(),c=this._document.createLinePosition(a.node,!1);b.code.regionPositions=[c];b.code.regionString=a.node.getText();a=this._getNewRegionNumberForPosition(a);
this._regions.splice(a,0,b);this._regions.forEach(function(a,b){a.code.regionNumber=b});this._updateOldRegions();this.onModelUpdated();return a},_getNewRegionNumberForPosition:function(a){for(var b=0;b<this._regions.length;b++)if(a.line<this._regions[b].code.regionPositions[0].line)return b;return this._regions.length},_createNewRegionTemplate:function(){return new n({regionNumber:null,regionPositions:null,regionString:null,sectionBreak:null,endOfSection:null,sectionNumber:null},m.generateUuid())},
_getIndexInRegion:function(a){var b=0,c=a.getRegion();for(a=a.previous();a!==this._HEAD&&a.getRegion()===c;)b+=a.getOutput().isReady()?1:0,a=a.previous();return b},_assertHeadNotEqualToTail:function(a,b){if(a===b)throw Error("Head should not be equal to tail.");}})})},"MW/rtc/plugins/embeddedoutputs/model/OutputContainer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred"],function(h,f,g){return h(null,{constructor:function(e,d){this._output=e;this._containerToReplace=this._beingReplacedBy=
this._deferredModelChange=null;this._region=d;this._outputErrorCallback=this._cancelCallback=this._thenCallback=this._previous=this._next=null;e&&!e.isReady()&&(this._deferredModelChange=new g,this._deferredModelChange.then(f.hitch(this,"_handleResolve"),f.hitch(this,"_handleCancel")),e.getReadyPromise().then(f.hitch(this,"resolve"),f.hitch(this,"_handleOutputError")))},destroy:function(){this.cancel();this._deferredModelChange=null},_handleResolve:function(){this._thenCallback&&(this._thenCallback(),
this._deferredModelChange=null)},_handleCancel:function(){this._cancelCallback&&(this._cancelCallback(),this._deferredModelChange=null)},_handleOutputError:function(){this._outputErrorCallback&&(this._outputErrorCallback(),this._deferredModelChange=null)},getOutput:function(){return this._output},getRegion:function(){return this._region},setRegion:function(e){if(!e)throw Error("Tried to set an undefined region");this._region=e},next:function(){return this._next},setNext:function(e){this._next=e},
previous:function(){return this._previous},setPrevious:function(e){this._previous=e},getBeingReplacedBy:function(){return this._beingReplacedBy},setBeingReplacedBy:function(e){this._beingReplacedBy=e},getContainerToReplace:function(){return this._containerToReplace},setContainerToReplace:function(e){this._containerToReplace=e},cancel:function(e){this._deferredModelChange&&(this._outputErrorCallback=null,this._deferredModelChange.cancel(e),this._deferredModelChange=null)},isResolved:function(){return this._deferredModelChange?
this._deferredModelChange.isResolved():!0},then:function(e,d,c){this._deferredModelChange?(this._thenCallback=e,this._cancelCallback=d,this._outputErrorCallback=c):e()},resolve:function(e){this._deferredModelChange&&this._deferredModelChange.resolve(e)}})})},"MW/rtc/plugins/embeddedoutputs/model/RegionParser":function(){define(["dojo/_base/declare","MW/rtc/model/importers/MATLAB_PEG","MW/rtc/model/CodeUtilities","MW/rtc/model/NodeUtilities"],function(h,f,g,e){return h(null,{constructor:function(d,
c){this._document=d;this._executableCodeConverter=c;this._parser=new f},getCodeRegionsInRange:function(d,c){var b=[],a="",f=null,h=null,m="",q=!1;e.getParagraphNodesInRange(d,c).forEach(function(c){var d=this._executableCodeConverter.getEvalTextFromNode(c);if(null!==d){var e="";try{e=this._parser.classifyCode(m+d)}catch(n){}if(!q){if(e===this._parser.BLANK_OR_COMMENT&&!this._isAfterLineContinuation(a)){m="";return}if(e===this._parser.IN_BLOCK_COMMENT){m=m+d+"\n";return}}m="";0<a.length?a=a+"\n"+d:
(a=d,f=c);h=c;c="";try{c=this._parser.classifyCode(a)}catch(u){}d=c===this._parser.FUNCTION;c===this._parser.COMPLETE_NONTRIVIAL_COMMAND||d?(c=g.getCodePositionsInNodeRange(this._document,f,h),b.push({regionString:a,regionPositions:c}),a="",q=!1):q=!0}},this);if(0<a.length){var n=g.getCodePositionsInNodeRange(this._document,f,h);b.push({regionString:a,regionPositions:n})}return{executableRegions:b}},_isAfterLineContinuation:function(d){if(0===d.length)return!1;var c=d.lastIndexOf("\n");return-1!==
d.indexOf("...",c+1)}})})},"MW/rtc/model/importers/MATLAB_PEG":function(){define(["dojo/_base/declare","MW/rtc/model/importers/Base","MW/rtc/model/importers/MatlabRules","MW/rtc/model/importers/PEG"],function(h,f,g,e){return h(f,{constructor:function(){this._inScript=!1},makeSymbolMap:function(){var d={},c="alpha beta gamma delta epsilon zeta eta theta iota kappa lambda mu nu xi omicron pi rho sigma tau upsilon phi chi psi omega varepsilon vartheta varomega Gamma Delta Theta Lambda Eta Pi Sigma Phi Psi Omega".split(" "),
b;for(b=0;b<c.length;b+=1)d[c[b]]=c[b];return d},makePEG:function(){return new e(g.rulenames,g.rules,0)},makeActionMap:function(){var d={},c=this.peg.names,b=[this.appendChildren],a;for(a=0;a<c.length;a+=1)d[c[a]]=b;d.S14=[this.appendAssignment];d.S14=[this.appendCmd,"if"];d.S15=[this.appendCmd,"elseif"];d.S16=[this.appendCmd,"else"];d.S17=[this.appendCmd,"switch"];d.S18=[this.appendCmd,"case"];d.S19=[this.appendCmd,"otherwise"];d.S20=[this.appendCmd,"for"];d.S21=[this.appendCmd,"parfor"];d.S22=[this.appendCmd,
"while"];d.S26=[this.appendCmd,"try"];d.S27=[this.appendCmd,"catch"];d.S33=[this.appendCmd,"!"];d.S28=[this.appendRawString,"code"];d.x5=[this.appendSymbol];d.x6=[this.appendSymbol];d.x7=[this.appendSymbol];d.x8=[this.appendSymbol];d.X10=[this.appendSymbol];d.x11=[this.appendSymbol];d.X13=[this.appendSymbol];d.X14=[this.appendProd];d.X15=[this.appendProdOp];d.X17=[this.appendSymbol];d.X18=[this.appendPostfix];d.X19=d.X17;d.X20=d.X17;d.X21=[this.appendSymbol];d.x23=[this.appendParenExpr];d.X25=[this.appendRawString,
"number"];d.X28=[this.appendVariable];d.X29=[this.appendExprList];d.X39=[this.appendMatrix];d.X44=d.X39;d.X45=[this.appendRawString,"code"];d.X46=[this.appendID];d.SO2=[this.appendSymMatrix];return d},parseSymOutput:function(d){this.peg||this.initMaps();var c=this.peg,b=c.root;c.root=1;d=c.parse(d);c.root=b;return d},COMPLETE_NONTRIVIAL_COMMAND:1,BLANK_OR_COMMENT:2,IN_BLOCK_COMMENT:3,SYNTAX_ERROR:4,FUNCTION:5,classifyCode:function(d){this.peg||this.initMaps();d=d.trim();d=this.peg.parse(d);if(!d.tree)return this.SYNTAX_ERROR;
d=d.tree;var c=this.peg.names;return this._hasOpenBlockComment(d,c)?this.IN_BLOCK_COMMENT:this._hasFunctions(d,c)?this.FUNCTION:this._hasBadEnds(d,c)?this.SYNTAX_ERROR:this._trivialStmts(d,c)?this.BLANK_OR_COMMENT:this.COMPLETE_NONTRIVIAL_COMMAND},isIncompleteCommand:function(d){return this.classifyCode(d)>this.BLANK_OR_COMMENT},_hasOpenBlockComment:function(d,c){if(0<d.children.length){var b=d.children[0];if("BC1"===c[b.name]&&1<b.children.length&&(b=b.children,"B1"===c[b[b.length-2].name]))return!0}return!1},
_hasBadEnds:function(d,c){return this._hasNodes(d,c,["B1","B2","B4"])},_hasFunctions:function(d,c){return this._hasNodes(d,c,["FN1","FN2"])},_hasNodes:function(d,c,b){var a;a=function(d){var e=c[d.name],f=!1;b.forEach(function(a){a===e&&(f=!0)});if(f)return!0;d=d.children;var g;for(g=0;g<d.length;g+=1)if(a(d[g]))return!0;return!1};return a(d)},_trivialStmts:function(d,c){var b=d.children;if(2>b.length)return!1;for(var a=1,e=b[a];a<b.length-1&&"LineC"===c[e.name];)a+=1,e=b[a];return"S1"===c[e.name]&&
(b=e.children,0===b.length)?!0:!1},bubbleWraps:function(d){var c=!1;if(d){"LW"===this.peg.names[d.name]&&(c=!0);var b=d.children,a;for(a=0;a<b.length;a+=1)c=c||this.bubbleWraps(b[a]);d.wrap=c}return c},appendCmd:function(d,c){this.startSubRow();this.pushText(c,"code");this.appendChildren(d);this.endSubRow()},appendAssignment:function(d){this.startSubRow();this.append(d.children[0]);this.pushText("\x3d","symbol");this.append(d.children[1]);this.endSubRow()},fillLineWrap:function(d,c){alert("line wrap not done")},
appendSep:function(d){var c=this.slice(d);if(0<c.length){var b=c.charAt(0);if(", "===b||";"===b)this.pushText(c,"code");else if(b===String.fromCharCode(10)||b===String.fromCharCode(13)||"%"===b){d=d.children;var a=function(a){return this.makeRow()};"%"!==b&&(this.row=a(this.row));if(0<d.length){for(b=0;b<d.length;b+=1)c=this.slice(d[b]),this.pushText(c,"code"),b<d.length-1&&(this.row=a(this.row));this.row=a(this.row)}}else alert(b+" not done")}},appendExprList:function(d){d=d.children;var c;for(c=
0;c<d.length;c+=1){this.append(d[c]);var b=this.name(d[c]);c!==d.length-1&&"LW"!==b&&this.pushText(", ","code")}},appendParenExpr:function(d){var c=this.makeFenced();this.push(c);this.fillRow(d.children[0],c.children[0])},fillRowNoFence:function(d,c){"x23"===this.name(d)?this.fillRow(d.children[0],c):this.fillRow(d,c)},appendProd:function(d){var c=d.children;3!==c.length?this.appendChildren(d):"/"===this.slice(c[1])&&!this._inScript?(d=this.makeFraction(),this.push(d),this.fillRowNoFence(c[0],d.children[0]),
this.fillRowNoFence(c[2],d.children[1])):this.appendChildren(d)},appendPostfix:function(d){var c=d.children;if(3!==c.length)this.appendChildren(d);else if("^"===this.slice(c[1])||this._inScript){d=this.makeScript();this.push(d);this.fillRow(c[0],d.children[0]);var b=this._inScript;this._inScript=!0;this.fillRowNoFence(c[2],d.children[2]);this._inScript=b}else this.appendChildren(d)},appendSymMatrix:function(d){1===d.children.length&&1===d.children[0].children.length?this.append(d.children[0].children[0]):
this.appendMatrix(d)},appendMatrix:function(d){d="SO2"===this.name(d)?d.children:d.children[0].children;var c=(d.length+1)/2,b=0,a;for(a=0;a<d.length;a+=2)b=Math.max(b,d[a].children.length);c=this.makeMatrix(c,b);for(a=0;a<d.length;a+=2){var e=d[a].children,f;for(f=0;f<b;f+=1){var g=this.makeRow();c.children.push(g);this.pushRow(g);f<e.length&&(this.append(e[f]),this.validateRow());this.popRow()}}this.push(c)},lookupSymbol:function(d){return this.symbolMap[d]?(this.pushText(d,"symbol"),!0):!1},appendID:function(d){d=
this.slice(d);this.lookupSymbol(d)||this.pushText(d,"id")},appendSqrt:function(d){var c=this.makeRadical();this.push(c);this.fillRow(d.children[2],c.children[0])},appendSpecialFunctionCall:function(d){var c=d.children;return 3===c.length&&"X33"===this.name(c[1])&&"sqrt"===this.slice(c[0])?(this.appendSqrt(d),!0):!1},appendVariable:function(d){this.appendSpecialFunctionCall(d)||(1<d.children.length?(this.startSubRow(),this.appendVariableRow(d),this.endSubRow()):this.appendVariableRow(d))},appendVariableRow:function(d){d=
d.children;this.append(d[0]);var c;for(c=1;c<d.length;){var b=d[c];c+=1;switch(this.name(b)){case "X33":this.pushDelim("(");c<d.length&&this.append(d[c]);this.pushDelim(")");c+=1;break;case "X36":this.pushDelim("{");this.append(d[c]);this.pushDelim("}");c+=1;break;case "X37":this.pushText(".","code");this.append(d[c]);c+=1;break;case "X35":alert("DotLRB not done");break;case "X38":alert("At not done")}}},appendProdOp:function(d){d=this.slice(d);"*"===d?this.pushText("ImplicitMult","symbol"):this.pushText(d,
"code")},fillMulti:function(d,c,b){}})})},"MW/rtc/model/importers/Base":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){this.row=this.symbolMap=this.actionMap=this.peg=null;this.rows=[];this.str=""},initMaps:function(){this.peg=this.makePEG();this.actionMap=this.makeActionMap();this.symbolMap=this.makeSymbolMap()},parse:function(f){this.peg||this.initMaps();return this.peg.parse(f)},pushRow:function(f){this.rows.push(this.row);this.row=f},popRow:function(){this.validateRow();
this.row=this.rows.pop()},fillRow:function(f,g){this.pushRow(g);this.append(f);this.popRow()},startSubRow:function(){var f=this.row;this.pushRow(this.makeRow());f.children.push(this.row)},endSubRow:function(){this.popRow()},makeEquation:function(f){var g=this.makeRoot();f&&(this.str=f.str,this.fillRow(f.tree,g.children[0]));return g},makeRoot:function(){return{className:"MathRoot",children:[this.makeRow()]}},makeRow:function(){return{className:"MathRow",children:[]}},makeDelim:function(f){return{className:"MathDelimiter",
symbol:f}},makeText:function(f,g){return"symbol"===g?{className:"MathText",text:" ",symbolName:f,kind:g}:{className:"MathText",text:f,kind:g}},makeSymbol:function(f){return{className:"MathText",text:" ",symbolName:f,kind:"symbol"}},makeFraction:function(f){var g={className:"MathFraction",children:[this.makeRow(),this.makeRow()]};!0===f&&(g.bevelled=f);return g},makeIntegral:function(){return{className:"MathIntegral",children:[this.makeRow(),this.makeRow(),this.makeRow(),this.makeRow()]}},makeRadical:function(){return{className:"MathRadical",
children:[this.makeRow(),this.makeRow()]}},makeFenced:function(f,g){return{className:"MathFenced",open:f,close:g,children:[this.makeRow()]}},makeScript:function(){return{className:"MathScript",children:[this.makeRow(),this.makeRow(),this.makeRow()]}},makeMatrix:function(f,g){return{className:"MathMatrix",rows:f,cols:g,children:[]}},name:function(f){return this.peg.names[f.name]},slice:function(f){return this.str.slice(f.start,f.end)},push:function(f){this.row.children.push(f);return f},pushText:function(f,
g){var e=this.makeText(f,g);return this.push(e)},pushDelim:function(f){return this.push(this.makeDelim(f))},notLeafNode:function(f){return void 0===f||"MathText"!==f.className&&"MathDelimiter"!==f.className&&"MathRow"!==f.className},validateRow:function(){},append:function(f){var g=this.actionMap[this.peg.names[f.name]];1===g.length?g[0].call(this,f):2===g.length?g[0].call(this,f,g[1]):g[0].call(this,f,g[1],g[2])},mapSymbolName:function(f){var g=this.symbolMap[f];return g?g:f},appendSymbol:function(f){f=
this.slice(f).trim();this.pushText(this.mapSymbolName(f),"symbol")},appendRawString:function(f,g){this.pushText(this.slice(f),g)},simplifyLastItem:function(f){f=f.children;if(0!==f.length){var g=f[f.length-1];"MathRow"===g.className&&(g=g.children,1===g.length?(f.pop(),f.push(g.pop())):0===g.length&&f.pop())}},appendChildren:function(f){var g=f.children;if(0===g.length&&f.start<f.end)this.pushText(this.slice(f),"code");else if(1===g.length)this.append(g[0]);else if(0<g.length){this.startSubRow();
for(f=0;f<g.length;f+=1)this.append(g[f]);this.endSubRow();this.simplifyLastItem(this.row)}}})})},"MW/rtc/model/importers/MatlabRules":function(){define([],function(){return{rulenames:"F SO1 SO2 SO3 B1 B2 B3 B4 B5 B6 w ws s LW E1 E2 E3 E4 E5 E6 E7 C1 C2 C3 C4 BC1 BC2 BC3 BC4 LineC WhiteLine FN1 FN2 FN3 FN4 FN5 FN6 FN7 FN8 FN9 S1 SC S4 S5 S7 S8 S9 S10 S11 S12 S13 IG S14 S15 S16 S17 S18 S19 S20 s20 S21 s21 S22 S23 S24 S25 S26 S27 S28 D1 D2 D3 D3a D4 D5 D6 D7 D6a D8 D9 S29 S30 S31 S32 S33 S34 X1 X2 X3 X4 X5 x5 X6 x6 X7 x7 X8 x8 X9 X10 X11 x11 X12 X13 X14 X15 X16 XX1 X17 X18 X19 X20 X21 X22 X23 x23 X24 X25 X26 X27 X28 X29 X30 X31 X32 X33 X34 X35 X36 X37 X38 X39 X40 X41 X42 X43 X44 X45 X45a X45b X46 X47 X48 E0 Y1 Y2 Y3 Y4 Y5 Y6 Y7 Y8 Y9 Y10 Y11 Y12 YY1 Y13 Y14 Y15 Y16 T1 T2 T3 T4 T5 T6 T7 T8 T9 T10 T11 T12 T13 T14 T15 T16 T17 T18 T19 T20 T21 T22 T23 T24 T25 T26 T27".split(" "),
rules:[[0,2,22,10,35,0,2,32,11,21,0,2,162,10,11,2,24,10,7,0,2,32,4,1,11,5,2,41,1,10,9,2,24,10,5,2,19,1,13,0],[0,2,12,10,16,2,3,10,12,2,24,10,8,2,12,10,4,26,1,13,0],[9,0,0,2,12,10,18,2,4,10,14,2,12,10,10,0,2,136,11,4,26,1,1,5,-21,13,2],[0,0,3,1,91,10,24,2,88,10,20,0,0,3,1,44,10,5,2,88,1,6,-9,10,6,3,1,93,1,11,5,2,88,1,13,2],[14,13,2],[14,13,2],[14,13,2],[14,13,2],[14,13,2],[14,13,2],[16,2,32,32,9,9],[0,2,11,6,-2],[0,0,16,2,32,32,9,9,6,-6,10,8,0,2,14,6,-2,1],[0,3,3,46,46,46,10,19,2,15,10,15,0,2,16,11,
5,2,6,1,10,5,2,12,1,13,2],[0,17,1,10,13,6,-4,13,0],[0,0,16,1,10,12,11,17,0,16,1,13,13,10,9,0,16,1,10,10,4,1,1,10,5,2,23,1,13,0],[0,2,16,11,4,26,1,13,0],[0,2,15,10,5,2,17,1,13,0],[26,13,0],[0,16,1,10,12,11,17,0,16,1,13,13,10,9,0,16,1,10,10,4,1,1,13,0],[0,16,1,26,26,10,7,0,21,6,-1,1,13,0],[0,2,12,10,32,0,0,0,2,26,11,13,2,30,11,9,2,16,11,5,2,21,1,10,5,2,12,1,6,-22,10,5,2,12,1,13,0],[0,0,0,2,12,10,5,2,26,1,6,-8,10,5,2,12,1,13,0],[0,2,12,10,19,0,0,0,2,30,11,5,2,17,1,10,5,2,22,1,4,1,13,0],[0,0,2,30,11,
5,2,16,1,10,5,2,22,1,13,0],[0,2,28,10,36,2,31,10,32,0,0,2,12,10,5,2,27,1,6,-8,10,19,2,12,10,15,0,2,29,11,5,2,5,1,10,5,2,18,1,13,0],[0,2,26,11,19,0,0,2,29,7,10,11,0,2,19,7,10,5,2,18,1,1,13,0],[3,2,37,123,13,0],[3,2,37,125,13,0],[0,3,1,37,10,5,2,18,1,13,2],[0,0,16,2,32,32,9,9,6,-6,10,5,2,17,1,13,0],[0,2,33,10,14,0,0,2,24,10,5,2,33,1,6,-8,1,13,0],[0,3,8,102,117,110,99,116,105,111,110,10,31,2,144,10,27,2,13,10,23,2,35,10,19,2,39,10,15,2,12,10,11,0,2,34,11,5,2,5,1,1,13,0],[2,117,13,2],[0,0,2,36,4,10,39,
0,2,125,11,5,2,117,1,10,29,2,13,10,25,0,2,38,4,10,19,2,12,10,15,0,16,2,44,44,59,59,4,10,5,2,24,1,13,0],[0,0,2,37,11,5,2,141,1,10,14,2,13,10,10,3,1,61,10,5,2,13,1,13,2],[0,3,1,91,10,50,2,13,10,46,0,2,141,4,10,40,2,13,10,36,0,0,0,3,1,44,4,10,13,2,13,10,9,2,141,10,5,2,13,1,6,-19,10,12,0,3,1,93,11,5,2,5,1,1,13,2],[0,3,1,40,10,60,2,13,10,56,0,0,2,141,11,5,2,52,1,4,10,44,2,13,10,40,0,0,3,1,44,10,19,2,13,10,15,0,2,141,11,5,2,52,1,10,5,2,13,1,6,-23,10,12,0,3,1,41,11,5,2,5,1,1,13,2],[2,40,13,2],[0,2,13,10,
24,0,0,0,2,33,11,9,2,45,11,5,2,30,1,10,5,2,13,1,6,-18,1,13,0],[0,2,13,10,14,0,0,2,42,10,5,2,13,1,6,-8,1,13,0],[0,2,45,11,5,2,30,1,13,0],[0,0,16,2,44,44,59,59,10,5,2,24,1,11,5,2,25,1,13,2],[0,2,43,11,4,26,1],[0,2,43,11,5,2,46,1,13,0],[0,2,69,11,5,2,47,1],[0,0,2,51,10,9,2,13,10,5,2,44,1,11,40,0,2,48,10,5,2,44,1,11,30,0,0,0,3,3,101,110,100,10,5,2,144,1,7,10,13,2,88,10,9,2,13,10,5,2,44,1,1],[0,2,49,10,22,2,13,10,18,3,1,61,10,13,2,13,10,9,2,87,10,5,2,13,1,13,0],[0,2,121,11,5,2,50,1,13,0],[0,2,127,10,76,
2,13,10,72,0,2,121,11,5,2,52,1,10,62,0,0,2,13,10,22,0,3,1,44,4,10,15,2,13,10,11,0,2,121,11,5,2,52,1,1,6,-25,10,32,2,13,10,28,0,3,1,93,11,21,0,3,1,44,10,10,2,13,10,6,3,1,93,1,11,5,2,5,1,1,13,0],[0,2,53,11,45,2,56,11,41,2,59,11,37,2,63,11,33,2,83,11,29,2,84,11,25,2,64,11,21,2,85,11,17,2,67,11,13,2,86,11,9,2,81,11,5,2,60,1,13,0],[3,1,126,13,0],[0,3,2,105,102,10,36,2,144,10,32,2,87,10,28,2,41,10,24,0,2,54,6,-2,10,17,0,2,55,4,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,6,101,108,115,101,105,102,10,13,2,144,
10,9,2,87,10,5,2,41,1,13,0],[0,3,4,101,108,115,101,10,9,2,144,10,5,2,41,1,13,0],[0,3,6,115,119,105,116,99,104,10,47,2,144,10,43,2,87,10,39,0,2,43,6,-2,10,32,2,24,10,28,2,12,10,24,0,2,57,6,-2,10,17,0,2,58,4,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,4,99,97,115,101,10,17,2,144,10,13,2,87,10,9,2,43,10,5,2,41,1,13,0],[0,3,9,111,116,104,101,114,119,105,115,101,10,9,2,144,10,5,2,41,1,13,0],[0,3,3,102,111,114,10,27,2,144,10,23,2,13,10,19,2,61,10,15,2,41,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,6,112,97,114,102,
111,114,10,27,2,144,10,23,2,13,10,19,2,62,10,15,2,41,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,0,2,141,10,14,2,13,10,10,3,1,61,10,5,2,87,1,11,34,0,3,1,40,10,27,2,13,10,23,2,141,10,19,2,13,10,15,3,1,61,10,10,2,87,10,6,3,1,41,1,1,13,0],[0,0,2,141,10,14,2,13,10,10,3,1,61,10,5,2,87,1,11,51,0,3,1,40,10,44,2,13,10,40,2,141,10,36,2,13,10,32,3,1,61,10,27,2,87,10,23,0,0,3,1,44,10,9,2,13,10,5,2,122,1,4,10,6,3,1,41,1,1,13,0],[0,3,5,119,104,105,108,101,10,23,2,144,10,19,2,87,10,15,2,41,10,11,0,2,117,11,5,2,5,1,1,13,
0],[0,0,2,65,11,5,2,66,1,10,15,9,0,0,2,13,10,5,2,141,1,5,-8,1,13,0],[0,3,6,103,108,111,98,97,108,10,5,2,144,1,13,0],[0,3,10,112,101,114,115,105,115,116,101,110,116,10,5,2,144,1,13,0],[0,3,3,116,114,121,10,25,2,144,10,21,2,41,10,17,0,2,68,4,10,11,0,2,117,11,5,2,5,1,1,13,0],[0,3,5,99,97,116,99,104,10,29,2,144,10,25,0,0,2,12,10,13,2,141,10,9,2,13,10,5,2,43,1,4,10,5,2,41,1,13,0],[0,2,79,10,17,2,70,10,13,2,75,10,9,2,13,10,5,2,44,1,13,0],[0,9,0,2,11,5,-2,10,7,0,2,71,7,1,13,0],[0,16,7,40,40,41,41,44,44,
59,59,37,37,123,123,125,125,11,36,0,16,1,61,61,10,9,0,16,1,61,61,7,1,11,20,2,20,11,16,3,3,46,46,46,11,9,2,72,11,5,2,73,1,13,0],[0,0,3,1,46,4,10,25,16,8,43,43,45,45,42,42,47,47,92,92,39,39,40,40,94,94,10,5,2,74,1,13,0],[0,0,2,100,11,27,3,2,38,38,11,21,3,2,124,124,11,15,16,5,38,38,124,124,94,94,64,64,58,58,1,10,5,2,74,1,13,0],[0,9,0,2,11,5,-2,10,37,0,3,3,46,46,46,11,28,0,3,1,46,10,7,16,1,48,57,1,11,15,16,5,97,122,65,90,48,57,95,95,39,39,1,1,13,0],[9,0,0,0,2,138,10,5,2,13,1,11,11,0,2,76,10,5,2,13,1,
1,5,-20,13,0],[9,0,0,2,77,11,13,17,4,44,44,59,59,32,32,10,13,1,5,-16,13,0],[0,16,3,40,40,123,123,91,91,10,17,2,78,10,13,0,16,3,41,41,125,125,93,93,4,1,13,2],[9,0,0,2,77,11,30,0,3,3,46,46,46,10,5,2,18,1,11,17,17,6,41,41,125,125,93,93,59,59,37,37,10,13,1,5,-33,13,0],[0,2,143,18,2,2,80,19,13,2],[0,3,2,105,102,11,244,3,3,102,111,114,11,237,3,3,101,110,100,11,230,3,3,116,114,121,11,223,3,4,99,97,115,101,11,215,3,6,101,108,115,101,105,102,11,205,3,4,115,112,109,100,11,197,3,5,99,97,116,99,104,11,188,3,
5,119,104,105,108,101,11,179,3,5,98,114,101,97,107,11,170,3,4,101,108,115,101,11,162,3,6,115,119,105,116,99,104,11,152,3,6,103,108,111,98,97,108,11,142,3,6,114,101,116,117,114,110,11,132,3,6,112,97,114,102,111,114,11,122,3,8,102,117,110,99,116,105,111,110,11,110,3,8,99,111,110,116,105,110,117,101,11,98,3,8,99,108,97,115,115,100,101,102,11,86,3,9,111,116,104,101,114,119,105,115,101,11,73,3,10,112,101,114,115,105,115,116,101,110,116,11,59,3,2,112,105,11,53,3,3,101,112,115,11,46,3,3,110,97,110,11,39,
3,3,78,97,78,11,32,3,3,105,110,102,11,25,3,3,73,110,102,11,18,3,1,105,11,13,3,1,106,11,8,3,3,97,110,115,1,13,0],[0,2,82,10,30,2,13,10,26,0,0,2,126,10,10,2,122,10,6,3,1,41,1,4,10,9,2,41,10,5,2,117,1,13,0],[0,3,4,115,112,109,100,10,5,2,144,1,13,0],[0,3,5,98,114,101,97,107,10,5,2,144,1,13,0],[0,3,6,114,101,116,117,114,110,10,5,2,144,1,13,0],[0,3,1,33,10,5,2,15,1,13,0],[0,3,8,99,111,110,116,105,110,117,101,10,5,2,144,1,13,0],[0,2,13,10,11,0,2,89,4,10,5,2,13,1,13,0],[0,2,13,10,9,2,89,10,5,2,13,1,13,0],
[0,0,2,131,10,31,2,13,10,27,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,87,1,11,5,2,91,1,13,0],[0,0,0,2,141,11,5,2,52,1,4,10,37,2,13,10,33,0,0,3,1,44,10,23,2,13,10,19,0,2,141,11,9,2,52,11,5,2,9,1,10,5,2,13,1,6,-27,1,13,0],[0,2,93,10,24,0,0,2,92,10,15,2,13,10,11,0,2,93,11,5,2,8,1,1,6,-18,1,13,0],[3,2,124,124,13,0],[0,2,95,10,24,0,0,2,94,10,15,2,13,10,11,0,2,95,11,5,2,8,1,1,6,-18,1,13,0],[3,2,38,38,13,0],[0,2,97,10,24,0,0,2,96,10,15,2,13,10,11,0,2,97,11,5,2,8,1,1,6,-18,1,13,0],[0,3,1,
124,10,8,0,3,1,124,7,1,13,0],[0,2,99,10,24,0,0,2,98,10,15,2,13,10,11,0,2,99,11,5,2,8,1,1,6,-18,1,13,0],[0,3,1,38,10,8,0,3,1,38,7,1,13,0],[0,2,101,10,18,0,0,2,100,10,9,2,13,10,5,2,101,1,6,-12,1,13,0],[0,0,16,4,61,61,62,62,60,60,126,126,10,7,16,1,61,61,1,11,9,16,2,60,60,62,62,1,13,0],[0,2,103,10,24,0,0,2,102,10,15,2,13,10,11,0,2,103,11,5,2,8,1,1,6,-18,1,13,0],[3,1,58,13,0],[0,2,105,10,32,2,13,10,28,0,0,2,104,10,19,2,13,10,15,0,2,105,11,5,2,8,1,10,5,2,13,1,6,-22,1,13,0],[16,2,43,43,45,45,13,0],[0,2,
107,10,22,0,0,2,13,10,13,2,106,10,9,2,13,10,5,2,107,1,6,-16,1,13,0],[0,0,3,1,46,4,10,11,16,3,42,42,47,47,92,92,1,13,0],[0,0,0,0,2,109,10,5,2,13,1,6,-8,10,5,2,110,1,11,5,2,108,1,13,0],[0,2,131,10,39,2,13,10,35,0,0,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,87,1,11,5,2,125,1,1,13,0],[16,3,126,126,43,43,45,45,13,0],[0,2,114,10,44,0,0,2,111,11,35,0,2,13,10,5,2,112,1,11,25,0,2,13,10,19,2,113,10,15,2,13,10,11,0,2,107,11,5,2,8,1,1,1,6,-38,1,13,0],[16,1,39,39,13,0],[3,2,46,39,13,0],[0,0,3,
1,46,4,10,6,3,1,94,1,13,0],[0,2,115,11,13,0,16,1,63,63,10,5,2,125,1,1,13,0],[0,2,118,11,25,2,116,11,21,2,121,11,17,2,132,11,13,2,137,11,9,2,138,11,5,2,117,1,13,0],[0,3,1,40,10,16,2,88,10,12,0,3,1,41,11,5,2,5,1,1,13,2],[0,3,3,101,110,100,10,5,2,144,1,13,0],[0,0,9,0,16,1,48,57,5,-4,10,48,0,0,16,1,46,46,10,26,0,16,5,42,42,47,47,92,92,94,94,39,39,7,10,10,0,16,1,48,57,6,-4,1,4,10,13,0,2,119,4,10,7,0,2,120,4,1,11,47,0,16,1,46,46,10,39,0,16,5,42,42,47,47,92,92,94,94,39,39,7,10,23,9,0,16,1,48,57,5,-4,10,
13,0,2,119,4,10,7,0,2,120,4,1,1,13,2],[0,16,4,101,101,69,69,100,100,68,68,10,21,0,16,2,43,43,45,45,4,10,11,9,0,16,1,48,57,5,-4,1,13,0],[0,16,2,105,105,106,106,10,5,2,144,1,13,0],[0,2,141,10,145,2,13,10,141,0,0,0,2,130,10,13,2,13,10,9,2,143,10,5,2,13,1,11,118,0,2,129,10,20,2,122,10,16,0,3,1,125,11,5,2,5,1,10,5,2,13,1,11,93,0,2,126,10,20,2,124,10,16,0,3,1,41,11,5,2,5,1,10,5,2,13,1,11,68,0,2,128,10,20,2,88,10,16,0,3,1,41,11,5,2,5,1,10,5,2,13,1,11,43,0,2,131,10,37,2,13,10,33,2,125,10,29,0,0,3,1,40,10,
16,2,124,10,12,0,3,1,41,11,5,2,5,1,1,4,10,5,2,13,1,1,6,-135,1,13,0],[0,2,13,10,47,0,2,123,11,5,2,88,1,10,37,2,13,10,33,0,0,3,1,44,10,23,2,13,10,19,0,2,123,11,9,2,88,11,5,2,8,1,10,5,2,13,1,6,-27,1,13,2],[3,1,58,13,0],[0,2,122,11,5,2,13,1,13,0],[0,2,141,10,14,0,0,2,130,10,5,2,141,1,6,-8,1,13,0],[3,1,40,13,0],[3,1,91,13,0],[3,2,46,40,13,0],[3,1,123,13,0],[3,1,46,13,0],[3,1,64,13,0],[0,3,1,91,10,24,2,13,10,20,2,133,10,16,2,13,10,12,0,3,1,93,11,5,2,5,1,1,13,2],[0,2,134,10,32,0,0,2,13,10,6,3,1,44,1,6,-9,
10,18,0,0,2,13,10,9,2,135,10,5,2,134,1,6,-12,1,13,2],[0,0,0,2,13,10,6,3,1,44,1,6,-9,10,52,2,13,10,48,0,2,145,4,10,42,0,0,0,0,2,13,10,6,3,1,44,1,6,-9,10,9,2,13,10,5,2,145,1,6,-22,10,15,0,0,2,13,10,6,3,1,44,1,6,-9,1,13,2],[9,0,0,2,13,10,5,2,136,1,5,-8,13,2],[0,3,1,59,11,9,2,16,11,5,2,30,1,13,0],[0,3,1,123,10,18,2,13,10,14,2,133,10,10,2,13,10,6,3,1,125,1,13,2],[0,2,139,11,5,2,140,1,13,0],[0,3,1,39,10,31,0,0,3,2,39,39,11,9,17,2,10,13,39,39,1,6,-14,10,12,0,3,1,39,11,5,2,10,1,1,13,2],[0,3,1,34,10,31,0,
0,3,2,34,34,11,9,17,2,10,13,34,34,1,6,-14,10,12,0,3,1,34,11,5,2,10,1,1,13,2],[0,2,143,18,2,2,142,19,13,2],[0,3,2,105,102,11,186,3,3,102,111,114,11,179,3,3,101,110,100,11,172,3,3,116,114,121,11,165,3,4,99,97,115,101,11,157,3,6,101,108,115,101,105,102,11,147,3,4,115,112,109,100,11,139,3,5,99,97,116,99,104,11,130,3,5,119,104,105,108,101,11,121,3,5,98,114,101,97,107,11,112,3,4,101,108,115,101,11,104,3,6,115,119,105,116,99,104,11,94,3,6,103,108,111,98,97,108,11,84,3,6,114,101,116,117,114,110,11,74,3,6,
112,97,114,102,111,114,11,64,3,8,102,117,110,99,116,105,111,110,11,52,3,8,99,111,110,116,105,110,117,101,11,40,3,8,99,108,97,115,115,100,101,102,11,28,3,9,111,116,104,101,114,119,105,115,101,11,15,3,10,112,101,114,115,105,115,116,101,110,116,1,13,0],[0,16,2,97,122,65,90,10,16,0,16,4,97,122,65,90,95,95,48,57,6,-10,1,13,0],[0,16,4,97,122,65,90,95,95,48,57,7],[2,146,13,0],[0,0,2,131,10,31,2,13,10,27,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,145,1,11,5,2,147,1,13,0],[0,2,148,10,22,0,
0,2,13,10,13,2,92,10,9,2,13,10,5,2,148,1,6,-16,1,13,0],[0,2,149,10,22,0,0,2,13,10,13,2,94,10,9,2,13,10,5,2,149,1,6,-16,1,13,0],[0,2,150,10,22,0,0,2,13,10,13,2,96,10,9,2,13,10,5,2,150,1,6,-16,1,13,0],[0,2,151,10,22,0,0,2,13,10,13,2,98,10,9,2,13,10,5,2,151,1,6,-16,1,13,0],[0,2,152,10,22,0,0,2,13,10,13,2,100,10,9,2,13,10,5,2,152,1,6,-16,1,13,0],[0,2,153,10,22,0,0,2,13,10,13,2,102,10,9,2,13,10,5,2,153,1,6,-16,1,13,0],[0,2,155,10,18,0,0,2,154,10,9,2,13,10,5,2,155,1,6,-12,1,13,0],[0,0,2,11,10,17,2,13,10,
13,2,104,10,9,2,11,10,5,2,13,1,11,5,2,104,1,13,0],[0,2,156,10,22,0,0,2,13,10,13,2,106,10,9,2,13,10,5,2,156,1,6,-16,1,13,0],[0,0,0,0,2,109,10,5,2,13,1,6,-8,10,5,2,158,1,11,5,2,157,1,13,0],[0,2,131,10,39,2,13,10,35,0,0,3,1,40,10,22,2,13,10,18,2,90,10,14,3,1,41,10,9,2,13,10,5,2,145,1,11,5,2,125,1,1,13,0],[0,2,159,10,44,0,0,2,111,11,35,0,2,13,10,5,2,112,1,11,25,0,2,13,10,19,2,113,10,15,2,13,10,11,0,2,156,11,5,2,8,1,1,1,6,-38,1,13,0],[0,2,160,11,13,0,16,1,63,63,10,5,2,125,1,1,13,0],[0,2,118,11,25,2,116,
11,21,2,161,11,17,2,132,11,13,2,137,11,9,2,138,11,5,2,117,1,13,0],[0,2,141,10,137,0,0,0,2,13,10,13,2,130,10,9,2,13,10,5,2,143,1,11,114,0,2,129,10,16,2,122,10,12,0,3,1,125,11,5,2,5,1,1,11,93,0,2,126,10,16,2,124,10,12,0,3,1,41,11,5,2,5,1,1,11,72,0,2,13,10,20,2,128,10,16,2,88,10,12,0,3,1,41,11,5,2,5,1,1,11,47,0,2,13,10,41,2,131,10,37,2,13,10,33,2,125,10,29,0,0,2,13,10,21,3,1,40,10,16,2,124,10,12,0,3,1,41,11,5,2,5,1,1,4,1,1,6,-131,1,13,0],[0,2,163,10,29,2,24,10,25,2,12,10,21,0,2,169,4,10,15,2,117,10,
11,2,24,10,7,0,2,32,4,1,13,0],[0,3,8,99,108,97,115,115,100,101,102,10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,164,10,5,2,43,1,13,0],[0,2,125,10,26,2,13,10,22,0,0,3,1,60,10,13,2,13,10,9,2,165,10,5,2,13,1,4,1,13,0],[0,2,125,10,27,2,13,10,23,0,0,3,1,38,10,13,2,13,10,9,2,125,10,5,2,13,1,6,-17,1,13,0],[0,3,1,40,10,36,2,13,10,32,2,167,10,28,0,0,3,1,44,10,9,2,13,10,5,2,167,1,6,-13,10,10,3,1,41,10,5,2,13,1,13,0],[0,0,0,2,168,10,5,2,13,1,4,10,30,2,141,10,26,0,0,2,13,10,14,3,1,61,10,9,2,13,10,5,2,88,1,4,
10,5,2,13,1,13,0],[3,1,126,13,0],[0,0,0,2,170,11,17,2,178,11,13,2,181,11,9,2,174,11,5,2,43,1,10,9,2,24,10,5,2,12,1,6,-30,13,0],[0,3,10,112,114,111,112,101,114,116,105,101,115,10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,171,10,5,2,117,1,13,0],[0,0,2,172,10,5,2,13,1,6,-8,13,0],[0,2,43,11,24,0,2,173,10,18,0,0,2,13,10,10,3,1,61,10,5,2,88,1,4,1,1,13,0],[0,2,141,10,30,0,0,2,13,10,22,2,131,10,18,2,13,10,14,0,0,2,125,10,5,2,13,1,6,-8,1,4,1,13,0],[0,3,11,101,110,117,109,101,114,97,116,105,111,110,10,23,
2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,175,10,5,2,117,1,13,0],[0,0,2,176,10,5,2,13,1,6,-8,13,0],[0,2,43,11,29,0,2,141,10,23,2,13,10,19,0,0,3,1,40,10,10,2,177,10,6,3,1,41,1,4,1,1,13,0],[0,2,88,10,15,0,0,3,1,44,10,5,2,88,1,6,-9,1,13,0],[0,3,7,109,101,116,104,111,100,115,10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,179,10,5,2,117,1,13,0],[0,0,2,180,10,5,2,13,1,6,-8,13,0],[0,2,43,11,32,0,2,184,10,5,2,24,1,11,22,0,0,0,3,3,101,110,100,10,5,2,144,1,7,10,5,2,35,1,1,13,0],[0,3,6,101,118,101,110,116,115,
10,23,2,144,10,19,2,13,10,15,0,2,166,4,10,9,2,182,10,5,2,117,1,13,0],[0,0,2,183,10,5,2,13,1,6,-8,13,0],[0,0,0,2,141,10,31,2,13,10,27,0,0,3,1,40,10,18,2,13,10,14,2,125,10,10,2,13,10,6,3,1,41,1,4,1,4,10,5,2,43,1,13,0],[0,3,8,102,117,110,99,116,105,111,110,10,25,2,144,10,21,2,13,10,17,2,35,10,13,2,185,10,9,2,24,10,5,2,34,1,13,0],[0,0,2,12,10,23,0,2,186,11,17,2,184,11,13,0,0,2,188,7,10,5,2,187,1,1,1,6,-26,13,0],[0,2,13,10,15,9,0,0,2,42,10,5,2,13,1,5,-8,1,13,0],[0,2,12,10,15,0,2,30,11,5,2,17,1,10,5,2,
22,1,13,0],[26,13,0]]}})},"MW/rtc/model/importers/PEG":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g,e){this.rules=g;this.names=f;this.root=e},my_strcmp:function(f,g,e,d,c){if(e+c>g)return!1;f=f.substring(e,e+c);g="";for(e=0;e<c;e+=1)g+=String.fromCharCode(d[e]);return f===g},recordRule:function(f,g,e,d,c,b,a,k,h){k=a.length;f[e-1]=0===g&&1===k?a:[{name:d,start:c,end:b,children:a}]},joinRecords:function(f,g){var e=f.length,d=f.pop();1<e&&(0<d.length&&
g)&&(f[e-2]=f[e-2].concat(d))},pretty:function(f,g,e,d){4>arguments.length&&(d="long");3>arguments.length&&(e="");var c=e;if(f){var b=f.children;if(b){var a=String.fromCharCode(10);"short"===d&&(c+="(");c+=this.names[f.name];if("long"===d){var k=g.substring(f.start,f.end),k=k.replace(a,""),k=k.replace(/^[ ]*/,"");10<k.length&&(k=k.substring(0,10)+"...");c=c+" "+k+a}if(0===b.length&&"short"===d)c+=" "+f.start.toString()+" "+f.end.toString()+")";else{for(a=0;a<b.length;a+=1)c="long"===d?c+this.pretty(b[a],
g,e+" ",d):c+(" "+this.pretty(b[a],g,e,d));"short"===d&&(c+=")")}}}return c},parse:function(f){var g=this.rules,e=this.root,d=f.length,c=0,b=0,a=[],k=0,h=[],m=[],q=[],n=[],p=!0;m.push(0,0,e);var r=[];n.push(r);a=g[e];for(k=a.length;0<m.length;)if(e=m.length,b>=k)3<e&&(a=g[m[e-4]],k=a.length,b=m[e-2],e=h.pop(),p||(c=e),this.joinRecords(n,p)),m.pop(),m.pop(),m.pop();else{var e=a[b],s;switch(e){case 0:h.push(c);n.push(r);b+=1;break;case 1:e=h.pop();p||(c=e);this.joinRecords(n,p);b+=1;break;case 2:e=
a[b+1]-1;b+=2;a=g[e];k=a.length;h.push(c);n.push(r);m.push(c,b,e);b=0;break;case 3:s=a[b+1];(p=this.my_strcmp(f,d,c,a.slice(b+2),s))&&(c+=s);b+=s+2;break;case 4:e=h.pop();p||(c=e);this.joinRecords(n,p);p=!0;b+=1;break;case 5:p&&0<h[h.length-2]?(b+=a[b+1],h[h.length-1]=c):p?(b+=a[b+1],h[h.length-1]=c,h[h.length-2]=1,this.joinRecords(n,p),n.push(r)):(b+=2,c=h[h.length-1],p=0<h[h.length-2],h.pop(),h.pop(),this.joinRecords(n,p));break;case 6:this.joinRecords(n,p);p?(b+=a[b+1],h[h.length-1]=c,n.push(r)):
(b+=2,c=h.pop(),p=!0);break;case 7:case 8:7===e&&(p=!p);c=h.pop();this.joinRecords(n,!1);b+=1;break;case 9:h.push(0);b+=1;break;case 10:this.joinRecords(n,p);p?(b+=2,n.push(r)):(c=h.pop(),b+=a[b+1]);break;case 11:this.joinRecords(n,p);p?(h.pop(),b+=a[b+1]):(b+=2,n.push(r));break;case 12:case 15:c>=d?p=!1:(p=String.fromCharCode(a[b+1]),p=f[c]===p);p&&(c+=1);b+=2;break;case 13:if(p){e=a[b+1];s=m[m.length-1];var t=0;0<h.length&&(t=h[h.length-1]);var u=n.length,v=n[u-1],w=[];1<u&&(w=n[u-2]);this.recordRule(n,
e,u,s,t,c,v,w,r)}b+=2;break;case 14:p=!0;b+=1;break;case 16:case 17:s=a[b+1];t=b+2;b+=2+2*s;if(c>=d)p=!1;else{for(u=f.charCodeAt(c);s&&!(s-=1,p=a[t],t+=1,v=a[t],t+=1,p=u>=p&&u<=v););17===e&&(p=!p)}p&&(c+=1);break;case 18:p?(q.push(f),d=h[h.length-1],f=f.substring(d),d=c-d,c=0,b+=2):(b+=3+a[b+1],c=h.pop(),this.joinRecords(n,p));break;case 19:e=h.pop();c!==d||!p?(c=e+d,p=!0):(c=e,p=!1);f=q.pop();d=f.length;this.joinRecords(n,!1);b+=1;break;case 21:(p=c<d)&&(c+=1);b+=1;break;case 26:p=c===d,b+=1}}return p&&
0<n.length&&0<n[0].length?{tree:n[0][0],str:f}:{tree:null,str:f}}})})},"MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SplitterPositionModel"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.backingstore"]}},createInstance:function(e){return new g(e)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/model/SplitterPositionModel":function(){define(["dojo/_base/declare",
"dojo/_base/lang"],function(h,f){return h(null,{_DEFAULT_RIGHT_PANEL_PROPORTION:0.4,constructor:function(f){this._backingStore=f;this._updatedRightPanelProportion=null;this._handleNewScript()},_handleNewScript:function(){""===this._backingStore.file.fileInfo.location&&(this._updatedRightPanelProportion=this._DEFAULT_RIGHT_PANEL_PROPORTION)},loadSplitterPosition:function(f){f.metaData.splitterState?this.setRightPanelProportion(parseFloat(f.metaData.splitterState.proportion)):this.setDefaultRightPanelProportion();
this.onLoaded()},setDefaultRightPanelProportion:function(){this.setRightPanelProportion(this._DEFAULT_RIGHT_PANEL_PROPORTION)},onLoaded:function(){},setRightPanelProportion:function(f){this._updatedRightPanelProportion=f},getRightPanelProportion:function(){return null!==this._updatedRightPanelProportion?this._updatedRightPanelProportion:this._DEFAULT_RIGHT_PANEL_PROPORTION},hasSplitterPosition:function(){return null!==this._updatedRightPanelProportion},destroy:function(){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./ErrorOutputHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.outputhandlerservice","rtc.diagnosticmessage","rtc.embeddedoutputs.linenumbertracker"]}},createInstance:function(e,d,c){d=new g(d,c);e.registerOutputPlugin(d);return d},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./ErrorOutput ./ErrorOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a){return h([g],{OUTPUT_TYPE:a.OUTPUT_TYPE,constructor:function(a,b){this._diagnosticMessageFormatter=a;this._lineNumberTracker=b},getOutputFromData:function(a,c){a=f.clone(a);this._cleanData(a);var g=new b({data:a,diagnosticMessageFormatter:this._diagnosticMessageFormatter,lineNumberTracker:this._lineNumberTracker});return new e(d.ADD_OUTPUT,g)},_cleanData:function(a){var b=c.removeControlCharacters(a.text);a.text=c.processBackspaceCharacters(b)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler":function(){define(["dojo/_base/declare",
"MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{OUTPUT_TYPE:null,constructor:function(){},getOutputFromData:function(f,e){throw Error("Unimplemented API: MW.rtc.plugins.embeddedoutputs.outputhandlers.BaseOutputHandler.getOutputFromData()");}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g){this._output=g;this._instruction=f},getOutput:function(){return this._output},getInstruction:function(){return this._instruction}})})},
"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactory"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.embeddedoutputs.model rtc.code.sections.model rtc.code.sections.stale.model rtc.document rtc.internaldocument rtc.clipboard rtc.focusservice rtc.cursor rtc.embeddedoutputs.statehandler rtc.embeddedoutputs".split(" ")}},createInstance:function(e,
d,c,b,a,f,h,m,q,n){var p={};p.embeddedOutputsModel=e;p.sectionModel=d;p.staleSectionModel=c;p.document=b;p.internalDocument=a;p.clipboard=f;p.focusService=h;p.cursor=m;p.stateHandler=q;p.embeddedOutputsView=n.getEmbeddedOutputsView();return new g(p)}})})},"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactory":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/codegen/EditorCodeGenerator","MW/rtc/plugins/embeddedoutputs/codegen/EditorDocumentProxy"],function(h,f,g){return h(null,
{_editorDocumentProxy:null,constructor:function(e){this._editorDocumentProxy=new g({_sectionModel:e.sectionModel,_staleSectionModel:e.staleSectionModel,_clipboard:e.clipboard,_document:e.document,_internalDocument:e.internalDocument,_embeddedOutputsModel:e.embeddedOutputsModel,_focusService:e.focusService,_cursor:e.cursor,_embeddedOutputsView:e.embeddedOutputsView});this._embeddedOutputsDependencies={stateHandler:e.stateHandler,embeddedOutputsModel:e.embeddedOutputsModel,embeddedOutputsView:e.embeddedOutputsView}},
createEditorCodeGenerator:function(){var e=new f;e.setEditorDocumentProxy(this._editorDocumentProxy);e.setEmbeddedOutputsDependencies(this._embeddedOutputsDependencies);return e}})})},"MW/rtc/plugins/embeddedoutputs/codegen/EditorCodeGenerator":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dojo/i18n!l10n/nls/actions dojo/dom-style MW/rtc/plugins/embeddedoutputs/codegen/CodeGenWidget dojo/dom-geometry dojo/dom-class dojo/Evented MW/rtc/plugins/undoredo/commands/CodeGenInteractionCommand".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h([c,k],{_clipboard:null,_output:null,_generatedCode:null,_insertedCode:null,_editorDocumentProxy:null,_stalenessChangeListener:null,_outputPositions:null,_shouldForceDisablement:!1,_stateHandler:null,_embeddedOutputsModel:null,_embeddedOutputsView:null,_enablementConditionCallback:null,_wasDestroyed:!1,_stateHandlerAspects:null,_documentEditedTooltip:e.disableWhenDocumentEdited,_DISABLED_WHILE_RUNNING_TOOLTIP:e.disabledDuringExecution,_CODEGEN_INTERACTION:"CodeGenInteraction",
_MIN_TOP:3,_MAX_TOP:13,_IMAGE_PATH:require.toUrl("images/"),_overrideInlinePosition:!1,constructor:function(){this._stateHandlerAspects=[]},postCreate:function(){this.inherited(arguments);this.disableUpdateCodeBtn(this._DISABLED_WHILE_RUNNING_TOOLTIP)},setEditorDocumentProxy:function(a){this._editorDocumentProxy=a;this._stalenessChangeListener=f(this._editorDocumentProxy,"stalenessChange",g.hitch(this,"_documentEdited"))},setCodeGenDependencies:function(a){this._output=a.output;this._outputPositions=
a.outputPositions;a.overrideInlinePosition&&(this._overrideInlinePosition=a.overrideInlinePosition)},updateCodeArea:function(){this.setText(this.combineCodeLines(this._generatedCode))},setGeneratedCode:function(a){this._generatedCode=a},combineCodeLines:function(a){for(var b=a[0],c=1;c<a.length;c++)b=b+"\n"+a[c];return b},_canEnableCodeBtn:function(){return!this._shouldForceDisablement},_documentEdited:function(a){if(!this._isUpdateCodeButtonDisabled()&&(this._output.codeLinePositions&&0!==this._output.codeLinePositions.length)&&
a){var b=this._editorDocumentProxy.getSectionNumberForNode(this._output.codeLinePositions[this._output.codeLinePositions.length-1].node);a.forEach(g.hitch(this,function(a){b===this._editorDocumentProxy.getSectionNumberForNode(a)&&(this.disableUpdateCodeBtn(this._documentEditedTooltip),this._shouldForceDisablement=!0)}))}},_insertGeneratedCode:function(){var a=this._generatedCode;if(a&&0!==a.length){var b=this._output.codeLinePositions[this._output.codeLinePositions.length-1].line+1;a.unshift("");
var c=this.combineCodeLines(a);if(this._insertedCode){var d=this._insertedCode[this._insertedCode.length-1].length,b=b-this._insertedCode.length;this._editorDocumentProxy.replaceCode(c,b+1,b+this._insertedCode.length,d+1)}else this._editorDocumentProxy.insertCode("\n"+c,b);this._insertedCode=this._generatedCode;this._editorDocumentProxy.remapInjectedCodeLinesToOutputs(this._output,this._generatedCode.length,b);this._editorDocumentProxy.setCursor(b+a.length,a[a.length-1].length+1,!0)}},_updateBtnClick:function(a){var b=
this._editorDocumentProxy.getDocument();b.startEdit();this._insertGeneratedCode();this._addInteractionsToUndoRedo(b);b.endEdit();this.detach();a.stopPropagation();this._editorDocumentProxy.setDocumentFocus();this._embeddedOutputsView.outputChanged()},_addInteractionsToUndoRedo:function(a){var b={interactionType:this._CODEGEN_INTERACTION,imgNode:this._previousDomNode},c=this;a.undoable(function(a){a.appendCommand(new l(c,b))})},copyBtnClick:function(){var a=this.inherited(arguments);this._editorDocumentProxy.copyCode(a);
event.stopPropagation()},destroy:function(){this.inherited(arguments);this._stalenessChangeListener&&this._stalenessChangeListener.remove();this._stateHandlerAspects.forEach(function(a){a.remove()});this._stateHandlerAspects=[];this._wasDestroyed=!0},attach:function(a){this.inherited(arguments);this.containerNode&&this.containerNode.parentNode&&(this._setCodeGenLayout(a),this._setCodeGenTopMargin(a));return this._deferredObj.promise},_setCodeGenTopMargin:function(b){0===this._getBottomRef(b)?(a.add(this.containerNode,
"noTopMargin"),a.remove(this.containerNode,"addTopMargin")):(a.add(this.containerNode,"addTopMargin"),a.remove(this.containerNode,"noTopMargin"))},_setCodeGenLayout:function(a){a=b.position(a).w;this._overrideInlinePosition||this.changeCodeGenLayout(a)},changeCodeGenLayout:function(a){this.containerNode&&(void 0!==a&&(null!==a&&"number"===typeof a)&&this._setCodeGenWidgetWidth(a),this._doInlineElementResize())},_setCodeGenWidgetWidth:function(a){this.containerNode.parentNode&&this.isInline(this.containerNode.parentNode)&&
d.set(this.containerNode,"width","calc(100% - "+(a+10)+"px)")},resizeCodeGen:function(){this.inherited(arguments);this._setCodeGenPosition()},_getRefPosition:function(){var a=this._outputPositions,b;if(Array.isArray(a))b=Array.isArray(a[0])?a[0]:a;else if(!a||0===a.length)b=[0,0,1,1],a=[b];a.forEach(function(a){a[1]>=b[1]&&(b=a)});return this._getRefPlotBox(b)},_setCodeGenPosition:function(){var a=this._getTopForElement(this.arrowImgNode);d.set(this.containerNode,{top:a+"px"})},_getElementBounds:function(a){a=
b.position(a);return{width:a.w,height:a.h,left:a.x,top:a.y}},_getTopRef:function(){var a=this._getRefPosition(),b=this._getElementBounds(this._previousDomNode);return a.yLow-b.top},_getBottomRef:function(a){var b=this._getRefPosition();a=this._getElementBounds(a);return b.yHigh-(a.top+a.height)},_getRefPlotBox:function(a){var c=b.position(this._previousDomNode);return{xLow:a[0]*c.w+c.x,xHigh:(a[0]+a[2])*c.w+c.x,yLow:c.h-(a[1]+a[3])*c.h+c.y,yHigh:c.h-a[1]*c.h+c.y}},_getTopForElement:function(a){var b=
this._getTopRef();a=this._getElementBounds(a).height+this._MAX_TOP;b-=a;b<this._MIN_TOP+2?b=this._MIN_TOP+2:b>this._MAX_TOP&&(b=this._MAX_TOP);return b},setEnablementCondition:function(a,b){this._enablementConditionCallback=a;this._disableUpdateCodeBtnTooltipMessage=b},setEmbeddedOutputsDependencies:function(a){this._stateHandler=a.stateHandler;this._embeddedOutputsModel=a.embeddedOutputsModel;this._embeddedOutputsView=a.embeddedOutputsView;this._stateHandlerAspects.push(this._stateHandler.attachListener(this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED,
g.hitch(this,"_handleEvaluationStart")));this._stateHandlerAspects.push(this._stateHandler.attachListener(this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE,g.hitch(this,"_handleEvaluationEnd")));this.own(f(this.containerNode,this._eventName,g.hitch(this,function(a){this._embeddedOutputsView.outputChanged()})))},_handleEvaluationStart:function(){this._updateButtonTooltip.label||this.disableUpdateCodeBtn(this._DISABLED_WHILE_RUNNING_TOOLTIP)},_handleEvaluationEnd:function(){var a=g.hitch(this,
function(){this._wasDestroyed||this._updateButtonTooltip.label===this._DISABLED_WHILE_RUNNING_TOOLTIP&&(!this._enablementConditionCallback||this._enablementConditionCallback()?this.enableUpdateCodeBtn():this.disableUpdateCodeBtn(this._disableUpdateCodeBtnTooltipMessage))});this._embeddedOutputsModel.whenOutputsReady(a)}})})},"MW/rtc/plugins/embeddedoutputs/codegen/CodeGenWidget":function(){define("dojo/dom-style dojo/_base/declare dojo/dom-class dojo/dom-attr dojo/window dojo/on dojo/touch dojo/_base/lang dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/CodeGenWidget.html dojo/i18n!l10n/nls/actions dijit/Tooltip dojo/fx dojo/fx/easing dojo/Deferred dojo/has mw-html-utils/HtmlUtils dojo/NodeList-traverse".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v){var w=!0;return f([l,m],{baseClass:"codeGen",templateString:q,_MAX_TEXT_SIZE:6,_MIN_TEXT_SIZE:1,_TOOLTIP_SHOW_DELAY:0,_TOOLTIP_HIDE_DELAY:100,_MIN_CODE_WIDTH:10,_updateCodeHandler:null,_copyLabel:n.copyLabel,_codeLabel:n.codeLabel,_updateCodeLabel:n.updateCodeLabel,_isCodeExpanded:!1,_updateButtonTooltip:null,_codeGenAreaSlideAnim:null,_codeDivMinWidth:0,_animationDuration:300,_windowMouseMoveListener:null,_windowMouseUpListener:null,_arrowImgPath:require.toUrl("images/"),
_previousDomNode:null,_animationCompleteEvent:document.createEvent("CustomEvent"),_eventName:"AnimationDone",_deferredObj:null,_HAS_POINTER_EVENTS:window.PointerEvent,postCreate:function(a){this.inherited(arguments);this.setArrowImagePath(this._getImageUrl());this._addEventHandlers();this._setupTooltip();this._animationCompleteEvent.initEvent(this._eventName,!0,!0)},_getImageUrl:function(){var a=v.parseUrl(this._IMAGE_PATH);return a.protocol+"//"+a.hostname+":"+a.port+a.pathname},attach:function(a){if(this.containerNode&&
this.containerNode.parentNode&&this._previousDomNode===a)return null;this._deferredObj=new t;this._previousDomNode=a;k.place(this.containerNode,this._previousDomNode,"after");0===this._codeDivMinWidth&&(this._codeDivMinWidth=h.get(this.codeDiv,"min-width"));this._setBusyIndicator();this.toggleCode();return this._deferredObj.promise},detach:function(){this.containerNode&&this.containerNode.parentNode&&this.containerNode.parentNode.removeChild(this.containerNode)},destroy:function(){this.inherited(arguments);
this._updateCodeHandler&&this._updateCodeHandler.remove();this._windowMouseMoveListener&&this._windowMouseMoveListener.remove()},setArrowImagePath:function(a){this._arrowImgPath=a;this._updateArrowImageSrc()},_updateArrowImageSrc:function(){e.set(this.arrowImgNode,"src",this._arrowImgPath+"BlueArrow.png")},_WindowButtonMouseMove:function(a){e.set(this.textarea,"readOnly",!1);a.stopPropagation()},_WindowButtonMouseUp:function(a){e.set(this.textarea,"readOnly",!0);this._windowMouseMoveListener.pause();
window.removeEventListener(this._HAS_POINTER_EVENTS?"pointerup":"mouseup",this._windowMouseUpListener,!0);a.stopPropagation()},_addEventHandlers:function(){this.own(c(this.codeDiv,"click",a.hitch(this,"_setToggleAction")));this._updateCodeHandler=c.pausable(this.updateBtn,"click",a.hitch(this,"_updateBtnClick"));this.own(c(this.copyBtn,"click",a.hitch(this,"copyBtnClick")));this.own(c(this.containerNode,b.press,a.hitch(this,function(a){a.stopPropagation()})));this.own(c(this.textarea,"click",a.hitch(this,
function(a){a.stopPropagation()})));this.own(c(this.textarea,"dragstart",function(a){dojo.stopEvent(a)}));this.own(c(this.textarea,"dragend",function(a){dojo.stopEvent(a)}));this.own(c(this.textarea,b.press,a.hitch(this,function(d){this._windowMouseMoveListener||(this._windowMouseMoveListener=c.pausable(window,b.move,a.hitch(this,"_WindowButtonMouseMove")));this._windowMouseMoveListener.resume();this._windowMouseUpListener=a.hitch(this,"_WindowButtonMouseUp");window.addEventListener(this._HAS_POINTER_EVENTS?
"pointerup":"mouseup",this._windowMouseUpListener,!0);d.stopPropagation()})));this.own(c(this.textarea,"keydown",a.hitch(this,function(a){this._isCopyKeyDownEvent(a)||a.preventDefault()})));this.own(c(this.containerNode,"mousewheel",a.hitch(this,function(a){a.stopPropagation()})));this.own(c(this.containerNode,b.release,a.hitch(this,function(a){a.stopPropagation()})));this.own(c(this.updateBtn,b.leave,a.hitch(this,function(a){this.isValidLeaveEvent(a)&&p.hide(this.updateBtn)})));(u("trident")||u("ie")||
u("edge"))&&this.own(c(this.textarea,"selectstart",function(a){a.stopPropagation()}))},_isCopyKeyDownEvent:function(a){if("keydown"===a.type){var b=this._getKeyCode(a);return b&&67===b&&(a.ctrlKey||a.metaKey)}},_getKeyCode:function(a){return a.which?a.which:a.keyCode?a.keyCode:a.charCode?a.charCode:a.key?a.key:null},isValidLeaveEvent:function(a){return!(a.relatedTarget&&g.contains(a.relatedTarget,"dijitTooltipConnector"))},_setupTooltip:function(){this._updateButtonTooltip=new p({connectId:this.updateBtn,
position:["below","before","after","above"],showDelay:this._TOOLTIP_SHOW_DELAY,hideDelay:this._TOOLTIP_HIDE_DELAY})},_setCodeGenSlideInTransition:function(){h.set(this.codeGenArea,"display","none");var a=this;this._codeGenAreaSlideAnim=r.wipeIn({node:this.codeGenArea,duration:this._animationDuration,easing:s.linear,beforeBegin:function(){e.set(a.arrowImgNode,"src",a._arrowImgPath+"BlueArrowUp.png");g.add(a.codeGenArea,"expanded")}});c(this._codeGenAreaSlideAnim,"End",function(){a.containerNode&&(a._doInlineElementResize(),
a.containerNode.dispatchEvent(a._animationCompleteEvent),a._scrollCodeGenToView(),void 0!==a._deferredObj&&null!==a._deferredObj&&a._deferredObj.resolve("success"))},!0);this._codeGenAreaSlideAnim.play()},_setCodeGenSlideOutTransition:function(){var a=this;h.set(this.codeGenArea,"display","block");this._codeGenAreaSlideAnim=r.wipeOut({node:this.codeGenArea,duration:this._animationDuration,easing:s.linear});c(this._codeGenAreaSlideAnim,"End",function(){a.containerNode&&(e.set(a.arrowImgNode,"src",
a._arrowImgPath+"BlueArrow.png"),g.remove(a.codeGenArea,"expanded"),a._doInlineElementResize(),a.containerNode.dispatchEvent(a._animationCompleteEvent),void 0!==a._deferredObj&&null!==a._deferredObj&&a._deferredObj.resolve("success"))},!0);this._codeGenAreaSlideAnim.play()},toggleCode:function(){w?this._showCode():this._hideCode()},_setToggleAction:function(){this._isCodeExpanded?this._hideCode():this._showCode()},_hideCode:function(){this._isCodeExpanded=w=!1;this._setCodeGenSlideOutTransition()},
_showCode:function(){this._isCodeExpanded=w=!0;this._setCodeGenSlideInTransition()},_updateLayout:function(){var a=0,b=this._MIN_TEXT_SIZE,c=this.textarea.value.split("\n"),a=c.length,d=0;a>this._MAX_TEXT_SIZE?(b=this._MAX_TEXT_SIZE,d=parseInt(h.get(this.textarea,"font-size"))/2):a>this._MIN_TEXT_SIZE&&(b=a);this.textarea.rows=b;this.textarea.scrollTop=d;this._setCodeAreaWidth(c);h.set(this.codeGenArea,"height",b+2.7+"rem")},_setCodeAreaWidth:function(a){a=a.sort(function(a,b){return b.length-a.length})[0].length/
2+2;a>this._MIN_CODE_WIDTH&&h.set(this.codeGenArea,"min-width",a+"rem");this._doInlineElementResize()},copyBtnClick:function(){return this.getSelectedText()},getSelectedText:function(){var a={text:"",html:""};if("selectionStart"in this.textarea)this.textarea.selectionStart!=this.textarea.selectionEnd&&(a.text=this.textarea.value.substring(this.textarea.selectionStart,this.textarea.selectionEnd));else{var b=document.selection.createRange();b.parentElement()===this.textarea&&(a.text=b.text)}""===a.text&&
(a.text=this.textarea.value);this.textarea.selectionStart=this.textarea.selectionEnd;return a},setText:function(a){g.remove(this.textarea,"codegenprogressbar");void 0!==a&&(null!==a&&"string"===typeof a)&&(this.textarea.value=a,this._updateLayout())},_updateBtnClick:function(a){},_setBusyIndicator:function(){""===this.textarea.value&&g.add(this.textarea,"codegenprogressbar")},disableUpdateCodeBtn:function(a){g.add(this.updateBtn,"disabled");this._updateCodeHandler.pause();this._updateButtonTooltip.label=
a},enableUpdateCodeBtn:function(){this._canEnableCodeBtn()&&(this._updateButtonTooltip.label="",g.remove(this.updateBtn,"disabled"),this._updateCodeHandler.resume())},_canEnableCodeBtn:function(){return!0},_isUpdateCodeButtonDisabled:function(){return g.contains(this.updateBtn,"disabled")},_scrollCodeGenToView:function(){d.scrollIntoView(this.containerNode)},disable:function(){g.add(this.containerNode,"disabled")},enable:function(){g.remove(this.containerNode,"disabled")},_doInlineElementResize:function(){this.containerNode.parentNode&&
this.isInline(this.containerNode.parentNode)&&this.resizeCodeGen()},resizeCodeGen:function(){var a=h.get(this.containerNode,"width");this._codeDivMinWidth>a?(g.add(this.codeLabel,"hideLabel"),g.add(this.codeDiv,"diminishCode")):(g.remove(this.codeLabel,"hideLabel"),g.remove(this.codeDiv,"diminishCode"));h.get(this.codeGenArea,"width")>a&&this._isCodeExpanded?(g.add(this.codeDiv,"outlineBorder"),g.add(this.codeGenArea,"outerBorder")):(g.remove(this.codeDiv,"outlineBorder"),g.remove(this.codeGenArea,
"outerBorder"))},isInline:function(a){for(a=a.parentNode;a&&a!==document;){if(g.contains(a,"inlineElement"))return!0;a=a.parentNode}return!1},isCodeGenAttached:function(){return this.containerNode&&this.containerNode.parentNode}})})},"dojo/NodeList-traverse":function(){define(["./query","./_base/lang","./_base/array"],function(h,f,g){var e=h.NodeList;f.extend(e,{_buildArrayFromCallback:function(d){for(var c=[],b=0;b<this.length;b++){var a=d.call(this[b],this[b],c);a&&(c=c.concat(a))}return c},_getUniqueAsNodeList:function(d){for(var c=
[],b=0,a;a=d[b];b++)1==a.nodeType&&-1==g.indexOf(c,a)&&c.push(a);return this._wrap(c,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(d,c){var b=this._getUniqueAsNodeList(d),b=c?h._filterResult(b,c):b;return b._stash(this)},_getRelatedUniqueNodes:function(d,c){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(c),d)},children:function(d){return this._getRelatedUniqueNodes(d,function(c,b){return f._toArray(c.childNodes)})},closest:function(d,c){return this._getRelatedUniqueNodes(null,
function(b,a){do if(h._filterResult([b],d,c).length)return b;while(b!=c&&(b=b.parentNode)&&1==b.nodeType);return null})},parent:function(d){return this._getRelatedUniqueNodes(d,function(c,b){return c.parentNode})},parents:function(d){return this._getRelatedUniqueNodes(d,function(c,b){for(var a=[];c.parentNode;)c=c.parentNode,a.push(c);return a})},siblings:function(d){return this._getRelatedUniqueNodes(d,function(c,b){for(var a=[],d=c.parentNode&&c.parentNode.childNodes,e=0;e<d.length;e++)d[e]!=c&&
a.push(d[e]);return a})},next:function(d){return this._getRelatedUniqueNodes(d,function(c,b){for(var a=c.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;return a})},nextAll:function(d){return this._getRelatedUniqueNodes(d,function(c,b){for(var a=[],d=c;d=d.nextSibling;)1==d.nodeType&&a.push(d);return a})},prev:function(d){return this._getRelatedUniqueNodes(d,function(c,b){for(var a=c.previousSibling;a&&1!=a.nodeType;)a=a.previousSibling;return a})},prevAll:function(d){return this._getRelatedUniqueNodes(d,
function(c,b){for(var a=[],d=c;d=d.previousSibling;)1==d.nodeType&&a.push(d);return a})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter(function(d,c){return 0!=c%2})},odd:function(){return this.filter(function(d,c){return 0==c%2})}});return e})},"MW/rtc/plugins/undoredo/commands/CodeGenInteractionCommand":function(){define(["dojo/_base/declare",
"mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,f,g){return h(g,{_codeGen:null,_clientEventArgs:null,constructor:function(e,d){this._codeGen=e;this._clientEventArgs=d},execute:function(){this._codeGen.detach()},unexecute:function(){this._codeGen.containerNode&&this._codeGen.attach(this._clientEventArgs.imgNode)}})})},"MW/rtc/plugins/embeddedoutputs/codegen/EditorDocumentProxy":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/aspect MW/rtc/model/DocumentUtilities MW/rtc/plugins/cutcopypaste/CutCopyPasteService".split(" "),
function(h,f,g,e,d,c){return h(g,{_sectionModel:null,_staleSectionModel:null,_clipboard:null,_document:null,_internalDocument:null,_embeddedOutputsModel:null,_focusService:null,_documentStaleEditAspect:null,_cursor:null,constructor:function(b){f.mixin(this,b);this._staleSectionModel&&(this._documentStaleEditAspect=e.after(this._staleSectionModel,"onModelUpdated",f.hitch(this,"_documentEdited"),!0))},setDocumentFocus:function(){this._focusService.setFocus()},_documentEdited:function(b){this.emit("stalenessChange",
b)},getDocument:function(){return this._document},insertCode:function(b,a){this._staleSectionModel&&this._documentStaleEditAspect.remove();var c=this._document.getLineText(a);this._document.insertText(b,a,c.length+1);this._staleSectionModel&&(this._documentStaleEditAspect=e.after(this._staleSectionModel,"onModelUpdated",f.hitch(this,"_documentEdited"),!0))},setCursor:function(b,a,c){this._cursor.setLineColumn(b,a,c)},replaceCode:function(b,a,c,d){this._staleSectionModel&&this._documentStaleEditAspect.remove();
this._document.replaceText(b,a,1,c,d);this._staleSectionModel&&(this._documentStaleEditAspect=e.after(this._staleSectionModel,"onModelUpdated",f.hitch(this,"_documentEdited"),!0))},copyCode:function(b){c.copyContent(this._clipboard,b)},getSectionNumberForNode:function(b){return this._sectionModel.getSectionNumberForNode(b)},remapInjectedCodeLinesToOutputs:function(b,a,c){b.codeLinePositions=this._addGeneratedCodeLinePositions(b.codeLinePositions,c,a);this._moveOutputToRegionByLineNumber(b,c+a)},_addGeneratedCodeLinePositions:function(b,
a,c){var d=[];b.forEach(function(b){b.line>a-1?b.destroy():d.push(b)});b=d;for(var e=0;e<c;e++){var f=this._internalDocument.getLineNode(a+e);0<f.getText().length&&(f=this._document.createLinePosition(f,!1),b.push(f))}return b},_moveOutputToRegionByLineNumber:function(b,a){this._embeddedOutputsModel.synchronizeRegions();var c=null,e=null;this._embeddedOutputsModel.getRegions().forEach(function(d,f){var g=d.code.regionPositions,h=g[0].line,g=g[g.length-1].line,r=this._embeddedOutputsModel.getOutputsForRegion(d);
1===r.length&&r[0]===b&&(c=d);a-1>=h&&a-1<=g&&(e=f)},this);c&&null!==e&&(this._embeddedOutputsModel.setReplacementRange(d.createFullFileRange(this._document,this._internalDocument)),this._embeddedOutputsModel.updateOutputAssociations(b,e),this._embeddedOutputsModel.clearReplacementRange())}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./FigureOutputHandler"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:"rtc.embeddedoutputs rtc.embeddedoutputs.currentoutputservice rtc.id rtc.embeddedoutputs.model rtc.contextmenu.generator rtc.actionservice rtc.code.sections.model rtc.code.sections.stale.model rtc.clipboard rtc.document rtc.embeddedoutputs.codegen rtc.view rtc.focusservice rtc.outputhandlerservice rtc.embeddedoutputs.statehandler rtc.embeddedoutputs.figureconnectionmanager".split(" ")}},createInstance:function(e,d,c,b,a,f,h,m,q,n,p,r,s,t,u,v){e=new g(e.getEmbeddedOutputsView(),
d,c,b,r,f,a,h,m,q,n,p,s,u,v);t.registerOutputPlugin(e);return e}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/aspect dojo/dom-class dojo/dom-construct dojo/Deferred dojo/on MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/MessageServiceFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/codegen/CodeGenFactoryProvider MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureProxy MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ToolstripActionController MW/rtc/plugins/embeddedoutputs/model/RegionUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v){return h([m],{OUTPUT_TYPE:t.OUTPUT_TYPE,_MISSING_FIGURE_URI_ERROR:"A figure image or figureURI is required.",constructor:function(a,b,c,d,g,h,k,l,m,n,q,p,r,s,t){this._aspectHandles=[];this._currentouputservice=b;this._editorId=c;this._outputsModel=d;this._view=g;this._actionService=h;this._contextMenuGenerator=k;this._sectionModel=l;this._staleSectionModel=m;this._clipboard=n;this._document=q;this._codeGenFactory=p;this._focusService=r;this._embeddedOutputsView=
a;this._stateHandler=s;this._figureConnectionManager=t;this._outputsInProgressMap={};this._numberOfSectionsRemaining=0;this._toolstripActionController=new u(c,this._actionService);this._aspectHandles.push(e.after(this._currentouputservice,"onOutputSelected",f.hitch(this,"_handleOutputSelectionAndModelChanges"),!0));this._aspectHandles.push(e.after(this._stateHandler,"stateChanged",f.hitch(this,"_handleStateChanged"),!0))},getOutputFromData:function(a,b){var c,d=a.lineNumbers,e=a.figurePlaceHolderId||
a.figureId,g=this._outputsInProgressMap[e],h=!!g,k=a.figurePlaceHolderId,l=a.isPending,m=!k&&!l;c=h&&this._isPending(g);var p=n.REASSOCIATE_AND_UPDATE;g||(g=new r({figureId:e}),this._outputsInProgressMap[e]=g,p=n.ADD_OUTPUT);if(k)return g.getState()!==t.STATE.PENDING&&g.setState(t.STATE.PLACEHOLDER),new q(p,g);l?g.setState(t.STATE.PENDING):g.setState(t.STATE.FINAL_SNAPSHOT);p=h?n.UPDATE:n.ADD_OUTPUT;m&&delete this._outputsInProgressMap[e];var s={lineNumbers:d,figureUri:""};a.figureSize&&(s.figureSize=
a.figureSize);e={editorId:this._editorId,figureId:a.figureId,lineNumbers:d};h=a.hasOwnProperty("figureUri");a.hasOwnProperty("figureImage")?(c=this.createFigureProxyForURI(e,a.figureImage.src,a.figureSize),s.figureUri=a.figureImage.src,g.initializeFigure({figureProxy:c,parsedData:s,lineNumbers:d,onOutputDestroyedCallback:f.hitch(this,"onOutputDestroyed"),getRegionNumbersFromPositions:f.hitch(this,"_convertPositionsToRegionNumbers")}),g.getReadyPromise().resolve()):h?(c=this.createFigureProxyForURI(e,
a.figureUri,a.figureSize),c.showRunCodePrompt(),s.figureUri=a.figureUri,g.initializeFigure({figureProxy:c,parsedData:s,lineNumbers:d,onOutputDestroyedCallback:f.hitch(this,"onOutputDestroyed"),getRegionNumbersFromPositions:f.hitch(this,"_convertPositionsToRegionNumbers")}),g.getReadyPromise().resolve()):(c=c?this.createFigureProxyForWebCanvas(a,e,g.getContentPane()):this.createFigureProxyForWebCanvas(a,e),c.addFigureURIChangedListener(f.hitch(this,function(a){s.figureUri=a.uri;g.getReadyPromise().resolve()})),
c.addFigureStateChangedListener(f.hitch(this,function(a){this.onOutputFocused(a.figureProperties)})),c.addUpdateLayoutListener(f.hitch(this,function(a){this._embeddedOutputsView.onAlign()})),g.initializeFigure({figureProxy:c,parsedData:s,lineNumbers:d,onOutputDestroyedCallback:f.hitch(this,"onOutputDestroyed"),getRegionNumbersFromPositions:f.hitch(this,"_convertPositionsToRegionNumbers")}),c.setOutput(g),c.setDocumentView(this._view),c.setFigureUndoRedo(this._document),c.setContextMenuService(this._actionService,
this._contextMenuGenerator),c.setCodeGenFactory(this._codeGenFactory),c.setFocusService(this._focusService),c.addInteractionFeatures(),c.setGetNumberOfOutputsOnLineCallback(f.hitch(this,function(){return this._outputsModel.getOutputsForPosition(g.codeLinePositions[g.codeLinePositions.length-1]).length})),g.getState()!==t.STATE.FINAL_SNAPSHOT?this._figureConnectionManager.registerOutput(a.figureId,g):this._figureConnectionManager.removeOutput(a.figureId));c&&c.addCustomEventListener("startEditing",
f.hitch(this,function(a){this._focusService.setBlur()}));return new q(p,g)},_convertPositionsToRegionNumbers:function(a){var b=[],c=this._outputsModel.getRegions();if(!a)return[];a.forEach(function(a){var d=k.convertPositionToRegionNumber(a,c),e=c[d];v.isPositionWithinRegionRange(a,e,e)&&b.push(d)},this);return b},createFigureProxyForURI:function(a,b,c){var d=new s(a);d.createViewForURI(a,b,c);return d},createFigureProxyForWebCanvas:function(a,b,c){var d=s(b);d.createViewForWebCanvas(b,a.serverID,
c,a.figureSize,a.figureData.iFigureMetaData);return d},onOutputFocused:function(a){},onOutputsSelected:function(a){},onOutputDestroyed:function(a){this._figureConnectionManager.removeOutput(a);delete this._outputsInProgressMap[a]},_handleOutputSelectionAndModelChanges:function(a){var b=this.OUTPUT_TYPE,c=a.selectedOutputs.filter(function(a){return a.type===b}).map(function(a){return a.getFigureProperties()});this.onOutputsSelected(c);if(a.focusedOutput&&a.focusedOutput.type===this.OUTPUT_TYPE)this.onOutputFocused(a.focusedOutput.getFigureProperties())},
_handleStateChanged:function(a,b){a===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED?(this._clearIncompleteFigures(),this._numberOfSectionsRemaining=this._sectionModel.getSections().length):a===this._stateHandler.CHANGE_TYPE_ENUM.SECTION_EVAL_COMPLETE?(this._numberOfSectionsRemaining--,0!==this._numberOfSectionsRemaining&&this._clearIncompleteFigures()):a===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE&&this._clearIncompleteFigures()},_clearIncompleteFigures:function(){Object.keys(this._outputsInProgressMap).forEach(function(a){a=
this._outputsInProgressMap[a];a.isReady()?a.setState(t.STATE.FINAL_PENDING_SNAPSHOT):a.getReadyPromise().reject()},this);this._outputsInProgressMap={}},_isPending:function(a){return a.getState()===t.STATE.PENDING},_isFinalSnapshot:function(a){return a.getState()===t.STATE.FINAL_SNAPSHOT||a.getState()===t.STATE.FINAL_PENDING_SNAPSHOT},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._toolstripActionController.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureProxy MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties".split(" "),
function(h,f,g,e,d,c,b){return h([d],{_IMG_URI_DATA_ATTRIBUTE:"data-imguri",type:b.OUTPUT_TYPE,constructor:function(a){this._isInitialized=!1;this._isReadyPromise=new g;this._state=b.STATE.NOT_INITIALIZED;this._figureId=a.figureId},initializeFigure:function(a){this._figureProxy&&this._figureProxy.destroy();this._figureProxy=a.figureProxy;this._parsedData=a.parsedData;this._onOutputDestroyedCallback=a.onOutputDestroyedCallback;this._getRegionNumbersFromPositions=a.getRegionNumbersFromPositions;this._isInitialized=
!0},destroy:function(){this._isReadyPromise.reject();this._isReadyPromise=null;this._isInitialized&&(this._figureProxy.destroy(),this._onOutputDestroyedCallback(this._figureId))},getCssTag:function(){return b.CSS_TAG},getDomElement:function(){return this._figureProxy.getFigureView().getWrapperNode()},getSerializableData:function(){var a=this._getRegionNumbersFromPositions(this.getCodeLinePositions()),b=f.clone(this._parsedData);b.figureId=this._figureId;b.regionNumbers=a;b.originalRegionNumber=a[0];
return b},getText:function(){return""},getHTML:function(a,b){var c="\x3cdiv\x3e\x3cimg ";if(a)var d=e.pushImageAndGetPathFromURI(this._parsedData.figureUri,a,b),c=c+('src\x3d"'+d+'"')+(this._IMG_URI_DATA_ATTRIBUTE+'\x3d"'+this._parsedData.figureUri+'"');else c+='src\x3d"'+this._parsedData.figureUri+'"';return c+="\x3e\x3c/div\x3e"},isReady:function(){return this._isReadyPromise.isResolved()},getReadyPromise:function(){return this._isReadyPromise},printToFile:function(a,b,c){return this._figureProxy.printToFile(["-d"+
a,"-r"+b,c])},canPrintToFile:function(){return null!=this._figureProxy.figureModel.getFigureProperties()},getFigureProperties:function(){return this._figureProxy.getFigureProperties()},getContentPane:function(){return this._figureProxy.getFigureContentPane()},getFigureId:function(){return this._figureId},getFigureUri:function(){return this._parsedData.figureUri},getFigureSize:function(){return this._parsedData.figureSize},getState:function(){return this._state},setState:function(a){this._state=a},
reconnect:function(){this._figureProxy.reconnectView()},disconnect:function(){this._figureProxy.disconnectView()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureProxy":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/on dojo/Deferred dojo/Evented dijit/Destroyable dijit/focus dojo/i18n!l10n/nls/actions MW/rtc/plugins/embeddedoutputs/MessageServiceFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureModel MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureView MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModelessManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModeManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PaletteController MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PromptController MW/rtc/plugins/embeddedoutputs/codegen/EditorCodeGenerator MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ActionManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureUndoRedoManager MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties mw-html-utils/HtmlUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventHandler".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H){return h([l,m],{figureModel:null,figureView:null,_paletteController:null,_promptController:null,_modeManager:null,_modelessManager:null,_layoutManager:null,_windowMouseMoveListener:null,_windowMouseUpListener:null,_enableInteraction:!1,_enableModelessInteraction:!1,_output:null,_dependencies:null,_codeGenFactory:null,_codeGenerator:null,_actionService:null,_contextMenuGenerator:null,_paletteDisabled:!1,_actionManager:null,_figureUndoRedoManager:null,
_focusService:null,_IMAGE_PATH:require.toUrl("images/"),_eventHandler:null,_figureViewInteractionListeners:null,_cannotidentifyFigureTooltip:n.disabledWhenCannotIdentifyFigure,_getNumberOfOutputsOnLineCallback:null,constructor:function(a){this.figureModel=new r(a);this._IMAGE_PATH=this._getImageUrl()},createViewForURI:function(a,b,c){this.figureView=new s(c);this.own(this.figureView);this.figureView.createImageNode(b,c)},createViewForWebCanvas:function(b,c,d,e,g){this.figureView=new s(e);this.own(this.figureView);
g&&this._setFigureMetaData(g);this.figureView.createWebGraphicsNode(c,e,d);this.own(a(this.figureView,"refreshURI",f.hitch(this,function(){this._setupFigureViewListeners();this.emit("FigureURIChanged",{uri:this.getFigureURI()})})))},_replaceWebCanvas:function(a){this.figureView.createWebGraphicsNode(a,this.figureView.getFigureSize(),this.figureView.getGraphicsViewContainerNode())},getFigureContentPane:function(){return this.figureView.getGraphicsViewContainerNode()},setOutput:function(a){this._output=
a;this.figureModel&&this.figureModel.setFigureToolstripEnablementCallback(f.hitch(this,"_shouldFigureToolstripBeEnabled"))},_shouldFigureToolstripBeEnabled:function(){if(!this._output)return!1;var a=this._output.getState();return a===D.STATE.FINAL_SNAPSHOT||a===D.STATE.FINAL_PENDING_SNAPSHOT},setContextMenuService:function(a,b){this._actionService=a;this._contextMenuGenerator=b},setFocusService:function(a){this._focusService=a},setCodeGenFactory:function(a){this._codeGenFactory=a},setDocumentView:function(a){this.figureView.setDocumentView(a)},
setGetNumberOfOutputsOnLineCallback:function(a){this._getNumberOfOutputsOnLineCallback=a},showRunCodePrompt:function(){this.figureView.showRunCodePrompt()},_getImageUrl:function(){var a=F.parseUrl(this._IMAGE_PATH);return a.protocol+"//"+a.hostname+":"+a.port+a.pathname},_getMouseEventData:function(a){return this.getFigureModel().getMouseEventData(a,this.figureView,this._modeManager._cursorHotSpot)},notify:function(a,b){this.emit(a,b)},_setupFigureViewListeners:function(){this._enableModelessInteraction||
p.getInstance().subscribe(this.figureModel.getModelessChannel(),"_modelessDataUpdate",this);this._enableModelessInteraction=!0;this._figureViewInteractionListeners||(this._figureViewInteractionListeners=[a(this.figureView,"WindowButtonMouseDown",f.hitch(this,"notify","WindowButtonMouseDown")),a(this.figureView,"WindowButtonMouseMove",f.hitch(this,"notify","WindowButtonMouseMove")),a(this.figureView,"WindowButtonMouseEnter",f.hitch(this,"notify","WindowButtonMouseEnter")),a(this.figureView,"WindowButtonMouseLeave",
f.hitch(this,"notify","WindowButtonMouseLeave")),a(this.figureView,"WrapperElementMouseLeave",f.hitch(this,"notify","_WrapperElementMouseLeave")),a(this.figureView,"dblclick",f.hitch(this,"_WindowDblClickHandler")),a(this.figureView,"contextmenu",f.hitch(this,"_WindowContextMenuEventHandler")),a(this.figureView,"mousewheel",f.hitch(this,"notify","WindowButtonMouseWheel")),a(this.figureView,"LayoutResize",f.hitch(this,"notify","LayoutResize")),a(this.figureView,"InlineViewLayout",f.hitch(this,"notify",
"InlineViewLayout")),a(this.figureView,"click",f.hitch(this,"_WindowClickHandler")),a(this.figureView,"WrapperElementMouseMove",f.hitch(this,"_WrapperMouseMoveHandler"))],this.own.apply(this,this._figureViewInteractionListeners))},getFigureProperties:function(){return this.figureModel.getFigureProperties()},destroy:function(){this._destroyed||(this._enableModelessInteraction&&p.getInstance().unsubscribe(this.figureModel.getModelessChannel(),"_modelessDataUpdate",this),this._enableInteraction&&p.getInstance().unsubscribe(this.figureModel.getRefreshChannel(),
"_refreshFromServer",this),this._paletteController&&this._paletteController.destroyView(),this._promptController&&this._promptController.destroyView(),this._modeManager&&this._modeManager.destroy(),this._modelessManager&&this._modelessManager.destroy(),this._codeGenerator&&this._codeGenerator.destroy(),this._eventHandler&&this._eventHandler.destroy());this.inherited(arguments)},getFigureModel:function(){return this.figureModel},getFigureView:function(){return this.figureView},getFigureURI:function(){return this.getFigureView().getFigureURI()},
feval:function(a,b){p.getInstance().publish(this.figureModel.getInteractionChannel(),JSON.stringify({method:a,args:b}))},printToFile:function(a){var b=new k,c=f.hitch(this,function(a){p.getInstance().unsubscribe(this.figureModel.getInteractionChannel()+"/printed",c,this);b.resolve(a)});p.getInstance().subscribe(this.figureModel.getInteractionChannel()+"/printed",c,this);p.getInstance().publish(this.figureModel.getInteractionChannel(),JSON.stringify({method:"printToFile",args:a}));return b},_modelessDataUpdate:function(a){a.data.iFigureInteractionData&&
this._modelessManager.handleModelessEvent(a.data.iFigureInteractionData);this._setDocumentFocusIfNeeded()},_refreshFromServer:function(a){this._refresh(a.data.iFigureInteractionData,a.data.iFigureMetaData,a.data.iFigureUndoRedoData,a.data.iServerID)},_refresh:function(a,b,c,d){"string"===typeof d&&""!==d&&this.figureView.getServerID()!==d?this._replaceWebCanvas(d):c?(this._setFigureUndoRedoData(b,c,a),this.emit("FigureStateChanged",{figureProperties:this.figureModel.getFigureProperties()}),this.emit("InteractionEventProcessed",
{})):(b&&(this._setFigureMetaData(b),this._setFigureInteractionData(null),this._updateFigureState()),a&&(this._setFigureInteractionData(a),"subplot"===a.iAtomicActionID?this.emit("FigureStateChanged",{figureProperties:this.figureModel.getFigureProperties()}):this.emit("InteractionEventProcessed",{})),this._modelessManager&&this._modelessManager.forceCommit(),this._setDocumentFocusIfNeeded())},_setFigureUndoRedoData:function(a,b,c){this._setFigureMetaData(a);this.figureModel.setUndoRedoData(b);this._setFigureInteractionData(c);
this._updateFigureState();this._modelessManager&&this._modelessManager.forceRollback();this._setDocumentFocusIfNeeded()},_setFigureMetaData:function(a){this.figureView.deleteRunCodePrompt();this.figureModel.setFigureModelState(a)},_updateFigureState:function(){this._paletteController.setState(this.figureModel);this._promptController.setState(this.figureModel);this._modeManager.isInSpringLoadedMode()?(this._paletteController.disablePalette(),this._paletteDisabled=!0):(this._paletteController.enablePalette(),
this._paletteDisabled=!1)},_setDocumentFocusIfNeeded:function(){null===q.curNode&&this._focusService.setFocus()},_setupInteractionEvents:function(a){var b=this;this.own(a.on("interaction",function(a){b.feval(a.fcn,a.args);a.args&&(void 0!==a.args.mode&&!b._modeManager.isSpringLoadedMode(a.args.mode))&&b._modeManager.setModeFromClient(a.args.mode)}))},_WindowClickHandler:function(a){this._isValidFigure()&&this._modelessManager&&this._modelessManager.WindowMouseClick(this._getMouseEventData(a))},_WrapperMouseMoveHandler:function(a){this._isValidFigure()&&
this._modelessManager&&this._modelessManager.WindowButtonMouseMove(this._getMouseEventData(a))},_WindowDblClickHandler:function(a){this.figureModel.getMode()&&""!==this.figureModel.getMode()&&(this._isValidFigure()&&this._modeManager.WindowMouseDblClick(this._getMouseEventData(a)),g.stop(a))},_WindowContextMenuEventHandler:function(a){this.figureModel.getMode()&&""!==this.figureModel.getMode()&&this._isValidFigure()&&this._modeManager.updateContextMenuEventData(this._getMouseEventData(a))},undockFigure:function(){p.getInstance().publish(this.figureModel.getInteractionChannel(),
JSON.stringify({method:"launchFigure",args:{editorId:this.figureModel.editorId}}))},addInteractionEventProcessedListener:function(b){this.own(a(this,"InteractionEventProcessed",b))},addFigureStateChangedListener:function(b){this.own(a(this,"FigureStateChanged",b))},addFigureURIChangedListener:function(b){this.own(a(this,"FigureURIChanged",b))},addUpdateLayoutListener:function(b){this.own(a(this,"updateLayout",b))},addWindowMouseListener:function(a,b){this.addCustomEventListener(a,b)},addCustomEventListener:function(b,
c){this.own(a(this,b,c))},_isValidFigure:function(){return this._isEnabledFigure()&&(this._isInlineFigure()||this._isRHSSelectedFigure())},_isEnabledFigure:function(){var a=this.figureView.getWrapperNode();return a.parentElement&&!e.contains(a,"stale_output")},_isInlineFigure:function(){var a=this.figureView.getWrapperNode();return a.parentElement&&e.contains(a.parentElement,"inlineElement")},_isRHSSelectedFigure:function(){var a=this.figureView.getWrapperNode();return a.parentElement&&e.contains(a.parentElement,
"focusedOutput")},_isInsideAxes:function(a,b){return this.figureView.isInsideAxes(a,b,this._modeManager._cursorHotSpot)},toggleFigureComponents:function(){this.figureView.hasRenderingSize()?(this._codeGenerator.enable(),this._paletteDisabled||this._paletteController.enablePalette()):(this._isValidFigure()&&this._codeGenerator.disable(),this._paletteController.disablePalette())},addInteractionFeatures:function(){this._createCodeGenWidget();this._eventHandler=new H;this._actionManager=new B({figureView:this.figureView,
figureModel:this.figureModel,codeGenerator:this._codeGenerator});this._actionManager.setUndoRedoManager(this._figureUndoRedoManager);this._modelessManager=new t({figureView:this.figureView,figureModel:this.figureModel,codeGenerator:this._codeGenerator});this._modelessManager.setUndoRedoManager(this._figureUndoRedoManager);this._modelessManager.setEventHandler(this._eventHandler);this._modeManager=new u({figureView:this.figureView,figureModel:this.figureModel,codeGenerator:this._codeGenerator,actionService:this._actionService,
contextMenuGenerator:this._contextMenuGenerator});this._modeManager.setUndoRedoManager(this._figureUndoRedoManager);this._modeManager.setCursorImagePath(this._IMAGE_PATH);this._modeManager.setEventHandler(this._eventHandler);this._modelessManager.setCursorImagePath(this._IMAGE_PATH);this._setupInteractionEvents(this._modeManager);this._setupInteractionEvents(this._modelessManager);this.own(a(this._modeManager,"startEditing",f.hitch(this,function(a){this.emit("startEditing",a)})));this.own(a(this._modelessManager,
"startEditing",f.hitch(this,function(a){this.emit("startEditing",a)})));this.addInteractionEventProcessedListener(f.hitch(this,function(){this._eventHandler.processNextPendingEvent()}));this._paletteController=new v({figureView:this.figureView,figureModel:this.figureModel});this._setupInteractionEvents(this._paletteController);this._promptController=new w({figureView:this.figureView,figureModel:this.figureModel});this._setupInteractionEvents(this._promptController);this.addWindowMouseListener("LayoutResize",
f.hitch(this,"_handleLayoutResizeEvent"));this.addWindowMouseListener("InlineViewLayout",f.hitch(this,"_inlineViewLayoutEventHandler"));this.addWindowMouseListener("WindowButtonMouseDown",f.hitch(this,function(a){this._isEnabledFigure()&&(this._modeManager.WindowButtonMouseDown(this._getMouseEventData(a)),this._paletteController._handleMouseClick(this._getMouseEventData(a)),this._promptController._handleMouseClick(a),this._modelessManager.WindowButtonMouseDown(this._getMouseEventData(a)))}));this.addWindowMouseListener("WindowButtonMouseWheel",
f.hitch(this,"handleWheelEvent"));this.addWindowMouseListener("WindowButtonMouseEnter",f.hitch(this,function(a){this.toggleFigureComponents();this._codeGenerator.changeCodeGenLayout(this.figureView.getFigureWidth());this._isValidFigure()&&(a=this._getMouseEventData(a),this._paletteController._handleMouseEnter(a),this._promptController._handleMouseEnter(a))}));this.addWindowMouseListener("WindowButtonMouseLeave",f.hitch(this,function(a){a=this._getMouseEventData(a);this._modelessManager._handleMouseLeave(a)}));
this.addWindowMouseListener("_WrapperElementMouseLeave",f.hitch(this,function(a){this._paletteController._handleMouseLeave(a);this._promptController._handleMouseLeave(a)}));this.addWindowMouseListener("WindowButtonMouseMove",function(a){this._isValidFigure()&&(a=this._getMouseEventData(a),this._modelessManager._handleMouseMove(a),this._modeManager.WindowButtonMouseMove(a),this._paletteController._handleMouseMove(a),this._promptController._handleMouseMove(a))});p.getInstance().subscribe(this.figureModel.getRefreshChannel(),
"_refreshFromServer",this);this._enableInteraction=!0},handleWheelEvent:function(a){a=this._getMouseEventData(a);this._isValidFigure()&&(a.MouseOverAxes&&a.MouseOverAxes.isInside)&&(this._modeManager.WindowButtonMouseWheel(a),this._modelessManager.WindowButtonMouseWheel(a))},_handleLayoutResizeEvent:function(a){this.toggleFigureComponents();this._codeGenerator.changeCodeGenLayout(this.figureView.getFigureWidth());this._modeManager.switchLayouts();this._modelessManager.forceCommit()},_inlineViewLayoutEventHandler:function(){var a=
this.figureView.getWrapperNode();a.parentElement&&e.contains(a.parentElement,"inlineElement")&&this._codeGenerator.changeCodeGenLayout(this.figureView.getFigureWidth())},setFigureUndoRedo:function(a){this._figureUndoRedoManager=new A({document:a})},_createCodeGenWidget:function(){this._codeGenFactory&&(this._codeGenerator=this._codeGenFactory.createEditorCodeGenerator(),this._codeGenerator.setCodeGenDependencies({output:this._output,outputPositions:this.figureModel.getVisibleAxesPositions()}),this._codeGenerator.setEnablementCondition(f.hitch(this,
function(){return 1===this._getNumberOfOutputsOnLineCallback()}),this._cannotidentifyFigureTooltip))},_setFigureInteractionData:function(a){this.figureModel.setInteractionData(a);a&&""!==a.iAtomicActionID?this._actionManager.setState(this.figureModel):this._modeManager.setState(this.figureModel);a&&a.isFakeCode&&this._codeGenerator.disableUpdateCodeBtn(this._cannotidentifyFigureTooltip)},reconnectView:function(){this.figureView&&this.figureView.reconnectView()},disconnectView:function(){this.figureView&&
this.figureView.disconnectView()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Evented"],function(h,f,g){return h([g],{editorId:null,figureId:null,lineNumbers:null,_CHANNEL_PREFIX:"/liveeditor/figure/",_is2D:null,_axesPositions:null,_chartType:null,_mode:null,_modeStateData:null,_zoomDirection:null,_currentTarget:null,_interactionData:null,_backgroundColor:null,_isPZREnabled:null,_isSubplotCase:null,_isSubplot3D:null,
_titles:null,_xlabels:null,_ylabels:null,_yLabelPositions:null,_xLabelPositions:null,_titlePositions:null,_legendPositions:null,_isXlabelSupported:null,_isYlabelSupported:null,_isXGridSupported:null,_isYGridSupported:null,_isGridSupported:null,_isTitleSupported:null,_isColorbarSupported:null,_isLegendSupported:null,_annotationPositions:null,_annotationTextPositions:null,_enableToolstrip:null,_enableMOLToolstrip:null,_figureToolstripEnablementCallback:null,_undoRedoData:null,constructor:function(e){f.mixin(this,
e)},setEnableToolstrip:function(e){this._enableToolstrip=new Boolean(e)},getEnableToolstrip:function(){var e=!this._figureToolstripEnablementCallback||this._figureToolstripEnablementCallback();return this._enableToolstrip.valueOf()&&e},setFigureToolstripEnablementCallback:function(e){this._figureToolstripEnablementCallback=e},getUndoRedoData:function(){return this._undoRedoData},setUndoRedoData:function(e){this._undoRedoData=e},setEnableMOLToolstrip:function(e){this._enableMOLToolstrip=new Boolean(e)},
getEnableMOLToolstrip:function(){var e=!this._figureToolstripEnablementCallback||this._figureToolstripEnablementCallback();return this._enableMOLToolstrip.valueOf()&&e},getIsSubplotCase:function(){return new Boolean(this._isSubplotCase)},getIsPZREnabled:function(){return this._isPZREnabled},getInteractionChannel:function(){return this._CHANNEL_PREFIX+this.figureId},getRefreshChannel:function(){return this._CHANNEL_PREFIX+this.figureId+"/refresh"},getModelessChannel:function(){return this._CHANNEL_PREFIX+
this.figureId+"/modeless"},getMode:function(){return this._mode},getModeStateData:function(){return this._modeStateData},getZoomDirection:function(){return this._zoomDirection},getIs2D:function(){return this._is2D},getIsSubplot3D:function(){return this._isSubplot3D},getAxesPositions:function(){return this._axesPositions},getChartType:function(){return this._chartType},getVisibleAxesPositions:function(){var e=[];this._axesPositions&&this._axesPositions.forEach(f.hitch(this,function(d,c){this.isAxesObscuredByEarlierChild(c)||
e.push(d)}));return e},isAxesObscuredByEarlierChild:function(e){var d=this._axesPositions[e];if(0==e)return!1;for(var c=0;c<e;c++){var b=[Math.max(this._axesPositions[c][0],d[0]),Math.max(this._axesPositions[c][1],d[1])],a=[Math.min(this._axesPositions[c][0]+this._axesPositions[c][2],d[0]+d[2]),Math.min(this._axesPositions[c][1]+this._axesPositions[c][3],d[1]+d[3])],f=a[0]-b[0],b=a[1]-b[1];if(0<f&&0<b&&0<d[2]&&0<d[3]&&0.9<f*b/(d[2]*d[3]))return!0}return!1},getTitles:function(){return this._titles},
getXLabels:function(){return this._xlabels},getYLabels:function(){return this._ylabels},getBackgroundColor:function(){return this._backgroundColor},setMode:function(e){this._mode=e},setModeStateData:function(e){this._modeStateData=e},setZoomDirection:function(e){this._zoomDirection=e},setIs2D:function(e){this._is2D=e;this._updateIsSubplot3D(e)},_updateIsSubplot3D:function(e){this.getIsSubplot3D()||Array.isArray(e)&&e.forEach(f.hitch(this,function(d){d||(this._isSubplot3D=!0)}))},setBackgroundColor:function(e){this._backgroundColor=
e},setInteractionData:function(e){this._interactionData=e},getInteractionData:function(){return this._interactionData},setAxesPositions:function(e){var d=this._axesPositions;this._axesPositions=e;this.emit("AxesPositionUpdated",{originalAxesPositions:d,newAxesPositions:this._axesPositions})},setTitles:function(e){this._titles=e},setXLabels:function(e){this._xlabels=e},setYLabels:function(e){this._ylabels=e},setIsPZREnabled:function(e){this._isPZREnabled=e},setIsSubplotCase:function(e){this._isSubplotCase=
e},getXLabelPositions:function(){return this._xLabelPositions},getYLabelPositions:function(){return this._yLabelPositions},getTitlePositions:function(){return this._titlePositions},setXLabelPositions:function(e){this._xLabelPositions=e},setYLabelPositions:function(e){this._yLabelPositions=e},setTitlePositions:function(e){this._titlePositions=e},getAnnotationPositions:function(){return this._annotationPositions},setAnnotationPositions:function(e){this._annotationPositions=e},getAnnotationTextPositions:function(){return this._annotationTextPositions},
setAnnotationTextPositions:function(e){this._annotationTextPositions=e},setChartType:function(e){this._chartType=e},setFigureModelState:function(e){this.setMode(e.iMode);this.setModeStateData(e.iModeStateData);this.setZoomDirection(e.iZoomDirection);this.setIs2D(e.iIs2D);this.setAxesPositions(e.iAxesPositions);this.setChartType(e.iChartType);this.setLegendPositions(e.iLegendPositions);this.setBackgroundColor(e.iBackgroundColor);this.setIsSubplotCase(e.iIsSubplotCase);this.setIsPZREnabled(e.iIsPZREnabled);
this.setTitles(e.iTitles);this.setXLabels(e.iXLabels);this.setYLabels(e.iYLabels);this.setTitlePositions(e.iTitlePositions);this.setXLabelPositions(e.iXLabelPositions);this.setYLabelPositions(e.iYLabelPositions);this.setAnnotationPositions(e.iAnnotationPositions);this.setAnnotationTextPositions(e.iAnnotationTextPositions);this.setEnableToolstrip(e.iEnableFigureToolstrip);this.setEnableMOLToolstrip(e.iEnableMOLFigureToolstrip);this.setUndoRedoData(null);this._isColorbarSupported=new Boolean(e.iIsColorbarSupported);
this._isTitleSupported=new Boolean(e.iIsTitleSupported);this._isLegendSupported=new Boolean(e.iIsLegendSupported);this._isXGridSupported=new Boolean(e.iIsXGridSupported);this._isGridSupported=new Boolean(e.iIsGridSupported);this._isYGridSupported=new Boolean(e.iIsYGridSupported);this._isYlabelSupported=new Boolean(e.iIsYlabelSupported);this._isXlabelSupported=new Boolean(e.iIsXlabelSupported)},getLegendPositions:function(){return this._legendPositions},setLegendPositions:function(e){this._legendPositions=
e},getMouseEventData:function(e,d,c){var b=this,a=b.getAnnotationTextPositions();Array.isArray(a)&&a.forEach(function(a){a=d.isInsideLabel(e,d,a);a.isInside&&(e.isInsideTextAnnotation=a.isInside)});e.isInsideTextAnnotation||(a=b.getAnnotationPositions(),Array.isArray(a)&&a.forEach(function(a){a=d.isInsideAnnotations(e,a);a.isInside&&(e.isInsideAnnotation=a.isInside)}));this.getAxesPositions()&&this.getAxesPositions().some(function(a,f){if(!e.isInsideTextAnnotation&&!e.isInsideAnnotation){var g=d.isInsideLabel(e,
d,b.getTitlePositions()[f]);g.isInside&&(e.isInsideTitle=g.isInside,e.labelAxesIndex=f);g=d.isInsideLabel(e,d,b.getXLabelPositions()[f]);g.isInside&&(e.isInsideXLabel=g.isInside,e.labelAxesIndex=f);g=d.isInsideLabel(e,d,b.getYLabelPositions()[f]);g.isInside&&(e.isInsideYLabel=g.isInside,e.labelAxesIndex=f);g=d.isInsideLabel(e,d,b.getLegendPositions()[f]);g.isInside&&(e.isInsideLegend=g.isInside,e.labelAxesIndex=f)}g=d.isInsideAxes(a,e,c);e.MouseOverAxes=g;e.MouseOverAxes.Index=-1;if(g.isInside)return e.MouseOverAxes.Index=
f,void 0!==b.getChartType()&&(null!==b.getChartType()&&Array.isArray(b.getChartType()))&&(e.isMouseOverChart="axes"!==b.getChartType()[e.MouseOverAxes.Index].toLowerCase()),e});return e},getFigureProperties:function(){return!this._axesPositions?null:{editorId:this.editorId,figureId:this.figureId,lineNumbers:this.lineNumbers,axesPositions:this.getVisibleAxesPositions(),enableToolstrip:this.getEnableToolstrip(),enableMOLToolstrip:this.getEnableMOLToolstrip(),supportedActions:{xlabel:this._isXlabelSupported,
ylabel:this._isYlabelSupported,grid:this._isGridSupported,xgrid:this._isXGridSupported,ygrid:this._isYGridSupported,legend:this._isLegendSupported,colorbar:this._isColorbarSupported,title:this._isTitleSupported,subplot:this.getIsSubplotCase()}}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureView":function(){define("dojo/_base/declare dojo/dom dojo/dom-construct dojo/dom-class dojo/Evented dojo/mouse dijit/Destroyable dojo/on dojo/touch dojo/_base/lang dojo/dom-geometry dojo/dom-style dojo/query dojo/aspect mw-log/Log MW/rtc/events/MouseEventUtil MW/rtc/plugins/embeddedoutputs/MessageServiceFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/RunScriptPromptController".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v){return h([d,b,u],{_figureUri:null,_imgElement:null,_wrapperElement:null,_runInfoElement:null,_figureSize:null,_sceneWidgetAttachedHandler:null,_serverID:"",_isDisconnected:!1,_figureContainerPane:null,_graphicsView:null,_documentView:null,_viewThreshold:{Width:200,Height:100},_isFirstOutput:null,_TOLERANCE:200,_cachedBlankImageSrc:null,_figureViewInteractionListeners:null,constructor:function(a){this._wrapperElement=g.create("div",{className:"figureElement"});
void 0!==a&&(null!==a&&"number"===typeof a[0])&&(this._figureSize=a)},reconnectView:function(){this._graphicsView.setSceneChannel(this._serverID);this._isDisconnected=!1},disconnectView:function(){this._graphicsView.setSceneChannel("");this._isDisconnected=!0},_attachInteractionListeners:function(){if(!this._figureViewInteractionListeners){var b=this;this._figureViewInteractionListeners=[];this._figureViewInteractionListeners.push(a(this._imgElement,k.move,function(a){b.emit("WindowButtonMouseMove",
a)}));this._figureViewInteractionListeners.push(a(this._imgElement,k.press,function(a){c.isLeft(a)&&b.emit("WindowButtonMouseDown",a)}));this._figureViewInteractionListeners.push(a(this._imgElement,k.release,function(a){c.isLeft(a)&&b.emit("WindowButtonMouseUp",a)}));this._figureViewInteractionListeners.push(a(this._imgElement,k.enter,function(a){b.emit("WindowButtonMouseEnter",a)}));this._figureViewInteractionListeners.push(a(this._wrapperElement,k.leave,function(a){b.emit("WrapperElementMouseLeave",
a)}));this._figureViewInteractionListeners.push(a(this._imgElement,k.leave,function(a){b.emit("WindowButtonMouseLeave",a)}));this._figureViewInteractionListeners.push(a(this._imgElement,"dblclick",function(a){c.isLeft(a)&&b.emit("dblclick",a)}));this._figureViewInteractionListeners.push(a(this._wrapperElement,"click",function(a){c.isLeft(a)&&b.emit("click",a)}));this._figureViewInteractionListeners.push(a(this._wrapperElement,k.move,function(a){b.emit("WrapperElementMouseMove",a)}));this._figureViewInteractionListeners.push(a(this._imgElement,
"contextmenu",function(a){b.emit("contextmenu",a)}));this._figureViewInteractionListeners.push(a(this._imgElement,s.MOUSEWHEEL,function(a){b.emit("mousewheel",a)},!0));this._figureViewInteractionListeners.push(a(this._imgElement,"dragstart",function(a){dojo.stopEvent(a)},!0));this._figureViewInteractionListeners.push(a(this._imgElement,"dragend",function(a){dojo.stopEvent(a)},!0));this.own.apply(this,this._figureViewInteractionListeners)}},createImageNode:function(a,b){this._imgElement=g.create("img",
{className:"figureImage figureContainingNode",src:a},this._wrapperElement);b&&0<b.length&&q.set(this._imgElement,"width",b[0]+"px");this._figureContainerPane=this._imgElement;this._attachInteractionListeners()},createWebGraphicsNode:function(a,b,c){this._figureSize=b;var d=g.create("div",null);if(c)this._replaceFigureContainingDOMNode(c);else{if(!this._cachedBlankImageSrc||!(this._cachedBlankImageSrc.width===b[0]&&this._cachedBlankImageSrc.height===b[1]))c=document.createElement("canvas"),c.width=
b[0],c.height=b[1],this._cachedBlankImageData={src:c.toDataURL("image/png"),width:b[0],height:b[1]};c=g.create("img",{src:this._cachedBlankImageData.src},this._wrapperElement);e.add(c,"figureContainingNode");q.set(c,"max-width","100%")}e.add(d,"figureContainingNode");q.set(d,{width:b[0]+"px",height:"","max-width":"100%",display:"inline-block"});if("string"===typeof a){this._serverID=a;var f=this;require(["graphics/SceneWidgets/GraphicsView"],function(c){c=new c({Container:d});c.startup();var e="/graphics/"+
a+"/event";f._sceneWidgetAttachedHandler=c.on("attached",function(a){t.getInstance().publish(e,{Event:"NewClient"})});c.set("ServerId",a);f._graphicsView=c;this._isDisconnected&&this.disconnectView();f._addGraphicsCompleteHandler(b,c,d)})}else g.place(a.domNode,d,"only"),this._addGraphicsCompleteHandler(b,a,d)},_addGraphicsCompleteHandler:function(a,b,c){b.onEvent("graphicscomplete",l.hitch(this,function(){b.setInteractionEnabled(!1);f.isDescendant(c,this._wrapperElement)||this._replaceFigureContainingDOMNode(c);
this._figureContainerPane=c;this._imgElement=n("img",b.domNode)[0];e.add(this._imgElement,"figureImage");this._attachInteractionListeners();this._serverID=b.get("ServerId");this.emit("refreshURI",{})}))},getServerID:function(){return this._serverID},destroy:function(){this.inherited(arguments);this._runInfoElement&&this._runInfoElement.destroyView()},showRunCodePrompt:function(){this._runInfoElement||(this._runInfoElement=new v,this._runInfoElement.setTarget(this._wrapperElement))},deleteRunCodePrompt:function(){this._runInfoElement&&
(this._runInfoElement.destroy(),this._runInfoElement=null)},getWrapperNode:function(){this._isFirstOutput=null;return this._wrapperElement},getDomNode:function(){return this._imgElement},getGraphicsViewContainerNode:function(){return this._figureContainerPane?this._figureContainerPane:null},getFigureURI:function(){return this._imgElement.src},getPosition:function(){return m.position(this.getDomNode())},getFigureWidth:function(){return this._figureSize[0]},getFigureSize:function(){return this._figureSize},
setDocumentView:function(a){this._documentView=a;this.setupResizeAspect();this._setupLayoutChangeAspect()},setupResizeAspect:function(){this.own(p.after(this._documentView,"onResize",l.hitch(this,function(a){this.emit("LayoutResize",{})})))},_setupLayoutChangeAspect:function(){this.own(p.after(this._documentView,"onLayoutChange",l.hitch(this,function(a){this.emit("InlineViewLayout",{})})))},hasRenderingSize:function(){var a=!1;this._wrapperElement&&f.isDescendant(this._wrapperElement,document.body)&&
(a=m.position(this._wrapperElement),a=this._viewThreshold.Width<a.w&&this._viewThreshold.Height<a.h);return a},getAxesPlotBox:function(a){var b=this.getPosition();return{xLow:a[0]*b.w+b.x,xHigh:(a[0]+a[2])*b.w+b.x,yLow:b.h-(a[1]+a[3])*b.h+b.y,yHigh:b.h-a[1]*b.h+b.y}},isInsideAxes:function(a,b,c){a=this.getAxesPlotBox(a);var d=null;void 0!==b.clientX&&null!==b.clientX?d={x:b.clientX,y:b.clientY}:void 0!==b.x&&null!==b.x&&(d={x:b.x,y:b.y});b=d.x+c[0];c=d.y+c[1];c=c>a.yLow&&c<a.yHigh&&b>a.xLow&&b<a.xHigh;
return{isInside:c,axesPlotBox:c?a:{}}},isInsideLabel:function(a,b,c){b=this.getAxesPlotBox(c);a=this.getEventPosition(a);return{isInside:a.y>b.yLow&&a.y<b.yHigh&&a.x>b.xLow&&a.x<b.xHigh}},isInsideAnnotations:function(a,b){var c=this.getPosition(),d=[b[0]*c.w,b[1]*c.h,b[2]*c.w,b[3]*c.h],e=this.getEventPosition(a);e.x-=c.x;e.y-=c.y;return{isInside:Math.abs(d[0]*(d[3]-e.y)+d[2]*(e.y-d[1])+e.x*(d[1]-d[3]))/2<this._TOLERANCE}},_replaceFigureContainingDOMNode:function(a){var b=n(".figureContainingNode",
this._wrapperElement);0<b.length?g.place(a,b[0],"replace"):g.place(a,this._wrapperElement,"only")},isFigureInline:function(){var a=this.getWrapperNode();return a.parentElement&&e.contains(a.parentElement,"inlineElement")}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils":function(){define(["dojo/_base/declare","dojo/dom-geometry"],function(h,f){return h(null,{_HAS_POINTER_EVENTS:window.PointerEvent,getEventPosition:function(f){if(f){if(void 0!==f.clientX&&null!==f.clientX)return{x:f.clientX,
y:f.clientY};if(void 0!==f.x&&null!==f.x)return{x:f.x,y:f.y}}return null},convertEventToMatlabRelativeCoords:function(g,e){var d=f.position(e,!1);return this.convertEventToMatlabRelativeToFigureCoords(g,d)},convertEventToMatlabRelativeToFigureCoords:function(f,e){return{x:(f.x-e.x+1)/e.w,y:(e.h-(f.y-e.y)+1)/e.h}},isEventInsideAxes:function(f,e){return f.MouseOverAxes&&f.MouseOverAxes.isInside&&f.target===e},addCursorOffset:function(f,e){var d=this.getEventPosition(f);return{x:d.x+e[0],y:d.y+e[1]}},
hasMouseClicked:function(f,e){if(!e)return!1;var d=this.getEventPosition(f);return e.x===d.x&&e.y===d.y?!0:!1},addEventListener:function(f,e,d){switch(e){case "mousedown":this._HAS_POINTER_EVENTS&&(e="pointerdown");break;case "mouseup":this._HAS_POINTER_EVENTS&&(e="pointerup");break;case "mousemove":this._HAS_POINTER_EVENTS&&(e="pointermove")}f.addEventListener(e,d,!0)},removeEventListener:function(f,e,d){switch(e){case "mousedown":this._HAS_POINTER_EVENTS&&(e="pointerdown");break;case "mouseup":this._HAS_POINTER_EVENTS&&
(e="pointerup");break;case "mousemove":this._HAS_POINTER_EVENTS&&(e="pointermove")}f.removeEventListener(e,d,!0)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/RunScriptPromptController":function(){define("dojo/_base/declare dojo/Evented dojo/dom-construct dojo/query dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/SimpleFloatingElement".split(" "),function(h,f,g,e,d,c){return h([c,f],{constructor:function(){this.paletteRegistryId=
"RunScriptPalette"},getPreferredLeftPosition:function(){var b=e(".figureImage",this._outputDomNode);return b[0].offsetLeft+b[0].offsetWidth},_setupPaletteListeners:function(){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/SimpleFloatingElement":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dojo/dom-class MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory dojo/on dojo/dom-geometry dijit/Destroyable MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/BasePaletteController".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h([l,m],{_outputDomNode:null,_mouseEnterListener:null,_mouseLeaveListener:null,paletteRegistryId:"",paletteWidth:null,setTarget:function(b){this._outputDomNode!==b&&(this._mouseEnterListener&&this._mouseEnterListener.remove(),this._outputDomNode=b,this._mouseEnterListener=a(this._outputDomNode,"mouseenter",f.hitch(this,function(a){this._handleMouseEnter(a)})),this._mouseLeaveListener=a(this._outputDomNode,"mouseleave",f.hitch(this,function(a){this._handleMouseLeave(a)})),
this.own(this._mouseEnterListener),this.own(this._mouseLeaveListener))},getView:function(){if(!this._palette){var a=c.getPalette(this.paletteRegistryId);b.getPalette(a,f.hitch(this,function(a){this._palette=a;this._palette.startup();this._setupPaletteListeners()}))}return this._palette},_setupPaletteListeners:function(){this._paletteListener||(this._paletteListener=this._palette.on("elementClicked",f.hitch(this,function(a){this.notify("interaction",{})})))},addInteractionListener:function(b){this.own(a(this,
"interaction",b))},getPreferredLeftPosition:function(){throw Error("getPreferredLeftPosition must be overridden");},_handleMouseEnter:function(a){this.updatePalettePosition()},updatePalettePosition:function(){if(this._palette=this.getView()){g.place(this._palette.domNode,this._outputDomNode);if(this.isInline(this._outputDomNode)){var a=this.getPreferredLeftPosition();null===this.paletteWidth&&(this.paletteWidth=this._palette.domNode.offsetWidth);a+this._palette.domNode.offsetWidth>this._outputDomNode.offsetWidth?
e.set(this._palette.domNode,{right:"1px",left:"",top:"0px"}):e.set(this._palette.domNode,{left:a+"px",right:"",top:"0px"})}else e.set(this._palette.domNode,{right:"1px",left:"",top:"5px"});this.setVisible(!0)}},destroy:function(){this.inherited(arguments);this.destroyView()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry":function(){define(["dojo/i18n!l10n/nls/actions"],function(h){function f(){null===g&&(g={},g.FigurePalette={configName:"FigurePalette",
configElements:[{iconClass:"datacursorButton",mode:"Exploration.Datacursor",elementType:"ModeButtonElement",tooltip:h.dataCursorLabel},{iconClass:"rotateButton",mode:"Exploration.Rotate3d",elementType:"3DModeButtonElement",tooltip:h.rotateLabel},{iconClass:"panButton",mode:"Exploration.Pan",elementType:"ModeButtonElement",tooltip:h.panLabel},{iconClass:"zoomInButton",mode:"Exploration.Zoom",elementType:"ZoomModeButtonElement",direction:"in",tooltip:h.zoomInLabel},{iconClass:"zoomOutButton",mode:"Exploration.Zoom",
elementType:"ZoomModeButtonElement",direction:"out",tooltip:h.zoomOutLabel}]},g.OutputPopoutPalette={configName:"OutputPopoutPalette",configElements:[{iconClass:"figurePopoutButton",elementType:"ActionButtonElement",tooltip:h.figurePopOutPrompt}]},g.MatrixPopoutPalette={configName:"MatrixPopoutPalette",configElements:[{iconClass:"figurePopoutButton",elementType:"ActionButtonElement",tooltip:h.variableEditorPopOutPrompt}]},g.InteractiveVariablePopoutPalette={configName:"InteractiveVariablePopoutPalette",
configElements:[{iconClass:"figurePopoutButton",elementType:"ActionButtonElement",tooltip:h.variableEditorPopOutPrompt}]},g.RunScriptPalette={configName:"RunScriptPalette",configElements:[{iconClass:"runScriptInfoButton",elementType:"ActionButtonElement",tooltip:h.figureRunPrompt}]},g.ActionPalette={configName:"ActionPalette",configElements:[{iconClass:"zInButton",action:"Action.Zoom",elementType:"ActionButtonElement",direction:"in",tooltip:h.zoomInActionLabel},{iconClass:"zOutButton",action:"Action.Zoom",
elementType:"ActionButtonElement",direction:"out",tooltip:h.zoomOutActionLabel},{iconClass:"fitToData",action:"Action.FitToData",elementType:"ActionButtonElement",tooltip:h.fitToDataLabel}]})}var g=null;return{getPalette:function(e){f();return g[e]},registerPalette:function(e,d){f();g[e]=d},getRegistry:function(){f();return g}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/Palette MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/ModuleManifest mw-log/Log".split(" "),
function(h,f,g,e,d,c,b){function a(a,c,d){var e=null;try{if(a="MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/"+a)require([a],function(a){e=new a(c);d&&"function"===typeof d&&d(e)});else return null}catch(f){b.error(f)}return e}return{getPalette:function(b,c){var d=null;if(b&&b.configName&&b.configElements&&Array.isArray(b.configElements)){var f=b.configElements,d=new e({dataTag:b.configName,numElements:f.length});f.forEach(function(b,e,f){a(b.elementType,b,function(a){d.addElementAtIndex(a,
e);d.isComplete()&&c&&"function"===typeof c&&c(d)})})}return d}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/Palette":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/Evented dojo/on dojo/mouse dijit/_WidgetBase dijit/_TemplatedMixin dojo/dom-construct dojo/text!./templates/Palette.html".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){return h([k,c,l],{baseClass:"figurefloatingpalette",templateString:q,elements:null,
_mouseEnterListener:null,_mouseLeaveListener:null,constructor:function(a){this.inherited(arguments);if(!a||!a.dataTag)throw Error("dataTag must be passed to the Palette constructor");this.dataTag=a.dataTag;a.numElements?this.createDefaultElements(a.numElements):this.elements=[]},createDefaultElements:function(a){null===this.elements&&(this.elements=[]);for(var b=0;b<a;b+=1)this.elements[b]=void 0},isComplete:function(){var a=!0;this.elements.forEach(d.hitch(this,function(b){a=a&&void 0!==b}));return a},
addElement:function(a){this.addElementAtIndex(a,this.elements.length)},addElementAtIndex:function(a,b){null===this.elements&&(this.elements=[]);this.elements[b]=a;this._setupElementListener(a)},postCreate:function(){this.inherited(arguments);this._initMouseListeners()},startup:function(){this.inherited(arguments);this.elements.forEach(d.hitch(this,function(a){void 0!==a&&(a.startup(),m.place(a.domNode,this.containerNode))}))},_setupElementListener:function(a){var b=a.getElementEvents(),c;for(c in b)a.on(c,
d.hitch(this,"notify"))},_initMouseListeners:function(){this._mouseEnterListener=b.pausable(this.containerNode,a.enter,d.hitch(this,function(a){this.fadeIn()}));this._mouseLeaveListener=b.pausable(this.containerNode,a.leave,d.hitch(this,function(a){this.isValidLeaveEvent(a)&&this.fadeOut()}))},fadeIn:function(){f.remove(this.containerNode,"fadeout");f.add(this.containerNode,"fadein")},fadeOut:function(){this.elements.forEach(function(a){a.hideTooltip()});f.remove(this.containerNode,"fadein");f.add(this.containerNode,
"fadeout")},disable:function(){f.add(this.containerNode,"disabled")},enable:function(){f.remove(this.containerNode,"disabled")},setStyles:function(a){a&&void 0!==a.backgroundColor?e.set(this.containerNode,"background-color",a.backgroundColor):e.set(this.containerNode,"background-color","white")},setState:function(a){this.setStyles(a);this.elements.forEach(d.hitch(this,function(b){b.setState(a)}))},notify:function(a){this.emit(a.elementEvent,a)},destroy:function(){this.inherited(arguments);this.elements.forEach(d.hitch(this,
function(a){a.destroy()}));this.elements=[]},isValidLeaveEvent:function(a){var b=!0;this.elements.forEach(function(c){c.isValidLeaveEvent(a)||(b=!1)});return b}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/ModuleManifest":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ZoomModeButtonElement","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/3DModeButtonElement",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ActionButtonElement"],function(h){return h([],{constructor:function(f){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dijit/form/Button MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/AbstractPaletteElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementToolTipMixin".split(" "),
function(h,f,g,e,d,c,b,a,k){return h([b,a,k],{isStyleSet:!1,isStateSet:!1,_mode:null,_elementEvents:{elementClicked:"elementClicked"},constructor:function(a){a&&this._init(a)},_init:function(a){a.iconClass&&(this.baseClass=a.iconClass);a.mode&&(this._mode=a.mode);a.tooltip?this.setToolTipText(a.tooltip):this.setToolTipText(this._mode.replace("Exploration.",""))},startup:function(){this.inherited(arguments);this.createToolTip(this.domNode);this.createMouseListeners(this.domNode);f.add(this.domNode,
"palettebutton")},onClick:function(a){this.isStyleSet===this.isStateSet&&(this.isStateSet=!this.isStateSet,this.setStyle(this.isStateSet),this.notify(this._elementEvents.elementClicked,{mode:!1===this.isStateSet?"":this._mode}))},setStyle:function(a){a?(f.add(this.domNode,this.baseClass+"Pressed"),this.isStyleSet=!0):(f.remove(this.domNode,this.baseClass+"Pressed"),this.isStyleSet=!1)},setState:function(a){void 0!==a.mode&&(this.isStateSet=a.mode!==this._mode?!1:!0,this.setStyle(this.isStateSet))}})})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/AbstractPaletteElement":function(){define(["dojo/_base/declare","dojo/Evented","dojo/on","dojo/touch","dojo/_base/event"],function(h,f,g,e,d){return h([f],{_elementEvents:{elementClicked:"elementClicked"},_mouseDownListener_I:null,_mouseUpListener_I:null,_mouseClickListener_I:null,setState:function(c){},notify:function(c,b,a){b.elementEvent=c;b.mode=b.mode;b.direction=a;this.emit(c,b)},getElementEvents:function(){return this._elementEvents},
createMouseListeners:function(c){this._mouseUpListener_I=g(c,e.release,function(b){d.stop(b)});this._mouseDownListener_I=g(c,e.press,function(b){d.stop(b)});this._mouseClickListener_I=g(c,"click",function(b){d.stop(b)})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementToolTipMixin":function(){define(["dojo/_base/declare","dojo/dom-class","dijit/Tooltip"],function(h,f,g){return h([],{_tooltipWidget:null,_toolTipLabel:null,setToolTipText:function(e){this._toolTipLabel=
e;this._tooltipWidget&&(this._tooltipWidget.label=this._toolTipLabel)},createToolTip:function(e){this._tooltipWidget=new g({connectId:[e],label:this._toolTipLabel,hideDelay:100,position:["below","after","before","above"]})},hideTooltip:function(){g.hide(this.domNode)},setPosition:function(e){this._tooltipWidget.position=e},isValidLeaveEvent:function(e){return!(e.relatedTarget&&f.contains(e.relatedTarget,"dijitTooltipConnector"))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ZoomModeButtonElement":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement"],function(h,f){return h([f],{_zoomDirection:null,_init:function(f){this.inherited(arguments);f.direction&&(this._zoomDirection=f.direction)},notify:function(f,e){e.elementEvent=f;e.mode=e.mode;e.direction=this._zoomDirection;this.emit(f,e)},setState:function(f){void 0!==f.mode&&void 0!==f.direction&&(this.isStateSet=f.mode!==this._mode?!1:f.direction!==this._zoomDirection?!1:!0,this.setStyle(this.isStateSet))}})})},
"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/3DModeButtonElement":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ModeButtonElement"],function(h,f,g){return h([g],{setState:function(e){this.inherited(arguments);if(void 0!==e.is2D){var d=0===e.is2D;!0===d?f.add(this.domNode,"showButton"):!1===d&&f.remove(this.domNode,"showButton")}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ActionButtonElement":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dijit/form/Button MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/AbstractPaletteElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementToolTipMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h([a,k,l],{constructor:function(a){a&&this._init(a)},_init:function(a){a.iconClass&&(this.baseClass=a.iconClass);a.action&&(this._action=a.action);a.tooltip?this.setToolTipText(a.tooltip):this.setToolTipText(this._action.replace("Action.",""))},startup:function(){this.inherited(arguments);this.createToolTip(this.domNode);this.createMouseListeners(this.domNode);f.add(this.domNode,"palettebutton")},onClick:function(){this.notify(this._elementEvents.elementClicked,
{action:this._action},this.direction)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/BasePaletteController":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/Evented"],function(h,f,g){return h([g],{_palette:null,_paletteListener:null,getView:function(){},notify:function(e,d){this.emit(e,d)},_handleMouseLeave:function(e){this._palette&&this._palette.isValidLeaveEvent(e)&&this.setVisible(!1)},_handleMouseEnter:function(e){},_handleMouseClick:function(e){},
_handleMouseMove:function(e){},setVisible:function(e){this._palette&&(e?this._palette.fadeIn():this._palette.fadeOut())},disablePalette:function(){this._palette&&this._palette.disable()},enablePalette:function(){this._palette&&this._palette.enable()},isInline:function(e){for(e=e.parentNode;e&&e!==document;){if(f.contains(e,"inlineWrapper"))return!0;e=e.parentNode}return!1},destroyView:function(){this._palette&&(this._palette.destroy(),this._palette=null)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModelessManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dijit/Destroyable dojo/dom-geometry dojo/dom-style dojo/on dojo/_base/event MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/EditedAnnotationController MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ChartHandler".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h([g,e,k],{_figureView:null,_figureModel:null,_textInputElement:null,_editedLegendEntryIndex:null,_labelAxesIndex:null,_editType:null,_undoRedoManager:null,_editedAnnotation:null,_codeGen:null,_chartHandler:null,_eventHandler:null,_cursorImagePath:null,_chartClicked:!1,_TITLE_EDITED:"TITLE_EDITED",_XLABEL_EDITED:"XLABEL_EDITED",_YLABEL_EDITED:"YLABEL_EDITED",_LEGEND_EDITED:"LEGEND_EDITED",_ANNOTATION_EDITED:"ANNOTATION_EDITED",_MODELESS_INTERACTION:"modeLessInteractionCallback",
_textFieldBeingEdited:!1,_MATLAB_returned:!0,_annotationMouseDownEvent:null,constructor:function(a){this._figureView=a.figureView;this._figureModel=a.figureModel;this._codeGen=a.codeGenerator},setEventHandler:function(a){this._eventHandler=a},handleModelessEvent:function(a){this._MATLAB_returned=!0;a.ilegendTextPosition&&(a.iLegendEntryString&&a.iLegendEntryIndex)&&this.showTextEditBoxForLegend(a.iLegendEntryIndex,a.ilegendTextPosition,a.iLegendEntryString);a.editedAnnotationType&&""!==a.editedAnnotationType&&
this._initAnnotation(a.editedAnnotationType,a.editedAnnotationPosition,a.editedAnnotationText)},WindowButtonMouseMove:function(a){this._updateMouseCursor(a)},_handleMouseMove:function(a){a.isMouseOverChart&&!a.isInsideAnnotation&&!a.isInsideTextAnnotation&&""===this._figureModel.getMode()?(this._initChartHandlerIfNeeded(),this._chartHandler.WindowMouseMoveHandler(a)):this._handleMouseLeave(a)},_handleMouseLeave:function(a){this._initChartHandlerIfNeeded();this._chartHandler.WindowMouseLeaveHandler(a)},
_initChartHandlerIfNeeded:function(){null===this._chartHandler&&(this._chartHandler=new q(this._figureView,this._figureModel,this._eventHandler,this._cursorImagePath),this.own(this._chartHandler.on("CHART_INTERACTION",f.hitch(this,function(a){this.emit("interaction",a);this._insertFigureInteractionsToUndoRedo({type:a.type,interactionType:this._MODELESS_INTERACTION})}))))},WindowButtonMouseDown:function(b){this._figureView.isFigureInline()&&(this._chartClicked=!0);b.isInsideAnnotation&&""===this._figureModel.getMode()?
this._MATLAB_returned&&!(this._editedAnnotation&&null!==this._editedAnnotation._annotationElement)&&(b.editedAnnotation=!0,this.notify("AnnotationSelection",b),this._MATLAB_returned=this._textFieldBeingEdited=!1,this._annotationMouseDownEvent=b,a.stop(b)):b.isMouseOverChart&&!b.isInsideAnnotation&&(this._initChartHandlerIfNeeded(),this._chartHandler.WindowMouseDownHandler(b))},WindowButtonMouseWheel:function(a){if(a.isMouseOverChart&&(!this._figureView.isFigureInline()||this._chartClicked))this._initChartHandlerIfNeeded(),
this._chartHandler.WindowMouseWheelHandler(a)},WindowMouseClick:function(b){if(""===this._figureModel.getMode())if(b.isInsideLegend&&this._MATLAB_returned&&(this._labelAxesIndex=b.labelAxesIndex,this._MATLAB_returned=!1,this.notify("WindowMouseClick",b),a.stop(b)),b.isInsideTextAnnotation)this._MATLAB_returned&&!(this._editedAnnotation&&null!==this._editedAnnotation._annotationElement)&&(b.editedAnnotation=!0,this.notify("AnnotationSelection",b),a.stop(b),this._MATLAB_returned=!1,this._textFieldBeingEdited=
!0,this.emit("startEditing",b));else if((b.isInsideTitle||b.isInsideXLabel||b.isInsideYLabel)&&null===this._textInputElement){this._labelAxesIndex=b.labelAxesIndex;var c="",d="",e="";b.isInsideTitle?(c=this._TITLE_EDITED,d=this._figureModel.getTitlePositions()[b.labelAxesIndex],e=this._figureModel.getTitles()[b.labelAxesIndex]):b.isInsideXLabel?(c=this._XLABEL_EDITED,d=this._figureModel.getXLabelPositions()[b.labelAxesIndex],e=this._figureModel.getXLabels()[b.labelAxesIndex]):b.isInsideYLabel&&(c=
this._YLABEL_EDITED,d=this._figureModel.getYLabelPositions()[b.labelAxesIndex],e=this._figureModel.getYLabels()[b.labelAxesIndex]);this._showTextBoxForLabel(d,e,c);a.stop(b)}},forceCommit:function(a){this._textInputElement&&this._textInputElement.isVisible()&&(this._doCommit(this._textInputElement.get("value")),this._doReset());this.commitPendingAnnotation()},forceRollback:function(){this._textInputElement&&this._textInputElement.isVisible()&&this._doReset()},showTextEditBoxForLegend:function(a,b,
c){a&&(this._editedLegendEntryIndex=a);this._showTextBoxForLabel(b,c,this._LEGEND_EDITED)},setCursorImagePath:function(a){this._cursorImagePath=a},_updateMouseCursor:function(a){""===this._figureModel.getMode()?a.isInsideTextAnnotation||null===this._textInputElement&&(a.isInsideLegend||a.isInsideTitle||a.isInsideXLabel||a.isInsideYLabel)?c.set(this._figureView._wrapperElement,"cursor","text"):a.isInsideAnnotation?c.set(this._figureView._wrapperElement,"cursor","pointer"):c.set(this._figureView._wrapperElement,
"cursor","default"):c.set(this._figureView._wrapperElement,"cursor","default")},_showTextBoxForLabel:function(a,b,c){this._editType=c;this._initTextBox();this._positionTextBox(a);this._textInputElement.show();this._textInputElement.setText(b);this._textInputElement.focus();this._textInputElement.startEditing();this.emit("startEditing",{})},_initTextBox:function(){this._textInputElement=new l({widgetClass:"legendEdit"});this.own(b(this._textInputElement,"startEditing",f.hitch(this,function(a){this.emit("startEditing",
a)})));this._textInputElement.placeAt(this._figureView.getWrapperNode());this._textInputElement.setTextAlignement("left");this._addCommitListener(this._textInputElement.domNode);this._textInputElement.START_WIDTH=10;this._textInputElement.setPromptingState(!1)},_addCommitListener:function(a){this.own(b(a,"textcommit",f.hitch(this,function(a){this._doCommit(a.textValue);this._insertFigureInteractionsToUndoRedo({type:this._editType,newText:a.textValue,entryIndex:this._editedLegendEntryIndex,legendAxesIndex:this._labelAxesIndex,
interactionType:this._MODELESS_INTERACTION})})))},_addAnnotationInteractionListener:function(a){this.own(b(a,"annotationInteraction",f.hitch(this,function(a){this.emit("interaction",a);this._insertFigureInteractionsToUndoRedo({type:a.type,interactionType:this._MODELESS_INTERACTION})})))},_doCommit:function(a){this.emit("interaction",{fcn:this._MODELESS_INTERACTION,args:{type:this._editType,newText:a,entryIndex:this._editedLegendEntryIndex,legendAxesIndex:this._labelAxesIndex}});this._editedLegendEntryIndex=
null},_doReset:function(){this._editedLegendEntryIndex=null;this._textInputElement.stopEditing();this._removeEditedElement()},_positionTextBox:function(a){a=this._figureView.getAxesPlotBox(a);var b=d.position(this._figureView.getWrapperNode(),!1),e=a.yLow-b.y,f=a.xHigh-b.x-(a.xHigh-a.xLow);a.yHigh-a.yLow>a.xHigh-a.xLow&&(e=(a.yHigh+a.yLow)/2-b.y);c.set(this._textInputElement.domNode,{position:"absolute",left:f+"px",top:e+"px",height:"20px"})},notify:function(a,b){var c=this.getEventPosition(b),c=
{x:c.x,y:c.y,type:b.type},c=this.convertEventToMatlabRelativeCoords(c,this._figureView.getDomNode());this.emit("interaction",{fcn:this._MODELESS_INTERACTION,args:{type:a,x:c.x,y:c.y,isInsideLegend:b.isInsideLegend,isInsideAnnotation:b.isInsideAnnotation||b.isInsideTextAnnotation}});this._editType=null},destroy:function(){this._removeEditedElement();this._chartHandler&&this._chartHandler.destroy()},_removeEditedElement:function(){this._textInputElement&&(this._textInputElement.destroy(),this._textInputElement=
null);this._editedAnnotation&&(this._editedAnnotation.destroy(),this._editedAnnotation=null)},setUndoRedoManager:function(a){this._undoRedoManager=a},_insertFigureInteractionsToUndoRedo:function(a){this._figureModel.getMode();a.codeGenState={attachCodeGenOnUndo:!1,attachCodeGenOnRedo:!0};this._codeGen&&this._codeGen.isCodeGenAttached()&&(a.codeGenState.attachCodeGenOnUndo=!0);this._undoRedoManager.insertInteractionsForUndoRedo(this._figureModel,a)},_initAnnotation:function(a,b,c){this._editedAnnotation=
new m({figureView:this._figureView,figureModel:this._figureModel,type:a,text:c,position:b});this._addAnnotationInteractionListener(this._editedAnnotation);this._textFieldBeingEdited?this._editedAnnotation.focusTextField():this._editedAnnotation.performMouseDown(this._annotationMouseDownEvent)},commitPendingAnnotation:function(){this._editedAnnotation&&this._editedAnnotation.commitAnnotation()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement":function(){define("dojo/_base/declare dojo/dom-class dojo/on dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/keys dojo/_base/event dijit/form/TextBox MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils dojo/has".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h([l,m],{_keyboardListener:null,_isExpander:!0,START_WIDTH:128,documentMouseDownHandler:null,documentMouseUpHandler:null,eraseWhileEditing:!0,originalPosition:null,_textAlignment:"center",_MIN_WIDTH:20,_MAX_IMG_WIDTH:560,_isEditing:!1,_mouseDownTarget:null,_elementEvents:{textCommit:"textCommit",textRollback:"textRollback",textClicked:"textClicked"},constructor:function(a){a&&this._init(a)},_init:function(a){a.widgetClass&&(this.baseClass=a.widgetClass);a.placeHolderText&&
(this.placeHolderText=a.placeHolderText);a.fieldType&&(this.fieldType=a.fieldType);a.customClass&&(this.customClass=a.customClass)},startup:function(){this.inherited(arguments);f.add(this.domNode,"placeholder");d.set(this.domNode,"width",this.START_WIDTH+"px");d.set(this.focusNode,"width",this.START_WIDTH+"px");this.customClass&&f.add(this.domNode,this.customClass);this.createMouseListeners(this.domNode);this.createKeyboardListeners(this.domNode);this.documentMouseDownHandler=c.hitch(this,"_handleMouseDown")},
setTextAlignement:function(a){this._textAlignment=a},createKeyboardListeners:function(a){this.own(g(a,"keydown",c.hitch(this,"_handleKeyboardEvent")))},isEditing:function(){return this._isEditing},createMouseListeners:function(a){this.own(g(a,"click",c.hitch(this,"_handleClickEvent")));this.own(g(a,"input",c.hitch(this,function(){this._isEditing||this.startEditing()})));this.own(g(a,"contextmenu",function(a){dojo.stopEvent(a)}));this.own(g(a,"dragstart",function(a){dojo.stopEvent(a)}));this.own(g(a,
"dragend",function(a){dojo.stopEvent(a)}));(q("trident")||q("ie")||q("edge"))&&this.own(g(a,"selectstart",function(a){a.stopPropagation()}))},_handleClickEvent:function(a){this.focus();this.startEditing();this.notify("textClicked",{titleWidget:this});a.stopPropagation()},_handleKeyboardEvent:function(b){switch(this._getKeyCode(b)){case a.ENTER:this.commit();break;case a.TAB:this._focusNextNode(b);break;case a.ESCAPE:this.rollback();break;default:this._doResize()}},_focusNextNode:function(a){a.stopPropagation();
a={textValue:this.get("value"),fieldType:this.fieldType,eventKeyCode:a.shiftKey?"SHIFTTAB":"TAB"};this.stopEditing();this.notify("textCommit",a)},_doResize:function(){var a=this.get("value"),a=this._getStringDimsInPixels(a).width,a=Math.max(a,this._MIN_WIDTH),b=e.position(this.domNode.parentNode),c=this._getWidthInFigureBounds(1.2*a);if(a>this.START_WIDTH&&a<b.w){var f=e.position(this.domNode);this.originalPosition||(this.originalPosition=f);d.set(this.domNode,"width",1.2*a+"px");d.set(this.focusNode,
"width",1.2*a+"px");"center"===this._textAlignment?(d.set(this.domNode,"left",this.originalPosition.x-b.x-(a-this.originalPosition.w)/2+"px"),d.set(this.focusNode,"left",this.originalPosition.x-b.x-(a-this.originalPosition.w)/2+"px")):(b=d.get(this.domNode,"left")-1.2*a+c,a=d.get(this.focusNode,"left")-1.2*a+c,d.set(this.domNode,"left",(0>b?0:b)+"px"),d.set(this.focusNode,"left",(0>a?0:a)+"px"))}else a>b.w&&(a=Math.min(b.w,this._MAX_IMG_WIDTH),d.set(this.domNode,"width",a+"px"),d.set(this.focusNode,
"width",a+"px"),d.set(this.domNode,"left","0px"),d.set(this.focusNode,"left","0px"))},_getWidthInFigureBounds:function(a){var b=e.position(this.domNode),c=e.position(this.domNode.parentNode);return b.x+a>c.x+c.w?c.x+c.w-b.x:a},_getStringDimsInPixels:function(a){var b=document.createElement("canvas").getContext("2d"),c=d.get(this.domNode,"fontSize"),e=d.get(this.domNode,"fontFamily"),f=d.get(this.domNode,"fontWeight");b.font=f+" "+c+" "+e;a=b.measureText(a).width;b=parseInt(b.font);return{width:a,
height:b}},commit:function(a){a={textValue:this.get("value"),fieldType:this.fieldType,focusedWidget:a};this.stopEditing();this.notify("textCommit",a)},rollback:function(){this.set("value","");this.notify("textRollback",{textValue:""})},startEditing:function(){this.setPromptingState(!1);this.addEventListener(window,"mousedown",this.documentMouseDownHandler);this._isEditing=!0},isEditing:function(){return this._isEditing},setPromptingState:function(a){a?(f.remove(this.domNode,"editing"),f.add(this.domNode,
"placeholder"),this.setText(this.placeHolderText)):(this.isPromptingState()&&this.eraseWhileEditing&&this.setText(""),f.remove(this.domNode,"placeholder"),f.add(this.domNode,"editing"));this.eraseWhileEditing=a},isPromptingState:function(){return f.contains(this.domNode,"placeholder")},stopEditing:function(){this.removeEventListener(window,"mousedown",this.documentMouseDownHandler);this._isEditing=!1},notify:function(a,b){b.elementEvent=a;b.textValue=b.textValue;this.emit(a,b)},_getKeyCode:function(a){return a.which?
a.which:a.keyCode?a.keyCode:a.charCode?a.charCode:a.key?a.key:null},setState:function(a){},isVisible:function(){return"none"!==d.get(this.domNode,"display")},hide:function(){d.set(this.domNode,"display","none")},show:function(){d.set(this.domNode,"display","inline-block")},_handleMouseDown:function(a){a.stopPropagation();a=dijit.getEnclosingWidget(a.target);this!==a&&this._callOnMouseUp(c.hitch(this,"commit",a))},_callOnMouseUp:function(a){var b=c.hitch(this,function(c){this.removeEventListener(window,
"mouseup",b);c.stopPropagation();a()});this.addEventListener(window,"mouseup",b)},setText:function(a){this.set("value",a.trim());this._doResize();this.START_WIDTH=d.get(this.domNode,"width")},destroy:function(){this.stopEditing();this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main ../_mw/utils/deprecation".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){q.deprecated({deprecated:{module:"dijit/form/TextBox"},replacement:{module:"mw-form/TextField"},geckNumber:1352405});h=h("dijit.form.TextBox",[a,k],{templateString:l,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:b("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=
this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>b("ie")&&this.defer(function(){try{var a=g.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=
b}}}catch(d){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=f.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(c(this._phspan,"mousedown",function(a){a.preventDefault()}),c(this._phspan,"touchend, pointerup, MSPointerUp",d.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},
_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){e.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){e.deprecated(this.declaredClass+
"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),b("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});9>b("ie")&&(h.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();
return a.parentElement()==this.textbox&&0<a.text.length},m._setSelectionRange=k._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});return h})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(h,f,g,e){return h("dijit.form._FormValueWidget",[g,e],{_layoutHackIE7:function(){if(7==f("ie"))for(var d=
this.domNode,c=d.parentNode,b=d.firstChild||d,a=b.style.filter,e=this;c&&0==c.clientHeight;)(function(){var d=e.connect(c,"onscroll",function(){e.disconnect(d);b.style.filter=(new Date).getMilliseconds();e.defer(function(){b.style.filter=a})})})(),c=c.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(h,f,g,e,d,c){return h("dijit.form._FormValueMixin",c,{readOnly:!1,_setReadOnlyAttr:function(b){f.set(this.focusNode,
"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(b,a){this._handleOnChange(b,a)},_handleOnChange:function(b,a){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),
function(h,f,g,e,d,c,b,a){var k=f("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null!==d&&("number"!=typeof d||!isNaN(d))?this.filter(this.format(d,this.constraints)):"",0!=this.compare(d,this.filter(this.parse(c,this.constraints)))&&(c=null)));
if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==
a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);this.own(b(this.textbox,"keydown, keypress, paste, cut, compositionend",c.hitch(this,function(a){var f;if("keydown"==a.type&&229!=a.keyCode){f=a.keyCode;switch(f){case d.SHIFT:case d.ALT:case d.CTRL:case d.META:case d.CAPS_LOCK:case d.NUM_LOCK:case d.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(f){case d.NUMPAD_0:case d.NUMPAD_1:case d.NUMPAD_2:case d.NUMPAD_3:case d.NUMPAD_4:case d.NUMPAD_5:case d.NUMPAD_6:case d.NUMPAD_7:case d.NUMPAD_8:case d.NUMPAD_9:case d.NUMPAD_MULTIPLY:case d.NUMPAD_PLUS:case d.NUMPAD_ENTER:case d.NUMPAD_MINUS:case d.NUMPAD_PERIOD:case d.NUMPAD_DIVIDE:return}if(65<=
f&&90>=f||48<=f&&57>=f||f==d.SPACE)return;f=!1;for(var g in d)if(d[g]===a.keyCode){f=!0;break}if(!f)return}}(f=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(f=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==d.SPACE?String.fromCharCode(a.keyCode):a.keyCode);f||(f=229);if("keypress"==a.type){if("string"!=typeof f)return;if("a"<=f&&"z">=f||"A"<=f&&"Z">=f||"0"<=f&&"9">=f||" "===f)if(a.ctrlKey||a.metaKey||a.altKey)return}var h={faux:!0},k;for(k in a)/^(layer[XY]|returnValue|keyLocation)$/.test(k)||
(g=a[k],"function"!=typeof g&&"undefined"!=typeof g&&(h[k]=g));c.mixin(h,{charOrCode:f,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=h;!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation());if(!h._wasConsumed&&9>=e("ie"))switch(a.keyCode){case d.TAB:case d.ESCAPE:case d.DOWN_ARROW:case d.UP_ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:break;default:if(a.keyCode==d.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&b.emit(this.textbox,"input",{bubbles:!0})})}})),b(this.textbox,"input",c.hitch(this,"_onInput")),b(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=c.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,
function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=b.once(this.domNode,"mouseup, touchend",c.hitch(this,function(a){this._isTextSelected()||
k.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});k._setSelectionRange=a._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};k.selectInputText=a.selectInputText=function(a,b,c){a=g.byId(a);isNaN(b)&&(b=0);isNaN(c)&&
(c=a.value?a.value.length:0);try{a.focus(),k._setSelectionRange(a,b,c)}catch(d){}};return k})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/EditedAnnotationController":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dijit/Destroyable dojo/on dojo/_base/event MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/LineAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/DoubleArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextArrowAnnotation".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h([g,e,b],{_ANNOTATION_EDITED:"ANNOTATION_EDITED",_ANNOTATION_CLEARED:"ANNOTATION_CLEARED",_annotationElement:null,_MODELESS_INTERACTION:"modeLessInteractionCallback",constructor:function(a){var b=a.figureModel,c=a.figureView;switch(a.type){case "lineshape":this._annotationElement=new k(b,c);break;case "arrowshape":this._annotationElement=new l(b,c);break;case "doubleendarrowshape":this._annotationElement=new m(b,c);break;case "textarrowshape":this._annotationElement=
new q(b,c)}this._annotationElement.showAffordances(b.getAxesPositions(),c.getWrapperNode(),c.getDomNode());this._setAnnotationProperties(a.position,a.text)},_setAnnotationProperties:function(a,b){this._addInteractionListener();var c=[a[0]*this._annotationElement._imageNodePosition.w,a[1]*this._annotationElement._imageNodePosition.h,a[2]*this._annotationElement._imageNodePosition.w,a[3]*this._annotationElement._imageNodePosition.h];this._annotationElement.setAnnotationEndPoints([c[0],c[1]],[c[2],c[3]]);
this._annotationElement.show();this._annotationElement.draw(this._annotationElement._anchorPoint,this._annotationElement._endPoint);this._annotationElement._textField&&(this._annotationElement._textField.value=b,this._annotationElement.removeTextFocusListener(),this._annotationElement.doResize());this._annotationElement._canvas.focus()},performMouseDown:function(a){this._annotationElement.addMouseMoveForExistingAnnotation(a)},focusTextField:function(){this._annotationElement._textField.focus();this._annotationElement.createFocusTextListener()},
_addInteractionListener:function(){this.own(this._annotationElement.on("interaction",f.hitch(this,function(a){this._emitAnnotationCommit(a)})))},_emitAnnotationCommit:function(a){if("clearMode"===a.args.type)a.args.editType&&(this._annotationElement.clearWait(),this._annotationElement.destroy(),a={fcn:this._MODELESS_INTERACTION,args:{type:this._ANNOTATION_CLEARED,editType:a.args.editType}},this.emit("annotationInteraction",a));else{var b=a.args.configurationData;a={fcn:this._MODELESS_INTERACTION,
args:{type:this._ANNOTATION_EDITED,editType:a.args.type,relativePosition:b.relativePosition,editedText:b.text?b.text:""}};this.emit("annotationInteraction",a)}},commitAnnotation:function(){this._annotationElement&&(this._annotationElement.clearWait(),this._annotationElement.hide(!1),this.destroy())},destroy:function(){this._annotationElement&&(this._annotationElement.destroy(),this._annotationElement=null);this.inherited(arguments)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/LineAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation".split(" "),
function(h,f,g,e,d,c,b,a,k){return h([k],{matlabInteractionFunction:"line",mode:"placedLineMode",draw:function(a,b){var c=this._canvas.getContext("2d");c.clearRect(0,0,this._canvas.width,this._canvas.height);c.lineWidth=1;c.beginPath();var d=[a[0],a[1]],e=[b[0],b[1]];c.moveTo(d[0],d[1]);c.lineTo(e[0],e[1]);c.rect(d[0]-2,d[1]-2,4,4);c.rect(e[0]-2,e[1]-2,4,4);c.stroke()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h([m,l],{_anchorPoint:null,_endPoint:null,_mouseDownPoint:null,_pivotPoint:"end",_canvas:null,_mouseDownHandlerFcn:null,_mouseMoveHandlerFcn:null,_mouseUpHandlerFcn:null,_keyHandlerFcn:null,_isMouseMove:!1,_imageNodePosition:null,_imageNode:null,_cursorOffset:5,_Z_KEY:90,createDomNodes:function(b,d){this._imageNode=d;var f=c.create("div");c.place(f,b);this.previewDomNodes=[f];this._canvas=c.create("canvas");c.place(this._canvas,f);e.add(this._canvas,"scribe");
e.add(f,"scribe");this.own(a(f,"dragstart",function(a){dojo.stopEvent(a)}));this.own(a(f,"dragend",function(a){dojo.stopEvent(a)}));return f},setAnnotationEndPoints:function(a,b){this._anchorPoint=a;this._endPoint=b},addClickListener:function(a,b){this.matlabInteractionFunction=b;this._mouseMoveHandlerFcn=f.hitch(this,"_mouseMoveListener");this._mouseUpHandlerFcn=f.hitch(this,"_mouseUpListener");this._addMouseupWindowListener();this._mouseDownHandlerFcn=f.hitch(this,"_mouseDownHandler");this._addMousedownWindowListener()},
_addKeyListener:function(){this._keyHandlerFcn||(this._keyHandlerFcn=f.hitch(this,"_keyHandler"));this._removeKeyListener();document.body.addEventListener("keydown",this._keyHandlerFcn,!0)},_removeKeyListener:function(){document.body.removeEventListener("keydown",this._keyHandlerFcn,!0)},_getKeyCode:function(a){return a.which?a.which:a.keyCode?a.keyCode:a.charCode?a.charCode:a.key?a.key:null},_keyHandler:function(a){var b=this._getKeyCode(a);if(this._isPositioned())switch(b){case k.UP_ARROW:a.stopPropagation();
this._anchorPoint[1]--;this._endPoint[1]--;this.draw(this._anchorPoint,this._endPoint);break;case k.DOWN_ARROW:a.stopPropagation();this._anchorPoint[1]++;this._endPoint[1]++;this.draw(this._anchorPoint,this._endPoint);break;case k.RIGHT_ARROW:a.stopPropagation();this._anchorPoint[0]++;this._endPoint[0]++;this.draw(this._anchorPoint,this._endPoint);break;case k.LEFT_ARROW:a.stopPropagation();this._anchorPoint[0]--;this._endPoint[0]--;this.draw(this._anchorPoint,this._endPoint);break;case k.ENTER:this.commit();
a.stopPropagation();a.preventDefault();break;case k.ESCAPE:this.commit();a.stopPropagation();break;case k.DELETE:this._resetAnnotation("delete");a.stopPropagation();break;case this._Z_KEY:if(a.ctrlKey||a.metaKey)this._resetAnnotation("undo"),a.stopPropagation()}else b===k.ESCAPE&&(this._resetAnnotation(),a.stopPropagation())},_resetAnnotation:function(a){this._removeMouseupWindowListener();this._removeMousedownWindowListener();this._reset();this.clearMode(a);document.body.removeEventListener("keydown",
this._keyHandlerFcn,!0)},positionAffordance:function(a,c,e,f,g,h,k,l){this._imageNodePosition={w:a.w,h:a.h,x:c,y:e};c=this.previewDomNodes[0];this._canvas.width=a.w;this._canvas.height=a.h;d.set(c,{width:a.w+"px",height:a.h+"px"});d.set(this._canvas,{width:a.w+"px",height:a.h+"px"});a=b.getPadExtents(f);d.set(c,{top:a.t+"px",left:a.l+"px"});this.parentNode=f},showAffordances:function(a,c,d){if(!this.previewDomNodes||0===this.previewDomNodes.length)a=this.createDomNodes(c,d),this.addClickListener(a,
this.matlabInteractionFunction);d=b.position(d);this.positionAffordance(d,d.x,d.y,c);this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height);this._endPoint=this._anchorPoint=null;this.show();document.body.removeEventListener("keydown",this._keyHandlerFcn,!0);this._addKeyListener()},_getEventPositionRelativeToCanvas:function(a){a=this.getEventPosition(a);a.x-=this._imageNodePosition.x;a.y-=this._imageNodePosition.y;return a},_updateImageNodePosition:function(){var a=b.position(this._imageNode);
this._imageNodePosition.y=a.y;this._imageNodePosition.x=a.x},addMouseMoveForExistingAnnotation:function(a){a=this._getEventPositionRelativeToCanvas(a);this._mouseDownPoint=[a.x,a.y];this._isMouseMove=!1;this._addMousemoveWindowListener();this._pivotPoint="translate"},_mouseDownHandler:function(a){dojo.stopEvent(a);this._updateImageNodePosition();var b=this._getEventPositionRelativeToCanvas(a);0>b.x||0>b.y||b.x>this._imageNodePosition.w||b.y>this._imageNodePosition.h?this._pivotPoint="":(this._isMouseMove=
!1,this._anchorPoint||(this._anchorPoint=[b.x+this._cursorOffset,b.y+this._cursorOffset]),this._pivotPoint="",this._mouseDownPoint=[b.x,b.y],this._endPoint?(b=this._getClosestVertex(a),10>b.distance?(this._pivotPoint=b.vertex,this._addMousemoveWindowListener()):this._isAlignedWithLine(a)?(this._addMousemoveWindowListener(),this._pivotPoint="translate"):this.commit()):this._addMousemoveWindowListener())},_addMouseupWindowListener:function(){this.addEventListener(window,"mouseup",this._mouseUpHandlerFcn)},
_removeMouseupWindowListener:function(){this.removeEventListener(window,"mouseup",this._mouseUpHandlerFcn)},_addMousedownWindowListener:function(){this.addEventListener(document,"mousedown",this._mouseDownHandlerFcn)},_removeMousedownWindowListener:function(){this.removeEventListener(document,"mousedown",this._mouseDownHandlerFcn)},_addMousemoveWindowListener:function(){this.addEventListener(window,"mousemove",this._mouseMoveHandlerFcn)},_removeMousemoveWindowListener:function(){this.removeEventListener(window,
"mousemove",this._mouseMoveHandlerFcn)},_mouseMoveListener:function(a){this._isMouseMove=!0;var b=this._getEventPositionRelativeToCanvas(a);this._anchorPoint&&2<=this._anchorPoint.length&&(!this._endPoint||"end"===this._pivotPoint)?this.draw(this._anchorPoint,[b.x+this._cursorOffset,b.y+this._cursorOffset]):this._endPoint&&2<=this._endPoint.length&&"anchor"===this._pivotPoint?this.draw([b.x+this._cursorOffset,b.y+this._cursorOffset],this._endPoint):"translate"===this._pivotPoint&&this._isPositioned()&&
(b=[b.x+this._cursorOffset-this._mouseDownPoint[0],b.y+this._cursorOffset-this._mouseDownPoint[1]],this.draw([this._anchorPoint[0]+b[0],this._anchorPoint[1]+b[1]],[this._endPoint[0]+b[0],this._endPoint[1]+b[1]]));a.stopPropagation()},_mouseUpListener:function(a){this._removeMousemoveWindowListener();var b=this._getEventPositionRelativeToCanvas(a);if(!this._isMouseMove)if(this._endPoint)this._pivotPoint="";else{this._rollback();a.stopPropagation();return}if(!this._endPoint||"end"===this._pivotPoint)this._endPoint=
[b.x+this._cursorOffset,b.y+this._cursorOffset];else if("anchor"===this._pivotPoint)this._anchorPoint=[b.x+this._cursorOffset,b.y+this._cursorOffset];else if("translate"===this._pivotPoint){var c=[b.x+this._cursorOffset-this._mouseDownPoint[0],b.y+this._cursorOffset-this._mouseDownPoint[1]];this._anchorPoint=[this._anchorPoint[0]+c[0],this._anchorPoint[1]+c[1]];this._endPoint=[this._endPoint[0]+c[0],this._endPoint[1]+c[1]]}(b.x>this._imageNodePosition.w||0>b.x||b.y>this._imageNodePosition.h||0>b.y)&&
this.commit();dojo.stopEvent(a)},_getAngleFromLine:function(a){a=this._getEventPositionRelativeToCanvas(a);var b=[a.x+this._cursorOffset,a.y+this._cursorOffset];a=[this._endPoint[0]-this._anchorPoint[0],this._endPoint[1]-this._anchorPoint[1]];var c=[b[0]-this._anchorPoint[0],b[1]-this._anchorPoint[1]],b=[b[0]-this._endPoint[0],b[1]-this._endPoint[1]],d=-b[0]*a[1]+b[1]*a[0],e=360/(2*Math.PI)*Math.asin((c[0]*a[1]-c[1]*a[0])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],
2))));0>c[0]*a[0]+c[1]*a[1]&&(e+=180);c=360/(2*Math.PI)*Math.asin(d/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))));0>b[0]*-a[0]+b[1]*-a[1]&&(c+=180);return[e,c]},_isAlignedWithLine:function(a){a=this._getAngleFromLine(a);return 10>Math.abs(a[0])&&90>Math.abs(a[1])||90>Math.abs(a[0])&&10>Math.abs(a[1])},_getClosestVertex:function(a){var b=this._getEventPositionRelativeToCanvas(a);a=Math.sqrt(Math.pow(b.x+this._cursorOffset-this._anchorPoint[0],2)+Math.pow(b.y+
this._cursorOffset-this._anchorPoint[1],2));b=Math.sqrt(Math.pow(b.x+this._cursorOffset-this._endPoint[0],2)+Math.pow(b.y+this._cursorOffset-this._endPoint[1],2));return a<=b?{distance:a,vertex:"anchor"}:{distance:b,vertex:"end"}},commit:function(){this._removeMouseupWindowListener();this._removeMousedownWindowListener();if(this._isPositioned()){var a=[this._anchorPoint[0]/this._imageNodePosition.w,this._anchorPoint[1]/this._imageNodePosition.h,this._endPoint[0]/this._imageNodePosition.w,this._endPoint[1]/
this._imageNodePosition.h],b=(0>a[1]||1<a[1])&&(0>a[3]||1<a[3]);(0>a[0]||1<a[0])&&(0>a[2]||1<a[2])||b?this._resetAnnotation("delete"):(this.emit("interaction",{fcn:"springLoadedModeAction",args:{type:this.matlabInteractionFunction,axesIndex:-1,configurationData:{relativePosition:a},mode:this.mode}}),document.body.removeEventListener("keydown",this._keyHandlerFcn,!0),this._reset())}else this._rollback()},_isPositioned:function(){return this._anchorPoint&&this._endPoint&&2==this._anchorPoint.length&&
2==this._endPoint.length&&!this._anchorPoint.some(function(a){return isNaN(a)})&&!this._endPoint.some(function(a){return isNaN(a)})},draw:function(a,b){throw Error("Subclasses should implement this method");},show:function(){this.previewDomNodes.forEach(function(a){d.set(a,"display","block")})},_isVisible:function(){return this.previewDomNodes&&0<this.previewDomNodes.length&&this.previewDomNodes[0]&&"block"===d.get(this.previewDomNodes[0],"display")},_reset:function(){this._anchorPoint=[];this._endPoint=
[]},_rollback:function(){this._removeMouseupWindowListener();this._removeMousedownWindowListener();this._reset();this.clearMode();document.body.removeEventListener("keydown",this._keyHandlerFcn,!0)},hide:function(a){!a&&this._isVisible()?this.commit():this._rollback();this._removeKeyListener();this._removeMouseupWindowListener();this._removeMousedownWindowListener();this._removeMousemoveWindowListener();this.inherited(arguments)},destroy:function(){this.inherited(arguments);this._removeKeyListener();
this._removeMouseupWindowListener();this._removeMousedownWindowListener()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/dom-attr dojo/on dojo/Evented dijit/Destroyable".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h([k,l],{previewDomNodes:null,parentNode:null,figureModel:null,figureView:null,mode:"",constructor:function(a,b){this.figureModel=
a;this.figureView=b},createDomNodes:function(a,b,d){a=g.create("div",{title:b},a);c.add(a,d);return a},addClickListener:function(b,c,e){a(b,"click",f.hitch(this,function(a){var b=0;this.previewDomNodes.forEach(function(a){a&&"block"==d.get(a,"display")&&b++});var f={fcn:"springLoadedModeAction",args:{type:c,axesIndex:e,configurationData:"",mode:this.mode,retainMode:2<=b}};1>=b&&this.hide();this.wait();dojo.stopEvent(a);this.emit("interaction",f)}))},showAffordances:function(a,b,c){throw Error("Subclasses should implement this method");
},positionAffordance:function(a,c,e,f,g,h,k,l){this.parentNode=f;this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[h]||(this.previewDomNodes[h]=this.createDomNodes(f,l,k),this.addClickListener(this.previewDomNodes[h],g,h));a?d.set(this.previewDomNodes[h],{position:"absolute",top:e+"px",left:c+"px",width:a.w+"px",height:a.h+"px"}):d.set(this.previewDomNodes[h],{position:"absolute",top:e+"px",left:c+"px"});b.set(this.previewDomNodes[h],"data-tag",k+"."+g+"."+h)},show:function(){var a=
this.figureModel.getModeStateData();this.previewDomNodes.forEach(function(b,c){!a||0<a[c]?d.set(b,"display","block"):d.set(b,"display","none")});this.clearWait()},clearMode:function(a){var b={fcn:"springLoadedModeAction",args:{type:"clearMode",clearedMode:this.mode}};a&&(b.args.editType=a);this.emit("interaction",b)},isShowing:function(){return 0<this.previewDomNodes.length&&this.previewDomNodes.some(function(a){return"none"!==d.get(a,"display")})},hide:function(a){a=this.isShowing();this.previewDomNodes.forEach(function(a){g.destroy(a)});
this.previewDomNodes=[];a&&this.clearMode()},wait:function(){this.isShowing()&&(d.set(this.parentNode,"cursor","wait"),this.previewDomNodes.forEach(function(a){d.set(a,"cursor","wait")}))},clearWait:function(){this.isShowing()&&(d.set(this.parentNode,"cursor",""),this.previewDomNodes.forEach(function(a){d.set(a,"cursor","")}))},_getStringWidthInPixels:function(a,b){var c=document.createElement("canvas").getContext("2d"),e=d.get(b,"fontSize"),f=d.get(b,"fontFamily"),g=d.get(b,"fontWeight");c.font=
g+" "+e+" "+f;return c.measureText(a).width},destroy:function(){this.previewDomNodes.forEach(function(a){g.destroy(a)})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation".split(" "),function(h,f,g,e,d,c,b,a,k){return h([k],{matlabInteractionFunction:"arrow",mode:"placedArrowMode",
draw:function(a,b){var c=this._canvas.getContext("2d");c.clearRect(0,0,this._canvas.width,this._canvas.height);c.lineWidth=1;c.beginPath();var d=[a[0],a[1]],e=[b[0],b[1]],f=[b[0],b[1]],g=[f[0]-d[0],f[1]-d[1]],h=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2));g[0]/=h;g[1]/=h;var h=0==f[1]-d[1]?[0,1]:[1,-(f[0]-d[0])/(f[1]-d[1])],k=Math.sqrt(h[0]*h[0]+h[1]*h[1]);h[0]/=k;h[1]/=k;e[0]-=10*g[0];e[1]-=10*g[1];c.moveTo(d[0],d[1]);c.lineTo(e[0],e[1]);c.moveTo(e[0]+5*h[0],e[1]+5*h[1]);c.lineTo(e[0]+10*g[0],e[1]+
10*g[1]);c.lineTo(e[0]-5*h[0],e[1]-5*h[1]);c.fill();c.rect(d[0]-2,d[1]-2,4,4);c.rect(f[0]-2,f[1]-2,4,4);c.stroke()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/DoubleArrowAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/keys MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/Annotation".split(" "),function(h,f,g,e,d,c,b,a,k){return h([k],{matlabInteractionFunction:"doublearrow",
mode:"placedDoubleArrowMode",draw:function(a,b){var c=this._canvas.getContext("2d");c.clearRect(0,0,this._canvas.width,this._canvas.height);c.lineWidth=1;c.beginPath();var d=[a[0],a[1]],e=[b[0],b[1]],f=[b[0],b[1]],g=[a[0],a[1]],h=[f[0]-d[0],f[1]-d[1]],k=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h[0]/=k;h[1]/=k;var k=0==f[1]-d[1]?[0,1]:[1,-(f[0]-d[0])/(f[1]-d[1])],v=Math.sqrt(k[0]*k[0]+k[1]*k[1]);k[0]/=v;k[1]/=v;e[0]-=10*h[0];e[1]-=10*h[1];d[0]+=10*h[0];d[1]+=10*h[1];c.moveTo(d[0],d[1]);c.lineTo(e[0],
e[1]);c.moveTo(e[0]+5*k[0],e[1]+5*k[1]);c.lineTo(e[0]+10*h[0],e[1]+10*h[1]);c.lineTo(e[0]-5*k[0],e[1]-5*k[1]);c.fill();c.moveTo(d[0]+5*k[0],d[1]+5*k[1]);c.lineTo(d[0]-10*h[0],d[1]-10*h[1]);c.lineTo(d[0]-5*k[0],d[1]-5*k[1]);c.fill();c.rect(g[0]-2,g[1]-2,4,4);c.rect(f[0]-2,f[1]-2,4,4);c.stroke()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextArrowAnnotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/on dojo/touch dojo/keys dijit/focus MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h([m],{matlabInteractionFunction:"textarrow",mode:"placedTextArrowMode",_textField:null,_textFocusListener:null,_mouseDownOnText:!1,_VERTICAL_GAP:3,createDomNodes:function(c,h){var k=this.inherited(arguments);this._textField=d.create("input");e.set(this._textField,"visibility","hidden");d.place(this._textField,k);g.add(this._textField,"textArrowText");this.own(b(this._textField,a.press,function(a){a.stopPropagation()}));this.own(b(this._textField,a.release,function(a){a.stopPropagation()}));
this.own(b(this._textField,"click",function(a){a.stopPropagation()}));this.own(b(this._textField,"keydown",f.hitch(this,"doResize")));this.own(b(this._textField,"contextmenu",function(a){dojo.stopEvent(a)}));this.createFocusTextListener();return k},createFocusTextListener:function(){this._textFocusListener=f.hitch(this,"_documentMouseClickHandler");document.body.addEventListener("click",this._textFocusListener,!0)},_mouseUpListener:function(a){this._mouseDownOnText?this._mouseDownOnText=!1:this.inherited(arguments)},
_mouseMoveListener:function(a){this._mouseDownOnText||this.inherited(arguments)},_mouseDownHandler:function(a){a.target===this._textField?this._mouseDownOnText=!0:this.inherited(arguments)},_keyHandler:function(a){l.curNode===this._textField?k.ENTER===this._getKeyCode(a)&&(this.commit(),a.stopPropagation(),a.preventDefault()):this.inherited(arguments)},_documentMouseClickHandler:function(a){this._textField.focus();this.removeTextFocusListener();a.stopPropagation();this.emit("startEditing",a)},showAffordances:function(a,
b,c){this.inherited(arguments);this._textField.value="";e.set(this._textField,"visibility","hidden");e.set(this._textField,"width","")},draw:function(a,b){this.inherited(arguments);if(!a||!(2<=a.length&&b&&2<=b.length))e.set(this._textField,"visibility","hidden");else{var c=this._imageNodePosition;a[1]>b[1]?(e.set(this._textField,"top",a[1]+this._VERTICAL_GAP+"px"),e.set(this._textField,"bottom","")):(e.set(this._textField,"bottom",c.h-a[1]+this._VERTICAL_GAP+"px"),e.set(this._textField,"top",""));
e.set(this._textField,"right",c.w-a[0]+"px");e.set(this._textField,"visibility","visible")}},commit:function(){if(this._isPositioned()){var a=[this._anchorPoint[0]/this._imageNodePosition.w,this._anchorPoint[1]/this._imageNodePosition.h,this._endPoint[0]/this._imageNodePosition.w,this._endPoint[1]/this._imageNodePosition.h],b=(0>a[1]||1<a[1])&&(0>a[3]||1<a[3]);(0>a[0]||1<a[0])&&(0>a[2]||1<a[2])||b?this._resetAnnotation("delete"):(a={fcn:"springLoadedModeAction",args:{type:this.matlabInteractionFunction,
axesIndex:-1,configurationData:{relativePosition:a,text:this._textField.value},mode:this.mode}},this._textField.blur(),this.emit("interaction",a),document.body.removeEventListener("keydown",this._keyHandlerFcn,!0),this._reset())}else this._rollback()},doResize:function(a){a=1.2*this._getStringWidthInPixels(this._textField.value,this._textField);var b=c.position(this._textField);a>b.w&&b.x-(a-b.w)>this._imageNodePosition.x&&e.set(this._textField,"width",a+"px")},hide:function(a){this.removeTextFocusListener();
this.inherited(arguments)},destroy:function(){this.removeTextFocusListener();this.inherited(arguments)},removeTextFocusListener:function(){document.body.removeEventListener("click",this._textFocusListener,!0)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ChartHandler":function(){define("dojo/_base/declare dojo/Evented dijit/Destroyable dojo/touch dojo/on dojo/dom-style dojo/_base/lang dojo/_base/event MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils".split(" "),function(h,
f,g,e,d,c,b,a,k){return h([f,g,k],{_figureView:null,_figureModel:null,_eventHandler:null,_cursorHotSpot:null,_windowMouseUpListener:null,_windowMouseMoveListener:null,_lastMouseDownLocation:null,_currentAxesIndex:null,_cursorImagePath:null,_overChart:!1,_MODELESS_INTERACTION:"modeLessInteractionCallback",_CHART_INTERACTION:"CHART_INTERACTION",constructor:function(a,b,c,d){this._figureView=a;this._figureModel=b;this._eventHandler=c;this._cursorImagePath=d;this._cursorHotSpot=[0,0]},_getMouseEventData:function(a){return this._figureModel.getMouseEventData(a,
this._figureView,this._cursorHotSpot)},_checkIfMouseOverInteractiveChart:function(a){a=this._figureModel.getChartType()[a.MouseOverAxes.Index];return"geobubble"===a||"heatmap"===a},WindowMouseDownHandler:function(c){if(this._checkIfMouseOverInteractiveChart(c)){this._windowMouseMoveListener||(this._windowMouseMoveListener=d.pausable(window,e.move,b.hitch(this,"WindowMouseMoveHandler")));this._windowMouseMoveListener.resume();this.removeEventListener(window,"mouseup",this._windowMouseUpListener);this._windowMouseUpListener=
b.hitch(this,"WindowMouseUpHandler");this.addEventListener(window,"mouseup",this._windowMouseUpListener);var f=this;f._eventHandler.processEvent(function(a){f._emitChartInteraction("WindowMousePress",a)},c);this._currentAxesIndex=c.MouseOverAxes.Index;a.stop(c)}this._lastMouseDownLocation=this.getEventPosition(c)},WindowMouseMoveHandler:function(a){a=this._getMouseEventData(a);this._overChart=a.isMouseOverChart;if(!this.hasMouseClicked(a,this._lastMouseDownLocation)&&(null!=this._currentAxesIndex||
-1<a.MouseOverAxes.Index)){var b=this;b._eventHandler.processEvent(function(a){b._emitChartInteraction("WindowMouseMotion",a)},a)}},WindowMouseLeaveHandler:function(a){if(this._overChart){this._overChart=!1;a=this._getMouseEventData(a);var b=this;b._eventHandler.processEvent(function(a){b._emitChartInteraction("WindowMouseLeave",a)},a)}},WindowMouseUpHandler:function(b){b=this._getMouseEventData(b);var c=this;c._eventHandler.processEvent(function(a){c._emitChartInteraction("WindowMouseRelease",a);
c._currentAxesIndex=null},b);this._windowMouseMoveListener&&this._windowMouseMoveListener.pause();this._lastMouseDownLocation=null;this.removeEventListener(window,"mouseup",this._windowMouseUpListener);a.stop(b)},WindowMouseWheelHandler:function(b){if(this._checkIfMouseOverInteractiveChart(b)){var c=this;c._eventHandler.processEvent(function(a){c._emitChartInteraction("WindowScrollWheel",a)},b);a.stop(b)}},_isDragEvent:function(a){return!this.hasMouseClicked(a,this._lastMouseDownLocation)&&null!=
this._lastMouseDownLocation},_emitChartInteraction:function(a,b){var c=this.getEventPosition(b),c={x:c.x,y:c.y},c=this.addCursorOffset(c,this._cursorHotSpot),c=this.convertEventToMatlabRelativeCoords(c,this._figureView.getDomNode()),c={type:this._CHART_INTERACTION,interaction:a,x:c.x,y:c.y,isDragEvent:this._isDragEvent(b)};this.isEventInsideAxes(b,this._figureView.getDomNode())?c.axesIndex=b.MouseOverAxes.Index:c.axesIndex=this._currentAxesIndex;"WindowScrollWheel"===a&&(c.wheelDelta=b.deltaY/120||
b.detail/3);this.emit(this._CHART_INTERACTION,{fcn:this._MODELESS_INTERACTION,args:c})},destroy:function(){this.removeEventListener(window,"mouseup",this._windowMouseUpListener);this._windowMouseMoveListener&&this._windowMouseMoveListener.pause()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ModeManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/on dojo/touch dojo/Evented dijit/Destroyable dojo/has MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ROI MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/InteractionsContextMenu MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLegend MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostColorbar MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXGrid MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYGrid MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostTitle MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXLabel MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYLabel MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/LineAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/ArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/DoubleArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextArrowAnnotation MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L){return h([l,m,L],{_figureView:null,_figureModel:null,_windowMouseMoveListener:null,_windowMouseUpListener:null,_ROI:null,_codeGen:null,_eventHandler:null,_maintainROI:!1,_lastMouseDownLocation:null,_currentAxesPosition:null,_cursorTimeout:null,_deferredCodeGen:null,_cursorHotSpot:null,_interactionContextMenu:null,_lastMouseMoveEvent:null,_isIEBrowser:!1,_springLoadedAffordanceObjects:null,_springLoadedAffordanceModules:null,_undoRedoManager:null,
_MODE_INTERACTION:"modeInteraction",_cursorImagePath:null,constructor:function(a){this._figureView=a.figureView;this._figureModel=a.figureModel;this._codeGen=a.codeGenerator;a.actionService&&a.contextMenuGenerator&&this._addInteractionsContextMenu(a.actionService,a.contextMenuGenerator);this._cursorHotSpot=[0,0];this._isIEBrowser=this._checkIfIEBrowser();this._springLoadedAffordanceObjects={placedLegendMode:null,placedColorbarMode:null,placedGridMode:null,placedXGridMode:null,placedYGridMode:null,
placedTitleMode:null,placedXLabelMode:null,placedYLabelMode:null,placedLineMode:null,placedArrowMode:null,placedDoubleArrowMode:null,placedTextArrowMode:null};this._springLoadedAffordanceModules={placedLegendMode:r,placedColorbarMode:s,placedGridMode:t,placedXGridMode:u,placedYGridMode:v,placedTitleMode:w,placedXLabelMode:x,placedYLabelMode:B,placedLineMode:A,placedArrowMode:D,placedDoubleArrowMode:F,placedTextArrowMode:H}},setCursorImagePath:function(a){this._cursorImagePath=a},setEventHandler:function(a){this._eventHandler=
a},_addInteractionsContextMenu:function(b,c){this._interactionContextMenu=new p(b,c,this._figureView,this._figureModel);a(this._interactionContextMenu,"ModeContextMenuAction",f.hitch(this,"_WindowMouseRightClick"))},WindowButtonMouseDown:function(c){if(this._springLoadedAffordanceModules.hasOwnProperty(this._figureModel.getMode()))this.notify("ModeWindowButtonMouseDown",c),this.removeEventListener(window,"mouseup",this._windowMouseUpListener),this._windowMouseUpListener=f.hitch(this,function(a){this.notify("ModeWindowButtonMouseUp",
a);this.removeEventListener(window,"mouseup",this._windowMouseUpListener)}),this.addEventListener(window,"mouseup",this._windowMouseUpListener);else{if(""!==this._figureModel.getMode()&&this.isEventInsideAxes(c,this._figureView.getDomNode())||"Exploration.Datacursor"===this._figureModel.getMode()){if(this._isPZRenabled(c)){this._windowMouseMoveListener||(this._windowMouseMoveListener=a.pausable(window,k.move,f.hitch(this,"ModeWindowButtonMouseMove")));this._windowMouseMoveListener.resume();this.removeEventListener(window,
"mouseup",this._windowMouseUpListener);this._windowMouseUpListener=f.hitch(this,"ModeWindowButtonMouseUp");this.addEventListener(window,"mouseup",this._windowMouseUpListener);var d=this;d._eventHandler.processEvent(function(a){d.notify("WindowButtonMouseDown",a)},c);if("Exploration.Zoom"===this._figureModel.getMode()&&"in"===this._figureModel.getZoomDirection()){this._ROI||(this._ROI=new n(this._figureView._wrapperElement));var e=b.position(this._figureView._wrapperElement);this._ROI.setTopLeft(e.y,
e.x);e=this.addCursorOffset(c,this._cursorHotSpot);this._ROI.setAnchorPoint(e.x,e.y);this._currentAxesPosition=c.MouseOverAxes.axesPlotBox}}g.stop(c)}this._lastMouseDownLocation=this.getEventPosition(c)}},WindowButtonMouseMove:function(a){var b=this._figureModel.getMode(),c=this._figureModel.getZoomDirection();this._lastMouseMoveEvent=a;this.removeCursorStyle();this.isEventInsideAxes(a,this._figureView.getDomNode())&&this._isPZRenabled(a)&&this.applyCursorStyle(b,c,a)},_isPZRenabled:function(a){var b=
!0,c=this._figureModel.getIsPZREnabled();this.isEventInsideAxes(a,this._figureView.getDomNode())&&(c&&c.length>=a.MouseOverAxes.Index)&&(b=0!==c[a.MouseOverAxes.Index]);return b},WindowMouseDblClick:function(a){if(""!==this._figureModel.getMode()&&this.isEventInsideAxes(a,this._figureView.getDomNode())){var b=this;b._eventHandler.processEvent(function(a){b.notify("WindowMouseDblClick",a);b._insertFigureInteractions({type:"WindowMouseDblClick",interactionType:b._MODE_INTERACTION})},a)}},_WindowMouseRightClick:function(a){this._eventHandler.clearEventQueue();
""!==this._figureModel.getMode()&&this.isEventInsideAxes(a,this._figureView.getDomNode())&&(this.notify("WindowMouseRightClick",a),this._insertFigureInteractions({type:"WindowMouseRightClick",interactionType:this._MODE_INTERACTION,tag:a.Tag}),"ResetView"!==a.Tag&&"Reset"!==a.Tag&&this._codeGen&&(this._deferredCodeGen=this._codeGen.attach(this._figureView.getGraphicsViewContainerNode())));g.stop(a)},updateContextMenuEventData:function(a){this._interactionContextMenu.updateContextMenuEventData(a)},
WindowButtonMouseWheel:function(a){if("Exploration.Zoom"===this._figureModel.getMode()&&!a.isMouseOverChart){var b=this;b._eventHandler.processEvent(function(a){b.notify("WindowButtonMouseWheel",a);b._insertFigureInteractions({type:"WindowButtonMouseWheel",interactionType:b._MODE_INTERACTION})},a);g.stop(a)}},ModeWindowButtonMouseMove:function(a){a=this._getMouseEventData(a);if("Exploration.Zoom"===this._figureModel.getMode()&&"in"===this._figureModel.getZoomDirection()){var b=null;this.isEventInsideAxes(a,
this._figureView.getDomNode())&&this._isEventOverTheSameAxes(a)&&this._isCurrentAxes2D(a)?(b=this.addCursorOffset(a,this._cursorHotSpot),b=this._clipXYbyAxesPlotBox(a.MouseOverAxes.axesPlotBox,b.x,b.y),this._maintainROI=!0):this._maintainROI&&(b=this.getEventPosition(a),b=this._clipXYbyAxesPlotBox(this._currentAxesPosition,b.x,b.y));if(b){this._ROI.drawROI(b.x,b.y);return}}if(!this.hasMouseClicked(a,this._lastMouseDownLocation)){var c=this;c._eventHandler.processEvent(function(a){c.notify("ModeWindowButtonMouseMove",
a)},a)}g.stop(a)},ModeWindowButtonMouseUp:function(a){var b="Exploration.Datacursor"==this._figureModel.getMode();this._windowMouseMoveListener.pause();this.removeEventListener(window,"mouseup",this._windowMouseUpListener);a=this._getMouseEventData(a);this._ROI&&(this._ROI.hide(),this._ROI.resetAnchorPoint());this._maintainROI=!1;var c=this;c._eventHandler.processEvent(function(a){c.notify("ModeWindowButtonMouseUp",a);if(!b){var d=c.getEventPosition(a);c._insertFigureInteractions({type:"ModeWindowButtonMouseUp",
x:d.x,y:d.y,interactionType:c._MODE_INTERACTION});d="Exploration.Pan"===c._figureModel.getMode()||"Exploration.Rotate3d"===c._figureModel.getMode();c._codeGen&&(d&&!c.hasMouseClicked(a,c._lastMouseDownLocation)?c._deferredCodeGen=c._codeGen.attach(c._figureView.getGraphicsViewContainerNode()):d||(c._deferredCodeGen=c._codeGen.attach(c._figureView.getGraphicsViewContainerNode())))}},a);this._currentAxesPosition=null;g.stop(a)},removeCursorStyle:function(){var a=this._figureView.getDomNode();this._checkIfIEBrowser()?
c.set(a,"cursor",""):(e.remove(a,"panCursor"),e.remove(a,"rotateCursor"),e.remove(a,"zoomCursor"),e.remove(a,"zoom3DCursor"),e.remove(a,"zoomOutCursor"),e.remove(a,"datatipCursor"))},applyCursorStyle:function(a,b,c){if(!c||!c.isMouseOverChart){var d=this._figureView.getDomNode();this._setCursorStyle(a,b,c,d);this._cursorHotSpot=this._isIEBrowser?[0,0]:[7,7]}},_setCursorStyle:function(a,b,c,d){switch(a){case "Exploration.Pan":this._isIEBrowser?this._setCursorImageStyleForIE(d,"pan_cursor.cur"):e.add(d,
"panCursor");break;case "Exploration.Rotate3d":this._isIEBrowser?this._setCursorImageStyleForIE(d,"rotate_cursor.cur"):e.add(d,"rotateCursor");break;case "Exploration.Zoom":"in"===b?c&&this._isCurrentAxes2D(c)?this._isIEBrowser?this._setCursorImageStyleForIE(d,"zoomin_cursor.cur"):e.add(d,"zoomCursor"):this._isIEBrowser?this._setCursorImageStyleForIE(d,"zoomin_cursor3D.cur"):e.add(d,"zoom3DCursor"):"out"===b&&(this._isIEBrowser?this._setCursorImageStyleForIE(d,"zoomout_cursor.cur"):e.add(d,"zoomOutCursor"));
break;case "Exploration.Datacursor":this._isIEBrowser?this._setCursorImageStyleForIE(d,"datatip_cursor.cur"):e.add(d,"datatipCursor")}},_setCursorImageStyleForIE:function(a,b){c.set(a,"cursor","url("+this._cursorImagePath+"figurefloatingpalette/"+b+"), default")},_isEventOverTheSameAxes:function(a){return this._currentAxesPosition&&this._currentAxesPosition.xLow===a.MouseOverAxes.axesPlotBox.xLow&&this._currentAxesPosition.xHigh===a.MouseOverAxes.axesPlotBox.xHigh&&this._currentAxesPosition.yLow===
a.MouseOverAxes.axesPlotBox.yLow&&this._currentAxesPosition.yHigh===a.MouseOverAxes.axesPlotBox.yHigh},_isCurrentAxes2D:function(a){return 1===this._figureModel.getIs2D()[a.MouseOverAxes.Index]},_setupInteractionEvents:function(a){this.own(a.on("interaction",f.hitch(this,function(a){this.emit("interaction",a)})))},isInSpringLoadedMode:function(){return this._springLoadedAffordanceObjects.hasOwnProperty(this._figureModel.getMode())},setState:function(b){this._figureModel=b;this.removeCursorStyle();
this.applyCursorStyle(this._figureModel.getMode(),this._figureModel.getZoomDirection(),this._lastMouseMoveEvent);this._cursorTimeout&&clearTimeout(this._cursorTimeout);var c=this._figureView.getDomNode();c&&e.remove(c,"waitCursor");c=!1;null!==b.getUndoRedoData()&&b.getUndoRedoData().isUndoRedo&&(c=!0);for(var d in this._springLoadedAffordanceObjects)this._figureModel.getMode()!==d&&this._springLoadedAffordanceObjects[d]?(this._springLoadedAffordanceObjects[d].clearWait(),this._springLoadedAffordanceObjects[d].hide(c)):
this._figureModel.getMode()===d&&(this._springLoadedAffordanceObjects[d]?this._springLoadedAffordanceObjects[d].showAffordances(this._figureModel.getAxesPositions(),this._figureView.getWrapperNode(),this._figureView.getDomNode()):(this._springLoadedAffordanceObjects[d]=new this._springLoadedAffordanceModules[d](this._figureModel,this._figureView),this.own(a(this._springLoadedAffordanceObjects[d],"WindowButtonMouseDown",f.hitch(this,function(a){this.WindowButtonMouseDown(a)}))),this.own(a(this._springLoadedAffordanceObjects[d],
"startEditing",f.hitch(this,function(a){this.emit("startEditing",a)}))),this._springLoadedAffordanceObjects[d].showAffordances(this._figureModel.getAxesPositions(),this._figureView.getWrapperNode(),this._figureView.getDomNode()),this._setupInteractionEvents(this._springLoadedAffordanceObjects[d])));if(this._codeGen&&b._interactionData&&b._interactionData.iClearCode)this._codeGen.detach();else if(this._codeGen&&b._interactionData&&b._interactionData.iCode){b=b._interactionData;b.iShowCode&&(this._deferredCodeGen=
this._codeGen.attach(this._figureView.getGraphicsViewContainerNode()));var g=this._codeGen;g.setGeneratedCode(b.iCode);this._deferredCodeGen&&!this._deferredCodeGen.isResolved()?this._deferredCodeGen.then(function(a){g.updateCodeArea()}):g.updateCodeArea()}},setUndoRedoManager:function(a){this._undoRedoManager=a},notify:function(a,b){var c=this.getEventPosition(b),c={x:c.x,y:c.y},c=this.addCursorOffset(c,this._cursorHotSpot),c=this.convertEventToMatlabRelativeCoords(c,this._figureView.getDomNode()),
c={type:a,x:c.x,y:c.y};this.isEventInsideAxes(b,this._figureView.getDomNode())&&(c.axesIndex=b.MouseOverAxes.Index);"WindowButtonMouseWheel"===a&&(c.wheelDelta=b.deltaY/120||b.detail/3);"WindowMouseRightClick"===a&&(c.Tag=b.Tag);this.emit("interaction",{fcn:"modeInteractionCallback",args:c})},destroy:function(){this._ROI&&this._ROI.destroy();this._codeGen&&this._codeGen.destroy();this._windowMouseMoveListener&&this._windowMouseMoveListener.pause();for(var a in this._springLoadedAffordanceObjects)this._springLoadedAffordanceObjects[a]&&
this._springLoadedAffordanceObjects[a].destroy();this.removeEventListener(window,"mouseup",this._windowMouseUpListener)},_clipXYbyAxesPlotBox:function(a,b,c){var d=a.yHigh,e=a.yLow,f=a.xHigh;a=a.xLow;var g={};g.y=c>d?d:c<e?e:c;g.x=b<a?a:b>f?f:b;return g},switchLayouts:function(){this._springLoadedAffordanceObjects[this._figureModel.getMode()]&&this._springLoadedAffordanceObjects[this._figureModel.getMode()].hide()},setModeFromClient:function(a){this._cursorTimeout&&clearTimeout(this._cursorTimeout);
a&&a!==this._figureModel.getMode()&&(this._cursorTimeout=setTimeout(f.hitch(this,function(){e.add(this._figureView.getDomNode(),"waitCursor")}),300));this._figureModel.setMode(a);this._figureModel.setIsPZREnabled("Exploration.Pan"===a||"Exploration.Zoom"===a||"Exploration.Rotate3d"===a)},isSpringLoadedMode:function(a){return this._springLoadedAffordanceModules.hasOwnProperty(a)},_getMouseEventData:function(a){return this._figureModel.getMouseEventData(a,this._figureView,this._cursorHotSpot)},_checkIfIEBrowser:function(){return q("trident")||
q("ie")||q("edge")},_insertFigureInteractions:function(a){a.codeGenState={attachCodeGenOnUndo:!1,attachCodeGenOnRedo:!0};this._codeGen&&this._codeGen.isCodeGenAttached()&&(a.codeGenState.attachCodeGenOnUndo=!0);this._undoRedoManager.insertInteractionsForUndoRedo(this._figureModel,a)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ROI":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/dom-construct"],function(h,f,g,e){return h(null,{_domNode:null,_anchorPoint:null,
_parentNode:null,_constraintLine:null,_top:0,_left:0,useConstraint:!0,color:"#0099ff",_CONSTRAINT_VIEW_THRESHOLD:15,_CENTER_OF_ROI:6,constructor:function(d){this._domNode=e.create("div");f.add(this._domNode,"figuremoderoi");f.add(this._domNode,"figureWidget");this._setParentNode(d);this._createConstraintLine();this.setColor(this.color)},_createConstraintLine:function(){this._constraintLine=e.create("div");f.add(this._constraintLine,"constraintLine constraintLineHorizontal constraintLineVertical");
e.place(this._constraintLine,this._domNode)},setAnchorPoint:function(d,c){this._anchorPoint=[d,c]},resetAnchorPoint:function(){this._anchorPoint=null},hide:function(){f.remove(this._domNode,"roiShow");f.add(this._domNode,"roiHidden")},setUseConstraint:function(d){this.useConstraint=d},drawROI:function(d,c){if(this._anchorPoint){var b=d-this._anchorPoint[0],a=this._anchorPoint[0]-this._left,e=c-this._anchorPoint[1],f=this._anchorPoint[1]-this._top,h=Math.abs(e),q=Math.abs(b),n=this.useConstraint&&
this._isRectangleShortAndFat(h,q),p=this.useConstraint&&this._isRectangleThinAndTall(h,q);0>e&&!n&&(f+=e);0>b&&!p&&(a+=b);b=g.get(this._domNode,"border-width");g.set(this._domNode,{height:h+"px",width:q+"px",left:a-b+"px",top:f-b+"px"});this.useConstraint&&(this._clearConstraintClasses(),this._drawConstraintROI(h,q));this._show()}},_isRectangleShortAndFat:function(d,c){return d<this._CONSTRAINT_VIEW_THRESHOLD&&c>this._CONSTRAINT_VIEW_THRESHOLD},_isRectangleThinAndTall:function(d,c){return c<this._CONSTRAINT_VIEW_THRESHOLD&&
d>this._CONSTRAINT_VIEW_THRESHOLD},_drawConstraintROI:function(d,c){if(this._isRectangleShortAndFat(d,c)){var b=g.get(this._domNode,"top");g.set(this._domNode,{height:this._CONSTRAINT_VIEW_THRESHOLD+"px",top:b-this._CENTER_OF_ROI+"px"});f.add(this._domNode,"roiHorizontal")}else this._isRectangleThinAndTall(d,c)&&(b=g.get(this._domNode,"left"),g.set(this._domNode,{width:this._CONSTRAINT_VIEW_THRESHOLD+"px",left:b-this._CENTER_OF_ROI+"px"}),f.add(this._domNode,"roiVertical"))},setColor:function(d){g.set(this._domNode,
{borderColor:d})},setTopLeft:function(d,c){this._top=d;this._left=c},_setParentNode:function(d){e.place(this._domNode,d);this._parentNode=d},_clearConstraintClasses:function(){f.remove(this._domNode,"roiHorizontal");f.remove(this._domNode,"roiVertical")},_show:function(){f.remove(this._domNode,"roiHidden");f.add(this._domNode,"roiShow")},destroy:function(){this._domNode&&e.destroy(this._domNode)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/InteractionsContextMenu":function(){define("dojo/_base/declare dojo/dom-style dojo/Evented dojo/_base/lang mw-actiondataservice/ActionDataService dojo/i18n!l10n/nls/actions dojo/aspect".split(" "),
function(h,f,g,e,d,c,b){return h([g],{_actionService:null,_modeActions:null,_contextMenuEvent:{},_contextMenuGenerator:null,_figureView:null,_figureModel:null,_ZOOM_IN_INDEX:0,_ZOOM_OUT_INDEX:1,_RESET_VIEW_INDEX:2,_RESET_INDEX:3,_ROTATEXY_INDEX:4,_ROTATEXZ_INDEX:5,_ROTATEYZ_INDEX:6,constructor:function(a,b,c,d){this._actionService=a;this._contextMenuGenerator=b;this._figureView=c;this._figureModel=d;this._setModeActions();this._setAspectHandles()},_setAspectHandles:function(){this._aspectHandles=
[];this._aspectHandles.push(b.before(this._contextMenuGenerator,"willOpen",e.hitch(this,"_removeModeMenuActions"),!0));this._aspectHandles.push(b.after(this._contextMenuGenerator,"willOpen",e.hitch(this,"_updateContextMenu"),!0));this._aspectHandles.push(b.after(this._contextMenuGenerator,"onClose",e.hitch(this,"_enableActions"),!0))},destroy:function(){this._removeModeActions(this._modeActions);this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]},updateContextMenuEventData:function(a){this._contextMenuEvent=
a},_setModeActions:function(){this._modeActions=[];this._modeActions[this._ZOOM_IN_INDEX]={id:"figure_zoom_in",enabled:!0,contextMenuGroup:"ModeInteraction",text:c.zoomInLabel,callback:e.hitch(this,this._modeEventData,"ZoomInOut")};this._modeActions[this._ZOOM_OUT_INDEX]={id:"figure_zoom_out",enabled:!0,contextMenuGroup:"ModeInteraction",text:c.zoomOutLabel,callback:e.hitch(this,this._modeEventData,"ZoomInOut")};this._modeActions[this._RESET_VIEW_INDEX]={id:"figure_reset_mode",enabled:!0,contextMenuGroup:"ModeInteraction",
text:c.resetFigure,callback:e.hitch(this,this._modeEventData,"ResetView")};this._modeActions[this._ROTATEXY_INDEX]={id:"figure_rotate_xy",enabled:!0,contextMenuGroup:"ModeInteraction",text:c.XYRotate,callback:e.hitch(this,this._modeEventData,"SnapToXY")};this._modeActions[this._ROTATEXZ_INDEX]={id:"figure_rotate_xz",enabled:!0,contextMenuGroup:"ModeInteraction",text:c.XZRotate,callback:e.hitch(this,this._modeEventData,"SnapToXZ")};this._modeActions[this._ROTATEYZ_INDEX]={id:"figure_rotate_yz",enabled:!0,
contextMenuGroup:"ModeInteraction",text:c.YZRotate,callback:e.hitch(this,this._modeEventData,"SnapToYZ")};this._modeActions[this._RESET_INDEX]={id:"figure_reset_rotatemode",enabled:!0,contextMenuGroup:"ModeInteraction",text:c.resetFigure,callback:e.hitch(this,this._modeEventData,"Reset")}},_removeModeMenuActions:function(a,b){this._removeModeActions(this._modeActions)},_updateContextMenu:function(a,b){if(b===this._figureView._imgElement){var c=this._actionService,d=f.get(b,"cursor");if(0<=d.indexOf("pan_cursor"))this._setPanModeAction(),
c.disableAction("rtc_clear_all_output");else if(0<=d.indexOf("zoomout_cursor"))this._setZoomOutAction(),c.disableAction("rtc_clear_all_output");else if(0<=d.indexOf("rotate_cursor"))this._setRotateAction(),c.disableAction("rtc_clear_all_output");else if(0<=d.indexOf("zoomin_cursor")||0<=d.indexOf("zoomin_cursor3D"))this._setZoomInAction(),c.disableAction("rtc_clear_all_output")}},_setZoomInAction:function(){this._addModeActions([this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._RESET_VIEW_INDEX]]);
this._removeModeActions([this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],this._modeActions[this._ROTATEXZ_INDEX],this._modeActions[this._ROTATEYZ_INDEX]])},_setPanModeAction:function(){this._addModeActions([this._modeActions[this._RESET_VIEW_INDEX]]);this._removeModeActions([this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],this._modeActions[this._ROTATEXZ_INDEX],
this._modeActions[this._ROTATEYZ_INDEX]])},_setZoomOutAction:function(){this._addModeActions([this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._RESET_VIEW_INDEX]]);this._removeModeActions([this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],this._modeActions[this._ROTATEXZ_INDEX],this._modeActions[this._ROTATEYZ_INDEX]])},_setRotateAction:function(){this._addModeActions([this._modeActions[this._RESET_INDEX],this._modeActions[this._ROTATEXY_INDEX],
this._modeActions[this._ROTATEXZ_INDEX],this._modeActions[this._ROTATEYZ_INDEX]]);this._removeModeActions([this._modeActions[this._ZOOM_IN_INDEX],this._modeActions[this._ZOOM_OUT_INDEX],this._modeActions[this._RESET_VIEW_INDEX]])},_addModeActions:function(a){var b=this._actionService;a.forEach(function(a){b.getAction(a.id)||b.addAction(a)})},_removeModeActions:function(a){var b=this._actionService;a.forEach(function(a){b.getAction(a.id)&&b.removeAction(a.id)})},_enableActions:function(){this._actionService.enableAction("rtc_clear_all_output")},
_modeEventData:function(a){var b=this._contextMenuEvent;b.Tag=a;this.emit("ModeContextMenuAction",b)}})})},"mw-actiondataservice/ActionDataService":function(){define(["dojo/_base/declare","mw-peermodel/PeerModelManager","mw-peermodel/_PeerModelListenerMixin","mw-peermodel/_PropertyIndexerMixin","mw-utils/Utils"],function(h,f,g,e,d){return h([g,e],{constructor:function(c){c=c||{};this._mode=c.mode||"StandAlone";this._nameSpace=c.nameSpace||"/actions/"+d.generateUuid();this._setupPeerModel();this._callbacks=
{};this._actionChangeCallbacks={};this._propertyToIndex="id"},_setupPeerModel:function(){switch(this._mode){case "StandAlone":this._peerModelManager=f.getClientInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this._peerModelManager.setRoot("Root");break;case "ActAsServer":this._peerModelManager=f.getServerInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this.start(this._peerModelManager);this._peerModelManager.setRoot("Root");break;case "ActAsClient":this._peerModelManager=
f.getClientInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this.start(this._peerModelManager);break;default:throw Error("The mode provided is not valid! Please use one of the following: StandAlone, ActAsServer or ActAsClient");}},onPropertySet:function(c){this.onActionChange({id:c.target.getProperty("id"),key:c.data.key,oldValue:c.data.oldValue,newValue:c.data.newValue})},onChildAdd:function(c){c.data.child.getProperty("id")||c.data.child.setProperty("id",c.data.child.getId());
this.onActionAdd({id:c.data.child.getProperty("id")})},loadActions:function(c){Array.isArray(c)&&c.forEach(function(b){this.addAction(b)},this)},addAction:function(c){if("ActAsClient"===this._mode)throw Error("Actions cannot be added while in ActAsClient Mode!");var b;c=c||{};if(c.id&&this._getPeerNodeIdForIndexedProperty(c.id))throw Error("Action id must be unique!");b=this._peerModelManager.getRoot().addChild("Action",c);c.id||b.setProperty("id",b.getId());c.callback&&this.addActionCallback(b.getProperty("id"),
c.callback);return b.getId()},getAction:function(c){return(c=this._actionById(c))?c.getProperties():null},getAllActions:function(){return this._peerModelManager.getRoot().getChildren().map(function(c){return c.getProperties()})},removeAction:function(c){if("ActAsClient"===this._mode)throw Error("Actions cannot be removed while in ActAsClient Mode!");var b=this._getPeerNodeIdForIndexedProperty(c);if(b&&this._peerModelManager.hasById(b))this._peerModelManager.getById(b).destroy(),delete this._callbacks[c];
else throw Error("This is not a valid action id!");},enableAction:function(c){this.updateAction(c,{enabled:!0})},disableAction:function(c){this.updateAction(c,{enabled:!1})},updateAction:function(c,b,a){var d=this._actionById(c);d&&(b.callback&&this.addActionCallback(c,b.callback),d.setProperties(b,a))},actionHasProperty:function(c,b){return this._actionById(c).hasProperty(b)},executeAction:function(c,b){var a;b=b||{};a=this._actionById(c);!0===a.getProperty("enabled")&&a.dispatchEvent("peerEvent",
a,b)},addActionCallback:function(c,b,a){var d=this._actionById(c),e;this.removeActionCallback(c);e=function(c){delete c.data.type;b.call(a||d.getProperties(),c.data)};this._callbacks[c]={callback:e,scope:a};d.addEventListener("peerEvent",e,a)},removeActionCallback:function(c){var b=this._actionById(c),a;if(a=this._callbacks[c])b.removeEventListener("peerEvent",a.callback,a.scope),delete this._callbacks[c]},addActionChangeCallback:function(c,b,a){var d=this._actionById(c),e;this.removeActionChangeCallback(c);
e=function(c){b.call(a,{property:c.data.key,oldValue:c.data.oldValue,newValue:c.data.newValue},c.originator)};this._actionChangeCallbacks[c]={callback:e,scope:a};d.addEventListener("propertySet",e,a)},removeActionChangeCallback:function(c){var b=this._actionById(c);this._actionChangeCallbacks[c]&&(b.removeEventListener("propertySet",this._actionChangeCallbacks[c].callback,this._actionChangeCallbacks[c].scope),delete this._actionChangeCallbacks[c])},onActionChange:function(c){},onActionAdd:function(c){},
_actionById:function(c){var b;(c=this._getPeerNodeIdForIndexedProperty(c))&&this._peerModelManager.hasById(c)&&(b=this._peerModelManager.getById(c));return b},destroy:function(){f.cleanup(this._nameSpace)}})})},"mw-peermodel/_PeerModelListenerMixin":function(){define(["dojo/_base/declare"],function(h){return h([],{start:function(f){f=f||this.manager;f.setSyncEnabled(!0)},stop:function(f){f=f||this.manager;f.setSyncEnabled(!1)},addManagerListeners:function(f){f=f||this.manager;f.addEventListener("rootSet",
this.rootSetObserver,this);f.addEventListener("rootUnset",this.rootUnsetObserver,this);f.addEventListener("childMoved",this.childMovedObserver,this)},removeManagerListeners:function(f){f=f||this.manager;f.removeEventListener("rootSet",this.rootSetObserver,this);f.removeEventListener("rootUnset",this.rootUnsetObserver,this);f.removeEventListener("childMoved",this.childMovedObserver,this)},addNodeListeners:function(f){f.addEventListener("childAdded",this.childAddedObserver,this);f.addEventListener("childDestroyed",
this.childDestroyedObserver,this);f.addEventListener("propertySet",this.propertySetObserver,this);f.addEventListener("peerEvent",this.peerEventObserver,this)},removeNodeListeners:function(f){f.removeEventListener("childAdded",this.childAddedObserver,this);f.removeEventListener("childDestroyed",this.childDestroyedObserver,this);f.removeEventListener("propertySet",this.propertySetObserver,this);f.removeEventListener("peerEvent",this.peerEventObserver,this)},rootSetObserver:function(f){this.addNodeListeners(f.target)},
rootUnsetObserver:function(f){this.removeNodeListeners(f.target)},childMovedObserver:function(f){this.onChildMove(f)},childAddedObserver:function(f){this.addNodeListeners(f.data.child);this.onChildAdd(f)},childDestroyedObserver:function(f){this.removeNodeListeners(f.data.child);this.onChildDestroy(f)},propertySetObserver:function(f){this.onPropertySet(f)},peerEventObserver:function(f){this.onPeerEvent(f)},onPeerEvent:function(f){},onChildAdd:function(f){},onChildDestroy:function(f){},onPropertySet:function(f){},
onChildMove:function(f){}})})},"mw-peermodel/_PropertyIndexerMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h([],{constructor:function(){this._propertyIndexMap={};g.before(this,"onChildAdd",f.hitch(this,function(e){var d=e.data.child.getProperty(this._propertyToIndex);d&&(this._propertyIndexMap[d]=e.data.child.getId())}));g.before(this,"onPropertySet",f.hitch(this,function(e){e.data.key===this._propertyToIndex&&e.data.newValue&&(this._propertyIndexMap[e.data.newValue]=
e.target.getId())}));g.before(this,"onChildDestroy",f.hitch(this,function(e){delete this._propertyIndexMap[e.data.child.getProperty(this._propertyToIndex)]}))},_getPeerNodeIdForIndexedProperty:function(e){return this._propertyIndexMap[e]}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview dojo/i18n!l10n/nls/figureToolStrip".split(" "),
function(h,f,g,e,d,c,b,a,k){return h([a],{mode:"placedLegendMode",addLegendText:k.addLegendText,legendTooltipText:k.addLegendTooltipText,showAffordances:function(a,b,c){var d=e.position(c),g=e.position(b);a.forEach(f.hitch(this,function(a,c){this.figureModel.isAxesObscuredByEarlierChild(c)||this.positionAffordance(null,(a[0]+a[2])*d.w+d.x-g.x-0.02*a[2]*d.w,(1-a[1]-a[3])*d.h+d.y-g.y+0.05*a[3]*d.h,b,"legend",c,"placeableGhostLegend",this.legendTooltipText)}));this.show()},createDomNodes:function(a,
b,d){a=g.create("div",{title:b,innerHTML:"\x3cdiv class\x3d'legendIcon'\x3e\x3c/div\x3e\x3cspan\x3e"+this.addLegendText+"\x3c/span\x3e"},a);c.add(a,d);return a}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dojo/on dojo/touch MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview".split(" "),function(h,f,g,e,d,c){return h([c],{_modeClearListener:null,constructor:function(b){this._modeClearListener=
e.pausable(document.body,"click",f.hitch(this,"clearMode"));this._modeClearListener.pause();this.own(this._modeClearListener)},addClickListener:function(b,a,c){this.inherited(arguments);e(b,d.press,function(a){a.stopPropagation()})},_keyHandler:function(b){b.keyCode===g.ESCAPE&&(this.clearMode(),b.stopPropagation())},_addKeyListener:function(){this._keyHandlerFcn||(this._keyHandlerFcn=f.hitch(this,"_keyHandler"));this._removeKeyListener();document.body.addEventListener("keydown",this._keyHandlerFcn,
!0)},_removeKeyListener:function(){document.body.removeEventListener("keydown",this._keyHandlerFcn,!0)},clearMode:function(){this.inherited(arguments);this._modeClearListener.pause();this._removeKeyListener()},show:function(){this.inherited(arguments);this._modeClearListener.resume();this._addKeyListener()},hide:function(b){this.inherited(arguments);this._modeClearListener.pause();this._removeKeyListener()},destroy:function(){this.inherited(arguments);this._keyHandlerFcn&&document.body.removeEventListener("keydown",
this._keyHandlerFcn,!0)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostColorbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on dojo/query MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h([k],{mode:"placedColorbarMode",promptText:l.addColorBarText,colorbarTooltipText:l.addColorBarTooltipText,
showAffordances:function(b,c,g){var h=e.position(g),k=e.position(c);b.forEach(f.hitch(this,function(b,e){if(!this.figureModel.isAxesObscuredByEarlierChild(e)){var f=0.06*b[2]*h.w,g=0.9*b[3]*h.h,f=20>f?20:f;this.positionAffordance({w:g,h:f},(b[0]+b[2])*h.w+h.x-k.x+1.2*f,(1-b[1]-b[3])*h.h+h.y-k.y+0.05*b[3]*h.h,c,"colorbar",e,"placeableGhostColorbar",this.colorbarTooltipText);d.set(this.previewDomNodes[e],"font-size",0.5*f+"px");var l=this._getStringWidthInPixels(this.promptText,this.previewDomNodes[e])<
g;a("p",this.previewDomNodes[e]).forEach(function(a){l?d.set(a,"visibility","visible"):d.set(a,"visibility","hidden")})}}));this.show()},createDomNodes:function(a,b,d){a=g.create("div",{title:b,innerHTML:"\x3cp\x3e"+this.promptText+"\x3c/p\x3e"},a);c.add(a,d);return a}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/AxesDecorationModePreview dojo/i18n!l10n/nls/figureToolStrip".split(" "),
function(h,f,g,e,d,c,b,a,k){return h([a],{matlabInteractionFunction:"grid",mode:"placedGridMode",text:k.addGridText,gridIconClass:"gridIcon",tooltipText:k.addGridTooltipText,createDomNodes:function(a,b,d){a=g.create("div",{title:b,innerHTML:"\x3cdiv class\x3d'"+this.gridIconClass+"'\x3e\x3c/div\x3e\x3cspan\x3e"+this.text+"\x3c/span\x3e"},a);c.add(a,d);return a},showAffordances:function(a,b,c){var d=e.position(c),g=e.position(b);a.forEach(f.hitch(this,function(a,c){this.figureModel.isAxesObscuredByEarlierChild(c)||
this.positionAffordance(null,(a[0]+a[2]/2)*d.w+d.x-g.x,(1-a[1]-a[3]/2)*d.h+d.y-g.y,b,this.matlabInteractionFunction,c,"placeableGhostGrid",this.tooltipText)}));this.show()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,f,g,
e,d,c,b,a){return h([b],{matlabInteractionFunction:"xgrid",mode:"placedXGridMode",text:a.addXGridText,gridIconClass:"xgridIcon",tooltipText:a.addXGridTextTooltipText})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostGrid dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,f,g,e,d,c,
b,a){return h([b],{matlabInteractionFunction:"ygrid",mode:"placedYGridMode",text:a.addYGridText,gridIconClass:"ygridIcon",tooltipText:a.addYGridTooltipText})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostTitle":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,f,g,e,d,c,b,a){return h([b],
{promptText:a.addTitleText,mode:"placedTitleMode",positionMatrix:[[0,1,0.5],[0,1,1]],actionId:"title",getLabels:function(){return this.figureModel.getTitles()},positionAffordance:function(a,b,c,f,h,p,r,s){this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[p]||(this.previewDomNodes[p]=this.createDomNodes(f,s,r,h,p),this.addClickListener(this.previewDomNodes[p],h,p));f=e.position(f);a=100*d.get(this.previewDomNodes[p],"width")/f.w;f=100*d.get(this.previewDomNodes[p],"height")/f.h;
100<c+f&&(c=100-f);d.set(this.previewDomNodes[p],{position:"absolute",bottom:c+"%",left:b-a/2+"%"});this._textInputElements[p].originalPosition=null;g.set(this.previewDomNodes[p],"data-tag",h+"."+p)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/dom dojo/on dijit/focus dijit/registry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/SpringLoadedModePreview MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/TextInputElement".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h([m],{_textInputElements:null,promptText:"",textInputElementCSSClass:"ghostLabel",_textCommitListener:null,_matlabInteractionFunction:"",createDomNodes:function(b,c,d,e,g){this._matlabInteractionFunction=e;null===this._textInputElements&&(this._textInputElements=[]);this._textInputElements[g]=new q({widgetClass:this.textInputElementCSSClass,placeHolderText:this.promptText});this._textInputElements[g].placeAt(b);this.own(a(this._textInputElements[g],"startEditing",
f.hitch(this,function(a){this.emit("startEditing",a)})));return this._textInputElements[g].domNode},_emitTextEditEvent:function(a,b,c,d){this.emit("interaction",{fcn:"springLoadedModeAction",args:{type:a,axesIndex:b,configurationData:c,mode:this.mode,retainMode:d}})},addClickListener:function(b,c,d){null===this._textCommitListener&&(this._textCommitListener=[]);this._textCommitListener[d]=a(l.getEnclosingWidget(b),"textcommit",f.hitch(this,function(a){var b=!1;this._textInputElements.forEach(function(c){c===
a.focusedWidget&&(b=!0,c.stopEditing())});a.eventKeyCode&&(this._focusNextInputField(d,a.eventKeyCode),1<this._textInputElements.length&&(this._textInputElements[d].stopEditing(),b=!0));2<=this._textInputElements.length&&""===a.textValue&&this._textInputElements[d].setPromptingState(!0);this._emitTextEditEvent(c,d,a.textValue,b)}))},_focusNextInputField:function(a,b){var c=a,d=null;switch(b){case "TAB":0===c&&(c=this._textInputElements.length);d=this._textInputElements[c-1];break;case "SHIFTTAB":c===
this._textInputElements.length-1&&(c=-1),d=this._textInputElements[c+1]}null!==d&&void 0!==d&&(d.startEditing(),d.focus(),this.emit("startEditing",{}))},showAffordances:function(a,b,c){null===this._textCommitListener&&(this._textCommitListener=[]);var e=this.getLabels(),h=this.parentNode&&"block"===d.get(this.parentNode,"display");this.parentNode||(this.parentNode=g.create("div",null,b));d.set(this.parentNode,{display:"block",position:"absolute",top:"0px",left:"0px",width:d.get(c,"width")+"px",height:d.get(c,
"height")+"px"});a.forEach(f.hitch(this,function(a,b){this.figureModel.isAxesObscuredByEarlierChild(b)||(this.positionAffordance(null,100*(this.positionMatrix[0][0]+this.positionMatrix[0][1]*a[0]+this.positionMatrix[0][2]*a[2]),100*(this.positionMatrix[1][0]+this.positionMatrix[1][1]*a[1]+this.positionMatrix[1][2]*a[3]),this.parentNode,this.actionId,b),this.updateTextField(this._textInputElements[b],e[b]))}));this.show();!h&&0<this._textInputElements.length&&(a=this._textInputElements[this._textInputElements.length-
1],a.setPromptingState(!1),a.startEditing(),a.focus(),this.emit("startEditing",{}))},updateTextField:function(a,c){b.isDescendant(k.curNode,a.domNode)||a.isEditing()?a.focus():c?(a.setPromptingState(!1),a.setText(c)):a.setPromptingState(!0)},hide:function(a){var b=this._textInputElements.filter(function(a){return a.isEditing()});a?b.forEach(f.hitch(this,function(a){a.rollback()})):b.forEach(f.hitch(this,function(a){a.commit()}));this._textInputElements.forEach(function(a){a.destroy()});this._textInputElements=
[];g.destroy(this.parentNode);this.parentNode=null;this.inherited(arguments)},show:function(){d.set(this.parentNode,"display","block");this.previewDomNodes.forEach(function(a,b){d.set(a,"display","block")})},destroy:function(){null!==this._textCommitListener&&this._textCommitListener.forEach(function(a){a.remove()});this._textInputElements.forEach(function(a){a.destroy()});this.inherited(arguments)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostXLabel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel dojo/i18n!l10n/nls/figureToolStrip".split(" "),
function(h,f,g,e,d,c,b,a){return h([b],{promptText:a.addXLabelText,mode:"placedXLabelMode",positionMatrix:[[0,1,0.5],[1,-1,0]],actionId:"xlabel",getLabels:function(){return this.figureModel.getXLabels()},positionAffordance:function(a,b,c,f,h,p,r,s){this.parentNode=f;this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[p]||(this.previewDomNodes[p]=this.createDomNodes(f,s,r,h,p),this.addClickListener(this.previewDomNodes[p],h,p));a=e.position(f);f=100*d.get(this.previewDomNodes[p],"width")/
a.w;c+=6/(2>=this.previewDomNodes.length?1:this.previewDomNodes.length);this.figureModel.getIs2D()[p]?d.set(this.previewDomNodes[p],{position:"absolute",top:c+"%",left:b-f/2+"%"}):(b=this.figureModel.getXLabelPositions()[p],0<Math.abs(b[0])&&0<Math.abs(b[1])?(b=this.figureView.getAxesPlotBox(b),d.set(this.previewDomNodes[p],{position:"absolute",top:b.yLow-a.y+"px",left:b.xLow-a.x+"px"})):(c=this.figureView.getAxesPlotBox(this.figureModel.getAxesPositions()[p]),b=c.xLow+Math.abs(c.xHigh-c.xLow)/2,
d.set(this.previewDomNodes[p],{position:"absolute",top:c.yHigh-a.y+"px",left:b-a.x+"px"})));g.set(this.previewDomNodes[p],"data-tag",h+"."+p)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostYLabel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/modes/GhostLabel dojo/i18n!l10n/nls/figureToolStrip".split(" "),function(h,f,g,e,d,c,b,a){return h([b],{promptText:a.addYLabelText,
textInputElementCSSClass:"ghostYLabel",mode:"placedYLabelMode",positionMatrix:[[0,1,0],[1,-1,-0.5]],actionId:"ylabel",getLabels:function(){return this.figureModel.getYLabels()},positionAffordance:function(a,b,c,f,h,p,r,s){this.parentNode=f;this.previewDomNodes||(this.previewDomNodes=[]);this.previewDomNodes[p]||(this.previewDomNodes[p]=this.createDomNodes(f,s,r,h,p),this.addClickListener(this.previewDomNodes[p],h,p),this._textInputElements[p].setTextAlignement("left"));d.set(this.previewDomNodes[p],
{position:"absolute",top:c+"%",left:b+"%"});a=e.position(this.figureView.getDomNode(),!1);b=this.figureModel.getYLabelPositions()[p];0<Math.abs(b[0])&&0<Math.abs(b[1])?(c=this.figureView.getAxesPlotBox(b),b=d.get(this.previewDomNodes[p],"width"),c.xLow+b>a.x+a.w&&(b=c.xHigh-a.x-b,d.set(this.previewDomNodes[p],{position:"absolute",left:b+"px"})),this.figureModel.getIs2D()[p]||d.set(this.previewDomNodes[p],{position:"absolute",top:c.yLow-a.y+"px",left:c.xLow-a.x+"px"})):this.figureModel.getIs2D()[p]||
(c=this.figureView.getAxesPlotBox(this.figureModel.getAxesPositions()[p]),this.figureModel.isAxesObscuredByEarlierChild(p)?d.set(this.previewDomNodes[p],{visibility:"hidden"}):(b=c.xLow+Math.abs(c.xHigh-c.xLow)/8,d.set(this.previewDomNodes[p],{position:"absolute",top:c.yHigh-a.y+"px",left:b-a.x+"px"})));this._textInputElements[p].originalPosition=null;g.set(this.previewDomNodes[p],"data-tag",h+"."+p)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PaletteController":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/Palette MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/BaseFigurePaletteController dojo/on dojo/mouse dojo/dom-class dojo/dom".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h([a],{_leftMaxForFirstElement:370,_leftPadForFirstElement:35,_suspendAllListeners:!1,getView:function(a,d,e){!this._palette||this._palette.dataTag!==a?(a=c.getPalette(a),void 0===a&&(this._palette=null),null!==this._palette&&g.destroy(this._palette.domNode),b.getPalette(a,f.hitch(this,function(a){this._palette=a;this._palette.startup();this._setupPaletteListeners();this.setViewState(this.getState(this._figureModel));e&&"function"===typeof e&&e(a)}))):(this.setViewState({is2D:this.getCurrentTarget().is2D,
backgroundColor:this._figureModel.getBackgroundColor()}),e&&"function"===typeof e&&e(this._palette));return this._palette},_setupPaletteListeners:function(){this._paletteListener||(this._paletteListener=this._palette.on("elementClicked",f.hitch(this,function(a){var b={};if(a.action)b={fcn:"paletteActionInteractionCallback",args:{action:a.action,axesIndex:this.getCurrentTarget().targetIndex,direction:a.direction||""}};else if(null!==a.mode||void 0!==a.mode)b={fcn:"setMode",args:{mode:a.mode,direction:a.direction||
""}},a={mode:a.mode,backgroundColor:this._figureModel.getBackgroundColor(),direction:a.direction||""},this.setViewState(a);this._paletteListener=null;this.notify("interaction",b)})));this._paletteListener=null},setViewState:function(a){this._palette&&this._palette.setState(a)},getState:function(a){return{mode:a.getMode(),is2D:this.getCurrentTarget()?this.getCurrentTarget().is2D:0,backgroundColor:a.getBackgroundColor(),direction:a.getZoomDirection()}},_handleMouseClick:function(a){this._doSetPalettePosition=
!0;this._handleClickOrMove(a)},_handleMouseMove:function(a){this._handleClickOrMove(a)},_handleMouseEnter:function(a){this._doSetPalettePosition=!0;this._handleClickOrMove(a)},setCurrentTarget:function(a){this._currentTarget=a},getCurrentTarget:function(){return null===this._currentTarget?null:{targetIndex:this._currentTarget,is2D:this._figureModel.getIsSubplot3D()?0:this._figureModel.getIs2D()[this._currentTarget],axesPosition:this._figureModel.getAxesPositions()[this._currentTarget],chartType:this._figureModel.getChartType()[this._currentTarget]}},
_handleClickOrMove:function(a){if(!this._suspendAllListeners){var b=this,c=!1;if(a.MouseOverAxes&&a.MouseOverAxes.isInside){var c=!0,d=b.getCurrentTarget();if(d&&a.MouseOverAxes.Index===d.targetIndex)this._palette&&this._doSetPalettePosition&&(b._setPalettePosition(a.MouseOverAxes.axesPlotBox),this._doSetPalettePosition=!1);else{b.setCurrentTarget(a.MouseOverAxes.Index);var d=1===b.getCurrentTarget().is2D?"2DAxes":"3DAxes",e=b.getCurrentTarget().chartType,f="";"axes"===e?f="FigurePalette":"geobubble"===
e&&(f="ActionPalette");b.getView(f,d,function(c){b._figureView.hasRenderingSize()?b.enablePalette():b.disablePalette();g.place(c.domNode,b._figureView.getWrapperNode());b._setPalettePosition(a.MouseOverAxes.axesPlotBox)})}}this.setVisible(c)}},_handleAxesPositionUpdate:function(a){this._palette&&!m.contains(this._palette.domNode,"disabled")&&(this._currentTarget>a.newAxesPositions.length-1&&this.setCurrentTarget(a.newAxesPositions.length-1),a=this.getCurrentTarget(),a=this._figureView.getAxesPlotBox(a.axesPosition),
this._setPalettePosition(a))},getTopForElement:function(a,b){var c=this.getTopForAxesRef(a),d=this.getElementBounds(b).height;return c-d<this._MIN_TOP?this._MIN_TOP:c-d},getLeftForElement:function(a,b){var c=this.getRightForAxesRef(a),d=this.getElementBounds(b);return c-d.width},enablePalette:function(){this.inherited(arguments);this._suspendAllListeners=!1},disablePalette:function(){this.inherited(arguments);this._suspendAllListeners=!0},_setPalettePosition:function(a){var b=this.getTopForElement(a,
this._palette.domNode);a=this.getRightForAxesRef(a);var c=this.getElementBounds(this._figureView.getWrapperNode());e.set(this._palette.domNode,{position:"absolute",right:c.width-a+"px",top:b+"px"})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/BaseFigurePaletteController":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on dijit/Destroyable MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/BasePaletteController MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/AxesPositionMixin".split(" "),
function(h,f,g,e,d,c,b){return h([c,g,d,b],{_currentTarget:null,constructor:function(a){this._setFigureProperties(a);this._figureModel&&this.own(e(this._figureModel,"AxesPositionUpdated",f.hitch(this,function(a){this._handleAxesPositionUpdate(a)})))},setState:function(a){this._figureModel=a;a=this.getState(a);this._palette&&this._palette.setState(a)},getState:function(a){return a},_setupPaletteListeners:function(){},_setPalettePosition:function(a){},_handleAxesPositionUpdate:function(a){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/AxesPositionMixin":function(){define(["dojo/_base/declare",
"dojo/dom-geometry"],function(h,f){return h([],{_figureModel:null,_figureView:null,_MIN_TOP:3,_MAX_TOP:13,_setFigureProperties:function(f){f&&(f.figureView&&f.figureModel)&&(this._figureView=f.figureView,this._figureModel=f.figureModel)},_getAxesPlotBox:function(f){return this._figureView.getAxesPlotBox(f)},_getTopAxesPlotBox:function(){var f=this._figureModel.getVisibleAxesPositions(),e;!f||0===f.length?(e=[0,0,1,1],f=[e]):e=f[0];f.forEach(function(d){d[1]>=e[1]&&(e=d)});return this._getAxesPlotBox(e)},
getElementBounds:function(g){g=f.position(g);return{width:g.w,height:g.h,left:g.x,top:g.y}},getTopForAxesRef:function(f){if(void 0===f||null===f)f=this._getTopAxesPlotBox();var e=this.getElementBounds(this._figureView.getDomNode());return f.yLow-e.top},getRightForAxesRef:function(f){if(void 0===f||null===f)f=this._getTopAxesPlotBox();var e=this.getElementBounds(this._figureView.getDomNode()),d=e.left+e.width,c=d-f.xHigh,e=f.xHigh-e.left;16>c&&(e-=16,0>c&&(e-=f.xHigh-d));return e},getBottomForAxesRef:function(f){if(void 0===
f||null===f)f=this._getTopAxesPlotBox();var e=this.getElementBounds(this._figureView.getDomNode());return f.yHigh-(e.top+e.height)},getTopForElement:function(f,e){},getLeftForElement:function(f,e){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/PromptController":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dojo/dom-class MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/PaletteRegistry MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/elements/ElementFactory dojo/on dojo/Evented MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/controllers/BaseFigurePaletteController".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h([l,k],{getView:function(){if(!this._palette){var a=c.getPalette("OutputPopoutPalette");b.getPalette(a,f.hitch(this,function(a){this._palette=a;this._palette.startup();this._setupPaletteListeners()}))}return this._palette},_setupPaletteListeners:function(){this._paletteListener||(this._paletteListener=this._palette.on("elementClicked",f.hitch(this,function(a){this.notify("interaction",{fcn:"launchFigure",args:{editorId:this._figureModel.editorId}})})))},_handleMouseMove:function(a){},
_handleMouseClick:function(a){this._handleMouseEnter(a)},_handleMouseEnter:function(a){this._palette||(this._palette=this.getView(),g.place(this._palette.domNode,this._figureView.getWrapperNode()));this._setPalettePosition();this.setVisible(!0)},getTopForElement:function(a,b){var c=this.getTopForAxesRef(a),d=this.getElementBounds(b).height;return c-d<this._MIN_TOP?this._MIN_TOP:c-d},getLeftForElement:function(a,b){var c=this.getElementBounds(b);return this._figureView.getDomNode().offsetLeft+this.getElementBounds(this._figureView.getDomNode()).width-
c.width},_setPalettePosition:function(a){var b=this.getTopForElement(a,this._palette.domNode);a=this.getLeftForElement(a,this._palette.domNode);this.isInline(this._figureView.getWrapperNode())?e.set(this._palette.domNode,{position:"absolute",left:a+"px",right:"",top:b+"px"}):e.set(this._palette.domNode,{position:"absolute",left:"",right:"1px",top:b+"px"})}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ActionManager":function(){define(["dojo/_base/declare"],function(h){return h(null,{_figureModel:null,
_figureView:null,_codeGen:null,_deferredCodeGen:null,_undoRedoManager:null,_TOOLSTRIP_INTERACTION:"ToolstripInteraction",constructor:function(f){this._figureView=f.figureView;this._figureModel=f.figureModel;this._codeGen=f.codeGenerator},setUndoRedoManager:function(f){this._undoRedoManager=f},setState:function(f){this._figureModel=f;this._updateFigureForToolStripAction()},_updateFigureForToolStripAction:function(){var f=this._figureModel.getInteractionData().iAtomicActionID;this._addToolStripActionToUndoRedo(f);
this._codeGen&&this._figureModel._interactionData&&this._updateCodeGen()},_updateCodeGen:function(){var f=this._codeGen,g=this._figureModel._interactionData.iClearCode,e=this._figureModel._interactionData.iCode;this._deferredCodeGen=f.attach(this._figureView.getGraphicsViewContainerNode());g?f.detach():""!==e&&(f.setGeneratedCode(e),this._deferredCodeGen&&!this._deferredCodeGen.isResolved()?this._deferredCodeGen.then(function(d){f.updateCodeArea()}):f.updateCodeArea())},_addToolStripActionToUndoRedo:function(f){f=
{actionID:f,interactionType:this._TOOLSTRIP_INTERACTION,codeGenState:{attachCodeGenOnUndo:!1,attachCodeGenOnRedo:!1}};this._codeGen&&this._codeGen.isCodeGenAttached()&&(f.codeGenState.attachCodeGenOnUndo=!0);""!==this._figureModel._interactionData.iCode&&(f.codeGenState.attachCodeGenOnRedo=!0);this._undoRedoManager.insertInteractionsForUndoRedo(this._figureModel,f)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureUndoRedoManager":function(){define(["dojo/_base/declare","MW/rtc/plugins/undoredo/commands/FigureInteractionCommand",
"MW/rtc/plugins/undoredo/commands/CodeGenInteractionCommand"],function(h,f,g){return h(null,{_document:null,_UNDOREDO_CALLBACK:"undoRedoInteractionCallback",_FIGURE_INTERACTION_EVENT:"FigureInteractionEvent",_CODEGEN_INTERACTION:"CodeGenInteraction",constructor:function(e){this._document=e.document},insertInteractionsForUndoRedo:function(e,d){var c=this;this._document.undoable(function(b){d.interactionType===c._CODEGEN_INTERACTION?b.appendCommand(new g(e,c._UNDOREDO_CALLBACK,d)):b.appendCommand(new f(e,
c._UNDOREDO_CALLBACK,d))})}})})},"MW/rtc/plugins/undoredo/commands/FigureInteractionCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/embeddedoutputs/MessageServiceFactory","MW/rtc/plugins/undoredo/commands/CommandInterface"],function(h,f,g,e){return h(e,{_figureModel:null,_clientEventArgs:null,_eventCallBack:null,_UNDO_EVENT_TYPE:"Undo",_REDO_EVENT_TYPE:"Redo",constructor:function(d,c,b){this._figureModel=d;this._eventCallBack=c;this._clientEventArgs=b},execute:function(){this._setInteractionEventType(this._REDO_EVENT_TYPE);
this._feval(this._eventCallBack,this._clientEventArgs)},unexecute:function(){this._setInteractionEventType(this._UNDO_EVENT_TYPE);this._feval(this._eventCallBack,this._clientEventArgs)},_setInteractionEventType:function(d){this._clientEventArgs.type=d},_feval:function(d,c){g.getInstance().publish(this._figureModel.getInteractionChannel(),JSON.stringify({method:d,args:c}))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"figure",
CSS_TAG:"embeddedOutputsFigure",STATE:{NOT_INITIALIZED:0,PLACEHOLDER:1,PENDING:2,FINAL_SNAPSHOT:3,FINAL_PENDING_SNAPSHOT:4}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/EventHandler":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{_isServerBusy:!1,_eventQueue:null,constructor:function(){this._eventQueue=[]},destroy:function(){this.clearEventQueue()},setIsServerBusy:function(f){this._isServerBusy=f},getIsServerBusy:function(){return this._isServerBusy},
_processPendingEvent:function(){if(0<this._eventQueue.length){var f=this._eventQueue.shift();f.callback(f.event);this.setIsServerBusy(!0)}},_addEventToQueue:function(f,e){var d=this._eventQueue.length;if(0<d)switch(d=this._eventQueue[d-1].event,e.type){case "pointermove":case "mousemove":("pointermove"===d.type||"mousemove"===d.type)&&this._eventQueue.pop();break;case "pointerup":case "mouseup":break;default:this.clearEventQueue()}this._eventQueue.push({event:e,callback:f})},clearEventQueue:function(){0<
this._eventQueue.length&&(this._eventQueue.length=0)},processEvent:function(f,e){this._addEventToQueue(f,e);this.getIsServerBusy()||this._processPendingEvent()},processNextPendingEvent:function(){this.setIsServerBusy(!1);this._processPendingEvent()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/ToolstripActionController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/embeddedoutputs/MessageServiceFactory"],function(h,f,g,e){return h(null,{channel:null,
pendingActions:null,_actionService:null,_aspectHandles:null,_FIGURE_TOOLSTRIP_ACTION_IDS:"figure.grid figure.colorbar figure.legend figure.cleargrid figure.clearcolorbar figure.clearlegend figure.xlabel figure.ylabel figure.title figure.xgrid figure.ygrid figure.line figure.arrow figure.doublearrow figure.textarrow".split(" "),constructor:function(d,c){this._actionService=c;this.channel="/toolstrip/toolstripactionevent/"+d;e.getInstance().subscribe(this.channel,"_actionCallback",this);this.pendingActions=
[];this._aspectHandles=[];this._loadActions()},_loadActions:function(){var d=[];this._FIGURE_TOOLSTRIP_ACTION_IDS.forEach(function(c){d.push({id:c,enabled:!0,selected:!1,callback:function(){}})});this._actionService.loadActions(d);this._aspectHandles.push(g.after(this._actionService,"onActionChange",f.hitch(this,"_handleActionChange"),!0))},_handleActionChange:function(d){"selected"===d.key&&(d.newValue&&!d.oldValue&&this._FIGURE_TOOLSTRIP_ACTION_IDS.some(function(c){return c===d.id}))&&this._feval(d)},
_feval:function(d){this.pendingActions.push(d);e.getInstance().publish(this.channel,{actionId:d.id})},_actionCallback:function(d){var c=-1,b=this;this.pendingActions.some(function(a,e){a.id===d.data.id&&(b._actionService.updateAction(a.id,{selected:!1}),c=e)});0<=c&&this.pendingActions.splice(c,1)},destroy:function(){e.getInstance().unsubscribe(this.channel,"_actionCallback",this);this._aspectHandles.forEach(function(d){d.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManagerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./FigureConnectionManager"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.id"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/FigureConnectionManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/embeddedoutputs/MessageServiceFactory"],function(h,f,g,e){return h(null,{CONNECTION_STATE:{CONNECTED:1,DISCONNECTED:0},constructor:function(d){this._editorId=
d;this._connections={};e.getInstance().subscribe("/liveeditor/figure/disconnect/*","_diconnectionHandler",this);e.getInstance().subscribe("/liveeditor/figure/reconnect/*","_reconnectionHandler",this)},_diconnectionHandler:function(d){d=d.data;var c=this._connections[d];c||(c=this._createEmptyConnection());c.state=this.CONNECTION_STATE.DISCONNECTED;this._connections[d]=c;c.output&&c.output.disconnect()},_reconnectionHandler:function(d){d=d.data;var c=this._connections[d];c||(c=this._createEmptyConnection());
c.state=this.CONNECTION_STATE.CONNECTED;this._connections[d]=c;c.output&&c.output.reconnect()},registerOutput:function(d,c){this._connections[d]||(this._connections[d]=this._createEmptyConnection());this._connections[d].output=c;!this._connections[d].state===this.CONNECTION_STATE.CONNECTED?c.disconnect():c.reconnect()},getConnectionStatus:function(d){return this._connections[d].state},removeOutput:function(d){delete this._connections[d]},_createEmptyConnection:function(){return{output:null,state:this.CONNECTION_STATE.CONNECTED}},
destroy:function(){e.getInstance().subscribe("/liveeditor/figure/disconnect/*","_diconnectionHandler",this);e.getInstance().subscribe("/liveeditor/figure/reconnect/*","_reconnectionHandler",this)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MatrixOutputHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.id","rtc.outputhandlerservice","rtc.executionservice"]}},
createInstance:function(e,d,c){e=new g(e,c);d.registerOutputPlugin(e);return e}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputHandler":function(){define("dojo/_base/declare MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction ./MatrixOutput ./MatrixOutputProperties ./SnapshotManager".split(" "),function(h,f,g,e,d,c,b){return h([f],
{OUTPUT_TYPE:c.OUTPUT_TYPE,constructor:function(a,c){this._snapshotManager=new b(a,c)},getOutputFromData:function(a,b){var c=new d({data:a,outputMetaData:b,executionService:this._executionService,snapshotManager:this._snapshotManager});return new g(e.ADD_OUTPUT,c)},destroy:function(){this._snapshotManager.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/MatrixPromptController MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/RunScriptPromptController MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixStyler MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities mw-html-utils/HtmlUtils mw-utils/Utils ./CharacterWidthUtility ./MatrixOutput ./MatrixOutputProperties ./MatrixOutputUtility".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){return h([c],{_REGEX_FOR_EXPONENT:/1.0e\+\d+ \*/,type:s.OUTPUT_TYPE,constructor:function(a){this._data=f.clone(a.data);this._outputMetaData=a.outputMetaData;this._snapshotManager=a.snapshotManager;this._promptController=this._outputMetaData.createPromptController?this._createPromptController():null;this._domElement=this._createDomElement()},destroy:function(){this._data.id&&this._snapshotManager.removeVariableSnapshot(this._data.id);this._promptController&&
this._promptController.destroy()},getCssTag:function(){return s.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){return t.createName(this._data.name)+"\n"+this._data.value},getHTML:function(a,b){var c=q.treatHtmlLikeCommandWindow(t.createName(this._data.name)),d=q.treatHtmlLikeCommandWindow(this._data.value),e="";this._data.header&&(e=t.createHeader(this._data.header).textContent);return"\x3cpre\x3e"+c+e+"\n"+d+"\x3c/pre\x3e"},
_createPromptController:function(){if(d.isLoadedFromDisk(this._outputMetaData.evaluationId))return new a;var c=new b;c.addInteractionListener(f.hitch(this._snapshotManager,"openVariableSnapshot",this._data.id));return c},_createDomElement:function(){var a=e.create("div",{className:"matrixElement veSpecifier"});this._styler=new k(this);a.getStyler=f.hitch(this,function(){return this._styler});var b=t.createNameAndSummary(this._data.name,this._data.rows,this._data.columns,this._data.type,this._data.header);
a.appendChild(b.summary);b=t.createMatrixValue(this._data,this._REGEX_FOR_EXPONENT,this._outputMetaData).container;a.appendChild(b);this._promptController&&this._promptController.setTarget(a);return a}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/MatrixPromptController":function(){define(["dojo/_base/declare","dojo/query","dijit/Destroyable","MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/SimpleFloatingElement"],function(h,f,g,e){return h([e,
g],{constructor:function(){this.paletteRegistryId="MatrixPopoutPalette"},getPreferredLeftPosition:function(){var d=f(".variableValue",this._outputDomNode),c=0;d&&1<=d.length&&(c=d[0].offsetLeft+d[0].offsetWidth);var d=f(".veVariableName",this._outputDomNode),b=0;d&&1<=d.length&&(b=d[0].offsetLeft+d[0].offsetWidth);return Math.max(c,b)+10}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/RunScriptPromptController":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/outputhandlers/floatingpalette/controllers/matrix/MatrixPromptController"],
function(h,f){return h([f],{constructor:function(){this.paletteRegistryId="RunScriptPalette"},_setupPaletteListeners:function(){}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixStyler":function(){define("dojo/dom-class dojo/_base/declare dojo/dom-geometry dojo/query dojo/dom-style MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputStyler MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities".split(" "),function(h,f,g,e,d,c,b){return f([c],{MARGIN_PADDING_BUFFER:30,ELLIPSIS_WIDTH:32,
BUFFER_SPACE_FOR_COLUMN:2,MAX_ROWS_TO_SHOW:10,_SUMMARYBAR_VIEWPORT_SPAN:"veViewportSummary",getStyleChange:function(a){var b=e(".valueContainer",a)[0],c=this.getAvailableWidth(a),d=parseFloat(a.getAttribute("data-width"));if(b){var f=this.getMatrixInfo(b),g=this.getTotalColumnsThatFit(c,f,b);this.updateViewportInfo(a,this.MAX_ROWS_TO_SHOW,g,f.totalRows,f.totalColumns);if(!this._hasWidthChanged(c,d))return null;var d=e(".variableValue",b)[0],h=e(".veVariableName",a)[0],g=Math.min(g,f.totalColumns);
return{output:a,availableWidth:c,totalWidth:g*f.columnWidth+this.BUFFER_SPACE_FOR_COLUMN,valueContainer:b,variableValue:d,matrixInfo:f,numOfColumnsToShow:g,veVariableName:h}}},applyStyleChange:function(a){a&&(a.output.setAttribute("data-width",a.availableWidth),d.set(a.variableValue,"width",a.totalWidth+"px"),d.set(a.veVariableName,"width",a.availableWidth+"px"),b.displayEllipsisIfRequired(a.valueContainer,a.matrixInfo.totalColumns,a.matrixInfo.totalRows,a.numOfColumnsToShow,this.MAX_ROWS_TO_SHOW))},
_hasWidthChanged:function(a,b){return this._hasDimensionChanged(a,b)},_hasDimensionChanged:function(a,b){return a&&0!==a&&a!==b},updateViewportInfo:function(a,b,c,d,e){if(a=a.getElementsByClassName(this._SUMMARYBAR_VIEWPORT_SPAN)[0]){if(1<d){var f=a.getElementsByClassName("startRow")[0];a.getElementsByClassName("endRow")[0].innerText=Math.min(parseInt(f.innerText)+(b-1),d)}1<e&&(b=a.getElementsByClassName("startColumn")[0],a.getElementsByClassName("endColumn")[0].innerText=Math.min(parseInt(b.innerText)+
(c-1),e))}},getMatrixInfo:function(a){if(a)try{return JSON.parse(a.getAttribute("data-layout"))}catch(b){}return null},getAvailableWidth:function(a){return g.getMarginBox(a).w-this.MARGIN_PADDING_BUFFER},getTotalColumnsThatFit:function(a,b,c){return h.contains(c,"hideEllipses")||0!=c.getElementsByClassName("horizontalEllipsis hide").length?Math.floor(a/b.columnWidth):Math.floor((a-this.ELLIPSIS_WIDTH)/b.columnWidth)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputStyler":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(){},getStyleChange:function(f){},setStyleChange:function(f){}})})},"MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities":function(){define(["dojo/query","dojo/dom-class"],function(h,f){return{displayEllipsisIfRequired:function(f,e,d,c,b){var a=h(".horizontalEllipsis",f)[0];this._showHideEllipsis(a,e,c);f=h(".verticalEllipsis",f)[0];this._showHideEllipsis(f,d,b)},_showHideEllipsis:function(f,e,d){e>d?this._show(f):this._hide(f)},_show:function(g){f.remove(g,
"hide")},_hide:function(g){f.add(g,"hide")}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities":function(){define(["dojo/dom-construct"],function(h){return{createHeader:function(f){return""==f?f:this._createHeaderSpanElement(f)},_createHeaderSpanElement:function(f){f=h.create("span",{className:"headerElement",innerHTML:f}).innerText;var g=h.create("span",{className:"headerElement"});g.innerText=f;return g}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/CharacterWidthUtility":function(){define(["dojo/_base/declare",
"dojo/dom-construct"],function(h,f){return{_singleCharWidth:null,getNumericCharacterWidth:function(){if(null===this._singleCharWidth){var g=f.create("span",{className:"rtePane"}),e=f.create("span",{innerHTML:"1234567890",className:"eoOutputWrapper"});f.place(e,g);f.place(g,document.body);this._singleCharWidth=e.getBoundingClientRect().width/10;f.destroy(g)}return this._singleCharWidth}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputProperties":function(){define([],function(){return{OUTPUT_TYPE:"matrix",
CSS_TAG:"embeddedOutputsMatrixElement"}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/MatrixOutputUtility":function(){define("dojo/dom-class dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities MW/rtc/plugins/embeddedoutputs/view/EllipsisUtilities mw-html-utils/HtmlUtils mw-utils/Utils ./CharacterWidthUtility".split(" "),function(h,f,g,e,d,c,b){return{_DEFAULT_MAX_COLUMNS:50,_MAX_ROWS:10,_REGEX_FOR_FIRST_ELEMENT:/^\s*\S*/,createHeader:function(a){a=d.treatHtmlLikeCommandWindow(a);
if(""===a)return a;a=f.create("span",{className:"headerElement",innerHTML:a}).innerText;var b=f.create("span",{className:"headerElement"});b.innerText=a;return b},createMatrixValue:function(a,b,c){var d=a.value;b=d.match(b);return this.createValueElement({value:d,id:a.id,rows:a.rows,columns:a.columns,exponent:b,columnWidth:a.columnWidth},c)},createName:function(a){return a+" \x3d "},createNameAndSummary:function(a,b,c,d,e){var g=f.create("div",{className:"veVariableName variableNameElement"}),p=f.create("span");
p.textContent=this.createName(a);a=f.create("span",{className:"veVariableValueSummary"});(e=this.createHeader(e))?(a.innerText=e.innerText,h.add(a,"headerElement")):"double"!==d&&(a.textContent=b+"\u00d7"+c+" "+d,h.add(a,"veMetaSummary"));g.appendChild(p);g.appendChild(a);return{summary:g,metaSummary:a}},createValueElement:function(a,b){var c=f.create("div",{className:"valueContainer"}),d=f.create("div",{className:"variableValue"}),g=a.value,h=b.maxColumns||this._DEFAULT_MAX_COLUMNS;a.columns>h&&
(g=this._chopColumns(g,h));d.textContent=g;c.appendChild(d);this._addEllipsis(c);b.createPromptController||e.displayEllipsisIfRequired(c,a.columns,a.rows,h,this._MAX_ROWS);h=a.columnWidth?a.columnWidth:this._getColumnWidth(g,a.exponent);this.updateLayoutInfo(h,a.columns,a.rows,this._getCharsPerElement(g,a.exponent),c);return{value:d,container:c}},updateLayoutInfo:function(a,b,c,d,e){e.setAttribute("data-layout",JSON.stringify({columnWidth:a,totalColumns:b,totalRows:c,charsPerColumn:d}))},_addEllipsis:function(a){var b=
f.create("div",{className:"horizontalEllipsis hide"});a.appendChild(b);b=f.create("div",{className:"verticalEllipsis hide"});a.appendChild(b)},_getColumnWidth:function(a,c){return this._getCharsPerElement(a,c)*b.getNumericCharacterWidth()},_chopColumns:function(a,b){if(!a)return null;var c="",d,e,f=a.split("\n"),g=f.length,h=this._getCharsPerElement(a)*b;for(d=0;d<g-1;d+=1)e=f[d].substr(0,h),c+=e+"\n";return c+=f[d].substr(0,h)},_getCharsPerElement:function(a,b){var c=this._REGEX_FOR_FIRST_ELEMENT;
if(b){var d=a.split("\n\n")[1];d||(d=a.substring(a.indexOf("\n")+1));a=d}c=c.exec(a);c=c[0];return c.length}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/matrix/SnapshotManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string"],function(h,f,g){return h(null,{_OPEN_VARIABLE_COMMAND:"matlab.internal.editor.VariableManager.openVariableEditor('${editorId}', '${variableId}');",_REMOVE_VARIABLE_COMMAND:"matlab.internal.editor.VariableManager.removeVariables('${editorId}', ${variableIds});",
_REMOVE_VARIABLE_DELAY:500,constructor:function(e,d){this._editorId=e;this._executionService=d;this._idsPendingRemoval=[]},destroy:function(){this._flushVariablesToRemoveQueue()},openVariableSnapshot:function(e){e=g.substitute(this._OPEN_VARIABLE_COMMAND,{editorId:this._editorId,variableId:e});this._executionService.executionEval(e,!0)},removeVariableSnapshot:function(e){this._idsPendingRemoval.push(e);1===this._idsPendingRemoval.length&&setTimeout(f.hitch(this,"_flushVariablesToRemoveQueue"),this._REMOVE_VARIABLE_DELAY)},
_flushVariablesToRemoveQueue:function(){if(0!==this._idsPendingRemoval.length){var e="{'"+this._idsPendingRemoval.join("', '")+"'}",e=g.substitute(this._REMOVE_VARIABLE_COMMAND,{editorId:this._editorId,variableIds:e});this._executionService.executionEval(e,!0);this._idsPendingRemoval=[]}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SymbolicOutputHandler"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},createInstance:function(e){var d=new g;e.registerOutputPlugin(d);return d}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/renderer/Renderer MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction ./SymbolicOutput ./SymbolicOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a){return h([e],{OUTPUT_TYPE:a.OUTPUT_TYPE,_PX_PER_EM:14,constructor:function(){this._renderer=new g({equationFormat:"mathml",pxPerEm:this._PX_PER_EM})},getOutputFromData:function(a){a=new b({data:a,renderer:this._renderer,pxPerEm:this._PX_PER_EM});return new d(c.ADD_OUTPUT,a)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/symbolic/SymbolicOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/view/EquationTooltip ./SymbolicOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a,k){return h([b],{_IMG_URI_DATA_ATTRIBUTE:"data-imguri",type:k.OUTPUT_TYPE,constructor:function(a){this._data=a.data;this._renderer=a.renderer;this._pxPerEm=a.pxPerEm;this._domElement=this._createDomElement()},getCssTag:function(){return k.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){return""},getHTML:function(a,b){var c=this._renderer.renderToImageURLSynch(this._data.value,this._pxPerEm),d=
"\x3cp class\x3d'symbolicElement'\x3e";this._data.name&&(d=d+"\x3cpre\x3e"+(this._data.name+"\u00a0\x3d\u00a0\n"),d+="\x3c/pre\x3e",d+="\u00a0\u00a0\u00a0");d+=this._equationImageToHTML(c,a,b);return d+="\x3c/p\x3e"},_isTall:function(a){return a>2*this._pxPerEm},_equationImageToHTML:function(a,b,c){var e='\x3cspan style\x3d"vertical-align: '+Math.round(a.verticalAlign)+'px;"\x3e',e=e+"\x3cimg ";b?(b=d.pushImageAndGetPathFromURI(a.dataURL,b,c),e=e+('src\x3d"'+b+'"')+(" "+this._IMG_URI_DATA_ATTRIBUTE+
'\x3d"'+a.dataURL+'"')):e+='src\x3d"'+a.dataURL+'"';e+=' width\x3d"'+a.width+'" height\x3d"'+a.height+'"';return e+="\x3e\x3c/span\x3e"},_createDomElement:function(){var b=e.create("div");g.add(b,"symbolicElement");this._renderer.render(this._data.value,b).then(f.hitch(this,function(){var c=this._isTall(b.lastChild["data-eqn-height"]),d;this._tooltip=new a;this._data.name&&(d=e.create(c?"div":"span"),d.textContent=this._data.name+" \x3d\u00a0",g.add(d,"embeddedOutputsVariableElement"),e.place(d,b,
"first"),g.add(b.lastChild,c?"displaySymbolicElement":"inlineSymbolicElement"))}));return b},getMIMEContent:function(){return[{flavor:c.MATHML_PRESENTATION,content:this._data.value}]},getName:function(){return this._data.name},getValue:function(){return this._data.value}})})},"MW/rtc/plugins/embeddedoutputs/view/EquationTooltip":function(){define("dijit/popup dijit/registry dijit/TooltipDialog dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-class dojo/on dojo/query".split(" "),function(h,f,g,
e,d,c,b,a){return e(null,{constructor:function(){this._tooltip=f.byId("MathEquationRendererTooltip");this._tooltip||(this._tooltip=new g({id:"MathEquationRendererTooltip",content:"none",onMouseLeave:d.hitch(this,"_closeTooltip")}));this._localHandlers=[];this._handlers=[];this._handlers.push(a(document.body,".hasTooltip:mouseover",d.hitch(this,"_handleTooltipMouseover")))},destroy:function(){this._handlers.forEach(function(a){a.remove()});this._handlers=[]},_handleTooltipMouseover:function(c){for(c=
c.target;c&&c.parentNode&&!b.contains(c,"hasTooltip");)c=c.parentNode;delete c.title;this._tooltip.set("content",c["data-eqn-tooltip"]);h.open({popup:this._tooltip,around:c});this._localHandlers.push(a(c,"DOMNodeRemoved, DOMNodeRemovedFromDocument",d.hitch(this,"_closeTooltip")));this._timeout&&window.clearTimeout(this._timeout);this._timeout=setTimeout(d.hitch(this,"_closeTooltip"),3E3)},_closeTooltip:function(){h.close(this._tooltip);this._localHandlers.forEach(function(a){a.remove()});this._localHandlers=
[]}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h("dijit.TooltipDialog",[a,m,l,k],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:q,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);
this.own(c(this.domNode,"keydown",d.hitch(this,"_onKey")))},orient:function(a,b,c){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight",
"TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+c];f.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems();b.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=
""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==e.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==e.TAB){var c=a.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):c==this._firstFocusItem&&a.shiftKey?(b.focus(this._lastFocusItem),
a.stopPropagation(),a.preventDefault()):c==this._lastFocusItem&&!a.shiftKey?(b.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault()):a.stopPropagation()}}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./TextOutputHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},createInstance:function(e){var d=new g;e.registerOutputPlugin(d);
return d}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutputHandler":function(){define("dojo/_base/declare MW/rtc/plugins/embeddedoutputs/EmbeddedOutputsUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./TextOutput ./TextOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a){return h([g],{OUTPUT_TYPE:a.OUTPUT_TYPE,constructor:function(){},getOutputFromData:function(a,c){var f=c.lineNumber,g=c.evaluationId;this._cleanData(a);var h=c.lastAddedOutput;if(this._shouldUpdateLastOutput(h,f,g))return h.updateDomElement(a),new e(d.UPDATE,h);f=new b({text:a.text,truncationInfo:a.truncationInfo,lineNumber:f});return new e(d.ADD_OUTPUT,f)},_shouldUpdateLastOutput:function(b,c,d){return f.isLoadedFromDisk(d)||(!b||b.type!==a.OUTPUT_TYPE||b.getWasDestroyed())||
!(b.evaluationId===d&&b.getServerLineNumber()===c)?!1:!0},_cleanData:function(a){a.text=c.removeControlCharacters(a.text)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/text/TextOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct mw-html-utils/HtmlUtils mw-string-utils/StringUtils mw-utils/Utils MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./TextOutputProperties".split(" "),function(h,
f,g,e,d,c,b,a,k){return h([b],{_ELLIPSIS:"...",_MAX_LENGTH:6E4,type:k.OUTPUT_TYPE,constructor:function(a){this._text=a.text;this._truncationInfo=a.truncationInfo;this._domElement=this._createDomElement();this._serverLineNumber=a.lineNumber;this._destroyed=!1},destroy:function(){this._destroyed=!0},getCssTag:function(){return k.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return{text:this._text,truncationInfo:this._truncationInfo}},getText:function(){var a=
this._createDomElement();a.innerHTML=a.innerHTML.replace(/<br>/g,"\n");var b=a.textContent;g.destroy(a);return b},getHTML:function(a,b){return"\x3cpre\x3e"+this._cleanupText(this._text)+"\x3c/pre\x3e"},_createDomElement:function(){this._text=a.processBackspaceCharacters(this._text);var b=this._cleanupText(this._text),b={innerHTML:this._showTruncationIfNeeded(b,this._truncationInfo),className:"textElement"};return g.create("div",b)},_cleanupText:function(a){a=d.normalizeNewlines(a);a=c.removeSurroundingNewLines(a);
return a=e.treatHtmlLikeCommandWindow(a)},updateDomElement:function(b){if(!this._truncationInfo||!this._truncationInfo.wasTruncatedMidLine){this._text+=b.text;this._reapplyTruncation(b);this._text=a.processBackspaceCharacters(this._text);b=this.getDomElement();var c=this._cleanupText(this._text);b.innerHTML=this._showTruncationIfNeeded(c,this._truncationInfo)}},_reapplyTruncation:function(a){var b=!1;this._text.length>this._MAX_LENGTH&&(this._text=this._text.slice(0,this._MAX_LENGTH),b=!0);b|=a.truncationInfo&&
a.truncationInfo.wasTruncatedMidLine;this._truncationInfo={wasTruncatedMidLine:!!b}},_showTruncationIfNeeded:function(a,b){return b&&b.wasTruncatedMidLine?a+this._ELLIPSIS:a},getServerLineNumber:function(){return this._serverLineNumber},getWasDestroyed:function(){return this._destroyed}})})},"mw-string-utils/StringUtils":function(){define([],function(){return{_LEFT_TRIM_REGEXP:/^\s+/,_NEWLINE_REXEXP:/(\r\n|\n|\r)/g,leftTrim:function(h){return h.replace(this._LEFT_TRIM_REGEXP,"")},normalizeNewlines:function(h){return h.replace(this._NEWLINE_REXEXP,
"\n")}}})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableOutputHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},createInstance:function(e){var d=new g;e.registerOutputPlugin(d);return d}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutputHandler":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler","MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult","MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction","./VariableOutput"],function(h,f,g,e,d){return h([f],{OUTPUT_TYPE:"variable",CSS_TAG:"embeddedOutputsVariableElement",constructor:function(){},getOutputFromData:function(c){c=new d({data:c});return new g(e.ADD_OUTPUT,c)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variable/VariableOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities mw-html-utils/HtmlUtils".split(" "),
function(h,f,g,e,d,c){return h([e],{_CSS_TAG:"embeddedOutputsVariableElement",type:"variable",constructor:function(b){this._data=b.data;this._domElement=this._createDomElement()},getCssTag:function(){return this._CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){return this._createNameAndValue()},getHTML:function(b,a){var d=c.treatHtmlLikeCommandWindow(this._data.name),e="";this._data.header&&(e=this._createHeader(this._data.header).textContent);
return"\x3cpre\x3e"+d+" \x3d "+e+(e?"\n":"")+this._data.value+"\x3c/pre\x3e"},_createDomElement:function(){var b={innerHTML:this._createNameValueAndHeader(this._data),className:"variableElement"};return g.create("div",b)},_createNameAndValue:function(){return c.treatHtmlLikeCommandWindow(this._data.name)+" \x3d "+this._data.value},_createNameValueAndHeader:function(){var b=c.treatHtmlLikeCommandWindow(this._data.name);if(this._data.header){var a=this._createHeader(this._data.header);return g.create("span",
{innerHTML:b+" \x3d "+a.outerHTML,className:"variableNameElement"}).outerHTML+"\n    "+this._data.value}return b+" \x3d "+this._data.value},_createHeader:function(b){return d.createHeader(c.treatHtmlLikeCommandWindow(b))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./VariableStringOutputHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.outputhandlerservice"]}},
createInstance:function(e){var d=new g;e.registerOutputPlugin(d);return d}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction ./VariableStringOutput ./VariableStringOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a){return h([e],{OUTPUT_TYPE:a.OUTPUT_TYPE,constructor:function(){},getOutputFromData:function(a){a=f.clone(a);this._cleanData(a);a=new b({data:a});return new d(c.ADD_OUTPUT,a)},_cleanData:function(a){var b=g.removeControlCharacters(a.value);a.value=g.processBackspaceCharacters(b)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/variablestring/VariableStringOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/VariableUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility mw-html-utils/HtmlUtils mw-string-utils/StringUtils mw-utils/Utils ./VariableStringOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h([e],{_ELLIPSIS:"...",type:l.OUTPUT_TYPE,constructor:function(a){this._data=a.data;this._domElement=this._createDomElement()},getCssTag:function(){return l.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return this._data},getText:function(){var a=this._createText(this._data.value),b=-1!==a.search("\n")?"\n":"",a=g.create("div",{innerHTML:a});return this._createName(this._data.name)+b+a.textContent},getHTML:function(b,
c){var d="";this._data.header&&(d=this._createHeader(this._data.header).textContent);var e=a.normalizeNewlines(this._data.value),e=d||-1!==e.search("\n")?"\n":"";return"\x3cpre\x3e"+this._createName(this._data.name)+d+e+this._createText(this._data.value)+"\x3c/pre\x3e"},_createHeader:function(a){return d.createHeader(b.treatHtmlLikeCommandWindow(a))},_createName:function(a){return b.treatHtmlLikeCommandWindow(a)+" \x3d "},_createText:function(c){c=a.normalizeNewlines(c);return c=b.treatHtmlLikeCommandWindow(c)},
_createDomElement:function(){var a,b=g.create("div",{className:"textElement"}),c=this._createText(this._data.value),d;this._data.header?(d=this._createHeader(this._data.header),d=g.create("span",{innerHTML:this._data.name+" \x3d "+d.outerHTML,className:"variableNameElement"})):d=g.create("span",{innerHTML:this._data.name+" \x3d ",className:"variableNameElement"});d=g.create("div",{innerHTML:d.outerHTML},b,"last");var e=this._data.truncationInfo&&this._data.truncationInfo.wasTruncatedAtLineBreak;-1===
this._data.value.search("\n")&&!e?(this._data.header&&(d.innerHTML+="\n"),d.innerHTML+=c):a=g.create("div",{innerHTML:c},b,"last");this._addTruncationEllipses(this._data.truncationInfo,d,a);return b},_addTruncationEllipses:function(a,b,c){b&&(a&&a.wasTruncatedMidLine)&&(b.innerHTML+=this._ELLIPSIS);c&&(a&&a.wasTruncatedAtLineBreak)&&(a=g.create("div",{className:"verticalEllipsis"}),c.appendChild(a))}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./WarningOutputHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.outputhandlerservice","rtc.diagnosticmessage"]}},createInstance:function(e,d){var c=new g(d);e.registerOutputPlugin(c);return c}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutputHandler":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutputHandler MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResult MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerResultInstruction MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./WarningOutput ./WarningOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a){return h([g],{OUTPUT_TYPE:a.OUTPUT_TYPE,constructor:function(a){this._diagnosticMessageFormatter=a},getOutputFromData:function(a,c){a=f.clone(a);this._cleanData(a);var g=new b({text:a.text,truncationInfo:a.truncationInfo,diagnosticMessageFormatter:this._diagnosticMessageFormatter});return new e(d.ADD_OUTPUT,g)},_cleanData:function(a){var b=c.removeControlCharacters(a.text);a.text=c.processBackspaceCharacters(b)}})})},"MW/rtc/plugins/embeddedoutputs/outputhandlers/warning/WarningOutput":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query mw-html-utils/HtmlUtils MW/rtc/plugins/embeddedoutputs/outputhandlers/BaseOutput MW/rtc/plugins/embeddedoutputs/outputhandlers/OutputHandlerUtility ./WarningOutputProperties".split(" "),
function(h,f,g,e,d,c,b,a){return h([c],{type:a.OUTPUT_TYPE,constructor:function(a){this._text=a.text;this._truncationInfo=a.truncationInfo;this._diagnosticMessageFormatter=a.diagnosticMessageFormatter;a=d.treatHtmlLikeCommandWindow(this._text);this._domElement=this._diagnosticMessageFormatter.createWarningMessageWithStack(a).getDomNode()},getCssTag:function(){return a.CSS_TAG},getDomElement:function(){return this._domElement},getSerializableData:function(){return{text:this._text,truncationInfo:this._truncationInfo}},
getText:function(){return b.getText(this._text)},getHTML:function(a,b){return this._domElement.innerHTML}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlertProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlert","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.embeddedoutputs","rtc.alert.model","rtc.diagnosticmessage","rtc.embeddedoutputs.syntaxerrors"]}},createInstance:function(e,
d,c,b){return new f(e._outputsModel,d,c,b)}})})},"MW/rtc/plugins/embeddedoutputs/view/EmbeddedOutputsAlert":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/query MW/rtc/plugins/embeddedoutputs/model/RegionUtilities MW/rtc/plugins/language/matlab/alert/AlertTypeEnum mw-utils/Utils".split(" "),function(h,f,g,e,d,c,b,a){return h(null,{constructor:function(a,b,c,d){this._embeddedOutputsModel=a;this._alertModel=b;this._diagnosticMessageFormatter=c;this._syntaxErrorHandler=
d;this._aspectHandles=[g.after(this._embeddedOutputsModel,"onModelUpdated",f.hitch(this,"_updateAlerts")),g.after(this._syntaxErrorHandler,"onParseCompletedWithNoSyntaxErrors",f.hitch(this,"_handleEvaluationHasNoSyntaxErrors"),!0)];this._updateAlerts()},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._alertModel.removeAllAlerts()},_updateAlerts:function(){var a=[],c=[],d=this._getAlertOutputsFromModel();d.forEach(function(e){var f=this._shouldBeStale(e,
d),g={type:"error"===e.type?b.ERROR:b.WARNING,line:e.codeLinePositions[0].getLineColumn().line,payload:{isStale:f},output:e};if(this._enableTooltips)if("error"===e.type){var h=this._diagnosticMessageFormatter.createErrorMessageWithStack(e.getHTML());g.payload.message=h.getDomNode().outerHTML;g.payload.isActive=!0}else h=this._diagnosticMessageFormatter.createWarningMessageWithStack(e.getHTML()),g.payload.message=h.getDomNode().outerHTML;(e=this._findMatchingAlert(e))&&!f?c.push(e):a.push(g)},this);
this._removeAllAlertsExceptFor(c);a.forEach(function(a){var b=this._alertModel.addAlert(a.type,a.line,a.payload);a.output.associatedAlertUid=b},this)},_shouldBeStale:function(a,b){var c=a.getDomElement(),c=e.contains(c,"typoFixApplied"),d=this._syntaxErrorHandler.isSyntaxError(a),f=this._syntaxErrorHandler.hasSyntaxError(b);return c||f&&!d},_getAlertOutputsFromModel:function(){return this._embeddedOutputsModel.getOutputs().filter(function(a){return"error"===a.type||"warning"===a.type})},_findMatchingAlert:function(a){var b=
null;this._alertModel.getAlerts().some(function(c){var d=a.associatedAlertUid===c.id;b=d?c:null;return d});return b},_removeAllAlertsExceptFor:function(b){var c=this._alertModel.getAlerts();b=a.differenceOfArrays(c,b).map(function(a){return a.id});0<b.length&&this._alertModel.removeAlerts(b)},_handleEvaluationHasNoSyntaxErrors:function(a){var b=a.regionNumbersToRun;if(void 0!==b&&0<b.length){a=b[0];var b=b[b.length-1],c=this._embeddedOutputsModel.getRegions();a=c[a];b=c[b];this._clearAllStale();this._setAlertsInRegionsAsStale(a,
b)}},_setAlertsInRegionsAsStale:function(a,b){this._alertModel.getAlerts().forEach(function(d){c.isPositionWithinRegionRange(d.position,a,b)&&this._alertModel.updateAlert(d.id,{payload:{isStale:!0}})},this)},_clearAllStale:function(){this._alertModel.getAlerts().forEach(function(a){var b={payload:{isStale:this._isAlertTypoFixed(a)}};this._alertModel.updateAlert(a.id,b)},this)},_isAlertTypoFixed:function(a){var b=!1;this._getAlertOutputsFromModel().some(function(c){if(c.codeLinePositions[0].line===
a.position.line)return c=c.getDomElement(),e.contains(c,"typoFixApplied")&&(b=!0),!0});return b},enableTooltips:function(a){this._enableTooltips=a}})})},"MW/rtc/plugins/language/matlab/alert/AlertTypeEnum":function(){define([],function(){return{ERROR:1,WARNING:2}})},"MW/rtc/plugins/embeddedoutputs/view/HitLineIndicatorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/embeddedoutputs/view/HitLineIndicator"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.embeddedoutputs.statehandler rtc.view.decoration rtc.internaldocument matlab.tokens rtc.embeddedoutputs.model rtc.embeddedoutputs.executiondatamanager rtc.linenumberservice".split(" ")}},
createInstance:function(e,d,c,b,a,f,h){return new g(e,d,c,b,a,f,h)}})})},"MW/rtc/plugins/embeddedoutputs/view/HitLineIndicator":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities"],function(h,f,g,e,d){return h(e,{_NON_HIT_CODE_CLASS:"notHitCode",constructor:function(c,b,a,d,e,h,q){this._stateHandler=c;this._decorator=b.createDecorator();this._internalDocument=a;this._tokenizerService=d;this._embeddedOutputsModel=
e;this._executionDataManager=h;this._lineNumberService=q;this.own(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_handleEvalType"),!0));this._ignoreOpacityLines={};this._continuationLines={};this._functionFirstLines={}},_handleEvalType:function(c,b){c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED?(this._preProcessTokens(),this._setCodeOpacity(),this._addExecutionDataListener(),this._documentListener||this._addDocumentListener()):c===this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE&&
(this._executionDataListener&&(b.didRunToCompletion&&this._postProcessColoring(),this._removeExecutionDataListener()),this._ignoreOpacityLines={},this._continuationLines={},this._functionFirstLines={})},_setCodeOpacity:function(){for(var c=this._lineNumberService.getNumberOfCodeLines(),b=1;b<=c;b++){var a=this._lineNumberService.getLineNumberFromCodeLineNumber(b)+1,a=this._internalDocument.getRangeForLine(a);this._decorator.addClass(a,[this._NON_HIT_CODE_CLASS])}this._decorator.applyChanges()},_handleDocumentChange:function(){this._executionDataListener&&
this._removeExecutionDataListener();this._removeDocumentListener();for(var c=this._lineNumberService.getNumberOfCodeLines(),b=1;b<=c;b++){var a=this._lineNumberService.getLineNumberFromCodeLineNumber(b)+1,a=this._internalDocument.getRangeForLine(a);this._decorator.clearRange(a)}this._decorator.applyChanges()},_preProcessTokens:function(){this._mostRecentContinuationStart=1;var c=this._tokenizerService.getTokensData().tokens,b;for(b in c)c.hasOwnProperty(b)&&(c[b].forEach(function(a){var c=parseInt(b)+
1;this._locateEndsAndFunctions(a,c);this._locateFunctionFirstLines(a,c);this._locateContinuations(c)},this),this._locateStandaloneComments(c,b))},_locateEndsAndFunctions:function(c,b){if(d.isTokenEndOfBlock(c)||d.isFunctionToken(c))this._ignoreOpacityLines[b]=!0},_locateFunctionFirstLines:function(c,b){d.isFunctionToken(c)&&(this._functionFirstLines[this._lineNumberService.getLineNumberFromCodeLineNumber(b+1)]=b)},_locateContinuations:function(c){var b=this._tokenizerService.getLexStateForLine(c);
this._tokenizerService.isLineContinuation(b)&&(this._continuationLines.hasOwnProperty(c)||(this._mostRecentContinuationStart=c),this._continuationLines[c+1]=this._mostRecentContinuationStart)},_locateStandaloneComments:function(c,b){var a=c[b][0];"%"===a.getValue().trim().substring(0,1)&&(this._ignoreOpacityLines[a.getPositionInfo().line+1]=!0)},_handleLineData:function(c,b){for(var a=0;a<b.length;a++){var d=this._lineNumberService.getLineNumberFromCodeLineNumber(a+1)+1,e=this._internalDocument.getRangeForLine(d);
0<b[a]?(this._decorator.clearRange(e),this._handleFunctionHeaders(d)):(this._handleContinuations(e,b,d),this._handleEndsAndComments(e,b,d,c))}this._decorator.applyChanges()},_handleContinuations:function(c,b,a){this._continuationLines.hasOwnProperty(a)&&0<b[this._lineNumberService.getCodeLineNumberFromLineNumber(this._continuationLines[a]-1)-1]&&this._decorator.clearRange(c)},_handleFunctionHeaders:function(c){this._functionFirstLines.hasOwnProperty(c)&&(c=this._internalDocument.getRangeForLine(this._functionFirstLines[c]),
this._decorator.clearRange(c))},_handleEndsAndComments:function(c,b,a,d){(b=this._embeddedOutputsModel.getRegions()[d])&&a<=b.code.regionPositions[0].line&&this._ignoreOpacityLines.hasOwnProperty(a)&&this._decorator.clearRange(c)},_postProcessColoring:function(){Object.keys(this._ignoreOpacityLines).forEach(function(c){c=this._internalDocument.getRangeForLine(parseInt(c));this._decorator.clearRange(c)},this);this._decorator.applyChanges()},_addDocumentListener:function(){this._documentListener=g.after(this._internalDocument,
"onDocumentChanged",f.hitch(this,"_handleDocumentChange"),!0)},_removeDocumentListener:function(){this._documentListener.remove();this._documentListener=null},_addExecutionDataListener:function(){this._executionDataListener=g.after(this._executionDataManager,"onDataUpdate",f.hitch(this,"_handleLineData"),!0)},_removeExecutionDataListener:function(){this._executionDataListener.remove();this._executionDataListener=null},destroy:function(){this._removeExecutionDataListener();this._removeDocumentListener()}})})},
"MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ExecutionManagerViewService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.embeddedoutputs.executionmanager"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/embeddedoutputs/ExecutionManagerViewService":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,
f,g){return h(g,{_NEXT_REQUEST_TIMEOUT:500,constructor:function(e){this._executionManager=e;this._isSilentExecution=!1;this._callbackQueue=[]},executeViewAction:function(e){this._isSilentExecution?this._callbackQueue.push(e):e()},executeSectionWithVisualDelay:function(e,d,c,b){this._setNextRequestTimeout();this._setLiveEvalTimeout(b);this._executionManager.executeSection(e,d,c)},_setNextRequestTimeout:function(){this._nextRequestTimeout&&(window.clearTimeout(this._nextRequestTimeout),this._nextRequestTimeout=
null);this._nextRequestTimeout=window.setTimeout(f.hitch(this,function(){this._clearTimerAndSilentExecutionState()}),this._NEXT_REQUEST_TIMEOUT)},_clearTimerAndSilentExecutionState:function(){this._clearTimer();this._isSilentExecution=!1;this._callbackQueue=[]},_clearTimer:function(){this._liveEvalTimeout&&(window.clearTimeout(this._liveEvalTimeout),this._liveEvalTimeout=null)},_setLiveEvalTimeout:function(e){this._isSilentExecution=!0;this._clearTimer();this._liveEvalTimeout=window.setTimeout(f.hitch(this,
function(){this._executeCallbacks()}),e)},_executeCallbacks:function(){this._isSilentExecution=!1;this._callbackQueue.forEach(function(e){e()},this);this._callbackQueue=[]}})})},"MW/rtc/plugins/embeddedoutputs/triggers/TriggersProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/triggers/Triggers","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:"rtc.actionservice rtc.embeddedoutputs.statehandler rtc.cursor rtc.embeddedoutputs.executionmanager rtc.code.codechange rtc.keyhandler rtc.code.sections.model".split(" ")}},
createInstance:function(e,d,c,b,a,g,h){return new f(e,d,c,b,a,g,h)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/Triggers":function(){define(["dojo/_base/declare","dojo/_base/lang","./EvalOnLineChangeTrigger","./LiveEvalTrigger","./ManualTrigger"],function(h,f,g,e,d){return h(null,{_ACTION_STATES:{AUTO:"auto",MANUAL:"manual"},constructor:function(c,b,a,d,e,f,g){this._actionService=c;this._stateHandler=b;this._cursor=a;this._executionManager=d;this._codeChangeService=
e;this._keyHandler=f;this._sectionModel=g;this.enableTriggers()},enableTriggers:function(){if(!this._enabled){var c=[{id:"rtc_embedded_outputs_auto",enabled:!0,selected:!1,callback:f.hitch(this,"setEvaluationState",this._ACTION_STATES.AUTO),isEvalOnLineChange:f.hitch(this,"_isEvalOnLineChange")},{id:"rtc_embedded_outputs_manual",enabled:!0,selected:!1,callback:f.hitch(this,"setEvaluationState",this._ACTION_STATES.MANUAL)}];this._actionService.loadActions(c);this._liveEvalTrigger=new e(this._codeChangeService,
this._executionManager);this._autoTrigger=this._evalOnLineChangeTrigger=new g(this._cursor,this._stateHandler,this._codeChangeService,this._executionManager);this.setEvaluationState(this._ACTION_STATES.MANUAL);this._manualTrigger=new d(this._cursor,this._actionService,this._keyHandler,this._sectionModel,this._executionManager);this._enabled=!0}},disableTriggers:function(){this._enabled&&(this._manualTrigger.destroy(),this._manualTrigger=null,this._liveEvalTrigger.destroy(),this._liveEvalTrigger=null,
this._evalOnLineChangeTrigger.destroy(),this._evalOnLineChangeTrigger=null,this._actionService.removeAction("rtc_embedded_outputs_auto"),this._actionService.removeAction("rtc_embedded_outputs_manual"),this._enabled=!1)},_switchAutoEval:function(){this._autoTrigger.disable();this._isEvalOnLineChange()?this._autoTrigger=this._liveEvalTrigger:this._autoTrigger=this._evalOnLineChangeTrigger;this._autoTrigger.enable()},_isEvalOnLineChange:function(){return this._autoTrigger===this._evalOnLineChangeTrigger},
_updateActionStates:function(c){this._actionService.updateAction("rtc_embedded_outputs_auto",{selected:c});this._actionService.updateAction("rtc_embedded_outputs_manual",{selected:!c})},setEvaluationState:function(c){this._currentActionState=c;(c=c===this._ACTION_STATES.AUTO)?this._autoTrigger.enable():this._autoTrigger.disable();this._updateActionStates(c)},getEvaluationState:function(){return this._currentActionState},destroy:function(){this.disableTriggers()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/EvalOnLineChangeTrigger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{constructor:function(e,d,c,b){this._cursor=e;this._stateHandler=d;this._codeChangeService=c;this._executionManager=b;this._aspectHandles=[];this._onCodeRegionChangeHandle=null;this._priorCursorLine=1;this._isDirty=!1;this._stateHandler.attachListener(this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED,f.hitch(this,"_clean"));this.disable()},destroy:function(){this.disable()},enable:function(){this._onCodeRegionChangeHandle||(this._onCodeRegionChangeHandle=
g.after(this._codeChangeService,"onCodeChanged",f.hitch(this,"_setDirty")));this._onCursorChangeHandle||(this._onCursorChangeHandle=g.after(this._cursor,"onChange",f.hitch(this,"_runIfDirtyAndLineChange")))},_clean:function(){this._isDirty=!1},_runIfDirtyAndLineChange:function(){var e=this._cursor.getLineColumn().line,d=e!==this._priorCursorLine;this._priorCursorLine=e;this._isDirty&&d&&this._evalNow()},disable:function(){this._onCodeRegionChangeHandle&&(this._onCodeRegionChangeHandle.remove(),this._onCodeRegionChangeHandle=
null);this._onCursorChangeHandle&&(this._onCursorChangeHandle.remove(),this._onCursorChangeHandle=null);this._executionManager.interrupt()},_setDirty:function(){this._isDirty=!0},_evalNow:function(){this._isDirty=!1;this._executionManager.executeAllSections()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/LiveEvalTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{_LIVE_EVAL_DELAY:200,constructor:function(e,d){this._codeChangeService=e;
this._executionManager=d;this._aspectHandles=[];this._fullEval=!1;this._liveAspectHandle=null},destroy:function(){this.disable()},enable:function(){this._liveAspectHandle||(this._liveAspectHandle=g.after(this._codeChangeService,"onCodeChanged",f.hitch(this,"_resetTimer")));this._executionManager.executeAllSections()},disable:function(){this._liveAspectHandle&&(this._liveAspectHandle.remove(),this._liveAspectHandle=null);clearTimeout(this._updateTimer);this._executionManager.interrupt()},_resetTimer:function(){this._updateTimer&&
(clearTimeout(this._updateTimer),this._updateTimer=null);this._updateTimer=setTimeout(f.hitch(this,"_evalNow"),this._LIVE_EVAL_DELAY)},_evalNow:function(){clearTimeout(this._updateTimer);this._updateTimer=null;this._executionManager.executeAllSections()}})})},"MW/rtc/plugins/embeddedoutputs/triggers/ManualTrigger":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions dojo/sniff MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants".split(" "),function(h,
f,g,e,d,c){return h(null,{constructor:function(b,a,c,d,h){this._actionService=a;this._cursor=b;this._keyHandler=c;this._sectionModel=d;this._executionManager=h;this._aspectHandles=[];this._actions=[{id:"rtc_refresh_outputs",enabled:!0,callback:f.hitch(h,"executeAllSections")},{id:"rtc_refresh_all_outputs",enabled:!0,key:"f5",platformKey:{mac:"meta_alt_r"},callback:f.hitch(this,"_runAll")},{id:"rtc_run_section",enabled:!0,contextMenuGroup:"CodeSections",text:e.runSectionLabel,key:"ctrl_enter",platformKey:{mac:"meta_enter"},
callback:f.hitch(this,"_runSection")},{id:"rtc_run_section_advance",enabled:!0,text:e.runSectionAndAdvanceLabel,key:"ctrl_shift_enter",platformKey:{mac:"meta_shift_enter"},callback:f.hitch(this,"_runSectionAdvance")},{id:"rtc_run_section_end",enabled:!0,text:e.runSectionToEndLabel,callback:f.hitch(this,"_runSectionEnd")}];a.loadActions(this._actions);this._addOtherKeyBindings();this._aspectHandles.push(g.after(this._sectionModel,"currentSectionChanged",f.hitch(this,"_updateActionState")));this._aspectHandles.push(g.after(this._sectionModel,
"onAttributesUpdated",f.hitch(this,"_updateActionState")));this._aspectHandles.push(g.after(this._actionService,"onActionChange",f.hitch(this,function(a){"rtc_embedded_outputs_manual"===a.id&&"selected"===a.key&&this._updateActionState()}),!0));this._updateActionState()},_runSectionEnd:function(){var b=this._actionService.getAction("rtc_run_section_end");b&&b.enabled&&this._executionManager.executeCurrentSection(!0,!1)},_runSection:function(){var b=this._actionService.getAction("rtc_run_section");
b&&b.enabled&&this._executionManager.executeCurrentSection(!1,!1)},_runSectionAdvance:function(){var b=this._actionService.getAction("rtc_run_section");b&&b.enabled&&(this._executionManager.executeCurrentSection(!1,!0),this._actionService.executeAction("rtc_navigate_next_section"))},_runAll:function(){var b=this._actionService.getAction("rtc_refresh_all_outputs");b&&b.enabled&&this._executionManager.executeAllSections()},_updateActionState:function(){var b=this._actionService.getAction("rtc_embedded_outputs_manual"),
b=b&&b.selected;this._isInLocalFunctionSection()&&(b=!1);this._actionService.updateAction("rtc_run_section",{enabled:b});this._actionService.updateAction("rtc_run_section_advance",{enabled:b});this._actionService.updateAction("rtc_run_section_end",{enabled:b})},_isInLocalFunctionSection:function(){var b=this._sectionModel.getCurrentSection();return b&&b[c.LOCAL_FUNCTION_ATTRIBUTE]&&0<b[c.LOCAL_FUNCTION_ATTRIBUTE].length},_addOtherKeyBindings:function(){d("mac")&&this._keyHandler.addBindings([{key:"f5",
action:"rtc_refresh_all_outputs"}])},_removeOtherKeyBindings:function(){d("mac")&&this._keyHandler.removeBindings("f5")},destroy:function(){this._aspectHandles.forEach(function(b){b.remove()});this._removeOtherKeyBindings();this._actions.forEach(function(b){this._actionService.updateAction(b.id,{enabled:!1});this._actionService.removeAction(b.id)},this)}})})},"MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants":function(){define([],function(){return{LOCAL_FUNCTION_ATTRIBUTE:"localFunctions",
TOP_LEVEL_FUNCTION_ATTRIBUTE:"topLevelFunctions",FUNCTION_ATTRIBUTE:"functions"}})},"MW/rtc/plugins/embeddedoutputs/triggers/InterruptActionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/embeddedoutputs/triggers/InterruptAction","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.actionservice","rtc.cursorcontroller","rtc.embeddedoutputs.executionmanager"]}},createInstance:function(e,d,c){return new f(e,d,c)},destroyInstance:function(e){e.destroy()}})})},
"MW/rtc/plugins/embeddedoutputs/triggers/InterruptAction":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{constructor:function(g,e,d){this._actionService=g;this._cursorController=e;this._executionManager=d;this._actions=[{id:"rtc_interrupt_embedded_outputs",enabled:!0,key:"ctrl_c",callback:f.hitch(this,"_interruptCallback")}];this._actionService.loadActions(this._actions)},_interruptCallback:function(){if(this._cursorController.hasSelection())return!1;this._executionManager.interrupt();
return!0},destroy:function(){this._actionService.removeAction("rtc_interrupt_embedded_outputs")}})})},"MW/rtc/plugins/export/ExportNotifierProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/export/ExportNotifier","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:[]}},createInstance:function(){return new f}})})},"MW/rtc/plugins/export/ExportNotifier":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,
f){return h(f,{notifyExportStart:function(){this.onExportStart()},onExportStart:function(){}})})},"MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ExecutableCodeService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document.executablecode.executablecodeconverter"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/language/matlab/executablecode/ExecutableCodeService":function(){define(["dojo/_base/declare"],
function(h){return h(null,{_internalDocument:null,_executableCodeConverter:null,constructor:function(f,g){this._internalDocument=f;this._executableCodeConverter=g},getEvalText:function(){return this._executableCodeConverter.getEvalTextFromNode(this._internalDocument.root)}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ExecutableCodeConverter"],function(h,
f,g){return h(f,{requires:function(){return{createInstance:["rtc.document.executablecode.executablecodeconverter.converter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/ExecutableCodeConverter":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractRecursiveConverterPlugin"],function(h,f){return h(f,{CONVERTER_PLUGIN_NAME:"ExecutableCodeConverter",constructor:function(f){this._initializeRecursiveConverter(f)},
getEvalTextFromNode:function(f){var e=this._getConverter(f);return e?e.getEvalTextFromNode(f):null}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RootNodeExecutableCodeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/RootNodeExecutableCodeConverter":function(){define(["dojo/_base/declare",
"./base/InnerNodeExecutableCodeConverter","MW/rtc/nodes/inner/RootNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/InnerNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","./AbstractExecutableCodeConverter"],function(h,f){return h(f,{constructor:function(){},getEvalTextFromNode:function(f){var e=this;return f.children.map(function(d){return e._mainConverter.getEvalTextFromNode(d)}).filter(function(d){return null!==
d}).join(f.CHILD_TEXT_SEPARATOR)}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/AbstractExecutableCodeConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractRecursiveConverter"],function(h,f,g){return h(g,{getEvalTextFromNode:function(e){f.error("Unimplemented: getEvalTextFromNode")}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./LineNodeExecutableCodeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/LineNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","./base/InnerNodeExecutableCodeConverter","MW/rtc/nodes/inner/LineNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./PlainTextNodeExecutableCodeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/PlainTextNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","./base/LeafNodeExecutableCodeConverter","MW/rtc/nodes/leaf/PlainTextNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},
"MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/LeafNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","./AbstractExecutableCodeConverter"],function(h,f){return h(f,{constructor:function(){},getEvalTextFromNode:function(f){return f.getCodeText()}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MTreeService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.editordataservice",
"rtc.document"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeService":function(){define(["./MTreeNodeFactory","dojo/Deferred","dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return g(e,{_EDS_FEATURE_ID:"matlab.code.mtree",constructor:function(d,c){this._edsHandle=d.listenTo(this._EDS_FEATURE_ID,this._handleEDSCallback.bind(this));this._document=c;this._fileType=this._tree=this._data=null;this._lastDocumentState=-1},
destroy:function(){this.inherited(arguments);this._edsHandle.remove()},_handleEDSCallback:function(d){this._data=d;this._lastDocumentState=d.documentState;this._build();this._deferred&&this._document.getState()===this._lastDocumentState&&(this._deferred.resolve(this._tree),this._deferred=null);this.onUpdate()},_build:function(){this._tree=this._data.mTree?this._data.mTree.map(function(d){return h.create(d)}):null;this._fileType=this._data.fileType||null},getMTree:function(){if(this._document.getState()===
this._lastDocumentState)return this._tree;this._deferred||(this._deferred=new f);return this._deferred},getFileType:function(){return this._fileType},onUpdate:function(){}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeNodeFactory":function(){define("./nodes/BlockCommentMTreeNode ./nodes/CellTitleMTreeNode ./nodes/ClassdefMTreeNode ./nodes/ClassdefSectionMTreeNode ./nodes/EqualsMTreeNode ./nodes/ForMTreeNode ./nodes/FunctionCallMTreeNode ./nodes/FunctionDeclarationMTreeNode ./nodes/FunctionIdentifierMTreeNode ./nodes/IfMTreeNode ./nodes/StatementMTreeNode ./nodes/VariableMTreeNode ./nodes/WhileMTreeNode".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return{_REGISTRY:{FunctionCallNode:b,FunctionDeclarationNode:a,ClassdefNode:g,EnumerationNode:e,PropertiesNode:e,MethodsNode:e,EventsNode:e,FunctionIdentifierNode:k,VariableNode:q,ForNode:c,ParForNode:c,WhileNode:n,SPMDNode:m,TryNode:m,SwitchNode:m,IfNode:l,EqualsNode:d,BlockCommentNode:h,CellTitleNode:f},create:function(a){var b=this._REGISTRY[a.type],c=a.children?this.createMultiple(a.children):null;return new b(a,c)},createMultiple:function(a){return a.map(this.create,
this)}}})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/BlockCommentMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/MTreeNode":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g){this._data=f;this._children=g;this._parent=null;this._children&&this._children.forEach(function(e){e._parent=this},this)},getParent:function(){return this._parent},getChildren:function(){return this._children},
getAllChildren:function(){return this.getChildren()},getStartLine:function(){return this._data.startLine},getStartColumn:function(){return this._data.startColumn},getEndLine:function(){return this._data.endLine},getEndColumn:function(){return this._data.endColumn}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/CellTitleMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefMTreeNode":function(){define(["dojo/_base/declare",
"./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ClassdefSectionMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/EqualsMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode","../MTreeUtils"],function(h,f,g){return h(f,{getLHSChildren:function(){return this._partitionChildren(!0)},getRHSChildren:function(){return this._partitionChildren(!1)},
_partitionChildren:function(e){return this.getChildren().filter(function(d){d=g.compareByPosition(d,this);return e?0>d:0<d},this)}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/MTreeUtils":function(){define([],function(){return{compareByPosition:function(h,f){return this._xBeforeY(h,f)?-1:this._xBeforeY(f,h)?1:0},_xBeforeY:function(h,f){var g=h.getEndLine(),e=f.getStartLine();return g<e||g===e&&h.getEndColumn()<f.getStartColumn()?!0:!1}}})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ForMTreeNode":function(){define(["dojo/_base/declare",
"./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionCallMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode","./FunctionIdentifierMTreeNode"],function(h,f,g){return h(f,{constructor:function(e,d){this._functionName=new g(this._data.functionName)},getFunctionName:function(){return this._functionName}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionIdentifierMTreeNode":function(){define(["dojo/_base/declare","./IdentifierMTreeNode"],
function(h,f){return h(f,{isUsedCrossFunctions:function(){return this._data.isUsedCrossFunctions},isPersistent:function(){return this._data.isPersistent},isGlobal:function(){return this._data.isGlobal}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/IdentifierMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,f){return h(f,{getText:function(){return this._data.text},getSymbolTableIndex:function(){return this._data.symbolTableIndex}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionDeclarationMTreeNode":function(){define(["dojo/_base/declare",
"./MTreeNode","./FunctionIdentifierMTreeNode","./VariableMTreeNode"],function(h,f,g,e){return h(f,{constructor:function(d,c){this._functionName=new g(this._data.functionName);this._functionInputArguments=this._convertFunctionArguments(this._data.functionInputArguments);this._functionOutputArguments=this._convertFunctionArguments(this._data.functionOutputArguments)},_convertFunctionArguments:function(d){return d.map(function(c){return new e(c)})},getAllChildren:function(){return[].concat(this.getFunctionName(),
this.getFunctionInputArguments(),this.getFunctionOutputArguments(),this.getChildren())},getFunctionName:function(){return this._functionName},getFunctionInputArguments:function(){return this._functionInputArguments},getFunctionOutputArguments:function(){return this._functionOutputArguments}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/VariableMTreeNode":function(){define(["dojo/_base/declare","./IdentifierMTreeNode"],function(h,f){return h(f,{isUsedCrossFunctions:function(){return this._data.isUsedCrossFunctions},
isPersistent:function(){return this._data.isPersistent},isGlobal:function(){return this._data.isGlobal},isAssignment:function(){return this._data.isAssignment}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/IfMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/StatementMTreeNode":function(){define(["dojo/_base/declare","./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/nodes/WhileMTreeNode":function(){define(["dojo/_base/declare",
"./MTreeNode"],function(h,f){return h(f,{})})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServicesProvider":function(){define(["./MTreeCodeBlockServices","./MTreeCodeBlockStructure","dojo/_base/declare","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return g(e,{requires:function(){return{createInstance:["matlab.code.codeblocks.structure"]}},createInstance:function(d){return new h(d)}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockServices":function(){define(["dojo/aspect",
"dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType"],function(h,f,g,e,d){return f(e,{constructor:function(c){this._codeBlockStructure=c},whenSynchronized:function(c){this._codeBlockStructure.whenSynchronized(c)},isLineInFunction:function(c){return this._isLineInBlockOfType(c,d.FUNCTION_DEFINITION)},isLineInLoop:function(c){return this._isLineInBlockOfType(c,d.FOR_LOOP)||this._isLineInBlockOfType(c,d.WHILE_LOOP)},
isLineInIfStatement:function(c){return this._isLineInBlockOfType(c,d.IF_STATEMENT)},getOutermostBlockOfType:function(c,b){return this._getEdgeBlockOfType(c,b,!0)},getInnermostBlockOfType:function(c,b){return this._getEdgeBlockOfType(c,b,!1)},getOutermostLoop:function(c){var b=this.getOutermostBlockOfType(c,d.FOR_LOOP);c=this.getOutermostBlockOfType(c,d.WHILE_LOOP);return!b?c:!c?b:b.startLine>c.startLine?c:b},_getEdgeBlockOfType:function(c,b,a){c=this._codeBlockStructure.getBlocksForLine(c);if(!c)return null;
a&&(c=c.reverse());var d=null;c.forEach(g.hitch(this,function(a){a.type===b&&(d=a)}));return d},_isLineInBlockOfType:function(c,b){var a=!1,d=this._codeBlockStructure.getBlocksForLine(c);d&&(a=d.some(g.hitch(this,function(a){return a.type===b})));return a}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructure":function(){define("dojo/aspect dojo/when dojo/Deferred dojo/_base/declare dojo/_base/lang MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/BlockType MW/rtc/plugins/language/matlab/syntax/mtree/nodes/ForMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/FunctionDeclarationMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/IfMTreeNode MW/rtc/plugins/language/matlab/syntax/mtree/nodes/WhileMTreeNode".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return e(c,{constructor:function(a,b,c){this._mTreeService=a;this._lineNumberService=b;this._isDirty=!0;this.own(h.after(c,"onDocumentChanged",d.hitch(this,"_handleDocumentChange")));this._reset()},_handleDocumentChange:function(){this._isDirty=!0},whenSynchronized:function(a){this._isDirty?this._build().then(a):a()},getBlocksForLine:function(a){return(a=this._lineBlockTypes[a])?a.slice():[]},getCodeBlocks:function(){return this._codeBlocks.slice()},_build:function(){var a=
new g;f(this._mTreeService.getMTree(),d.hitch(this,function(b){this._reset();b&&b.forEach(d.hitch(this,function(a){this._visitNodeAndItsChildren(a)}));this._isDirty=!1;a.resolve()}));return a},_visitNodeAndItsChildren:function(a){this._visitNode(a);a.getChildren()&&a.getChildren().forEach(d.hitch(this,function(a){this._visitNodeAndItsChildren(a)}))},_visitNode:function(c){this._currentBlockId++;var d=this._lineNumberService.getCodeLineNumberFromLineNumber(c.getStartLine()-1),e=this._lineNumberService.getCodeLineNumberFromLineNumber(c.getEndLine()-
1);c instanceof k?this._markLinesAsType(b.FUNCTION_DEFINITION,d,e):c instanceof l?this._markLinesAsType(b.IF_STATEMENT,d,e):c instanceof a?this._markLinesAsType(b.FOR_LOOP,d,e):c instanceof m&&this._markLinesAsType(b.WHILE_LOOP,d,e)},_markLinesAsType:function(a,b,c){for(a=this._packageBlockData(a,b,c);b<=c;b++)this._addBlockDataToLine(b,a);this._codeBlocks.push(a)},_packageBlockData:function(a,b,c){return{id:a+"_"+this._currentBlockId,type:a,startLine:b,endLine:c}},_addBlockDataToLine:function(a,
b){this._lineBlockTypes[a]?this._lineBlockTypes[a].push(b):this._lineBlockTypes[a]=[b]},_reset:function(){this._currentBlockId=0;this._lineBlockTypes={};this._codeBlocks=[]}})})},"MW/rtc/plugins/language/matlab/syntax/mtree/codeblocks/MTreeCodeBlockStructureProvider":function(){define(["./MTreeCodeBlockStructure","dojo/_base/declare","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return f(g,{requires:function(){return{createInstance:["matlab.code.mtree","rtc.linenumberservice","rtc.internaldocument"]}},
createInstance:function(e,d,c){return new h(e,d,c)}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighting/SyntaxHighlightingProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/syntaxhighlighting/SyntaxHighlighterPlugin"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.internaldocument","rtc.view","rtc.view.decoration"]}},createInstance:function(e,
d,c,b){return new g(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/syntaxhighlighting/SyntaxHighlighterPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/syntaxhighlighting/SyntaxHighlightingDataServiceFactory mw-utils/Utils mw-log/Log".split(" "),function(h,f,g,e,d,c,b,a){return h(e,{constructor:function(a,b,d,e){this._document=a;this._internalDocument=b;this._view=d;this._decorator=
e.createDecorator();this._dataService=c.getInstance();this._model={};this._requestID=null;this.own(g.after(this._dataService,"onTokenUpdate",f.hitch(this,this._onServerResponse),!0));this.own(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_updateSyntaxHighlighting"),!0));this.own(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_updateSyntaxHighlighting")))},_updateSyntaxHighlighting:function(){var a=this;clearTimeout(this._idleTimerID);this._idleTimerID=setTimeout(function(){a._serverRequest()},
200)},_serverRequest:function(){this._requestID=b.generateUuid();var a=this._document.getCodeText();this._dataService.updateData(a,this._requestID,!0)},_onServerResponse:function(a,b,c,e){c=this._document.getCodeText();if(!(this._requestID!==a||0!==c.localeCompare(e))){a=this._processTokens(b,e);this._updateModel(a);a=this._internalDocument.getMaxLineNumber();for(b=0;b<a;b+=1)e=this._internalDocument.getLineNode(b),d.isCodeContainer(e)&&(e=this._internalDocument.getRangeForLine(b+1),this._decorator.clearRange(e),
this._decorateForTokens(this._model[b]));this._decorator.applyChanges()}},_decorateForTokens:function(a){a.forEach(function(a){var b=a.range.start,c=a.range.end,b=this._internalDocument.getRangeForLineColumn(b.row+1,b.column+1,c.row+1,c.column+1);this._decorator.setStyle(b,"color",a.color)},this)},_updateModel:function(a){this._model=a},_appendTokenToMap:function(a,b,c){a.value&&void 0!==c&&b[c].push(a)},_convertTokenColor:function(a){return a=a.r||a.g||a.b?"rgb("+a.r+", "+a.g+", "+a.b+")":""},_createNewToken:function(a,
b,c,d){return{value:a?a:"",color:b?b:"",range:{start:c?c:{row:0,column:0},end:d?d:{row:0,column:0}}}},_createRangeOfToken:function(a,b,c,d){return{start:{row:a,column:c-b},end:{row:a,column:d-b}}},_isValidToken:function(a){return 0<a.value.length&&!(0===a.color.r&&0===a.color.g&&0===a.color.b)},_processTokens:function(b,c){var d={},e=0,f=c.split("\n");d[0]=[];var g=0,h,s,t,u,v;for(v=0;v<b.length;v+=1)u=b[v],"\n"===u.value?(e+=f[g].length+1,g+=1,d[g]=[]):this._isValidToken(u)&&(t=this._convertTokenColor(u.color),
s=this._createRangeOfToken(g,e,u.startPosition,u.startPosition+u.value.length),h=s.start,s=s.end,a.assert(h.row===s.row,"Tokens should not span multiple lines"),t=this._createNewToken(u.value,t,h,s),this._appendTokenToMap(t,d,h.row));return d}})})},"MW/syntaxhighlighting/SyntaxHighlightingDataServiceFactory":function(){define(["dojo/_base/declare","dojo/aspect","mw-remote/Remote","MW/syntaxhighlighting/SyntaxHighlightingDataService"],function(h,f,g,e){var d;f.after(g,"reset",function(){d=null});return{getInstance:function(){return d=
d||new e}}})},"MW/syntaxhighlighting/SyntaxHighlightingDataService":function(){define(["dojo/_base/declare","mw-remote/Remote","MW/syntaxhighlighting/ColorMapDefaults","mw-log/Log"],function(h,f,g,e){return h(null,{constructor:function(){f.registerResponseHandler("SyntaxHighlightingResponse",this._handleSyntaxHighlightingResponse,this);f.registerFaultHandler("SyntaxHighlighting",this._handleSyntaxHighlightingError,this);this._defaultMap=g},updateData:function(d,c,b,a){this._assertNotNullOrUndefined(d);
this._rteMode=b||!1;0<d.length?f.sendMessage({SyntaxHighlighting:{matlabCode:d}},{uuid:c,matlabCode:d,contextID:a}):this._propagateResponse(c,[],[],[],!0,d)},onTokenUpdate:function(d,c,b,a){},onSectionLocationUpdate:function(d,c,b,a){},_assertNotNullOrUndefined:function(d){if(null===d||void 0===d)throw Error("MW.syntaxhighlighting.SyntaxHighlightingDataService: input parameter must not be null or undefined.");},_handleSyntaxHighlightingResponse:function(d,c){dojo.forEach(d,function(b){this._propagateResponse(c.uuid,
b.tokens,b.offsets,b.cellLocations,b.validTree,c.matlabCode,c.contextID)},this)},_getTokensFromArrays:function(d,c,b){var a,e,f=[];for(a=0;a<c.length;a+=1){var g=a+1>=c.length?d.length:b[a+1],h=c[a],n=this._defaultMap.colorMapDefaults[h];this._rteMode&&(h=this._defaultMap.typeMapDefaults[h]);n=n||{r:0,g:0,b:0};e=d.substring(b[a],g);g=b[a];if(this._rteMode){var p=e.split("\n");if(1<e.length&&1<p.length)for(e=0;e<p.length;e+=1)f.push({value:0<p[e].length?p[e]:"\n",color:n,type:String(h),startPosition:g}),
g+=0<p[e].length?p[e].length:1;else f.push({value:e,color:n,type:String(h),startPosition:g})}else f.push({value:e,color:n,type:String(h),startPosition:g})}return f},_propagateResponse:function(d,c,b,a,f,g,h){e.assert(d,"No uuid property found in context.");c=this._getTokensFromArrays(g,c,b);this.onTokenUpdate(d,c,h,g);this.onSectionLocationUpdate(d,a,f,g)},_handleSyntaxHighlightingError:function(d){e.error("Error received while trying to receive syntax highlighting tokens.");e.dir(d)}})})},"MW/syntaxhighlighting/ColorMapDefaults":function(){define(["dojo/_base/declare"],
function(h){return{typeMapDefaults:{122:"error",105:"comment",106:"comment",107:"comment",108:"comment",109:"comment",110:"comment",44:"string",45:"string",127:"type sections",333:"keyword",337:"invalid",338:"system",339:"plain"},colorMapDefaults:{122:{r:255,g:0,b:0},105:{r:34,g:139,b:34},106:{r:34,g:139,b:34},107:{r:34,g:139,b:34},108:{r:34,g:139,b:34},109:{r:34,g:139,b:34},110:{r:34,g:139,b:34},44:{r:160,g:32,b:240},45:{r:160,g:32,b:240},127:{r:162,g:82,b:45},333:{r:0,g:0,b:255},337:{r:179,g:0,
b:0},338:{r:179,g:140,b:0},339:{r:0,g:0,b:0}},HTMLColorMapDefaults:{122:"#ff0000",105:"#228b22",106:"#228b22",107:"#228b22",108:"#228b22",109:"#228b22",110:"#228b22",44:"#a020f0",45:"#a020f0",127:"#a2522d",333:"#0000ff",337:"#b30000",338:"#b38c00",339:"#000000"}}})},"MW/rtc/plugins/equations/equationcontroller/EquationControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationController"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view",
"rtc.internaldocument","rtc.cursor","rtc.document"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)}})})},"MW/rtc/plugins/equations/equationcontroller/EquationController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/EquationRenderer MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/DocumentEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/model/events/NumberOfLinesChangedEvent ./nodes/EquationNode ../tools/AutoDisplayStyle".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h(d,{constructor:function(a,b,c,d){this._view=a;this._internalDocument=b;this._cursor=c;this._document=d;e.loadFonts();this.own(g.after(this._document,"onDirectedDeletion",f.hitch(this,"_onDelete"),!0));this.own(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"),!0))},_handleDocumentChanged:function(a){n.autoStyle(a,this._view,this._internalDocument,this._cursor)},_isEquationNode:function(a){return a instanceof q},_isEquationOfType:function(a,
b){return this._isEquationNode(a)&&a.getEncoding()===b},_onDelete:function(a,b){if(!this._cursor.hasSelection()&&b.isLocal){var c=b.startNode;if(this._isEquationOfType(c,"tex")){if(-1===a&&this.onDelete(c))return!0;this._cursor.setPosition(this._cursor.selectionInfo2cursorPos(b));return!0}}},onDelete:function(a){},onActionsNeedUpdate:function(){},equationUnderCursor:function(a,b){var d=this._cursor.selectionInfo(),e=d.isLocal&&this._isEquationNode(d.startNode)&&d.startNode.getEncoding()===a?d.startNode:
null;if((!e||b===c.FORWARD_DELETE)&&d.isNull&&d.endPos===d.endNode.maxOffset())e=(d=d.endNode.nextSibling())&&this._isEquationNode(d)&&d.getEncoding()===a?d:null;return e},_canEditEquation:function(a){if(this._cursor.isCursorReadOnly())return!1;a=this.equationUnderCursor(a);if(this._cursor.hasSelection()&&!a)return!1;a=this._cursor.getNode();var c=this._cursor.getOffset();return b.isInTextLevelContainer(a)&&!b.isEdgeOfTextLevelContainer(a,c)||this._isEquationOfType(a,"mathml")&&0<c&&c<a.maxOffset()?
!1:!0},canEditMathMLEquation:function(){return this._canEditEquation("mathml")},canEditLaTeXEquation:function(){return this._canEditEquation("tex")},updateEquationNode:function(a,b){this._internalDocument.changeNodeAttributes(a,{encoding:b.encoding,displayStyle:b.displayStyle,mathmlString:b.mathmlString||"",texString:b.texString||""});"tex"===b.encoding&&this._cursor.setPosition(a,1)},_insertEquation:function(a){var b=this._internalDocument;a=new q(a);b=b.insertAtPosition(a,this._cursor.position);
this._cursor.setPosition(a,1);return b.events},convertRangeToEquation:function(a,b,c,d,e){this._document.deleteText(b,c,d,e);this.updateDocument({texString:a})},deleteEquation:function(b){var c=b.rootContainer(),d=this._cursor.getPosition(),e;e=this._internalDocument.getLineNumber(c);c=this._document.startEdit();this._internalDocument.deleteNodeAndMerge(b);this._cursor.setLineColumn(e+1,d.column);b=[k.create(e,e)];d=[a.create(e,e,d.column)];c.appendUndoEvents(b);c.appendRedoEvents(d);this._document.endEdit();
this._internalDocument.emitDocumentEvents(d);this.onActionsNeedUpdate()},updateDocument:function(a){var b=this._cursor.getNode().rootContainer(),b=this._internalDocument.getLineNumber(b),c=this._document.startEdit();a.currentNode?(this.updateEquationNode(a.currentNode,a),a.currentNode=null,a=[k.create(b,b)]):a=this._insertEquation(a);c.appendRedoEvents(a);c.appendUndoEvents([m.create(b,b+1)]);this._document.endEdit();this._internalDocument.emitDocumentEvents(a)}})})},"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/equations/renderer/model/utils/TeXUtils","MW/rtc/nodes/OpaqueNode","MW/rtc/plugins/equations/tools/EquationUtilities"],function(h,f,g,e,d){return h([e],{constructor:function(c){c=c||{};this._encoding=c.encoding||"tex";this._displayStyle=c.displayStyle;this._mathmlString=c.mathmlString||"";this._texString=c.texString||""},className:"EquationNode",maxOffset:function(){return"mathml"===this.getEncoding()?this._editorBridge?this._editorBridge.maxOffset()+2:d.isEmptyEquationEncoding(this._mathmlString)?
2:4:this.inherited(arguments)},posRightOfEquation:function(){return this.maxOffset()},posRightmostInsideEquation:function(){return this.maxOffset()-1},posLeftOfEquation:function(){return 0},posInsideOfEquation:function(){return this.maxOffset()/2},lineBorderOffset:function(c,b){return this.getPositionFromOffset(b)},getMathRootBox:function(){return this.box&&this.box.children&&this.box.children[0]&&this.box.children[0].children?f.contains(this.box.children[0],"mwEquationEditor")?this.box.children[0]:
this.box.children[0].children[0]:null},getEditor:function(){return this._editor},setEditor:function(c){this._editor=c},setEditorBridge:function(c){this._editorBridge=c},getEditorBridge:function(){return this._editorBridge},updateAttributes:function(c){var b={};c.hasOwnProperty("encoding")&&(b.encoding=this._encoding,this._encoding=c.encoding);c.hasOwnProperty("displayStyle")&&(b.displayStyle=this._displayStyle,this._displayStyle=c.displayStyle);c.hasOwnProperty("mathmlString")&&(b.mathmlString=this._mathmlString,
this._mathmlString=c.mathmlString);c.hasOwnProperty("texString")&&(b.texString=this._texString,this._texString=c.texString);return b},_sanitizeTeXString:function(){return this._texString=g.sanitzeLaTeXString(this._texString)},getTeXString:function(){return this._texString?this._sanitizeTeXString():this._editor&&this._editor.getEquation().toTeX()||""},getMathMLString:function(){return this._mathmlString?this._mathmlString:this._editor&&this._editor.getEquation().toMathML()||""},getEncoding:function(){return this._encoding},
setDisplayStyle:function(c){this._displayStyle=c;this._editor&&this._editor.getEquation().setDisplayStyle(c)},getDisplayStyle:function(){return this._displayStyle},getTop:function(){var c=this.getMathRootBox()||this.box;return c?c.offsetTop:0},getHeight:function(){var c=this.getMathRootBox()||this.box;return c?c.offsetHeight:0},getLeft:function(){var c=this.getMathRootBox()||this.box;return c?c.offsetLeft:0},getWidth:function(){var c=this.getMathRootBox()||this.box;return c?c.offsetWidth:0},getStyleAttributes:function(){return{}},
compareStyleAttributes:function(){return!1},getPlainText:function(c,b){var a=this.text;this._editorBridge&&(a=this._editorBridge.convertToText());return a},_serializeAttributes:function(c){c.text=this.getText();c.encoding=this._encoding;c.mathmlString=this.getMathMLString();c.displayStyle=this._displayStyle;c.texString=this.getTeXString()}})})},"MW/rtc/plugins/equations/tools/EquationUtilities":function(){define(["dojo/i18n!l10n/nls/equationEditor"],function(h){return{emptyEquationEncoding:'\x3cspan class\x3d"MathEquation emptyEquation"\x3e'+
h.emptyEquation+"\x3c/span\x3e",isEmptyEquationEncoding:function(f){return f.match(/<math[^<]+<mrow[^<]+<mi [^<>]+placeholder[^<]+<\/mi><\/mrow><\/math>/)}}})},"MW/rtc/plugins/equations/tools/AutoDisplayStyle":function(){define("dojo/_base/lang dojo/aspect MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode".split(" "),function(h,f,g,e,d,c,b){function a(a){return a.type?
!0:!1}function k(a,b){var c;c=a.children?a.children.some(l):void 0;return c?(b.layoutNode(a.rootContainer()),!0):!1}function l(a){return a instanceof b&&(a.getDisplayStyle()||c.isFreestandingOpaque(a))}return{autoStyle:function(b,c,f,h){var l=h.getNode().textContainer(),s=e.getEventsOfType(b,g.DELETION_EVENT),t=e.getEventsOfType(b,g.INSERT_TEXT),u=t.some(function(a){return a.endLine&&a.endLine>a.startLine});if(b.some(a)){var v=k(l,c),w={};b.forEach(function(a){var b;if(!a.hasOwnProperty("startLine")||
!a.hasOwnProperty("endLine"))return!1;var d=Math.min(a.endLine,f.getMaxLineNumber()-1);for(a=a.startLine;a<=d;a+=1)if(!w[a]){w[a]=!0;var e=f.getLineNode(a);e.childrenAreContainers?e.children.forEach(function(a){b=a.textContainer();v=k(b,c)||v}):(b=e.textContainer(),v=k(b,c)||v)}});if(0<s.length||u)d.isAtStartOfContainer(h.getCursorPosition())&&l.previousSibling()?v=k(l.previousSibling(),c)||v:d.isAtEndOfContainer(h.getCursorPosition())&&l.nextSibling()&&(v=k(l.nextSibling(),c)||v);1<t.length&&(b=
t[0].position.getNode().rootContainer(),t=t[t.length-1].position.getNode().rootContainer(),b&&(t&&b!==t)&&(c.layoutNode(b),c.layoutNode(t)));v&&(h.onUpdate(),c.onLayoutChange())}}}})},"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/equations/equationcontroller/nodes/EquationNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","./EquationNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationCoordinateConverter"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:["rtc.view.viewmodel"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/model/Position","MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode","MW/rtc/view/coordinateconverter/CoordinateConverterUtilities","MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter"],function(h,f,g,e,d){return h(d,{constructor:function(c){this._viewModel=
c},getApplicableNodeClass:function(){return g},getPositionFromCoordinate:function(c,b){var a=this._getClientRects(b)[0];if(!e.isCoordinateWithinRect(c,a))return null;if(b.getEditorBridge())return this._getPositionFromBridge(b,c);var d;"mathml"===b.getEncoding()?(d=c.x<=a.left?b.posLeftOfEquation():c.x>=a.right?b.posRightOfEquation():b.posInsideOfEquation(),b.lastClickCoordinates=e.convertFromClientToOffset(c,this._viewModel)):c.x>=a.left+a.width/2&&(d=1);return new f(b,d)},_getPositionFromBridge:function(c,
b){var a=this.getDomNode(c).getBoundingClientRect();b.x<=a.left?a=0:b.x>=a.right?a=c.maxOffset():(a=c.getEditorBridge().cursorOffsetFromXY(b.x-a.left,b.y-a.top)||0,a+=1);return new f(c,a)},getCoordinateFromPosition:function(c){var b=c.getNode(),a=c.getOffset(),d=b.getEditorBridge();return d&&0<a&&a<b.maxOffset()?d.caretCoordinatesFor(a-1):this.inherited(arguments)},getDomNode:function(c){return c.getMathRootBox()||c.box}})})},"MW/rtc/view/coordinateconverter/CoordinateConverterUtilities":function(){define([],
function(){return{convertFromClientToOffset:function(h,f){var g=this._getDifferenceBetweenOffsetAndClient(f);return{x:h.x-g.x,y:h.y-g.y}},convertFromOffsetToClient:function(h,f){var g=this._getDifferenceBetweenOffsetAndClient(f);return{x:h.x+g.x,y:h.y+g.y}},_getDifferenceBetweenOffsetAndClient:function(h){var f=h.getDomTargetBoundingClientRect();h=h.getDomTargetDomNode();return{x:f.left-h.scrollLeft,y:f.top-h.scrollTop}},getProjectedCoordinate:function(h,f){var g=h.x,e=h.y;this.isCoordinateXWithinRect(h,
f)||(g>f.right?g=f.right:g<f.left&&(g=f.left));this.isCoordinateYWithinRect(h,f)||(e<f.top?e=f.top:e>f.bottom&&(e=f.bottom));return{x:g,y:e}},getOffsetRectFromDomNode:function(h){var f=h.offsetLeft,g=h.offsetTop,e=h.offsetWidth;h=h.offsetHeight;return{left:f,right:f+e,top:g,bottom:g+h,width:e,height:h}},isCoordinateWithinRect:function(h,f){return this.isCoordinateXWithinRect(h,f)&&this.isCoordinateYWithinRect(h,f)},isCoordinateWithinRects:function(h,f){return f.some(function(f){return this.isCoordinateWithinRect(h,
f)},this)},isCoordinateXWithinRect:function(h,f){return h.x>=f.left&&h.x<=f.right},isCoordinateYWithinRect:function(h,f){return h.y>=f.top&&h.y<=f.bottom},isCoordinateAboveOrLeftOfRect:function(h,f){return this.isCoordinateAboveRect(h,f)||this.isCoordinateYWithinRect(h,f)&&this.isCoordinateLeftOfRect(h,f)},isCoordinateBelowOrRightOfRect:function(h,f){return this.isCoordinateBelowRect(h,f)||this.isCoordinateYWithinRect(h,f)&&this.isCoordinateRightOfRect(h,f)},isCoordinateAboveRect:function(h,f){return h.y<
f.top},isCoordinateBelowRect:function(h,f){return h.y>f.bottom},isCoordinateLeftOfRect:function(h,f){return h.x<f.left},isCoordinateRightOfRect:function(h,f){return h.x>f.right},isCoordinateAtRightHalfOfRect:function(h,f){return h.x>f.left+f.width/2},getClosestXDistanceToRect:function(h,f){return Math.min(Math.abs(f.left-h.x),Math.abs(f.right-h.x))},getClosestYDistanceToRect:function(h,f){return Math.min(Math.abs(f.top-h.y),Math.abs(f.bottom-h.y))},getClientRectsArray:function(h){return 0===h.length?
[]:Object.keys(h).map(function(f){return h[f]})},getClientRectsByRange:function(h){var f=[];h.forEach(function(g){g=g.getClientRects();g=this.getClientRectsArray(g);f=f.concat(g)},this);return f}}})},"MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter":function(){define(["dojo/_base/declare","dojo/dom-geometry","MW/rtc/model/Position","../CoordinateConverterUtilities","./BaseCoordinateConverter"],function(h,f,g,e,d){return h(d,{getPositionFromCoordinate:function(c,b){var a=this._getClientRects(b)[0];
if(!e.isCoordinateWithinRect(c,a))return null;var d=0;c.x>=a.left+a.width/2&&(d=1);return new g(b,d)},getCoordinateFromPosition:function(c){var b=c.getNode();c=c.getOffset();var a=this.getDomNode(b),b=a?f.position(a):{x:0,w:0},a=a?e.getOffsetRectFromDomNode(a):{top:0,left:0,width:0,height:0};return{x:c?a.right:a.left,y:a.top,width:a.width,height:a.height,pageX:b.x+(c?b.w:0)}},_getSubClientRects:function(c){return this.getClientRects(c)}})})},"MW/rtc/view/coordinateconverter/base/BaseCoordinateConverter":function(){define(["dojo/_base/declare",
"MW/rtc/model/Position","../CoordinateConverterUtilities","./AbstractCoordinateConverter"],function(h,f,g,e){return h(e,{constructor:function(){},getPositionFromCoordinate:function(d,c){return new f(c,0)},getCoordinateFromPosition:function(d){return null},getDomNode:function(d){return d.box},_getClientRects:function(d){return(d=this.getDomNode(d))?[d.getBoundingClientRect()]:[]},getClosestRect:function(d,c,b){d=this._getSubClientRects(d,b);if(0===d.length)return null;b={x:c.x,y:c.y};var a=this._getVerticalRangeOfRects(d);
c.y<a.top?b.y=a.top:c.y>a.bottom&&(b.y=a.bottom);return this._upwardSearchClosestRect(b,d,a)||this._downwardSearchClosestRect(b,d,a)},_getSubClientRects:function(d,c){var b=d.children.map(c);return Array.prototype.concat.apply([],b)},_upwardSearchClosestRect:function(d,c,b){for(var a=d.y;a>=b.top;a-=1){var e=this._getClosestRect({x:d.x,y:a},c);if(e)return e}return null},_downwardSearchClosestRect:function(d,c,b){for(var a=d.y+1;a<=b.bottom;a+=1){var e=this._getClosestRect({x:d.x,y:a},c);if(e)return e}return null},
_getVerticalRangeOfRects:function(d){var c={},b=Infinity,a=-Infinity;d.forEach(function(d){d.top<b&&(b=c.top=d.top);d.bottom>a&&(a=c.bottom=d.bottom)});return c},_getClosestRect:function(d,c){var b,a=[];c.some(function(c){if(g.isCoordinateWithinRect(d,c))return b=c,!0;g.isCoordinateYWithinRect(d,c)&&a.push(c)});if(b)return b;if(0===a.length)return null;var e=Infinity,f=-Infinity;a.forEach(function(a){a.top<e&&(e=a.top);a.bottom>f&&(f=a.bottom)});var h=c.filter(function(a){if(a.top>=e&&a.top<f||a.bottom>
e&&a.bottom<=f||a.top>=e&&a.bottom<=f||a.top<=e&&a.bottom>=f)return!0}),q=Infinity;h.some(function(a){if(g.isCoordinateXWithinRect(d,a))return b=a,!0;var c=g.getClosestXDistanceToRect(d,a);c<q&&(b=a,q=c)});return b}})})},"MW/rtc/view/coordinateconverter/base/AbstractCoordinateConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractConverter"],function(h,f,g){return h(g,{getPositionFromCoordinate:function(e,d){f.error("Unimplemented: getPositionFromCoordinate")},getCoordinateFromPosition:function(e){f.error("Unimplemented: getCoordinateFromPosition")},
getDelegatedPositionForCoordinate:function(e){},getDomNode:function(e){f.error("Unimplemented: getDomNode")},getClientRects:function(e){var d=this._getClientRects(e);d.forEach(function(c){c.associatedNode=e});return d},_getClientRects:function(e){return[]},getClosestRect:function(e,d,c){f.error("Unimplemented: getClosestRect")}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./EquationLayouter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/equations/equationcontroller/view/EquationLayouter":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/equations/renderer/Renderer MW/rtc/model/NodeUtilities MW/rtc/plugins/equations/tools/EquationUtilities MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter ../nodes/EquationNode".split(" "),
function(h,f,g,e,d,c,b,a){function k(a,b){var c=p;a.parent&&"HeadingNode"===a.parent.className&&(c=1===a.parent.level?s:r);var c=f.mixin({},b,{pxPerEm:c}),d=JSON.stringify(c);v[d]||(v[d]=new e(c));return v[d]}function l(a,b,c,d){c=c.layoutInto(d,"span",{"class":"equationNode"});if(!b)return c;c.renderedEquationPromise=a.render(b,c,{displaystyle:d.getDisplayStyle()});return c}function m(a,b,c){b=b.layoutInto(c,"span",{"class":"equationNode"});var d=p;c.parent&&"HeadingNode"===c.parent.className&&(d=
1===c.parent.level?s:r);a.set("pxPerEm",d);g.empty(b);a.placeAt(b);window.setTimeout(function(){a.get("disabled")||a.focus()},0);return b}function q(a,b){b.setDisplayStyle(d.isFreestandingOpaque(b));var c=k(b,t),e=c.setDisplaystyleIfNeeded(b.getTeXString(),!0);b.getDisplayStyle()&&(b.textContainer().tempAlign=!0);c=l(c,e,a,b);c.setAttribute("data-test-source","tex");return c}function n(a,b){b.setDisplayStyle(d.isFreestandingOpaque(b));b.getDisplayStyle()&&(b.textContainer().tempAlign=!0);var e=b.getEditor();
if(e)return m(e,a,b);e=b.getMathMLString();if(c.isEmptyEquationEncoding(e))return e=a.layoutInto(b,"span",{"class":"equationNode"}),e.innerHTML=c.emptyEquationEncoding,e;var f=k(b,u);return l(f,e,a,b)}var p=14,r=20,s=26,t={cacheFontMetrics:!1,equationFormat:"tex"},u={cacheFontMetrics:!1,equationFormat:"mathml"},v={};return h(b,{constructor:function(){},getApplicableNodeClass:function(){return a},layout:function(a,b){return("tex"===b.getEncoding()?q:n)(a,b)}})})},"MW/rtc/plugins/equations/equationeditor/EquationEditorProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./EquationEditor","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{requires:function(){return{createInstance:"rtc.focusservice rtc.cursor rtc.actionservice rtc.hyperlinkservice rtc.richtext.equationcontroller rtc.internaldocument rtc.eventhandler rtc.keyhandler rtc.clipboard rtc.contextmenu.generator rtc.document rtc.clipboardtempdirpath rtc.divcaret rtc.undoredo.editblock rtc.view rtc.scrollpane".split(" ")}},createInstance:function(d,c,b,a,e,f,h,q,n,p,r,s,
t,u,v,w){var x={};x.focusService=d;x.cursor=c;x.actionService=b;x.hyperlinkService=a;x.equationController=e;x.internalDocument=f;x.eventHandler=h;x.keyHandler=q;x.clipboard=n;x.contextMenuGenerator=p;x.document=r;x.clipboardTempDirpath=s;x.divCaret=t;x.editBlockController=u;x.view=v;x.scrollpane=w;return new g(x)}})})},"MW/rtc/plugins/equations/equationeditor/EquationEditor":function(){define("dijit/focus dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class MW/equations/editor/utils/ActionDataServiceProxy MW/equations/EquationEditor MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/NodeUtilities MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode MW/rtc/plugins/equations/equationeditor/EquationEditorBridge MW/rtc/plugins/equations/tools/EquationUtilities MW/rtc/RichTextComponentFeatureEnum".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){return f(null,{constructor:function(a){a=a||{};this._focusService=a.focusService;this._cursor=a.cursor;this._actionService=a.actionService;this._hyperlinkService=a.hyperlinkService;this._equationController=a.equationController;this._internalDocument=a.internalDocument;this._eventHandler=a.eventHandler;this._keyHandler=a.keyHandler;this._clipboard=a.clipboard;this._contextMenuGenerator=a.contextMenuGenerator;this._document=a.document;this._clipboardTempDirpath=
a.clipboardTempDirpath;this._divCaret=a.divCaret;this._editBlockController=a.editBlockController;this._view=a.view;this._scrollpane=a.scrollpane;this._handles=[];this._handles.push(e.around(a.document,"deleteTextAtCurrentPosition",g.hitch(this,"_handleDelete")));this._actionService.addAction({id:r.EQUATIONS.WYSIWYG_EDITOR_ACTION,enabled:!0,key:"ctrl_shift_e",platformKey:{mac:"meta_shift_e"},callback:g.hitch(this,"_insertEquation")});this._connections=[];this._connections.push(e.after(this._cursor,
"onChange",g.hitch(this,this._handleCursorChanges)));this._connections.push(e.after(this._equationController,"onActionsNeedUpdate",g.hitch(this,this._handleCursorChanges)))},_handleDelete:function(b){return g.hitch(this,function(c){var d=this._equationController.equationUnderCursor("mathml",c);if(this._cursor.hasSelection()||!d)return b.apply(this._document,arguments);var e=this._cursor.getPosition(),f=this._cursor.getNode();if(c===a.BACKWARD_DELETE&&f===d&&e.posInNode===d.maxOffset())this._cursor.movePosition(this._cursor.LEFT);
else if(c===a.FORWARD_DELETE&&(f===d.previousSibling()||f instanceof q&&0===e.posInNode))this._cursor.movePosition(this._cursor.RIGHT);else return b.apply(this._document,arguments)})},_handleCursorChanges:function(){this._cursor.hasSelection()&&this._expandSelectionOverEquations();var a=this._equationController.equationUnderCursor("mathml");this._actionService.updateAction(r.EQUATIONS.WYSIWYG_EDITOR_ACTION,{enabled:this._equationController.canEditMathMLEquation()});a?this._handleCursorInsideEquation(a):
this._handleCursorOutsideEquation()},_expandSelectionOverEquations:function(){var a=this._cursor.position,b=this._cursor.anchor,c=!1,d=!1,e=this._cursor.isReversed(),f=a.node;f.isInstanceOf(q)&&(0<a.offset&&a.offset<f.maxOffset())&&(c=!0);b.node&&(b.node.isInstanceOf(q)&&0<b.offset&&b.offset<b.node.maxOffset())&&(d=!0);if(!b||!(b.node===a.node&&c&&d)){if(c){if(!1===e&&a.offset===f.maxOffset()-1){this._cursor.setPosition(f,0);return}if(!0===e&&1===a.offset){this._cursor.setPosition(f,f.maxOffset());
return}this._cursor.setPosition(f,e?0:f.maxOffset())}d&&(this._cursor.anchor.offset=e?b.node.maxOffset():0,this._cursor.onUpdate())}},_handleCursorInsideEquation:function(a){var b=this._cursor.getPosition(),c=a.getEditor();if(!c){var d=a.posRightOfEquation(),e=a.posRightmostInsideEquation(),f=a.posInsideOfEquation(),c=this._createEditorInstance(a);b.posInNode===d?(d=a.endPosition(),b.posInNode=d.offset,this._cursor.releaseAnchor(),this._cursor.setPosition(a,b.posInNode)):b.posInNode===e?(d=a.getPositionFromOffset(a.posRightmostInsideEquation()),
b.posInNode=d.offset,this._cursor.releaseAnchor(),this._cursor.setPosition(a,b.posInNode)):b.posInNode===f&&a.lastClickCoordinates&&(d=this._view.getPositionFromCoordinate(a.lastClickCoordinates),b.posInNode=d.offset,this._cursor.releaseAnchor(),this._cursor.setPosition(a,b.posInNode),a.lastClickCoordinates=null)}0===b.posInNode||b.posInNode===a.maxOffset()||this._cursor.getNode()!==a?this._handleCursorOutsideEquation():(this._equationEditorActive!==c&&this._enableEditor(c),a.getEditorBridge().setCursor(b.posInNode-
1,b.anchor&&b.anchor.posInNode?b.anchor.posInNode-1:void 0))},_handleCursorOutsideEquation:function(){this._equationEditorActive&&this._disableActiveEditor()},_enableEditor:function(a){this._equationEditorActive&&this._disableActiveEditor();this._equationEditorActive=a;this._triggerFocus(a);this._focusThief=e.after(this._keyHandler,"onFocus",g.hitch(this,"_triggerFocus",a));this._cursor.resetAction();this._cursor.releaseAnchor();this._cursor.externalMouseDown()},_triggerFocus:function(a){this._focusTriggered!==
a&&(this._focusTriggered=a,setTimeout(g.hitch(this,function(){if(this._equationEditorActive===a){var b=a.get("disabled");a.set("disabled",!1);(b||this._isRTC(h.curNode))&&a.focus()}this._focusTriggered=!1}),0))},_isRTC:function(a){for(;a&&a.parentNode;){if(d.contains(a,"mwRichTextComponent"))return!0;a=a.parentNode}},_disableActiveEditor:function(){this._equationEditorActive.set("disabled",!0);this._equationEditorActive=null;this._focusThief.remove();this._focusService.setFocus()},_createEditorInstance:function(a){var d=
new c(this._actionService);d.filterProperties(["contextMenuGroup"]);d.detach();d.addAction({id:"rtc.equationeditor-active",enabled:!0});d=new b({enable:["equationeditor.rtc-bridge"],disable:["action.undoredo","view.movekeycaptureonfocus"],inject:{"external.actionservice":d,"external.clipboard":this._clipboard,"external.clipboardtempdirpath":this._clipboardTempDirpath,"external.contextmenugenerator":this._contextMenuGenerator,"controller.undoredo":{canUndo:function(){return!1},undo:function(){},redo:function(){},
canRedo:function(){return!1}},"rtc.divcaret":this._divCaret,"rtc.keyhandler":this._keyHandler,"rtc.cursor":this._cursor,"rtc.document":this._document,"rtc.equationnode":a,"rtc.undoredo.editblock":this._editBlockController,"rtc.updatenode":g.hitch(this,function(){var b=this._document.startEdit();this._internalDocument.changeNodeAttributes(a,{mathmlString:"",texString:""});var c=a.rootContainer(),c=this._internalDocument.getLineNumber(c),c=[l.create(c,c)];b.appendRedoEvents(c);b.appendUndoEvents(c);
this._document.endEdit();this._internalDocument.emitDocumentEvents(c)}),"rtc.deletenode":g.hitch(this,function(){this._equationController.deleteEquation(a)}),"rtc.scrollpane":this._scrollpane},registry:[n]});d.getEquation().fromMathML(a.getMathMLString());d.getCursor().hide();d.set("disabled",!0);d.set("cacheFontMetrics",!1);d.set("pxPerEm",14);d.set("emptyEquation",p.emptyEquationEncoding);d.getEquation().setDisplayStyle(a.getDisplayStyle());a.setEditor(d);this._view.layoutNode(a);return d},_insertEquation:function(){if(this._equationController.canEditMathMLEquation()){var a=
this._equationController.equationUnderCursor("mathml");if(a){var b=this._cursor.position;if(b.node===a&&0<b.offset&&b.offset<a.maxOffset())return}this._equationController.updateDocument({encoding:"mathml",mathmlString:'\x3cmath\x3e\x3cmrow\x3e\x3cmi data-category\x3d"placeholder-atom"\x3e\x26nbsp;\x3c/mi\x3e\x3c/mrow\x3e\x3c/math\x3e'})}},dispose:function(){this._connections.forEach(function(a){a.remove()})}})})},"MW/equations/editor/utils/ActionDataServiceProxy":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g,e){return f(null,{constructor:function(d){this._actionService=d;this._localActions={};this._attached=!0;this._handles=[];this._handles.push(e.after(this._actionService,"onActionChange",g.hitch(this,"_handleActionChange"),!0));this._previousActions={};this._filterProperties=[]},filterProperties:function(d){this._filterProperties=d},_handleActionChange:function(d){this._attached&&this._localActions[d.id]&&this._localActions[d.id][d.key]!==
d.newValue&&(this._localActions[d.id][d.key]=d.newValue,this.onRemoteActionChange(d))},onRemoteActionChange:function(d){},addAction:function(d){this._localActions[d.id]=d;this._attached&&this._actionService.addAction(this._filter(d))},_filter:function(d){var c=g.mixin({},d);this._filterProperties.forEach(function(b){delete c[b]});return c},executeAction:function(d,c){if(this._attached)return this._actionService.executeAction(d,c)},getAction:function(d){return this._localActions[d]?this._localActions[d]:
this._actionService.getAction(d)},updateAction:function(d,c){this._localActions[d]=g.mixin(this._localActions[d],c);this._attached&&this._actionService.updateAction(d,this._filter(c))},getAllActions:function(){return h.map(Object.keys(this._localActions),g.hitch(this,"getAction"))},loadActions:function(d){d.forEach(this.addAction,this)},attach:function(){this._attached||(this._attached=!0,Object.keys(this._localActions).forEach(function(d){var c=this._actionService.getAction(d);c?(this._previousActions[d]=
g.mixin({},c),this._actionService.updateAction(d,this._filter(this._localActions[d]))):this._actionService.addAction(this._filter(this._localActions[d]))},this))},detach:function(){this._attached&&(this._attached=!1,Object.keys(this._localActions).forEach(function(d){this._previousActions[d]?(this._actionService.updateAction(d,this._previousActions[d]),delete this._previousActions[d]):this._actionService.removeAction(d)},this))},destroy:function(){this._attached&&this.detach();this._handles.forEach(function(d){d.remove()});
this._handles=[]}})})},"MW/equations/EquationEditor":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct mw-actiondataservice/ActionDataService MW/equations/editor/PluginRegistry MW/equations/utils/PluginService MW/rtc/clipboardservice/ClipboardService MW/rtc/plugins/contextmenu/DojoContextMenuGenerator".split(" "),function(h,f,g,e,d,c,b,a,k){return f(null,{constructor:function(e){e=e||{};var f=g.mixin({"external.clipboardtempdirpath":void 0},e.inject);f["external.actionservice"]=
f["external.actionservice"]?f["external.actionservice"]:new d;f["external.contextmenugenerator"]=f["external.contextmenugenerator"]||new k;f["external.clipboard"]=f["external.clipboard"]||a.getInternalClipboard();var q=c;e.registry&&(q=q.concat(e.registry));var n="api actions action.cursor action.delete action.undoredo controller.editmanager controller.caret controller.focus controller.contextmenu controller.mouse copypaste model.equation view.highlightactiverow view.movekeycaptureonfocus view.renderer view.keyhandler view.rootnode".split(" ");
e.enable&&(n=n.concat(e.enable));e.disable&&(n=h.filter(n,function(a){return 0>e.disable.indexOf(a)}));this._pluginService=new b({registry:q,inject:f,enable:n,disable:e.disable})},placeAt:function(a,b){var c=this._pluginService.get("view.rootnode");e.place(c,a,b);this._pluginService.get("view.renderer").redraw()},focus:function(){this._pluginService.get("controller.focus").focus()},get:function(a){return this._pluginService.get("api.attributes").get(a)},getEquation:function(){return this._pluginService.get("api.equation")},
getCursor:function(){return this._pluginService.get("api.cursor")},set:function(a,b){return this._pluginService.get("api.attributes").set(a,b)},destroy:function(){this._pluginService.destroy()}})})},"MW/equations/editor/PluginRegistry":function(){define("MW/equations/editor/actions/CaretAction MW/equations/editor/actions/CursorAction MW/equations/editor/actions/CutCopyPasteAction MW/equations/editor/actions/DeleteAction MW/equations/editor/actions/DragAndDropAction MW/equations/editor/actions/InsertTemplateAction MW/equations/editor/actions/InsertTextAction MW/equations/editor/actions/LaTeXCommandsAction MW/equations/editor/actions/LaTeXCompletionAction MW/equations/editor/actions/LineBreakAction MW/equations/editor/actions/MathMLFormattingAction MW/equations/editor/actions/MatrixAction MW/equations/editor/actions/MouseAction MW/equations/editor/actions/SmartEditingAction MW/equations/editor/actions/SmartParensAction MW/equations/editor/actions/SmartSymbolsAction MW/equations/editor/actions/TabAction MW/equations/editor/actions/TabLeavesStructureAction MW/equations/editor/actions/TextFormattingAction MW/equations/editor/actions/UndoRedoAction MW/equations/editor/actions/VisualCursorAction MW/equations/editor/api/AttributesAPI MW/equations/editor/api/CursorAPI MW/equations/editor/api/EquationAPI MW/equations/editor/controller/CaretController MW/equations/editor/controller/ContextMenuController MW/equations/editor/controller/CursorController MW/equations/editor/controller/EditManager MW/equations/editor/controller/FocusController MW/equations/editor/controller/KeyHandlerController MW/equations/editor/controller/LiveCursorController MW/equations/editor/controller/MouseController MW/equations/editor/controller/PlaceholderAtomController MW/equations/editor/controller/SelectionController MW/equations/editor/controller/UndoRedoController MW/equations/editor/helper/BackspaceToUndoHelper MW/equations/editor/helper/DeleteHelper MW/equations/editor/helper/ExportHTMLImage MW/equations/editor/helper/ExportMathML MW/equations/editor/helper/ExportPlainText MW/equations/editor/helper/ImportHelper MW/equations/editor/helper/InsertHelper MW/equations/editor/helper/InsertTemplateHelper MW/equations/editor/helper/MimeTypeHelper MW/equations/editor/helper/PlainTextGenerator MW/equations/editor/model/Cursor MW/equations/editor/model/Equation MW/equations/editor/view/Caret MW/equations/editor/view/Helper MW/equations/editor/view/HighlightActiveRow MW/equations/editor/view/KeyHandler MW/equations/editor/view/MoveKeyCaptureOnFocus MW/equations/editor/view/RootNode MW/equations/editor/view/Renderer MW/equations/editor/view/Selection".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I,E,K,Y,Z,S,V,ha,U,ea,W,aa,ba,$,ka,da,fa,qa,T,la,ua,X,va){return Array.prototype.slice.call(arguments)})},"MW/equations/editor/actions/CaretAction":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/DirectedSearch","MW/equations/editor/utils/NodeUtils"],function(h,f,g,e,d){return h(null,{pluginId:"action.caret",pluginFamily:"actions",pluginDependencies:"controller.caret controller.cursor external.actionservice model.equation view.caret view.helper".split(" "),
constructor:function(c,b,a,d,e,g){this._caretController=c;this._cursorController=b;this._equation=d;this._caret=e;this._viewHelper=g;c=[{id:"equationeditor.up",enabled:!0,key:"up",callback:f.hitch(this,"_handleUp",!1)},{id:"equationeditor.selectup",enabled:!0,key:"shift_up",callback:f.hitch(this,"_handleUp",!0)},{id:"equationeditor.down",enabled:!0,key:"down",callback:f.hitch(this,"_handleDown",!1)},{id:"equationeditor.selectdown",enabled:!0,key:"shift_down",callback:f.hitch(this,"_handleDown",!0)}];
a.loadActions(c)},_handleUp:function(c){var b=this._caret.getGeometry(),a=this._cursorController.getPosition(),h=this._equation.getById(a.id);if(h=d.findStructure(h)){var l=this["_handleUp"+h.structure.className];if(l&&(h=l.call(this,h.structure,h.path)))return this._cursorController.setPosition(h,c),!0}(h=e.search(1,Math.floor(b.y),f.hitch(this,function(c){return(c=this._caretController.getPositionFromXY(b.x,b.y-c))&&!g.positionsEqual(c,a)&&c})))&&this._cursorController.setPosition(h.value,c);return!!h},
_handleUpMathScript:function(c,b){if(c.children[2]){var a=d.categorizeNode(c.children[2]);if(0===b[0]&&a===d.CATEGORY.PLACEHOLDER_ROW)return{id:c.children[2].id,offset:0}}},_handleUpMathFraction:function(c,b){if(1===b[0]&&d.categorizeNode(c.children[0])===d.CATEGORY.PLACEHOLDER_ROW){var a=this._caret.getGeometry(),e=this._viewHelper.getNodeGeometry(c.children[1]);if(a.x>e.relativeX+e.w-4)return{id:c.children[0].id,offset:c.children[0].children.length};if(a.x<e.relativeX+4)return{id:c.children[0].id,
offset:0}}},_handleDown:function(c){var b=this._caret.getGeometry(),a=this._cursorController.getPosition(),h=this._equation.getById(a.id);if(h=d.findStructure(h)){var l=this["_handleDown"+h.structure.className];if(l&&(h=l.call(this,h.structure,h.path)))return this._cursorController.setPosition(h,c),!0}(h=e.search(Math.ceil(b.y+b.h+1),this._viewHelper.getRootGeometry().h,f.hitch(this,function(c){return(c=this._caretController.getPositionFromXY(b.x,c))&&!g.positionsEqual(c,a)&&c})))&&this._cursorController.setPosition(h.value,
c);return!!h},_handleDownMathFraction:function(c,b){if(0===b[0]&&d.categorizeNode(c.children[1])===d.CATEGORY.PLACEHOLDER_ROW){var a=this._caret.getGeometry(),e=this._viewHelper.getNodeGeometry(c.children[0]);if(a.x>e.relativeX+e.w-4)return{id:c.children[1].id,offset:c.children[1].children.length};if(a.x<e.relativeX+4)return{id:c.children[1].id,offset:0}}},_handleDownMathScript:function(c,b){var a=d.categorizeNode(c.children[0]);if(2===b[0]&&a===d.CATEGORY.PLACEHOLDER_ROW){var a=this._caret.getGeometry(),
e=this._viewHelper.getNodeGeometry(c.children[2]);if(a.x<e.relativeX+e.w/2)return{id:c.children[0].id,offset:-1};a=this._equation.getParentAndIndex(c);return{id:a.parent.id,offset:a.index+1}}}})})},"MW/equations/editor/utils/CursorUtils":function(){define(["MW/equations/editor/utils/CursorPositionVisitor","MW/equations/editor/utils/NodeUtils"],function(h,f){function g(b,a){return"MathText"===b.className&&f.categorizeNode(a)===f.CATEGORY.ATOM&&(c[a.kind]||0)>(c[b.kind]||0)?!1:!0}function e(b){return"placeholder-atom"===
b["data-category"]?0:b.children?b.children.length:"MathText"===b.className?b.text.length:1}var d=new h,c={symbol:-1,mtext:-2};return{adaptPositionToAtoms:function(b,a,c){if(a){var d=f.categorizeNode(a);"atom"===d?(b.id=a.id,b.offset=a.text.length):"placeholder-atom"===d?(b.id=a.id,b.offset=0):a=null}c&&(d=f.categorizeNode(c),"atom"===d&&(!a||!g(a,c))?(b.id=c.id,b.offset=0):"placeholder-atom"===d&&(b.id=c.id,b.offset=0));return b},availableCursorPosition:function(b){d.visit(b);return d.visitedCounter()},
positionsEqual:function(b,a){return b.id===a.id&&b.offset===a.offset},logicalFromPosition:function(b,a){return d.visit(a,{atom:function(a){if(b.id===a.id)return d.visitedCounter()+b.offset},row:function(a,c){if(b.id===a.id&&c===b.offset)return d.visitedCounter()}})},nodeLength:e,positionFromLogical:function(b,a){return d.visit(a,{atom:function(a){var c=b-d.visitedCounter();if(c<e(a))return{id:a.id,offset:c};if(c===e(a)){var f=d.getNextSibling();if("placeholder"!==d.parentCategory()||!f||g(a,f))return{id:a.id,
offset:c}}},placeholder:function(a,c){if(b===d.visitedCounter())return{id:a.id,offset:c}}})},shouldCursorMergeToLeft:g}})},"MW/equations/editor/utils/CursorPositionVisitor":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/NodeUtils"],function(h,f,g){return h(null,{constructur:function(){},visit:function(e,d){this._callbacks=f.mixin({atom:function(){},placeholder:function(){},row:function(){}},d);this._visitedCounter=0;return this._recurseTree(e)},visitedCounter:function(){return this._visitedCounter},
parentCategory:function(){return this._parentCategory},getNextSibling:function(){return this._currentParent.children[this._currentParentIndex+1]},_recurseTree:function(e){var d,c,b=g.categorizeNode(e);for(c=0;e.children&&c<e.children.length;c+=1){this._currentParent=e;this._currentParentIndex=c;this._parentCategory=b;var a=e.children[c];if(null!==a){if("placeholder"===this._parentCategory&&(d=this._callbacks.row(e,c),void 0===d&&this._placeHolderCanContainCursorAt(e,c)&&(d=this._callbacks.placeholder(e,
c),this._visitedCounter+=1),void 0!==d))return d;var f=g.categorizeNode(a);if("atom"===f){d=this._callbacks.atom(a);if(void 0!==d)return d;this._visitedCounter+=this._atomLength(a);this._visitedCounter+=1;c<e.children.length-1&&(a=this.getNextSibling(),"atom"===g.categorizeNode(a)&&(this._visitedCounter-=1))}else if("placeholder-atom"===f){d=this._callbacks.atom(a);if(void 0!==d)return d;this._visitedCounter+=1}else if("static"!==f&&(d=this._recurseTree(a),void 0!==d))return d}}if("placeholder"===
b){d=this._callbacks.row(e,e.children.length);if(void 0!==d)return d;0===e.children.length?(d=this._callbacks.placeholder(e,0),this._visitedCounter+=1):this._placeHolderCanContainCursorAt(e,e.children.length)&&(d=this._callbacks.placeholder(e,e.children.length),this._visitedCounter+=1)}return d},_atomLength:function(e){return"symbol"===e.kind?1:e.text.length},_placeHolderCanContainCursorAt:function(e,d){var c;if(d===e.children.length)return c=e.children[d-1],c=g.categorizeNode(c),"structure"===c;
c=e.children[d];c=g.categorizeNode(c);return"structure"!==c?!1:0===d?!0:"structure"===g.categorizeNode(e.children[d-1])}})})},"MW/equations/editor/utils/NodeUtils":function(){define("dojo/_base/array dojo/_base/lang MW/equations/editor/utils/MathVariant MW/equations/renderer/model/Symbols MW/equations/renderer/model/utils/NodeFactory mw-utils/Utils".split(" "),function(h,f,g,e,d,c){function b(a){if(a["data-category"])return a["data-category"];switch(a.className){case "MathRoot":return"structure-part";
case "MathAction":case "MathStyle":return"shallow";case "MathRow":return u.PLACEHOLDER_ROW;case "MathText":return u.ATOM}return"structure"}function a(a,b){a["data-category"]=b[0];for(var c=0;c<a.children.length&&c<b.length-1;c+=1)a.children[c]&&(a.children[c]["data-category"]=b[c+1])}function k(a,b,c,d){"undefined"!==typeof c?(b.children=a.children.slice(c,d),a.children.splice(c,d-c)):(b.children=a.children,a.children=[]);b.children.forEach(function(a){a&&(a.parent=b)})}function l(a,b){return h.every(Object.keys(b),
function(c){var d=b[c];return f.isArray(d)?d.length!==a[c].length?!1:h.every(d,function(b,c){var d=a.children[c];return!b?!d:l(d,b)}):d===a[c]})}function m(a,b){"MathText"===a.className&&(0<=r.indexOf(a.kind)&&!a.mathvariant&&""!==b)&&(a.mathvariant=b);if(!a.children)return a;for(var c=0;c<a.children.length;c+=1)if(a.children[c])if("MathStyle"===a.children[c].className){var d=g.add(b,a.children[c].mathvariant);a.children[c].children.forEach(function(b){b&&(b.parent=a,m(b,d))});var e=a.children[c].children.length;
a.children.splice.apply(a.children,[c,1].concat(a.children[c].children));c+=e-1}else a.children[c]=m(a.children[c],b);return a}function q(a){for(var b=0;b<H.length;){var c=(0,H[b])(a);c?(a=c,b=0):b+=1}return a}function n(a){if(!a)return a;a["data-category"]?"placeholder-atom"===a["data-category"]&&"placeholder"!==a.kind&&(a.kind="placeholder"):h.some(v,function(e){if(e=e(a)){if(e["data-category"]===u.STRUCTURE){var f=e,g=e.parent;if(!g||b(g)!==u.PLACEHOLDER_ROW){f=d.createNode("MathRow",{id:c.generateUuid()});
if(g){var h=f,k=g.children.indexOf(e);-1!==k&&(g.children[k]=h,h.parent=g)}f.children=[e];e.parent=f;f["data-category"]=u.PLACEHOLDER_ROW}e=f}a=e;return!0}return!1});a.children&&(a.children=h.map(a.children,n));return a=q(a)}function p(a){return"MathMatrix"===a.className&&a["data-category"]===u.STRUCTURE_PART}var r=["text","number","id"],s=["prod","contourintop","fpartintop","sum","intop"],t={SYMBOL:"symbol",DELIMITER:"delimiter",NUMBER:"number",IDENTIFIER:"id",TEXT:"mtext",WHITESPACE:"whitespace"},
u={ATOM:"atom",PLACEHOLDER_ATOM:"placeholder-atom",PLACEHOLDER_ROW:"placeholder",SHALLOW:"shallow",STATIC:"static",STRUCTURE:"structure",STRUCTURE_PART:"structure-part"},v=[],w={className:"MathScript"};v.push(function(b){if(l(b,w)){var c=!0===b.accent;"auto"===b.accent&&b.children[2]&&(c=null!==b.children[2].getAccent());if(c)return a(b,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.STATIC,u.STATIC]),b}});var x={className:"MathRow",children:[{className:"MathDelimiter"},{},{className:"MathDelimiter"}]};v.push(function(b){if(l(b,
x)){var c=b.children[1];if("MathRow"===c.className&&1===c.children.length){c=c.children[0];if("MathMatrix"!==c.className)return;b.children.splice(1,1,c);c.parent=b}else if("MathMatrix"!==c.className)return;a(b,[u.STRUCTURE,u.STATIC,u.STRUCTURE_PART,u.STATIC]);return b}});v.push(function(a){if(!("MathRow"!==a.className||!a.children||3>a.children.length)){var b=a.children[0],e=a.children[a.children.length-1];if(!("MathDelimiter"!==b.className||"MathDelimiter"!==e.className))return a["data-category"]=
u.STRUCTURE,b["data-category"]=u.STATIC,e["data-category"]=u.STATIC,3<a.children.length||"MathRow"!==a.children[1].className?(b=d.createNode("MathRow",{id:c.generateUuid(),"data-category":u.PLACEHOLDER_ROW}),k(a,b,1,a.children.length-1),b.parent=a,a.children.splice(1,0,b)):(b=a.children[1],b["data-category"]=u.PLACEHOLDER_ROW),a}});v.push(function(b){if("MathRadical"===b.className&&b.children&&2===b.children.length)return a(b,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.PLACEHOLDER_ROW]),b.children[1]&&("MathRow"===
b.children[1].className&&b.children[1].children&&0===b.children[1].children.length)&&(b.children[1]["data-category"]=u.STATIC),b});v.push(function(b){if("MathAction"===b.className&&b.children&&2===b.children.length)return a(b,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.STATIC]),b});v.push(function(b){if("MathScript"===b.className&&b.children&&3===b.children.length&&b.children[1]&&b.children[1].children&&1===b.children[1].children.length&&"MathDelimiter"===b.children[1].children[0].className&&b.children[1].children[0].getAccent())return a(b,
[u.STRUCTURE,u.STRUCTURE_PART,u.STATIC]),b});var B={className:"MathRow",children:[{className:"MathScript",children:[{className:"MathRow",children:[{className:"MathText",kind:"symbol"}]},{},{}]},{className:"MathRow"}]},A={className:"MathScript",children:[{className:"MathRow",children:[{className:"MathText",kind:"symbol"}]},{},{}]};v.push(function(b){var c;if(l(b,B))c=b.children[0];else if(l(b,A))c=b;else return!1;var d;d=c.children[0];d="MathRow"===d.className&&d.children&&1===d.children.length?e.isLargeOpSymbol(d.children[0]):
d&&"MathText"===d.className&&"symbol"===d.kind&&0<=s.indexOf(d.symbolName);if(!d)return!1;a(c,[u.STRUCTURE_PART,u.STATIC,u.PLACEHOLDER_ROW,u.PLACEHOLDER_ROW]);b!==c?a(b,[u.STRUCTURE,u.STRUCTURE_PART,u.PLACEHOLDER_ROW]):a(b,[u.STRUCTURE]);return b});v.push(function(a){if(a.children&&("MathFraction"===a.className||"MathMultiScript"===a.className||"MathScript"===a.className)){a["data-category"]=u.STRUCTURE;var c;for(c=0;c<a.children.length;c+=1)a.children[c]&&b(a.children[c])===u.PLACEHOLDER_ROW&&(a.children[c]["data-category"]=
u.PLACEHOLDER_ROW);return a}});var D={className:"MathRow",children:[{className:"MathRow"},{},{className:"MathRow"}]};v.push(function(b){if(l(b,D)){var c=b.children[1],c=c&&"MathRow"===c.className&&1===c.children.length?c.children[0]:c;if("MathText"===c.className&&"symbol"===c.kind&&"slash"===c.symbolName)return a(b,[u.STRUCTURE,u.PLACEHOLDER_ROW,u.STATIC,u.PLACEHOLDER_ROW]),b}});var F=["contourintop","fpartintop","intop"];v.push(function(c){if(!c.parent||b(c.parent)!==u.PLACEHOLDER_ROW)return!1;if("MathRow"===
c.className&&c.children&&2===c.children.length){var d=c.children[0],d=d&&"MathRow"===d.className&&1===d.children.length?d.children[0]:d;if("MathText"===d.className&&"symbol"===d.kind&&0<=F.indexOf(d.symbolName))return a(c,[u.STRUCTURE,u.STATIC,u.PLACEHOLDER_ROW]),c}});var H=[];H.push(function(a){if(b(a)===u.PLACEHOLDER_ROW)for(var c=0;c<a.children.length;c+=1)if(a.children[c]&&b(a.children[c])===u.PLACEHOLDER_ROW)return a.children[c].children.forEach(function(b){b&&(b.parent=a)}),a.children.splice.apply(a.children,
[c,1].concat(a.children[c].children)),a});H.push(function(a){if(!("MathScript"!==a.className||!a.children||3!==a.children.length))if((!a.children[1]||"MathRow"===a.children[1].className&&0===a.children[1].children.length)&&(!a.children[2]||"MathRow"===a.children[2].className&&0===a.children[2].children.length))return a.children[0]});var L=["id","code","number"];return{CATEGORY:u,TEXT_KIND:t,isMatrix:p,categorizeNode:b,findStructure:function(a){for(var c=[],d,e;a;){if(b(a)===u.STRUCTURE)return{structure:a,
path:c};d=a.parent;if(!d)break;e=d.children.indexOf(a);a=d;c.unshift(e)}},qualifiesAsIdentifier:function(a){return a&&a.isIdentifier()},qualifiesAsOperator:function(a){return e.isOperator(a.symbolName)||e.isOperator(a.text)},isMultiLineEquation:function(a){a=a.children[0];return 1!==a.children.length?!1:"MathMatrix"===a.children[0].className},kindOfText:function(a){return a.match(/^\s+$/)?t.WHITESPACE:0<="~!+*\x3c\x3d\x3e/-,".indexOf(a)?t.SYMBOL:0<="[](){}".indexOf(a)?t.DELIMITER:e.unicodeMap[a]?
t.SYMBOL:a.match(/^[0-9]+$/)?t.NUMBER:t.IDENTIFIER},categorizeTree:function(a){a=m(a,"");a=n(a);if(!("MathRoot"!==a.className||!a.children||1!==a.children.length)){var b=a.children[0];if(!("MathRow"!==b.className||!b.children||1!==b.children.length)&&"MathMatrix"===b.children[0].className)b["data-category"]=u.STRUCTURE_PART}"MathRoot"!==a.className||(!a.children||1!==a.children.length)||(b=a.children[0],"MathRow"===b.className&&b.children&&!b["data-category"]&&(b["data-category"]=u.PLACEHOLDER_ROW));
return a},isNonEmptyRow:function(a){return a&&"MathRow"===a.className&&a.children&&0<a.children.length},isMatrixWithDelimiters:function(a,b){if(!p(a))return!1;var c=a.parent;if(c&&c.children&&3===c.children.length){var d=c.children[0],c=c.children[2];if(e.isOpeningDelimiter(d.symbolName)&&d.symbolName===b+"left"&&e.isClosingDelimiter(c.symbolName)&&c.symbolName===b+"right")return!0}return!1},matchTemplate:l,isEmptyEquation:function(a){return"MathRoot"!==a.className||1!==a.children.length||1!==a.children[0].children.length||
b(a.children[0].children[0])!==u.PLACEHOLDER_ATOM?!1:!0},mergeIfCompatible:function(a,c,d){"atom"!==b(c)||"atom"!==b(d)||0>L.indexOf(c.kind)||0>L.indexOf(d.kind)||c.kind!==d.kind&&"number"===c.kind||a.mergeNodes(c.id,d.id)}}})},"MW/equations/editor/utils/MathVariant":function(){define([],function(){function h(f,e){var d=f.indexOf(e);0<=d&&f.splice(d,1);return f}function f(f){if(!f)return[];f=f.split("-");return h(f,"normal")}return{add:function(g,e){var d=f(g);0>d.indexOf(e)&&d.push(e);return 0===
d.length?"normal":d.sort().join("-")},remove:function(g,e){var d=f(g),d=h(d,e);return 0===d.length?"normal":d.sort().join("-")}}})},"MW/equations/editor/utils/DirectedSearch":function(){define([],function(){return{search:function(h,f,g){if(h>f){var e=this.search(-h,-f,function(a){return g(-a)});e&&(e.index=-e.index);return e}for(var e={},d=h,c=2,b=!1;h<d-1||!b;){var a=b?Math.round((h+d)/2):d,k=g(a);k?(e.index=a,e.value=k,d=a,b=!0):h=a;if(!b){if(d===f)break;c*=2;d=h+c;d>f&&(d=f)}}return b?e:void 0}}})},
"MW/equations/editor/actions/CursorAction":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/NodeUtils"],function(h,f,g,e,d){return f(null,{pluginId:"action.cursor",pluginDependencies:["controller.cursor","controller.selection","external.actionservice","model.equation"],constructor:function(c,b,a,d){this._cursorController=c;this._selectionController=b;this._equation=d;c=[{id:"equationeditor.left",enabled:!0,
key:"left",callback:g.hitch(this,"_handleLinearMove",-1)},{id:"equationeditor.selectleft",enabled:!0,key:"shift_left",callback:g.hitch(this,"_handleLinearMove",-1,!0)},{id:"equationeditor.jumpleft",enabled:!0,key:"ctrl_left",callback:g.hitch(this,"_handleJump",-1)},{id:"equationeditor.selectjumpleft",enabled:!0,key:"ctrl_shift_left",callback:g.hitch(this,"_handleJump",-1,!0)},{id:"equationeditor.right",enabled:!0,key:"right",callback:g.hitch(this,"_handleLinearMove",1)},{id:"equationeditor.selectright",
enabled:!0,key:"shift_right",callback:g.hitch(this,"_handleLinearMove",1,!0)},{id:"equationeditor.jumpright",enabled:!0,key:"ctrl_right",callback:g.hitch(this,"_handleJump",1)},{id:"equationeditor.selectjumpright",enabled:!0,key:"ctrl_shift_right",callback:g.hitch(this,"_handleJump",1,!0)},{id:"equationeditor.home",enabled:!0,key:"home",platformKey:{mac:"meta_left"},callback:g.hitch(this,"_searchRowSide",-1,!1)},{id:"equationeditor.selefthome",enabled:!0,key:"shift_home",platformKey:{mac:"meta__shift_left"},
callback:g.hitch(this,"_searchRowSide",-1,!0)},{id:"equationeditor.end",enabled:!0,key:"end",platformKey:{mac:"meta_right"},callback:g.hitch(this,"_searchRowSide",1,!1)},{id:"equationeditor.selectend",enabled:!0,key:"shift_end",platformKey:{mac:"meta_shift_right"},callback:g.hitch(this,"_searchRowSide",1,!0)},{id:"equationeditor.selectall",enabled:!0,key:"ctrl_a",platformKey:{mac:"meta_a"},callback:g.hitch(this,"_selectAll")}];a.loadActions(c)},_handleJump:function(c,b){for(var a=this._cursorController.getPosition(),
e=this._equation.getById(a.id),a=a.offset;e;){var f=d.categorizeNode(e);if("placeholder"===f){var g=a+c;if(0<=g&&g<=e.children.length)return this._cursorController.setPosition({id:e.id,offset:g},b),!0}g="atom"===f&&e.text.length===a;f="atom"===f&&0===a;a=this._equation.getParentAndIndex(e);if(!a)break;e=a.parent;a=a.index;g?a+=1:!f&&-1===c&&(a+=1)}},_selectAll:function(){var c;this._cursorController.hasSelection()&&(c=this._selectionController.getSelectionSpan());this._cursorController.setLogical(0);
var b=this._cursorController.availableCursorPositions()-1;this._cursorController.setLogical(b,!0);return c?(b=this._selectionController.getSelectionSpan(),b.node!==c.node||b.left!==c.left||b.right!==c.right):!0},_handleLinearMove:function(c,b){if(this._cursorController.hasSelection()){var a=this._selectionController.getSelectionSpan();if(b){if(1===c===a.reversed)return a=this._selectionController.getSelectionShrinkPosition(),this._cursorController.setPosition(a,b),!0}else return this._cursorController.setPosition({id:a.id,
offset:-1===c?a.left:a.right}),!0}a=this._cursorController.getLogical();this._cursorController.setLogical(a+c,b);return-1===c?0<a:a<this._cursorController.availableCursorPositions()-1},_searchRowSide:function(c,b){for(var a=this._cursorController.getPosition(),f=a.node,g=-1===c?0:e.nodeLength(f),a=a.offset===g;f;){if("placeholder"===d.categorizeNode(f)){if(!a)return this._cursorController.setPosition({id:f.id,offset:-1===c?0:-1},b),!0;a=!1}f=this._equation.getParentAndIndex(f);if(!f)break;a&&(g=-1===
c?0:f.parent.children.length-1,a=a&&f.index===g);f=f.parent}this._cursorController.setLogical(-1===c?0:this._cursorController.availableCursorPositions()-1)}})})},"MW/equations/editor/actions/CutCopyPasteAction":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Serializer MW/equations/renderer/model/utils/MathMLUtils MW/equations/renderer/model/utils/NodeFactory MW/equations/renderer/model/utils/TeXUtils mw-log/Log MW/rtc/plugins/cutcopypaste/MIMETypes dojo/i18n!l10n/nls/actions dojo/i18n!l10n/nls/equationEditorActions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return f(d,{pluginId:"action.cutcopypaste",pluginFamily:"actions",pluginDependencies:"api.attributes controller.cursor controller.editmanager controller.selection external.actionservice external.clipboard helper.delete helper.import helper.inserttemplate helper.mimetype model.cursor model.equation view.keyhandler".split(" "),constructor:function(a,b,c,d,f,h,k,l,m,q,F,H,L){this._attributes=a;this._importHelper=l;this._insertTemplateHelper=m;this._mimeTypeHelper=
q;this._deleteHelper=k;this._cursorController=b;this._editmanager=c;this._selectionController=d;this._actionService=f;this._clipboard=h;this._equation=H;this._keyHandler=L;"function"===typeof this._clipboard.getCopyPasteHandlers?(b=this._clipboard.getCopyPasteHandlers(),this._keyHandler.enableBrowserCopyPaste(b)):(this._keyHandler.listenTo("copy",this._preventDefault),this._keyHandler.listenTo("cut",this._preventDefault),this._keyHandler.listenTo("paste",this._preventDefault));b=[{id:"equationeditor.cut",
enabled:!1,key:"ctrl_x",platformKey:{mac:"meta_x"},contextMenuGroup:"copyPaste",text:n.cutLabel,callback:g.hitch(this,"_handleCut")},{id:"equationeditor.copy",enabled:!1,key:"ctrl_c",platformKey:{mac:"meta_c"},contextMenuGroup:"copyPaste",text:n.copyLabel,callback:g.hitch(this,"_handleCopy")},{id:"equationeditor.copy.latex",enabled:!1,text:p.copyLaTeX,contextMenuGroup:"copyPaste",callback:g.hitch(this,"_handleCopyLaTeX")},{id:"equationeditor.copy.mathml",enabled:!1,text:p.copyMathML,contextMenuGroup:"copyPaste",
callback:g.hitch(this,"_handleCopyMathML")},{id:"equationeditor.paste",enabled:!0,key:"ctrl_v",platformKey:{mac:"meta_v"},contextMenuGroup:"copyPaste",text:n.pasteLabel,callback:g.hitch(this,"_handlePaste")},{id:"equationeditor.paste.latex",enabled:!0,contextMenuGroup:"copyPaste",text:p.pasteLaTeX,callback:g.hitch(this,"_handlePasteAs","tex")},{id:"equationeditor.paste.mathml",enabled:!0,contextMenuGroup:"copyPaste",text:p.pasteMathML,callback:g.hitch(this,"_handlePasteAs","mathml")}];f.loadActions(b);
this.own(a.observe("readonly",g.hitch(this,"_updateActions")));this.own(e.after(F,"onChange",g.hitch(this,"_updateActions")))},_updateActions:function(){var a=this._attributes.get("readonly"),b=this._cursorController.hasSelection(),d=c.isEmptyEquation(this._equation.getRoot());this._actionService.updateAction("equationeditor.cut",{enabled:b&&!a});this._actionService.updateAction("equationeditor.copy",{enabled:b});this._actionService.updateAction("equationeditor.copy.latex",{enabled:!d});this._actionService.updateAction("equationeditor.copy.mathml",
{enabled:!d});this._actionService.updateAction("equationeditor.paste",{enabled:!a});this._actionService.updateAction("equationeditor.paste.latex",{enabled:!a})},_preventDefault:function(a){a.preventDefault()},_handleCut:function(){m.assert(this._cursorController.hasSelection(),"Equation should have selection");this._handleCopy();this._editmanager.createBlock(g.hitch(this,function(a){this._deleteHelper.deleteSelection(a)}));return!0},_handleCopy:function(){var a=this._mimeTypeHelper.convertSelection();
this._clipboard.setClipboardData(a);return!0},_getSelectedNodes:function(){m.assert(!c.isEmptyEquation(this._equation.getRoot()),"Equation should not be empty");if(!this._cursorController.hasSelection())return[this._equation.getRoot()];var a=this._selectionController.getSelectionSpan();if("MathRow"===a.node.className)var b=a.node.children.slice(a.left,a.right);else"MathText"===a.node.className&&(b=[k.createNode("MathText",g.mixin(a.node.getContents(),{text:a.node.text.substring(a.left,a.right)}))]);
return b},_handleCopyLaTeX:function(){var a=l.exportLaTeX(this._getSelectedNodes(),{attribBlackList:["id","data-category"]});this._clipboard.setClipboardData([{flavor:q.TEXT,content:a}])},_handleCopyMathML:function(){var b=a.exportMathML(this._getSelectedNodes(),{attribBlackList:["id","data-category"]});this._clipboard.setClipboardData([{flavor:q.TEXT,content:b}])},_handlePaste:function(){if(!this._attributes.get("readonly")){var a=this._mimeTypeHelper.acceptedMimeTypes();this._clipboard.getClipboardData(a).then(g.hitch(this,
function(a){0!==h.filter(Object.keys(a),function(b){return a[b]}).length&&this._editmanager.createBlock(g.hitch(this,function(b){this._cursorController.hasSelection()&&this._deleteHelper.deleteSelection(b);this._mimeTypeHelper.insertContent(b,a)}))}));return!0}},_handlePasteAs:function(a){this._attributes.get("readonly")||this._clipboard.getClipboardData(["text/plain"]).then(g.hitch(this,function(d){if(d=this._importHelper.importModel(d["text/plain"],a)){d=c.categorizeTree(d);var e=b.serializeRange(d.children[0]);
this._editmanager.createBlock(g.hitch(this,function(a){this._insertTemplateHelper.insertTemplate(a,e)}))}}))}})})},"MW/equations/editor/utils/EquationPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{constructor:function(){},own:function(e){this._ownHandles||(this._ownHandles=[g.after(this,"destroy",f.hitch(this,function(){this._ownHandles.forEach(function(d){d.remove()})}))]);this._ownHandles.push(e)},destroy:function(){}})})},"MW/equations/editor/utils/Serializer":function(){define(["dojo/_base/array",
"dojo/_base/lang","MW/equations/editor/utils/NodeUtils"],function(h,f,g){function e(b){var a={};c.forEach(function(c){b.hasOwnProperty(c)&&(a[c]=b[c])});return a}function d(b){if(!b)return["Null"];var a=b.className,c=e(b),f=[];b.children&&(f=h.filter(b.children,function(a){return!a||g.categorizeNode(a)!==g.CATEGORY.PLACEHOLDER_ATOM}),f=h.map(f,function(a){return d(a)}));return[a,c,f]}var c="accent accentunder actiontype bevelled class close cols colspec data-category displaystyle inline kind length limitStyle linethickness mathsize mathvariant numPostPairs open rows style stretchy symbolName text".split(" ");
return{INTERESTING_ATTRIBUTES:c,serializeRange:function(b,a,c){var h=[],m=g.categorizeNode(b);a=a||0;if("atom"===m)"undefined"===typeof c&&(c=b.text.length),h.push(["MathText",f.mixin(e(b),{text:b.text.substr(a,c-a)})]);else if("placeholder"===m||"structure-part"===m){"undefined"===typeof c&&(c=b.children.length);for(;a<c;a+=1)m=g.categorizeNode(b.children[a]),m!==g.CATEGORY.PLACEHOLDER_ATOM&&h.push(d(b.children[a]))}return h}}})},"MW/equations/renderer/model/utils/MathMLUtils":function(){define(["./NodeFactory"],
function(h){return{exportMathML:function(f,g){g=g||{};g.attribBlackList=g.attribBlackList||["data-category"];var e,d;if(1===f.length)d=f[0];else{d=h.createNode("MathRoot",{inline:g.inline});for(e=0;e<f.length;e+=1)d.children.push(f[e])}return d.exportMathML(g)}}})},"MW/equations/editor/actions/DeleteAction":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),
function(h,f,g,e,d,c){return h(e,{pluginId:"action.delete",pluginDependencies:"api.attributes controller.editmanager controller.cursor controller.keyhandler external.actionservice helper.delete model.cursor model.equation".split(" "),constructor:function(b,a,c,d,e,g,h,p){this._attributes=b;this._deleteHelper=g;this._editmanager=a;this._cursor=h;this._equation=p;this._cursorController=c;b=[{id:"equationeditor.backspace",key:"backspace",keyPriority:-1,enabled:!0,callback:f.hitch(this,"_handleDelete",
-1)},{id:"equationeditor.delete",enabled:!0,key:"delete",callback:f.hitch(this,"_handleDelete",1)}];e.loadActions(b)},_handleDelete:function(b){if(!this._attributes.get("readonly")){if(!this._cursor.hasSelection()&&this._deleteHelper.handleDelete(b))return!0;this._editmanager.createBlock(f.hitch(this,function(a){if(this._cursor.hasSelection())return this._deleteHelper.deleteSelection(a);var c=this._cursor.getPosition(),d=this._equation.getById(c.id);this._delete(a,b,d,c.offset)}));return!0}},_delete:function(b,
a,d,e){var f=c.categorizeNode(d);e=-1===a?e-1:e;"atom"===f?0<=e&&e<d.text.length?this._deleteHelper.deleteInAtom(b,d,e,1):(f=-1===a?this._equation.getPreviousSibling(d):this._equation.getNextSibling(d))?(e=-1===a?g.nodeLength(f):0,this._delete(b,a,f,e)):this._findAndSelectStructure(d):"placeholder"===f&&0<=e&&e<d.children.length?this._delete(b,a,d.children[e],0):"structure"===f?this._shouldSelectStructure(d)?this._selectStructure(d):b.deleteNode(d.id):this._findAndSelectStructure(d)},_shouldSelectStructure:function(b){return"MathDelimiter"!==
b.className&&"MathText"!==b.className&&"MathSpace"!==b.className},_selectStructure:function(b){b=this._equation.getParentAndIndex(b);this._cursorController.setPosition({id:b.parent.id,offset:b.index});this._cursorController.setPosition({id:b.parent.id,offset:b.index+1},!0)},_findAndSelectStructure:function(b){(b=this._findStructure(b))&&this._selectStructure(b)},_findStructure:function(b){return this._equation.iterate({start:b,direction:d.UP,structure:function(a,b){b.stop(a)}})}})})},"MW/equations/editor/utils/IteratorConstants":function(){define([],
function(){return{UP:"up*",DOWN:"children",DOWN_RIGHT_UP:"children ((right + children)* up)*",RIGHT_LEFT_DOWN_UP:"((right + children)* (left + children)* up)*"}})},"MW/equations/editor/actions/DragAndDropAction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/on","MW/equations/editor/utils/EquationPlugin"],function(h,f,g,e,d){return h(d,{pluginId:"action.draganddrop",pluginFamily:"actions",pluginDependencies:"controller.caret controller.cursor controller.editmanager controller.mouse controller.selection helper.delete helper.mimetype view.selection view.keyhandler view.rootnode".split(" "),
constructor:function(c,b,a,d,g,h,q,n,p,r){this._deleteHelper=h;this._caretController=c;this._cursorController=b;this._editmanager=a;this._selectionController=g;this._mimeTypeHelper=q;this._rootNode=r;this._selectionView=n;this._keyHandler=p;this._selectionView.getNode().draggable="true";this._mouseController=d;this.own(this._mouseController.addMouseDown(f.hitch(this,"_handleMouseDown"),1));this.own(this._mouseController.addMouseMove(f.hitch(this,"_handleMouseMove"),1));this.own(e(r,"mouseup",f.hitch(this,
"_handleMouseUp")));this.own(e(r,"dragstart",f.hitch(this,"_handleDragStart")));this.own(e(r,"dragover",f.hitch(this,"_handleDragOver")));this.own(e(r,"drop",f.hitch(this,"_handleDrop")));this.own(e(r,"dragend",f.hitch(this,"_handleDragEnd")))},_handleDragStart:function(c){this._dragging?this._mimeTypeHelper.convertSelection().forEach(function(b){c.dataTransfer.setData(b.flavor,b.content)}):c.preventDefault()},_handleDragOver:function(c){var b=this._caretController.getPositionFromAbsoluteXY(c.pageX,
c.pageY);b&&(this._dragPosition=b,this._caretController.drawCaretAt(b),c.preventDefault())},_handleDrop:function(c){this._dragging=!1;c.stopPropagation();this._editmanager.createBlock(f.hitch(this,function(b){var a=this._cursorController.hasSelection()&&this._selectionController.getSelectionSpan();this._cursorController.setPosition(this._dragPosition);a&&!c.ctrlKey&&this._deleteHelper.deleteRange(b,a);var d={};this._mimeTypeHelper.acceptedMimeTypes().forEach(function(a){var b=c.dataTransfer.getData(a);
b&&(d[a]=b)});this._mimeTypeHelper.insertContent(b,d)}));window.setTimeout(f.hitch(this._keyHandler,"focus"),0)},_handleDragEnd:function(){this._dragging=!1;this._caretController.redraw()},_handleMouseDown:function(c){if(c.target&&"selection"===c.target.className&&0===c.button)return this._dragging=!0},_handleMouseMove:function(c){return this._dragging},_handleMouseUp:function(c){if(this._dragging){this._dragging=!1;var b=g.position(this._rootNode,!0);this._caretController.fromXY(c.pageX-b.x,c.pageY-
b.y,c.shiftKey);this._lastX=c.pageX;this._lastY=c.pageY}}})})},"MW/equations/editor/actions/InsertTemplateAction":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/Serializer","MW/equations/editor/utils/Templates"],function(h,f,g,e,d){return f(null,{pluginId:"action.inserttemplate",pluginFamily:"actions",pluginDependencies:["controller.editmanager","external.actionservice","helper.inserttemplate"],constructor:function(c,b,a){this._editmanager=
c;this._insertTemplateHelper=a;var e=d.getById();c=h.map(Object.keys(e),function(a){a=e[a];return g.mixin({enabled:!0,callback:g.hitch(this,"_insertTemplate",a.template)},a.attributes,{id:"equationeditor.insert."+a.attributes.id})},this);b.loadActions(c)},_insertTemplate:function(c){this._editmanager.createBlock(g.hitch(this,function(b){this._insertTemplateHelper.insertTemplate(b,c)}))}})})},"MW/equations/editor/utils/Templates":function(){define(["dojo/_base/array","MW/equations/utils/XMLParser",
"dojo/text!./Templates.xml"],function(h,f,g){function e(a){var b={};h.forEach(a.attributes,function(a){0<=q.indexOf(a.nodeName)?b[a.nodeName]=parseInt(a.nodeValue,10):0<=n.indexOf(a.nodeName)?b[a.nodeName]="true"===a.nodeValue:b[a.nodeName]=a.nodeValue});return b}function d(a){var b=h.filter(a.childNodes,function(a){return"#text"!==a.nodeName}),b=h.map(b,d);return[a.nodeName,e(a),b]}function c(a,b,c){c=c||[];return[a,b,c]}function b(){p.forEach(function(a){var b=a;a instanceof Array&&(b=a[0],a=a[1]);
b={id:b};a=c("MathText",{kind:"symbol",symbolName:a,"data-category":"structure"});r.push({attributes:b,template:a})})}function a(){if(!r){for(var a=[],h=(new f).parseString(g).documentElement.firstElementChild;h;){var k=e(h),n=d(h.firstElementChild);a.push({attributes:k,template:n});h=h.nextElementSibling}r=a;b();a=l;h=m;for(k=0;k<a;k+=1)for(n=0;n<h;n+=1){for(var q=k+1,p=n+1,s=void 0,t=void 0,u=[],s=0;s<q;s+=1)for(t=0;t<p;t+=1)u.push(c("MathRow",{"data-cursor":t+s*q,"data-category":"placeholder"}));
s=c("MathMatrix",{"data-category":"structure-part",rows:q,cols:p},u);t=c("MathDelimiter",{symbolName:"bracketleft","data-category":"static"});u=c("MathDelimiter",{symbolName:"bracketright","data-category":"static"});s=c("MathRow",{"data-category":"structure"},[t,s,u]);t={id:"matrix"+q+"x"+p};1===q&&1===p&&(t["command-id"]="matrix,matrix1x1");r.push({attributes:t,template:s})}}return r}function k(){t||(t={},u=[],a().forEach(function(a){a.attributes.hasOwnProperty("command-id")?a.attributes["command-id"].split(",").forEach(function(b){t[b]=
a;u.push(b)}):(t[a.attributes.id]=a,u.push(a.attributes.id))}));return t}var l=10,m=10,q=["data-cursor","cols","rows"],n=["accent","accentunder","bevelled","stretchy"],p=["alpha","beta","gamma","delta","epsilon","varepsilon","zeta","eta","theta","vartheta","iota","kappa","lambda","mu","nu","xi","omicron","pi","varpi","rho","varrho","sigma","varsigma","tau","upsilon","phi","varphi","chi","psi","omega","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi",
"Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","pm","mp","times","div","cdot","ast","star","dagger","ddagger","amalg","cap","cup","uplus","sqcap","sqcup",["vee","lor"],["wedge","land"],"setminus","wr","circ","bullet","oslash","odot","bigcirc","bigtriangleup","bigtriangledown","triangleleft","triangleright","oplus","ominus","otimes",["bot","uptack"],["top","downtack"],["sumop","sum"],["prodop","prod"],"intop",["ointop","contourintop"],"biguplus","bigoplus","bigvee","bigcap",
"bigotimes","bigwedge","bigcup","bigodot","bigsqcup",["lt","\x3c"],["gt","\x3e"],"leq","geq","ll","gg","neq","noteq","doteq","sim","simeq","approx",["asymp","asympeq"],"cong","equiv","subset","supset","subseteq","supseteq","sqsubseteq","sqsupseteq","in","ni","notin","models","vdash","dashv","perp","mid","parallel","propto","bowtie","prec","preceq","succ","succeq","notlt","notgt","notleq","notgeq","notequiv","notapprox","notcong","notsim","notsimeq","notmodels","notni","notsucc","notsucceq","notprec",
"notpreceq","notparallel","notsubset","notsupset","notsubseteq","notsupseteq","leftarrow","rightarrow","uparrow","Leftarrow","Rightarrow","Uparrow","longleftarrow","longrightarrow","downarrow","Longleftarrow","Longrightarrow","Downarrow","hookleftarrow","hookrightarrow","updownarrow","leftharpoondown","rightharpoondown","Updownarrow","leftharpoonup","rightharpoonup","leftrightarrow","swarrow","nearrow","Leftrightarrow","nwarrow","searrow","longleftrightarrow","mapsto","longmapsto","Longleftrightarrow",
["lbrace","braceleft"],["rbrace","braceright"],["vert","verticalbar"],["lbrack","bracketleft"],["rbrack","bracketright"],["Vert","dblverticalbar"],["langle","anglebracketleft"],["rangle","anglebracketright"],"backslash",["lceil","ceilleft"],["rceil","ceilright"],["lfloor","floorleft"],["rfloor","floorright"],"aleph","infty","forall","wp","nabla","exists","angle","partial","emptyset","triangle","Im","imath","hbar","Re","jmath","prime","ldots","ell",["colon","colonPunct"],"cdots","neg","ddots","surd",
"ldotp","vdots",["to","rightarrow"],["gets","leftarrow"]],r,s,t,u;return{getById:function(){s||(s={},a().forEach(function(a){a.attributes.id&&(s[a.attributes.id]=a)}));return s},getByCommandId:k,getCommands:function(){t||k();return u}}})},"MW/equations/editor/actions/InsertTextAction":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils MW/equations/renderer/model/Symbols".split(" "),
function(h,f,g,e,d,c){return h(g,{pluginId:"action.inserttext",pluginDependencies:"api.attributes controller.cursor controller.editmanager controller.keyhandler helper.delete helper.insert model.equation".split(" "),constructor:function(b,a,c,d,e,g,h){this._attributes=b;this._deleteHelper=e;this._insertHelper=g;this._editmanager=c;this._cursorController=a;this._equation=h;this.own(d.addTypeHandler(f.hitch(this,"insert")))},insert:function(b){if(!this._attributes.get("readonly")){var a;this._editmanager.createBlock(f.hitch(this,
function(e){this._cursorController.hasSelection()&&this._deleteHelper.deleteSelection(e);var f=this._cursorController.getPosition(),g=f.node,h=d.kindOfText(b);if(h===d.TEXT_KIND.WHITESPACE)h=d.TEXT_KIND.TEXT,b="\u2009";else if(h===d.TEXT_KIND.DELIMITER){f=this._insertHelper.getInsertPosition(e);a=e.insertNode(f.id,f.offset,"MathDelimiter",{symbolName:c.getSymbolName(b)});return}var n={kind:h,text:b},n=this._insertHelper.prepareTextAttributes(n,g,f.offset);"symbol"===n.kind&&(n.symbolName=c.getSymbolName(b));
this._nodeMatches(g,n)?(a=g,e.replaceText(f.id,f.offset,0,b)):("placeholder"===d.categorizeNode(g)&&(g=g.children[f.offset-1]),"mtext"!==h&&this._insertHelper.autoRemoveSpace(e,g,n),f=this._insertHelper.getInsertPosition(e),a=e.insertNode(f.id,f.offset,"MathText",n))}));this.onTextInserted(b,a)}},onTextInserted:function(b,a){},_nodeMatches:function(b,a){return"placeholder-atom"===b["data-category"]||"MathText"!==b.className||"symbol"===b.kind?!1:b.kind===a.kind}})})},"MW/equations/editor/actions/LaTeXCommandsAction":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Templates".split(" "),
function(h,f,g,e,d,c,b){return f(d,{pluginId:"action.latexcommands",pluginFamily:"actions",pluginDependencies:"action.inserttext controller.cursor controller.editmanager controller.keyhandler external.actionservice helper.insert model.equation".split(" "),constructor:function(a,c,d,f,h,n,p){this._insertHelper=n;this._insertTextAction=a;this._cursorController=c;this._actionService=h;this._editManager=d;this._equation=p;this.own(e.after(a,"onTextInserted",g.hitch(this,"_handleTextInserted"),!0));a=
[{id:"equationeditor.enter",keyPriority:10,enabled:!0,key:"enter",callback:g.hitch(this,"_handleEnter")}];h.loadActions(a);this.own(f.add("{",g.hitch(this,"_handleCurlyBrace")),10);this._templates=b.getByCommandId()},_handleCurlyBrace:function(){return this._detectAndExecuteCommand()},_handleEnter:function(){return this._detectAndExecuteCommand()},_handleTextInserted:function(a,b){var d=this._equation.getPreviousSibling(b);d&&"atom"===c.categorizeNode(d)&&this._executeCommand(d,b)},_detectAndExecuteCommand:function(){var a=
this._cursorController.getPosition(),b=a.node;if("atom"===c.categorizeNode(b)&&a.offset===b.text.length)return this._executeCommand(b)},_executeCommand:function(a,b){var c=this._equation.getPreviousSibling(a);if(c&&"MathText"===c.className&&"backslash"===c.symbolName)return this.handleLaTeXCommand(a,a.text,b),!0},getLaTeXCommands:function(){var a=Object.keys(this._templates);return h.filter(a,function(a){return a.match(/^[a-z]/i)}).sort(function(a,b){return a.toLowerCase()===b.toLowerCase()?a.localeCompare(b):
a.toLowerCase().localeCompare(b.toLowerCase())})},handleLaTeXCommand:function(a,b,c){this._templates[b]&&this._editManager.createBlock(g.hitch(this,function(d){var e=this._templates[b].template;if("MathText"===a.className&&"backslash"!==a.symbolName){var f=this._equation.getPreviousSibling(a);f&&d.deleteNode(f.id)}f=this._equation.getParentAndIndex(a);d.deleteNode(a.id);e=this._insertHelper.insertTemplate(d,e,f.parent,f.index);0<e.length&&c&&(f=this._equation.getParentAndIndex(c),d.moveChildren(e[0].id,
0,f.parent.id,f.index,f.index+1))}))}})})},"MW/equations/editor/actions/LaTeXCompletionAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred MW/equations/editor/utils/EquationPlugin MW/rtc/plugins/completionpopup/CompletionPopup".split(" "),function(h,f,g,e,d,c){return h(d,{pluginId:"action.latexcompletion",pluginFamily:"actions",pluginDependencies:"action.inserttext action.latexcommands controller.focus external.actionservice model.equation view.caret view.keyhandler".split(" "),
constructor:function(b,a,c,d,e,h,n){this._equation=e;this._latexCommandsActions=a;this._focusController=c;this._insertTextAction=b;this._actionService=d;this._caret=h;this.own(g.after(b,"onTextInserted",f.hitch(this,"_handleTextInserted"),!0));this._keyHandler=n},_handleTextInserted:function(b,a){"\\"===b&&this._showCompletion(a)},_getCompletions:function(b){var a=this._latexCommandsActions.getLaTeXCommands(),a=a.filter(function(a){return a.slice(0,b.length)===b});return a.map(function(a){return{popupCompletion:a}})},
_showCompletion:function(b){var a="",d=f.hitch(this,function(){t.removePopup();var b=this._getCompletions(a);0===b.length?r():t.showPopup(b,e,a)}),e=f.hitch(this,function(c){var d=b;""!==a&&(d=this._equation.getNextSibling(b)||b);this._latexCommandsActions.handleLaTeXCommand(d,c.popupCompletion);this._keyHandler.focus()}),g=f.hitch(this,function(){this._actionService.executeAction("equationeditor.backspace");""===a?r():(a=a.substr(0,a.length-1),d())}),h=f.hitch(this,function(b){a+=b;this._insertTextAction.insert(b);
d()}),n,p=f.hitch(this,function(){n=n||this._focusController.add("popup")}),r=f.hitch(this,function(){n&&(n.remove(),n=null)}),s=this._caret.getNode(),t=new c(s,p,r,h,g);t.showPopup(this._getCompletions(""),e)}})})},"MW/rtc/plugins/completionpopup/CompletionPopup":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom-class dojo/i18n!l10n/nls/tabcompletion dojo/keys dojo/on mw-log/Log ./CompletionPopupMenu".split(" "),function(h,f,g,e,d,c,b,a,k,l){return f(null,
{_TAB_COMPLETION_POPUP_ID:"tabCompletionDijitPopup",STATUS_ENUM:{STATUS_TOO_MANY_MATCHES:"TOO_MANY_MATCHES",STATUS_NO_MATCHES:"NO_MATCHES"},_isMenuCreated:!1,DISMISSAL_CHARS:" (.'",constructor:function(a,b,c,d,e){this._charKeyTypedCallback=d;this._backspaceTypedCallback=e;this._popupArguments={around:a,openCallback:b,closeCallback:c,orient:["below","above"]}},showStatusPopup:function(a){this._isMenuCreated||(this._popup=this._buildPopupMenu(),a===this.STATUS_ENUM.STATUS_NO_MATCHES?this._popup=this._addStatusMessage(this._popup,
"noCompletionsFound"):a===this.STATUS_ENUM.STATUS_TOO_MANY_MATCHES&&(this._popup=this._addStatusMessage(this._popup,"tooManyCompletionsFound")),this._displayPopup())},showPopup:function(a,b,c){this._isMenuCreated||(this._popup=this._buildPopupMenu(c),this._popup=this._addCompletionEntries(this._popup,a,b),this._displayPopup())},removePopup:function(){this._isMenuCreated&&this._popup&&(this._isMenuCreated=!1,this.suffix=null,this._popup.closePopup(),this._popup.destroyRecursive())},_displayPopup:function(){this._popup.openPopup(this._popupArguments);
this._popup.reorient();this._popup.domNode.parentElement&&(this._popup.domNode.parentElement.setAttribute("data-popupID","tabCompletionPopup"),d.add(this._popup.domNode.parentElement,"layeredNode"))},_addStatusMessage:function(d,f){var h=c[f],k=d.createPopupItem(h,"popupItem message");d.addChild(h,k);d.own(a(k,"keydown, click",e.hitch(this,function(a){this.removePopup();(a.keyCode===b.TAB||!a.ctrlKey&&a.keyCode===b.ENTER)&&g.stop(a)})));return d},_handleKeyDown:function(a,c,d){if(d.keyCode===b.TAB||
!d.ctrlKey&&d.keyCode===b.ENTER)this.removePopup(),c.getSelectedChild()&&a(),g.stop(d)},_addCompletionEntries:function(b,c,d){c.forEach(function(c){var f=b.createPopupItem(c.popupCompletion,"popupItem code"),g=e.hitch(this,d,c);b.own(a(f,"keydown",e.hitch(this,"_handleKeyDown",g,b)));b.own(a(f,"click",g));b.addChild(c.popupCompletion,f)},this);return b},_ignoreTabs:function(a){a.keyCode===b.TAB&&g.stop(a)},_handleCharTyped:function(a,b,c){this.suffix=this.suffix?this.suffix+c:c;this._updateSelection(a,
b,this.suffix);this._charKeyTypedCallback&&this._charKeyTypedCallback(c)},_handleBackspace:function(a,b){if(!this.suffix||0===this.suffix.length)a.onExecute();else this.suffix=this.suffix.substring(0,this.suffix.length-1),this._updateSelection(a,b,this.suffix);this._backspaceTypedCallback&&this._backspaceTypedCallback()},_buildPopupMenu:function(c){var d=c||"";this.suffix=null;this._isMenuCreated=!0;var f=new l({popupId:this._TAB_COMPLETION_POPUP_ID,focusCallBack:this._popupArguments.closeCallback,
positionArgs:this._popupArguments});f.startup();a(f,"keypress",e.hitch(this,function(a){this._isKeyCharPrintable(a.keyChar)&&(this._handleCharTyped(f,d,a.keyChar),g.stop(a))}));a(f.domNode,"keydown",e.hitch(this,function(a){var c=a.keyCode;this._isKeyNotPrintable(a)?g.stop(a):this._isKeyBackspace(c)?(this._handleBackspace(f,d),g.stop(a)):this._isKeySpace(c)?(this._handleCharTyped(f,d," "),g.stop(a)):c===b.ENTER&&g.stop(a)}));a(f,"keyup",e.hitch(this,function(a){var c=a.keyCode;c===b.LEFT_ARROW||c===
b.RIGHT_ARROW?this.removePopup():this._isKeyNotPrintable(a)&&g.stop(a)}));f.connect(f,"closePopup",e.hitch(this,function(){this.removePopup()}));return f},_updateSelection:function(a,b,c){var d=(b+c).toLowerCase();b=!1;-1!==this.DISMISSAL_CHARS.indexOf(d.charAt(d.length-1))&&(d=d.substring(0,d.length-1),b=!0);var e;h.forEach(a.getChildren(),function(b){!e&&b.label.toLowerCase().substring(0,d.length)===d&&(a.focusChild(b),e=b)},this);if(e&&e.label.length===d.length&&b)a.onExecute();(b||!e)&&a.closePopup()},
_isKeyBackspace:function(a){return a===b.BACKSPACE},_isKeySpace:function(a){return a===b.SPACE},_isKeyCharPrintable:function(a){return void 0!==a&&""!==a},_isShiftPressAndInvalidKey:function(a){return a.shiftKey&&void 0===a.keyCode},_isKeyNotPrintable:function(a){return a.ctrlKey||a.altKey||a.metaKey||a.keyCode===b.DELETE&&""===a.keyChar||this._isShiftPressAndInvalidKey(a)}})})},"MW/rtc/plugins/completionpopup/CompletionPopupMenu":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!l10n/nls/tabcompletion dojo/keys dojo/window dojo/query dojo/on dojo/text!./CompletionPopupMenu.html dijit/_TemplatedMixin dijit/layout/ContentPane dijit/popup dijit/registry mw-log/Log".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B){return f([v,u],{_savedFocusNode:null,_focusCallback:null,_popupMenuClosed:!1,_selectedItem:null,_positionArgs:null,_NUMBER_OF_ELEMENTS_IN_MENU:9,_ELEMENT_HEIGHT_IN_MENU:21,constructor:function(a){this._setTemplate(a);this._cleanupOldPopups();this.id="tabCompletionPopupMenu";this._popupId=a&&a.popupId||null;this._dijitPopup=w;this._items=[];this._positionArgs=a&&a.positionArgs;this._focusCallback=a&&a.closeCallback},_setTemplate:function(a){this._maxHeight=
a&&a.maxHeight||this._NUMBER_OF_ELEMENTS_IN_MENU*this._ELEMENT_HEIGHT_IN_MENU;this.tabIndex=0;this.templateString="\x3cdiv\x3e"+t+"\x3c/div\x3e"},_cleanupOldPopups:function(){var a=r('[widgetid^\x3d"tabCompletionPopupMenu"]');h.forEach(a,function(a){x.byNode(a).destroyRecursive()},this)},_injectPopup:function(a){this._dijitPopup=a},postCreate:function(){this.inherited(arguments);this.connect(this,"onClose",e.hitch(this,function(){this._popupMenuClosed=!0}));this.own(s(this.domNode,"keydown",e.hitch(this,
function(a){var b;if(a.keyCode===n.UP_ARROW)b=this._getNextItemByOffset(-1);else if(a.keyCode===n.DOWN_ARROW)b=this._getNextItemByOffset(1);else if(a.keyCode===n.PAGE_UP)b=this._getNextItemByOffset(-this._NUMBER_OF_ELEMENTS_IN_MENU);else if(a.keyCode===n.PAGE_DOWN)b=this._getNextItemByOffset(this._NUMBER_OF_ELEMENTS_IN_MENU);else if(a.keyCode===n.ESCAPE){g.stop(a);this.closePopup();return}b&&(this.focusChild(b),a.preventDefault())})));a.add(this.domNode,"dijit dijitMenu dijitMenuPassive dijitReset tabCompletionPopupMenu");
m.set(this.domNode,{maxHeight:this._maxHeight+"px"});b.set(this.domNode,"tabindex",0)},openPopup:function(a){B.assert(a,"Please specify the 'around' and 'orient' arguments");a.around?a.orient||B.error("'Orient' parameter not specified, default will be used"):B.error("Specify the 'around' parameter for positioning the popup.");this._popupMenuClosed=!1;this._openCallback=(this._positionArgs=a)&&a.openCallback;this._closeCallback=a&&a.closeCallback;this._scheduleOpen(a);this.focusFirstChild()},reorient:function(){this._popupMenuClosed||
(this._closeAndRestoreFocus(),this._openMyself(this._positionArgs),this._popupMenuClosed=!1,this.focusFirstChild())},_ignoreTabs:function(a){a.keyCode===n.TAB&&g.stop(a)},_lookup:function(a){this._localization||(this._localization=q);return this._localization[a]},_scheduleOpen:function(a){this._openTimer||(this._openTimer=setTimeout(e.hitch(this,function(){delete this._openTimer;this._openMyself(a)}),1))},_getRelativePopupPosition:function(a){var b=p.getBox(),c=l.position(a.around);a.orient=a.orient||
["below","above"];c.y+this._maxHeight<b.h||(a.orient=["above","below"]);return a},onExecute:function(){this.closePopup()},onCancel:function(){this.closePopup()},_openMyself:function(b){if(this.domNode){var d=this._focusManager.get("prevNode"),f=this._focusManager.get("curNode");this._savedFocusNode=!f||c.isDescendant(f,this.domNode)?d:f;b=this._getRelativePopupPosition(b);this._dijitPopup.open({popup:this,around:b.around,onExecute:e.hitch(this,"closePopup"),onCancel:e.hitch(this,"closePopup"),orient:b.orient});
this._popupId&&this._dijitPopup.getTopPopup().wrapper&&a.add(this._dijitPopup.getTopPopup().wrapper,this._popupId);this.focus();this._openCallback&&this._openCallback()}},_onBlur:function(){this.inherited("_onBlur",arguments);this.closePopup()},_closeAndRestoreFocus:function(){this._savedFocusNode&&this._savedFocusNode.focus&&this._savedFocusNode.focus();this._dijitPopup&&this._dijitPopup.close(this);this._closeCallback&&this._closeCallback()},closePopup:function(){this._closeAndRestoreFocus()},focus:function(){this._selectedItem?
this.focusChild(this._selectedItem):this.focusFirstChild()},focusChild:function(a){a&&!(0>this._items.indexOf(a))&&(a.domNode.focus(),this.unSelectChild(this._selectedItem),this.selectChild(a))},focusFirstChild:function(){this._items.length&&this.focusChild(this._items[0])},blurChild:function(a){a&&!(0>this._items.indexOf(a))&&(a.domNode.blur(),this.unSelectChild(a))},unSelectChild:function(b){b&&(a.remove(b.domNode,"selected"),this._selectedItem=null,this._backupItem=b)},selectChild:function(b){b&&
(a.add(b.domNode,"selected"),this._selectedItem=b)},addChild:function(a,b){this._items.push({label:a,domNode:b});k.place(b,this.containerNode,"last")},_getIndexByOffset:function(a,b,c){a+=b;return a>c-1?c-1:0>a?0:a},_getNextItemByOffset:function(a){var b=this._items.length,c=this._items.indexOf(this._selectedItem||this._backupItem);a=this._getIndexByOffset(c,a,b);return this._items[a]},getChildren:function(){return this._items},getSelectedChild:function(){return this._selectedItem},createPopupItem:function(a,
b){return k.toDom('\x3ctr class\x3d"'+b+'" tabindex\x3d"-1"\x3e\x3ctd\x3e'+a+"\x3c/td\x3e\x3c/tr\x3e")}})})},"MW/equations/editor/actions/LineBreakAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Serializer MW/equations/editor/utils/Templates MW/equations/renderer/model/Symbols".split(" "),function(h,f,g,e,d,c,b,a){return h(e,{pluginId:"action.linebreak",pluginFamily:"actions",
pluginDependencies:"api.attributes controller.cursor controller.editmanager external.actionservice helper.delete helper.insert model.equation".split(" "),constructor:function(a,b,c,d,e,g,h){this._attributes=a;this._cursorController=b;this._editmanager=c;this._equation=h;this._deleteHelper=e;this._insertHelper=g;a=[{id:"equationeditor.linebreak",enabled:!0,key:"enter",callback:f.hitch(this,"_handleLineBreak",!1)},{id:"equationeditor.linebreak_alt",enabled:!0,key:"shift_enter",callback:f.hitch(this,
"_handleLineBreak",!1)}];d.loadActions(a);this.own(e.addDeleteHandler(f.hitch(this,"_handleDelete")))},_handleDelete:function(a){var b=this._detectLine();if(b&&-1===a&&b.left)return this._mergeLines(b.left,b.line),!0;if(b&&1===a&&b.right)return this._mergeLines(b.line,b.right),!0},_mergeLines:function(a,b){var c=a.parent;this._editmanager.createBlock(f.hitch(this,function(e){e.moveChildren(a.id,a.children.length,b.id);e.deleteNode(b.id);var f=c.rows,f=f-1;1===f?(f=this._equation.getParentAndIndex(c),
e.moveChildren(f.parent.id,f.index,a.id),e.updateAttributes(f.parent.id,{"data-category":d.CATEGORY.PLACEHOLDER_ROW}),e.deleteNode(c.id)):e.updateAttributes(c.id,{rows:f})}))},_detectLine:function(){var a=this._cursorController.getPosition(),b={},c=!0,e=!0,f=a.node;d.categorizeNode(f)===d.CATEGORY.ATOM||d.categorizeNode(f)===d.CATEGORY.PLACEHOLDER_ATOM?(c=0===a.offset,e=a.offset===f.text.length,a=this._equation.getParentAndIndex(f),f=a.parent,c=c&&0===a.index,e=e&&a.index===f.children.length-1):(c=
0===a.offset,e=a.offset===f.children.length);a=this._equation.getParentAndIndex(f);f=a.parent;if(!("MathMatrix"!==f.className||1!==f.cols))if(c=c&&0<a.index,e=e&&a.index<f.children.length,c||e){var g=f.parent;"MathRow"===g.className&&(g=g.parent);if("MathRoot"===g.className)return b.line=f.children[a.index],c&&(b.left=f.children[a.index-1]),e&&(b.right=f.children[a.index+1]),b}},_handleLineBreak:function(){if(!this._attributes.get("readonly")){var a=this._cursorController.getPosition(),b=a.node;d.categorizeNode(b)===
d.CATEGORY.ATOM&&(b=this._equation.getParent(b));var e=this._equation.getParentAndIndex(b),g=e.parent;if("MathMatrix"===g.className){var h=g,g=g.parent;"MathRow"===g.className&&(g=g.parent);"MathRoot"===g.className&&this._insertAdditionalNewline(h,e.index);return!0}if("MathRoot"===g.className)return this._editmanager.createBlock(f.hitch(this,function(d){var e=this._insertHelper.getInsertPosition(d,a),f=c.serializeRange(e.node,0,e.offset),g=c.serializeRange(e.node,e.offset);this._deleteHelper.deleteRange(d,
{node:e.node,left:0,right:e.node.children.length});d.updateAttributes(b.id,{"data-category":"structure-part"});var h=d.insertNode(b.id,0,"MathMatrix",{cols:1,rows:2,colspec:"l"}),e=d.insertNode(h.id,0,"MathRow",{"data-category":"placeholder"}),h=d.insertNode(h.id,1,"MathRow",{"data-category":"placeholder"});this._insertHelper.insertTemplate(d,f,e,0);this._insertHelper.insertTemplate(d,g,h,0);this._cursorController.setPosition({id:h.id,offset:0})})),!0}},_insertAdditionalNewline:function(a,b){var c=
this._cursorController.getPosition();this._editmanager.createBlock(f.hitch(this,function(d){var e=this._insertHelper.getInsertPosition(d,c);d.updateAttributes(a.id,{rows:a.rows+1});var f=d.insertNode(a.id,b+1,"MathRow",{"data-category":"placeholder"});d.moveChildren(f.id,0,e.node.id,e.offset)}))}})})},"MW/equations/editor/actions/MathMLFormattingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils".split(" "),
function(h,f,g,e,d,c){return h(e,{pluginId:"action.mathmlformatting",pluginFamily:"actions",pluginDependencies:["helper.insert","model.equation"],constructor:function(b,a){this._insertHelper=b;this._equation=a;this.own(g.after(b,"prepareTextAttributes",f.hitch(this,"_handlePrepareTextAttributes")));this.own(g.after(a,"beforeUpdateAttributes",f.hitch(this,"_handleUpdateAttributes"),!0));this.own(g.after(a,"beforeReplaceText",f.hitch(this,"_handleReplaceText"),!0))},_handlePrepareTextAttributes:function(b,
a){if("id"!==b.kind)return b;if(!a||!a.mathvariant)b.mathvariant=1===b.text.length?d.add(b.mathvariant,"italic"):d.remove(b.mathvariant,"italic");return b},_handleReplaceText:function(b,a,c,d,e){a=this._equation.getById(a);this._isAutoUpdateNode(a)&&this._handleTextChange(b,a,a.text.length,a.text.length-d+e.length)},_handleUpdateAttributes:function(b,a,c){c.hasOwnProperty("text")&&(a=this._equation.getById(a),this._isAutoUpdateNode(a)&&this._handleTextChange(b,a,a.text.length,c.text.length))},_isAutoUpdateNode:function(b){return"id"===
b.kind},_handleTextChange:function(b,a,c,e){e=1===e;1===c!==e&&(c=e?d.add(a.mathvariant,"italic"):d.remove(a.mathvariant,"italic"),b.updateAttributes(a.id,{mathvariant:c}))}})})},"MW/equations/editor/actions/MatrixAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils dojo/i18n!l10n/nls/equationEditorActions".split(" "),function(h,f,g,e,d,c,b){return h(e,{pluginId:"action.matrix",
pluginFamily:"actions",pluginDependencies:"action.inserttext api.attributes controller.cursor controller.editmanager external.actionservice model.cursor model.equation".split(" "),constructor:function(a,c,d,e,h,n,p){this._insertTextAction=a;this._attributes=c;this._cursorController=d;this._actionService=h;this._editManager=e;this._equation=p;this.own(c.observe("readonly",f.hitch(this,"_updateActions")));this.own(g.after(a,"onTextInserted",f.hitch(this,"_handleTextInserted"),!0));a=[{id:"equationeditor.matrix.insertcolumnleft",
enabled:!1,contextMenuGroup:"matrix",text:b.matrixInsertColumnLeft,callback:f.hitch(this,"_handleInsertColumn",-1)},{id:"equationeditor.matrix.insertcolumnright",enabled:!1,contextMenuGroup:"matrix",text:b.matrixInsertColumnRight,callback:f.hitch(this,"_handleInsertColumn",1)},{id:"equationeditor.matrix.deletecolumn",enabled:!1,contextMenuGroup:"matrix",text:b.matrixDeleteColumn,callback:f.hitch(this,"_handleDeleteColumn")},{id:"equationeditor.matrix.insertrowabove",enabled:!1,contextMenuGroup:"matrix",
text:b.matrixInsertRowAbove,callback:f.hitch(this,"_handleInsertRow",-1)},{id:"equationeditor.matrix.insertrowbelow",enabled:!1,contextMenuGroup:"matrix",text:b.matrixInsertRowBelow,callback:f.hitch(this,"_handleInsertRow",1)},{id:"equationeditor.matrix.deleterow",enabled:!1,contextMenuGroup:"matrix",text:b.matrixDeleteRow,callback:f.hitch(this,"_handleDeleteRow")},{id:"equationeditor.matrix.removerdelimiters",enabled:!1,contextMenuGroup:"matrix",text:b.matrixRemoveDelimiters,callback:f.hitch(this,
"_handleRemoveDelimiters")},{id:"equationeditor.matrix.usebrackets",enabled:!1,contextMenuGroup:"matrix",text:b.matrixUseBrackets,callback:f.hitch(this,"_handleDelimiters","bracket")},{id:"equationeditor.matrix.useparentheses",enabled:!1,contextMenuGroup:"matrix",text:b.matrixUseParentheses,callback:f.hitch(this,"_handleDelimiters","paren")}];h.loadActions(a);this.own(g.after(n,"onChange",f.hitch(this,"_updateActions")));this._updateActions()},_updateActions:function(){var a=!this._attributes.get("readonly")&&
this._equation.iterate({start:this._cursorController.getPosition().node,direction:d.UP,MathMatrix:function(a,b){c.isMatrix(a)&&b.stop(a)}}),b=!!a;"equationeditor.matrix.deletecolumn equationeditor.matrix.insertcolumnleft equationeditor.matrix.insertcolumnright equationeditor.matrix.insertrowbelow equationeditor.matrix.insertrowabove equationeditor.matrix.deleterow".split(" ").forEach(function(a){this._actionService.updateAction(a,{enabled:b,hideInContextMenu:!b})},this);var e=b&&c.isMatrixWithDelimiters(a,
"bracket"),a=b&&c.isMatrixWithDelimiters(a,"paren"),f=e||a;this._actionService.updateAction("equationeditor.matrix.removerdelimiters",{enabled:f,hideInContextMenu:!f});this._actionService.updateAction("equationeditor.matrix.useparentheses",{enabled:b&&!a,hideInContextMenu:!b||a});this._actionService.updateAction("equationeditor.matrix.usebrackets",{enabled:b&&!e,hideInContextMenu:!b||e})},_handleDeleteColumn:function(){var a=this._findMatrix();this._editManager.createBlock(f.hitch(this,function(b){var c=
a.matrix,d=a.row,e=a.column;if(1===c.cols)b.deleteNode(a.fullStructure.id);else{b.updateAttributes(c.id,{cols:c.cols-1});for(var f=0;f<c.rows;f+=1)b.deleteNode(c.children[c.cols*f+e].id);this._cursorController.setPosition({id:c.children[d*c.cols+Math.min(e,c.cols-1)].id,offset:0})}}))},_handleDeleteRow:function(){var a=this._findMatrix();this._editManager.createBlock(f.hitch(this,function(b){var c=a.matrix,d=a.row,e=a.column;if(1===c.rows)b.deleteNode(a.fullStructure.id);else{b.updateAttributes(c.id,
{rows:c.rows-1});for(var f=c.cols-1;0<=f;f-=1)b.deleteNode(c.children[c.cols*d+f].id);this._cursorController.setPosition({id:c.children[Math.min(d,c.rows-1)*c.cols+e].id,offset:0})}}))},_handleInsertColumn:function(a){var b=this._findMatrix();this._editManager.createBlock(f.hitch(this,function(c){var d=b.matrix,e=b.row,f=b.column+(-1===a?0:1);this._insertColumn(c,d,f,e);this._cursorController.setPosition({id:d.children[e*d.cols+f].id,offset:0})}))},_handleInsertRow:function(a){var b=this._findMatrix();
this._editManager.createBlock(f.hitch(this,function(c){var d=b.matrix,e=b.column,f=b.row+(-1===a?0:1);this._insertRow(c,d,e,f);this._cursorController.setPosition({id:d.children[f*d.cols+e].id,offset:0})}))},_findMatrix:function(){return this._equation.iterate({start:this._cursorController.getPosition().node,direction:d.UP,MathRow:f.hitch(this,function(a,b){var c=b.getParent();if("MathMatrix"===c.className){var d=b.getParentIndex(),e=d%c.cols,f=(d-e)/c.cols,g=this._equation.getParent(c);b.stop({fullStructure:g,
matrix:c,index:d,row:f,column:e})}})})},_handleTextInserted:function(a,b){if(!(","!==a&&";"!==a)){var d=this._equation.getParentAndIndex(b);if(!("MathRow"!==d.parent.className||d.parent.children.length!==d.index+1))if(d=this._equation.getParentAndIndex(d.parent),"MathMatrix"===d.parent.className){var e=d.parent;if(c.isMatrix(e)){var g=d.index%e.cols,h=(d.index-g)/e.cols;this._editManager.createBlock(f.hitch(this,function(c){c.deleteNode(b.id);","===a?(g===e.cols-1&&this._insertColumn(c,e,g+1,h),this._cursorController.setPosition({id:e.children[h*
e.cols+g+1].id,offset:0})):";"===a&&h===e.rows-1&&(this._insertRow(c,e,g,h+1),this._cursorController.setPosition({id:e.children[(h+1)*e.cols].id,offset:0}))}))}}}},_insertColumn:function(a,b,c,d){a.updateAttributes(b.id,{cols:b.cols+1});for(d=0;d<b.rows;d+=1)a.insertNode(b.id,b.cols*d+c,"MathRow",{"data-category":"placeholder"})},_insertRow:function(a,b,c,d){a.updateAttributes(b.id,{rows:b.rows+1});for(c=0;c<b.cols;c+=1)a.insertNode(b.id,b.cols*d+c,"MathRow",{"data-category":"placeholder"})},_maybeRemoveDelimiters:function(a,
b){var c=b.fullStructure;3===c.children.length&&(a.deleteNode(c.children[2].id),a.deleteNode(c.children[0].id))},_handleRemoveDelimiters:function(){var a=this._findMatrix();this._editManager.createBlock(f.hitch(this,function(b){this._maybeRemoveDelimiters(b,a)}))},_handleDelimiters:function(a){var b=this._findMatrix();this._editManager.createBlock(f.hitch(this,function(c){this._maybeRemoveDelimiters(c,b);var d=b.fullStructure;c.insertNode(d.id,0,"MathDelimiter",{"data-category":"static",symbolName:a+
"left"});c.insertNode(d.id,2,"MathDelimiter",{"data-category":"static",symbolName:a+"right"})}))}})})},"MW/equations/editor/actions/MouseAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/has dojo/on MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/PriorityHandlerChain".split(" "),function(h,f,g,e,d,c,b,a){return h(c,{pluginId:"action.mouse",pluginFamily:"actions",pluginDependencies:"controller.caret controller.cursor controller.mouse model.equation view.keyhandler view.rootnode".split(" "),
constructor:function(a,b,c,d,e,g){this._caretController=a;this._cursorController=b;this._equation=d;this._rootNode=g;this._keyHandler=e;c.addMouseDown(f.hitch(this,"_handleMouseDown"),-1);c.addMouseUp(f.hitch(this,"_handleMouseUp"),10);c.addMouseMove(f.hitch(this,"_handleMouseMove"),-1);c.addMouseDoubleClick(f.hitch(this,"_handleDoubleClick"),-1)},_handleDoubleClick:function(a){a=this._cursorController.getPosition();if("atom"===b.categorizeNode(a.node)){if(0===a.offset){var c=this._equation.getPreviousSibling(a.node);
if(c)return this._makeSelection(c,a.node)}else if(a.offset===a.node.text.length&&(c=this._equation.getNextSibling(a.node)))return this._makeSelection(a.node,c);this._cursorController.setPosition({id:a.id,offset:0});this._cursorController.setPosition({id:a.id,offset:a.node.text.length},!0)}},_makeSelection:function(a,c){var d=this._equation.getParentAndIndex(a),e=d.index,f=d.index+1;0<e&&b.qualifiesAsOperator(a)&&(e-=1);f<d.parent.children.length-1&&b.qualifiesAsOperator(c)&&(f+=1);this._cursorController.setPosition({id:d.parent.id,
offset:e});this._cursorController.setPosition({id:d.parent.id,offset:f+1},!0)},_handleMouseDown:function(a){var b=g.position(this._rootNode,!0);this._caretController.fromXY(a.pageX-b.x,a.pageY-b.y,a.shiftKey);0===a.button&&(this._primaryButtonPressed=e("safari"))},_handleMouseMove:function(a){if(this._primaryButtonPressed||1===(a.buttons&1))a.preventDefault(),(a=this._caretController.getPositionFromAbsoluteXY(a.pageX,a.pageY))&&this._cursorController.setPosition(a,!0)},_handleMouseUp:function(a){window.setTimeout(f.hitch(this._keyHandler,
"focus"),0);0===a.button&&(this._primaryButtonPressed=!1)}})})},"MW/equations/editor/utils/PriorityHandlerChain":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(h,f,g){return f(null,{constructor:function(){this._handlers=[]},add:function(e,d){var c={handler:e,priority:d||0};this._handlers.push(c);this._handlers.sort(function(b,a){return a.priority-b.priority});return{remove:g.hitch(this,function(){var b=this._handlers.indexOf(c);0<=b&&this._handlers.splice(b,
1)})}},fire:function(){var e=arguments;return h.some(this._handlers,function(d){return d.handler.apply(void 0,e)})}})})},"MW/equations/editor/actions/SmartEditingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Templates MW/equations/renderer/model/Symbols".split(" "),function(h,f,g,e,d,c,b){var a={"^":"superscript",_:"subscript","/":"frac"};return h(e,{pluginId:"action.smartediting",
pluginFamily:"actions",pluginDependencies:"action.inserttext api.attributes controller.cursor controller.editmanager controller.keyhandler helper.backspacetoundo helper.inserttemplate model.equation".split(" "),constructor:function(b,d,e,h,n,p,r,s){this._attributes=d;this._insertTemplateHelper=r;this._cursorController=e;this._editmanager=h;this._equation=s;this._backspaceToUndoHelper=p;Object.keys(a).forEach(function(a){this.own(n.add(a,f.hitch(this,"_handleSmartEdit",a)))},this);this.own(g.after(b,
"onTextInserted",f.hitch(this,"_handleTextInserted"),!0));this._templates=c.getById()},_handleSmartEdit:function(b){if(!this._cursorController.hasSelection()||this._attributes.get("readonly"))return!1;var c=a[b];this._editmanager.createBlock(f.hitch(this,function(a){this._insertTemplateHelper.insertTemplate(a,this._templates[c].template)}));return!0},_handleTextInserted:function(b,c){var e=a[b];e&&(this._editmanager.createBlock(f.hitch(this,function(a){var b=this._findTransferPart(c);if(b&&b.left===
b.right-1){var f=b.node.children[b.left];if("MathScript"===f.className){var g={subscript:1,superscript:2}[e];if(g&&!f.children[g]){a.updateAttributes(f.id,{children:f.children.slice(0,g).concat(f.children.slice(g+1))});b=a.insertNode(f.id,g,"MathRow",{"data-category":d.CATEGORY.PLACEHOLDER_ROW});this._cursorController.setPosition({id:b.id,offset:0});a.deleteNode(c.id);return}}}f=this._templates[e].template;a.deleteNode(c.id);this._insertTemplateHelper.insertTemplate(a,f,b)})),this._backspaceToUndoHelper.start())},
_findTransferPart:function(a){var b=this._equation.getParentAndIndex(a),c=this._equation.getPreviousSibling(a);if(c)return a=b.index-1,this._isParenthesis(c)&&(c=this._equation.getPreviousSibling(c),d.qualifiesAsIdentifier(c)&&(a-=1)),{node:b.parent,left:a,right:b.index}},_isParenthesis:function(a){return"MathRow"===a.className&&2<a.children.length&&"MathDelimiter"===a.children[0].className&&"parenleft"===a.children[0].symbolName&&"MathDelimiter"===a.children[a.children.length-1].className&&"parenright"===
a.children[a.children.length-1].symbolName}})})},"MW/equations/editor/actions/SmartParensAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/Templates".split(" "),function(h,f,g,e,d,c,b){var a={"(":["parenleft","parenright"],"[":["bracketleft","bracketright"],"{":["braceleft","braceright"]};return h(e,{pluginId:"action.smartparens",
pluginFamily:"actions",pluginDependencies:"action.inserttext api.attributes controller.cursor controller.editmanager controller.keyhandler helper.backspacetoundo helper.insert helper.inserttemplate model.cursor model.equation".split(" "),constructor:function(a,c,d,e,h,p,r,s,t,u){this._attributes=c;this._insertTextAction=a;this._insertTemplateHelper=s;this._backspaceToUndoHelper=p;this._insertHelper=r;this._cursorController=d;this._editmanager=e;this._equation=u;this.own(g.after(a,"onTextInserted",
f.hitch(this,"_handleTextInserted"),!0));this.own(g.after(t,"onChange",f.hitch(this,"_handleCursorMove")));this._templates=b.getById();this.own(h.add("(",f.hitch(this,"_handleParen","(")));this.own(h.add("[",f.hitch(this,"_handleParen","[")));this.own(h.add("{",f.hitch(this,"_handleParen","{")));this._smartLeave=[]},_handleParen:function(a){if(!this._cursorController.hasSelection()||this._attributes.get("readonly"))return!1;var b={"(":"parentheses","[":"brackets","{":"braces"}[a];this._editmanager.createBlock(f.hitch(this,
function(a){a=this._insertTemplateHelper.insertTemplate(a,this._templates[b].template);a=this._findStructure(this._equation.getById(a[0].id));this._enableSmartLeave(a)}));return!0},_handleTextInserted:function(b,c){var d=a[b];if(d)return this._insertAutoCompleteParen(d,c);"MathDelimiter"===c.className&&this._checkAutoSkipParen(c)},_handleCursorMove:function(){if(0!==this._smartLeave.length){var a=this._cursorController.getPosition();this._equation.iterate({from:a.node,direction:d.UP,structure:f.hitch(this,
function(a,b){var c=this._smartLeave.indexOf(a.id);0<=c&&(this._smartLeave.splice(c+1),b.stop())}),MathRoot:f.hitch(this,function(){this._smartLeave=[]})})}},_enableSmartLeave:function(a){this._smartLeave.push(a.id)},_checkAutoSkipParen:function(a){if(0!==this._smartLeave.length){var b=this._equation.getParentAndIndex(a);if(b.index===b.parent.children.length-1){var c=b.parent.parent;this._smartLeave[this._smartLeave.length-1]===c.id&&(this._smartLeave.pop(),this._editmanager.createBlock(f.hitch(this,
function(d){d.deleteNode(a.id);b=this._equation.getParentAndIndex(c);this._cursorController.setPosition({id:b.parent.id,offset:b.index+1})})))}}},_insertAutoCompleteParen:function(a,b){this._editmanager.createBlock(f.hitch(this,function(c){var d=this._equation.getParentAndIndex(b),d=this._insertHelper.insertTemplate(c,["MathRow",{"data-category":"structure"},[["MathDelimiter",{symbolName:a[0],"data-category":"static"}],["MathRow",{"data-category":"placeholder","data-cursor":0}],["MathDelimiter",{symbolName:a[1],
"data-category":"static"}]]],d.parent,d.index),d=this._findStructure(this._equation.getById(d[0].id));this._enableSmartLeave(d);c.deleteNode(b.id)}));this._backspaceToUndoHelper.start()},_findStructure:function(a){return this._equation.iterate({from:a,direction:d.UP,structure:function(a,b){b.stop(a)}})}})})},"MW/equations/editor/actions/SmartSymbolsAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/Templates MW/equations/renderer/model/Symbols".split(" "),
function(h,f,g,e,d,c){var b={mid:{mid:"parallel","\x3d":"models","-":"vdash"},"~":{"\x3d":"neq"},"-":{"\x3e":"rightarrow",mid:"dashv"},"\x3c":{"\x3d":"leq","\x3e":"neq","-":"leftarrow"},"\x3d":{"\x3e":"Rightarrow"},"\x3e":{"\x3d":"geq"},leq:{"\x3e":"Leftrightarrow"},"!":{"\x3d":"neq","\x3c":"notlt","\x3e":"notgt"},notlt:{"\x3d":"notleq"},notgt:{"\x3d":"notgeq"},leftarrow:{"-":"longleftarrow","\x3e":"leftrightarrow"},longleftarrow:{"\x3e":"longleftrightarrow"}};return h(e,{pluginId:"action.smartsymbols",
pluginFamily:"actions",pluginDependencies:["action.inserttext","controller.editmanager","model.equation"],constructor:function(a,b,c){this._editmanager=b;this._equation=c;this.own(g.after(a,"onTextInserted",f.hitch(this,"_handleTextInserted"),!0));this._templates=d.getById()},_handleTextInserted:function(a,c){if("symbol"===c.kind){var d=this._equation.getPreviousSibling(c);if(d&&"symbol"===d.kind){var e=d.symbolName||d.text,g=b[e],e=c.symbolName||c.text;(g=g&&g[e])&&this._editmanager.createBlock(f.hitch(this,
function(a){a.deleteNode(c.id);a.updateAttributes(d.id,{symbolName:g})}))}}}})})},"MW/equations/editor/actions/TabAction":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/EquationPlugin","MW/equations/editor/utils/NodeUtils"],function(h,f,g,e,d){return f(e,{pluginId:"action.tab",pluginFamily:"actions",pluginDependencies:["controller.cursor","controller.keyhandler","external.actionservice","model.equation"],constructor:function(c,b,a,d){this._cursorController=
c;this._equation=d;c=[{id:"equationeditor.jumptoplaceholder",key:"tab",keyPriority:-1,enabled:!0,callback:g.hitch(this,"_handleTab",!0)},{id:"equationeditor.jumptopreviousplaceholder",key:"shift_tab",keyPriority:-1,enabled:!0,callback:g.hitch(this,"_handleTab",!1)}];a.loadActions(c)},_handleTab:function(c){if(c=this._searchPlaceholderAtom(c))return this._cursorController.setPosition({id:c.id,offset:0}),!0},_searchPlaceholderAtom:function(c){var b,a,d=this._cursorController.getPosition();this._equation.iterate({"placeholder-atom":function(e,
f){if(d.id!==e.id){if(a||!c)b=e;a&&c?f.stop():b||(b=e)}},all:function(e,f){d.id===e.id&&(a=!0,b&&!c&&f.stop())}});return b}})})},"MW/equations/editor/actions/TabLeavesStructureAction":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),function(h,f,g,e,d,c){return f(e,{pluginId:"action.tableavesstructure",pluginFamily:"actions",pluginDependencies:["controller.cursor",
"controller.keyhandler","external.actionservice","model.equation"],constructor:function(b,a,c,d){this._cursorController=b;this._equation=d;b=[{id:"equationeditor.leavestructure",enabled:!0,callback:g.hitch(this,"_leaveStructure")}];c.loadActions(b);this.own(a.add("tab",g.hitch(this,"_leaveStructure"),-5))},_leaveStructure:function(){var b=this._cursorController.getPosition();this._equation.iterate({start:b.node,direction:d.UP,structure:g.hitch(this,function(a,b){this._cursorController.setPosition({id:b.getParent().id,
offset:b.getParentIndex()+1});b.stop()})});return!0}})})},"MW/equations/editor/actions/TextFormattingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils".split(" "),function(h,f,g,e,d,c){return h(e,{pluginId:"action.textformatting",pluginFamily:"actions",pluginDependencies:"action.inserttext controller.cursor controller.editmanager controller.selection external.actionservice helper.insert model.cursor model.equation".split(" "),
constructor:function(b,a,c,d,e,h,n,p){this._insertHelper=h;this._cursorController=a;this._editmanager=c;this._selectionController=d;this._actionService=e;this._equation=p;b=[{id:"equationeditor.format.bold",enabled:!1,key:"ctrl_b",callback:f.hitch(this,"_handleBold")},{id:"equationeditor.format.italic",enabled:!1,key:"ctrl_i",callback:f.hitch(this,"_handleItalic")}];e.loadActions(b);this.own(g.after(h,"prepareTextAttributes",f.hitch(this,"_handlePrepareTextAttributes")));this.own(g.after(n,"onChange",
f.hitch(this,"_handleCursorMove")));this.own(g.after(e,"onRemoteActionChange",f.hitch(this,"_handleActionChange"),!0))},_handleActionChange:function(b){if("selected"===b.key)switch(b.id){case "equationeditor.format.bold":this._applyStyle("bold",!b.newValue);break;case "equationeditor.format.italic":this._applyStyle("italic",!b.newValue)}},_handleCursorMove:function(){var b=!1,a=!1,d=!1,e=!1,f=!1;if(this._cursorController.hasSelection())this._selectionController.iterateSelection({atom:function(c,g){if("id"===
c.kind){var h=c.mathvariant?c.mathvariant.split("-"):[];a=(b=b||0<=h.indexOf("bold"))||0<=h.indexOf("italic");d=d||0>h.indexOf("bold");e=e||0>h.indexOf("italic");b&&d&&(a&&e)&&g.stop();f=!0}}}),b=!d,a=!e;else{var g=this._cursorController.getPosition().node;"atom"===c.categorizeNode(g)&&"id"===g.kind&&(g=g.mathvariant?g.mathvariant.split("-"):[],b=0<=g.indexOf("bold"),a=0<=g.indexOf("italic"),f=!0)}this._actionService.updateAction("equationeditor.format.bold",{enabled:f,selected:b&&f});this._actionService.updateAction("equationeditor.format.italic",
{enabled:f,selected:a&&f})},_handlePrepareTextAttributes:function(b,a){if("id"!==b.kind)return b;b.mathvariant=b.mathvariant||a&&a.mathvariant||"italic";return b},_handleBold:function(){this._applyStyleFromAction("equationeditor.format.bold","bold");return!0},_handleItalic:function(){this._applyStyleFromAction("equationeditor.format.italic","italic");return!0},_applyStyleFromAction:function(b,a){var c=this._actionService.getAction(b),d=c.selected;this._actionService.updateAction(b,{selected:!c.selected});
this._applyStyle(a,d)},_applyStyle:function(b,a){var c=this._cursorController.hasSelection();this._editmanager.createBlock(f.hitch(this,function(d){if(c)this._applyStyleToSelection(d,b,a);else{var e=this._cursorController.getPosition();this._applyStyleToAtom(d,b,a,e.node)}}))},_applyStyleToSelection:function(b,a,c){this._selectionController.iterateSelection({atom:f.hitch(this,"_applyStyleToAtom",b,a,c)})},_applyStyleToAtom:function(b,a,c,e){if("id"===e.kind){var f=e.mathvariant,f=c?d.remove(f,a):
d.add(f,a);b.updateAttributes(e.id,{mathvariant:f})}}})})},"MW/equations/editor/actions/UndoRedoAction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/EquationPlugin"],function(h,f,g,e){return h(e,{pluginId:"action.undoredo",pluginDependencies:["controller.undoredo","external.actionservice"],constructor:function(d,c){this._undoRedoController=d;this._actionService=c;var b=[{id:"equationeditor.undo",enabled:d.canUndo(),key:"ctrl_z",platformKey:{mac:"meta_z"},
callback:function(){d.undo();return!0}},{id:"equationeditor.redo",enabled:d.canRedo(),key:"ctrl_y",platformKey:{mac:"meta_shift_z"},callback:function(){d.redo();return!0}}];c.loadActions(b);this.own(g.after(d,"onChange",f.hitch(this,"_updateAttributes")))},_updateAttributes:function(){this._actionService.updateAction("equationeditor.undo",{enabled:this._undoRedoController.canUndo()});this._actionService.updateAction("equationeditor.redo",{enabled:this._undoRedoController.canRedo()})}})})},"MW/equations/editor/actions/VisualCursorAction":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/NodeUtils"],function(h,f,g,e,d){return f(null,{pluginId:"action.visualcursor",pluginFamily:"actions",pluginDependencies:["controller.cursor","controller.selection","external.actionservice","model.equation"],constructor:function(c,b,a,d){this._cursorController=c;this._selectionController=b;this._equation=d;c=[{id:"equationeditor.left.visual",enabled:!0,keyPriority:1,key:"left",callback:g.hitch(this,
"_handleLinearMove",-1)},{id:"equationeditor.selectleft.visual",enabled:!0,keyPriority:1,key:"shift_left",callback:g.hitch(this,"_handleLinearMove",-1,!0)},{id:"equationeditor.right.visual",enabled:!0,keyPriority:1,key:"right",callback:g.hitch(this,"_handleLinearMove",1)},{id:"equationeditor.selectright.visual",enabled:!0,keyPriority:1,key:"shift_right",callback:g.hitch(this,"_handleLinearMove",1,!0)}];a.loadActions(c)},_handleLinearMove:function(c,b){if(this._cursorController.hasSelection())return!1;
var a,e=this._cursorController.getPosition(),f;a=e.node;e=e.offset;d.categorizeNode(a)===d.CATEGORY.ATOM?-1===c&&0===e?(a=this._equation.getParentAndIndex(a),f=a.parent,e=a.index):1===c&&e===a.text.length&&(a=this._equation.getParentAndIndex(a),f=a.parent,e=a.index+1):d.categorizeNode(a)===d.CATEGORY.PLACEHOLDER_ATOM?(a=this._equation.getParentAndIndex(a),f=a.parent,e=-1===c?0:1):d.categorizeNode(a)===d.CATEGORY.PLACEHOLDER_ROW&&(f=a);var g;f&&(g=this._moveInRow(f,e,c));if(g)this._cursorController.setPosition(g,
b);else return!1;return!0},_moveInRow:function(c,b,a){var e;if(-1===a&&0===b||1===a&&b===c.children.length){b=this._equation.getParentAndIndex(c);c=b.parent;var f=b.index;c&&(b="_leaveRowIn"+c.className,this[b]&&(e=this[b].call(this,c,a,f)));return e}b+=-1===a?-1:0;e=c.children[b];if(d.categorizeNode(e)===d.CATEGORY.STATIC)return 1===a&&(b+=1),this._moveInRow(c,b,a);b="_enter"+e.className;if(this[b])return this[b].call(this,e,a)},_enterMathRow:function(c,b){return d.categorizeNode(c)===d.CATEGORY.PLACEHOLDER_ROW?
{id:c.id,offset:1===b?0:-1}:this._moveInRow(c,-1===b?c.children.length:0,b)},_leaveRowInMathRow:function(c,b,a){1===b&&(a+=1);return d.categorizeNode(c)===d.CATEGORY.PLACEHOLDER_ROW?{id:c.id,offset:a}:this._moveInRow(c,a,b)},_enterMathFraction:function(c,b){return this._tryChildren(c,b,[0,1])},_leaveRowInMathFraction:function(c,b,a){return c.bevelled&&(1===b&&0===a||-1===b&&1===a)?this._tryChildren(c,b,[1-a]):this._leaveNode(c,b)},_enterMathScript:function(c,b){return c.isStacked()||1===b?this._tryChildren(c,
b,[0,2,1]):this._tryChildren(c,b,[2,1,0])},_leaveRowInMathScript:function(c,b,a){if(c.isStacked())return this._leaveNode(c,b);if(1===b)return 0===a?this._tryChildren(c,b,[2,1]):this._leaveNode(c,b);if(-1===b)return 0!==a?this._tryChildren(c,b,[0]):this._leaveNode(c,b)},_enterMathRadical:function(c,b){return-1===b?this._tryChildren(c,b,[0,1]):this._tryChildren(c,b,[1,0])},_leaveRowInMathRadical:function(c,b,a){return 1===b?1===a?this._tryChildren(c,b,[0]):this._leaveNode(c,b):0===a?this._tryChildren(c,
b,[1]):this._leaveNode(c,b)},_enterMathMultiScript:function(c,b){var a=this._getMultiScriptPositions(c,b);return this._tryChildren(c,b,a)},_leaveRowInMathMultiScript:function(c,b,a){var d=this._getMultiScriptPositions(c,b);a=d.lastIndexOf(a);return this._tryChildren(c,b,d.slice(a+2))},_getMultiScriptPositions:function(c,b){for(var a=[],d=2*c.numPostPairs+1;d<c.children.length;d+=2)a.push(d+1),a.push(d);a.push(0);a.push(0);for(d=1;d<2*c.numPostPairs;d+=2)a.push(d),a.push(d+1);-1===b&&a.reverse();return a},
_leaveNode:function(c,b){var a=this._equation.getParentAndIndex(c),e=a.index+(-1===b?0:1),a=a.parent;return d.categorizeNode(a)!==d.CATEGORY.PLACEHOLDER_ROW?this._moveInRow(a,e,b):{id:a.id,offset:e}},_tryChildren:function(c,b,a){for(var e=0;e<=a.length;e+=1){var f=c.children[a[e]];if(f&&d.categorizeNode(f)!==d.CATEGORY.STATIC)return this._enterMathRow(f,b)}return this._leaveNode(c,b)}})})},"MW/equations/editor/api/AttributesAPI":function(){define(["dojo/_base/declare","dojo/aspect"],function(h,f){return h(null,
{pluginId:"api.attributes",pluginFamily:"api",pluginDependencies:[],constructor:function(){this._values={}},set:function(f,e){this._values[f]!==e&&this._set(f,e)},get:function(f){return this._values[f]},_set:function(f,e){this._values[f]=e},observe:function(g,e){return f.after(this,"_set",function(d,c){d===g&&e.call(null,c)},!0)}})})},"MW/equations/editor/api/CursorAPI":function(){define(["dojo/_base/declare","dojo/aspect"],function(h,f){return h(null,{pluginId:"api.cursor",pluginFamily:"api",pluginDependencies:["view.caret"],
constructor:function(f){this._caret=f},hide:function(){this._caret.hide("api")},show:function(f){this._caret.show("api")}})})},"MW/equations/editor/api/EquationAPI":function(){define(["dojo/_base/declare"],function(h){return h(null,{pluginId:"api.equation",pluginFamily:"api",pluginDependencies:["controller.editmanager","model.equation"],constructor:function(f,g){this._editController=f;this._equation=g},fromMathML:function(f){this._editController.setEquation(f)},fromTeX:function(f){this._editController.setEquation(f,
"tex")},toMathML:function(){return this._equation.serializeToMathMl()},toTeX:function(){return this._equation.serializeToTeX()},setDisplayStyle:function(f){this._equation.getRoot().inline!==!f&&(this._equation.getRoot().inline=!f,this._equation.changed())},getDisplayStyle:function(){return!this._equation.getRoot().inline}})})},"MW/equations/editor/controller/CaretController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/query MW/equations/editor/utils/CaretUtilities MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return f(l,{pluginId:"controller.caret",pluginDependencies:"api.attributes controller.cursor controller.selection model.cursor model.equation view.caret view.helper view.renderer view.rootnode view.selection".split(" "),constructor:function(a,b,c,d,f,h,k,l,m,q){this._attributes=a;this.own(a.observe("active",g.hitch(this,"_handleActiveChange")));this.own(a.observe("disabled",g.hitch(this,"_handleDisabledChange")));this.own(a.observe("readonly",g.hitch(this,"_handleReadonlyChange")));
this._cursorController=b;this._selectionController=c;this._cursor=d;this._equation=f;this._caret=h;this._rootNode=m;this._viewHelper=k;this._selection=q;this.own(e.after(this._cursor,"onChange",g.hitch(this,"redraw")));this.own(e.after(l,"onRedraw",g.hitch(this,"redraw")))},_handleActiveChange:function(a){a?this._caret.show("blurred"):this._caret.hide("blurred")},_handleDisabledChange:function(a){a?(this._caret.hide("disabled"),this._selection.hide()):(this._caret.show("disabled"),this.redraw())},
_handleReadonlyChange:function(a){this._caret.setReadonly(a)},beforeCaretRedraw:function(){},fromXY:function(a,b,c){(a=this.getPositionFromXY(a,b))&&this._cursorController.setPosition(a,c)},getPositionFromXY:function(a,c){var d=b.position(this._rootNode,!0);return this.getPositionFromAbsoluteXY(a+d.x,c+d.y)},_getScrollOffset:function(){return{x:window.hasOwnProperty("scrollX")?window.scrollX:document.documentElement.scrollLeft,y:window.hasOwnProperty("scrollY")?window.scrollY:document.documentElement.scrollTop}},
getPositionFromAbsoluteXY:function(a,b){var c=this._viewHelper.getRootGeometry();a<c.x?a=c.x:a>c.x+c.w-1&&(a=c.x+c.w-1);b<c.y?b=c.y:b>c.y+c.h-1&&(b=c.y+c.h-1);c=this._getScrollOffset();if(c=document.elementFromPoint(a-c.x,b-c.y)){if(d.contains(c,"selection")||d.contains(c,"cursor")){var e=c.style.display;c.style.display="none";var f=this.getPositionFromAbsoluteXY(a,b);c.style.display=e;return f}if(this._rootNode.contains(c)){if(q.isEmptyEquation(this._equation.getRoot()))return{id:this._equation.getRoot().children[0].id,
offset:0};this._searched=[];c=this._searchFromNode(c,a,b);this._searched=void 0;return c&&this._cursorController.fixPosition(c)}}},drawCaretAt:function(a){if(this._viewHelper.isAttachedToDocument())return a=this._getCoordinatesFromPosition(a),this._caret.setXY(a.x,a.y,a.height),a},_searchFromNode:function(a,c,d){for(var e=[];a&&a!==this._rootNode;){e=e.concat(this._searchChildren(a,c,d));if(0<e.length){var f=b.position(a,!0);if(c>f.x&&d>f.y&&c<f.x+f.w&&d<f.y+f.h)break}this._searched.push(a);a=a.parentNode}if(0<
e.length)return a.id&&(a=this._equation.getById(a.id),"placeholder"!==q.categorizeNode(a)&&(a=this._equation.iterate({from:a,direction:m.UP,placeholder:function(a,b){b.stop(a)}}))&&e.push(this._findCursorPositionInRow(a,c,d))),e=e.sort(function(a,b){return a.distance-b.distance}),{id:e[0].id,offset:e[0].offset}},_searchChildren:function(a,b,c){var d,e,f=[];if(a.id){e=this._equation.getById(a.id);if(!this._nodeClickable(e))return[];d=q.categorizeNode(e);if("atom"===d)return[this._findCursorPositionInAtom(e,
b,c)];"placeholder"===d&&f.push(this._findCursorPositionInRow(e,b,c))}0<=a.children.length&&(a=this._getSearchableChildren(a),a=this._sortByDistance(a,b,c),h.forEach(a,function(a){f=f.concat(this._searchChildren(a.node,b,c))},this));return f},_getSearchableChildren:function(a){return h.filter(a.children,function(a){if(0<=this._searched.indexOf(a))return!1;if(!a.id)return!0;a=this._equation.getById(a.id);return this._nodeClickable(a)},this)},_sortByDistance:function(a,c,d){return h.map(a,function(a){var e=
b.position(a,!0);return{node:a,distance:this._distanceTo(e,c,d)}},this).sort(function(a,b){return a.distance-b.distance})},_distanceTo:function(a,b,c){var d=0,e=0;b<=a.x?d=a.x-b:b>=a.x+a.w&&(d=b-(a.x+a.w));c<=a.y?e=a.y-c:c>=a.y+a.h&&(e=c-(a.y+a.h));return d+e},_nodeClickable:function(a){for(;a;){if("static"===q.categorizeNode(a))return!1;a=this._equation.getParent(a)}return!0},_findCursorPositionInRow:function(a,b,c){if(0===a.children.length){var d=this._viewHelper.getNodeGeometry(a);return{id:a.id,
offset:0,distance:this._distanceTo(g.mixin(d,{w:1}),b,c)}}var e;for(e=0;e<a.children.length&&!(d=this._viewHelper.getNodeGeometry(a.children[e]),b<d.x+d.w/2);e+=1);return{id:a.id,offset:e,distance:this._distanceTo(g.mixin(d,{w:1,x:e<a.children.length?d.x:d.x+d.w}),b,c)}},_findCursorPositionInAtom:function(a,b,c){var d=this._viewHelper.getNodeGeometry(a),e=b-d.x,e=Math.min(Math.max(0,0<d.w?e/d.w:0),1),f=Math.max(0,Math.floor((a.text.length+1)*e));f>a.text.length&&(f=a.text.length);return{id:a.id,offset:f,
distance:this._distanceTo(g.mixin(d,{w:1,x:d.x+d.w*e}),b,c)}},redraw:function(){if(!this._attributes.get("disabled")){this.beforeCaretRedraw();var a=this._cursor.getPosition();if((a=this.drawCaretAt(a))&&this._cursor.hasSelection()){var b=this._selectionController.getSelectionSpan(),c=k.coordinatesFromSelection(b,this._rootNode);b.reversed?(c.w=c.w+c.x-(a.x-1),c.x=a.x+1):c.w=a.x-c.x;this._selection.show();this._selection.set(c.x,c.y,c.w,c.h)}else this._selection.hide()}},_getCoordinatesFromPosition:function(a){return k.coordinatesFromPosition(a,
this._rootNode)||{x:0,y:0,height:0}}})})},"MW/equations/editor/utils/CaretUtilities":function(){define(["dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/query","MW/equations/editor/utils/NodeUtils"],function(h,f,g,e,d){function c(b,c){var d=e("*[id\x3d'"+b.id+"']",c);if(0!==d.length){var d=d[0],g=b.offset;if(0<d.children.length||0===d.childNodes.length)0===g?d=0===d.childNodes.length?a(d):a(d.firstElementChild):(d=d.childNodes[g-1])?(d=h.place("\x3cspan\x3e\x26#x200b;\x3c/span\x3e",
d,"after"),g=a(d),h.destroy(d),d=g):d=void 0;else if(0===g)d=a(d);else{var n=d,d=n.cloneNode();n.parentNode.replaceChild(d,n);d.innerHTML="";var p=h.create("span",{textContent:n.textContent.substr(0,g)},d);h.create("span",{textContent:n.textContent.substr(g)},d);g=a(p,!0);d.parentNode.replaceChild(n,d);d=g}d&&(g=f.position(c,!0),d.x-=g.x,d.y-=g.y);return d}}function b(b,c){var d=e("*[id\x3d'"+b.id+"']",c);if(0!==d.length){var d=a(d[0]),g=f.position(c,!0);d.x-=g.x;d.y-=g.y;return d}}function a(a,b){var c=
a;a=c;var d=!1;0===a.childNodes.length&&(d=!0,a=c.cloneNode(),c.parentNode.replaceChild(a,c),a.innerHTML="\x26nbsp;");var e=f.position(a,!0);d&&(a.parentNode.replaceChild(c,a),a=c);c=g.getComputedStyle(a);e.x+=parseInt(c.paddingLeft,10);e.w-=parseInt(c.paddingLeft,10);d&&(e.w=0);e.w+=parseInt(c.marginLeft,10);e.x-=parseInt(c.marginLeft,10);return{x:e.x+(b?e.w:0),y:e.y,w:e.w,h:e.h,height:e.h}}return{coordinatesFromNode:b,coordinatesFromPosition:c,coordinatesFromSelection:function(a,e){var f=a.node;
if("atom"===d.categorizeNode(f)){var g=c({id:a.id,offset:a.left},e)||{x:0,y:0,height:0},h=c({id:a.id,offset:a.right},e)||{x:0,y:0,height:0},f=Math.min(g.x,h.x),p=Math.min(g.y,h.y),r=Math.max(g.height,h.height),g=Math.max(g.x,h.x)-f;return{x:f,y:p,w:g,h:r}}for(var f=f.children,r=[],g=[],h=[],s=[],t=a.left;t<a.right&&t<f.length;t+=1)p=b(f[t],e),r.push(p.x),h.push(p.x+p.w),g.push(p.y),s.push(p.y+p.h);p={x:Math.min.apply(void 0,r),y:Math.min.apply(void 0,g)};p.w=Math.max.apply(void 0,h)-p.x;p.h=Math.max.apply(void 0,
s)-p.y;return p}}})},"MW/equations/editor/controller/ContextMenuController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationContextMenuModel MW/equations/editor/utils/EquationPlugin".split(" "),function(h,f,g,e,d,c,b){return h(b,{pluginId:"controller.contextmenu",pluginDependencies:"controller.caret controller.focus controller.mouse controller.selection external.actionservice external.contextmenugenerator model.equation view.rootnode".split(" "),
constructor:function(a,b,d,e,h,n,p,r){this._caretController=a;this._focusController=b;this._actionService=h;this._selectionController=e;this._equation=p;this._rootNode=r;d.addMouseDown(f.hitch(this,"_handleMouseDown"),1);if(this._contextMenu=n.createContextMenu(this._rootNode,new c(this._actionService))){var s;g.after(this._contextMenu,"onOpen",f.hitch(this,function(){s=s||this._focusController.add("context-menu")}));g.after(this._contextMenu,"onClose",function(){s&&s.remove();s=null})}},_handleMouseDown:function(a){if(2===
(a.button&2)&&this._selectionController.hasSelection()&&(a=this._caretController.getPositionFromAbsoluteXY(a.pageX,a.pageY))){a=d.logicalFromPosition(a,this._equation.getRoot());var b=this._selectionController.getSelectionLogical();return b.left<=a||a<=b.right}},destroy:function(){this._contextMenu&&this._contextMenu.destroy()}})})},"MW/equations/editor/utils/EquationContextMenuModel":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/contextmenu/DocumentContextMenuModel"],
function(h,f,g){return h(g,{_getActionInfo:function(e){var d=this._actionService.getAction(e);if(d&&!d.hideInContextMenu)return this.inherited(arguments)}})})},"MW/equations/editor/controller/CursorController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),function(h,f,g,e,d,c){return f(null,{pluginId:"controller.cursor",pluginDependencies:["controller.selection",
"model.cursor","model.equation"],constructor:function(b,a,c){this._selectionController=b;this._cursor=a;this._equation=c;this.setLogical(0)},availableCursorPositions:function(){var b=this._equation.getRoot();return e.availableCursorPosition(b)},setLogical:function(b,a){0>b&&(b=0);var c=this._equation.getRoot(),d=e.positionFromLogical(b,c);d||(b=e.availableCursorPosition(c)-1,d=e.positionFromLogical(b,c));this.setPosition(d,a)},getLogical:function(){var b=this._cursor.getPosition();return e.logicalFromPosition(b,
this._equation.getRoot())},getAnchorLogical:function(){var b=this._cursor.getAnchor();return b&&e.logicalFromPosition(b,this._equation.getRoot())},hasSelection:function(){return this._cursor.hasSelection()},setPosition:function(b,a){b={id:b.id,offset:b.offset};var d=this._equation.getById(b.id);0>b.offset&&(b.offset+=e.nodeLength(d)+1);a&&(c.isMultiLineEquation(this._equation.getRoot())&&(b=this._fixPositionInLine(b)),d=this._cursor.hasSelection()?this._cursor.getAnchor():this._cursor.getPosition(),
d=this._selectionController.getSpan(d,b),b={id:d.id,offset:d.reversed?d.left:d.right},this._equation.getById(b.id));b=this.fixPosition(b);this._cursor.setPosition(b,a)},setSelectionLogical:function(b,a){this._cursor.pauseEvents("selecting");this.setLogical(b);this.setLogical(a,!0);this._cursor.unpauseEvents("selecting")},_fixPositionInLine:function(b){var a=this.getPosition(),c=this._equation.getById(b.id),a=this._getLineOf(a.node),c=this._getLineOf(c);if(a!==c){var d=this._equation.getRoot().children[0].children[0].children[a];
b.id=d.id;b.offset=a<c?d.children.length:0;b=this.fixPosition(b)}return b},_getLineOf:function(b){return this._equation.iterate({from:b,direction:d.UP,MathMatrix:g.hitch(this,function(a,b){var c=this._equation.getParentAndIndex(a);"MathRoot"===this._equation.getParent(c.parent).className&&(c=this._equation.getParentAndIndex(b.getLastNode()),b.stop(c.index))})})||0},fixPosition:function(b){var a=this._equation.getById(b.id),d=c.categorizeNode(a);if("placeholder"===d)b=e.adaptPositionToAtoms(b,a.children[b.offset-
1],a.children[b.offset]);else if("atom"===d)if(0===b.offset){if((d=this._equation.getPreviousSibling(a))&&"atom"===c.categorizeNode(d)&&e.shouldCursorMergeToLeft(d,a))b.id=d.id,b.offset=d.text.length}else if(b.offset===a.text.length&&(d=this._equation.getNextSibling(a))&&"atom"===c.categorizeNode(d)&&!e.shouldCursorMergeToLeft(a,d))b.id=d.id,b.offset=0;return b},getPosition:function(){var b=this._cursor.getPosition();b.node=this._equation.getById(b.id);return b}})})},"MW/equations/editor/controller/EditManager":function(){define(["dojo/_base/declare",
"MW/equations/editor/controller/EditBlock","MW/equations/editor/model/UndoRedoStep","mw-log/Log"],function(h,f,g,e){return h(null,{pluginId:"controller.editmanager",pluginDependencies:["controller.cursor","model.cursor","model.equation","controller.placeholderatomcontroller","controller.livecursor"],constructor:function(d,c,b){this._cursorController=d;this._equationModel=b;this._cursor=c},createBlock:function(d){this.beforeBlock();var c=this._cursor.getState();this._equationModel.pauseEvents();this._cursor.pauseEvents();
var b=[],a=new f(this._equationModel,b);try{d.call(void 0,a)}catch(h){e.error("Error while executing block: "+h)}this._equationModel.unpauseEvents();this._cursor.unpauseEvents();0<b.length&&(d=new g(b,c,this._cursor.getState(),this._cursor,this._equationModel),this.onNewStep(d));this.afterBlock()},beforeBlock:function(){},afterBlock:function(){},onNewStep:function(d){},onReset:function(){},setEquation:function(d,c){this._equationModel.pauseEvents();this._cursor.pauseEvents();this.onReset();this._equationModel.setEquation(d,
c);this._cursorController.setLogical(0);this._equationModel.unpauseEvents();this._cursor.unpauseEvents()}})})},"MW/equations/editor/controller/EditBlock":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/commands/DeleteNodeCommand MW/equations/editor/commands/InsertNodeCommand MW/equations/editor/commands/MoveChildrenCommand MW/equations/editor/commands/ReplaceTextCommand MW/equations/editor/commands/UpdateAttributesCommand".split(" "),function(h,f,g,e,d,c,b){return h(null,
{constructor:function(a,b){this._equation=a;this._actions=b},deleteNode:function(a){this._equation.beforeDeleteNode(this,a);this._storeAndExecute(new g(a))},insertNode:function(a,b,c,d){d=f.mixin({},d);c=this._storeAndExecute(new e(a,b,c,d));this._equation.afterNodeInserted(this,a,b,c);return c},replaceNode:function(a,b,c){var d=this._equation.getById(a),d=this._equation.getParentAndIndex(d);this.deleteNode(a);return this.insertNode(d.parent.id,d.index,b,c)},replaceText:function(a,b,d,e){this._equation.beforeReplaceText(this,
a,b,d,e);this._storeAndExecute(new c(a,b,d,e))},updateAttributes:function(a,c){this._equation.beforeUpdateAttributes(this,a,c);this._storeAndExecute(new b(a,c))},moveChildren:function(a,b,c,e,f){e=e||0;f=f||this._equation.getById(c).children.length;this._storeAndExecute(new d(a,b,c,e,f));this._equation.afterChildrenMoved(this,a,b,c,e,f)},mergeNodes:function(a,b){this._equation.beforeMergeNodes(this,a,b);var c=this._equation.getById(a),d=this._equation.getById(b);this.updateAttributes(c.id,{text:c.text+
d.text});this.deleteNode(b)},_storeAndExecute:function(a){var b=a.execute(this._equation);this._actions.push(a);return b}})})},"MW/equations/editor/commands/DeleteNodeCommand":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f){this._targetId=f},execute:function(f){this._removedNode=f.getById(this._targetId);var g=f.getParent(this._removedNode);this._parentId=g.id;this._deletedIndex=g.children.indexOf(this._removedNode);g.children.splice(this._deletedIndex,
1);f.changed()},unexecute:function(f){f.getById(this._parentId).children.splice(this._deletedIndex,0,this._removedNode);f.changed()}})})},"MW/equations/editor/commands/InsertNodeCommand":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/renderer/model/utils/NodeFactory","MW/rtc/model/importers/Base","mw-utils/Utils"],function(h,f,g,e,d){return h(null,{constructor:function(c,b,a,e){this._targetId=c;this._offset=b;this._name=a;this._attributes=e||{};this._attributes.id||(this._attributes.id=
d.generateUuid())},execute:function(c){var b=c.getById(this._targetId),a=this._createNode();a&&(a.parent=b);b.children.splice(this._offset,0,a);c.changed();return a},unexecute:function(c){c.getById(this._targetId).children.splice(this._offset,1);c.changed()},_createNode:function(){return g.createNode(this._name,this._attributes)}})})},"MW/equations/editor/commands/MoveChildrenCommand":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/renderer/model/utils/NodeFactory","MW/rtc/model/importers/Base",
"mw-utils/Utils"],function(h,f,g,e,d){return h(null,{constructor:function(c,b,a,d,e){this._targetId=c;this._targetOffset=b;this._sourceId=a;this._start=d||0;this._end=e},execute:function(c){var b=c.getById(this._targetId),a=c.getById(this._sourceId),d=a.children.slice(this._start,this._end);a.children.splice(this._start,this._end-this._start);d.forEach(function(a){a&&(a.parent=b)});a=[this._targetOffset,0].concat(d);b.children.splice.apply(b.children,a);c.changed()},unexecute:function(c){var b=c.getById(this._targetId),
a=c.getById(this._sourceId),d=b.children.slice(this._targetOffset,this._targetOffset-this._start+this._end);b.children.splice(this._targetOffset,this._end-this._start);d.forEach(function(b){b&&(b.parent=a)});b=[this._start,0].concat(d);a.children.splice.apply(a.children,b);c.changed()}})})},"MW/equations/editor/commands/ReplaceTextCommand":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g,e,d){this._targetId=f;this._offset=g;this._length=e;this._text=d},
execute:function(f){var g=f.getById(this._targetId);this._replacement=g.text.substr(this._offset,this._length);g.text=g.text.substr(0,this._offset)+this._text+g.text.substr(this._offset+this._length);f.changed();return g},unexecute:function(f){var g=f.getById(this._targetId);g.text=g.text.substr(0,this._offset)+this._replacement+g.text.substr(this._offset+this._text.length);f.changed();return g}})})},"MW/equations/editor/commands/UpdateAttributesCommand":function(){define(["dojo/_base/declare"],function(h){return h(null,
{constructor:function(f,g){this._targetId=f;this._newAttributes=g},execute:function(f){var g=f.getById(this._targetId);this._oldAttributes={};for(var e in this._newAttributes)this._newAttributes.hasOwnProperty(e)&&(this._oldAttributes[e]=g[e],g[e]=this._newAttributes[e]);f.changed()},unexecute:function(f){var g=f.getById(this._targetId),e;for(e in this._oldAttributes)this._oldAttributes.hasOwnProperty(e)&&(g[e]=this._oldAttributes[e]);f.changed()}})})},"MW/equations/editor/model/UndoRedoStep":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(f,g,e,d,c){this._commands=f;this._cursorStart=g;this._cursorEnd=e;this._cursor=d;this._equation=c},execute:function(){this._equation.pauseEvents();this._cursor.pauseEvents();this._commands.forEach(function(f){f.execute(this._equation)},this);this._cursor.setState(this._cursorEnd);this._equation.unpauseEvents();this._cursor.unpauseEvents()},unexecute:function(){this._equation.pauseEvents();this._cursor.pauseEvents();for(var f=this._commands.length-1;0<=
f;f-=1)this._commands[f].unexecute(this._equation);this._cursor.setState(this._cursorStart);this._equation.unpauseEvents();this._cursor.unpauseEvents()}})})},"MW/equations/editor/controller/FocusController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on MW/equations/editor/utils/EquationPlugin".split(" "),function(h,f,g,e,d,c){return f(c,{pluginId:"controller.focus",pluginDependencies:["api.attributes","view.keyhandler"],constructor:function(b,a){this._attributes=
b;this._keyHandler=a;this._focusStack=[];this.own(e.after(a,"onBlur",g.hitch(this,"_handleBlur")));this.own(e.after(a,"onFocus",g.hitch(this,"_handleFocus")))},focus:function(){this._attributes.set("active",!0);0===this._focusStack.length&&this._keyHandler.focus()},add:function(b){this._attributes.set("active",!0);(0===this._focusStack.length||this._focusStack[0].group!==b)&&this._focusStack.unshift({group:b});return{remove:g.hitch(this,function(){h.some(this._focusStack,g.hitch(this,function(a,c){if(a.group===
b)return this._focusStack.splice(c,1),!0}))&&(0===this._focusStack.length&&this._attributes.get("active"))&&this._keyHandler.focus()})}},_handleFocus:function(){this._focused=!0;this._enqueueFocusCheck()},_handleBlur:function(){this._focused=!1;this._enqueueFocusCheck()},_enqueueFocusCheck:function(){this._focusCheckEnqueued||(this._focusCheckEnqueued=!0,window.setTimeout(g.hitch(this,function(){this._focusCheckEnqueued=!1;this._attributes.set("active",this._focused||0<this._focusStack.length)}),
0))}})})},"MW/equations/editor/controller/KeyHandlerController":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/PriorityHandlerChain".split(" "),function(h,f,g,e,d,c,b){return f(c,{pluginId:"controller.keyhandler",pluginDependencies:["api.attributes","external.actionservice"],constructor:function(a,c){this._attributes=a;this._bindings={};this._typeHandlers=new b;this._actionService=c;c.getAllActions().forEach(function(a){(a.key||
a.platformKey)&&this._addAction(a)},this);this.own(e.after(this._actionService,"addAction",g.hitch(this,"_addAction"),!0));this.own(e.after(this._actionService,"removeAction",g.hitch(this,"_removeAction"),!0))},add:function(a,b,c){var e=a;if("string"!==typeof a&&(e=a.key,a.platformKey))for(var f in a.platformKey)if(a.platformKey.hasOwnProperty(f)&&d(f)){e=a.platformKey[f];break}this._ensureBinding(e);return this._bindings[e].add(b,c)},addTypeHandler:function(a,b){return this._typeHandlers.add(a,b)},
registerView:function(a){this._keyHandler=a;Object.keys(this._bindings).forEach(g.hitch(this,"_makeBinding"))},handleType:function(a){!this._attributes.get("disabled")&&(!(1===a.length&&this._bindings[a])||!this._bindings[a].fire())&&this._typeHandlers.fire(a)},_ensureBinding:function(a){this._bindings[a]||(this._bindings[a]=new b,this._makeBinding(a))},_makeBinding:function(a){this._keyHandler&&this._keyHandler.addBinding({key:a,callback:g.hitch(this,"_handleKey",a)})},_handleKey:function(a){this._bindings[a]&&
(this._attributes.get("disabled")||!this._bindings[a].fire()&&1===a.length&&this._typeHandlers.fire(a))},_addAction:function(a){(a.key||a.platformKey)&&this.add(a,g.hitch(this,function(){var b=this._actionService.getAction(a.id);if(b&&b.enabled&&b.callback)return b.callback.call(void 0)}),a.keyPriority)},_removeAction:function(a){}})})},"MW/equations/editor/controller/LiveCursorController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/NodeUtils".split(" "),
function(h,f,g,e,d,c,b){return h(d,{pluginId:"controller.livecursor",pluginDependencies:["controller.cursor","model.cursor","model.equation"],constructor:function(a,b,c){this._cursorController=a;this._cursor=b;this._equation=c;this.own(g.before(this._equation,"beforeDeleteNode",f.hitch(this,"_handleDeleteNode")));this.own(g.before(this._equation,"afterNodeInserted",f.hitch(this,"_handleNodeInserted")));this.own(g.before(this._equation,"beforeReplaceText",f.hitch(this,"_handleReplaceText")));this.own(g.before(this._equation,
"afterChildrenMoved",f.hitch(this,"_handleChildrenMoved"),!0));this.own(g.before(this._equation,"beforeMergeNodes",f.hitch(this,"_handleBeforeMergeNodes"),!0))},_handleBeforeMergeNodes:function(a,b,c){a=this._cursorController.getPosition();a.id===c&&(c=this._equation.getById(b),this._cursor.setPosition({id:b,offset:a.offset+c.text.length}))},_handleNodeInserted:function(a,b,c){this._cursor.clearSelection();a=this._cursorController.getPosition();if(a.id!==b){var d=this._equation.getParentAndIndex(a.node),
e=d.parent,d=d.index;"MathText"===a.node.className&&e.id===b&&(d===c-1&&a.offset===a.node.text.length?this._cursorController.setPosition({id:e.id,offset:d+2}):d===c+1&&0===a.offset&&this._cursorController.setPosition({id:e.id,offset:d}))}else a.offset>=c&&this._cursorController.setPosition({id:a.id,offset:a.offset+1})},_handleDeleteNode:function(a,c){this._cursor.clearSelection();var d=this._cursor.getPosition();if(d.id!==c){var f=this._equation.getById(c),f=this._equation.getParentAndIndex(f),g=
f.parent,h=f.index;if(g.id===d.id){if(d.offset>h){var h=d.offset-1,p={id:g.id,offset:h},p=e.adaptPositionToAtoms(p,g.children[h-(f.index===d.offset-1?1:0)],g.children[h+1]);this._cursor.setPosition(p)}}else for(d=this._equation.getById(d.id);d;){f=this._equation.getParentAndIndex(d);if(!f)break;d=f.parent;if(d.id===c){f=this._equation.getParentAndIndex(d);g=f.parent;h=f.index;if("placeholder"!==b.categorizeNode(g))return this._findCursorPosition(d);d={id:g.id,offset:h};d=e.adaptPositionToAtoms(d,
g.children[h-1],g.children[h+1]);this._cursor.setPosition(d);break}}}else f=this._equation.getById(d.id),f=this._equation.getParentAndIndex(f),g=f.parent,h=f.index,d={id:g.id,offset:h},d=e.adaptPositionToAtoms(d,g.children[h-1],g.children[h+1]),this._cursor.setPosition(d)},_findCursorPosition:function(a){this._equation.iterate({start:a,direction:c.RIGHT_LEFT_DOWN_UP,skipFirst:!0,placeholder:f.hitch(this,function(a,b){var c=0;"left"===b.getDirection()&&(c=-1);this._cursorController.setPosition({id:a.id,
offset:c});b.stop()})})},_handleReplaceText:function(a,b,c,d,e){this._cursor.clearSelection();a=this._cursor.getPosition();a.id!==b||a.offset<c||(a=a.offset,a=(a<c+d?c:a-d)+e.length,this._cursorController.setPosition({id:b,offset:a}))},_handleChildrenMoved:function(a,c,d,e,f,g){a=this._cursorController.getPosition();a.id===e&&a.offset>=f&&a.offset<=g&&this._cursorController.setPosition({id:c,offset:d+a.offset-f});g=b.categorizeNode(a.node);var h=this._equation.getParentAndIndex(a.node),r=h.parent;
"atom"===g&&r.id===e&&a.offset===a.node.text.length&&h.index===f-1&&this._cursorController.setPosition({id:c,offset:d})}})})},"MW/equations/editor/controller/MouseController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","MW/equations/editor/utils/EquationPlugin","MW/equations/editor/utils/PriorityHandlerChain"],function(h,f,g,e,d){return h(e,{pluginId:"controller.mouse",pluginDependencies:["api.attributes","controller.focus","view.rootnode"],_DOUBLE_CLICK_TIME:400,constructor:function(c,
b,a){this._attributes=c;this._rootNode=a;this._focusController=b;this._mouseDownHandlers=new d;this._mouseMoveHandlers=new d;this._mouseUpHandlers=new d;this._mouseDoubleClickHandlers=new d;this.own(g(a,"mousedown",f.hitch(this,"_handleMouseDown")));this.own(g(a,"mousemove",f.hitch(this,"_handleMouseMove")));this.own(g(a,"mouseup",f.hitch(this,"_handleMouseUp")))},addMouseUp:function(c,b){return this._mouseUpHandlers.add(c,b)},addMouseDown:function(c,b){return this._mouseDownHandlers.add(c,b)},addMouseDoubleClick:function(c,
b){return this._mouseDoubleClickHandlers.add(c,b)},addMouseMove:function(c,b){return this._mouseMoveHandlers.add(c,b)},_addWindowMouseMoveHandler:function(){this._windowMouseMoveHandler||(this._windowMouseMoveHandler=g(window,"mousemove",f.hitch(this,"_handleWindowMouseMove")))},_handleWindowMouseMove:function(c){1!==(c.buttons&1)?(this._windowMouseMoveHandler.remove(),this._windowMouseMoveHandler=null):this._rootNode.contains(c.target)||this._mouseMoveHandlers.fire(c)},_addWindowMouseUpHandler:function(){this._windowMouseUpHandler||
(this._mouseDownFocus=this._focusController.add("mouse-down"),this._windowMouseUpHandler=g(window,"mouseup",f.hitch(this,"_handleWindowMouseUp")))},_handleWindowMouseUp:function(c){this._windowMouseUpHandler.remove();this._windowMouseUpHandler=null;this._mouseDownFocus.remove()},_handleMouseMove:function(c){!this._attributes.get("disabled")&&!(c.pageX===this._lastX&&c.pageY===this._lastY)&&(this._lastX=c.pageX,this._lastY=c.pageY,this._mouseMoveHandlers.fire(c))},_handleMouseDown:function(c){if(!this._attributes.get("disabled")){this._addWindowMouseMoveHandler();
this._addWindowMouseUpHandler();var b=c.timeStamp;if(b-this._lastClickTime<this._DOUBLE_CLICK_TIME&&0===c.button&&c.pageX===this._lastX&&c.pageY===this._lastY)return this._mouseDoubleClickHandlers.fire(c),!0;this._lastX=c.pageX;this._lastY=c.pageY;this._lastClickTime=b;this._mouseDownHandlers.fire(c)}},_handleMouseUp:function(c){this._windowMouseUpHandler&&this._handleWindowMouseUp(c);this._attributes.get("disabled")||this._mouseUpHandlers.fire(c)}})})},"MW/equations/editor/controller/PlaceholderAtomController":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/EquationPlugin"],function(h,f,g,e,d){return h(d,{pluginId:"controller.placeholderatomcontroller",pluginDependencies:["model.equation"],constructor:function(c){this._equation=c;this.own(g.after(this._equation,"beforeDeleteNode",f.hitch(this,"_handleDeleteNode"),!0));this.own(g.after(this._equation,"afterNodeInserted",f.hitch(this,"_handleNodeInserted"),!0));this.own(g.after(this._equation,"afterChildrenMoved",
f.hitch(this,"_handleChildrenMoved"),!0))},_handleNodeInserted:function(c,b,a,d){b=this._equation.getById(b);2===b.children.length&&b.children[1]&&"placeholder-atom"===b.children[1]["data-category"]?c.deleteNode(b.children[1].id):d&&"placeholder"===d["data-category"]&&this._insertPlaceholderAtom(c,d.id)},_handleDeleteNode:function(c,b){var a=this._equation.getParent(this._equation.getById(b));"placeholder"===a["data-category"]&&1===a.children.length&&this._insertPlaceholderAtom(c,a.id)},_handleChildrenMoved:function(c,
b,a,d,e,f){b=this._equation.getById(b);1<b.children.length&&(b.children[b.children.length-1]&&"placeholder-atom"===b.children[b.children.length-1]["data-category"]&&c.deleteNode(b.children[b.children.length-1].id),1<b.children.length&&(a<b.children.length-1&&b.children[a]&&"placeholder-atom"===b.children[a]["data-category"])&&c.deleteNode(b.children[a].id),1<b.children.length&&(b.children[0]&&"placeholder-atom"===b.children[0]["data-category"])&&c.deleteNode(b.children[0].id));a=this._equation.getById(d);
"placeholder"===a["data-category"]&&0===a.children.length&&this._insertPlaceholderAtom(c,a.id)},_insertPlaceholderAtom:function(c,b){c.insertNode(b,0,"MathText",{"data-category":"placeholder-atom",text:""})}})})},"MW/equations/editor/controller/SelectionController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/CursorUtils","MW/equations/editor/utils/NodeUtils"],function(h,f,g,e,d){return f(null,{pluginId:"controller.selection",pluginDependencies:["model.cursor",
"model.equation"],constructor:function(c,b){this._cursor=c;this._equation=b},getSelectionStartLogical:function(){if(this._cursor.hasSelection()){var c=this.getSelectionSpan();return e.logicalFromPosition({id:c.id,offset:c.reversed?c.right:c.left},this._equation.getRoot())}},getSelectionLogical:function(){if(this._cursor.hasSelection()){var c=this.getSelectionSpan(),b=e.logicalFromPosition({id:c.id,offset:c.left},this._equation.getRoot()),a=e.logicalFromPosition({id:c.id,offset:c.right},this._equation.getRoot());
return{left:b,right:a,reversed:c.reversed}}},hasSelection:function(){return this._cursor.hasSelection()},iterateSelection:function(c){var b=this.getSelectionSpan(),a={},a="atom"===d.categorizeNode(b.node)?[b.node]:b.node.children.slice(b.left,b.right);this._equation.iterate(g.mixin({},c,{start:a}))},getSelectionSpan:function(){var c=this._cursor.getSelection();return this.getSpan(c[0],c[1])},getSelectionShrinkPosition:function(){var c=this._cursor.getSelection(),c=this._analyzeAncestors(c[0],c[1]),
b=d.categorizeNode(c.lastCommon.node);if("placeholder"===b||"atom"===b){var b=c.lastCommon.minLeftOffset,a=c.lastCommon.minRightOffset,f=c.length,f=c.lastCommonIndex===f-1||c.lastCommonIndex===f-2&&c[f-1].leftOffset===c[f-1].rightOffset;if(b<a-1||f)return{id:c.lastCommon.id,offset:c.reversed?b+1:a-1}}for(a=c.lastCommonIndex;a+1<c.length&&!(a+=1,b=d.categorizeNode(c[a].node),"atom"===b||"placeholder"===b););return{id:c[a].id,offset:c.reversed?0:e.nodeLength(c[a].node)}},getSpan:function(c,b){if(c.id===
b.id)return{id:c.id,left:Math.min(c.offset,b.offset),right:Math.max(c.offset,b.offset),reversed:c.offset>b.offset,node:this._equation.getById(c.id)};for(var a=this._analyzeAncestors(c,b),e=a.lastCommonIndex,f=a.lastCommonIndex;0<=e;){var g=d.categorizeNode(a[e].node);if("atom"===g||"placeholder"===g){f=e;break}e-=1}return{id:a[f].id,left:a[f].minLeftOffset,node:a[f].node,right:a[f].minRightOffset,reversed:a.reversed}},_analyzeAncestors:function(c,b){for(var a=this._getAncestors(c),d=this._getAncestors(b),
e=0;e<a.length&&e<d.length&&a[e].id===d[e].id;)a[e].minLeftOffset=Math.min(a[e].leftOffset,d[e].leftOffset),a[e].minRightOffset=Math.max(a[e].rightOffset,d[e].rightOffset),e+=1;var e=e-1,f={lastCommonIndex:e,lastCommon:a[e],length:a.length,reversed:a[e].leftOffset>d[e].leftOffset||a[e].rightOffset>d[e].rightOffset};a.forEach(function(a,b){f[b]=a});return f},_getAncestors:function(c){var b=this._equation.getById(c.id),a=c.offset,d=c.offset;for(c=[];b;)if(c.unshift({id:b.id,leftOffset:a,rightOffset:d,
node:b}),d=this._equation.getParentAndIndex(b)){var e="MathText"===b.className&&a===b.text.length,f="MathText"===b.className&&0===a,b=d.parent,a=d.index,d=d.index+1;e?a=d:f&&(d=a)}else break;return c}})})},"MW/equations/editor/controller/UndoRedoController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/EquationPlugin"],function(h,f,g,e){return h(e,{pluginId:"controller.undoredo",pluginDependencies:["controller.editmanager","model.cursor","model.equation"],
constructor:function(d,c,b){this._undoStack=[];this._redoStack=[];this._equationModel=b;this._cursorModel=c;this.own(g.after(d,"onNewStep",f.hitch(this,"_insert"),!0));this.own(g.after(d,"onReset",f.hitch(this,"_clear"),!0))},onChange:function(){},_clear:function(){this._undoStack=[];this._redoStack=[];this.onChange()},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},undo:function(){if(this.canUndo()){var d=this._undoStack.pop();d.unexecute();
this._redoStack.push(d);this.onChange()}},redo:function(){if(this.canRedo()){var d=this._redoStack.pop();d.execute();this._undoStack.push(d);this.onChange()}},_insert:function(d){this._undoStack.push(d);this._redoStack=[];this.onChange()}})})},"MW/equations/editor/helper/BackspaceToUndoHelper":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/equations/editor/utils/EquationPlugin"],function(h,f,g,e){return h(e,{pluginId:"helper.backspacetoundo",pluginDependencies:["controller.undoredo",
"controller.keyhandler","model.cursor","model.equation"],constructor:function(d,c,b,a){this._undoRedoController=d;this.own(c.add("backspace",f.hitch(this,"_handleBackspace",-1),10));this.own(g.after(b,"onChange",f.hitch(this,"_reset")));this.own(g.after(a,"onChange",f.hitch(this,"_reset")))},start:function(){this._mapBackspaceToUndo=!0},_reset:function(){this._mapBackspaceToUndo=!1},_handleBackspace:function(){if(this._mapBackspaceToUndo)return this._undoRedoController.undo(),this._mapBackspaceToUndo=
!1,!0}})})},"MW/equations/editor/helper/DeleteHelper":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/NodeUtils"],function(h,f,g,e){return f(null,{pluginId:"helper.delete",pluginDependencies:["controller.selection","model.equation"],constructor:function(d,c){this._selectionController=d;this._equation=c;this._deleteHandlers=[]},addDeleteHandler:function(d){this._deleteHandlers.push(d);return{remove:g.hitch(this,function(){var c=this._deleteHandlers.indexOf(d);
0<=c&&this._deleteHandlers.splice(c,1)})}},handleDelete:function(d){return h.some(this._deleteHandlers,function(c){return c(d)})},deleteSelection:function(d){this.deleteRange(d,this._selectionController.getSelectionSpan())},deleteRange:function(d,c){var b=c.node,a=e.categorizeNode(b);if("atom"===a)this.deleteInAtom(d,b,c.left,c.right-c.left);else if("placeholder"===a){for(a=c.right-1;a>=c.left;a-=1)d.deleteNode(b.children[a].id);a=b.children[c.left-1];b=b.children[c.left];a&&b&&e.mergeIfCompatible(d,
a,b)}},deleteInAtom:function(d,c,b,a){c.text.length===a?(b=this._equation.getPreviousSibling(c),a=this._equation.getNextSibling(c),d.deleteNode(c.id),b&&a&&e.mergeIfCompatible(d,b,a)):d.replaceText(c.id,b,a,"")}})})},"MW/equations/editor/helper/ExportHTMLImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style MW/equations/editor/utils/EquationPlugin MW/equations/renderer/model/utils/MathMLUtils MW/rtc/misc/ImageURIUtilities MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),function(h,
f,g,e,d,c,b){return h(e,{pluginId:"helper.exporthtmlimage",pluginFamily:"copypaste",pluginDependencies:["external.clipboardtempdirpath","helper.mimetype","model.equation","view.renderer","view.rootnode"],constructor:function(a,b,c,d,e){this._equation=c;this._clipboardTempDirpath=a;this._renderer=d;this._rootNode=e;this.own(b.addExportContributor(f.hitch(this,"_convertToImage")))},_convertToImage:function(a){if("MathText"===a.node.className)return[];var e=g.getComputedStyle(this._rootNode).fontSize;
a=a.node.children.slice(a.left,a.right);a=d.exportMathML(a,{attribBlackList:["id","data-category"],inline:this._equation.getRoot().inline});e=this._renderer.getEquationRenderer().renderToImageURLSynch(a,e,2);a="\x3cspan "+('style\x3d"vertical-align: '+Math.round(e.verticalAlign)+'"\x3e');a+="\x3cimg ";var f=[];if(this._clipboardTempDirpath){var h=c.pushImageAndGetPathFromURI(e.dataURL,this._clipboardTempDirpath,f);a+='src\x3d"'+h+'"'}else a+='src\x3d"'+e.dataURL+'"';a+=' width\x3d"'+e.width/2+'" height\x3d"'+
e.height/2+'"';return[{flavor:b.HTML,content:a+"\x3e\x3c/span\x3e"}].concat(0<f.length?[{flavor:b.IMAGE_LIST,content:f}]:[])}})})},"MW/equations/editor/helper/ExportMathML":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/EquationPlugin","MW/equations/renderer/model/utils/MathMLUtils","MW/rtc/plugins/cutcopypaste/MIMETypes"],function(h,f,g,e,d){return h(g,{pluginId:"helper.exportmathml",pluginFamily:"copypaste",pluginDependencies:["helper.mimetype"],constructor:function(c){this.own(c.addExportContributor(f.hitch(this,
"_generateMathMLContent")))},_generateMathMLContent:function(c){return"MathRow"===c.node.className?(c=c.node.children.slice(c.left,c.right),c=e.exportMathML(c,{attribBlackList:["id","data-category"]}),[{flavor:d.MATHML_PRESENTATION,content:c}]):[]}})})},"MW/equations/editor/helper/ExportPlainText":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/equations/editor/utils/EquationPlugin","MW/rtc/plugins/cutcopypaste/MIMETypes"],function(h,f,g,e){return h(g,{pluginId:"helper.exportplaintext",
pluginFamily:"copypaste",pluginDependencies:["helper.mimetype","helper.plaintextgenerator"],constructor:function(d,c){this._plainTextGeneratorHelper=c;this.own(d.addExportContributor(f.hitch(this,"_generateTextMIMEType")))},_generateTextMIMEType:function(d){d=this._plainTextGeneratorHelper.convertSelection(d);return[{flavor:e.TEXT,content:d},{flavor:e.COPY_FOR_COMMAND_WINDOW,content:d}]}})})},"MW/equations/editor/helper/ImportHelper":function(){define(["dojo/_base/declare","MW/equations/editor/utils/EquationPlugin",
"MW/equations/renderer/Renderer"],function(h,f,g){return h(f,{pluginId:"helper.import",pluginDependencies:[],constructor:function(e,d){this._renderer={}},importModel:function(e,d){var c=this._rendererFor(d||"mathml");"tex"===d&&(e=c.setDisplaystyleIfNeeded(e));return c.getModel(e)},_rendererFor:function(e){this._renderer[e]||(this._renderer[e]=new g({equationFormat:e,cacheFontMetrics:!1}));return this._renderer[e]}})})},"MW/equations/editor/helper/InsertHelper":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/MathVariant MW/equations/editor/utils/NodeUtils MW/equations/renderer/model/SpacingClasses MW/equations/renderer/model/Symbols".split(" "),
function(h,f,g,e,d,c){return h(null,{pluginId:"helper.insert",pluginDependencies:["controller.cursor","model.equation"],constructor:function(b,a){this._cursorController=b;this._equation=a},getInsertPosition:function(b,a){a=a||this._cursorController.getPosition();var c=this._equation.getById(a.id),d=e.categorizeNode(c);if("atom"===d||"placeholder-atom"===d){var f=this._equation.getParentAndIndex(c),d=f.parent,f=f.index;if(0===a.offset)return{id:d.id,node:d,offset:f};a.offset<c.text.length&&this._splitNode(b,
c,a.offset);return{id:d.id,node:d,offset:f+1}}return a},insertTemplate:function(b,a,c,d){this._cursorPositions=[];var g=d?c.children[d-1]:null,h=d<c.children.length?c.children[d]:null;f.isArray(a[0])?a.forEach(function(a,e){this._insertRecursive(b,a,c,d+e)},this):this._insertRecursive(b,a,c,d);if(g){if(a=this._equation.getNextSibling(g))e.mergeIfCompatible(b,g,a),a=this._equation.getNextSibling(g);this.autoRemoveSpace(b,g,a)}h&&(g=this._equation.getPreviousSibling(h))&&e.mergeIfCompatible(b,g,h);
return this._cursorPositions},_insertRecursive:function(b,a,c,d){if(0!==a.length){var e=b.insertNode(c.id,d,a[0],a[1]);a[2]&&a[2].forEach(function(a,c){this._insertRecursive(b,a,e,c)},this);a[1]&&a[1].hasOwnProperty("data-cursor")&&(c={id:e.id,offset:0},this._cursorPositions[a[1]["data-cursor"]]=c,0===a[1]["data-cursor"]&&this._cursorController.setPosition(c))}},autoRemoveSpace:function(b,a,c){if(a&&!("MathText"!==a.className||"mtext"!==a.kind)){var d=this._equation.getPreviousSibling(a);d&&c&&!("atom"===
e.categorizeNode(d)&&"symbol"!==d.kind&&"symbol"!==c.kind)&&(d=(d=this._hasSpacingRight(d))||this._hasSpacingLeft(c))&&("\u2009"===a.text?b.deleteNode(a.id):a.text.match(/^\u2009+$/)&&b.replaceText(a.id,0,1,""))}},_hasSpacingRight:function(b){return"symbol"!==b.kind||!c.symbolMap[b.symbolName]?!1:0<=[d.OP,d.BIN,d.REL,d.PUNCT,d.INNER].indexOf(c.symbolMap[b.symbolName].spacing)},_hasSpacingLeft:function(b){return"symbol"!==b.kind||!c.symbolMap[b.symbolName]?!1:0<=[d.OP,d.BIN,d.REL,d.INNER].indexOf(c.symbolMap[b.symbolName].spacing)},
prepareTextAttributes:function(b,a,c){"number"===b.kind&&(a&&"id"===a.kind&&0<c)&&(b.kind="id");return b},_splitNode:function(b,a,c){var d=this._equation.getParentAndIndex(a),f={text:a.text.substr(c),kind:a.kind,mathvariant:a.mathvariant};"number"===e.kindOfText(f.text)&&(f.kind="number");b.insertNode(d.parent.id,d.index+1,"MathText",this.prepareTextAttributes(f));b.replaceText(a.id,c,a.text.length-c,"")}})})},"MW/equations/editor/helper/InsertTemplateHelper":function(){define(["dojo/_base/declare",
"MW/equations/editor/utils/Serializer"],function(h,f){return h(null,{pluginId:"helper.inserttemplate",pluginDependencies:["controller.cursor","controller.selection","helper.delete","helper.insert","model.equation"],constructor:function(f,e,d,c,b){this._deleteHelper=d;this._insertHelper=c;this._selectionController=e;this._equation=b;this._cursorController=f},insertTemplate:function(f,e,d){var c=null;d?(c=this._serializeRange(d),this._deleteHelper.deleteRange(f,d)):this._cursorController.hasSelection()&&
(c=this._serializeRange(this._selectionController.getSelectionSpan()),this._deleteHelper.deleteSelection(f));d=this._insertHelper.getInsertPosition(f);var b=this._equation.getById(d.id);e=this._insertHelper.insertTemplate(f,e,b,d.offset);c&&(0<c.length&&e[0])&&(d=this._insertHelper.getInsertPosition(f),b=this._equation.getById(d.id),this._insertHelper.insertTemplate(f,c,b,d.offset),e[1]&&this._cursorController.setPosition(e[1]));return e},_serializeRange:function(g){return f.serializeRange(g.node,
g.left,g.right)}})})},"MW/equations/editor/helper/MimeTypeHelper":function(){define("dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/NodeUtils MW/equations/editor/utils/PlainTextParser MW/equations/editor/utils/Serializer MW/rtc/plugins/cutcopypaste/MIMETypes".split(" "),function(h,f,g,e,d,c){return h(null,{pluginId:"helper.mimetype",pluginDependencies:["controller.selection","helper.import","helper.insert"],constructor:function(b,a,c){this._selectionController=b;this._importHelper=a;
this._insertHelper=c;this._exportContributor=[]},addExportContributor:function(b){this._exportContributor.push(b);return{remove:f.hitch(this,function(){var a=this._exportContributor.indexOf(b);0<=a&&this._exportContributor.splice(a,1)})}},acceptedMimeTypes:function(){return["application/matlab_json_equation",c.TEXT,c.MATHML_PRESENTATION]},convertSelection:function(){var b=this._selectionController.getSelectionSpan();return this.convertRange(b)},convertRange:function(b){var a=[],c=JSON.stringify(d.serializeRange(b.node,
b.left,b.right));a.push({flavor:"application/matlab_json_equation",content:c});this._exportContributor.forEach(function(c){a=a.concat(c.call(null,b))});return a},insertContent:function(b,a){var f;if(a["application/matlab_json_equation"])try{var h=JSON.parse(a["application/matlab_json_equation"]);f=this._insertHelper.getInsertPosition(b);this._insertHelper.insertTemplate(b,h,f.node,f.offset)}catch(m){}else if(a[c.MATHML_PRESENTATION]){if(f=this._importHelper.importModel(a[c.MATHML_PRESENTATION],"mathml"))f=
g.categorizeTree(f),h=d.serializeRange(f.children[0]),f=this._insertHelper.getInsertPosition(b),this._insertHelper.insertTemplate(b,h,f.node,f.offset)}else if(a[c.TEXT]||a[c.UNICODE_STRING])h=e.parse(a[c.TEXT]||a[c.UNICODE_STRING]),f=this._insertHelper.getInsertPosition(b),this._insertHelper.insertTemplate(b,h,f.node,f.offset)}})})},"MW/equations/editor/utils/PlainTextParser":function(){define(["MW/equations/editor/utils/NodeUtils","MW/equations/renderer/model/Symbols"],function(h,f){function g(d,
c){if("delimiter"===d)return["MathDelimiter",{symbolName:f.getSymbolName(c)},[]];var b={kind:d,text:c};"symbol"===d&&(b.symbolName=f.getSymbolName(c));return["MathText",b,[]]}var e=[h.TEXT_KIND.IDENTIFIER,h.TEXT_KIND.NUMBER];return{parse:function(d){for(var c=[],b=0,a,f;b<d.length;){var l=d.substr(b,1),l=h.kindOfText(l);a===h.TEXT_KIND.IDENTIFIER&&l===h.TEXT_KIND.NUMBER&&(l=h.TEXT_KIND.IDENTIFIER);if(l!==a||0>e.indexOf(l))a&&a!==h.TEXT_KIND.WHITESPACE&&c.push(g(a,d.substring(f,b))),a=l,f=b;b+=1}a&&
a!==h.TEXT_KIND.WHITESPACE&&c.push(g(a,d.substr(f)));return c}}})},"MW/equations/editor/helper/PlainTextGenerator":function(){define(["dojo/_base/declare","MW/equations/editor/utils/EquationPlugin","MW/equations/renderer/model/Symbols"],function(h,f,g){var e={symbol:["id","number","delimiter"],number:["id","number"],id:["id","number"]};return h(f,{pluginId:"helper.plaintextgenerator",pluginDependencies:["model.equation"],constructor:function(d){this._equation=d},convertSelection:function(d){function c(c,
d){if(e[a]&&0<=e[a].indexOf(c)||e[c]&&0<=e[c].indexOf(a))b+=" ";a=c;b+=d}if("MathText"===d.node.className)return d.node.symbolName?g.serializeSymbol(d.node.symbolName):d.node.text.slice(d.left,d.right);var b="",a="";this._equation.iterate({start:d.node.children.slice(d.left,d.right),MathText:function(a){a.symbolName?c(a.kind,g.serializeSymbol(a.symbolName)):c(a.kind,a.text)},MathDelimiter:function(a){a.symbolName&&c("delimiter",g.serializeSymbol(a.symbolName))}});return b}})})},"MW/equations/editor/model/Cursor":function(){define(["dojo/_base/declare",
"dojo/_base/lang"],function(h,f){return h(null,{pluginId:"model.cursor",constructor:function(){this._position={};this._paused={}},clearSelection:function(){this._anchor=void 0},getPosition:function(){return f.mixin({},this._position)},getAnchor:function(){return this._anchor&&f.mixin({},this._anchor)},setPosition:function(f,e){e?(this._anchor=this._anchor||this.getPosition(),this._anchor.id===f.id&&this._anchor.offset===f.offset&&(this._anchor=void 0)):this._anchor=void 0;this._position=f;this._onChange()},
hasSelection:function(){return!!this._anchor},getSelection:function(){return[f.mixin({},this._anchor),f.mixin({},this._position)]},getState:function(){return[this._anchor?f.mixin({},this._anchor):void 0,this.getPosition()]},setState:function(g){this.setPosition(g[1]);g[0]&&(this._anchor=f.mixin({},g[0]))},pauseEvents:function(f){this._paused[f||"default"]=!0},unpauseEvents:function(f){delete this._paused[f||"default"];this._shouldFire&&!this._isPaused()&&this._onChange()},_isPaused:function(){return 0<
Object.keys(this._paused).length},onChange:function(){},_onChange:function(){this._isPaused()?this._shouldFire=!0:(this.onChange(),this._shouldFire=!1)}})})},"MW/equations/editor/model/Equation":function(){define("dojo/_base/array dojo/_base/declare MW/equations/editor/utils/Iterator MW/equations/editor/utils/NodeUtils MW/equations/renderer/model/utils/TeXUtils MW/equations/renderer/model/utils/MathMLUtils mw-utils/Utils".split(" "),function(h,f,g,e,d,c,b){return f(null,{pluginId:"model.equation",
pluginDependencies:["helper.import"],constructor:function(a){this._importHelper=a;this.setEquation('\x3cmath\x3e\x3cmrow\x3e\x3cmi data-category\x3d"placeholder-atom"\x3e\x3c/mi\x3e\x3c/mrow\x3e\x3c/math\x3e')},changed:function(){this._eventsPaused?this._triggered=!0:(this._triggered=!1,this.onChange())},pauseEvents:function(){this._eventsPaused=!0},unpauseEvents:function(){this._eventsPaused=!1;this._triggered&&this.changed()},getRoot:function(){return this._root},getById:function(a){return this._searchById(a,
this._root)},_searchById:function(a,b){var c;if(b.id===a)return b;h.some(b.children,function(b){if(b)return c=this._searchById(a,b)},this);return c},getParent:function(a){return(a=this.getParentAndIndex(a))&&a.parent},getParentAndIndex:function(a){return this._getParentAndIndex(a,this._root)},_getParentAndIndex:function(a){var b=a.parent;if(b)return{parent:b,index:b.children.indexOf(a)}},getPreviousSibling:function(a){if((a=this.getParentAndIndex(a))&&0<a.index)return a.parent.children[a.index-1]},
getNextSibling:function(a){if((a=this.getParentAndIndex(a))&&a.index<a.parent.children.length-1)return a.parent.children[a.index+1]},onChange:function(){},beforeDeleteNode:function(a,b){},afterNodeInserted:function(a,b,c,d){},afterChildrenMoved:function(a,b,c,d,e,f){},beforeReplaceText:function(a,b,c,d,e){},beforeUpdateAttributes:function(a,b,c){},beforeMergeNodes:function(a,b,c){},setEquation:function(a,b){this._root=this._importHelper.importModel(a,b);this._prepareEquation(this._root);e.categorizeTree(this._root);
this.changed()},serializeToMathMl:function(){return c.exportMathML([this._root],{attribBlackList:["id","data-category"]})},serializeToTeX:function(){return d.exportLaTeX([this._root],{attribBlackList:["id","data-category"]})},iterate:function(a){a=new g(this,a);a.iterate();return a.getResult()},_prepareEquation:function(a){a.id||(a.id=b.generateUuid());a.children&&a.children.forEach(function(b){b&&(b.parent=a,this._prepareEquation(b))},this)}})})},"MW/equations/editor/utils/Iterator":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang MW/equations/editor/utils/IteratorConstants MW/equations/editor/utils/IteratorResolver MW/equations/editor/utils/NodeUtils".split(" "),
function(h,f,g,e,d,c){return f(null,{constructor:function(b,a){this._equation=b;this._options=g.mixin({start:a.from||b.getRoot(),direction:e.DOWN},a)},stop:function(b){this._result=b;this._stopped=!0},isStopped:function(){return this._stopped},getResult:function(){return this._result},getParent:function(){return this._equation.getParent(this._currentNode)},getParentIndex:function(){var b=this._equation.getParentAndIndex(this._currentNode);return b&&b.index},getLastNode:function(){return this._lastNode},
getCurrentNode:function(){return this._currentNode},getDirection:function(){return this._moveDirection||"down"},iterate:function(){var b=this._options.start;g.isArray(b)||(b=[b]);h.some(b,g.hitch(this,function(a){this._iterateNode(a);return this.isStopped()}))},_iterateNode:function(b){var a=d.build(this._options.direction,b,this._equation);if(this._options.skipFirst){var c=a.getNext();b=c.node;this._moveDirection=c.direction}for(;b;){this._lastNode=this._currentNode;this._currentNode=b;this._handleNode();
if(this.isStopped()||!a.hasNext())break;c=a.getNext();b=c.node;this._moveDirection=c.direction}},_handleNode:function(){var b=c.categorizeNode(this._currentNode);this._options[b]&&this._options[b].call(void 0,this._currentNode,this);this._options[this._currentNode.className]&&this._options[this._currentNode.className].call(void 0,this._currentNode,this);this._options.all&&this._options.all.call(void 0,this._currentNode,this)}})})},"MW/equations/editor/utils/IteratorResolver":function(){define(["dojo/_base/array",
"dojo/_base/declare"],function(h,f){function g(c){for(var b=[["direction","[a-z]+"],["repeat","\\*"],["paren","[()]"],["require","\\+"]],a=RegExp("(?:("+h.map(b,function(a){return a[1]}).join(")|(")+")|(.))","g"),d,e=[];d=a.exec(c);)for(var f=0;f<b.length;f+=1)if(d[f+1]){e.push({type:b[f][0],match:d[f+1]});break}return e}function e(c){var b=[],a={},d=[];c.forEach(function(c){if(0<Object.keys(a).length&&("paren"===c.type||a[c.type]))b.push(a),a={};switch(c.type){case "direction":a.direction=c.match;
break;case "repeat":case "require":a[c.type]=!0;break;case "paren":"("===c.match?(d.push(b),b=[]):(c=b,b=d.pop(),a={direction:"sequence",children:c})}});0<Object.keys(a).length&&b.push(a);return b}var d=f(null,{constructor:function(c,b,a){this._state={current:c,sequence:a,index:0};this._stateStack=[];this._visitStack=[];this._equationModel=b;this._resolveNext()},_resolveNext:function(){this._next=null;if(this._state.index>=this._state.sequence.length)return this._currentSequenceEnded();var c=this._state.sequence[this._state.index],
b,a=c.repeat,d=!0;switch(c.direction){case "children":0===this._visitStack.length&&this._state.current.children&&(this._visitStack=this._state.current.children.slice(0));for(;!b&&0<this._visitStack.length;)b=this._visitStack.shift();b&&b.children&&(this._visitStack=b.children.concat(this._visitStack));a=0<this._visitStack.length;d=!1;break;case "up":b=this._equationModel.getParent(this._state.current);break;case "right":b=this._equationModel.getNextSibling(this._state.current);break;case "left":b=
this._equationModel.getPreviousSibling(this._state.current);break;case "sequence":return this._state.index+=1,this._stateStack.push(this._state),this._state={current:this._state.current,sequence:c.children,repeat:c.repeat,index:0},this._resolveNext()}b?(this._state.foundNode=!0,this._next={node:b,direction:c.direction},a||(this._state.index+=1),d&&(this._state.current=b)):(this._next=null,this._state.index+=1,c.require&&(this._state.index=this._state.sequence.length+1),this._resolveNext())},_currentSequenceEnded:function(){if(this._state.repeat&&
this._state.foundNode&&(this._state.index=0,this._state.foundNode=!1,this._resolveNext(),this._next))return;0<this._stateStack.length&&(this._state=this._stateStack.pop(),this._resolveNext())},hasNext:function(){return!!this._next},getNext:function(){var c=this._next;this._resolveNext();return c}});return{build:function(c,b,a){c=g(c);c=e(c);return new d(b,a,c)}}})},"MW/equations/editor/view/Caret":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","MW/rtc/plugins/view/divcaret/DivCaretPlugin"],
function(h,f,g,e,d){return h(null,{pluginId:"view.caret",pluginDependencies:["view.rootnode"],constructor:function(c){this._hidden={};this._rtcCursorAdapter={position:void 0,onUpdate:function(a){},isSelectionHidden:function(){},isHidden:f.hitch(this,"isHidden"),getNode:f.hitch(this,function(){return{isReadOnly:f.hitch(this,function(){return this._isReadonly})}})};this._rtcCursorViewAdapter={onUpdate:function(){}};this._cursorControllerAdapter={getCursors:f.hitch(this,function(){return[this._rtcCursorAdapter]})};
var b={addLayer:f.hitch(this,function(a){g.place(a,c);this._node=a.children[0]}),scrollPositionIntoView:function(){},getCoordinateForPosition:f.hitch(this,function(a){return{x:this._x||0.1,y:this._y,height:this._h}})};this._divCaret=new d(this._rtcCursorViewAdapter,b,this._cursorControllerAdapter)},isHidden:function(){return 0<Object.keys(this._hidden).length},setReadonly:function(c){this._isReadonly=c;this._rtcCursorAdapter.onUpdate()},getGeometry:function(){return{x:this._x,y:this._y,h:this._h,
w:1}},getNode:function(){return this._divCaret.getBox()},hide:function(c){this._hidden[c||"default"]=!0;this._rtcCursorViewAdapter.onUpdate()},show:function(c){delete this._hidden[c||"default"];this._rtcCursorViewAdapter.onUpdate()},setXY:function(c,b,a){this._x=c;this._y=b;this._h=a||16;this._rtcCursorViewAdapter.onUpdate()}})})},"MW/rtc/plugins/view/divcaret/DivCaretPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/has MW/rtc/abstract/AbstractPlugin".split(" "),
function(h,f,g,e,d,c,b){return h(b,{ACTIV_COLOR:"rgba(0, 0, 0, 1)",INACTIV_COLOR:"rgba(0, 0, 0, 0.3)",constructor:function(a,b,c){this._rtcView=b;this._cursorController=c;this._layer=e.create("span",{"class":"cursorGroup"});this._permanentLayer=document.createElement("span");this._permanentLayer.className="cursor";this._layer.appendChild(this._permanentLayer);this._rtcView.addLayer(this._layer);this._paddingLeft=this._rtcView.paddingLeft;this._layers=[];this._blinkAllTimer=null;this._hidden=!1;this.own(g.after(a,
"onUpdate",f.hitch(this,"_handleCursorViewUpdate")));this.own(g.after(a,"onScrollCursorIntoView",f.hitch(this,"_handleScrollIntoView")))},_handleCursorViewUpdate:function(){this._layout()},_handleScrollIntoView:function(){this._rtcView.scrollPositionIntoView(this._cursorController.getScrollIntoViewPosition())},getBox:function(){return this._permanentLayer},_hide:function(a){d.set(a,{visibility:"hidden"});this._hidden=!0},_layout:function(){this._removeAllCarets();this._cursorController.getCursors().forEach(function(a,
b){var c;c=0===b?this._permanentLayer:this._addCursorLayer();var d=this._rtcView.getCoordinateForPosition(a.position);this.updateCaretGeometry(c,d);a.isSelectionHidden()||a.isHidden()?this._hide(c):(this._hidden=!1,d=(d=a.getNode())&&!d.isReadOnly(),c.style.visible=!0,c.style.visibility="visible",c.style.borderColor=d?this.ACTIV_COLOR:this.INACTIV_COLOR,d?c.removeAttribute("inactive"):c.setAttribute("inactive",""))},this);this._blinkAll();this._addAllLayers()},updateCaretGeometry:function(a,b){var c=
b.y+"px",d=b.height-1+"px";a.style.left=(b.x||this._paddingLeft)+"px";a.style.top=c;a.style.height=d},_blinkAll:function(){this._blinkAllTimer&&clearTimeout(this._blinkAllTimer);this._blinkAllTimer=setTimeout(f.hitch(this,this._blink),600)},_blink:function(){this._hidden||(this._layers.forEach(function(a){"hidden"===d.get(a,"visibility")?d.set(a,"visibility","visible"):a.hasAttribute("inactive")||d.set(a,"visibility","hidden")},this),"hidden"===d.get(this._permanentLayer,"visibility")?d.set(this._permanentLayer,
"visibility","visible"):this._permanentLayer.hasAttribute("inactive")||d.set(this._permanentLayer,"visibility","hidden"),this._blinkAllTimer=setTimeout(f.hitch(this,this._blink),600))},_removeAllCarets:function(){this._layers.forEach(function(a){this._layer.removeChild(a)},this);this._layers=[]},_addAllLayers:function(){var a=document.createDocumentFragment();this._layers.forEach(function(b){a.appendChild(b)});this._layer.appendChild(a)},_addCursorLayer:function(){var a=document.createElement("span");
a.className="cursor";this._layers.push(a);return a}})})},"MW/equations/editor/view/Helper":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-geometry dojo/query MW/equations/editor/utils/EquationPlugin".split(" "),function(h,f,g,e,d,c){return h(c,{pluginId:"view.helper",pluginDependencies:["view.renderer","view.rootnode"],constructor:function(b,a){this._rootNode=a;this.own(g.after(b,"onRedraw",f.hitch(this,"_handleRedraw")))},getNodeGeometry:function(b){return this._getNodeGeometryById(b.id)},
isAttachedToDocument:function(){for(var b=this._rootNode;b&&!b.body;)b=b.parentNode;return!!b},getRootGeometry:function(){return e.position(this._rootNode.querySelector(".render-target")||this._rootNode,!0)},_getNodeGeometryById:function(b){var a=e.position(this._rootNode,!0);if(!this._cache[b]){var c=d("*[id\x3d'"+b+"']",this._rootNode)[0],c=e.position(c,!0);this._cache[b]={relativeX:c.x-a.x,relativeY:c.y-a.y,h:c.h,w:c.w}}return f.mixin({x:this._cache[b].relativeX+a.x,y:this._cache[b].relativeY+
a.y},this._cache[b])},_handleRedraw:function(){this._cache={}}})})},"MW/equations/editor/view/HighlightActiveRow":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/query MW/equations/editor/utils/EquationPlugin".split(" "),function(h,f,g,e,d,c){return h(c,{pluginId:"view.highlightactiverow",pluginDependencies:["api.attributes","model.cursor","controller.caret","view.rootnode"],constructor:function(b,a,c,d){this._attributes=b;this._cursor=a;this._rootnode=d;this.own(b.observe("disabled",
f.hitch(this,"_highlightRow")));this.own(g.after(c,"beforeCaretRedraw",f.hitch(this,"_highlightRow")))},_highlightRow:function(){for(var b=d(".MathRow",this._rootnode),a=0;a<b.length;a+=1)e.remove(b[a],"highlight");if(!this._cursor.hasSelection()&&!this._attributes.get("disabled")&&(b=this._cursor.getPosition(),b=d('*[id\x3d"'+b.id+'"]',this._rootnode),0<b.length)){for(b=b[0];b&&!b.className.match(/MathRow/);)if(b=b.parentNode,!this._rootnode.contains(b))return;b&&!b.parentNode.className.match(/MathRoot/)&&
e.add(b,"highlight")}}})})},"MW/equations/editor/view/KeyHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on MW/equations/editor/utils/EquationPlugin MW/rtc/events/KeyHandler".split(" "),function(h,f,g,e,d,c){return h(d,{pluginId:"view.keyhandler",pluginDependencies:["controller.keyhandler","external.actionservice","view.rootnode"],constructor:function(b,a,d){this._actionService=a;this._rtcKeyHandler=new c({insertTextAtCurrentPosition:f.hitch(b,"handleType")},
{getAllActions:function(){return[]},addAction:function(){},removeAction:function(){}},d);b.registerView(this);this.own(e(this._rtcKeyHandler.keyCapture,"blur",f.hitch(this,"onBlur")));this.own(e(this._rtcKeyHandler.keyCapture,"focus",f.hitch(this,"onFocus")))},getKeyCapture:function(){return this._rtcKeyHandler.keyCapture},enableBrowserCopyPaste:function(b){this._rtcKeyHandler.enableBrowserCopyPaste(b)},addBinding:function(b){this._rtcKeyHandler.addBinding(b)},listenTo:function(b,a){this._rtcKeyHandler.listenTo(b,
a)},focus:function(){this.getKeyCapture().style.visibility="visible";this._rtcKeyHandler.focus()},onBlur:function(){this.getKeyCapture().style.visibility="hidden"},onFocus:function(){}})})},"MW/equations/editor/view/MoveKeyCaptureOnFocus":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-style","MW/equations/editor/utils/EquationPlugin"],function(h,f,g,e,d){return h(d,{pluginId:"view.movekeycaptureonfocus",pluginDependencies:["view.caret","view.keyhandler"],constructor:function(c,
b){this._caret=c;this._keyHandlerView=b;this.own(g.before(b,"focus",f.hitch(this,"_beforeFocus")))},_beforeFocus:function(){var c=this._caret.getGeometry(),b=this._keyHandlerView.getKeyCapture();e.set(b,{top:c.y+"px",left:c.x+"px",position:"absolute"})}})})},"MW/equations/editor/view/RootNode":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,f){return h(null,{pluginId:"view.rootnode",pluginResolver:"getNode",constructor:function(){this._rootNode=f.create("div",{className:"mwEquationEditor",
style:{position:"relative",display:"inline-block"}})},getNode:function(){return this._rootNode},destroy:function(){f.destroy(this._rootNode)}})})},"MW/equations/editor/view/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils MW/equations/renderer/Renderer".split(" "),function(h,f,g,e,d,c,b,a){return h(c,{pluginId:"view.renderer",pluginDependencies:["api.attributes",
"model.equation","view.rootnode"],constructor:function(a,b,c){this._attributes=a;this._rootNode=c;this._renderTarget=d.create("div",{className:"render-target"},this._rootNode);this._equation=b;this.own(g.after(b,"onChange",f.hitch(this,"redraw")));this._createRenderer();["pxPerEm","cacheFontMetrics"].forEach(function(b){this.own(a.observe(b,f.hitch(this,"_handleRendererAttributeChange",b)))},this);this.own(a.observe("disabled",f.hitch(this,"_handleAttributeChange","disabled","enabled")));this.own(a.observe("readonly",
f.hitch(this,"_handleAttributeChange","readonly","writable")));this.own(a.observe("emptyEquation",f.hitch(this,"_handleEmptyEquationChanged")))},getEquationRenderer:function(){return this._renderer},_handleAttributeChange:function(a,b){this._attributes.get(a)?(e.add(this._rootNode,a),e.remove(this._rootNode,b)):(e.add(this._rootNode,b),e.remove(this._rootNode,a))},_handleEmptyEquationChanged:function(a){this._isEmptyEquation()&&this.redraw()},_createRenderer:function(){var b={equationFormat:"mathml",
cacheFontMetrics:this._attributes.get("cacheFontMetrics")||!1};this._attributes.get("pxPerEm")&&(b.pxPerEm=this._attributes.get("pxPerEm"));this._renderer=new a(b)},_handleRendererAttributeChange:function(){this._createRenderer();this._renderTarget&&this.redraw()},onRedraw:function(){},redraw:function(){if(this._isEmptyEquation()){var a=this._attributes.get("emptyEquation");if("string"===typeof a){var b=this._equation.getRoot().children[0].children[0].id;d.empty(this._renderTarget);d.create("span",
{id:b,className:"MathRow",display:"inline-block"},this._renderTarget).innerHTML=a;return}}this._renderer.draw(this._equation.getRoot(),this._renderTarget).then(f.hitch(this,function(){this.onRedraw()}))},_isEmptyEquation:function(){return b.isEmptyEquation(this._equation.getRoot())}})})},"MW/equations/editor/view/Selection":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style"],function(h,f,g){return h(null,{pluginId:"view.selection",pluginDependencies:["view.rootnode"],constructor:function(e){this._node=
f.create("span",{"class":"selection",style:{display:"none",position:"absolute",width:"1px",backgroundColor:"rgba(0,132,230,.35)",height:"16px",zIndex:999}},e);this._hidden={}},getNode:function(){return this._node},hide:function(e){this._hidden[e||"default"]=!0;this._node.style.display="none"},show:function(e){delete this._hidden[e||"default"];this.isHidden()||(this._node.style.display="inline-block")},getGeometry:function(){return{x:this._x,y:this._y,h:this._h,w:this._w}},isHidden:function(){return 0<
Object.keys(this._hidden).length},set:function(e,d,c,b){this._x=e;this._y=d;this._h=b;this._w=c;g.set(this._node,{left:e+"px",display:this.isHidden()?"none":"inline-block",top:d+"px",height:b+"px",width:c+"px"})}})})},"MW/equations/utils/PluginService":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(h,f,g){return f(null,{constructor:function(e){e=e||{};this._disabled=e.disabled||[];this._dependencies=g.mixin({},e.inject);this._dependencies["core.resolver"]=this;
this._destroyOrder=[];this._byPluginId={};this._byPluginFamily={};this._registry=e.registry||[];this._resolveNames();this._resolveDependencies(e.enable||[])},get:function(e){return this._dependencies[e]},inject:function(e,d){this._dependencies[e]=d},destroy:function(){this._destroyOrder.forEach(function(e){g.isObject(e)&&g.isFunction(e.destroy)&&e.destroy()},this);this._destroyOrder=[];this._dependencies=[]},_resolveNames:function(){this._registry.forEach(function(e){var d=e.prototype,c=d.pluginId,
d=d.pluginFamily;c&&(this._byPluginId[c]||(this._byPluginId[c]=[]),this._byPluginId[c].push(e),d&&(this._byPluginFamily[d]||(this._byPluginFamily[d]=[]),this._byPluginFamily[d].push(c)))},this)},_resolveDependencies:function(e){e.forEach(function(d){this._getOrCreate(d)},this)},_getOrCreate:function(e){if(this._dependencies.hasOwnProperty(e))return this._dependencies[e];if(this._byPluginId[e])return this._createById(e);if(this._byPluginFamily[e]){var d;this._byPluginFamily[e].forEach(g.hitch(this,
function(c){0>this._disabled.indexOf(c)&&(d=this._getOrCreate(c))}));return d}},_createById:function(e){var d=this._byPluginId[e][0],c=[];d.prototype.pluginDependencies&&(c=h.map(d.prototype.pluginDependencies,g.hitch(this,"_getOrCreate")));c=new (Function.prototype.bind.apply(d,[null].concat(c)));this._destroyOrder.unshift(c);(d=d.prototype.pluginResolver)&&(c=c[d]());this.inject(e,c);return c}})})},"MW/rtc/plugins/equations/equationeditor/EquationEditorBridge":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has dojo/on MW/equations/editor/utils/CaretUtilities MW/equations/editor/utils/CursorUtils MW/equations/editor/utils/EquationPlugin MW/equations/editor/utils/NodeUtils".split(" "),
function(h,f,g,e,d,c,b,a,k){var l="up down left right home end ctrl_a meta_a meta_shift_left meta_shift_right meta_left meta_right".split(" "),m="alt_delete alt_backspace shift_delete shift_backspace ctrl_delete ctrl_backspace meta_delete meta_backspace".split(" ");return h(a,{pluginId:"equationeditor.rtc-bridge",pluginDependencies:"api.attributes controller.caret controller.cursor controller.editmanager controller.focus controller.keyhandler controller.mouse controller.selection external.actionservice helper.plaintextgenerator helper.mimetype model.cursor model.equation rtc.divcaret rtc.cursor rtc.deletenode rtc.document rtc.equationnode rtc.keyhandler rtc.undoredo.editblock rtc.updatenode rtc.scrollpane view.caret view.helper view.keyhandler view.rootnode view.selection".split(" "),
constructor:function(a,b,c,d,e,h,k,l,m,x,B,A,D,F,H,L,N,M,P,Q,O,I,E,K,Y,Z,S){this._attributes=a;this._caretController=b;this._cursorController=c;this._editManager=d;this._selectionController=l;this._actionService=m;this._plainTextGeneratorHelper=x;this._mimeTypeHelper=B;this._cursor=A;this._deleteNode=L;this._equation=D;this._rtcCursor=H;this._rtcDocument=N;this._equationnode=M;this._viewHelper=K;this._updateNode=O;this._scrollPane=I;this._focusController=e;this._keyHandlerView=Y;this._rootNode=Z;
this._mouseController=k;this._keyHandler=P;this._rtcEditBlockController=Q;this._keyHandlerController=h;S.hide("rtc");this._equationnode.setEditorBridge(this);this._rtcOffset=0;this._installMouseTrap();this.own(g.after(E,"getNode",function(){return F.getBox()}));m.loadActions([{id:"equation-editor-bridge.backspace",key:"backspace",enabled:!0,keyPriority:5,callback:f.hitch(this,"_handleDelete")},{id:"equation-editor-bridge.backspace",key:"delete",enabled:!0,keyPriority:5,callback:f.hitch(this,"_handleDelete")},
{id:"equation-editor-bridge.escape",key:"escape",enabled:!0,callback:f.hitch(this,"_handleESC")},{id:"equation-editor-bridge.enter",enabled:!0,key:"enter",keyPriority:-5,callback:f.hitch(this,"_handleLineBreak")}]);this.own(g.after(d,"beforeBlock",f.hitch(this,"_handleBeforeBlock")));this.own(g.after(d,"afterBlock",f.hitch(this,"_handleAfterBlock")));this.own(g.after(d,"onNewStep",f.hitch(this,"_handleNewUndoStep"),!0));this.own(g.after(A,"onChange",f.hitch(this,"_handleEquationCursorChange")));this.own(a.observe("disabled",
f.hitch(this,"_handleDisabledChange")));this._installKeyDelegates();g.after(Y,"onFocus",f.hitch(this,"_showCursor"))},_showCursor:function(){this._rtcCursor.show()},convertToText:function(){return this._plainTextGeneratorHelper.convertSelection({node:this._equation.getRoot(),left:0,right:1})},handlePaste:function(a){var b={};this._mimeTypeHelper.acceptedMimeTypes().forEach(function(c){var d=a(c);d&&(b[c]=d)});this._editManager.createBlock(f.hitch(this,function(a){this._mimeTypeHelper.insertContent(a,
b)}))},convertSelection:function(){if(!this._cursorController.hasSelection()){var a=this._equation.getRoot().children[0];return this._mimeTypeHelper.convertRange({node:a,left:0,right:a.children.length})}return this._mimeTypeHelper.convertSelection()},_handleDelete:function(){if(1===this._cursorController.availableCursorPositions())return this._deleteNode.call(null),!0},_handleESC:function(){k.isEmptyEquation(this._equation.getRoot())?this._deleteNode.call(null):this._rtcCursor.setPosition(this._equationnode.endPosition())},
_handleLineBreak:function(){var a=this._cursorController.getPosition();if(k.categorizeNode(a.node)===k.CATEGORY.PLACEHOLDER_ATOM){var a=this._equation.getParentAndIndex(a.node.parent),b=a.parent;if(!("MathMatrix"!==b.className||1!==b.cols||a.index!==b.children.length-1))if(a=b.parent,"MathRow"===a.className&&"MathRoot"===a.parent.className)return this._actionService.executeAction("equationeditor.backspace"),this._rtcCursor.setPosition(this._equationnode.endPosition()),this._rtcDocument.insertBreak(),
!0}},cursorOffsetFromXY:function(a,c){var d=this._caretController.getPositionFromXY(a,c);return d&&b.logicalFromPosition(d,this._equation.getRoot())||0},caretCoordinatesFor:function(a){var d;if(a===this._rtcAnchorOffset&&this._cursor.hasSelection()){d=this._selectionController.getSelectionSpan();var e=c.coordinatesFromSelection(d,this._rootNode);d={y:e.y,height:e.h,x:d.reversed?e.x+e.w:e.x}}d||(a=b.positionFromLogical(a,this._equation.getRoot()),d=c.coordinatesFromPosition(a,this._rootNode));d||(d=
{height:10,x:0,y:0});d.width=1;d.pageX=this._viewHelper.getRootGeometry().x+d.x;d.x+=this._equationnode.getLeft();d.y+=this._equationnode.getTop();return d},maxOffset:function(){return this._cursorController.availableCursorPositions()-1},setCursor:function(a,b){this._rtcOffset===a&&this._rtcAnchorOffset===b||("undefined"===typeof b?this._cursorController.setLogical(a):this._cursorController.setSelectionLogical(b,a),this._rtcOffset=a,this._rtcAnchorOffset=b)},_installMouseTrap:function(){var a=!1;
this.own(this._mouseController.addMouseDown(f.hitch(this,function(b){this._rtcCursor.externalMouseDown();b.stopPropagation();a=!0}),12));this.own(this._mouseController.addMouseDoubleClick(function(b){b.stopPropagation();a=!0},12));this.own(this._mouseController.addMouseMove(function(b){a&&b.stopPropagation()},12));this.own(this._mouseController.addMouseUp(function(b){a&&(b.stopPropagation(),a=!1)},12))},_installKeyDelegates:function(){Object.keys(this._keyHandler.keyMap).forEach(function(a){this._keyHandlerController.add(a,
f.hitch(this,function(){1!==this._keyHandlerController._bindings[a]._handlers.length&&0>l.indexOf(a)||0<=m.indexOf(a)||this._keyHandler.keyMap[a].forEach(function(a){a.call(null)})}))},this)},_handleBeforeBlock:function(){this._rtcEditBlockController.startEdit()},_handleNewUndoStep:function(a){var b=this._rtcEditBlockController.getActiveBlock();b.addCommands([a]);this._updateNode();b.pushAndExecuteCommand({execute:f.hitch(this._focusController,"focus"),unexecute:function(){}})},_handleAfterBlock:function(){this._rtcEditBlockController.endEdit();
this._handleEquationCursorChange();this._rtcCursor.onUpdate(!1,!1)},_handleDisabledChange:function(){this._attributes.get("disabled")?(this._cursor.clearSelection(),this._rtcAnchorOffset=this._rtcOffset=void 0,this._actionService.detach()):this._actionService.attach()},_handleEquationCursorChange:function(){var a=this._cursorController.getLogical(),b=this._cursorController.getAnchorLogical();if(!(this._rtcOffset===a&&b===this._rtcAnchorOffset)){"undefined"!==typeof b?(this._rtcOffset=b,this._rtcAnchorOffset=
void 0,this._rtcCursor.releaseAnchor(),this._rtcCursor.setPosition(this._equationnode,{posInNode:b+1}),this._rtcCursor.fixAnchor(!0)):this._rtcCursor.releaseAnchor();this._rtcOffset=a;this._rtcAnchorOffset=b;this._rtcCursor.setPosition(this._equationnode,{posInNode:a+1},!0);var c,d;e("safari")&&(c=this._scrollPane.scrollLeft,d=this._scrollPane.scrollTop);this._focusController.focus();e("safari")&&(this._scrollPane.scrollLeft=c,this._scrollPane.scrollTop=d)}}})})},"MW/rtc/plugins/equations/equationeditor/MathMLMimeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/equations/equationeditor/MathMLMimeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/equations/equationeditor/MathMLMimeConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/PositionUtilities","MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/equations/equationcontroller/nodes/EquationNode"],
function(h,f,g,e,d){return h(null,{_PRIORITY:95,constructor:function(c){c.registerMimeHandler(e.MATHML_PRESENTATION,f.hitch(this,"_convertFromMimeData"),this._PRIORITY);c.registerNodeConverter(d,f.hitch(this,"_convertFromEquationNode"));c.registerPasteHandler(d,f.hitch(this,"_handlePaste"))},_handlePaste:function(c,b,a){if(c&&(0===c.getStartPosition().getOffset()||c.getEndPosition().getOffset()===c.getEndPosition().getNode().maxOffset())||b&&(0===b.getOffset()||b.getOffset()===b.getNode().maxOffset()))return!1;
(c?c.getStartPosition().getNode():b.getNode()).getEditorBridge().handlePaste(a);return!0},_convertFromEquationNode:function(c){var b=c.getStartPosition().getNode();if(b.isInstanceOf(d)){var a=c.getStartPosition();c=c.getEndPosition();if(0===g.comparePositions(a,c))return[];if(b=b.getEditorBridge())return b=b.convertSelection(),0!==a.getOffset()&&b.push({flavor:e.MATLAB_RICHTEXT,content:void 0}),b}return[]},_convertFromMimeData:function(c){return[(new d({className:"EquationNode",encoding:"mathml",
mathmlString:c})).serialize()]},priority:function(){return 55}})})},"MW/rtc/plugins/equations/latexeditor/LaTeXEditorProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","./LaTeXEditor","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{requires:function(){return{createInstance:["rtc.focusservice","rtc.cursor","rtc.actionservice","rtc.hyperlinkservice","rtc.richtext.equationcontroller"]}},createInstance:function(d,c,b,a,e){var f={};f.focusService=d;f.cursor=c;f.actionService=
b;f.hyperlinkService=a;f.equationController=e;return new g(f)}})})},"MW/rtc/plugins/equations/latexeditor/LaTeXEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/DocumentUtilities MW/rtc/RichTextComponentFeatureEnum ./view/EquationDialog".split(" "),function(h,f,g,e,d,c){return h(null,{constructor:function(b){b=b||{};this._focusService=b.focusService;this._cursor=b.cursor;this._actionService=b.actionService;this._hyperlinkService=b.hyperlinkService;this._equationController=
b.equationController;this._actionService.loadActions([{id:d.EQUATIONS.LATEX_EDITOR_ACTION,enabled:!0,key:"ctrl_shift_l",platformKey:{mac:"meta_shift_l"},callback:f.hitch(this,this._editLaTeXEquation)}]);this._connections=[];this._connections.push(g.after(this._cursor,"onChange",f.hitch(this,this._updateActions)));this._connections.push(g.after(this._equationController,"onActionsNeedUpdate",f.hitch(this,this._updateActions)));this._connections.push(g.after(this._cursor,"onDoubleClick",f.hitch(this,
this._doubleClick)))},_updateActions:function(){this._actionService.updateAction(d.EQUATIONS.LATEX_EDITOR_ACTION,{enabled:this._equationController.canEditLaTeXEquation()})},_doubleClick:function(){this._equationController.equationUnderCursor("tex")&&(this._cursor.resetAction(),this._editLaTeXEquation())},_dlgClose:function(){this.eqnDlg=null;this._focusService.setFocus()},_dlgAccept:function(b){this._equationController.updateDocument(b);setTimeout(f.hitch(this,function(){this._focusService.setFocus()}),
0)},_editLaTeXEquation:function(){if(this._equationController.canEditLaTeXEquation()){var b=this._equationController.equationUnderCursor("tex"),b={encoding:"tex",currentNode:b,texString:b?b.getTeXString():this._cursor.selectedText(),displayStyle:b?b.getDisplayStyle():""===this._cursor.getNode().getText().trim()};this.eqnDlg=new c(f.hitch(this,this._dlgClose),f.hitch(this,this._dlgAccept),this._hyperlinkService,b)}},dispose:function(){this._connections.forEach(function(b){b.remove()})}})})},"MW/rtc/plugins/equations/latexeditor/view/EquationDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/aspect dojo/dom-construct dojo/dom-style dojo/keys dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/SimpleTextarea dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/equationDialog mw-dialog-utils/DialogUtils MW/equations/renderer/Renderer mw-form/PushButton dojo/text!./EquationDialogTemplate.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){return h([k,l,m],{templateString:u,constructor:function(a,b,c,d){this._closeCallBack=a;this._acceptCallBack=b;this._hyperlinkService=c;this._info=d},postCreate:function(){this.inherited(arguments);this.okButton.set("label",n.ok);this.cancelButton.set("label",n.cancel);this.helpButton.set("label",p.helpLabel);this.equationCodeLabel.innerHTML=p.codeLabel;this.previewLabel.innerHTML=p.previewLabel;this.codeTextInput.set("value",this._info.texString);a(this.codeTextInput,
"input",f.hitch(this,"onInput"));var b=this;setTimeout(function(){b.codeTextInput.focus()},0);this.keyUpHandler=a(this.okButton,"click",f.hitch(this,"onOK"));a(this.cancelButton,"click",f.hitch(this,"onCancel"));a(this.helpButton,"click",f.hitch(this,"onHelp"));this._equationDialogWidget=r.displayModalDialog(this,p.title,[]);this.renderer=new s({equationFormat:"tex"});this._renderPreview(!0)},onTextKeyup:function(a){},onInput:function(){if(!this.textDirty){var a=this;setTimeout(function(){a._renderPreview()},
250);this.textDirty=!0}},_renderPreview:function(a){if(!this._closing&&(this.textDirty||a)){a=!1;d.empty(this.previewTextInput);var b=this.codeTextInput.get("value");b.length&&(a=this.renderer.render(this.renderer.setDisplaystyleIfNeeded(b,!0),this.previewTextInput,{displaystyle:this._info.displayStyle}));this.textDirty=!1;this.okButton.set("Disabled",!a)}},onClose:function(){this._closing=!0;this._closeCallBack()},onCancel:function(){this._closing=!0;this._equationDialogWidget.onClose()},onHelp:function(){this._hyperlinkService.openUrl("matlab:helpview(fullfile(docroot,'matlab','helptargets.map'),'edit_equation')")},
onOK:function(){this._closing=!0;this._info.texString=this.codeTextInput.get("value");this._acceptCallBack(this._info);this.keyUpHandler.remove();this._equationDialogWidget.onClose()}})})},"dojo/_base/query":function(){define(["../query","./NodeList"],function(h){return h})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(h,f,g){f=f.NodeList;var e=f.prototype;e.connect=f._adaptAsForEach(function(){return h.connect.apply(this,arguments)});
e.coords=f._adaptAsMap(h.coords);f.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");g.forEach(f.events,function(d){var c="on"+d;e[c]=function(b,a){return this.connect(c,b,a)}});return h.NodeList=f})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(h,f,g,e,d,c,b,a){h.byId=f.byId;h.isDescendant=
f.isDescendant;h.setSelectable=f.setSelectable;h.getAttr=e.get;h.setAttr=e.set;h.hasAttr=e.has;h.removeAttr=e.remove;h.getNodeProp=e.getNodeProp;h.attr=function(a,b,c){return 2==arguments.length?e["string"==typeof b?"get":"set"](a,b):e.set(a,b,c)};h.hasClass=c.contains;h.addClass=c.add;h.removeClass=c.remove;h.toggleClass=c.toggle;h.replaceClass=c.replace;h._toDom=h.toDom=b.toDom;h.place=b.place;h.create=b.create;h.empty=function(a){b.empty(a)};h._destroyElement=h.destroy=function(a){b.destroy(a)};
h._getPadExtents=h.getPadExtents=a.getPadExtents;h._getBorderExtents=h.getBorderExtents=a.getBorderExtents;h._getPadBorderExtents=h.getPadBorderExtents=a.getPadBorderExtents;h._getMarginExtents=h.getMarginExtents=a.getMarginExtents;h._getMarginSize=h.getMarginSize=a.getMarginSize;h._getMarginBox=h.getMarginBox=a.getMarginBox;h.setMarginBox=a.setMarginBox;h._getContentBox=h.getContentBox=a.getContentBox;h.setContentSize=a.setContentSize;h._isBodyLtr=h.isBodyLtr=a.isBodyLtr;h._docScroll=h.docScroll=
a.docScroll;h._getIeDocumentElementOffset=h.getIeDocumentElementOffset=a.getIeDocumentElementOffset;h._fixIeBiDiScrollLeft=h.fixIeBiDiScrollLeft=a.fixIeBiDiScrollLeft;h.position=a.position;h.marginBox=function(b,c){return c?a.setMarginBox(b,c):a.getMarginBox(b)};h.contentBox=function(b,c){return c?a.setContentSize(b,c):a.getContentBox(b)};h.coords=function(b,c){h.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");b=f.byId(b);var d=g.getComputedStyle(b),d=a.getMarginBox(b,d),e=
a.position(b,c);d.x=e.x;d.y=e.y;return d};h.getProp=d.get;h.setProp=d.set;h.prop=function(a,b,c){return 2==arguments.length?d["string"==typeof b?"get":"set"](a,b):d.set(a,b,c)};h.getStyle=g.get;h.setStyle=g.set;h.getComputedStyle=g.getComputedStyle;h.__toPixelValue=h.toPixelValue=g.toPixelValue;h.style=function(a,b,c){switch(arguments.length){case 1:return g.get(a);case 2:return g["string"==typeof b?"get":"set"](a,b)}return g.set(a,b,c)};return h})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),
function(h,f,g,e,d,c,b,a,k){function l(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var m=function(a){return 1==a.length&&"string"==typeof a[0]},q=function(a){var b=a.parentNode;b&&b.removeChild(a)},n=f.NodeList,p=n._adaptWithCondition,r=n._adaptAsForEach,s=n._adaptAsMap;e.extend(n,{_normalize:function(a,b){var d=!0===a.parse;if("string"==typeof a.template){var f=a.templateFunc||h.string&&h.string.substitute;a=f?f(a.template,a):a}f=typeof a;
"string"==f||"number"==f?(a=c.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?e._toArray(a.childNodes):[a]):e.isArrayLike(a)?e.isArray(a)||(a=e._toArray(a)):a=[a];d&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,d,e){if(!(1!=b.nodeType&&"only"==d))for(var f,g=a.length,k=g-1;0<=k;k--){var l=e?this._cloneNode(a[k]):a[k];if(a._runParse&&h.parser&&h.parser.parse){f||(f=b.ownerDocument.createElement("div"));f.appendChild(l);h.parser.parse(f);for(l=f.firstChild;f.firstChild;)f.removeChild(f.firstChild)}k==
g-1?c.place(l,b,d):b.parentNode.insertBefore(l,b);b=l}},position:s(b.position),attr:p(l(a),m),style:p(l(k),m),addClass:r(d.add),removeClass:r(d.remove),toggleClass:r(d.toggle),replaceClass:r(d.replace),empty:r(c.empty),removeAttr:r(a.remove),marginBox:s(b.getMarginBox),place:function(a,b){var d=f(a)[0];return this.forEach(function(a){c.place(a,d,b)})},orphan:function(a){return(a?f._filterResult(this,a):this).forEach(q)},adopt:function(a,b){return f(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;
var b=new n;this.map(function(c){f(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=f._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(g.filter(c,b[d],b[d+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var d=0,e;e=this[d];d++)a.length?this._place(a,e,b,0<d):c.empty(e);return this}});return n})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/sniff","./TextBox"],function(h,f,g,e){return h("dijit.form.SimpleTextarea",e,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);g("ie")&&this.cols&&
f.add(this.textbox,"dijitTextAreaCols")},filter:function(d){d&&(d=d.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(d){if(this.maxLength){var c=parseInt(this.maxLength),b=this.textbox.value.replace(/\r/g,""),c=b.length-c;if(0<c){var a=this.textbox;if(a.selectionStart){var e=a.selectionStart,f=0;g("opera")&&(f=(this.textbox.value.substring(0,e).match(/\r/g)||[]).length);this.textbox.value=b.substring(0,e-c-f)+b.substring(e-f);a.setSelectionRange(e-c,e-c)}else this.ownerDocument.selection&&
(a.focus(),b=this.ownerDocument.selection.createRange(),b.moveStart("character",-c),b.text="",b.select())}}this.inherited(arguments)}})})},"mw-form/PushButton":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/VerticalAlignmentMixin mw-mixins/IconAndTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/PushButton.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x){return h(w.validate([g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v]),{baseClass:"mwWidget mwPushButton",templateString:x,postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"keydown",this._handleKeydown.bind(this)),f(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){switch(a.keyCode){case 13:this.get("disabled")||a.target.click();break;case 32:a.preventDefault()}},_handleKeyup:function(a){switch(a.keyCode){case 32:this.get("disabled")||
a.target.click()}},_qeClick:function(){this.emit("click")}})})},"MW/rtc/plugins/events/EventHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/events/DefaultEventHandler"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.cursor","rtc.cursorcontroller"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/events/DefaultEventHandler":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/aspect dojo/has dojo/on dojo/touch mw-gesture/GestureDetector mw-gesture/GestureUtils MW/rtc/plugins/events/EventHandler ./EventHandlerUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(m,{constructor:function(a,d,e){this._cursor=d;this._cursorController=e;this._view=a;this._handles=[];a=a.getDomtarget();this._gestureDetector=new k(a);this._handles.push(this._gestureDetector);this._gestureDetector.gestures.down.addGestureHandler({start:g.hitch(this,function(a){this._handleGesture(a,g.hitch(this,"_onSingleDown"));this.onMouseDown(a)}),end:g.hitch(this,"onMouseUp")});this._gestureDetector.events.tap.addEventHandler(g.hitch(this,function(a){this._handleGesture(a,
g.hitch(this,"_onTap"))}));this._gestureDetector.gestures.tapDown.addGestureHandler({start:g.hitch(this,function(a){this._handleGesture(a,g.hitch(this,"_onTapDown"));this.onMouseDown(a)}),end:g.hitch(this,"onMouseUp")});this._gestureDetector.gestures.doubleTapDown.addGestureHandler({start:g.hitch(this,function(a){this._handleGesture(a,g.hitch(this,"_onDoubleTapDown"));this.onMouseDown(a)}),end:g.hitch(this,"onMouseUp")});this._gestureDetector.gestures.secondaryDown.addGestureHandler({start:g.hitch(this,
function(a){this._handleGesture(a,g.hitch(this,"_onSecondaryDown"));this.onMouseDown(a)}),end:g.hitch(this,"onMouseUp")});this._handles.push(b(a,"selectstart",g.hitch(this,"_handleSelectStart")));this._focusHandle=b.pausable(a,"focus",g.hitch(this,"onFocus"));this._handles.push(this._focusHandle);c("chrome")||this._handles.push(b.pausable(a,"focusin",g.hitch(this,this.onFocus)))},destroy:function(){this._handles.forEach(function(a){a.remove()})},_handleGesture:function(a,b){var c;c=this._view.fixEvent(a);
this._view.isFixedEventOutside(c)||(this._cursor.show(),c=this._view.getPositionFromEvent(c),b(a,c),q.collapseBrowserSelection())},_onSingleDown:function(a,b){l.isTouchEvent(a)||(this._view.isDraggable()&&this._cursorController.isEventInSelection(a)?this._startDragAction():(this.onFocus(),this._startSelectionAction(a,b),f.stop(a)))},_onTapDown:function(a,b){this._startWordSelectionAction(a,b,!0);q.preventDefaultIfTouchEvent(a)},_onDoubleTapDown:function(a,b){this._startLineSelectionAction(a,b);q.preventDefaultIfTouchEvent(a)},
_onSecondaryDown:function(a,b){this._startSecondarySelectionAction(a,b)},_onTap:function(a,b){l.isTouchEvent(a)&&(this._cursor.resetAction(),this._cursor.setCursorToEvent(a))},_startDragAction:function(){var a=this,b=this._gestureDetector.gestures.down;this._focusHandle.pause();q.startDragActionForGesture(b,this._cursorController,this._view);b.addTemporaryGestureHandler({always:function(){a._focusHandle.resume();a.onFocus()}})},_startSelectionAction:function(a,b){var c=this,d=this._gestureDetector.gestures.down;
q.startSelectionActionForGesture(d,this._cursorController,this._view,a,b);d.addTemporaryGestureHandler({always:function(){c.onFocus()}})},_startWordSelectionAction:function(a,b){var c=this,d=this._gestureDetector.gestures.tapDown;q.startWordSelectionActionForGesture(d,this._cursorController,this._view,a,b);d.addTemporaryGestureHandler({always:function(){c.onFocus()}})},_startLineSelectionAction:function(a,b){var c=this,d=this._gestureDetector.gestures.doubleTapDown;q.startLineSelectionActionForGesture(d,
this._cursorController,this._view,a,b);d.addTemporaryGestureHandler({always:function(){c.onFocus()}})},_startSecondarySelectionAction:function(a,b){q.startSecondarySelectionActionForGesture(this._gestureDetector.gestures.secondaryDown,this._cursorController,this._view,a,b)},_handleSelectStart:function(a){var b=a.target.tagName;"TEXTAREA"===b||"INPUT"===b||a.preventDefault()},onMouseDown:function(a){},onMouseUp:function(a){},onFocus:function(a){},onBlur:function(a){}})})},"MW/rtc/plugins/events/EventHandler":function(){define(["dojo/_base/declare"],
function(h){return h(null,{onMouseDown:function(f){throw Error("Unimplemented API: onMouseDown");},onMouseUp:function(f){throw Error("Unimplemented API: onMouseUp");},onFocus:function(f){throw Error("Unimplemented API: onFocus");},onBlur:function(f){throw Error("Unimplemented API: onBlur");}})})},"MW/rtc/plugins/events/EventHandlerUtilities":function(){define(["dojo/_base/window","dojo/has","mw-gesture/GestureUtils"],function(h,f,g){var e=function(c,b,a){var d;b=c.fixEvent(b);f("mozilla")&&0===b.layerX&&
0===b.layerY?d=void 0:(c.isFixedEventOutside(b)?(d=c.getFixedEventDirectionOutside(b),c=c.getFixedEventPositionAtBorder(b)):c=c.getPositionFromEvent(b),d={diffXY:d,position:c});if(d)a.onMove(d.position,d.diffXY,b.layerY,b.layerX)},d=function(){var c=h.global.getSelection();c.isCollapsed||c.collapseToStart()};return{startSelectionActionForGesture:function(c,b,a,f,g){var h=a.fixEvent(f),q;q=f.altKey?b.startBlockSelectionAction(g,f.shiftKey,h.layerY,h.layerX):b.startSelectionAction(g,f.shiftKey,f.layerY);
var n=f.altKey;c.addTemporaryGestureHandler({progress:function(c){var r=c.altKey;n===r?e(a,c,q):(n=r,q=c.altKey?b.startBlockSelectionAction(g,f.shiftKey,h.layerY,h.layerX):b.startSelectionAction(g,f.shiftKey,f.layerY));d()},end:function(a){q.resolve();d()},cancel:function(){q.cancel()},always:function(){d()}})},startWordSelectionActionForGesture:function(c,b,a,f,g){var h=b.startGroupedSelectionAction(g,f.shiftKey,f.layerY,!0);c.addTemporaryGestureHandler({progress:function(b){e(a,b,h);d()},end:function(a){h.resolve();
d()},cancel:function(){h.cancel()},always:function(){d()}})},startLineSelectionActionForGesture:function(c,b,a,f,g){var h=b.startGroupedSelectionAction(g,f.shiftKey,f.layerY,!1);c.addTemporaryGestureHandler({progress:function(b){e(a,b,h);d()},end:function(a){h.resolve();d()},cancel:function(){h.cancel()},always:function(){d()}})},startSecondarySelectionActionForGesture:function(c,b,a,e,f){var g=b.startSecondarySelectionAction(f,e.shiftKey,e.layerY);c.addTemporaryGestureHandler({end:function(a){g.resolve()},
cancel:function(){g.cancel()},always:function(){d()}})},startDragActionForGesture:function(c,b,a){a.setDomTargetDraggable(!0);var e=b.startDragAction();c.addTemporaryGestureHandler({end:function(b){b=a.fixEvent(b);if(!a.isFixedEventOutside(b))e.onUp(a.getPositionFromEvent(b));e.resolve()},cancel:function(){e.cancel()},always:function(){a.setDomTargetDraggable(!1);d()}})},preventDefaultIfTouchEvent:function(c){g.isTouchEvent(c)&&c.preventDefault()},collapseBrowserSelection:d}})},"MW/rtc/plugins/execution/ExecutionActionsProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/debug/DebugServicesFactory","MW/rtc/plugins/execution/ExecutionActions"],function(h,f,g,e){return h(f,{requires:function(){return{createInstance:"rtc.actionservice rtc.embeddedoutputs.executionmanager rtc.code.matlabfiletype matlab.services.busyidle debug.breakpoint.temporary debug.documentdirtyservice rtc.cursorcontroller".split(" ")}},createInstance:function(d,c,b,a,f,h,m){var q=g.getInstance();return new e(d,c,b,a,f,h,m,q)}})})},"MW/rtc/plugins/execution/ExecutionActions":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang dojo/i18n!l10n/nls/execution MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/execution/RunToLineEventData".split(" "),
function(h,f,g,e,d,c){return f(d,{STEP_ACTION_ID:"rtc_step",STOP_ACTION_ID:"rtc_stop_execution",PAUSE_ACTION_ID:"rtc_pause",RUN_TO_LINE_ACTION_ID:"rtc_run_to_line",CONTINUE_TO_LINE_ACTION_ID:"rtc_continue_to_line",constructor:function(b,a,c,d,e,f,n,p){this._actionService=b;this._executionManager=a;this._fileTypeService=c;this._busyIdleService=d;this._temporaryBreakpointManager=e;this._documentDirtyService=f;this._cursorController=n;this._debugServices=p;this._createActions();this._isDebugging=this._isBusy=
!1;this._isScriptFile=!0;this._isDirtyWhileDebugging=!1;this.own(h.after(this._fileTypeService,"onFileTypeChange",g.hitch(this,"_handleFileTypeChange"),!0));this.own(h.after(this._busyIdleService,"onIdleBusyStatusChange",g.hitch(this,"_handleBusyIdleChange"),!0));this.own(h.after(this._documentDirtyService,"onDocumentDirtiedWhileDebugging",g.hitch(this,"_handleDocumentDirtiedWhileDebugging"),!0));this.own(h.after(this._cursorController,"onUpdate",g.hitch(this,"_handleCursorControllerUpdate")));this.own(h.after(this._debugServices,
"onDebugModeChanged",g.hitch(this,"_handleDebugModeChanged"),!0))},_createActions:function(){var b=[{id:this.STOP_ACTION_ID,enabled:!1,key:"shift+f5",platformKey:{mac:"shift+f5"},shortcut:e.stopShortcut,text:e.stopLabel,description:e.stopDescription,callback:g.hitch(this,"_performStop")},{id:this.STEP_ACTION_ID,enabled:!0,key:"f10",platformKey:{mac:"f10"},text:e.stepLabel,shortcut:e.stepShortcut,description:e.stepDescription,callback:g.hitch(this,"_performStep")},{id:this.PAUSE_ACTION_ID,enabled:!1,
key:"ctrl_f5",platformKey:{mac:"meta_f5"},shortcut:e.pauseShortcut,text:e.pauseLabel,description:e.pauseDescription,callback:g.hitch(this,"_performPause")},{id:this.RUN_TO_LINE_ACTION_ID,enabled:!0,text:e.runToLineLabel,description:e.runToLineDescription,callback:g.hitch(this,"_performRunToLine")},{id:this.CONTINUE_TO_LINE_ACTION_ID,enabled:!1,text:e.continueToLineLabel,description:e.continueToLineDescription,callback:g.hitch(this,"_performContinueToLine")}];this._actionService.loadActions(b)},_performStep:function(){this._isDebugging?
this._debugServices.debugStep():this._stepToFirstLine();return!0},_stepToFirstLine:function(){this._performRunToLine(new c(0))},_performStop:function(){if(this._isDebugging&&!this._isBusy)this._debugServices.debugExit();else if(this._isBusy)this._executionManager.interrupt();else return!1;return!0},_performPause:function(){this._debugServices.debugPause();this._actionService.updateAction(this.PAUSE_ACTION_ID,{enabled:!1,text:e.pausingLabel,description:e.pausingDescription});return!0},_performRunToLine:function(b){this._temporaryBreakpointManager.setBreakpoint(b.lineNumber).then(g.hitch(this._actionService,
"executeAction","rtc_refresh_outputs"))},_performContinueToLine:function(b){this._temporaryBreakpointManager.setBreakpoint(b.lineNumber).then(g.hitch(this._debugServices,"debugContinue"))},_handleBusyIdleChange:function(b){this._isBusy=b;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection)},_handleDocumentDirtiedWhileDebugging:function(){this._isDirtyWhileDebugging=!0;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,
this._isDirtyWhileDebugging,this._cursorHasSelection)},_handleCursorControllerUpdate:function(){var b=this._cursorController.hasSelection();this._cursorHasSelection!==b&&(this._cursorHasSelection=b,this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection))},_handleDebugModeChanged:function(b){this._isDebugging=b;this._isDirtyWhileDebugging=!1;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,
this._cursorHasSelection)},_handleFileTypeChange:function(b){this._isScriptFile=b===this._fileTypeService.FILE_TYPE.ScriptFile;this._refreshActions(this._isBusy,this._isDebugging,this._isScriptFile,this._isDirtyWhileDebugging,this._cursorHasSelection)},_refreshActions:function(b,a,c,d,f){this._actionService.updateAction(this.STEP_ACTION_ID,{enabled:!b&&a||!b&&c});this._actionService.updateAction(this.PAUSE_ACTION_ID,{enabled:b});this._actionService.updateAction(this.STOP_ACTION_ID,{enabled:b||a});
this._actionService.updateAction(this.RUN_TO_LINE_ACTION_ID,{enabled:!b&&!a&&c&&!f});this._actionService.updateAction(this.CONTINUE_TO_LINE_ACTION_ID,{enabled:!b&&a&&!d&&!f});b||this._actionService.updateAction(this.PAUSE_ACTION_ID,{text:e.pauseLabel,description:e.pauseDescription})}})})},"MW/rtc/plugins/execution/BusyIdleServicesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/execution/BusyIdleServices"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.editordataservice"]}},
createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/execution/BusyIdleServices":function(){define(["dojo/aspect","dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return f(e,{_BUSY_IDLE_FEATURE_ID:"matlab.busyidle",constructor:function(d){this._isBusy=!1;this._listener=d.listenTo(this._BUSY_IDLE_FEATURE_ID,g.hitch(this,"_handleBusyIdleChange"))},onIdleBusyStatusChange:function(d){},isBusy:function(){return this._isBusy},_handleBusyIdleChange:function(d){this._isBusy=
d.isBusy;this.onIdleBusyStatusChange(this._isBusy)},destroy:function(){this.inherited(arguments);this._listener.remove()}})})},"MW/rtc/plugins/find/FindProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/find/FindHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{requires:function(){return{createInstance:"rtc.focusservice rtc.document rtc.internaldocument rtc.cursor rtc.actionservice rtc.view.visibility".split(" ")}},
createInstance:function(c,b,a,d,f,g){return new e(c,b,a,d,f,g)}})})},"MW/rtc/plugins/find/FindHandler":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/window MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/find/FindUtilities MW/rtc/plugins/find/view/FindDialog MW/rtc/plugins/find/FindPreference MW/rtc/RichTextComponentFeatureEnum".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){return g(b,{constructor:function(a,b,c,d,g,h){this._focusService=a;this._document=
b;this._internalDocument=c;this._cursor=d;this._actionService=g;this._visibilityNotifier=h;this._dialogInstance=null;this._withReplaceOption=!1;a=[{id:m.FIND_STRING.FIND_ACTION,enabled:!0,key:"ctrl_f",platformKey:{mac:"meta_f"},callback:e.hitch(this,"createFindDialog")},{id:m.FIND_STRING.FIND_NEXT_ACTION,enabled:!1,key:"f3",platformKey:{mac:"meta_g"},callback:e.hitch(this,"find",{backward:!1,keyFind:!0})},{id:m.FIND_STRING.FIND_PREVIOUS_ACTION,enabled:!1,key:"shift_f3",platformKey:{mac:"meta_shift_g"},
callback:e.hitch(this,"find",{backward:!0,keyFind:!0})},{id:m.FIND_STRING.FIND_SELECTION_ACTION,enabled:!1,key:"ctrl_f3",platformKey:{mac:"meta_e"},callback:e.hitch(this,"find",{backward:!1,selectionKey:!0})}];this._actionService.loadActions(a);var k=this;this.own(f.after(this._cursor,"onChange",e.hitch(this,function(){var a=0!==k._cursor.selectedText().length;k._actionService&&k._actionService.updateAction(m.FIND_STRING.FIND_SELECTION_ACTION,{enabled:a})})));this.own(f.after(this._visibilityNotifier,
"onHide",e.hitch(this,"cleanup")))},registerReplaceFeature:function(){this._withReplaceOption=!0},createFindDialog:function(){var a=null;if(null!==this._dialogInstance)return this._dialogInstance;this._resizeHandle=f.after(window,"onresize",e.hitch(this,"_resize"));var b=this._cursor.selectedText(),c=this._internalDocument.isReadOnly();""!==b.trim()&&l.setFindText(b);l.setReadOnlyFileStatus(c);this._withReplaceOption&&(a=e.hitch(this,this._replace));this._dialogInstance=new k(e.hitch(this,this.find),
a,e.hitch(this,this._close),l);this._resize();return this._dialogInstance},_resize:function(){var a=c.getBox(),b=this._dialogInstance.getParent().domNode,e=d.get(b,"width"),f=d.get(b,"height"),e=a.w/2-parseInt(e,10)/2,a=a.h/2-parseInt(f,10)/2;d.set(b,{top:a+"px",left:e+"px"})},_findOnce:function(b){var c={};b.keyFind?c=l.getLastSearchOptions():b.selectionKey?(c.text=this._cursor.selectedText(),c.caseSensitive=!1,c.wholeWords=!1):c=this._getFindObject();c.backward=b.backward;if(b.continueAtStart||
null!==b.continueAtStart&&void 0!==b.continueAtStart&&!1===b.continueAtStart)c.continueAtStart=b.continueAtStart;this._cursor.hasSelection()&&(this._cursor.internalCollapseSelection(c.backward?this._cursor.LEFT:this._cursor.RIGHT),this._cursor.onUpdate());b=this._cursor.getPosition();c.startAt=b;b=a.find(this._internalDocument,c.text,c);l.setLastSearchOptions(c.text,c.caseSensitive,c.wholeWords);this._actionService.updateAction(m.FIND_STRING.FIND_NEXT_ACTION,{enabled:!0});this._actionService.updateAction(m.FIND_STRING.FIND_PREVIOUS_ACTION,
{enabled:!0});return b},_findWithoutScrollingView:function(a){if(a=this._findOnce(a))this._cursor.setPosition(a),this._cursor.onUpdate(!0);return a},find:function(a){a=this._findOnce(a);this._setPositionAndScrollView(a);return a},_getFindObject:function(){return{text:l.getFindText(),caseSensitive:l.getMatchCaseChecked(),wholeWords:l.getWholeWordChecked(),isFileReadOnly:l.getReadOnlyFileStatus()}},_setPositionAndScrollView:function(a){if(a)return this._cursor.setPosition(a),this._cursor.onUpdate(),
!0},_replace:function(a,b){var c=this._getFindObject();if(!(""===c.text||c.text===a||this._internalDocument.isReadOnly())){var d=this._document.startBlockEdit();b?this._replaceAllOccurrence(c,a):this._replaceOccurrence(c,a);this._document.endBlockEdit(d)}},_replaceOccurrence:function(a,b){var c=this._cursor.selectedText().toLowerCase()===a.text.toLowerCase();return this._cursor.hasSelection()&&c||this.find({backward:!1})?(this._document.insertTextAtCurrentPosition(b),!0):!1},_replaceAllOccurrence:function(a,
b){var c=this._cursor.getPosition();this._cursor.setLineColumn(1,1);for(var d=this._findWithoutScrollingView({backward:!1,continueAtStart:!1});d;)this._cursor.isCursorReadOnly()||this._document.insertTextAtCurrentPosition(b),d=this._findWithoutScrollingView({backward:!1,continueAtStart:!1});this._setPositionAndScrollView(c)},_close:function(){this._resizeHandle.remove();this._focusService.setFocus();this._dialogInstance&&(this._dialogInstance=null)},cleanup:function(){this._dialogInstance&&(this._dialogInstance.onClose(),
this._dialogInstance=null)}})})},"MW/rtc/plugins/find/FindUtilities":function(){define([],function(){return{_REGEX_SPECIAL_CHARS:"!\\(\\)\\[\\]\\{\\}\\-\\+\\*,\x3d\\.\\?\\/\\:;%'\"\x26\x3c\x3e\\|\\^",find:function(h,f,g){return g.hasOwnProperty("findAll")&&g.findAll?(g.findAll=!1,g.startAt={line:0,column:0},g.backwards=!1,this._findAll(h,f,g)):this._findOne(h,f,g)},adjustMatch:function(h,f){var g=h[0].length-f.length,e=h[0].length-1;if(1===g){for(var d=!1,c=0;c<f.length;c++)if(f.charAt(c)!==h[0].charAt(c)){h[0]=
h[0].substring(1);h.index+=1;d=!0;break}d||(h[0]=h[0].substring(0,e))}2==g&&(h[0]=h[0].substring(0,e),h[0]=h[0].substring(1),h.index+=1)},_findOne:function(h,f,g){var e=0,d=0;g=g||{};g.startAt&&(e=g.startAt.line,d=g.startAt.column);var c=e,b=d,a=h.getLineNode(e),a=a.getTextForPositioning(),k=!(g.hasOwnProperty("backward")&&g.backward),l=g.hasOwnProperty("caseSensitive")&&g.caseSensitive||!1,m=g.hasOwnProperty("wholeWords")&&g.wholeWords||!1,q=g.hasOwnProperty("regexp")&&g.regexp||!1,n=g.hasOwnProperty("continueAtStart")?
g.continueAtStart:!0;g=f.length;k?a=a.substring(d):(a=a.substring(0,d),d=0);l||(a=a.toLowerCase(),q||(f=f.toLowerCase()));var p=f,r=RegExp("[\\s"+this._REGEX_SPECIAL_CHARS+"]").exec(p);!q&&(m&&!r)&&(q=!0,f="(?:^|\\s|["+this._REGEX_SPECIAL_CHARS+"])"+f+("(?:$|\\s|["+this._REGEX_SPECIAL_CHARS+"])"));for(r=!1;;){if(q){var s=RegExp(f,"g"+(!l?"i":"")),t=s.exec(a);if(t){h=t.index;t[0].length>g&&m&&(s.lastIndex-=1,this.adjustMatch(t,p),h=t.index);if(!k&&0<t[0].length)for(k=t;k;)if(k=s.exec(a))t=k,t[0].length>
g&&m&&(s.lastIndex-=1,this.adjustMatch(t,p),h=t.index);return{anchor:{line:e,column:d+h},line:e,column:d+h+t[0].length}}}else if(r&&(a=a.substring(0,a.length)),s=-1,s=k?a.indexOf(f):a.lastIndexOf(f),0<=s)return{anchor:{line:e,column:d+s},line:e,column:d+s+f.length};if(r)return null;e=k?e+1:e-1;d=0;a=h.getLineNode(e);if(!a){if(!n)return null;e=k?0:h.getMaxLineNumber()-1;a=h.getLineNode(e)}if(e===c){if(k&&0===b||!k&&b===h.getLineNode(e).getText().length)return null;r=!0}a=a.getTextForPositioning();
l||(a=a.toLowerCase())}},_findAll:function(h,f,g){for(var e=[],d=0,c=this._findOne(h,f,g);null!==c;)e[d]=c,g.startAt={line:c.line,column:c.column+1},c=this._findOne(h,f,g),d+=1;return e}}})},"MW/rtc/plugins/find/view/FindDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/aspect dojo/dom-construct dojo/dom-style dojo/keys dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./FindDialogTemplate.html dijit/form/Button dijit/form/TextBox dijit/form/CheckBox dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/findDialog mw-dialog-utils/DialogUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){return h([k,l,m],{templateString:q,constructor:function(a,b,c,d){this._findCallBack=a;this._replaceCallBack=b;this._closeCallBack=c;this._findDialogWidget=null;this._replaceSearchString=this._findSearchString=this.findTextInput="";this._wholeWordSet=this._matchCaseSet=!1;this._findDialogPreferences=d},postCreate:function(){this.inherited(arguments);var b=t.findAndReplaceTitle;this.findNextButton.set("label",t.findNextButton);this.replaceButton.set("label",
t.replaceButton);this.replaceAllButton.set("label",t.replaceAllButton);this.findPreviousButton.set("label",t.findPreviousButton);this.matchCaseLabel.innerHTML=t.matchCaseLabel;this.wholeWordLabel.innerHTML=t.wholeWordLabel;this.findTextLabel.innerHTML=t.findTextLabel;this.replaceTextLabel.innerHTML=t.replaceTextLabel;this.findTextInput.set("value",this._findDialogPreferences.getFindText());this.replaceTextInput.set("value",this._findDialogPreferences.getReplaceText());this.matchCaseCheckBox.set("checked",
this._findDialogPreferences.getMatchCaseChecked());this.wholeWordCheckBox.set("checked",this._findDialogPreferences.getWholeWordChecked());this._matchCaseSet=this.matchCaseCheckBox.checked;this._wholeWordSet=this.wholeWordCheckBox.checked;this._findDialogPreferences.getReadOnlyFileStatus()&&(this.replaceButton.set("Disabled",!0),this.replaceAllButton.set("Disabled",!0),this.replaceTextInput.set("Disabled",!0));a(this.findTextInput,"onkeyup",f.hitch(this,"onTextKeyup"));a(this.findTextInput,"change",
f.hitch(this,"_handleTextChange"));var c=this;setTimeout(function(){c.findTextInput&&c.findTextInput.focus()},0);this.findNextButton.set("data-findNextButtonId","findNextButton");this.findPreviousButton.set("data-findPreviousButtonId","findPreviousButton");this.replaceButton.set("data-replaceButtonId","replaceButton");this.replaceAllButton.set("data-replaceAllButtonId","replaceAllButton");this.findTextInput.set("data-findTextInputId","findTextInput");this.replaceTextInput.set("data-replaceTextInputId",
"replaceTextInput");this.matchCaseCheckBox.set("data-matchCaseCheckBoxId","matchCaseCheckBox");this.wholeWordCheckBox.set("data-wholeWordCheckBoxId","wholeWordCheckBox");this.matchCaseLabel.setAttribute("data-matchCaseLabelId","matchCaseLabel");this.wholeWordLabel.setAttribute("data-wholeWordLabelId","wholeWordLabel");a(this.findNextButton,"click",f.hitch(this,"onFind",!1));a(this.findPreviousButton,"click",f.hitch(this,"onFind",!0));a(this.matchCaseCheckBox,"click",f.hitch(this,"onCheckBoxClick",
!1));a(this.wholeWordCheckBox,"click",f.hitch(this,"onCheckBoxClick",!0));a(this.replaceButton,"click",f.hitch(this,"onReplace",!1));a(this.replaceAllButton,"click",f.hitch(this,"onReplace",!0));var d={"data-testid":"rteFindDialog",layoutId:"rteFindDialog",closeCallBack:f.hitch(this,this.onClose),resizable:!1};this._replaceCallBack||(b=t.findTitle,this.replace.style.display="none");this._findDialogWidget=u.displayNonModalDialog(b,this,d);this._findDialogWidget.findTextInput.focusNode.select();e.before(this._findDialogWidget,
"onClose",f.hitch(this,this.saveDialogState));this._findDialogWidget.domNode.addEventListener("click",f.hitch(this,function(a){"replaceTextInput"!==a.target.name&&this.findTextInput.focus()}))},saveDialogState:function(){this._findDialogPreferences.setFindText(this._findSearchString);this._findDialogPreferences.setReplaceText(this._replaceSearchString);this._findDialogPreferences.setMatchCaseChecked(this._matchCaseSet);this._findDialogPreferences.setWholeWordChecked(this._wholeWordSet)},onTextKeyup:function(a){this._handleTextChange();
if(a.keyCode===b.ENTER)this.onFind(!1),this.findTextInput.focus();else if(a.keyCode===b.ESCAPE)this.onClose()},_handleTextChange:function(a){this._findSearchString=this.findTextInput.get("value");this._replaceSearchString=this.replaceTextInput.get("value")},onClose:function(){this._closeCallBack()},onCheckBoxClick:function(){this._matchCaseSet=this.matchCaseCheckBox.checked;this._wholeWordSet=this.wholeWordCheckBox.checked},onFind:function(a){this.saveDialogState();this._findCallBack({backward:a});
a?this.findPreviousButton.focus():this.findNextButton.focus()},onReplace:function(a){this.saveDialogState();var b=this.replaceTextInput.get("value");this._replaceCallBack(b,a);a?this.replaceAllButton.focus():(this._findCallBack({backward:!1}),this.replaceButton.focus())}})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html ../_mw/utils/deprecation dojo/NodeList-dom ../a11yclick".split(" "),
function(h,f,g,e,d,c,b,a,k,l){l.deprecated({deprecated:{module:"dijit/form/Checkbox"},replacement:{module:"mw-form/Checkbox"},geckNumber:1352405});e("dijit-legacy-requires")&&c(0,function(){h(["dijit/form/RadioButton"])});return f("dijit.form.CheckBox",[b,a],{templateString:k,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,
_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&d("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&d("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin",
"../_mw/utils/deprecation"],function(h,f,g,e,d){d.deprecated({deprecated:{module:"dijit/form/ToggleButton"},replacement:{module:"mw-form/ToggleButton"},geckNumber:1352405});return h("dijit.form.ToggleButton",[g,e],{baseClass:"dijitToggleButton",setChecked:function(c){f.deprecated("setChecked("+c+") is deprecated. Use set('checked',"+c+") instead.","","2.0");this.set("checked",c)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(h,f){return h("dijit.form._ToggleButtonMixin",
null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(f){var e=this.checked;this._set("checked",!e);var d=this.inherited(arguments);this.set("checked",d?this.checked:e);return d},_setCheckedAttr:function(g,e){this._set("checked",g);var d=this.focusNode||this.domNode;this._created&&f.get(d,"checked")!=!!g&&f.set(d,"checked",!!g);d.setAttribute(this._aria_attr,String(g));this._handleOnChange(g,e)},postCreate:function(){this.inherited(arguments);var f=this.focusNode||this.domNode;this.checked&&
f.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(h,f){return h("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(g){this._set("readOnly",g);f.set(this.focusNode,"readOnly",
g)},_setLabelAttr:void 0,_getSubmitValue:function(f){return null==f||""===f?"on":f},_setValueAttr:function(g){g=this._getSubmitValue(g);this._set("value",g);f.set(this.focusNode,"value",g)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));f.set(this.focusNode,"value",this.value)},_onClick:function(f){return this.readOnly?(f.stopPropagation(),f.preventDefault(),!1):this.inherited(arguments)}})})},"MW/rtc/plugins/find/FindPreference":function(){define([],
function(){return{_findTextHistory:"",_replaceTextHistory:"",_matchCaseHistory:!1,_wholeWordHistory:!1,_isFileReadOnly:!1,_lastSearchedText:"",_lastMatchCase:!1,_lastWholeWord:!1,setFindText:function(h){h=h.split("\n");this._findTextHistory=0<h.length?h[0]:""},getFindText:function(){return this._findTextHistory},setReplaceText:function(h){this._replaceTextHistory=h.trim()},getReplaceText:function(){return this._replaceTextHistory},setMatchCaseChecked:function(h){this._matchCaseHistory=h},getMatchCaseChecked:function(){return this._matchCaseHistory},
setWholeWordChecked:function(h){this._wholeWordHistory=h},getWholeWordChecked:function(){return this._wholeWordHistory},setReadOnlyFileStatus:function(h){this._isFileReadOnly=h},getReadOnlyFileStatus:function(){return this._isFileReadOnly},setLastSearchOptions:function(h,f,g){this._lastSearchedText=h;this._lastMatchCase=f;this._lastWholeWord=g},getLastSearchOptions:function(){return{text:this._lastSearchedText,caseSensitive:this._lastMatchCase,wholeWords:this._lastWholeWord}}}})},"MW/rtc/plugins/find/ReplaceProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/plugins/find/ReplaceHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{requires:function(){return{createInstance:["rtc.actionservice","rtc.navigate.find"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/find/ReplaceHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/RichTextComponentFeatureEnum"],function(h,f,g){return h(null,{constructor:function(e,d){this._findHandler=d;this._findHandler.registerReplaceFeature();
var c=[{id:g.FIND_STRING.REPLACE_ACTION,enabled:!0,key:"ctrl_h",callback:f.hitch(this,"_openFindDialogWithReplace")}];e.loadActions(c)},_openFindDialogWithReplace:function(){this._findHandler.createFindDialog()}})})},"MW/rtc/plugins/formatcode/FormatCodePluginProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/formatcode/FormatCode","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{isApplicable:function(d){return f.isMatlabCodeFileOrBuffer(d)},
requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.indentutilities rtc.document rtc.internaldocument rtc.cursor rtc.actionservice rtc.code.autoindent".split(" ")}},createInstance:function(d,c,b,a,e,f){return new g(d,c,b,a,e,f)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/formatcode/FormatCode":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/formatcode/FormatCodeDataService MW/rtc/abstract/AbstractPlugin MW/rtc/EditorUtilities MW/rtc/RichTextComponentFeatureEnum MW/rtc/model/DocumentUtilities MW/rtc/model/DocumentConstants MW/rtc/model/events/DocumentEvent MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position dojo/i18n!l10n/nls/actions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h(d,{constructor:function(a,b,c,d,h,k){this._indentUtilities=a;this._internalDocument=c;this._document=b;this._cursor=d;this._formatCodeDataService=new e;this._documentContent="";this._actionService=h;this._autoIndent=k;this._addActions();this.own(g.after(this._cursor,"onChange",f.hitch(this,"_updateActionState")));this.own(g.after(this._document,"onChange",f.hitch(this,"_updateActionsOnDocumentChange"),!0))},_addActions:function(){this._actions=[{id:b.FORMAT_CODE.SMART_INDENT_ACTION,
enabled:!0,contextMenuGroup:"Default",text:p.smartIndentLabel,description:p.smartIndentDescription,key:"ctrl_i",platformKey:{mac:"meta_i"},callback:f.hitch(this,"_checkAndFormatCode")}];this._actionService.loadActions(this._actions)},_updateActionsOnDocumentChange:function(a){a&&f.isArray(a)&&a.some(function(a){if(a.type===k.READONLY_STATE_CHANGE_EVENT)return this._updateActionState(),!0},this)},_updateActionState:function(){var a=this._isCodeInSelection(),c=this._isSelectionReadOnly(),d=this._document.isReadOnly();
this._actionService.updateAction(b.FORMAT_CODE.SMART_INDENT_ACTION,{enabled:a&&!c&&!d})},_isSelectionReadOnly:function(){var b=this._cursor.selectionInfo(),b=this._indentUtilities.getRangeFromSelection(b),b=q.getParagraphNodesInRange(b.start,b.end);return 0==a.getWritableChunksInRange(this._internalDocument,b).length},_isCodeInSelection:function(){var a=this._cursor.selectionInfo();return m.isCodeInRange(a.startNode,a.endNode)},_checkAndFormatCode:function(){this._actionService.getAction(b.FORMAT_CODE.SMART_INDENT_ACTION).enabled&&
this.formatCode()},formatCode:function(){this._documentContent=this._document.getCodeText();0!==this._documentContent.length&&(this._cursorPos=this._cursor.getPosition(),this._selectionInfo=this._cursor.selectionInfo(),this._rangeToFormat=c.getRangeOfCodeToFormat(this._documentContent,this._cursorPos),this._formatCodeServerRequest())},_formatCodeServerRequest:function(){this._formatCodeDataService.getFormattedCode(this._documentContent,this._rangeToFormat.start,this._rangeToFormat.end,"file.m",this._rangeToFormat.cursor,
f.hitch(this,"_formatCodeCallback"),f.hitch(this,"_formatErrorCallback"))},_formatErrorCallback:function(){this._internalDocument.setReadOnly(!1,!0)},_adjustCursorPosition:function(a,b,c,d,e){var f={line:a.line,anchor:{}},g=b.length-1;d?(f.anchor={line:a.anchor.line,column:Math.max(0,a.anchor.column+b[c.isReversed?g:0])},f.column=Math.max(0,a.column+b[c.isReversed?0:g])):f.column=Math.max(0,a.column+b[a.line-e]);return f},_getMockCursorPosition:function(a,b){return{line:a.endLine,column:b.maxOffset(),
anchor:{line:a.startLine,column:0}}},_isCursorInCurrentChunk:function(a,b){var c=this._internalDocument.getLineNumber(a),d=this._internalDocument.getLineNumber(b)>=this._cursorPos.line;return c<=this._cursorPos.line&&d},_formatCodeCallback:function(b){var d=this._documentContent.substring(this._rangeToFormat.start,this._rangeToFormat.end);if(d!==b){d=d.split("\n");b=b.split("\n");var e=this._cursorPos,f=this._selectionInfo,g=!f.isNull;g||(f.startNode=this._internalDocument.startNode(),f.startPos=
0,f.endNode=this._internalDocument.endNode(),f.endPos=f.endNode.maxOffset(),f.isNull=!1,f.isLocal=!1);var h=this._indentUtilities.getRangeFromSelection(f),f=this._internalDocument.getLineNumber(f.startNode.rootContainer()),k=q.getParagraphNodesInRange(h.start,h.end),k=a.getWritableChunksInRange(this._internalDocument,k);this._autoIndent.disable();this._internalDocument.onPreDocumentChanged({});for(var m=this._internalDocument.getLineNumber(h.start),h=this._internalDocument.getLineNumber(h.end),h=
l.create(m,h),m=this._document.startEdit(),n=0;n<k.length;n++){var p=k[n],F=this._internalDocument.getLineNode(p.startLine),H=this._internalDocument.getLineNode(p.endLine),L=this._getMockCursorPosition(p,H),L=this._cursor.cursorPos2selectionInfo(L),N=p.startLine-f,M=p.endLine-f,P=d.slice(N,M+1),N=b.slice(N,M+1),P=this._indentUtilities.getIndentArray(P,N),N=P.pop();this._indentUtilities.blockDeltaIndent(F,H,P,c.getWhiteSpaces(N))&&this._isCursorInCurrentChunk(F,H)&&(p=this._adjustCursorPosition(e,
P,L,g,p.startLine),this._cursor.setPosition(p))}m.appendUndoEvents([h]);m.appendRedoEvents([h]);this._document.endEdit();this._cursor.onUpdate();this._internalDocument.emitDocumentEvents([h]);this._autoIndent.enable()}},destroy:function(){this._actions.forEach(function(a){this._actionService.removeAction(a.id)},this)}})})},"MW/formatcode/FormatCodeDataService":function(){define(["dojo/_base/declare","dojo/_base/array","mw-log/Log","mw-remote/Remote"],function(h,f,g,e){return h(null,{constructor:function(){e.registerResponseHandler("FormatCodeResponse",
this._handleFormatCodeResponse,this);e.registerFaultHandler("FormatCode",this._handleFormatCodeError,this)},getFormattedCode:function(d,c,b,a,f,g,h){e.sendMessage({FormatCode:{code:d,startOfSelection:c,endOfSelection:b,filename:a,cursorPosition:f}},{responseCallback:g,errorCallback:h})},_handleFormatCodeResponse:function(d,c){f.forEach(d,function(b){c.responseCallback(b.formattedCode,b.startOfFormattedCode,b.endOfFormattedCode,b.adjustedStartOfSelection,b.adjustedEndOfSelection,b.adjustedCursorPosition)},
this)},_handleFormatCodeError:function(d,c){g.assert(!1,"Received the following error: "+d);c.errorCallback&&c.errorCallback()}})})},"MW/rtc/EditorUtilities":function(){define([],function(){return{getLineColumnFromOffset:function(h,f){"string"===typeof h&&(h=h.split("\n"));var g=0,e;for(e=0;e<h.length;e+=1){if(g+h[e].length>=f)return{line:e,column:f-g};g=g+h[e].length+1}return{line:0,column:0}},getOffsetFromLine:function(h,f){"string"===typeof h&&(h=h.split("\n"));var g=0,e;for(e=0;e<h.length;e+=
1){if(f===e)return[g,h[e].length];g=g+h[e].length+1}return[g,0]},getRangeOfCodeToFormat:function(h,f){var g=h.split("\n"),e=this.getOffsetFromLine(g,f.line),d={cursor:e[0]+f.column};f.anchor&&f.anchor.hasOwnProperty("line")&&f.anchor.hasOwnProperty("column")?(g=this.getOffsetFromLine(g,f.anchor.line),e[0]<g[0]?(d.start=e[0],d.end=g[0]+g[1]):(d.start=g[0],d.end=e[0]+e[1])):(d.start=0,d.end=h.length,d.cursorLine=f.line);return d},getWhiteSpaces:function(h){var f="",g;for(g=0;g<h;g+=1)f+=" ";return f}}})},
"MW/rtc/plugins/goto/GotoProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/goto/GotoHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{requires:function(){return{createInstance:"rtc.focusservice rtc.internaldocument rtc.linenumberservice rtc.document rtc.cursor rtc.functionservice rtc.actionservice rtc.code.matlabfiletype".split(" ")}},createInstance:function(d,c,b,a,e,f,h,q){return new g(d,c,b,a,e,f,h,q)}})})},"MW/rtc/plugins/goto/GotoHandler":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/has dojo/topic dojo/_base/lang dojo/aspect dojo/dom-style dijit/registry dijit/focus MW/rtc/plugins/goto/GotoPreferences MW/rtc/plugins/goto/view/GotoDialog MW/rtc/plugins/language/matlab/section/SectionsList MW/uiframework/UIBuilderFactory MW/rtc/RichTextComponentFeatureEnum MW/rtc/plugins/goto/GotoUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t=!1,u=!1,v=!1,w=!1,x;return g(null,{_focusService:null,constructor:function(a,b,c,d,e,f,g,h){this._focusService=a;this._internalDocument=b;this._lineNumberService=c;this._cursor=e;this._document=d;this._goToActions=[];this._goToDialog=null;this._createGoToDialogAction();g.loadActions(this._goToActions);this._sectionsList=new n(b,d);this._sectionPopupId=this._functionPopupId=null;this._functionService=f;this._fileType=h},_createGoToDialogAction:function(){this._goToActions=
[{id:r.GOTO_LINE.GOTO_ACTION,enabled:!0,key:e("safari")?"":"ctrl_g",platformKey:{mac:e("safari")?"":"meta_l"},callback:c.hitch(this,this._goToLineDialog)}]},_goToLineDialog:function(){return this._goToDialog=new q(c.hitch(this,this._goToLine),c.hitch(this,this._close))},_goToLine:function(a){s.gotoLineColumn(this._internalDocument,this._lineNumberService,this._cursor,a,1)},goToLine:function(a){this._goToLine(a);this._focusEditor()},_close:function(){this._focusEditor()},_focusEditor:function(){setTimeout(c.hitch(this,
function(){this._focusService.setFocus()}),1)},setupGoToToolStripButton:function(){var a=p.getInstance(),b=a.tagToId("motwToolstrip.editorTab.navigate.goTo");b&&a.addEventCallback(b,c.hitch(this,function(c){if("dropDownPerformed"===c.eventType){c=this._getActiveGoToHandlerInstance();var d=c._sectionsList.getSections(),e=c._functionService.getFunctionDeclarations().length;v=w=t=!1;0<e&&0===d.length?t=!0:0===e&&0<d.length?t=!1:0!==e&&0!==d.length&&(v=w=!0);c=this._populateGoToDropDownList(a,c);a.showPopup(b,
c)}}),this)},_populateGoToDropDownList:function(a,b){var c={};a&&(c.popupId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList"),c.sectionHeaderId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.sectionHeader"),c.functionHeaderId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.functionHeader"),c.popupListPanelId=a.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.goToListPanel"));this._destroyPopupList(a,c);t?this._createFunctionsPopupListPanel(b,a,c):w?this._createFunctionsAndSectionsPopupListPanel(b,
a,c,u):this._createSectionsPopupListPanel(b,a,c);return c.popupId},_createFunctionsAndSectionsPopupListPanel:function(a,b,c,d){this._createFunctionsPopupListPanel(a,b,c);this._functionPopupId=c.popupListPanelId;this._createSectionsPopupListPanel(a,b,c);this._sectionPopupId=c.popupListPanelId;d?m.setPopupStyle(this._functionPopupId,c.functionHeaderId,"none"):m.setPopupStyle(this._sectionPopupId,c.sectionHeaderId,"none")},_createSectionsPopupListPanel:function(a,b,e){var f=a._sectionsList.getSections();
if(0<f.length){e.sectionHeaderId=m.createSectionHeader(b);b.add(e.sectionHeaderId,e.popupId,2);e.popupListPanelId=m.createPopupListPanel(b);b.add(e.popupListPanelId,e.popupId,3);v&&(m.createFunctionToggleSwitch(b).onclick=c.hitch(this,function(){m.setPopupStyle(this._sectionPopupId,e.sectionHeaderId,"none");var a=k.byId(b.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.goToLine"));l.focus(a.domNode);m.setPopupStyle(this._functionPopupId,e.functionHeaderId,"");u=!1;d.publish("/toolstrip/popUpList/render")}));
var g=1,h,p;f.forEach(function(c,d){h=c.startPosition.getRow();p=a._sectionsList.getTextInLine(h);if(n.hasSectionTitle(p)){var f=m.formatSectionTitle(p,g);g=f[1];f=m.createGoToListItem(a,b,h+1,f[0]);b.add(f,e.popupListPanelId,d)}})}},_createFunctionsPopupListPanel:function(a,b,e){var f=a._functionService.getAllFunctionDeclarations();if(!(1>f.length)){e.functionHeaderId=m.createFunctionHeader(b);b.add(e.functionHeaderId,e.popupId,2);v&&(m.createSectionToggleSwitch(b).onclick=c.hitch(this,function(){m.setPopupStyle(this._functionPopupId,
e.functionHeaderId,"none");var a=k.byId(b.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.goToLine"));l.focus(a.domNode);m.setPopupStyle(this._sectionPopupId,e.sectionHeaderId,"");u=!0;d.publish("/toolstrip/popUpList/render")}));e.popupListPanelId=m.createPopupListPanel(b);b.add(e.popupListPanelId,e.popupId,3);var g=this._fileType.getFileType()===this._fileType.FILE_TYPE.ClassDefinitionFile;s.sortFunctionDeclarations(f,!g).forEach(function(c,d){var f=m.createGoToFunctionListItem(a,b,c.getStartLine(),
c.getName());b.add(f,e.popupListPanelId,d)})}},_destroyPopupList:function(a,b){a.exists(this._sectionPopupId)&&a.destroy(this._sectionPopupId);a.exists(this._functionPopupId)&&a.destroy(this._functionPopupId);Object.keys(b).map(function(c){"popupId"!==c&&a.exists(b[c])&&a.destroy(b[c])})},setActiveGoToHandlerInstance:function(a){x=a},_getActiveGoToHandlerInstance:function(){return x}})})},"MW/rtc/plugins/goto/GotoPreferences":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/i18n!l10n/nls/gotoDialog dijit/registry MW/toolstrip/constants/TypeConstants MW/toolstrip/hashes/listOfNewWidgets".split(" "),
function(h,f,g,e,d,c,b,a){return{_lastSelectedLine:"",createGoToListItem:function(a,c,d,e){e=c.create({type:b.LIST_ITEM,tag:"SectionListItem"+d,text:e});c.addEventCallback(e,h.hitch(a,function(b){"itemPushed"===b.eventType&&a.goToLine(d)}));return e},createGoToFunctionListItem:function(a,c,d,e){e=c.create({type:b.LIST_ITEM,tag:"FunctionListItem"+d,text:e});c.addEventCallback(e,h.hitch(a,function(b){"itemPushed"===b.eventType&&a.goToLine(d)}));return e},createPopupListPanel:function(a){return a.create({tag:"motwToolstrip.editorTab.navigate.goTo.goToList.goToListPanel",
type:b.POPUP_LIST_PANEL,maxHeight:440})},createSectionHeader:function(a){return a.create({tag:"motwToolstrip.editorTab.navigate.goTo.goToList.sectionHeader",type:b.POPUP_LIST_HEADER,title:"SECTIONS"})},createFunctionHeader:function(a){return a.create({tag:"motwToolstrip.editorTab.navigate.goTo.goToList.functionHeader",type:b.POPUP_LIST_HEADER,title:"FUNCTIONS"})},createSectionToggleSwitch:function(b){var d=c.byId(b.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.functionHeader"));if(-1===
a.indexOf(d.type)){var e=d.domNode;b=e.querySelector("td")}else b=d.domNode;var h=g.create("div",{innerHTML:"SHOW SECTIONS"});f.set(h,"style","float:right; font-family:Arial; font-size:8px; margin-top:3px; margin-right:3px; color:white;  cursor: pointer; padding:1px; ");g.place(h,b,"last");-1===a.indexOf(d.type)&&e.appendChild(b);return h},createFunctionToggleSwitch:function(b){var d=c.byId(b.tagToId("motwToolstrip.editorTab.navigate.goTo.goToList.sectionHeader"));if(-1===a.indexOf(d.type)){var e=
d.domNode;b=e.querySelector("td")}else b=d.domNode;var h=g.create("div",{innerHTML:"SHOW FUNCTIONS"});f.set(h,"style","float:right; font-family:Arial; font-size:8px; margin-top:3px; margin-right:3px; color:white;  cursor: pointer; padding:1px; ");g.place(h,b,"last");-1===a.indexOf(d.type)&&e.appendChild(b);return h},formatSectionTitle:function(a,b){var c=a.replace(/^\s*%%/,"").trim();0===c.length&&(c=d.section+" "+b,b+=1);return[c,b]},setGotoLine:function(a){this._lastSelectedLine=a},getGotoLine:function(){return this._lastSelectedLine},
setPopupStyle:function(a,b,d){a=c.byId(a);b=c.byId(b);e.set(a.domNode,"display",d);e.set(b.domNode,"display",d)}}})},"MW/toolstrip/constants/TypeConstants":function(){define([],function(){return{TOOLSTRIP_ROOT:"ToolstripRoot",QAB_ROOT:"QABRoot",POPUP_ROOT:"PopupRoot",GALLERY_ROOT:"GalleryRoot",GALLERY_POPUP_ROOT:"GalleryPopupRoot",GALLERY_FAVORITE_CATEGORY_ROOT:"GalleryFavoriteCategoryRoot",TOOLSTRIP:"Toolstrip",QAB:"QuickAccessBar",QA_GROUP:"QuickAccessGroup",TAB_GROUP:"TabGroup",TAB:"Tab",SECTION:"Section",
PANEL:"Panel",COLUMN:"Column",COLOR_PICKER_BUTTON:"ColorPickerButton",GRID_PICKER_BUTTON:"GridPickerButton",PUSH_BUTTON:"PushButton",DROP_DOWN_BUTTON:"DropDownButton",SPLIT_BUTTON:"SplitButton",TOGGLE_BUTTON:"ToggleButton",POPUP_LIST:"PopupList",LIST_ITEM:"ListItem",POPUP_LIST_PANEL:"PopupListPanel",LIST_ITEM_WITH_CHECKBOX:"ListItemWithCheckBox",LIST_ITEM_WITH_TEXTFIELD:"ListItemWithTextField",LIST_ITEM_WITH_RADIO_BUTTON:"ListItemWithRadioButton",LIST_ITEM_WITH_POPUP:"ListItemWithPopup",POPUP_LIST_SEPARATOR:"PopupListSeparator",
POPUP_LIST_HEADER:"PopupListHeader",COMBO_BOX:"ComboBox",LIST:"List",LABEL:"Label",EMPTY_CONTROL:"EmptyControl",TEXT_FIELD:"TextField",TEXT_AREA:"TextArea",SPINNER:"Spinner",HORIZONTAL_SLIDER:"HorizontalSlider",RADIO_BUTTON:"RadioButton",CHECK_BOX:"CheckBox",TOGGLE_SPLIT_BUTTON:"ToggleSplitButton",FOOTER:"Footer",FOOTER_CELL:"FooterCell",QAB_PUSH_BUTTON:"QABPushButton",QAB_DROP_DOWN_BUTTON:"QABDropDownButton",QAB_SPLIT_BUTTON:"QABSplitButton",QAB_TOGGLE_BUTTON:"QABToggleButton",QAB_TOGGLE_SPLIT_BUTTON:"QABToggleSplitButton",
QAB_FLOATING_PANE_DOCK:"QABFloatingPaneDock",MENUBAR_WRAPPER:"MenubarWrapper",TOOLBAR_WRAPPER:"ToolbarWrapper",GALLERY:"Gallery",GALLERY_POPUP:"GalleryPopup",GALLERY_CATEGORY:"GalleryCategory",GALLERY_FAVORITE_CATEGORY:"GalleryFavoriteCategory",GALLERY_ITEM:"GalleryItem",TOGGLE_GALLERY_ITEM:"ToggleGalleryItem"}})},"MW/toolstrip/hashes/listOfNewWidgets":function(){define(["../constants/TypeConstants"],function(h){return[h.LABEL,h.PUSH_BUTTON,h.TOGGLE_BUTTON,h.DROP_DOWN_BUTTON,h.SPLIT_BUTTON,h.TOGGLE_SPLIT_BUTTON,
h.TEXT_FIELD,h.TEXT_AREA,h.CHECK_BOX,h.RADIO_BUTTON,h.COMBO_BOX,h.SPINNER,h.LIST,h.LIST_ITEM,h.LIST_ITEM_WITH_CHECKBOX,h.LIST_ITEM_WITH_RADIO_BUTTON,h.LIST_ITEM_WITH_POPUP,h.LIST_ITEM_WITH_TEXTFIELD,h.POPUP_LIST,h.POPUP_LIST_PANEL,h.POPUP_LIST_SEPARATOR,h.POPUP_LIST_HEADER,h.QAB_PUSH_BUTTON,h.QAB_TOGGLE_BUTTON,h.QAB_DROP_DOWN_BUTTON,h.QAB_SPLIT_BUTTON,h.QAB_TOGGLE_SPLIT_BUTTON,h.COLOR_PICKER_BUTTON,h.GRID_PICKER_BUTTON]})},"MW/rtc/plugins/goto/view/GotoDialog":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/Button dijit/form/NumberTextBox dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/keys dojo/on dojo/aspect dojo/text!./GotoDialogTemplate.html dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/gotoDialog mw-dialog-utils/DialogUtils MW/rtc/plugins/goto/GotoPreferences".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){h=c([h,f,g],{templateString:q,widgetsInTemplate:!0,constructor:function(a,b){this._goToLineCallback=a;this._closeCallBack=b;this._goToDialogWidget=null},postCreate:function(){this.inherited(arguments);this.okButton.set("Disabled",!0);var a=this;this.okButton.set("label",n.ok);this.cancelButton.set("label",n.cancel);this.lineNumberLabel.innerHTML=p.line;var c=s.getGotoLine(),c=""===c||isNaN(c);this.okButton.set("Disabled",c);this.lineNumberInput.set("value",
s.getGotoLine());l(this.okButton,"click",b.hitch(this,"onOK"));l(this.cancelButton,"click",b.hitch(this,"onCancel"));l(this.lineNumberInput,"keyup",b.hitch(this,"onTextKeyup"));this.okButton.set("data-okButtonId","okButton");this.cancelButton.set("data-cancelButtonId","cancelButton");this.lineNumberInput.set("data-lineNumberInputId","lineNumberInput");setTimeout(function(){a.lineNumberInput.focus()},0);this._goToDialogWidget=r.displayModalDialog(this,p.title,[],{"data-testid":"rteGoToDialog",dialogClass:"rteGoToDialog"});
m.before(this._goToDialogWidget,"onClose",b.hitch(this,this._saveGoToDialogState))},_saveGoToDialogState:function(){s.setGotoLine(this.lineNumberInput.get("value"))},onTextKeyup:function(a){var b=this.lineNumberInput.get("value");void 0===b||""===b||isNaN(b)||0>b?this.okButton.set("disabled",!0):this.okButton.set("disabled",!1);if(a.keyCode===k.ENTER&&!this.okButton.get("disabled"))if(this.onOK)this.onOK();else if(a.keyCode===k.ESCAPE)this.onCancel()},onCancel:function(){this._goToDialogWidget.onClose()},
onOK:function(){var a=this.getLineNumber();this._goToLineCallback(a);this.onCancel()},onClose:function(){this._closeCallBack()},getLineNumber:function(){return this.lineNumberInput.get("value")}});h.getEmptySectionTitle=function(){return p.section};return h})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(h,f,g,e,d,c){var b=function(a){a=a||{};var b=g.getLocalization("dojo.cldr","number",
g.normalizeLocale(a.locale)),c=a.pattern?a.pattern:b[(a.type||"decimal")+"Format"];a="number"==typeof a.places?a.places:"string"===typeof a.places&&0<a.places.length?a.places.replace(/.*,/,""):-1!=c.indexOf(".")?c.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:b.decimal,places:a}},a=h("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(f.delegate(a,this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,editOptions:{pattern:"#.######"},
_formatter:d.format,_regExpGenerator:d.regexp,_decimalInfo:b(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(a){var c="number"==typeof a.places?a.places:0;c&&c++;"number"!=typeof a.max&&(a.max=9*Math.pow(10,15-c));"number"!=typeof a.min&&(a.min=-9*Math.pow(10,15-c));this.inherited(arguments,[a]);this.focusNode&&(this.focusNode.value&&!isNaN(this.value))&&this.set("value",this.value);this._decimalInfo=b(a)},_onFocus:function(){if(!this.disabled&&
!this.readOnly){var a=this.get("value");"number"==typeof a&&!isNaN(a)&&(a=this.format(a,this.constraints),void 0!==a&&(this.textbox.value=a));this.inherited(arguments)}},format:function(a,b){var c=String(a);if("number"!=typeof a)return c;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,b))&&!1!==b.exponent&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this.focused&&(b=f.mixin({},b,this.editOptions));return this._formatter(a,b)},_parser:d.parse,parse:function(a,b){var c=f.mixin({},
b,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=c.places){var d=c.places,d="number"===typeof d?d:Number(d.split(",").pop());c.places="0,"+d}c=this._parser(a,c);this.editOptions&&(this.focused&&isNaN(c))&&(c=this._parser(a,b));return c},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){if(null==a||"string"==typeof a&&""==a)return NaN;"number"==typeof a&&(!isNaN(a)&&0!=a)&&(a=d.round(a,this._decimalInfo.places));
return this.inherited(arguments,[a])},serialize:function(a,b){return"number"!=typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=f.hitch(f.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(a,!0)},_setValueAttr:function(a,b,c){if(void 0!==a&&void 0===c)if(c=String(a),"number"==typeof a)if(isNaN(a))c="";else{if("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else a?a=void 0:(c="",a=NaN);
this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);if(isNaN(a)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+d._realNumberRegexp(f.delegate(this.constraints))+"$").test(this.textbox.value))return a=Number(this.textbox.value),isNaN(a)?void 0:a}else return a},isValid:function(a){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var b=this.get("value");return!isNaN(b)&&
this.rangeCheck(b,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1},_isValidSubset:function(){var a="number"==typeof this.constraints.min,b="number"==typeof this.constraints.max,c=this.get("value");if(isNaN(c)||!a&&!b)return this.inherited(arguments);var d=c|0,f=0>c,g=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),h=(this.maxLength||20)-this.textbox.value.length,s=g?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,
""):"",d=g?d+"."+s:d+"",h=e.rep("9",h),g=c;f?g=Number(d+h):c=Number(d+h);return!(a&&c<this.constraints.min||b&&g>this.constraints.max)}});h=h("dijit.form.NumberTextBox",[c,a],{baseClass:"dijitTextBox dijitNumberTextBox"});h.Mixin=a;return h})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(h,f,g,e,d){var c={};h.setObject("dojo.number",c);c.format=function(a,b){b=h.mixin({},b||{});var d=f.normalizeLocale(b.locale),d=f.getLocalization("dojo.cldr",
"number",d);b.customs=d;d=b.pattern||d[(b.type||"decimal")+"Format"];return isNaN(a)||Infinity==Math.abs(a)?null:c._applyPattern(a,d,b)};c._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;c._applyPattern=function(a,b,d){d=d||{};var e=d.customs.group,f=d.customs.decimal;b=b.split(";");var g=b[0];b=b[0>a?1:0]||"-"+g;if(-1!=b.indexOf("%"))a*=100;else if(-1!=b.indexOf("\u2030"))a*=1E3;else if(-1!=b.indexOf("\u00a4"))e=d.customs.currencyGroup||e,f=d.customs.currencyDecimal||f,b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,
function(a,b,c,e){a=d[["symbol","currency","displayName"][c.length-1]]||d.currency||"";return!a?"":b+a+e});else if(-1!=b.indexOf("E"))throw Error("exponential notation not supported");var h=c._numberPatternRE,g=g.match(h);if(!g)throw Error("unable to find a number expression in pattern: "+b);!1===d.fractional&&(d.places=0);return b.replace(h,c._formatAbsolute(a,g[0],{decimal:f,group:e,places:d.places,round:d.round}))};c.round=function(a,b,c){c=10/(c||10);return(c*+a).toFixed(b)/c};if(0==(0.9).toFixed()){var b=
c.round;c.round=function(a,c,d){var e=Math.pow(10,-c||0),f=Math.abs(a);if(!a||f>=e)e=0;else if(f/=e,0.5>f||0.95<=f)e=0;return b(a,c,d)+(0<a?e:-e)}}c._formatAbsolute=function(a,b,d){d=d||{};!0===d.places&&(d.places=0);Infinity===d.places&&(d.places=6);b=b.split(".");var f="string"==typeof d.places&&d.places.indexOf(","),g=d.places;f?g=d.places.substring(f+1):0<=g||(g=(b[1]||[]).length);0>d.round||(a=c.round(a,g,d.round));a=String(Math.abs(a)).split(".");var h=a[1]||"";b[1]||d.places?(f&&(d.places=
d.places.substring(0,f)),f=void 0!==d.places?d.places:b[1]&&b[1].lastIndexOf("0")+1,f>h.length&&(a[1]=e.pad(h,f,"0",!0)),g<h.length&&(a[1]=h.substr(0,g))):a[1]&&a.pop();g=b[0].replace(",","");f=g.indexOf("0");-1!=f&&(f=g.length-f,f>a[0].length&&(a[0]=e.pad(a[0],f)),-1==g.indexOf("#")&&(a[0]=a[0].substr(a[0].length-f)));var g=b[0].lastIndexOf(","),p,r;-1!=g&&(p=b[0].length-g-1,b=b[0].substr(0,g),g=b.lastIndexOf(","),-1!=g&&(r=b.length-g-1));b=[];for(g=a[0];g;)f=g.length-p,b.push(0<f?g.substr(f):g),
g=0<f?g.slice(0,f):"",r&&(p=r,delete r);a[0]=b.reverse().join(d.group||",");return a.join(d.decimal||".")};c.regexp=function(a){return c._parseInfo(a).regexp};c._parseInfo=function(a){a=a||{};var b=f.normalizeLocale(a.locale),b=f.getLocalization("dojo.cldr","number",b),e=a.pattern||b[(a.type||"decimal")+"Format"],g=b.group,h=b.decimal,n=1;if(-1!=e.indexOf("%"))n/=100;else if(-1!=e.indexOf("\u2030"))n/=1E3;else{var p=-1!=e.indexOf("\u00a4");p&&(g=b.currencyGroup||g,h=b.currencyDecimal||h)}b=e.split(";");
1==b.length&&b.push("-"+b[0]);b=d.buildGroupRE(b,function(b){b="(?:"+d.escapeString(b,".")+")";return b.replace(c._numberPatternRE,function(b){var d={signed:!1,separator:a.strict?g:[g,""],fractional:a.fractional,decimal:h,exponent:!1};b=b.split(".");var e=a.places;1==b.length&&1!=n&&(b[1]="###");1==b.length||0===e?d.fractional=!1:(void 0===e&&(e=a.pattern?b[1].lastIndexOf("0")+1:Infinity),e&&void 0==a.fractional&&(d.fractional=!0),!a.places&&e<b[1].length&&(e+=","+b[1].length),d.places=e);b=b[0].split(",");
1<b.length&&(d.groupSize=b.pop().length,1<b.length&&(d.groupSize2=b.pop().length));return"("+c._realNumberRegexp(d)+")"})},!0);p&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,c,e,f){b=d.escapeString(a[["symbol","currency","displayName"][e.length-1]]||a.currency||"");if(!b)return"";c=c?"[\\s\\xa0]":"";f=f?"[\\s\\xa0]":"";return!a.strict?(c&&(c+="*"),f&&(f+="*"),"(?:"+c+b+f+")?"):c+b+f}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:g,decimal:h,factor:n}};c.parse=function(a,
b){var d=c._parseInfo(b),e=RegExp("^"+d.regexp+"$").exec(a);if(!e)return NaN;var f=e[1];if(!e[1]){if(!e[2])return NaN;f=e[2];d.factor*=-1}f=f.replace(RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return f*d.factor};c._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");if(!("fractional"in a)||/^0/.test(a.places))a.fractional=[!0,!1];"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var b=c._integerRegexp(a),
e=d.buildGroupRE(a.fractional,function(b){var c="";b&&0!==a.places&&(c="\\"+a.decimal,c=Infinity==a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),f=d.buildGroupRE(a.exponent,function(b){return b?"([eE]"+c._integerRegexp({signed:a.eSigned})+")":""}),b=b+e;e&&(b="(?:(?:"+b+")|(?:"+e+"))");return b+f};c._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var b=d.buildGroupRE(a.signed,function(a){return a?
"[-+]":""},!0),c=d.buildGroupRE(a.separator,function(b){if(!b)return"(?:\\d+)";b=d.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var c=a.groupSize,e=a.groupSize2;return e?(b="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+b+"]\\d{"+e+"})*["+b+"]\\d{"+c+"})",0<c-e?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return b+c};return c})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],
function(h,f,g){return h("dijit.form.RangeBoundTextBox",g,{rangeMessage:"",rangeCheck:function(e,d){return("min"in d?0<=this.compare(e,d.min):!0)&&("max"in d?0>=this.compare(e,d.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var e=this.get("value");if(null==e)return!1;var d=!1;"min"in this.constraints&&(d=this.constraints.min,d=0>this.compare(e,"number"==typeof d&&0<=d&&0!=e?0:d));!d&&"max"in this.constraints&&(d=this.constraints.max,
d=0<this.compare(e,"number"!=typeof d||0<d?d:0));return d},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(e){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(e))},getErrorMessage:function(e){var d=this.get("value");return null!=d&&""!==d&&("number"!=typeof d||!isNaN(d))&&!this.isInRange(e)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);
this.rangeMessage||(this.messages=f.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(h,f,g,e){return h("dijit.form.MappedTextBox",e,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(d){return d.toString?d.toString():""},toString:function(){var d=
this.filter(this.get("value"));return null!=d?"string"==typeof d?d:this.serialize(d,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=g.place("\x3cinput type\x3d'hidden'"+(this.name&&!f("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(h,f,g,e,d,c,b){var a=h("dijit.form.ValidationTextBox",d,{templateString:b,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,c){c!=a.prototype[b]&&(f.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",
a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(a,b){return RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?a:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b=
"",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=
!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?c.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):c.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=g.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&
this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(d){c=this.pattern}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=e.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setMessageAttr:function(a){this._set("message",
a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){c.hide(this.domNode);this.inherited(arguments)}});return a})},"MW/rtc/plugins/language/matlab/section/SectionsList":function(){define("dojo/aspect dojo/_base/declare dojo/_base/lang dojo/Evented MW/rtc/plugins/language/matlab/section/Position MW/syntaxhighlighting/SyntaxHighlightingDataServiceFactory mw-utils/Utils".split(" "),
function(h,f,g,e,d,c,b){f=f([e],{constructor:function(a,b){this._internalDocument=a;this._document=b;this._dataService=c.getInstance();this._sections=[];h.after(this._dataService,"onSectionLocationUpdate",g.hitch(this,this._updateModel),!0)},_updateCells:function(){var a=this;clearTimeout(this._idleTimerID);this._idleTimerID=setTimeout(function(){a._serverRequest()},200)},_serverRequest:function(){this._requestID=b.generateUuid();var a=this._document.getCodeText(!0);this._dataService.updateData(a,
this._requestID,!0)},updateCells:function(){this._updateCells()},onUpdateModel:function(a,b,c,d){},getSections:function(){return this._sections},_updateModel:function(a,b,c,e){if(this._document.getText()===e&&c){var f;this._sections.forEach(function(a){a.startPosition.destroy();a.endPosition.destroy()});this._sections=[];var g=this._internalDocument.getMaxLineNumber()-1;0<b.length&&0<b[0]&&this._sections.push({startPosition:new d(0,0,this._internalDocument),endPosition:new d(g,this._getMaxColumnOnLine(g),
this._internalDocument)});for(f=0;f<b.length-1;f+=2){var h=b[f+1];this._sections.push({startPosition:new d(b[f],0,this._internalDocument),endPosition:new d(h,this._getMaxColumnOnLine(h),this._internalDocument)})}h=0;for(f=1;f<this._sections.length;f+=1)this._sections[f].endPosition.getRow()>this._sections[h].endPosition.getRow()&&(h=f);0<this._sections.length&&this._sections[h].endPosition.getRow()<g&&(f=this._sections[h],this._sections[h].startPosition.destroy(),this._sections[h].endPosition.destroy(),
this._sections[h]={startPosition:new d(f.startPosition.getRow(),0,this._internalDocument),endPosition:new d(g,this._getMaxColumnOnLine(g),this._internalDocument)});this.onUpdateModel(a,b,c,e);this.emit("sectionsChangedEvent")}},_getMaxColumnOnLine:function(a){return this._internalDocument.getLineNode(a).getText().length},getTextInLine:function(a){return this._internalDocument.getLineNode(a).getText()}});f.hasSectionTitle=function(a){var b=!0;a.match(/^\s*%%(\s|$)/)||(b=!1);return b};return f})},"MW/rtc/plugins/language/matlab/section/Position":function(){define(["dojo/_base/declare",
"dojo/aspect","dojo/_base/lang","MW/rtc/model/DocumentConstants"],function(h,f,g,e){return h(null,{constructor:function(d,c,b){this._row=d;this._column=c;0>this._column&&(this._column=0);this._connection=f.after(b,"onPreDocumentChanged",g.hitch(this,this._updatePosition),!0)},getRow:function(){return this._row},_updatePosition:function(d){if(d)if(d.type===e.INSERT_BREAK_EVENT){var c=d.line,b=d.column;if(this._row>c||this._row===c&&b<=this._column)this._row+=d.numberOfLines}else d.type===e.DELETION_EVENT&&
(c=d.startLine,d=d.endLine,b=d-c,0!==b&&(!(this._row<c)&&this._row!==c&&this._row>c)&&(this._row>d?this._row-=b:this._row<d?this._row=c:this._row===d&&(this._row-=b)))},destroy:function(){this._connection.remove()}})})},"MW/uiframework/UIBuilderFactory":function(){define(["./UIBuilder","mw-actiondataservice/ActionDataService"],function(h,f){var g={};return{getInstance:function(e){e=e||{};e.channel=e.channel||"/DefaultUIBuilderPeerModelChannel";e.enableQABCustomization=e.enableQABCustomization||!1;
g[e.channel]||(e.isMATLABDriven=!!e.isMATLABDriven,e.actionService=e.actionService||new f({nameSpace:e.channel+"_Action",mode:e.isMATLABDriven?"ActAsClient":"StandAlone"}),g[e.channel]=new h(e));return g[e.channel]},destroyInstance:function(e){e=e||"/DefaultUIBuilderPeerModelChannel";g[e]&&(g[e].cleanup(),delete g[e])}}})},"MW/uiframework/UIBuilder":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry ./constants/TypeConstants ./managers/ModelManager ./managers/WidgetManager ./supportedUIBuilderFunctions".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a){var h,l;h=new d(a);l=new c({modelManager:h});b.fromModelManager.forEach(function(a){this[a]=f.hitch(h,h[a])},this);b.fromWidgetManager.forEach(function(a){this[a]=f.hitch(l,l[a])},this);this.cleanup=function(){h.cleanup();l.cleanup()};a.manageTabGroupsOutsidePeerModel&&(this.add=function(a,b,c){(c=h.manager.getById(a))&&c.getType()===e.TAB_GROUP?l.addOutsidePeerModel(a,b):h.add(a,b,indes)},this.remove=function(a){var b=h.manager.getById(a);
b&&b.getType()===e.TAB_GROUP?l.removeOutsidePeerModel(a):h.remove(a)},this.get=function(a,b){if("selectedTab"===b&&h.manager.getById(a).getType()===e.TOOLSTRIP){var c=g.byId(a);return c?c.get(b):""}return h.get(a,b)},this.set=function(a,b,c){if("selectedTab"===b&&h.manager.getById(a).getType()===e.TOOLSTRIP)(a=g.byId(a))&&a.set(b,c);else return h.set(a,b,c)},this.getChildrenIds=function(a){if(h.manager.getById(a).getType()===e.TOOLSTRIP){a=g.byId(a).getChildren();var b=[];b.length=a.length;for(var c=
0;c<b.length;c++)b[c]=a[c].id;return b}return h.getChildrenIds(a)},this.isAnOrphan=function(a){return h.manager.getById(a).getType()===e.TAB?(a=g.byId(a),!(a&&a.getParent()&&a.getParent().getParent())):h.isAnOrphan(a)},this.selectFirstTabInTabGroup=function(a,b){var c=h.tagToPeerNodeIdMap[a];if(c&&(c=h.manager.getById(c))&&0<c.getChildren().length){var d=g.byId(b);d&&(d.set("selectedTab",""),d.set("selectedTab",c.getChildren()[0].getId()))}},this.addPropertySetCallback=function(a,b,c){return h.manager.getById(a).getType()===
e.TOOLSTRIP?(a=g.byId(a))?a.watch(function(a,c,d){b({property:a,oldValue:c,newValue:d})}):null:h.addPropertySetCallback(a,b,c)})}})})},"MW/uiframework/constants/TypeConstants":function(){define(["dojo/_base/lang","MW/toolstrip/constants/TypeConstants"],function(h,f){var g={ROOT:"Root",ORPHAN_ROOT:"OrphanRoot"};h.mixin(g,f);return g})},"MW/uiframework/managers/ModelManager":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry dojo/dom dojo/dom-attr mw-peermodel/PeerModelManager mw-peermodel/_PeerModelListenerMixin ../constants/TypeConstants ../hashes/ComponentPropertiesHash ../hashes/IconPropertiesSupportingBase64 ../hashes/ComponentsWithNoParent MW/toolstrip/hashes/ComponentsSupportedByFooterCell MW/toolstrip/hashes/ComponentsEligibleForQAB MW/toolstrip/ToolstripUtils ../../toolstrip/hashes/listOfNewWidgets MW/toolstrip/hashes/DefaultGalleryItemWidths mw-log/Log".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){return h([b],{constructor:function(a){a=a||{};this.isMATLABDriven=a.isMATLABDriven;this._channel=a.channel;this.actionService=a.actionService;this.enableQABCustomization=a.enableQABCustomization;this._autoGeneratedActions={};this.tagToPeerNodeIdMap={};this._typeToRootNodeMap={};this._setupPeerModelManager()},_setupPeerModelManager:function(){var b;this.manager=c.getInstance(this._channel);this.addManagerListeners();this.isMATLABDriven?this.start():(this._root=
this.manager.setRoot(a.ROOT),this._root.addChild(a.ORPHAN_ROOT),this._root.addChild(a.TOOLSTRIP_ROOT),this._root.addChild(a.POPUP_ROOT),this._root.addChild(a.QAB_ROOT),b=this._root.addChild(a.GALLERY_ROOT),b.addChild(a.GALLERY_POPUP_ROOT),b.addChild(a.GALLERY_FAVORITE_CATEGORY_ROOT))},create:function(a){var b,c,d,e;this._supportBase64URL(a);c=f.clone(a);d=c.parentId;b=this._verifyProperties(c);if(p.supportsAction(a.type))if(a.actionId){if(e=this.actionService.getAction(a.actionId))this._supportBase64URL(e),
this._convertPopupTagToId(e),Object.keys(k[a.type]).forEach(function(c){k[a.type][c].notInAction||this._isAValidValue(e[c],k[a.type][c],k[a.type])||(e[c]=b.actionNodeProps[c])},this),this.actionService.updateAction(a.actionId,e)}else b.viewNodeProps.actionId=this.actionService.addAction(b.actionNodeProps),this._autoGeneratedActions[b.viewNodeProps.actionId]=!0;c=this._getCorrespondingParentNode(b.type,d);p.isAFooterCell(c.getType())&&-1===q.indexOf(a.type)&&t.error(a.type+" is not supported by Footer Cell");
c=c.addChild(b.type,b.viewNodeProps);"Toolstrip"===b.type&&d&&this.placeToolstripById(c.getId(),d);this._postProcessing(c);return c.getId()},_getCorrespondingParentNode:function(b,c){var d;switch(b){case a.TOOLSTRIP:d=this._getRootNodeByType(a.TOOLSTRIP_ROOT);break;case a.QAB:d=this._getRootNodeByType(a.QAB_ROOT);break;case a.POPUP_LIST:d=this.exists(c)?this.manager.getById(c):this._getRootNodeByType(a.POPUP_ROOT);break;case a.GALLERY_POPUP:d=this._getRootNodeByType(a.GALLERY_POPUP_ROOT);break;case a.GALLERY_FAVORITE_CATEGORY:d=
this._getRootNodeByType(a.GALLERY_FAVORITE_CATEGORY_ROOT);break;default:d=this.exists(c)?this.manager.getById(c):this._getRootNodeByType(a.ORPHAN_ROOT)}return d},_findAncestorTabGroupId:function(b){for(;this.get(b,"type")!==a.TAB_GROUP;)if(null===b||this._root===this.manager.getById(b)){b=null;break}else b=this.getParentId(b);return b},_createCorrespondingComponentInQAB:function(b,c){var d=this._findAncestorTabGroupId(b);if(null!==d){var d=this.get(d,"QAGroupId"),e=this.get(b,"actionId"),f=this.get(b,
"tag")+"_qab",g=[];this.manager.getByType(a.QA_GROUP).forEach(function(a){g=g.concat(this.manager.getByProperty("actionId",e,a))},this);0===g.length&&(b=this.create({type:n[this.get(b,"type")],tag:f,actionId:e,parentId:d}),c&&this.move(b,d,0),this._hookupRemoveFromQABListener(b));return b}},_hookupAddToQABListener:function(a){var b=this.get(a,"actionId");this.actionService._actionById(b).addEventListener("propertySet",function(b){"isInQAB"===b.data.key&&!0===b.data.newValue&&this._createCorrespondingComponentInQAB(a,
!0)},this)},_hookupRemoveFromQABListener:function(a){var b=this.get(a,"actionId");this.actionService._actionById(b).addEventListener("propertySet",function(b){"isInQAB"===b.data.key&&!1===b.data.newValue&&this.exists(a)&&this.destroy(a)},this)},_postProcessing:function(b){var c,d;-1<Object.keys(n).indexOf(b.getType())&&(this._hookupAddToQABListener(b.getId()),!0===this.get(b.getId(),"isInQAB")&&this._createCorrespondingComponentInQAB(b.getId()));switch(b.getType()){case a.TOOLSTRIP:c=this.create({type:a.QAB});
this.set(b.getId(),"QABId",c);break;case a.TAB_GROUP:d=b.getParent();d.getType()===a.TOOLSTRIP&&(c=d.getProperty("QABId"));d=this.get(b.getId(),"tag");c=this.create({type:a.QA_GROUP,parentId:c,tag:d?d+"_qaGroup":""});this.set(b.getId(),"QAGroupId",c);break;case a.GALLERY_POPUP:c=this.create({type:a.GALLERY_FAVORITE_CATEGORY});this.set(b.getId(),"favCategoryId",c);break;case a.GALLERY:this.set(b.getId(),"currentColumnCount",this.get(b.getId(),"maxColumnCount"));break;case a.GALLERY_CATEGORY:this.addEventCallback(b.getId(),
function(a){"categoryMoved"===a.eventType&&(b.setProperty("animation",{shouldAnimate:!0,startId:"",endId:""}),this.manager.move(b,b.getParent(),0))},this);break;case a.QA_GROUP:case a.GALLERY_FAVORITE_CATEGORY:this.addEventCallback(b.getId(),function(a){"itemMoved"===a.eventType&&this.manager.move(this.manager.getById(a.itemId),b,a.newIndex)},this);break;case a.GALLERY_ITEM:case a.TOGGLE_GALLERY_ITEM:this.addEventCallback(b.getId(),function(a){var c;"favButtonPushed"===a.eventType&&(a=b.getProperty("tag"),
c=b.getProperty("actionId"),(c=this.actionService.getAction(c).isFavorite)?this.removeGalleryItemFromFavorites(a,!0,b.getId()):this.addGalleryItemToFavorites(a,!0,b.getId()))},this)}},addGalleryItemToFavorites:function(b,c,d){var e,f,g;c=c?!0:!1;if(g=this._peerNodeByTag(b,this._getRootNodeByType(a.GALLERY_POPUP_ROOT)))f=g.getParent(),b=g.getProperty("actionId"),e=this.actionService.getAction(b).isFavorite,e||(e=f.getParent().getProperty("favCategoryId"),this.create({type:g.getType(),tag:g.getProperty("tag"),
actionId:b,parentId:e,animation:{shouldAnimate:c,startId:d?d:g.getId(),endId:""}}),this.actionService.updateAction(b,{isFavorite:!0}))},removeGalleryItemFromFavorites:function(b,c,d){var e,f,g,h;c=c?!0:!1;this.exists(d)&&(g=this.manager.getById(d));if(b=this._peerNodeByTag(b,this._getRootNodeByType(a.GALLERY_POPUP_ROOT)))if(g=g?g.getParent():b.getParent(),b=b.getProperty("actionId"),e=this.actionService.getAction(b).isFavorite)g.getType()===a.GALLERY_FAVORITE_CATEGORY?(f=g.getId(),h=this.manager.getByProperty("actionId",
b,this.manager.getByProperty("favCategoryId",f,this._getRootNodeByType(a.GALLERY_POPUP_ROOT))[0])[0].getId()):g.getType()===a.GALLERY_CATEGORY&&(f=g.getParent().getProperty("favCategoryId"),h=d),d=this.manager.getByProperty("actionId",b,this.manager.getById(f))[0],d.setProperty("animation",{shouldAnimate:c,startId:"",endId:h}),this.destroy(d.getId()),this.actionService.updateAction(b,{isFavorite:!1})},add:function(b,c,d){var e,f;if(this._getRootNodeByType(a.ORPHAN_ROOT).hasDescendant(b))if(e=this.manager.getById(b),
f=this.manager.getById(c),t.assert(f,"The parentId provided is not valid!"),"FooterCell"===f._type&&-1===q.indexOf(e._type))t.warn(e._type+" is not supported by Footer Cell");else{if(0>d||d>f.getChildren().length)d=f.getChildren().length;this.manager.move(e,f,d);this.get(b,"type")===a.TAB_GROUP&&this.get(c,"type")===a.TOOLSTRIP&&(b=this.get(b,"QAGroupId"),c=this.get(c,"QABId"),this.add(b,c,this.manager.getById(c).getNumberOfChildren()-d))}else t.assert(!1,"The child being added should be an orphan!")},
remove:function(b){var c;this.exists(b)?(c=this.manager.getById(b),this.manager.move(c,this._getRootNodeByType(a.ORPHAN_ROOT)),this.get(b,"type")===a.TAB_GROUP&&this.remove(this.get(b,"QAGroupId"))):t.assert(!1,"The node does not exist!")},destroy:function(a){var b;this.exists(a)?(a=this.manager.getById(a),b=a.getProperty("actionId"),a.destroy(),this._autoGeneratedActions[b]&&0===this.manager.getByProperty("actionId",b).length&&(this.actionService.removeAction(b),delete this._autoGeneratedActions[b])):
t.assert(!1,"The node does not exist!")},get:function(a,b){var c,d;if(this.exists(a))return c=this.manager.getById(a),"type"===b?d=c.getType():k[c.getType()][b].notInAction?(t.assert(c.hasProperty(b),"This is not a valid property!"),d=c.getProperty(b)):p.supportsAction(c.getType())?(c=c.getProperty("actionId"),t.assert(this.actionService.actionHasProperty(c,b),"This is not a valid property!"),d=this.actionService.getAction(c)[b]):t.assert(!1,"This is not a valid property!"),d;t.assert(!1,"The node does not exist!")},
getChildrenIds:function(a){if(this.exists(a))return a=this.manager.getById(a),a.getChildren().map(function(a){return a.getId()});t.assert(!1,"The node does not exist!")},exists:function(a){return this.manager.hasById(a)},indexOf:function(a){var b=-1,c;c=this.manager.getById(a);this.getParentId(a)&&(b=c.getParent().getChildIndex(c));return b},isAnOrphan:function(b){return this._getRootNodeByType(a.ORPHAN_ROOT).hasDescendant(b)},getParentId:function(b){var c;if(!this.exists(b))return t.assert(!1,"A component with the given id does not exist!"),
null;c=this.manager.getById(b);return!this._getRootNodeByType(a.ORPHAN_ROOT).hasChild(b)&&-1===m.indexOf(c.getType())?c.getParent().getId():null},set:function(a,b,c,d){var e,f={};this.exists(a)?(a=this.manager.getById(a),e=k[a.getType()],e[b]&&this._isAValidValue(c,e[b],b)&&(e[b].notInAction?a.setProperty(b,c,d):p.supportsAction(a.getType())?(a=a.getProperty("actionId"),f[b]=c,this.actionService.updateAction(a,f,d)):t.assert(!1,"This is not a valid property!"))):t.assert(!1,"The node does not exist!")},
move:function(a,b,c){a=this.manager.getById(a);t.assert(a,"The node being moved does not exist!");b=this.manager.getById(b);t.assert(b,"The new parent node does not exist!");if(0>c||c>b.getChildren().length)c=b.getChildren().length;this.manager.move(a,b,c)},getAllProperties:function(a){var b,c,d;b=this.manager.getById(a);c=b.getProperties();if(p.supportsAction(b.getType())&&(a=b.getProperty("actionId")))(d=this.actionService.getAction(a))&&Object.keys(d).forEach(f.hitch(this,function(a){k[b.getType()][a]||
delete d[a]})),c=f.mixin(c,d);return c},_supportBase64URL:function(a){var b;Object.keys(l).forEach(f.hitch(this,function(c){c in a&&(b=a[c],"string"===typeof b&&0===b.indexOf("url(")&&(a[c]=this._stripURL(b)))}))},_stripURL:function(a){a=a.slice(4);return a.slice(0,a.length-1)},_verifyProperties:function(b){var c={},d,e,f={viewNodeProps:{},actionNodeProps:{}};t.assert(b.type,"Type needs to be provided for all components!");d=k[b.type];f.type=b.type;this._convertPopupTagToId(b);Object.keys(d).forEach(function(a){this._isAValidValue(b[a],
d[a],a)?c[a]=b[a]:d[a].required?t.error(a+" needs to be provided for component of type "+b.type):c[a]=d[a].defaultValue},this);Object.keys(c).forEach(function(a){d[a].notInAction?f.viewNodeProps[a]=c[a]:f.actionNodeProps[a]=c[a]});f.type===a.GALLERY_POPUP?f.viewNodeProps.galleryItemWidth||(f.viewNodeProps.galleryItemWidth=s[f.viewNodeProps.galleryItemRowCount][f.viewNodeProps.galleryItemTextLineCount]):f.type===a.GALLERY&&(e=this.manager.getById(f.viewNodeProps.galleryPopupId),f.viewNodeProps.galleryItemWidth=
e.getProperty("galleryItemWidth"),f.viewNodeProps.galleryItemRowCount=e.getProperty("galleryItemRowCount"),f.viewNodeProps.galleryItemTextLineCount=e.getProperty("galleryItemTextLineCount"),f.viewNodeProps.scrollToSelection=e.getProperty("scrollToSelection"));return f},_convertPopupTagToId:function(a){var b,c={},d={popupTag:"popupId",galleryPopupTag:"galleryPopupId"};Object.keys(d).forEach(function(e){b=d[e];a[e]&&((e=this.tagToId(a[e]))&&(a[b]=e),c[b]=a[b],c[b]&&this.actionService.updateAction(a.id,
c))},this)},_isAValidValue:function(a,b,c){var d,e=!0;void 0===a||null===a?e=!1:"Array"===b.type?Array.isArray(a)||(t.warn(c+" property default type is "+b.type+" but you have passed "+typeof a),e=!1):(d=b.type.toLowerCase(),typeof a!==d&&(e=!1,a=Array.isArray(a)?"Array":typeof a,t.warn(c+" property default type is "+b.type+" but you have passed "+a)));return e},selectTab:function(a){var b;this.tagToPeerNodeIdMap[a]&&(a=this.manager.getById(this.tagToPeerNodeIdMap[a]),b=a.getParent(),this._widgetByPeerNode(b).set("selectedTab",
a.getId()))},selectFirstTabInTabGroup:function(a){if(this.tagToPeerNodeIdMap[a]&&(a=this.manager.getById(this.tagToPeerNodeIdMap[a]))&&0<a.getChildren().length)this.set(this.getParentId(a.getId()),"selectedTab",""),this.set(this.getParentId(a.getId()),"selectedTab",a.getChildren()[0].getId())},placeToolstripAt:function(a,b){var c=this.widgetByTag(a);c.placeAt(b);c.startup()},placeToolstripById:function(a,b){var c=this.widgetById(a);c.placeAt(b);c.startup()},widgetByTag:function(a){return g.byId(this.tagToId(a))},
widgetById:function(a){return g.byId(a)},_widgetByPeerNode:function(a){return g.byId(a.getId().toString())},_peerNodeByTag:function(b,c){c=c||this._getRootNodeByType(a.ROOT);return this.manager.getByProperty("tag",b,c)[0]},showPopup:function(a,b){var c=g.byId(a.toString());c&&e.byId(d.get(c.domNode,"widgetid"))&&(-1<r.indexOf(c.type)?(b&&c.set("menuId",b),c.showMenu()):(c.set("popupId",b),p.isAListItemWithPopup(c.get("type"))?c.getParent().hover_timer=c.getParent().defer(function(){c.getParent()._openItemPopup(c)},
c.getParent().popupDelay):c.toggleDropDown()))},addEventCallback:function(a,b,c){var d,e,f,g;t.assert(this.exists(a),"The node does not exist!");d=this.manager.getById(a);e=function(a){delete a.data.type;b.call(c||d.getProperties(),a.data)};d.addEventListener("peerEvent",e,c);p.supportsAction(d.getType())&&(a=d.getProperty("actionId"),f=this.actionService._actionById(a),g=function(a){delete a.data.type;b.call(c||f.getProperties(),a.data)},f.addEventListener("peerEvent",g,c));return{remove:function(){d.removeEventListener("peerEvent",
e,c);p.supportsAction(d.getType())&&f.removeEventListener("peerEvent",g,c)}}},addPropertySetCallback:function(a,b,c){var d,e,f,g=this;t.assert(this.exists(a),"The node does not exist!");e=this.manager.getById(a);f=function(a){a.originator&&"UI"===a.originator.source&&b.call(c||e.getProperties(),{property:a.data.key,oldValue:a.data.oldValue,newValue:a.data.newValue})};a=function(a,d){d&&"UI"===d.source&&b.call(c,a)};e.addEventListener("propertySet",f,c);p.supportsAction(e.getType())&&(d=e.getProperty("actionId"),
this.actionService.addActionChangeCallback(d,a,c));return{remove:function(){e.removeEventListener("propertySet",f,c);p.supportsAction(e.getType())&&g.actionService.removeActionChangeCallback(d)}}},tagToId:function(a){if(a)return this.tagToPeerNodeIdMap[a]},createPopupsFromConfig:function(a){a.popups.forEach(function(a){this._addConfigItem(a)},this)},createGalleryPopupFromConfig:function(a){this._addConfigItem(a)},addToolstripFromConfig:function(a){this.create(a)},addTabGroupFromConfig:function(a,
b,c){this._addConfigItem(this._findInConfig(a,b),c)},_addConfigItem:function(a,b){g.byId(a.id)?this.add(a.id,a.parentId):(b&&(a.parentId=this.tagToId(b)),a.id=this.create(a),a.children&&this._addChildren(a.id,a.children))},_addChildren:function(a,b){b.forEach(function(b){b.parentId=a;this._addConfigItem(b)},this)},_findInConfig:function(a,b){function c(a,b){a.tag===b?d=a:a.children&&a.children.forEach(function(a){c(a,b)})}var d;c(a,b);return d},cleanup:function(){this.isMATLABDriven||this._getRootNodeByType(a.ROOT).destroy();
this.actionService.destroy();c.cleanup(this._channel)},_getRootNodeByType:function(a){var b=null;if(this._typeToRootNodeMap[a])b=this._typeToRootNodeMap[a];else{var c=this.manager.getByType(a);c&&(b=c[0]);this._typeToRootNodeMap[a]=b}return b},getAllCategoriesInDescendingOrder:function(a){var b=[];a=a.getChildren();for(var c=a.pop();c;)b.push(c),c=a.pop();return b},getGalleryState:function(a){var b,c=[],d;a=this.tagToId(a);d={items:{tags:[],isFavorite:[]},categories:{tags:[]}};if(this.exists(a))return a=
this.manager.getById(a),b=this.manager.getById(a.getProperty("favCategoryId")),b=b.getChildren(),a.getChildren().forEach(function(a){a.getChildren().forEach(function(a){c.push(a)})}),b.concat(c).forEach(function(a){var b;b=a.getProperty("actionId");a=a.getProperty("tag");b=this.actionService.getAction(b).isFavorite;-1===d.items.tags.indexOf(a)&&(d.items.tags.push(a),d.items.isFavorite.push(b))},this),d.categories.tags=a.getChildren().map(function(a){return a.getProperty("tag")}),a.setProperty("state",
d),d;t.assert(!1,"The node does not exist!")},setGalleryState:function(a,b){var c,d,e,f,g,h,k=0,l=this.tagToId(a);this.exists(l)?(c=this.manager.getById(l),f=c.getProperty("favCategoryId"),g=this.manager.getById(f),g.getChildren().forEach(function(a){-1!==b.items.tags.indexOf(a.getProperty("tag"))&&(this.actionService.updateAction(a.getProperty("actionId"),{isFavorite:!1}),a.destroy())},this),b.items.tags.forEach(function(a,e){var g;b.items.isFavorite[e]&&(d=this.manager.getByProperty("tag",a,c),
0<d.length&&(h=d[0].getProperty("actionId"),g=this.create({type:d[0].getType(),tag:a,actionId:h}),this.add(g,f,k),k+=1,this.actionService.updateAction(h,{isFavorite:!0})))},this),b.categories.tags.forEach(function(a,b){e=this.tagToId(a);this.exists(e)&&this.move(e,l,b)},this)):t.assert(!1,"The node does not exist!")},getQABState:function(a){var b=[];a=this.get(this.tagToId(a),"QABId");this.getChildrenIds(a).forEach(function(a){this.getChildrenIds(a).forEach(function(a){var c={};c.tag=this.get(a,"tag");
c.showText=this.get(a,"showText");b.push(c)},this)},this);return b},setQABState:function(a,b,c){this.get(this.tagToId(a),"QABId");if(!Array.isArray(b)&&void 0!==b){var d=[];Object.keys(b).forEach(function(a){var c={};c.tag=a;c.showText=b[a].showText;d.push(c)});b=d}void 0===b||0===b.length?c.forEach(function(a){a=this.create(a);this.set(a,"isInQAB",!0);this._hookupRemoveFromQABListener(a)},this):b.forEach(function(a){var b=a.tag,d=!1,e=!!a.showText;c.forEach(function(a){a.tag===b&&(d=!0,a.showText=
e,a=this.create(a),this.set(a,"isInQAB",!0),this._hookupRemoveFromQABListener(a))},this);if(!d)if(a=b.replace("_qab",""),a=this.tagToId(a),-1<Object.keys(n).indexOf(this.get(a,"type"))&&!1===this.get(a,"isInQAB")){var f=this._createCorrespondingComponentInQAB(a);this.set(f,"showText",e);this.set(a,"isInQAB",!0)}else(a=this.tagToId(b))&&this.set(a,"showText",e)},this)}})})},"MW/uiframework/hashes/ComponentPropertiesHash":function(){define("dojo/_base/lang MW/toolstrip/hashes/componentproperties/containers/ToolstripProperties MW/toolstrip/hashes/componentproperties/containers/QABProperties MW/toolstrip/hashes/componentproperties/containers/QAGroupProperties MW/toolstrip/hashes/componentproperties/containers/TabGroupProperties MW/toolstrip/hashes/componentproperties/containers/TabProperties MW/toolstrip/hashes/componentproperties/containers/ColumnProperties MW/toolstrip/hashes/componentproperties/containers/SectionProperties MW/toolstrip/hashes/componentproperties/containers/PanelProperties MW/toolstrip/hashes/componentproperties/containers/FooterProperties MW/toolstrip/hashes/componentproperties/containers/FooterCellProperties MW/toolstrip/hashes/componentproperties/controls/PushButtonProperties MW/toolstrip/hashes/componentproperties/controls/ToggleButtonProperties MW/toolstrip/hashes/componentproperties/controls/DropDownButtonProperties MW/toolstrip/hashes/componentproperties/controls/SplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/ToggleSplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/ColorPickerButtonProperties MW/toolstrip/hashes/componentproperties/controls/GridPickerButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABPushButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABDropDownButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABFloatingPaneDockProperties MW/toolstrip/hashes/componentproperties/controls/QABSplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABToggleButtonProperties MW/toolstrip/hashes/componentproperties/controls/QABToggleSplitButtonProperties MW/toolstrip/hashes/componentproperties/controls/ComboBoxProperties MW/toolstrip/hashes/componentproperties/controls/ListProperties MW/toolstrip/hashes/componentproperties/controls/PopupListProperties MW/toolstrip/hashes/componentproperties/controls/PopupListPanelProperties MW/toolstrip/hashes/componentproperties/controls/PopupListHeaderProperties MW/toolstrip/hashes/componentproperties/controls/PopupListSeparatorProperties MW/toolstrip/hashes/componentproperties/controls/TextAreaProperties MW/toolstrip/hashes/componentproperties/controls/TextFieldProperties MW/toolstrip/hashes/componentproperties/controls/HorizontalSliderProperties MW/toolstrip/hashes/componentproperties/controls/SpinnerProperties MW/toolstrip/hashes/componentproperties/controls/RadioButtonProperties MW/toolstrip/hashes/componentproperties/controls/CheckBoxProperties MW/toolstrip/hashes/componentproperties/controls/LabelProperties MW/toolstrip/hashes/componentproperties/controls/EmptyControlProperties MW/toolstrip/hashes/componentproperties/controls/MenuBarWrapperProperties MW/toolstrip/hashes/componentproperties/controls/ToolBarWrapperProperties MW/toolstrip/hashes/componentproperties/controls/GalleryProperties MW/toolstrip/hashes/componentproperties/controls/GalleryPopupProperties MW/toolstrip/hashes/componentproperties/controls/GalleryCategoryProperties MW/toolstrip/hashes/componentproperties/controls/GalleryFavoriteCategoryProperties MW/toolstrip/hashes/componentproperties/controls/GalleryItemProperties MW/toolstrip/hashes/componentproperties/controls/ToggleGalleryItemProperties MW/toolstrip/hashes/componentproperties/controls/ListItemProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithCheckBoxProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithRadioButtonProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithTextFieldProperties MW/toolstrip/hashes/componentproperties/controls/ListItemWithPopupProperties".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I,E,K,Y,Z,S,V,ha,U,ea,W,aa,ba,$,ka,da,fa,qa,T){var la={};Array.prototype.slice.call(arguments).forEach(function(a,b){0<b&&h.mixin(la,a)});return la})},"MW/toolstrip/hashes/componentproperties/containers/ToolstripProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../../../constants/DisplayStateConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e,d){var c={};c[f.TOOLSTRIP]=
h.mixin({displayState:{type:"string",notInAction:!0,defaultValue:g.EXPANDED},QABId:{type:"string",notInAction:!0,defaultValue:""},selectedTab:{type:"String",notInAction:!0,defaultValue:""}},e,d);return c})},"MW/toolstrip/constants/DisplayStateConstants":function(){define([],function(){return{COLLAPSED:"collapsed",EXPANDED:"expanded",EXPANDED_ON_TOP:"expanded_on_top"}})},"MW/toolstrip/hashes/componentproperties/properties/TypeProperty":function(){define(["./VerifyComponentProperty"],function(h){return{type:new h({type:"string",
defaultValue:"",notInAction:!0,required:!0})}})},"MW/toolstrip/hashes/componentproperties/properties/VerifyComponentProperty":function(){define(["mw-log/Log"],function(h){return function(f){f=f||{};"string"!==typeof f.type&&h.error(f.type,"Type property is required");"boolean"!==typeof f.notInAction&&h.error(f.notInAction,"NotInAction property is required");"boolean"!==typeof f.required&&h.error(f.required,"Required property is required");void 0===f.defaultValue&&h.error(f.defaultValue,"DefaultValue  property is required");
return f}})},"MW/toolstrip/hashes/componentproperties/properties/TagProperty":function(){define(["./VerifyComponentProperty"],function(h){return{tag:new h({type:"string",defaultValue:"",notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/containers/QABProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.QAB]=h.mixin({},g,e);return d})},"MW/toolstrip/hashes/componentproperties/containers/QAGroupProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.QA_GROUP]=h.mixin({},g,e);return d})},"MW/toolstrip/hashes/componentproperties/containers/TabGroupProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.TAB_GROUP]=h.mixin({selectedTab:{type:"string",notInAction:!0,defaultValue:""},QAGroupId:{type:"string",notInAction:!0,
defaultValue:""}},g,e);return d})},"MW/toolstrip/hashes/componentproperties/containers/TabProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TitleProperty ../properties/MnemonicProperty ../properties/RemovableProperty ../properties/RemoveMessageProperty".split(" "),function(h,f,g,e,d,c,b,a){var k={};k[f.TAB]=h.mixin({},g,e,d,c,b,a);return k})},"MW/toolstrip/hashes/componentproperties/properties/TitleProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{title:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/MnemonicProperty":function(){define(["./VerifyComponentProperty"],function(h){return{mnemonic:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/RemovableProperty":function(){define(["./VerifyComponentProperty"],function(h){return{removable:new h({type:"boolean",defaultValue:!1,notInAction:!0,
required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/RemoveMessageProperty":function(){define(["./VerifyComponentProperty"],function(h){return{removeMessage:new h({type:"string",defaultValue:"",notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/containers/ColumnProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../../../constants/AlignmentConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e,
d){var c={};c[f.COLUMN]=h.mixin({horizontalAlignment:{type:"string",notInAction:!0,defaultValue:g.LEFT},width:{type:"number",notInAction:!0,defaultValue:0},extraColumnGap:{type:"boolean",notInAction:!0,defaultValue:!1}},e,d);return c})},"MW/toolstrip/constants/AlignmentConstants":function(){define([],function(){return{LEFT:"left",RIGHT:"right",CENTER:"center"}})},"MW/toolstrip/hashes/componentproperties/containers/SectionProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants",
"../properties/TypeProperty","../properties/TagProperty","../properties/TitleProperty"],function(h,f,g,e,d){var c={};c[f.SECTION]=h.mixin({collapsePriority:{type:"number",notInAction:!0,defaultValue:0}},g,e,d);return c})},"MW/toolstrip/hashes/componentproperties/containers/PanelProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.PANEL]=h.mixin({},g,e);return d})},"MW/toolstrip/hashes/componentproperties/containers/FooterProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.FOOTER]=h.mixin({},g,e);return d})},"MW/toolstrip/hashes/componentproperties/containers/FooterCellProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.FOOTER_CELL]=h.mixin({},g,e);return d})},"MW/toolstrip/hashes/componentproperties/controls/PushButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.PUSH_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/IconProperty":function(){define(["./VerifyComponentProperty"],function(h){return{icon:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/QuickAccessIconProperty":function(){define(["./VerifyComponentProperty"],function(h){return{quickAccessIcon:new h({type:"string",
notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/IconOverrideProperty":function(){define(["./VerifyComponentProperty"],function(h){return{iconOverride:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/TextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{text:new h({type:"string",defaultValue:"",notInAction:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/TextOverrideProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{textOverride:new h({type:"string",defaultValue:"",notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/EnabledProperty":function(){define(["./VerifyComponentProperty"],function(h){return{enabled:new h({type:"boolean",shouldBeFlipped:!0,notInAction:!1,defaultValue:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/DescriptionProperty":function(){define(["./VerifyComponentProperty"],function(h){return{description:new h({type:"string",
notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/DescriptionOverrideProperty":function(){define(["./VerifyComponentProperty"],function(h){return{descriptionOverride:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ShortcutProperty":function(){define(["./VerifyComponentProperty"],function(h){return{shortcut:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},
"MW/toolstrip/hashes/componentproperties/properties/ActionIdProperty":function(){define(["./VerifyComponentProperty"],function(h){return{actionId:new h({type:"string",notInAction:!0,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/IsInQABProperty":function(){define(["./VerifyComponentProperty"],function(h){return{isInQAB:new h({type:"boolean",notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ToggleButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/SelectedProperty ../properties/ButtonGroupNameProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){var v={};v[f.TOGGLE_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u);return v})},"MW/toolstrip/hashes/componentproperties/properties/SelectedProperty":function(){define(["./VerifyComponentProperty"],function(h){return{selected:new h({type:"boolean",notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ButtonGroupNameProperty":function(){define(["./VerifyComponentProperty"],function(h){return{buttonGroupName:new h({type:"string",
defaultValue:"",required:!1,notInAction:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/DropDownButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x){var B={};B[f.DROP_DOWN_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x);return B})},"MW/toolstrip/hashes/componentproperties/properties/PopupIdProperty":function(){define(["./VerifyComponentProperty"],function(h){return{popupId:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/HasDynamicPopupProperty":function(){define(["./VerifyComponentProperty"],function(h){return{hasDynamicPopup:new h({type:"boolean",
notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ErrorTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{errorText:new h({type:"string",notInAction:!1,defaultValue:"This component is in error state",required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/WarningTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{warningText:new h({type:"string",notInAction:!1,defaultValue:"This component is in Warning state",
required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ValidationStateProperty":function(){define(["./VerifyComponentProperty"],function(h){return{validationState:new h({type:"string",notInAction:!1,defaultValue:"normal",required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/SplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DropDownAlwaysEnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B){var A={};A[f.SPLIT_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B);return A})},"MW/toolstrip/hashes/componentproperties/properties/DropDownAlwaysEnabledProperty":function(){define(["./VerifyComponentProperty"],function(h){return{dropDownAlwaysEnabled:new h({type:"boolean",shouldBeFlipped:!1,notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ToggleSplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DropDownAlwaysEnabledProperty ../properties/SelectedProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty ../properties/ButtonGroupNameProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D){var F={};F[f.TOGGLE_SPLIT_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D);return F})},"MW/toolstrip/hashes/componentproperties/controls/ColorPickerButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/QuickAccessIconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.COLOR_PICKER_BUTTON]=h.mixin({},{selectedColor:{type:"string",defaultValue:"#ff0000",notInAction:!0,required:!1},closeOnColorSelection:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1},showPreview:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1},showRecentColors:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1},showCustomPicker:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,
r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/GridPickerButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/IconOverrideProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/ActionIdProperty ../properties/IsInQABProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){var r={};r[f.GRID_PICKER_BUTTON]=h.mixin({},{maxRows:{type:"number",defaultValue:5,notInAction:!0,required:!1},maxColumns:{type:"number",defaultValue:5,notInAction:!0,required:!1},occupancy:{type:"number",defaultValue:0,notInAction:!0,required:!1},fillOrder:{type:"string",defaultValue:"rowMajor",notInAction:!0,required:!1},selection:{type:"Object",defaultValue:{},notInAction:!0,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p);return r})},"MW/toolstrip/hashes/componentproperties/controls/QABPushButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/ShowTextProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){var p={};p[f.QAB_PUSH_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n);return p})},"MW/toolstrip/hashes/componentproperties/properties/ShowTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{showText:new h({type:"boolean",defaultValue:!1,notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/QABDropDownButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ShowTextProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){var s={};s[f.QAB_DROP_DOWN_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/QABFloatingPaneDockProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ShowTextProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){var u={};u[f.QAB_FLOATING_PANE_DOCK]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t);return u})},"MW/toolstrip/hashes/componentproperties/controls/QABSplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ShowTextProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){var s={};s[f.QAB_SPLIT_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/QABToggleButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/SelectedProperty ../properties/ButtonGroupNameProperty ../properties/ShowTextProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){var s={};s[f.QAB_TOGGLE_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/QABToggleSplitButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/QuickAccessIconProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/SelectedProperty ../properties/DescriptionProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IsInQABProperty ../properties/PopupIdProperty ../properties/HasDynamicPopupProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty ../properties/ButtonGroupNameProperty ../properties/ShowTextProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w){var x={};x[f.QAB_TOGGLE_SPLIT_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w);return x})},"MW/toolstrip/hashes/componentproperties/controls/ComboBoxProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/TextProperty ../properties/ItemsProperty ../properties/PlaceholderTextProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.COMBO_BOX]=h.mixin({},{selectedItem:{type:"string",defaultValue:"",notInAction:!1,required:!1},editable:{type:"boolean",notInAction:!1,defaultValue:!1,required:!1},footerId:{type:"string",notInAction:!0,required:!1,defaultValue:""}},g,e,d,c,b,a,k,l,m,q,n,p,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/ItemsProperty":function(){define(["./VerifyComponentProperty"],function(h){return{items:new h({type:"Array",notInAction:!1,
defaultValue:[],required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/PlaceholderTextProperty":function(){define(["./VerifyComponentProperty"],function(h){return{placeholderText:new h({type:"string",notInAction:!1,defaultValue:"",required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ListProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/CompactProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ItemsProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){var s={};s[f.LIST]=h.mixin({},{selectedItems:{type:"Array",defaultValue:[],notInAction:!1,required:!1},selectionMode:{type:"string",defaultValue:"single",notInAction:!1,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r);return s})},"MW/toolstrip/hashes/componentproperties/properties/CompactProperty":function(){define(["./VerifyComponentProperty"],function(h){return{compact:new h({type:"boolean",notInAction:!0,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/PopupListProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.POPUP_LIST]=h.mixin({},{maxHeight:{type:"number",defaultValue:600,notInAction:!0,required:!1}},g,e);return d})},"MW/toolstrip/hashes/componentproperties/controls/PopupListPanelProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.POPUP_LIST_PANEL]=h.mixin({},
{maxHeight:{type:"number",defaultValue:100,notInAction:!0,required:!1}},g,e);return d})},"MW/toolstrip/hashes/componentproperties/controls/PopupListHeaderProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty","../properties/TitleProperty"],function(h,f,g,e,d){var c={};c[f.POPUP_LIST_HEADER]=h.mixin({},g,e,d);return c})},"MW/toolstrip/hashes/componentproperties/controls/PopupListSeparatorProperties":function(){define(["dojo/_base/lang",
"../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.POPUP_LIST_SEPARATOR]=h.mixin({},g,e);return d})},"MW/toolstrip/hashes/componentproperties/controls/TextAreaProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EditableProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/CompactProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.TEXT_AREA]=h.mixin({},{},g,e,d,c,b,a,k,l,m,q,n,p,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/EditableProperty":function(){define(["./VerifyComponentProperty"],function(h){return{editable:new h({type:"boolean",notInAction:!1,defaultValue:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/TextFieldProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EditableProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/PlaceholderTextProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.TEXT_FIELD]=h.mixin({},{},g,e,d,c,b,a,k,l,m,q,n,p,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/HorizontalSliderProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ValueProperty ../properties/MinimumProperty ../properties/MaximumProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.HORIZONTAL_SLIDER]=h.mixin({},{value:{type:"number",defaultValue:5,notInAction:!1,required:!1},minimum:{type:"number",defaultValue:-10,notInAction:!1,required:!1},maximum:{type:"number",defaultValue:10,notInAction:!1,required:!1},steps:{type:"number",defaultValue:10,notInAction:!1,required:!1},numberOfTicks:{type:"number",defaultValue:10,notInAction:!1,required:!1},labels:{type:"Array",notInAction:!1,required:!1,defaultValue:[]}},g,e,d,c,b,a,
k,l,m,q,n,p,r,s);return t})},"MW/toolstrip/hashes/componentproperties/properties/ValueProperty":function(){define(["./VerifyComponentProperty"],function(h){return{value:new h({notInAction:!1,type:"number",defaultValue:5,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/MinimumProperty":function(){define(["./VerifyComponentProperty"],function(h){return{minimum:new h({type:"number",notInAction:!1,defaultValue:-20,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/MaximumProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{maximum:new h({type:"number",notInAction:!1,defaultValue:20,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/SpinnerProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ValueProperty ../properties/MinimumProperty ../properties/MaximumProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty MW/toolstrip/hashes/listOfNewWidgets".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){var u={};u[f.SPINNER]=h.mixin({},{editable:{type:"boolean",defaultValue:!1,notInAction:!1,required:!1},minorStepSize:{type:"number",defaultValue:5,notInAction:!1,required:!1},majorStepSize:{type:"number",defaultValue:10,notInAction:!1,required:!1},errorText:{type:"string",notInAction:!1,defaultValue:"The value entered is not in range",required:!1}},-1===t.indexOf(f.SPINNER)?{}:{format:{type:"string",defaultValue:"",notInAction:!0,required:!1}},g,e,d,c,b,
a,k,l,m,q,n,p,r,s);return u})},"MW/toolstrip/hashes/componentproperties/controls/RadioButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/SelectedProperty ../properties/ButtonGroupNameProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.RADIO_BUTTON]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/CheckBoxProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/SelectedProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){var s={};s[f.CHECK_BOX]=h.mixin({},g,e,d,c,b,a,k,l,m,q,n,p,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/LabelProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/IconProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){var n={};n[f.LABEL]=h.mixin({},g,e,d,c,b,a,k,l,m,q);return n})},"MW/toolstrip/hashes/componentproperties/controls/EmptyControlProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty","../properties/TagProperty"],function(h,f,g,e){var d={};d[f.EMPTY_CONTROL]=h.mixin({},g,e);return d})},"MW/toolstrip/hashes/componentproperties/controls/MenuBarWrapperProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l){var m={};m[f.MENUBAR_WRAPPER]=h.mixin({},{},g,e,d,c,b,a,k,l);return m})},"MW/toolstrip/hashes/componentproperties/controls/ToolBarWrapperProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l){var m={};m[f.TOOLBAR_WRAPPER]=h.mixin({},g,e,d,c,b,a,k,l);return m})},"MW/toolstrip/hashes/componentproperties/controls/GalleryProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/EnabledProperty ../properties/GalleryItemRowCountProperty ../properties/GalleryItemTextLineCountProperty ../properties/GalleryItemWidthProperty ../properties/ScrollToSelectionProperty ../properties/HideDisabledItemsProperty ../properties/MnemonicProperty ../properties/OpenIfEmptyProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){d={};d[f.GALLERY]=h.mixin({},{galleryPopupId:{type:"string",notInAction:!0,required:!0},minColumnCount:{type:"number",notInAction:!0,required:!1,defaultValue:3},maxColumnCount:{type:"number",notInAction:!0,defaultValue:7},currentColumnCount:{type:"number",notInAction:!0,required:!1,defaultValue:7},textOverlay:{type:"string",notInAction:!0,required:!1,defaultValue:""},displayState:{type:"string",notInAction:!0,required:!1,defaultValue:"normal"},shouldRefresh:{type:"boolean",
notInAction:!0,defaultValue:!0,required:!1},enabled:{type:"boolean",shouldBeFlipped:!0,notInAction:!0,defaultValue:!0,required:!1}},g,e,c,b,a,k,l,m,q);return d})},"MW/toolstrip/hashes/componentproperties/properties/GalleryItemRowCountProperty":function(){define(["./VerifyComponentProperty"],function(h){return{galleryItemRowCount:new h({type:"number",notInAction:!0,defaultValue:1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/GalleryItemTextLineCountProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{galleryItemTextLineCount:new h({type:"number",notInAction:!0,defaultValue:2,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/GalleryItemWidthProperty":function(){define(["./VerifyComponentProperty"],function(h){return{galleryItemWidth:new h({type:"number",notInAction:!0,defaultValue:0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/ScrollToSelectionProperty":function(){define(["./VerifyComponentProperty"],function(h){return{scrollToSelection:new h({type:"boolean",
notInAction:!0,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/HideDisabledItemsProperty":function(){define(["./VerifyComponentProperty"],function(h){return{hideDisabledItems:new h({type:"boolean",notInAction:!0,defaultValue:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/OpenIfEmptyProperty":function(){define(["./VerifyComponentProperty"],function(h){return{openIfEmpty:new h({type:"boolean",defaultValue:!0,notInAction:!0,required:!1})}})},
"MW/toolstrip/hashes/componentproperties/controls/GalleryPopupProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/GalleryItemRowCountProperty ../properties/GalleryItemTextLineCountProperty ../properties/GalleryItemWidthProperty ../properties/DisplayStateProperty ../properties/ScrollToSelectionProperty dojo/i18n!l10n/nls/toolstrip".split(" "),function(h,f,g,e,d,c,b,a,k,l){var m={};m[f.GALLERY_POPUP]=h.mixin({},
{columnCount:{type:"number",notInAction:!0,required:!1,defaultValue:0},favCategoryId:{type:"string",notInAction:!0,required:!1,defaultValue:""},footerId:{type:"string",notInAction:!0,required:!1,defaultValue:""},placeholderText:{type:"string",notInAction:!0,required:!1,defaultValue:l.gallerySearch},showHeader:{type:"boolean",notInAction:!0,required:!1,defaultValue:!0},userCustomizable:{type:"boolean",notInAction:!0,required:!1,defaultValue:!0}},g,e,d,c,b,a,k);return m})},"MW/toolstrip/hashes/componentproperties/properties/DisplayStateProperty":function(){define(["../../../constants/gallery/GalleryViewConstants",
"./VerifyComponentProperty"],function(h,f){return{displayState:new f({type:"string",notInAction:!0,defaultValue:h.ICON,required:!1})}})},"MW/toolstrip/constants/gallery/GalleryViewConstants":function(){define([],function(){return{ICON:"icon_view",LIST:"list_view"}})},"MW/toolstrip/hashes/componentproperties/controls/GalleryCategoryProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TitleProperty ../properties/DisplayStateProperty ../properties/AnimationProperty".split(" "),
function(h,f,g,e,d,c,b){var a={};a[f.GALLERY_CATEGORY]=h.mixin({},g,e,d,c,b);return a})},"MW/toolstrip/hashes/componentproperties/properties/AnimationProperty":function(){define(["./VerifyComponentProperty"],function(h){return{animation:new h({type:"object",notInAction:!0,defaultValue:{shouldAnimate:!1,startId:"",endId:""},required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/GalleryFavoriteCategoryProperties":function(){define(["dojo/_base/lang","../../../constants/TypeConstants","../properties/TypeProperty",
"../properties/TagProperty","../properties/DisplayStateProperty"],function(h,f,g,e,d){var c={};c[f.GALLERY_FAVORITE_CATEGORY]=h.mixin({},{title:{type:"string",notInAction:!0,required:!1,defaultValue:"FAVORITES"}},g,e,d);return c})},"MW/toolstrip/hashes/componentproperties/controls/GalleryItemProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/DisplayStateProperty ../properties/IconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/AnimationProperty ../properties/ClosePopupOnClickProperty ../properties/RemovableProperty ../properties/RemoveMessageProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){var v={};v[f.GALLERY_ITEM]=h.clone(h.mixin({},{isFavorite:{type:"boolean",defaultValue:!1,notInAction:!1,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u));v[f.GALLERY_ITEM].closePopupOnClick.defaultValue=!0;return v})},"MW/toolstrip/hashes/componentproperties/properties/ClosePopupOnClickProperty":function(){define(["./VerifyComponentProperty"],function(h){return{closePopupOnClick:new h({type:"boolean",notInAction:!1,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ToggleGalleryItemProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/DisplayStateProperty ../properties/SelectedProperty ../properties/IconProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/AnimationProperty ../properties/ButtonGroupNameProperty ../properties/ClosePopupOnClickProperty ../properties/RemovableProperty ../properties/RemoveMessageProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w){var x={};x[f.TOGGLE_GALLERY_ITEM]=h.clone(h.mixin({},{isFavorite:{type:"boolean",defaultValue:!1,notInAction:!1,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w));x[f.TOGGLE_GALLERY_ITEM].closePopupOnClick.defaultValue=!0;return x})},"MW/toolstrip/hashes/componentproperties/controls/ListItemProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/IconProperty ../properties/IconOverrideProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/QuickAccessIconProperty ../properties/UseQuickAccessIconProperty ../properties/RemovableProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){var v={};v[f.LIST_ITEM]=h.mixin({},{showIcon:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1},showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u);return v})},"MW/toolstrip/hashes/componentproperties/properties/ShowDescriptionProperty":function(){define(["./VerifyComponentProperty"],function(h){return{showDescription:new h({type:"boolean",defaultValue:!0,notInAction:!0,required:!1})}})},"MW/toolstrip/hashes/componentproperties/properties/UseQuickAccessIconProperty":function(){define(["./VerifyComponentProperty"],
function(h){return{useQuickAccessIcon:new h({type:"boolean",notInAction:!0,defaultValue:!1,required:!1})}})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithCheckBoxProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/SelectedProperty ../properties/ClosePopupOnClickProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){var s={};s[f.LIST_ITEM_WITH_CHECKBOX]=h.mixin({},{showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithRadioButtonProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/SelectedProperty ../properties/ClosePopupOnClickProperty ../properties/ButtonGroupNameProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){var t={};t[f.LIST_ITEM_WITH_RADIO_BUTTON]=h.mixin({},{showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r,s);return t})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithTextFieldProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/EnabledProperty ../properties/EditableProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/PlaceholderTextProperty ../properties/ErrorTextProperty ../properties/WarningTextProperty ../properties/ValidationStateProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){var s={};s[f.LIST_ITEM_WITH_TEXTFIELD]=h.mixin({},{label:{type:"string",defaultValue:"",notInAction:!1,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r);return s})},"MW/toolstrip/hashes/componentproperties/controls/ListItemWithPopupProperties":function(){define("dojo/_base/lang ../../../constants/TypeConstants ../properties/TypeProperty ../properties/TagProperty ../properties/TextProperty ../properties/TextOverrideProperty ../properties/IconProperty ../properties/IconOverrideProperty ../properties/EnabledProperty ../properties/DescriptionProperty ../properties/DescriptionOverrideProperty ../properties/MnemonicProperty ../properties/ShortcutProperty ../properties/ActionIdProperty ../properties/ShowDescriptionProperty ../properties/HasDynamicPopupProperty ../properties/QuickAccessIconProperty ../properties/UseQuickAccessIconProperty".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){var v={};v[f.LIST_ITEM_WITH_POPUP]=h.mixin({},{popupId:{type:"string",defaultValue:"",notInAction:!1,required:!1},showIcon:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1,description:"Using this you can toggle the visibility of the icon on the list item."},showText:{type:"boolean",defaultValue:!0,notInAction:!0,required:!1}},g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u);return v})},"MW/uiframework/hashes/IconPropertiesSupportingBase64":function(){define({icon:!0,
iconClass:!0,quickAccessIcon:!0})},"MW/uiframework/hashes/ComponentsWithNoParent":function(){define(["../constants/TypeConstants"],function(h){return[h.TOOLSTRIP,h.POPUP_LIST,h.GALLERY_POPUP,h.GALLERY_FAVORITE_CATEGORY]})},"MW/toolstrip/hashes/ComponentsSupportedByFooterCell":function(){define(["../constants/TypeConstants"],function(h){return[h.PUSH_BUTTON,h.TOGGLE_BUTTON,h.RADIO_BUTTON,h.TEXT_FIELD,h.LABEL,h.CHECK_BOX]})},"MW/toolstrip/hashes/ComponentsEligibleForQAB":function(){define(["../constants/TypeConstants"],
function(h){var f={};f[h.PUSH_BUTTON]=h.QAB_PUSH_BUTTON;f[h.DROP_DOWN_BUTTON]=h.QAB_DROP_DOWN_BUTTON;f[h.SPLIT_BUTTON]=h.QAB_SPLIT_BUTTON;f[h.TOGGLE_BUTTON]=h.QAB_TOGGLE_BUTTON;f[h.TOGGLE_SPLIT_BUTTON]=h.QAB_TOGGLE_SPLIT_BUTTON;return f})},"MW/toolstrip/ToolstripUtils":function(){define("dijit/registry dojo/_base/kernel dojo/_base/window dojo/dom-geometry dojo/dom-construct ./constants/TypeConstants ./hashes/ComponentsThatDontSupportAction ./hashes/PeerNodeTypesWithNoCorrespondingWidget ./hashes/ComponentsThatSupportAnimation".split(" "),
function(h,f,g,e,d,c,b,a,k){return{isGalleryPopupAttachedWithGallery:function(a){return a.domNode.classList.contains("gallery")},isAPopupList:function(a){return a===c.POPUP_LIST},isAListItemWithPopup:function(a){return a===c.LIST_ITEM_WITH_POPUP},isAMenubarWrapper:function(a){return a===c.MENUBAR_WRAPPER},isAToolbarWrapper:function(a){return a===c.TOOLBAR_WRAPPER},isAColumn:function(a){return a===c.COLUMN},isAPanel:function(a){return a===c.PANEL},supportsAction:function(a){return-1===b.indexOf(a)},
isAFooterCell:function(a){return a===c.FOOTER_CELL},hasNoCorrespondingWidget:function(b){return-1<a.indexOf(b)},supportsAnimation:function(a){return-1<k.indexOf(a)},findParent:function(a,b){for(var c=null,d;a;){d=null;if(a.get("type")===b){c=a;break}a.domNode.parentNode&&(d=a.domNode.parentNode.getAttribute("dijitpopupparent"));a=d?h.byId(d):a.getParent()}return c},findParentToolstrip:function(a){return this.findParent(a,c.TOOLSTRIP)},findParentSection:function(a){return this.findParent(a,c.SECTION)},
getClosestValue:function(a,b){for(var c=-1,d=a.length,e;1<d-c;)e=Math.round((c+d)/2),a[e]<=b?c=e:d=e;a[c]===b&&(d=c);return[a[c],a[d]]},computeWidth:function(a,b,c){return parseInt(this._computeStyle(a,null,b,c).width)},computeHeight:function(a,b,c){return parseInt(this._computeStyle(a,b,null,c).height)},_computeStyle:function(a,b,c,e){null==b&&(b="auto");null==c&&(c="auto");null==e&&(e="");e=-1<["ko","ko-kr","ja-jp","zh-cn"].indexOf((navigator.language||navigator.userLanguage).toLowerCase())?d.create("div",
{"class":"dijitOffScreen",style:'font-size: 13px; font-family: Arial, "Helvetica Neue", sans-serif; text-transform: uppercase;'+e},g.body()):d.create("div",{"class":"dijitOffScreen",style:'font-size: 11px; font-family: Arial, "Helvetica Neue", sans-serif; text-transform: uppercase;'+e},g.body());e.style.width=b;e.style.height=c;e.textContent=a;a=window.getComputedStyle(e,null);a={width:a.width,height:a.height};d.destroy(e);return a}}})},"MW/toolstrip/hashes/ComponentsThatDontSupportAction":function(){define(["../constants/TypeConstants"],
function(h){return[h.TOOLSTRIP,h.QAB,h.QA_GROUP,h.TAB_GROUP,h.TAB,h.SECTION,h.COLUMN,h.PANEL,h.EMPTY_CONTROL,h.POPUP_LIST,h.POPUP_LIST_PANEL,h.POPUP_LIST_HEADER,h.POPUP_LIST_SEPARATOR,h.FOOTER,h.FOOTER_CELL,h.GALLERY,h.GALLERY_POPUP,h.GALLERY_CATEGORY,h.GALLERY_FAVORITE_CATEGORY]})},"MW/toolstrip/hashes/PeerNodeTypesWithNoCorrespondingWidget":function(){define(["MW/uiframework/constants/TypeConstants"],function(h){return[h.ROOT,h.ORPHAN_ROOT,h.TOOLSTRIP_ROOT,h.POPUP_ROOT,h.QAB_ROOT,"QAGroupRoot",
h.GALLERY_ROOT,h.GALLERY_POPUP_ROOT,h.GALLERY_FAVORITE_CATEGORY_ROOT]})},"MW/toolstrip/hashes/ComponentsThatSupportAnimation":function(){define(["../constants/TypeConstants"],function(h){return[h.GALLERY_FAVORITE_CATEGORY,h.GALLERY_CATEGORY]})},"MW/toolstrip/hashes/DefaultGalleryItemWidths":function(){define([],function(){return{1:{"0":68,1:68,2:68},2:{"0":52,1:102},3:{"0":52,1:98}}})},"MW/uiframework/managers/WidgetManager":function(){define("dojo/aspect dojo/debounce dojo/_base/lang dojo/_base/declare dijit/registry dijit/popup ../constants/TypeConstants ../WidgetFactory ../hashes/ControlEventsHash ../hashes/ComponentPropertiesHash ../hashes/PeerNodeWidgetPropertiesHash ../../toolstrip/hashes/listOfNewWidgets ../../toolstrip/hashes/PeerNodeWidgetEventsHash MW/toolstrip/hashes/ToolstripCollapseTriggers MW/toolstrip/constants/DisplayStateConstants MW/toolstrip/ToolstripUtils mw-log/Log".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){return e(null,{constructor:function(a){var b=this;a=a||{};t.assert(a.modelManager,"Model Manager needs to be passed in!");this._modelManager=a.modelManager;this._openPopups=[];this._galleryRefreshMap={};this._aspects=[h.after(this._modelManager,"onChildAdd",function(a){b.childAddedObserver(a)},!0),h.after(this._modelManager,"onChildDestroy",function(a){b.childDestroyedObserver(a)},!0),h.after(this._modelManager,"onPropertySet",function(a){b.propertySetObserver(a)},
!0),h.after(this._modelManager,"onChildMove",function(a){b.childMovedObserver(a)},!0),h.after(this._modelManager,"onPeerEvent",function(a){b.peerEventObserver(a)},!0),h.after(this._modelManager.actionService,"onActionChange",g.hitch(this,this._onActionChange),!0),h.after(this._modelManager.actionService,"onActionAdd",g.hitch(this,this._onActionAdd),!0),h.after(this._modelManager.actionService,"onPeerEvent",g.hitch(this,this._onActionPeerEvent),!0)]},childAddedObserver:function(a){var c,e,g,h,k,l,
m,n=this;c=a.data.child;e=a.target;s.hasNoCorrespondingWidget(c.getType())||(k=this._getWidgetProperties(c),m=c.getId(),k.id=m.toString(),d.byId(k.id)||(""!==k.tag&&(this._modelManager.tagToPeerNodeIdMap[k.tag]=m),g=this._buildWidget(k,c),h=this._getWidgetForPeerNode(e),g.get("type")===b.GALLERY?(n.refreshGallery(c.getId()),n._modelManager.addEventCallback(c.getId(),f(function(a){"refresh"===a.eventType&&n.refreshGallery(c.getId())},100))):g.get("type")===b.GALLERY_POPUP&&this._modelManager.manager.getByProperty("galleryPopupId",
g.id).forEach(function(a){d.byId(a.getId()).setupGalleryPopupListener(g)}),l=function(){h&&h.addChild(g,a.data.index)},e=c.getProperty("animation"),s.supportsAnimation(a.target.getType())&&e&&!0===e.shouldAnimate?h.animate({type:"childAdd",childWidget:g,startId:e.startId,endId:e.endId,onEnd:function(){l();c.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):l()))},addOutsidePeerModel:function(a,b){var c=this._modelManager.manager.getById(a),e=this._modelManager.manager.getById(b),
f=this._getWidgetProperties(c);f.id=c.getId().toString();c=d.byId(f.id)||this._buildWidget(f,c);(e=this._getWidgetForPeerNode(e))&&e.addChild(c)},removeOutsidePeerModel:function(a){a=this._modelManager.manager.getById(a);a=this._getWidgetForPeerNode(a);var b=a.getParent();b&&b.removeChild(a)},_buildWidget:function(c,d){if(c.type===b.TOOLSTRIP||c.type===b.QA_GROUP)c.enableQABCustomization=this._modelManager.enableQABCustomization;var e=a.create(c),f=this;this._addWatchToWidgetProperties(e,d);this._attachPopupMonitor(e);
this._hookupEvents(e,d);this._listenForToolstripCollapseTrigger(e);this._aspects.push(h.after(e,"removeChild",function(a){f._resetStateRecursive(a)},!0));return e},_listenForToolstripCollapseTrigger:function(a){var b=this,c=p[a.get("type")];c&&(c.events.forEach(function(c){if(-1<q.indexOf(a.type))a.on(n[a.type][c],function(){b._collapseParents(a)});else a.own(h.after(a,c,function(){b._collapseParents(a)}))}),a.watch(function(d){-1<c.properties.indexOf(d)&&b._collapseParents(a)}))},_collapseParents:function(a){this._collapseParentSection(a);
this._collapseParentToolstrip(a)},_collapseParentSection:function(a){(a=s.findParentSection(a))&&a.closePopup()},_collapseParentToolstrip:function(a){var b=s.findParentToolstrip(a);b&&(b.get("displayState")===r.EXPANDED_ON_TOP&&"FooterCell"!==a.getParent().type)&&b.set("displayState",r.COLLAPSED)},_attachPopupMonitor:function(a){var c=this,d;switch(a.get("type")){case b.POPUP_LIST:d=a;break;case b.COMBO_BOX:d=a.dropDown;break;case b.GALLERY_POPUP:d=a;break;case b.SECTION:d=a.getPopup()}d&&(this._aspects.push(h.after(d,
"onOpen",function(){c._onPopupOpen(d)})),this._aspects.push(h.after(d,"onClose",function(){c._onPopupClose()})))},_getWidgetProperties:function(a){var b=this._modelManager.getAllProperties(a.getId()),c,d;Object.keys(b).forEach(function(e){if((c=m[a.getType()])&&c[e])d=l[a.getType()][e],b[c[e]]=d.shouldBeFlipped?!b[e]:g.clone(b[e]),delete b[e]});b.type=a.getType();return b},childDestroyedObserver:function(a){var b,c,d,e,f,h;d=a.data.child;e=a.target;h=d.getId();if(b=this._getWidgetForPeerNode(d))Object.keys(this._modelManager.tagToPeerNodeIdMap).forEach(g.hitch(this,
function(a){this._modelManager.tagToPeerNodeIdMap[a]===h&&delete this._modelManager.tagToPeerNodeIdMap[a]})),c=this._getWidgetForPeerNode(e),f=function(){(s.isAMenubarWrapper(b.get("type"))||s.isAToolbarWrapper(b.get("type")))&&b.getChildren().forEach(function(a){b.removeChild(a)});c&&c.removeChild(b);b.destroyRecursive()},e=d.getProperty("animation"),s.supportsAnimation(a.target.getType())&&e&&!0===e.shouldAnimate?c.animate({type:"childRemove",childWidget:b,startId:e.startId,endId:e.endId,onEnd:function(){f();
d.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):f()},childMovedObserver:function(a){var b,c,d,e,f,g;d=this._getWidgetForPeerNode(a.target);b=this._getWidgetForPeerNode(a.data.oldParent);c=this._getWidgetForPeerNode(a.data.newParent);e=function(){c&&c.addChild(d,a.data.newIndex)};f=function(){b&&b.removeChild(d)};(g=a.target.getProperty("animation"))&&!0===g.shouldAnimate?s.supportsAnimation(a.target.getType())?d.animate({type:"move",oldIndex:a.data.oldIndex,newIndex:a.data.newIndex,
onEnd:function(){f();e();a.target.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):s.supportsAnimation(a.data.newParent.getType())?c.animate({type:"childAdd",childWidget:d,startId:g.startId,endId:g.endId,onEnd:function(){f();e();a.target.setProperty("animation",{shouldAnimate:!1,startId:"",endId:""})}}):s.supportsAnimation(a.data.oldParent.getType())&&b.animate({type:"childRemove",childWidget:d,startId:g.startId,endId:g.endId,onEnd:function(){f();e();a.target.setProperty("animation",
{shouldAnimate:!1,startId:"",endId:""})}}):(f(),e())},propertySetObserver:function(a){var b=this._getWidgetForPeerNode(a.target),c,d,e;b&&("tag"===a.data.key&&(d=b.get("tag"),e=this._modelManager.tagToPeerNodeIdMap[d],delete this._modelManager.tagToPeerNodeIdMap[d],this._modelManager.tagToPeerNodeIdMap[a.data.newValue]=e),this._setWidgetProperty(b,a.data.key,a.data.newValue),"actionId"===a.data.key&&(c=this._getWidgetProperties(a.target),Object.keys(c).forEach(function(d){c=this._getWidgetProperties(a.target);
b.set(d,c[d])},this)))},_getWidgetsWithActionId:function(a){return d.toArray().filter(function(b){return b.actionId===a&&l[b.type]})},_onActionChange:function(a){"id"!==a.key&&this._getWidgetsWithActionId(a.id).forEach(function(b){b._destroyed||this._setWidgetProperty(b,a.key,a.newValue)},this)},_onActionAdd:function(a){if(this._modelManager.isMATLABDriven){var b=this._modelManager.actionService.getAction(a.id),c=Object.keys(b);this._getWidgetsWithActionId(a.id).forEach(function(a){c.forEach(function(c){a._destroyed||
this._setWidgetProperty(a,c,b[c])},this)},this)}},_setWidgetProperty:function(a,b,c){var d=b,e=m[a.get("type")];-1!==Object.keys(l[a.type]).indexOf(b)&&(e&&e[b]&&(d=e[b]),b=l[a.type][b],b.shouldBeFlipped?a.set(d,!c):a.set(d,c))},peerEventObserver:function(a){switch(a.data.eventType){case "placeToolStrip":this._modelManager.placeToolstripById(a.target.getId(),a.data.hostId);break;case "showPopup":this._modelManager.showPopup(a.target.getId(),a.data.popupId);break;case "refreshGallery":this._refreshGalleryFromMATLAB(a.data.galleryId)}},
_refreshGalleryFromMATLAB:function(a){this._galleryRefreshMap[a]=this._galleryRefreshMap[a]?this._galleryRefreshMap[a]+1:1;2===this._galleryRefreshMap[a]&&(this.refreshGallery(a),delete this._galleryRefreshMap[a])},_onActionPeerEvent:function(a){switch(a.data.eventType){case "refreshGallery":this._refreshGalleryFromMATLAB(a.data.galleryId)}},_addWatchToWidgetProperties:function(a,b){var c,d=this,e,f=m[b.getType()],g=l[b.getType()];a.watch(function(a,h,k){d._modelManager.exists(b.getId())&&(c=a,f&&
f[a]&&(c=f[a]),-1!==Object.keys(g).indexOf(c)&&(e=l[b.getType()][c],e.shouldBeFlipped&&(k=!k),d._modelManager.set(b.getId(),c,k,{source:"UI"})))})},_hookupEvents:function(a,b){function c(f,k){var l="aspect";-1<q.indexOf(e)&&(l="on");f.forEach(function(c){function f(a){var e={};"aspect"===l?e=a||{}:a&&a.mwEventData&&g.mixin(e,a.mwEventData);e.eventType=c;"action"===k?d._modelManager.actionService.executeAction(b.getProperty("actionId"),e):b.dispatchEvent("peerEvent",b,e)}if("aspect"===l)a.own(h.after(a,
c,f,!0));else{var m=c;n[e]&&n[e][c]&&(m=n[e][c]);a.on(m,f)}})}var d=this,e=b.getType(),f=k[e];f&&(c(f.actionEvents,"action"),c(f.componentEvents,"peerNode"))},_getWidgetForPeerNode:function(a){return d.byId(a.getId().toString())},_onPopupClose:function(){this._openPopups.pop();this.onOpenPopupCountChange(this._openPopups.length,this._openPopups)},_onPopupOpen:function(a){this._openPopups.push(a);this.onOpenPopupCountChange(this._openPopups.length,this._openPopups)},onOpenPopupCountChange:function(a,
b){},isAnyPopupOpen:function(){return 0<c._stack.length&&this._modelManager.exists(c._stack[0].widget.id)},closeAllOpenPopups:function(){this.isAnyPopupOpen()&&c.close()},_resetStateRecursive:function(a){["hovering","active"].forEach(function(b){!0===a.get(b)&&a.set(b,!1)});a.getChildren&&0<a.getChildren().length&&this._resetStateOfChildren(a)},_resetStateOfChildren:function(a){a.getChildren().forEach(function(a){this._resetStateRecursive(a)},this)},refreshGallery:function(a){var c=d.byId(a);if(c){if(this._modelManager.isMATLABDriven){var e=
this._modelManager.get(a,"galleryPopupId");if(e){if(!this._modelManager.manager.hasById(e))return;e=this._modelManager.manager.getById(e);if(this._modelManager.manager.getByType(b.GALLERY_ITEM,e).concat(this._modelManager.manager.getByType(b.TOGGLE_GALLERY_ITEM,e)).some(function(a){return!this._modelManager.actionService.getAction(a.getProperty("actionId"))},this))return}}!1!==c.get("shouldRefresh")&&(e=[],!0===c.get("hideDisabledItems")?(e=this._getUniqueGalleryItems(a,!0),0===e.length&&(e=this._getUniqueGalleryItems(a))):
e=this._getUniqueGalleryItems(a),c.destroyDescendants(),e.forEach(function(a){var b=this._getWidgetProperties(a);a=this._buildWidget(b,a);c.addChild(a)},this),0===e.length&&c.closeDropDown())}},_getUniqueGalleryItems:function(a,b){function c(a){m=!h.some(function(b){return b.getProperty("actionId")===a.getProperty("actionId")});b&&(m=m&&!0===this._modelManager.get(a.getId(),"enabled"));m&&h.push(a)}function d(){for(k=this._modelManager.getAllCategoriesInDescendingOrder(g);0<k.length;)l=k.pop().getChildren(),
l.forEach(c,this)}function e(){for(var a=0,b=h.length,c=null;a<b;){if(!0===this._modelManager.get(h[a].getId(),"selected")){c={peerNode:h[a],index:a};break}a+=1}return c}var f,g,h=[],k,l,m;f=this._modelManager.manager.getById(a);g=this._modelManager.manager.getById(f.getProperty("galleryPopupId"));f=f.getProperty("currentColumnCount")*f.getProperty("galleryItemRowCount");var n=g.getProperty("favCategoryId");this._modelManager.exists(n)&&(h=this._modelManager.manager.getById(n).getChildren());b&&(h=
h.filter(function(a){return!0===this._modelManager.get(a.getId(),"enabled")},this));if(this._modelManager.get(a,"scrollToSelection")){d.call(this);if(n=e.call(this)){var p=n.peerNode.getId(),p=this._modelManager.getParentId(p),p=h.indexOf(this._modelManager.manager.getById(this._modelManager.getChildrenIds(p)[0]));n.index>p+f-1&&(p=n.index-f+1);p+f>h.length&&(p=h.length-f);0>p&&(p=0);return h.splice(p,f)}return h.slice(0,f)}h.length<f&&d.call(this);return h.slice(0,f)},cleanup:function(){this._aspects.forEach(function(a){a.remove()})}})})},
"dojo/debounce":function(){define([],function(){return function(h,f){var g;return function(){g&&clearTimeout(g);var e=this,d=arguments;g=setTimeout(function(){h.apply(e,d)},f)}}})},"MW/uiframework/WidgetFactory":function(){define(["dojo/_base/lang","MW/toolstrip/hashes/WidgetClassHash","mw-log/Log"],function(h,f,g){return{create:function(e){var d;f[e.type]?d=new f[e.type](e):g.error("No corresponding constructor found for the given type!");return d}}})},"MW/toolstrip/hashes/WidgetClassHash":function(){define("../constants/TypeConstants ../widgets/Toolstrip ../widgets/QAB ../widgets/QAGroup ../widgets/TabGroup ../widgets/Tab ../widgets/Section ../widgets/Panel ../widgets/Column ../menu/PopupListPanel ../widgets/Footer ../widgets/FooterCell ../widgets/gallery/Gallery ../widgets/gallery/GalleryPopup ../widgets/gallery/GalleryCategory ../form/PushButton ../form/DropDownButton ../form/SplitButton ../form/ToggleButton ../form/ColorPickerButton ../form/GridPickerButton ../qab/QABPushButton ../qab/QABDropDownButton ../qab/QABSplitButton ../qab/QABToggleButton ../qab/QABToggleSplitButton ../widgets/qabcontrols/QABFloatingPaneDock ../form/ToggleSplitButton ../menu/PopupList ../menu/ListItem ../menu/ListItemWithPopup ../menu/ListItemWithCheckBox ../menu/ListItemWithTextField ../menu/ListItemWithRadioButton ../menu/PopupListSeparator ../menu/PopupListHeader ../form/ComboBox ../form/ListBox ../form/Label ../widgets/EmptyControl ../form/TextField ../form/TextArea ../form/Spinner ../widgets/HorizontalSlider ../form/RadioButton ../form/CheckBox ../widgets/ToolbarWrapper ../widgets/MenubarWrapper ../widgets/gallery/GalleryItem ../widgets/gallery/ToggleGalleryItem".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I,E,K,Y,Z,S,V,ha,U,ea,W,aa,ba,$,ka,da,fa,qa){var T={};T[h.TOOLSTRIP]=f;T[h.QAB]=g;T[h.QA_GROUP]=e;T[h.TAB_GROUP]=d;T[h.TAB]=c;T[h.SECTION]=b;T[h.PANEL]=a;T[h.POPUP_LIST_PANEL]=l;T[h.COLUMN]=k;T[h.GALLERY]=n;T[h.GALLERY_POPUP]=p;T[h.GALLERY_CATEGORY]=r;T[h.GALLERY_FAVORITE_CATEGORY]=r;T[h.FOOTER]=m;T[h.FOOTER_CELL]=q;T[h.PUSH_BUTTON]=s;T[h.DROP_DOWN_BUTTON]=t;T[h.SPLIT_BUTTON]=u;T[h.TOGGLE_BUTTON]=v;T[h.COLOR_PICKER_BUTTON]=w;
T[h.GRID_PICKER_BUTTON]=x;T[h.QAB_PUSH_BUTTON]=B;T[h.QAB_DROP_DOWN_BUTTON]=A;T[h.QAB_SPLIT_BUTTON]=D;T[h.QAB_TOGGLE_BUTTON]=F;T[h.QAB_TOGGLE_SPLIT_BUTTON]=H;T[h.QAB_FLOATING_PANE_DOCK]=L;T[h.TOGGLE_SPLIT_BUTTON]=N;T[h.POPUP_LIST]=M;T[h.LIST_ITEM]=P;T[h.LIST_ITEM_WITH_POPUP]=Q;T[h.LIST_ITEM_WITH_CHECKBOX]=O;T[h.LIST_ITEM_WITH_TEXTFIELD]=I;T[h.LIST_ITEM_WITH_RADIO_BUTTON]=E;T[h.POPUP_LIST_SEPARATOR]=K;T[h.POPUP_LIST_HEADER]=Y;T[h.COMBO_BOX]=Z;T[h.LIST]=S;T[h.LABEL]=V;T[h.EMPTY_CONTROL]=ha;T[h.TEXT_FIELD]=
U;T[h.TEXT_AREA]=ea;T[h.SPINNER]=W;T[h.HORIZONTAL_SLIDER]=aa;T[h.RADIO_BUTTON]=ba;T[h.CHECK_BOX]=$;T[h.MENUBAR_WRAPPER]=da;T[h.TOOLBAR_WRAPPER]=ka;T[h.GALLERY_ITEM]=fa;T[h.TOGGLE_GALLERY_ITEM]=qa;return T})},"MW/toolstrip/widgets/Toolstrip":function(){define("dojo/aspect dojo/on dojo/dom dojo/topic dojo/keys dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/_base/kernel dijit/Viewport dojo/query dojo/dom-geometry ../ToolstripUtils dojo/i18n!l10n/nls/toolstrip dojo/_base/event dijit/registry dijit/popup dojo/text!./templates/Toolstrip.html dijit/_WidgetBase dijit/_Container dijit/_TemplatedMixin ./TabContainer mw-form/PushButton mw-menu/ContextMenu mw-menu/MenuItem mw-menu/MenuSeparator ../hashes/ComponentsEligibleForQAB ../constants/TypeConstants ../constants/DisplayStateConstants ../constants/MiscConstants ./_WidgetMixin mw-event-utils/doubleClickHandler mw-utils/widgetUtils MW/layout/ConfirmationDialog mw-mixins/PreventSelectionMixin MW/uiframework/MnemonicsStates".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I,E,K,Y){return c([v,w,x,Q,K],{templateString:u,constructor:function(){this._shouldSetSelectedTab=!0;this._previousSelectedChild=null;this._tabGroupListeners={};h.before(this,"addChild",this._beforeAddChild)},postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","refuse");var b=this;this.tabContainer=new B({"class":"tabContainer"},this.toolstripTabContainer);this.tabContainer.tablist.onkeydown=
function(){};this._supportingWidgets.push(this.tabContainer);this.own(h.after(this,"placeAt",function(){e.publish("/Toolstrip/toolstripPlaced",{toolstripId:this.id});b.toolstripPlaced();b.resize()}));this.collapseButton=(new A({"class":"collapseButton",icon:"smallCollapse",showText:!1,width:20,height:20})).placeAt(this.collapseButtonContainer);this.collapseButton.on("click",a.hitch(this,this._expandCollapse));this.tabContainer.tablist.tablistWrapper.children[0].dojoClick=!1;this._setTooltipforExpandCollapseButton();
this._supportingWidgets.push(this.collapseButton);this.hostId&&(this.placeAt(this.hostId),this.resize(),this.startup());this.connect(this.tabContainer,"selectChild",function(a){this.set("selectedTab",a.id)});this.own(l.on("resize",a.hitch(this,function(){this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=null);this._resizeTimeout=setTimeout(a.hitch(this,function(){this.resize()}),500)})));this.own(f(this.domNode,".dijitTab:click",O.createCallback(function(a){var c=s.getEnclosingWidget(a.target);
b.displayState===M.COLLAPSED?b.set("displayState",M.EXPANDED_ON_TOP):b.displayState===M.EXPANDED_ON_TOP&&Y.getCurrentMnemonicsState()!==Y.CONTROL_TAB&&b._previousSelectedChild&&g.isDescendant(a.target,b._previousSelectedChild.domNode)&&b.set("displayState",M.COLLAPSED);b._previousSelectedChild=c},function(){b._expandCollapse()})),f(document.body,"click",function(a){b.displayState===M.EXPANDED_ON_TOP&&(!I.isDescendant(a.target,b.domNode)&&a.target!==document.body)&&b.set("displayState",M.COLLAPSED)}));
this._setupContextMenu();this._setLocaleOnDomNode()},_setLocaleOnDomNode:function(){-1<["ko","ko-kr","ja-jp","zh-cn"].indexOf(k.locale)&&this.domNode.classList.add("isCJK")},_setupContextMenu:function(){var b='[id\x3d"'+this.id+'"]',c=function(a){var b=a.target||document.activeElement,c;m("[dijitpopupparent]").some(function(a){return"none"!==a.style.display&&b&&a.contains(b)?(c=a,!0):!1});if(b&&c&&this._findParentNode(b,"id",this.id)){if(a=m('[id\x3d"'+c.id+'"] *'),a.push(c),-1<a.indexOf(b))return a}else return null}.bind(this);
this._contextMenu=new D({willOpenCallback:a.hitch(this,this._updateContextMenu),targetNodes:[b,b+" *",c]});this._contextMenu.domNode.classList.add("mwToolstripPopupContextMenu");this.own(this._contextMenu)},_findParentNode:function(a,b,c){var d=null,e;a.domNode&&(a=a.domNode);for(;a&&a!==window.document;){if(c){if(a.hasAttribute(b)&&a.getAttribute(b)===c){d=a;break}}else{if(a.hasAttribute(b)){d=a;break}if(a.classList.contains(b)){d=a;break}}a=(e=a.getAttribute("dijitpopupparent"))?document.getElementById(e):
a.parentNode}return d},_updateContextMenu:function(b){this._contextMenu.getChildren().forEach(function(a){this._contextMenu.removeChild(a);a.destroyRecursive()},this);var c;if(c=b.target.classList.contains("toolstripComponentWrapper")?s.getEnclosingWidget(b.target.children[0]):s.getEnclosingWidget(b.target))if(("GalleryItem"===c.type||"ToggleGalleryItem"===c.type)&&!0===c.get("removable")&&this._addRemoveWidgetMenuItemToContextMenu(c),c.page&&"Tab"===c.page.type&&!0===c.page.get("removable"))this._addRemoveWidgetMenuItemToContextMenu(c.page);
else{for(b=c;b&&"Tab"!==b.type;)b=b.domNode&&b.domNode.parentElement&&b.domNode.parentElement.hasAttribute("dijitpopupparent")?s.byId(b.domNode.parentElement.getAttribute("dijitpopupparent")):b.getParent();b&&!0===b.get("removable")&&this._addRemoveWidgetMenuItemToContextMenu(b)}if(this.enableQABCustomization){-1<Object.keys(L).indexOf(c.get("type"))&&!c.get("hasDynamicMenu")&&(b=new F({text:p.addToQAB,tag:"addToQAB",disabled:c.get("isInQAB")}),this._contextMenu.addChild(b),b.on("click",function(){c.set("isInQAB",
!0)}));switch(c.get("type")){case N.QAB_PUSH_BUTTON:case N.QAB_TOGGLE_BUTTON:case N.QAB_SPLIT_BUTTON:case N.QAB_DROP_DOWN_BUTTON:case N.QAB_TOGGLE_SPLIT_BUTTON:!0===c.get("isInQAB")&&(b=new F({text:p.removeFromQAB,tag:"removeFromQAB"}),this._contextMenu.addChild(b),b.on("click",function(){c.set("isInQAB",!1)}));this._setShowHideLabelMenuItem(c);break;case N.QAB_FLOATING_PANE_DOCK:this._setShowHideLabelMenuItem(c)}this._isDescendantOfQAB(c)&&(b=new F({text:p.restoreFactoryControls,tag:"restoreFactoryControls"}),
this._contextMenu.addChild(b),b.on("click",a.hitch(this,function(){var b=new E({title:p.restoreFactoryControlsDialogTitle,message:p.restoreFactoryControlsDialogMessage});b.on("success",a.hitch(this,function(){this._QABWidget.restoreFactoryControls()}));b.open()})))}this._contextMenu.hasChildren()&&this._contextMenu.addChild(new H);b=new F({text:this.get("displayState")!==M.EXPANDED?p.restoreToolstrip:p.minimizeToolstrip,tag:"minimizeRestoreToolstrip"});this._contextMenu.addChild(b);b.on("click",a.hitch(this,
this._expandCollapse))},_setShowHideLabelMenuItem:function(a){var b=new F({text:a.get("showText")?p.hideLabel:p.showLabel,tag:"showHideLabel"});this._contextMenu.addChild(b);b.on("click",function(){a.set("showText",!a.get("showText"))})},_addRemoveWidgetMenuItemToContextMenu:function(a){var b,c=function(b){"keydown"===b.type&&0>[d.ENTER,d.SPACE].indexOf(b.keyCode)||(a._emitRemoveEvent?a._emitRemoveEvent():a.emit("remove"),t.close())};b=a.get("removeMessage");if(!b)switch(a.get("type")){case N.TAB:b=
p.closeWidget.replace(/\$\{0}/g,a.get("title"));break;case N.GALLERY_ITEM:case N.TOGGLE_GALLERY_ITEM:b=p.removeWidget.replace(/\$\{0}/g,a.get("text"))}b=new F({text:b,tag:"removeWidget"});this._contextMenu.addChild(b);b.on("mouseup",c);b.on("keydown",c)},_isDescendantOfQAB:function(a){var b=!1;if(a===this._QABWidget)b=!0;else for(;a&&a.getParent&&a.getParent()!==this;){if(a.getParent()===this._QABWidget){b=!0;break}a=a.getParent()}return b},_getToolstripWidth:function(){return q.getMarginBox(this.domNode).w},
_getTopRightContainerWidth:function(){return q.getMarginBox(this.topRightContainer).w},_getTabsWidth:function(a){var b=0;a.forEach(function(a){b+=q.getMarginBox(a).w});return b},_getTabMargin:function(a){if(0<a.length)return q.getMarginBox(a[0]).w-q.position(a[0]).w},_getTabPadding:function(a){if(0<a.length)return 20},_shrinkTabs:function(a){var b=a.length,c=this,d=this._getTabMargin(a),e=this._getTabPadding(a);a.forEach(function(f,g){a[g].style.width=c._availableWidthForTabs/b-e-d+"px";f.classList.add("noMinWidth")})},
_expandTabs:function(a){var b,c,d=this,e=0,f=a.length,g,h=[],k=this._getTabMargin(a);this._getTabPadding(a);a.forEach(function(b,c){g=n.computeWidth(a[c].textContent);g<P.TAB_WIDTH&&(g=P.TAB_WIDTH);g+=k;e+=g;h.push(g)});e<d._getToolstripWidth()-d._getTopRightContainerWidth()?a.forEach(function(b,c){b.classList.remove("noMinWidth");a[c].style.width="auto"}):a.forEach(function(e,g){b=a[g].style.width;c=b+d._availableWidth/f;c<h[g]?(a[g].style.width=c+"px",e.classList.add("noMinWidth")):a[g].style.width=
h[g]-k+"px"})},_setPreventResizeAttr:function(a){this._ignoreResize=this._doNotResize=a},resize:function(){this.inherited(arguments);if(!this._destroyed&&!this._doNotResize&&(this.tabContainer._started&&this.tabContainer.resize(),this.domNode.parentElement)){var a,b=this,c,d,e=0,f,g,h;a=m("[data-dojo-attach-point\x3d'titleNode,innerDiv,tabContent']",this.domNode);e=this._getTabsWidth(a);h=this._getToolstripWidth();g=this._getTopRightContainerWidth();d={QABContainer:this._getQABWidth(),logoutContainer:this._getLogoutButtonWidth(),
searchContainer:this._getSearchBoxWidth(),tabs:this._getTabsWidth(a)};c=["searchContainer","QABContainer","logoutContainer","tabs"];e+g>h?(f=e+g-h,c.forEach(function(c){g=b._getTopRightContainerWidth();h=b._getToolstripWidth();f=e+g-h;0<f&&("tabs"===c?(b._availableWidthForTabs=h-g,b._shrinkTabs(a)):("searchContainer"===c&&b.searchPopupContainer.classList.remove("dijitOffScreen"),m("."+c,b.domNode)[0].classList.add("dijitOffScreen")))})):(this._availableWidth=h-(e+g),c.reverse().forEach(function(c){g=
b._getTopRightContainerWidth();h=b._getToolstripWidth();e=b._getTabsWidth(a);b._availableWidth=h-(e+g);0<b._availableWidth&&("tabs"===c?b._expandTabs(a):d[c]<b._availableWidth&&(m("."+c,b.domNode)[0].classList.remove("dijitOffScreen"),m("."+c,b.domNode)[0].style.display="inline-block","searchContainer"===c&&b.searchPopupContainer.classList.add("dijitOffScreen")))}))}},_getLogoutButtonWidth:function(){return q.getMarginBox(this.logoutContainer).w},_getQABWidth:function(){return q.getMarginBox(this.QABContainer).w},
_getSearchBoxWidth:function(){return q.getMarginBox(this.searchContainer).w},startup:function(){this.inherited(arguments);this._adjustHostHeight();var a=this.domNode.parentNode;a&&(a.style.zIndex=20);this.tabContainer.startup();this.collapseButton.startup();this._QABWidget&&this._QABWidget.startup()},_expandCollapse:function(){var a=this.displayState;a===M.COLLAPSED||a===M.EXPANDED_ON_TOP?a=M.EXPANDED:a===M.EXPANDED&&(a=M.COLLAPSED);this.set("displayState",a);t.close()},addTab:function(a,b){this._shouldSetSelectedTab=
!1;this.tabContainer.addChild(a,b);this._shouldSetSelectedTab=!0},removeChild:function(a){a.tabs.forEach(function(a){this.removeTab(a)},this);this.inherited(arguments);this.resize();Object.keys(this._tabGroupListeners).forEach(function(a){this._tabGroupListeners[a].forEach(function(a){a.remove()})},this)},_beforeAddChild:function(a,b){var c=b,d=this.getChildren().length;!b&&0!==b&&(c=d);return[a,c]},addChild:function(b,c){var d=0,e=0,f,g;for(f=this.getChildren();d<c;)e+=f[d].tabs.length,d+=1;b.tabs.forEach(function(a,
b){this.addTab(a,e+b)},this);this.inherited(arguments);this.set("selectedTab",b.get("selectedTab"));this.resize();this._removeUnSelectableAttribute();d=b.on("childadded",a.hitch(this,this.resize));f=b.on("childremoved",a.hitch(this,this.resize));g=b.on("childadded",a.hitch(this,this._removeUnSelectableAttribute));this._tabGroupListeners[b.id]=[d,f,g]},_removeUnSelectableAttribute:function(){m(".tabLabel",this.domNode).forEach(function(a){g.setSelectable(a,!0)},this)},_setSelectedTabAttr:function(a){if(this._shouldSetSelectedTab){var b=
s.byId(a.toString());if(b&&(this.selectedTab!==a||!this.tabContainer.selectedChildWidget||this.tabContainer.selectedChildWidget.get("id")!==a))this._set("selectedTab",a),this.selectTab(b),this.getChildren().forEach(function(b){b.tabs.some(function(b){return b.id===a})&&b.set("selectedTab",a)})}},_setDisplayStateAttr:function(a){this._set("displayState",a);this._setTooltipforExpandCollapseButton();this._adjustHostHeight()},_setTooltipforExpandCollapseButton:function(){this.collapseButton&&(this.displayState===
M.COLLAPSED||this.displayState===M.EXPANDED_ON_TOP?this.collapseButton.set("description",p.restoreToolstrip):this.collapseButton.set("description",p.minimizeToolstrip))},_adjustHostHeight:function(){var a,b;if(a=this.domNode.parentElement)switch(b=s.getEnclosingWidget(a.parentElement),this.displayState){case M.COLLAPSED:this.domNode.classList.remove("toolstripNotCollapsed");this.domNode.classList.remove("toolstripExpandedOnTop");a.style.height="28px";a.style.overflow="hidden";this.collapseButton&&
this.collapseButton.set("icon","smallExpand");break;case M.EXPANDED:this.domNode.classList.add("toolstripNotCollapsed");this.domNode.classList.remove("toolstripExpandedOnTop");a.style.height="121px";a.style.overflow="hidden";this.collapseButton&&this.collapseButton.set("icon","smallCollapse");this.tabContainer&&this.tabContainer.selectedChildWidget&&this.tabContainer.selectedChildWidget.resize();break;case M.EXPANDED_ON_TOP:this.domNode.classList.add("toolstripNotCollapsed"),this.domNode.classList.add("toolstripExpandedOnTop"),
a.style.height="28px",a.style.overflow="visible",this.tabContainer&&this.tabContainer.selectedChildWidget&&this.tabContainer.selectedChildWidget.resize()}b&&b.resize&&b.resize()},removeTab:function(a){this._shouldSetSelectedTab=!1;this.tabContainer.removeChild(a);this._shouldSetSelectedTab=!0},selectTab:function(a){this.tabContainer.selectChild(a);this.set("selectedTab",a.id)},_setQABIdAttr:function(a){var c=s.byId(a);c&&(this._QABWidget=c,b.place(c.domNode,this.QABContainer),this._started&&this._QABWidget.startup(),
this.own(c));this._set("QABId",a)},toolstripPlaced:function(){}})})},"MW/toolstrip/widgets/TabContainer":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/TabContainer","dijit/layout/ScrollingTabController"],function(h,f,g,e){return h(g,{postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=h(e,{resize:function(){},onAddChild:function(d,c){var b=new (f.isString(this.buttonWidget)?f.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+d.id,
name:this.id+"_"+d.id,label:d.title,disabled:d.disabled,ownerDocument:this.ownerDocument,dir:d.dir,lang:d.lang,textDir:d.textDir||this.textDir,showLabel:d.showTitle,iconClass:d.iconClass,closeButton:d.closable,title:d.tooltip,page:d});this.addChild(b,c);d.controlButton=b;if(!this._currentChild)this.onSelectChild(d);b=d._wrapper.getAttribute("aria-labelledby")?d._wrapper.getAttribute("aria-labelledby")+" "+b.id:b.id;d._wrapper.removeAttribute("aria-label");d._wrapper.setAttribute("aria-labelledby",
b)}})},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var d=this.selectedChildWidget;d&&this._showChild(d)}(d=this.selectedChildWidget)&&d.resize()}})})},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(h,f,g,e,d){return f("dijit.layout.TabContainer",g,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(c){var b=this.baseClass+"-tabs"+(this.doLayout?
"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?h.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":b,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},c)},postMixInProperties:function(){this.inherited(arguments);
this.controllerWidget||(this.controllerWidget=("top"==this.tabPosition||"bottom"==this.tabPosition)&&!this.nested?d:e)}})})},"dijit/layout/_TabContainerBase":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style ./StackContainer ./utils ../_TemplatedMixin dojo/text!./templates/TabContainer.html".split(" "),function(h,f,g,e,d,c,b,a){return h("dijit.layout._TabContainerBase",[d,b],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:a,
postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&e.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||f.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(f.add(this.domNode,"dijitTabContainerNested"),f.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),
f.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),f.add(this.containerNode,"dijitTabPaneWrapperNested")):f.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){f.add(a.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var a=this.selectedChildWidget;if(this.doLayout){var b=this.tabPosition.replace(/-h/,
"");this.tablist.region=b;b=[this.tablist,{domNode:this.tablistSpacer,region:b},{domNode:this.containerNode,region:"center"}];c.layoutChildren(this.domNode,this._contentBox,b);this._containerContentBox=c.marginBox2contentBox(this.containerNode,b[2]);a&&a.resize&&a.resize(this._containerContentBox)}else{if(this.tablist.resize){b=this.tablist.domNode.style;b.width="0";var d=g.getContentBox(this.domNode).w;b.width="";this.tablist.resize({w:d})}a&&a.resize&&a.resize()}}},destroy:function(a){this.tablist&&
this.tablist.destroy(a);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){c("dijit-legacy-requires")&&k(0,function(){require(["dijit/layout/StackController"])});g=g("dijit.layout.StackContainer",p,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",
buildRendering:function(){this.inherited(arguments);e.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(a(this.domNode,"keydown",b.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();h.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=q.byId(f(this.id+"_selectedChild")):h.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&
a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);l.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=d.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",a.domNode,"replace"),e=a["aria-label"]||a.title||a.label;e&&c.setAttribute("aria-label",
e);d.place(b,c);a._wrapper=c;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments);this._started&&(l.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){var b=h.indexOf(this.getChildren(),a);this.inherited(arguments);d.destroy(a._wrapper);delete a._wrapper;this._started&&l.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===
a&&(this.selectedChildWidget=void 0,this._started)){var c=this.getChildren();c.length&&this.selectChild(c[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,b){var c;a=q.byId(a);this.selectedChildWidget!=a&&(c=this._transition(a,this.selectedChildWidget,b),this._set("selectedChildWidget",a),l.publish(this.id+"-selectChild",a,this._focused),this.persist&&f(this.id+"_selectedChild",this.selectedChildWidget.id));return m(c||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=
this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=h.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){l.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;
a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&e.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&e.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){if(!a.onClose||a.onClose(this,a))this.removeChild(a),
a.destroyRecursive()},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;h.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});g.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};b.extend(n,g.ChildWidgetProperties);return g})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(h,f){h.cookie=function(g,e,d){var c=
document.cookie,b;if(1==arguments.length)b=(b=c.match(RegExp("(?:^|; )"+f.escapeString(g)+"\x3d([^;]*)")))?decodeURIComponent(b[1]):void 0;else{d=d||{};c=d.expires;if("number"==typeof c){var a=new Date;a.setTime(a.getTime()+864E5*c);c=d.expires=a}c&&c.toUTCString&&(d.expires=c.toUTCString());e=encodeURIComponent(e);var c=g+"\x3d"+e,h;for(h in d)c+="; "+h,a=d[h],!0!==a&&(c+="\x3d"+a);document.cookie=c}return b};h.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),
navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return h.cookie})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){d=h("dijit.layout._TabButton",
a.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:q,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);f.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var a=this.domNode;this.defer(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){this._set("closeButton",a);e.toggle(this.domNode,"dijitClosable",a);this.closeNode.style.display=a?"":"none";a&&(a=c.getLocalization("dijit",
"common"),this.closeNode&&g.set(this.closeNode,"title",a.itemClose))},_setDisabledAttr:function(a){this.inherited(arguments);if(this.closeNode)if(a)g.remove(this.closeNode,"title");else{var b=c.getLocalization("dijit","common");g.set(this.closeNode,"title",b.itemClose)}},_setLabelAttr:function(a){this.inherited(arguments);!this.showLabel&&!this.params.title&&(this.iconNode.alt=b.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});h=h("dijit.layout.TabController",a,{baseClass:"dijitTabController",
templateString:"\x3cdiv role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown:onkeydown'\x3e\x3c/div\x3e",tabPosition:"top",buttonWidget:d,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var a=new l({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return e.contains(a,"dijitClosable")&&!e.contains(a,"dijitTabDisabled")}});this.own(a);var b=c.getLocalization("dijit",
"common"),d=this;a.addChild(new m({label:b.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){a=k.byNode(this.getParent().currentTarget);d.onCloseButtonClick(a.page)}}))}});h.TabButton=d;return h})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){e=f("dijit.layout._StackButton",p,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});f=f("dijit.layout.StackController",[m,q,n],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:e,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return l.byId(this.id+
"_"+a)},postCreate:function(){this.inherited(arguments);this.own(a.subscribe(this.containerId+"-startup",c.hitch(this,"onStartup")),a.subscribe(this.containerId+"-addChild",c.hitch(this,"onAddChild")),a.subscribe(this.containerId+"-removeChild",c.hitch(this,"onRemoveChild")),a.subscribe(this.containerId+"-selectChild",c.hitch(this,"onSelectChild")),a.subscribe(this.containerId+"-containerKeyDown",c.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(b(this.containerNode,"click",
c.hitch(this,function(a){var b=l.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(a=a.target;a!==this.containerNode;a=a.parentNode)if(g.contains(a,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);break}else if(a==b.domNode){this.onButtonClick(b.page);break}})))},onStartup:function(a){this.textDir=a.textDir;h.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected);var d=l.byId(this.containerId).containerNode,e=c.hitch(this,"pane2button");
a={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var f=function(a,c){return b(d,"attrmodified-"+a,function(a){var b=e(a.detail&&a.detail.widget&&a.detail.widget.id);b&&b.set(c,a.detail.newValue)})},g;for(g in a)this.own(f(g,a[g]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,b){var d=new (c.isString(this.buttonWidget)?c.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,title:a.tooltip,page:a});this.addChild(d,b);a.controlButton=d;if(!this._currentChild)this.onSelectChild(a);d=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+d.id:d.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",
d)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=this.pane2button(this._currentChild.id);b.set("checked",!1);b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button(a.id);b.set("checked",!0);this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");l.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);
k.focus(b.focusNode);this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0);l.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){l.byId(this.containerId).closeChild(a);this._currentChild&&(a=this.pane2button(this._currentChild.id))&&k.focus(a.focusNode||a.domNode)},adjacent:function(a){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition)))a=!a;var b=this.getChildren(),c=h.indexOf(b,this.pane2button(this._currentChild.id)),d=b[c],e;do c=
(c+(a?1:b.length-1))%b.length,e=b[c];while(e.disabled&&e!=d);return e},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var c=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case d.LEFT_ARROW:case d.UP_ARROW:a._djpage||(c=!1);break;case d.PAGE_UP:a.ctrlKey&&(c=!1);break;case d.RIGHT_ARROW:case d.DOWN_ARROW:a._djpage||(c=!0);break;case d.PAGE_DOWN:a.ctrlKey&&(c=!0);break;case d.HOME:for(var e=this.getChildren(),f=0;f<e.length;f++){var g=e[f];if(!g.disabled){this.onButtonClick(g.page);break}}a.stopPropagation();
a.preventDefault();break;case d.END:e=this.getChildren();for(f=e.length-1;0<=f;f--)if(g=e[f],!g.disabled){this.onButtonClick(g.page);break}a.stopPropagation();a.preventDefault();break;case d.DELETE:case 87:if(this._currentChild.closable&&(a.keyCode==d.DELETE||a.ctrlKey))this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault();break;case d.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),
a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});f.StackButton=e;return f})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w){q=f("dijit.layout.ScrollingTabController",[p,s],{baseClass:"dijitTabController dijitScrollingTabController",templateString:q,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",g.add(a,"tabStrip-disabled"));g.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);d.set(this.domNode,"visibility","");this._postStartup=!0;this.own(a(this.containerNode,"attrmodified-label, attrmodified-iconclass",b.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);d.set(this.containerNode,"width",d.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=k("\x3e .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=e.getMarginSize(a).w,!0;d.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();
if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||d.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(a){this._dim=a;this.scrollNode.style.height="auto";var b=this._contentBox=r.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight;e.setContentSize(this.domNode,b);b=this._enableBtn(this._contentBox.w);
this._buttons.style("display",b?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";r.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||8>l("ie")||l("trident")&&l("quirks")||l("webkit")?this.scrollNode.scrollLeft:d.get(this.containerNode,"width")-d.get(this.scrollNode,"width")+(l("trident")||l("edge")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||8>l("ie")||l("trident")&&l("quirks")||l("webkit"))return a;var b=d.get(this.containerNode,"width")-d.get(this.scrollNode,"width");return(l("trident")||
l("edge")?-1:1)*(a-b)},onSelectChild:function(a,b){var c=this.pane2button(a.id);if(c){var e=c.domNode;if(e!=this._selectedTab&&(this._selectedTab=e,this._postResize)){var f=this._getScroll();f>e.offsetLeft||f+d.get(this.scrollNode,"width")<e.offsetLeft+d.get(e,"width")?(e=this.createSmoothScroll(),b&&(e.onEnd=function(){c.focus()}),e.play()):b&&c.focus()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=d.get(this.scrollNode,"width"),c=d.get(this.containerNode,"width")-
b,e=this._getTabsWidth();if(a.length&&e>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:c};a=this.isLeftToRight()?0:c;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=d.get(this.scrollNode,"width"),c=this._getScrollBounds(),a=a.offsetLeft+d.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(0<arguments.length){var b=
this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var d=this,e=this.scrollNode,f=new c.Animation({beforeBegin:function(){this.curve&&delete this.curve;var b=e.scrollLeft,g=d._convertToScrollLeft(a);f.curve=new c._Line(b,g)},onAnimate:function(a){e.scrollLeft=a}});this._anim=f;this._setButtonClass(a);return f},_getBtnNode:function(a){for(a=a.target;a&&!g.contains(a,"tabStripButton");)a=a.parentNode;
return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!g.contains(b,"dijitTabDisabled")){var c=0.75*d.get(this.scrollNode,"width")*a,c=this._getScroll()+c;this._setButtonClass(c);this.createSmoothScroll(c).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});n=f("dijit.layout._ScrollingTabControllerButtonMixin",
null,{baseClass:"dijitTab tabStripButton",templateString:n,tabIndex:"",isFocusable:function(){return!1}});f("dijit.layout._ScrollingTabControllerButton",[v,n]);f("dijit.layout._ScrollingTabControllerMenuButton",[v,w,n],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new t({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var b=m.byId(this.containerId);h.forEach(b.getChildren(),function(a){var c=
new u({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||b.textDir,onClick:function(){b.selectChild(a)}});this.dropDown.addChild(c)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return q})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return h("dijit._HasDropDown",s,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){!this.disabled&&!this.readOnly&&("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(m.once(this.ownerDocument,q.release,l.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},
_onDropDownMouseUp:function(a){var b=this.dropDown,e=!1;if(a&&this._opened){var f=c.position(this._buttonNode,!0);if(!(a.pageX>=f.x&&a.pageX<=f.x+f.w)||!(a.pageY>=f.y&&a.pageY<=f.y+f.h)){for(f=a.target;f&&!e;)d.contains(f,"dijitPopup")?e=!0:f=f.parentNode;if(e){f=a.target;if(b.onItemClick){for(var g;f&&!(g=n.byNode(f));)f=f.parentNode;if(g&&g.onClick&&g.getParent)g.getParent().onItemClick(g,a)}return}}}if(this._opened){if(b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering))this._focusDropDownTimer=
this.defer(function(){b.focus();delete this._focusDropDownTimer})}else this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",
left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";d.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(m(this._buttonNode,q.press,l.hitch(this,"_onDropDownMouseDown")),m(this._buttonNode,"click",l.hitch(this,"_onDropDownClick")),m(a,"keydown",l.hitch(this,"_onKey")),m(a,"keyup",l.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);
this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;if(b&&(this._opened&&b.handleKey)&&!1===b.handleKey(a))a.stopPropagation(),a.preventDefault();else if(b&&this._opened&&a.keyCode==k.ESCAPE)this.closeDropDown(),a.stopPropagation(),a.preventDefault();else if(!this._opened&&(a.keyCode==k.DOWN_ARROW||(a.keyCode==k.ENTER||a.keyCode==k.SPACE&&(!this._searchTimer||
a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase())))this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(l.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=
new f,b=l.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,f=this._aroundNode||this.domNode,g=this,h=r.open({parent:this,popup:a,around:f,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},
onClose:function(){e.set(g._popupStateNode,"popupActive",!1);d.remove(g._popupStateNode,"dijitHasDropDownOpen");g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&f.offsetWidth>a._popupWrapper.offsetWidth){var f=f.offsetWidth-a._popupWrapper.offsetWidth,k={w:a.domNode.offsetWidth+f};this._origStyle=b.style.cssText;l.isFunction(a.resize)?a.resize(k):c.setMarginBox(b,k);"R"==h.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-f+"px")}e.set(this._popupStateNode,
"popupActive","true");d.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"!==b.getAttribute("role")&&!b.getAttribute("aria-labelledby")&&b.setAttribute("aria-labelledby",this.id);return h},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded",
"false"),a&&this.focus&&this.focus(),r.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"mw-menu/MenuSeparator":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin mw-mixins/property/TagMixin mw-mixins/property/VisualFamilyMixin mw-mixins/PreventFocusMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuSeparator.html".split(" "),function(h,f,g,e,d,c,
b,a,k){return h(a.validate([f,g,e,d,c,b]),{baseClass:"mwWidget mwMenuSeparator",templateString:k})})},"mw-mixins/PreventFocusMixin":function(){define(["dojo/_base/declare","dojo/on"],function(h,f){return h(null,{postCreate:function(){this.inherited(arguments);this._getNonFocusableNodes().forEach(function(g){f(g,"mousedown",function(e){e.preventDefault()})})},_getNonFocusableNodes:function(){return[this.domNode]}})})},"MW/toolstrip/constants/MiscConstants":function(){define([],function(){return{DO_NOT_DISPLAY:"ToolstripDoNotDisplay",
TAB_WIDTH:102}})},"MW/toolstrip/widgets/_WidgetMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{postCreate:function(){this.inherited(arguments);this._addDataAttribute("tag");this._addDataAttribute("type")},_addDataAttribute:function(f,g){g=g||this[f];this.domNode&&this.domNode.setAttribute("data-"+f,g)},_setTagAttr:function(f){this._addDataAttribute("tag",f);this._set("tag",f)},_setTypeAttr:function(f){this._addDataAttribute("type",f);this._set("type",f)}})})},"mw-event-utils/doubleClickHandler":function(){define({createCallback:function(h,
f,g){var e=0,d;void 0===g&&(g=200);return function(c){e+=1;1===e?d=setTimeout(function(){e=0;h(c)},g):2===e&&(clearTimeout(d),e=0,c.syntheticEvent||f(c))}}})},"MW/layout/ConfirmationDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/has dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/ConfirmationDialog.html mw-dialog-utils/DialogUtils dojo/i18n!l10n/nls/confirmationDialog".split(" "),function(h,f,g,e,d,c,b,a,k){var l=["warning","question"],m=function(a,
b){this.emit(a.name);b.onClose()},q={question:{icon:"icon_dialog_question_32",buttons:[{name:"failure",label:k.no},{name:"success",label:k.yes}]},warning:{icon:"icon_dialog_warning_32",buttons:[{name:"failure",label:k.cancel},{name:"success",label:k.ok}]}};e("mac")&&Object.keys(q).forEach(function(a){q[a].buttons.reverse()});return h([d,c],{baseClass:"mwConfirmationDialog",templateString:b,title:"I am the Title",message:"I am the message.",type:"warning",postCreate:function(){this.inherited(arguments);
g.add(this.iconNode,q[this.type].icon);this.messageNode.textContent=this.message},_setTypeAttr:function(a){if(-1===l.indexOf(a))throw Error("The 'type' property can only be one of: "+l);this._checkAndSetProperty("type",a)},_setTitleAttr:function(a){this._checkAndSetProperty("title",a)},_setMessageAttr:function(a){this._checkAndSetProperty("message",a)},_checkAndSetProperty:function(a,b){if(this._created)throw Error("The '"+a+"' can only be set during construction!");this._set(a,b)},open:function(){var b=
q[this.type].buttons;b.forEach(function(a){a.buttonHandler={handler:f.hitch(this,m)}},this);a.displayModalDialog(this,this.title,b,{dialogClass:"mwConfirmationDialogContainer"})}})})},"MW/uiframework/MnemonicsStates":function(){define(["dojo/dom-class","MW/uiframework/FocusManager"],function(h,f){return{_currentMnemonicsState:void 0,_toolstrip:void 0,NULL_NULL:1,NULL_CONTROL:2,NULL_TAB:3,CONTROL_TAB:4,TAB_TAB:5,getCurrentMnemonicsState:function(){return this._currentMnemonicsState},setCurrentMnemonicsState:function(f,
e){this._currentMnemonicsState=f;("undefined"!==typeof e?e:1)&&this._manageToolstripFocus(f)},setToolstrip:function(f){this._toolstrip=f},_manageToolstripFocus:function(g){g===this.NULL_NULL?f.refuseFocus(this._toolstrip.domNode):f.temporaryFocus(this._toolstrip.domNode);h.toggle(document.body,"mnemonicsMode",g!==this.NULL_NULL)}}})},"MW/toolstrip/widgets/QAB":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/QAB.html ./_WidgetMixin dojo/aspect".split(" "),
function(h,f,g,e,d,c,b){return h([f,g,e,c],{templateString:d,constructor:function(){this.own(b.before(this,"addChild",function(a,b){var c=0;0<=b&&(c=b);return[a,c]}),b.after(this,"addChild",function(){this.refresh()}),b.after(this,"removeChild",function(){this.refresh()}))},postCreate:function(){this.inherited(arguments);this.refresh()},refresh:function(){this.showHideQAB();this.showHideQAGroups();this.showHideSeparators()},showHideQAB:function(){var a=0;this.getChildren().forEach(function(b){a+=
b.getChildren().length});this.domNode.style.display=0===a?"none":"block"},showHideQAGroups:function(){this.getChildren().forEach(function(a){0===a.getChildren().length?a.domNode.style.display="none":a.domNode.style.display="inline-block"},this)},showHideSeparators:function(){this.getChildren().forEach(function(a,b){this._isFirstVisibleQAGroup(a,b)?a.separatorNode.style.display="none":a.separatorNode.style.display="inline-block"},this)},_isFirstVisibleQAGroup:function(a,b){var c=this.getChildren(),
d,e=!1;d=0;if(0===b)return!0;for(;d<=b-1;)"none"===c[d].domNode.style.display&&(e=!0),d+=1;return e},restoreFactoryControls:function(){}})})},"MW/toolstrip/widgets/QAGroup":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/QAGroup.html ./_WidgetMixin ./_ChildrenWrapperMixin ../utils/DragSorter dojo/aspect".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h([g,e,d,b,a],{templateString:c,constructor:function(){var a=this;
this.own(l.before(this,"addChild",function(a,b){var c=0;0<=b&&(c=b);return[a,c]}),l.after(this,"addChild",function(){var b=a.getParent();b&&(b.refresh(),(b=b.getParent())&&b.resize())}),l.after(this,"removeChild",function(){var b=a.getParent();b&&(b.refresh(),(b=b.getParent())&&b.resize())}))},postCreate:function(){this.inherited(arguments);this.enableQABCustomization&&(this._dragSorter=new k({containerNode:this.containerNode}),this._dragSorter.on("nodemoved",f.hitch(this,function(a){this.itemMoved({itemId:this.getChildren()[a.oldIndex].id,
newIndex:a.newIndex})})))},destroy:function(){this.enableQABCustomization&&this._dragSorter.destroy();this.inherited(arguments)},itemMoved:function(){}})})},"MW/toolstrip/widgets/_ChildrenWrapperMixin":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,f){return h(null,{constructor:function(){this._wrappers={};this._childrenWidgets=[]},addChild:function(g,e){var d=f.create("div",{id:g.id+"_wrapper","class":"toolstripComponentWrapper"},this.containerNode,e);0<=e?this._childrenWidgets.splice(e,
0,g):this._childrenWidgets.push(g);this.own(g);f.place(g.domNode,d);this._started&&!g._started&&g.startup();this._wrappers[g.id]=d},removeChild:function(g){var e,d=this._wrappers[g.id];this._childrenWidgets.forEach(function(c,b){g.id===c.id&&(e=b)});this._childrenWidgets.splice(e,1);d&&(g.domNode&&d.removeChild(g.domNode),f.destroy(d),delete this._wrappers[g.id])},getChildren:function(){return this._childrenWidgets}})})},"MW/toolstrip/utils/DragSorter":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/mouse dojo/Evented dojo/dom-construct dojo/dom-geometry".split(" "),
function(h,f,g,e,d,c,b){var a=["-webkit-","-moz-","-ms-",""];return h([d],{constructor:function(a){if(void 0===a.containerNode||1!==a.containerNode.nodeType)throw Error("A containerNode needs to be provided and it should be a DOM Node!");this._dragSorterContainerNode=a.containerNode;this._currentTarget=null;this._previousPageX=0;this._dragSorterContainerNode.classList.add("mwDragSortContainer");this._dragSortOverlay=c.create("div",{"class":"mwDragSortContainerOverlay"},document.body);this._mouseDownListenerHandle=
g(this._dragSorterContainerNode,"mousedown",f.hitch(this,this._mouseDownListener));this._mouseUpListenerHandle=g(window,"mouseup",f.hitch(this,this._mouseUpListener))},_mouseDownListener:function(a){if(e.isLeft(a)&&(this._currentTarget=this._getAncestorWhichIsADirectChildOfContainerNode(a.target),null!==this._currentTarget&&1<this._dragSorterContainerNode.children.length)){var c=b.position(this._currentTarget);this._mouseMoveListenerHandle=g(document.body,"mousemove",f.hitch(this,this._mouseMoveListener,
{index:this._getIndexOfNode(this._currentTarget),position:c,leftOffset:a.pageX-c.x,rightOffset:c.x+c.w-a.pageX,mouseDownCoords:{x:a.pageX,y:a.pageY}}));this._windowSelectStartHandle=g(window,"selectstart",function(a){a.preventDefault()})}},_mouseMoveListener:function(a,c){if(!(5>=Math.abs(a.mouseDownCoords.x-c.pageX)&&5>=Math.abs(a.mouseDownCoords.y-c.pageY))){this._mouseMoveHappened=!0;var d=b.position(this._dragSorterContainerNode),e=b.getPadBorderExtents(this._dragSorterContainerNode),f=d.x+a.leftOffset+
e.l,e=d.x+d.w-a.rightOffset-e.r,g=c.pageX,d=null;this._currentTarget.classList.add("mwDragTarget");document.body.classList.add("mwDragging");g<f?g=f:g>e&&(g=e);this._currentTarget.style.left=g-a.position.x-a.leftOffset+"px";d=c.pageX>this._previousPageX?"r":"l";this._previousPageX=c.pageX;f=this._findNodesOnEitherSide(d);for(e=0;e<this._dragSorterContainerNode.children.length;e++)if(g=this._dragSorterContainerNode.children[e],g!==this._currentTarget){var h=b.position(g),s=b.position(this._currentTarget);
"r"===d?e>=a.index?s.x+s.w>=h.x+h.w/2&&this._applyTranslateX(g,-s.w):-1<f.left.indexOf(g)&&"0"!==g.getAttribute("data-translated")&&this._applyTranslateX(g,0):"l"===d&&(e<=a.index?s.x<=h.x+h.w/2&&this._applyTranslateX(g,s.w):-1<f.right.indexOf(g)&&"0"!==g.getAttribute("data-translated")&&this._applyTranslateX(g,0))}}},_mouseUpListener:function(){this._mouseMoveListenerHandle&&this._mouseMoveListenerHandle.remove();this._windowSelectStartHandle&&this._windowSelectStartHandle.remove();if(this._mouseMoveHappened){if(null!==
this._currentTarget){var a=this._getIndexOfNode(this._currentTarget);this._moveCurrentTargetToNewLocation();this._currentTarget.style.left="";this._currentTarget.classList.remove("mwDragTarget");document.body.classList.remove("mwDragging");this._resetAllSiblingTranslateX();this.emit("nodemoved",{node:this._currentTarget,oldIndex:a,newIndex:this._getIndexOfNode(this._currentTarget)});this._currentTarget=null}this._mouseMoveHappened=!1}},_findNodesOnEitherSide:function(a){var c={left:[],right:[]},d=
b.position(this._dragSorterContainerNode),e=b.getPadBorderExtents(this._dragSorterContainerNode),f=b.position(this._currentTarget);2>=f.x-d.x-e.l?c.right=this._getCurrentTargetSiblings():2>=d.x+d.w-f.x-f.w-e.l?c.left=this._getCurrentTargetSiblings():this._getCurrentTargetSiblings().forEach(function(d){var e=b.position(d);("l"===a?f.x:f.x+f.w)>=e.x+e.w/2?c.left.push(d):c.right.push(d)});return c},_getIndexOfNode:function(a){return Array.prototype.indexOf.call(this._dragSorterContainerNode.children,
a)},_getCurrentTargetSiblings:function(){return[].slice.call(this._dragSorterContainerNode.children).filter(function(a){return a!==this._currentTarget},this)},_getAncestorWhichIsADirectChildOfContainerNode:function(a){var b=null;if(a!==this._dragSorterContainerNode)for(b=a;b.parentNode!==this._dragSorterContainerNode;)b=b.parentNode;return b},_moveCurrentTargetToNewLocation:function(){var a=null,d=b.position(this._dragSorterContainerNode),e=b.getPadBorderExtents(this._dragSorterContainerNode),f=b.position(this._currentTarget),
g=f.x-(d.x+e.l),d=g;this._getCurrentTargetSiblings().forEach(function(c){var d=b.position(c),d=Math.abs(f.x-(d.x+d.w));d<g&&(a=c,g=d)});g===d?c.place(this._currentTarget,this._dragSorterContainerNode,"first"):c.place(this._currentTarget,a,"after")},_applyTranslateX:function(b,c){b.setAttribute("data-translated",c);a.forEach(function(a){b.style[a+"transform"]="translate("+c+"px, 0)"})},_resetAllSiblingTranslateX:function(){this._getCurrentTargetSiblings().forEach(function(a){a.classList.add("mwNoTransition");
this._applyTranslateX(a,0);a.offsetHeight;a.classList.remove("mwNoTransition")},this)},destroy:function(){this._mouseDownListenerHandle.remove();this._mouseUpListenerHandle.remove();this._dragSorterContainerNode.classList.remove("mwDragSortContainer");c.destroy(this._dragSortOverlay)}})})},"MW/toolstrip/widgets/TabGroup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/TabGroup.html dijit/_Contained dijit/registry ./_WidgetMixin".split(" "),function(h,
f,g,e,d,c,b){return h([f,g,d,b],{templateString:e,constructor:function(){this.tabs=[]},addChild:function(a,b){var c=0,d=null,e,f=0,g,h;!b&&0!==b&&(b=this.tabs.length);this.tabs.splice(b,0,a);if(e=this.getParent()){h=e.getChildren();for(g=h.length;f<g;){if(this===h[f]){0<=b&&(d=c+b);break}c+=h[f].tabs.length;f+=1}e.addTab(a,d)}this.emit("childadded")},removeChild:function(a){var b=this.getParent(),c;c=this.tabs.indexOf(a);-1<c&&this.tabs.splice(c,1);0===this.tabs.length&&this.set("selectedTab","");
b&&b.removeTab(a);this.emit("childremoved")},_setSelectedTabAttr:function(a){var b=this.getParent(),d=c.byId(a);b&&a&&(b.selectTab(d),b.getChildren().forEach(function(a){a!==this&&a.set("selectedTab","")},this));this._set("selectedTab",a)}})})},"MW/toolstrip/widgets/Tab":function(){define("dojo/_base/declare dojo/dom-construct dijit/layout/ContentPane dijit/registry dojo/query dojo/dom-geometry MW/toolstrip/widgets/_WidgetMixin MW/toolstrip/mixins/property/RemovableMixin".split(" "),function(h,f,
g,e,d,c,b,a){return h([g,b,a],{constructor:function(){this["class"]="tabContentPane"},postCreate:function(){this.containerNode=f.create("span",{"class":"sectionContainer"},this.domNode)},resize:function(){if(!this.getParent().getParent()._ignoreResize){this.inherited(arguments);var a,b,d,e,f,g,h,s=0;if(!this._destroyed)if(this.inherited(arguments),g=this._getAllDescendantGalleries(),h=g.length,b=this.getChildren(),d=b.length,b.sort(function(a,b){var c=0;a.collapsePriority>b.collapsePriority?c=-1:
a.collapsePriority<b.collapsePriority&&(c=1);return c}),e=this._getWidthOfAllSections(),f=c.position(this.domNode).w,f<e){for(a=h-1;0<=a;){for(;f<e;){if(!g[a].shrink()){s+=1;break}e=this._getWidthOfAllSections();f=c.position(this.domNode).w}a-=1}if(s===h){for(a=d-1;0<=a&&f<e;)b[a].hideDescendantLabels(),e=this._getWidthOfAllSections(),f=c.position(this.domNode).w,a-=1;for(a=d-1;0<=a&&f<e;)b[a].collapse(),e=this._getWidthOfAllSections(),f=c.position(this.domNode).w,a-=1}}else{for(a=0;a<d&&f>e;){b[a].expand();
e=this._getWidthOfAllSections();f=c.position(this.domNode).w;if(f<e){b[a].collapse();break}a+=1}for(a=0;a<d&&f>e;){b[a].showDescendantLabels();e=this._getWidthOfAllSections();f=c.position(this.domNode).w;if(f<e){b[a].hideDescendantLabels();break}a+=1}if(a===d){g=this._getAllDescendantGalleries();h=g.length;for(a=0;a<h;){for(;f>e;)if(g[a].grow()){if(e=this._getWidthOfAllSections(),f=c.position(this.domNode).w,f<e){g[a].shrink();break}}else break;a+=1}}}}},_getAllDescendantGalleries:function(){return d(".gallery",
this.domNode).map(function(a){return e.byNode(a)})},_getWidthOfAllSections:function(){var a,b,d,e=0;a=this.getChildren();b=a.length;for(d=0;d<b;d++)e+=c.position(a[d].domNode).w;return e+20}})})},"MW/toolstrip/mixins/property/RemovableMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_removable:!1,_removeMessage:"",_getRemovableAttr:function(){return this.get("_removable")},_setRemovableAttr:function(f){if("boolean"!==typeof f)throw Error("'removable' property expected a boolean value.");
this._set("_removable",f)},_getRemoveMessageAttr:function(){return this.get("_removeMessage")},_setRemoveMessageAttr:function(f){if("string"!==typeof f)throw Error("'_removeMessage' property expected a string value.");this._set("_removeMessage",f)},_emitRemoveEvent:function(){this.emit("remove");this.remove()},remove:function(){}})})},"MW/toolstrip/widgets/Section":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/Section.html ./_WidgetMixin MW/toolstrip/form/SectionDropDownButton ./SectionPopup mw-mixins/ResizeMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){var p=["PushButton","DropDownButton","SplitButton","ToggleButton","ToggleSplitButton"];return h([c,b,a,l,n],{templateString:k,constructor:function(){this._isCollapsed=!1},_createSectionPopup:function(){this._sectionPopup=new q;this.own(this._sectionPopup);this._sectionDropDownButton=new m({menu:this._sectionPopup,label:this.get("title")});this._sectionDropDownButton.focusNode.setAttribute("tabIndex","-1");this.own(this._sectionDropDownButton);this.own(g.after(this._sectionDropDownButton,
"openDropDown",f.hitch(this,function(){})));this.own(g.after(this._sectionDropDownButton,"closeDropDown",f.hitch(this,function(){this.emit("restorefocus")})));this._sectionPopup.domNode.setAttribute("data-focus","temporary");this._sectionDropDownButton.placeAt(this.sectionDropDownContainer);this._sectionDropDownButton.startup();this._sectionDropDownButton.set("text",this.title)},_setTitleAttr:function(a){this.titleNode.textContent=a;this._sectionDropDownButton&&this._sectionDropDownButton.set("label",
a);this._set("title",a)},collapse:function(){this._sectionPopup||this._createSectionPopup();var a;this._isCollapsed||-1===this.collapsePriority?a=!1:(this._isCollapsed=a=!0,this.sectionWrapper.style.display="none",this.sectionDropDownContainer.style.display="inline-block",e.place(this.columnContainerWrapper,this._sectionDropDownButton.menu.domNode),this._sectionDropDownButton.focusNode.setAttribute("tabIndex","-1"));return a},expand:function(){var a;this._isCollapsed?(a=!0,this._isCollapsed=!1,this.sectionWrapper.style.display=
"inline-block",this.sectionDropDownContainer.style.display="none",e.place(this.columnContainerWrapper,this.sectionWrapper,"first"),this._sectionDropDownButton.focusNode.setAttribute("tabIndex","0")):a=!1;return a},showDescendantLabels:function(){this.domNode.classList.remove("mwHideDescendantLabels");this._updateDescendantTitle(!0)},hideDescendantLabels:function(){this.domNode.classList.add("mwHideDescendantLabels");this._updateDescendantTitle(!1)},getPopup:function(){return this._sectionPopup},closePopup:function(){this.isPopupOpen()&&
this._sectionDropDownButton.closeMenu()},addChild:function(a){this.inherited(arguments);"Column"===a.type&&a.updateChildrenOrientations()},isPopupOpen:function(){return!this._sectionPopup?!1:this._sectionDropDownButton.menu.domNode.parentNode&&"none"!==this._sectionDropDownButton.menu.domNode.parentNode.style.display},_updateDescendantTitle:function(a){var b,c;p.forEach(f.hitch(this,function(e){c=this.domNode.querySelectorAll("[data-type\x3d"+e+"]");for(b=0;b<c.length;++b)e=d.getEnclosingWidget(c[b]),
"Horizontal"===e.orientation&&(a?e._updateTitle(e.get("description")):e._updateTitle(e.get("text")))}))}})})},"MW/toolstrip/form/SectionDropDownButton":function(){define("dojo/_base/declare MW/toolstrip/form/DropDownButton ../mixins/property/IconOverrideMixin ../mixins/property/OrientationMixin ../mixins/property/TextOverrideMixin ../mixins/property/TypeMixin mw-mixins/property/ShortcutMixin ../mixins/property/MenuIdMixin mw-mixins/mixinDependencyValidator".split(" "),function(h,f,g,e,d,c,b,a,k){return h(k.validate([f,
g,e,d,c,b,a]),{visualFamily:"toolstrip",baseClass:"toolstrip mwSectionDropDownButton",type:"SectionDropDownButton",minWidth:38,orientation:"Vertical",verticalHeight:92,doNotSize:!0,postCreate:function(){this.inherited(arguments);this.set("menuOrientation","below")},_setLabelAttr:function(a){if("string"!==typeof a)throw Error("'label' property must be of type string.");this.set("text",a);this.focusNode.setAttribute("title",a)},_setDescriptionAttr:function(){},_setShortcutAttr:function(){},_setPlatformizeShortcutAttr:function(){},
_getLabelAttr:function(){return this.get("text")},_getTextForDOM:function(a){return a}})})},"MW/toolstrip/form/DropDownButton":function(){define("dojo/_base/declare mw-form/DropDownButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin MW/toolstrip/form/mixins/property/DropDownButtonTextMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TypeMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/MenuMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){return h(t.validate([f,g,e,d,c,b,a,k,l,m,q,n,p,r,s]),{visualFamily:"toolstrip",minWidth:38})})},"mw-form/DropDownButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/ArrowModeMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonTextMixin mw-form/mixins/property/DropDownButtonSizeMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/DropDownButton.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H){return h(F.validate([f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D]),{baseClass:"mwWidget mwDropDownButton",templateString:H})})},"MW/toolstrip/mixins/property/MnemonicMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{mnemonic:"",postCreate:function(){this.inherited(arguments);this._updateMnemonicInDOM(this.get("mnemonic"))},_setMnemonicAttr:function(f){if("string"!==typeof f)throw Error("mnemonic property expects a String!");
this._started&&this._updateMnemonicInDOM(f);this._set("mnemonic",f)},_updateMnemonicInDOM:function(f){if(0<f.length){if(f.split("").some(function(f){return 65>f.charCodeAt(0)||90<f.charCodeAt(0)}))throw Error("mnemonic property should be a String of uppercase characters!");this.focusNode.setAttribute("data-mnemonic",f)}}})})},"MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin":function(){define(["dojo/_base/declare"],function(h){var f=["all","none","horizontal","vertical"];return h(null,{mnemonicKeyNavDirection:"all",
postCreate:function(){this.inherited(arguments);this._updateMnemonicKeyNavDirectionInDOM(this.get("mnemonicKeyNavDirection"))},_setMnemonicKeyNavDirectionAttr:function(g){if(-1===f.indexOf(g))throw Error("'mnemonicKeyNavDirection' property expects one of these values: "+f);this._started&&this._updateMnemonicKeyNavDirectionInDOM(g);this._set("mnemonicKeyNavDirection",g)},_updateMnemonicKeyNavDirectionInDOM:function(f){this.focusNode.setAttribute("data-mnemonic-key-nav-direction",f)}})})},"MW/toolstrip/mixins/property/IconOverrideMixin":function(){define(["dojo/_base/declare",
"mw-mixins/property/IconMixin"],function(h,f){var g=h(null,{iconOverride:"",iconProp:"icon",postCreate:function(){this.inherited(arguments);this.set("iconOverride",this.get("iconOverride"))},_setIconOverrideAttr:function(e){if("string"!==typeof e)throw Error("'iconOverride' property expects a literal string!");this._removeOldIcon(this.get("iconOverride"));this._set("iconOverride",e);this._updateDOM(e)},_updateDOM:function(e){e=""!==this.iconOverride?this.iconOverride:this[this.iconProp]?this[this.iconProp]:
this.icon;arguments[0]=e;this.inherited(arguments)},_setIconPropAttr:function(e){this._set("iconProp",e);this._updateDOM(e)}});g._dependencies=[{mixin:f,orderDependent:!0}];return g})},"MW/toolstrip/mixins/property/TextMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{text:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwTextMixin");this._addTextContentClass();this.set("text",this.get("text"))},_addTextContentClass:function(){(this.textNode||
this.domNode).classList.add("mwTextContent")},_getTextForDOM:function(f,g){return f},_placeTextInNode:function(f,g){g=g||this.textNode;this.textNode.setAttribute("data-text-content",this._getTextForDOM(f,g))}})})},"MW/toolstrip/mixins/property/SizeMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{postCreate:function(){this.inherited(arguments);this.height=this.width="auto"},_setHeightAttr:function(f){},_getHeightAttr:function(){return"Horizontal"===this.get("orientation")?
22:72}})})},"MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin":function(){define(["dojo/_base/declare","MW/toolstrip/mixins/property/SizeMixin"],function(h,f){var g=h(null,{_setSize:function(){}});g._dependencies=[{mixin:f,orderDependent:!0}];return g})},"MW/toolstrip/form/mixins/property/DropDownButtonTextMixin":function(){define(["dojo/_base/declare","MW/toolstrip/mixins/property/TextMixin","MW/toolstrip/mixins/property/SizeMixin","mw-form/mixins/property/DropDownButtonSizeMixin"],function(h,
f,g,e){h=h(null,{_addTextContentClass:function(){},_getTextForDOM:function(d,c){var b,a,e=this._getTextNodes();if(c===e.inlineTextElement||c===e.lastTextLineElement){-1<(a=d.lastIndexOf("\n"))?(b=d.substring(0,a),a=d.substring(a+1,d.length)):(b=d,a="");if(c===e.inlineTextElement)return b;if(c===e.lastTextLineElement)return a}else return d},_placeTextInNode:function(d){this._getTextNodes().forEach(function(c){c.setAttribute("data-text-content",this._getTextForDOM(d,c))}.bind(this))},_getTextNodes:function(){var d=
[this.textLine,this.inlineTextLine,this.lastTextLine];d.textElement=d[0];d.inlineTextElement=d[1];d.lastTextLineElement=d[2];return d}});h._dependencies=[{mixin:f,orderDependent:!0},{mixin:g,orderDependent:!1},{mixin:e,orderDependent:!1}];return h})},"MW/toolstrip/mixins/property/OrientationMixin":function(){define(["dojo/_base/declare"],function(h){var f=["Horizontal","Vertical"];return h(null,{orientation:"Horizontal",horizontalHeight:22,verticalHeight:72,_setOrientationAttr:function(g){if(-1===
f.indexOf(g))throw Error("'orientation' property expects one of these values: "+f);this.domNode.classList.remove(this._getClassNameForOrientation(this.get("orientation")));this.domNode.classList.add(this._getClassNameForOrientation(g));"Horizontal"===g?this.set("iconProp","quickAccessIcon"):"Vertical"===g&&this.set("iconProp","icon");this._set("orientation",g)},_getClassNameForOrientation:function(f){return"mw"+f+"Orientation"}})})},"MW/toolstrip/mixins/property/TextOverrideMixin":function(){define(["dojo/_base/declare",
"MW/toolstrip/constants/MiscConstants","MW/toolstrip/mixins/property/TextMixin"],function(h,f,g){h=h(null,{textOverride:"",postCreate:function(){this.inherited(arguments);this.set("textOverride",this.get("textOverride"))},_setTextAttr:function(e){this.inherited(arguments);this._updateNoTextClass()},_setTextOverrideAttr:function(e){if("string"!==typeof e)throw Error("'textOverride' property expects a literal string!");this._placeTextInNode(e,void 0,"textOverride setter");this._set("textOverride",e);
this._updateNoTextClass()},_updateNoTextClass:function(){""===this.get("textOverride")&&""===this.get("text")||this.get("textOverride")===f.DO_NOT_DISPLAY?this.domNode.classList.add("mwNoText"):this.domNode.classList.remove("mwNoText")},_placeTextInNode:function(e,d,c){"textOverride setter"===c?e===f.DO_NOT_DISPLAY?e="":""===e&&(e=this.text):""!==this.textOverride&&(e=this.textOverride===f.DO_NOT_DISPLAY?"":this.textOverride);arguments[0]=e;arguments[1]=d;this.inherited(arguments)}});h._dependencies=
[{mixin:g,orderDependent:!0}];return h})},"MW/toolstrip/mixins/property/DescriptionOverrideMixin":function(){define(["dojo/_base/declare","mw-mixins/property/DescriptionMixin"],function(h,f){var g=h(null,{descriptionOverride:"",postCreate:function(){this.inherited(arguments);this.set("descriptionOverride",this.get("descriptionOverride"))},_setDescriptionOverrideAttr:function(e){if("string"!==typeof e)throw Error("'description' property expects a literal string!");this._updateDescription(e,!0);this._set("descriptionOverride",
e)},_updateDescription:function(e,d){d?""===e&&(e=this.description):""!==this.descriptionOverride&&(e=this.descriptionOverride);arguments[0]=e;this.inherited(arguments)}});g._dependencies=[{mixin:f,orderDependent:!0}];return g})},"MW/toolstrip/mixins/property/TypeMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{type:"",_setTypeAttr:function(f){if("string"!==typeof f)throw Error("type property expects a 'String'");this.domNode.setAttribute("data-type",f);this._set("type",
f)},postCreate:function(){this.inherited(arguments);this.set("type",this.get("type"))}})})},"MW/toolstrip/mixins/property/MenuIdMixin":function(){define(["dojo/_base/declare","dijit/registry","mw-menu/Menu","MW/toolstrip/widgets/gallery/GalleryPopup"],function(h,f,g,e){return h(null,{menuId:"",_setMenuIdAttr:function(d){this._set("menuId",d);this._syncAttributes()},_setMenuAttr:function(d){this.set("menuId",d.get("id"))},_getMenuIdAttr:function(){this._syncAttributes();return this._get("menuId")},
_getMenuAttr:function(){this._syncAttributes();return this._get("menu")},_syncAttributes:function(){var d=f.byId(this._get("menuId"))||null;this._get("menu")!==d&&(this._validateMenuAttr(d),this._set("menu",d))}})})},"MW/toolstrip/widgets/gallery/GalleryPopup":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/on dojo/keys dojo/query dojo/dom-geometry dojo/_base/lang dojo/_base/window dojo/aspect dijit/registry dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/i18n!l10n/nls/toolstrip dojo/text!./templates/GalleryPopup.html mw-form/TextField mw-form/ToggleButton mw-form/PushButton MW/toolstrip/widgets/_PopupBase MW/toolstrip/constants/OrientationConstants MW/toolstrip/GalleryFilter MW/toolstrip/constants/TypeConstants MW/toolstrip/constants/gallery/GalleryViewConstants MW/toolstrip/widgets/_WidgetMixin MW/toolstrip/widgets/gallery/GalleryItemRowCountMixin MW/toolstrip/widgets/gallery/GalleryItemTextLineCountMixin MW/toolstrip/form/SearchTextField MW/toolstrip/ToolstripUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P){return h([n,p,r,x,H,L,N],{templateString:t,showHeader:!0,constructor:function(){this.searchBox=new M({value:""});this.own(this.searchBox);this._searchBoxValue="";this._handleCloseButtonClick=a.hitch(this,function(){q.close(this)})},buildRendering:function(){this.inherited(arguments);this.searchBox.placeAt(this.searchTextFieldContainerNode)},postCreate:function(){var a=this;this.inherited(arguments);this.domNode.setAttribute("data-focus",
"temporary");this.galleryItemFilters={};this._createSearchBoxAndButtons();this.own(l.after(this,"addChild",function(b){b.set("displayState",a.displayState);b.set("userCustomizable",a.userCustomizable);a.galleryStateChanged()},!0));this.own(l.after(this,"removeChild",function(){a.galleryStateChanged()},!0));this._handleFocusChange=function(a){a.target&&(a.target instanceof Element&&this.domNode&&this.domNode.parentElement&&"none"!==this.domNode.parentElement.style.display&&!this.domNode.contains(a.target)&&
this.domNode!==a.target)&&q.close(this);this._handleWindowBlur(a)}.bind(this);this._handleWindowBlur=function(a){(a.target===window||a.target===document.documentElement)&&q.close(this)}.bind(this);this.domNode.style.display="none";f.place(this.domNode,k.body());this.noSearchMatchNode.style.display="none";this.noSearchMatchNode.textContent=s.noSearchMatchNode;this._buildAndAddFilters();this._startupHeaderWidgets()},_buildAndAddFilters:function(){var a=this;this.galleryItemFilters.search=new A({id:"search",
checkerFunction:function(b){var c,d;c=a._searchBoxValue;d=RegExp(a._escapeRegExp(c),"i");return""===c||d.test(b.get("text"))||d.test(b.get("description"))||d.test(b.getParent().get("title"))}});this.galleryItemFilters.onlyShowEnabled=new A({id:"onlyShowEnabled",disabled:!0,checkerFunction:function(a){return!1===a.get("disabled")}})},_checkForPopupListInFooter:function(){var a;if(this.footerContainer&&(a=0<c(".toolstripPopupList",this.footerContainer).length?!0:!1))a=c(".toolstripPopupList",this.footerContainer)[0],
a=a.getAttribute("widgetid"),a=m.byId(a),a.onOpen()},enforceFilters:function(){var a,b;b=this.getChildren();this._favCategoryWidget&&b.push(this._favCategoryWidget);b.forEach(function(b){a=b.getChildren();a.forEach(function(a){g.remove(a.domNode,"hideFromView");Object.keys(this.galleryItemFilters).forEach(function(b){b=this.galleryItemFilters[b];!b.disabled&&!b.checkerFunction(a)&&g.add(a.domNode,"hideFromView")},this)},this);c(".hideFromView",b.domNode).length>=a.length?g.add(b.domNode,"hideFromView"):
g.remove(b.domNode,"hideFromView")},this);this._toggleDisplay(this.noSearchMatchNode,c(".Category.hideFromView",this.domNode).length===b.length)},_setUserCustomizableAttr:function(a){g.remove(this.domNode,"favoritesEnabled");g.remove(this.domNode,"favoritesDisabled");!0===a?g.add(this.domNode,"favoritesEnabled"):g.add(this.domNode,"favoritesDisabled");this._set("userCustomizable",a)},_setShowHeaderAttr:function(a){!1===a?(this.header.style.display="none",this.header.classList.remove("margin")):!0===
a&&(this.header.style.display=null,this.header.classList.add("margin"));this._set("showHeader",a)},_setDisplayStateAttr:function(a){g.remove(this.domNode,F.ICON);g.remove(this.domNode,F.LIST);g.add(this.domNode,a);this._favCategoryWidget&&this._favCategoryWidget.set("displayState",a);this.getChildren().forEach(function(b){b.set("displayState",a)});this._set("displayState",a);this._updateToggleButtons()},_updateToggleButtons:function(){this.displayState===F.ICON?this.iconViewButton&&!this.iconViewButton.checked&&
this.iconViewButton.set("checked",!0):this.listViewButton&&!this.listViewButton.checked&&this.listViewButton.set("checked",!0)},_setFooterIdAttr:function(a){var b=m.byId(a);b?(0===b.getChildren().length&&(b.domNode.style.display="none"),f.place(b.domNode,this.footerContainer),b.startup(),this.footerContainer.style.display="block"):this.footerContainer.style.display="none";this._set("footerId",a)},_setFavCategoryIdAttr:function(a){var b=m.byId(a);b&&(this._favCategoryWidget=b,0===b.getChildren().length&&
g.add(b.domNode,"hideFromView"),b.set("isFavoriteCategory",!0),b.set("galleryPopupId",this.id),f.place(b.domNode,this.favCategoryContainer),this.own(b),b.set("displayState",this.displayState));this._set("favCategoryId",a)},_setPlaceholderTextAttr:function(a){this.searchBox.set("placeholder",a)},_getPlaceholderTextAttr:function(){return this.searchBox.getAttribute("placeholder")},_toggleDisplay:function(a,b){a.style.display=b?"block":"none"},_handleSearchKeyDown:function(a){a.keyCode===d.ESCAPE&&""!==
a.target.value&&(this._resetSearchBoxValue(),a.stopPropagation())},_handleSearchBoxTyping:function(a){this._searchBoxValue=a.mwEventData.currentContent;this.enforceFilters()},_createSearchBoxAndButtons:function(){var b=this;this.searchBox.on("typing",a.hitch(this,this._handleSearchBoxTyping));this.searchBox.on("keydown",a.hitch(this,this._handleSearchKeyDown));this.listViewButton=new v({icon:"icon_view_list_16",tag:"listViewButton",buttonGroup:"galleryPopupView_"+this.id});this.own(this.listViewButton);
this.listViewButton.placeAt(this.listViewButtonContainerNode);this.listViewButton.on("click",a.hitch(this,function(){this.focus()}));this.iconViewButton=new v({icon:"icon_view_icon_16",tag:"iconViewButton",buttonGroup:"galleryPopupView_"+this.id,checked:!0});this.own(this.iconViewButton);this.iconViewButton.placeAt(this.iconViewButtonContainerNode);this.iconViewButton.on("click",a.hitch(this,function(){this.focus()}));e(this.closeButtonNode,"click",this._handleCloseButtonClick);this.listViewButton.on("change",
function(a){"checked"===a.mwEventData.propertyName&&!0===a.mwEventData.newValue&&b.set("displayState",F.LIST)});this.iconViewButton.on("change",function(a){"checked"===a.mwEventData.propertyName&&!0===a.mwEventData.newValue&&b.set("displayState",F.ICON)});this._updateToggleButtons()},_calculateSearchBoxWidth:function(){var a=b.getContentBox(this.domNode),c=b.getMarginBox(this.buttonWrapper),d=b.getMarginExtents(this.searchTextFieldContainerNode);this.searchBox.set("width",a.w-c.w-(d.l+d.r))},_calculateSelfMaxHeight:function(){var a=
window.innerHeight-this.domNode.getBoundingClientRect().top;this.domNode.style.maxHeight=a+"px"},_resetSearchBoxValue:function(){this.searchBox.set("value","");this._searchBoxValue="";this.enforceFilters()},_resizeContainerNode:function(a){this.domNode.style.width=a*this.galleryItemWidth+"px"},focus:function(){this.searchBox.focusNode.focus()},_startupHeaderWidgets:function(){this.searchBox.startup();this.listViewButton.startup();this.iconViewButton.startup()},_setColumnCountAttr:function(a){if("number"!==
typeof a||0>a)throw Error("'columnCount' property expects a positive integer number!");this._set("columnCount",a)},_calculateSelfWidth:function(){var a;a=this.get("columnCount")||7;this._resizeContainerNode(a)},onOpen:function(){this.inherited(arguments);this.domNode.parentNode.classList.add("galleryPopupWrapper");this.domNode.parentNode.style.height="auto";this._calculateSearchBoxWidth();this._calculateSelfMaxHeight();this._invokingGallery||this._calculateSelfWidth();this._checkForPopupListInFooter();
this._toggleDisplay(this.noSearchMatchNode,!1);setTimeout(function(){this.focus();setTimeout(function(){document.addEventListener("mousedown",this._handleFocusChange);document.addEventListener("pointerdown",this._handleFocusChange);window.addEventListener("blur",this._handleWindowBlur);this.globalListenersCreated=!0}.bind(this),0)}.bind(this),0)},onClose:function(){this.inherited(arguments);this._resetSearchBoxValue();document.removeEventListener("mousedown",this._handleFocusChange);document.removeEventListener("pointerdown",
this._handleFocusChange);window.removeEventListener("blur",this._handleWindowBlur);delete this.globalListenersCreated;this.emit("restorefocus")},destroy:function(){this.inherited(arguments);this.globalListenersCreated&&(document.removeEventListener("mousedown",this._handleFocusChange),document.removeEventListener("pointerdown",this._handleFocusChange),window.removeEventListener("blur",this._handleWindowBlur))},galleryStateChanged:function(){},onExecute:function(){},_escapeRegExp:function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,
"\\$\x26")},_qeTyping:function(a){this.searchBox._qeTyping(a)},_qeCloseClick:function(){this._handleCloseButtonClick()}})})},"mw-form/TextField":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/EditableMixin mw-mixins/property/SizeMixin mw-mixins/property/TextInputValueMixin mw-form/mixins/SharedTextInputMixin mw-mixins/property/PlaceholderMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/mixinDependencyValidator mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin dojo/text!./templates/TextField.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A){return h(w.validate([e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,x,B]),{baseClass:"mwWidget mwTextField",templateString:A,horizontalAlignment:"left",width:150,height:22,constructor:function(){this._addKeysThatPreventTypingEvent([g.ENTER])},_handleEnterKey:function(){var a,b;a=this.inputNode.value;b=this.get("value");this.set("value",a);a=this.get("value");b!==a&&this._triggerChangeEvent("value",b,a);this.domNode.classList.add("mwTextFieldHighlight");this.defer(f.hitch(this,
function(){this.domNode.classList.remove("mwTextFieldHighlight")}),200)},_onKeyUp:function(a){this.inherited(arguments);a.keyCode===g.ENTER&&this._handleEnterKey()},_qeTypeOverWithEnter:function(a){var b=this.get("value");this.set("value",a);this._triggerChangeEvent("value",b,a)},_setDisabledAttr:function(a){this.inherited(arguments);!0===a?this.inputNode.setAttribute("disabled",""):this.inputNode.removeAttribute("disabled")}})})},"mw-mixins/property/EditableMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{editable:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwEditableMixin");this._setEditableAttr(this.get("editable"))},_setEditableAttr:function(f){this.inputNode.readOnly=!f;f?this.domNode.classList.remove("mwNonEditable"):this.domNode.classList.add("mwNonEditable");this._set("editable",f)}})})},"mw-mixins/property/TextInputValueMixin":function(){define(["dojo/_base/declare","dojo/on"],function(h,f){return h(null,{value:"",postCreate:function(){this.inherited(arguments);
this.domNode.classList.add("mwTextInputValueMixin");this._setValueAttr(this.get("value"));this._stopChangeEventBubbling()},_setValueAttr:function(f){this.setValueInDom(f);this._set("value",f)},_stopChangeEventBubbling:function(){this.own(f(this.inputNode,"change",function(f){f.stopPropagation()}))},setValueInDom:function(f){this.inputNode.value=f}})})},"mw-form/mixins/SharedTextInputMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dijit/_FocusMixin mw-mixins/property/PlaceholderMixin mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin".split(" "),
function(h,f,g,e,d,c,b){93;g.TAB;return h([e,d,c,b],{constructor:function(){this._preventTypingEventForKeys=[g.UP_ARROW,g.DOWN_ARROW,g.RIGHT_ARROW,g.LEFT_ARROW,g.PAGE_DOWN,g.PAGE_UP,g.HOME,g.END,g.ESCAPE,g.CAPS_LOCK,16,17,18,91,92,93]},_addKeysThatPreventTypingEvent:function(a){if(!Array.isArray(a))throw"Input to _addKeysThatPreventTypingEvent was not an array";this._preventTypingEventForKeys=this._preventTypingEventForKeys.concat(a)},postCreate:function(){this.inherited(arguments);this.on("keyup",
f.hitch(this,"_onKeyUp"))},_onKeyUp:function(a){0<=this._preventTypingEventForKeys.indexOf(a.keyCode)||this._triggerTypingEvent(this.inputNode.value)},_onBlur:function(){var a,b;a=this.inputNode.value;b=this.get("value");this._set("value",a);a=this.get("value");b!==a&&this._triggerChangeEvent("value",b,a);this.inherited(arguments)}})})},"mw-mixins/property/PlaceholderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-construct dojo/on dijit/focus mw-mixins/property/TextInputValueMixin".split(" "),
function(h,f,g,e,d,c,b){h=h(null,{placeholder:"",_setPlaceholderAttr:function(a){if("string"!==typeof a)throw Error("'placeholder' property expects a literal string!");this.inputNode.placeholder=a;this._set("placeholder",a)}});h._dependencies=[{mixin:b,orderDependent:!1}];return h})},"mw-mixins/event/TypingEventMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_triggerTypingEvent:function(f){this.emit("typing",{mwEventData:{currentContent:f}})},_qeTyping:function(f){this.inputNode.value=
f;this._triggerTypingEvent(f)}})})},"MW/toolstrip/widgets/_PopupBase":function(){define(["dojo/_base/declare"],function(h){return h(null,{onOpen:function(){this.isShowingNow=!0},onClose:function(){this.isShowingNow=!1}})})},"MW/toolstrip/constants/OrientationConstants":function(){define([],function(){return{VERTICAL:"Vertical",HORIZONTAL:"Horizontal"}})},"MW/toolstrip/GalleryFilter":function(){define(["dojo/_base/declare","mw-log/Log"],function(h,f){return h(null,{constructor:function(g){g=g||{};
f.assert(g.id,"An id is required for a filter!");f.assert(g.checkerFunction,"A checker function is required for a filter!");this.id=g.id;this.disabled=!!g.disabled;this.checkerFunction=g.checkerFunction}})})},"MW/toolstrip/widgets/gallery/GalleryItemRowCountMixin":function(){define(["dojo/_base/declare","dojo/dom-class"],function(h,f){return h(null,{_setGalleryItemRowCountAttr:function(g){f.remove(this.domNode,"oneRow");f.remove(this.domNode,"twoRow");f.remove(this.domNode,"threeRow");1===g?f.add(this.domNode,
"oneRow"):2===g?f.add(this.domNode,"twoRow"):3===g&&f.add(this.domNode,"threeRow");this._set("galleryItemRowCount",g)}})})},"MW/toolstrip/widgets/gallery/GalleryItemTextLineCountMixin":function(){define(["dojo/_base/declare","dojo/dom-class"],function(h,f){return h(null,{_setGalleryItemTextLineCountAttr:function(g){f.remove(this.domNode,"zeroLine");f.remove(this.domNode,"oneLine");f.remove(this.domNode,"twoLine");0===g?f.add(this.domNode,"zeroLine"):1===g?f.add(this.domNode,"oneLine"):2===g&&f.add(this.domNode,
"twoLine");this._set("galleryItemTextLineCount",g)}})})},"MW/toolstrip/form/SearchTextField":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","mw-form/TextField"],function(h,f,g,e,d){return h(d,{baseClass:"mwWidget mwTextField mwSearchTextField",postCreate:function(){this.inherited(arguments);this.clearLink=f.create("div",{"class":"clearTextContainerNode"},this.domNode,"first");this._toggleSearchBoxIcon();this.on("typing",g.hitch(this,this._toggleSearchBoxIcon));
this.watch("value",g.hitch(this,this._toggleSearchBoxIcon));this.own(e(this.clearLink,"click",g.hitch(this,this._onClickClearButtonHandler)))},_toggleSearchBoxIcon:function(){""!==this.inputNode.value?this.clearLink.classList.add("clearTextIconVisible"):this.clearLink.classList.remove("clearTextIconVisible")},_onClickClearButtonHandler:function(){this.set("value","");this._triggerTypingEvent("");this._toggleSearchBoxIcon()}})})},"MW/toolstrip/mixins/property/MenuMixin":function(){define(["dojo/_base/declare",
"dijit/focus","MW/uiframework/FocusManager","mw-dom-utils/domUtils"],function(h,f,g,e){return h(null,{postCreate:function(){this.inherited(arguments);this.set("menuOrientation","below")},closeMenu:function(d){this.domNode.classList.contains("mwPopupMenuItem")||(g.isAvailable()&&!e.findParentNode(this.domNode,"mwSectionPopup")?(this.emit("restorefocus"),this._handleClosingPopup(d)):this.inherited(arguments))}})})},"MW/toolstrip/widgets/SectionPopup":function(){define("dojo/_base/declare mw-menu/Menu mw-mixins/ResizeMixin ../mixins/property/TypeMixin ../mixins/ScrollbarMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c){return h(c.validate([f,g,e,d]),{visualFamily:"toolstrip",baseClass:"toolstrip mwSectionPopup"})})},"MW/toolstrip/mixins/ScrollbarMixin":function(){define(["dojo/_base/declare","dojo/sniff"],function(h,f){return h(null,{postCreate:function(){this.inherited(arguments);f("mac")||this.domNode.classList.add("mwScrollbarMixin")}})})},"MW/toolstrip/widgets/Panel":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/Panel.html ./_WidgetMixin mw-mixins/ResizeMixin".split(" "),
function(h,f,g,e,d,c,b){return h([f,g,e,c,b],{templateString:d,addChild:function(a){this.inherited(arguments);var b=this.getParent();b&&"Column"===b.type&&b.updateChildrenOrientations()}})})},"MW/toolstrip/widgets/Column":function(){define("dojo/aspect dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/Column.html ./_WidgetMixin ./_ChildrenWrapperMixin mw-mixins/ResizeMixin MW/toolstrip/hashes/listOfNewWidgets MW/toolstrip/constants/OrientationConstants".split(" "),function(h,
f,g,e,d,c,b,a,k,l){return f([g,e,c,b,a],{templateString:d,constructor:function(){var a=this;this._wrappers={};this.own(h.after(this,"addChild",function(b){a._wrappers[b.id].style.textAlign=a.horizontalAlignment;a.get("width")&&(-1!==k.indexOf(b.type)?b._allowedValues&&-1!==b._allowedValues.indexOf("100%")&&b.set("width","100%"):b.set("width","100%"))},!0))},_setHorizontalAlignmentAttr:function(a){Object.keys(this._wrappers).forEach(function(b){this._wrappers[b].style.textAlign=a},this);this._set("horizontalAlignment",
a)},_setWidthAttr:function(a){0<a&&(this.domNode.style.width=a+"px",this._set("width",a),this.getChildren().forEach(function(a){a.set("width","100%")}))},_setExtraColumnGapAttr:function(a){this._set("extraColumnGap",a);a?this.domNode.classList.add("extraColumnGap"):this.domNode.classList.remove("extraColumnGap")},resize:function(){this.inherited(arguments);var a=this.getChildren();a&&a.forEach(function(a){a.resize?a.resize():a.set("height",a.get("height"))},this)},addChild:function(a){this.inherited(arguments);
this.updateChildrenOrientations()},removeChild:function(a){this.inherited(arguments);this.updateChildrenOrientations()},updateChildrenOrientations:function(){var a=this.getParent();a&&("Section"===a.type?this._updateChildrenOrientations():"Panel"===a.type&&(a=a.getParent())&&"Column"===a.type&&a.updateChildrenOrientations())},_updateChildrenOrientations:function(){var a=this.getChildren();1===a.length?"Panel"===a[0].type?a[0].getChildren().forEach(function(a){a=a.getChildren();var b=1===a.length?
l.VERTICAL:l.HORIZONTAL;a.forEach(function(a){a.get("orientation")&&a.set("orientation",b)})}):a[0].set("orientation",l.VERTICAL):a.forEach(function(a){"Panel"===a.type?a.getChildren().forEach(function(a){a.getChildren().forEach(function(a){a.get("orientation")&&a.set("orientation",l.HORIZONTAL)})}):a.get("orientation")&&a.set("orientation",l.HORIZONTAL)})}})})},"MW/toolstrip/menu/PopupListPanel":function(){define(["dojo/_base/declare","mw-menu/MenuPanel","../mixins/property/TypeMixin","mw-mixins/mixinDependencyValidator"],
function(h,f,g,e){return h(e.validate([f,g]),{visualFamily:"toolstrip"})})},"mw-menu/MenuPanel":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/registry mw-menu/mixins/KeyNavMixin mw-menu/mixins/ContainerFocusMixin mw-menu/mixins/MenuFocusMixin mw-mixins/PreventFocusMixin mw-menu/mixins/property/MaxHeightMixin mw-mixins/property/TagMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuPanel.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h(n.validate([f,e,c,b,a,k,g,m,l,q]),{baseClass:"mwWidget mwMenuPanel",templateString:p,maxHeight:100,closeRequest:function(a){var b=this._getParentWidget();null!=b&&b.closeRequest&&(b._closeEventData={mwEventData:{gainedFocusWidget:null}},b.closeRequest(a?a:!1))},_focusChange:function(a){var b=this._getParentWidget();null!=b&&b._focusChange&&(b._closeEventData={mwEventData:{gainedFocusWidget:a}},b._focusChange(a))},_getParentWidget:function(){return d.getEnclosingWidget(this.domNode.parentNode)}})})},
"MW/toolstrip/widgets/Footer":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container ./_WidgetMixin dojo/text!./templates/Footer.html".split(" "),function(h,f,g,e,d,c){return h([f,g,e,d],{templateString:c,baseClass:"footer"})})},"MW/toolstrip/widgets/FooterCell":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container ./_WidgetMixin dojo/text!./templates/FooterCell.html ./_ChildrenWrapperMixin".split(" "),function(h,f,g,
e,d,c,b){return h([f,g,e,b,d],{templateString:c,baseClass:"footerCell"})})},"MW/toolstrip/widgets/gallery/Gallery":function(){define("dojo/_base/declare dojo/debounce dojo/dom-geometry dojo/aspect dojo/touch dojo/_base/lang dojo/on dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/_HasDropDown dijit/registry dijit/_CssStateMixin dojo/text!./templates/Gallery.html ../../constants/gallery/GalleryViewConstants ../_WidgetMixin ./GalleryItemRowCountMixin ./GalleryItemTextLineCountMixin ./ScrollToSelectionMixin ./HideDisabledItemsMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/DisabledMixin MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/uiframework/FocusManager dojo/i18n!l10n/nls/toolstrip".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L){return h([k,l,m,p,q,t,u,v,w,x,B,A,D,F],{templateString:r,baseClass:"mwWidget mwGallery",visualFamily:"toolstrip",dropDownPosition:["below"],openIfEmpty:!0,postCreate:function(){this.inherited(arguments);this._focusManager={};this.own(e.after(this,"addChild",function(a){a.set("displayState",s.ICON)},!0),b(this.openPopupDiv,"click",function(a){this.isDropDownOpen()||this._onDropDownMouseDown(a)}.bind(this)),b(this.domNode,"keyup",function(b){(b.keyCode===
a.ENTER||b.keyCode===a.SPACE)&&this.openDropDown()}.bind(this)));var c=n.byId(this.galleryPopupId);c&&this.setupGalleryPopupListener(c);this.openPopupDiv.setAttribute("title",L.showMore)},openDropDown:function(){var a,b=n.byId(this.galleryPopupId);if(this.openIfEmpty||!(b.domNode.querySelectorAll(".Category.hideFromView").length>b.getChildren().length))a=b.columnCount?Math.max(b.columnCount,this.currentColumnCount):this.currentColumnCount,a=3>a?3*this.galleryItemWidth:a*this.galleryItemWidth,b.domNode.style.width=
a+30+"px",this.set("dropDown",b),this.setupGalleryPopupListener(b),this.inherited(arguments),this._handleWindowResizeHandler=c.hitch(this,"_handleWindowResize"),window.addEventListener("resize",this._handleWindowResizeHandler)},_shouldCloseDropDown:function(a,b){return a===window?!0:this.domNode&&this.domNode.contains(a)&&a.classList.contains("dijitDownArrowButton")&&(!b.domNode||!b.domNode.parentElement||"none"!==b.domNode.parentElement.style.display)||b.domNode&&b.domNode.contains(a)?!1:a.matches?
!a.matches(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.matchesSelector?!a.matchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.webkitMatchesSelector?!a.webkitMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.mozMatchesSelector?!a.mozMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):a.msMatchesSelector?!a.msMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):
a.oMatchesSelector?!a.oMatchesSelector(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu  *"):!0},closeDropDown:function(){window.removeEventListener("resize",this._handleWindowResizeHandler);if(!this.dropDown&&(this.dropDown=n.byId(this.galleryPopupId),!this.dropDown))return;this.inherited(arguments)},_handleWindowResize:function(){this.closeDropDown()},_qeDropDownClick:function(){this.toggleDropDown()},_onDropDownMouseDown:function(a){a instanceof MouseEvent&&0!==a.button||this.inherited(arguments)},
setupGalleryPopupListener:function(a){a._invokingGallery=this;var b=this;this._galleryPopupListener&&(this._galleryPopupListener.remove(),this._galleryPopupListener=null);this._galleryPopupListener=e.after(a,"galleryStateChanged",function(){b.refresh()})},shrink:function(){var a;this.currentColumnCount>this.minColumnCount?(this.set("currentColumnCount",this.currentColumnCount-1),a=!0):a=!1;return a},grow:function(){var a;this.currentColumnCount<this.maxColumnCount?(this.set("currentColumnCount",this.currentColumnCount+
1),a=!0):a=!1;return a},_setCurrentColumnCountAttr:function(a){this._set("currentColumnCount",a);this._resizeContainerNode();this.refresh()},_setOpenIfEmptyAttr:function(a){if("boolean"!==typeof a)throw Error("'openIfEmpty' property expected a boolean value");this._set("openIfEmpty",a)},_resizeContainerNode:function(){var a=this.currentColumnCount*this.galleryItemWidth+"px";this.containerNode.style.width=a;this.textOverlayWrapperNode.style.width=a},_setGalleryItemWidthAttr:function(a){0<a&&(this._set("galleryItemWidth",
a),this._resizeContainerNode())},_setDisplayStateAttr:function(a){var b=g.position(this.domNode);this._set("displayState",a);this.domNode.classList.remove("busy");this.set("disabled",!1);"busy"===a?(this.busyLayer.style.height=b.h+"px",this.busyLayer.style.width=b.w+"px",this.domNode.classList.add("busy")):"blocked"===a&&this.set("disabled",!0)},_setTextOverlayAttr:function(a){this._set("textOverlay",a);a?(this.textOverlayWrapperNode.style.display="table",this.textOverlayNode.textContent=a):(this.textOverlayWrapperNode.style.display=
"none",this.textOverlayNode.textContent="")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},refresh:function(){},destroy:function(){this._galleryPopupListener.remove();this.inherited(arguments)},isDropDownOpen:function(){var a=n.byId(this.galleryPopupId);return!(a&&a.domNode&&(!a.domNode.parentElement.classList.contains("dijitPopup")&&"none"===a.domNode.style.display||a.domNode.parentElement&&"none"===a.domNode.parentElement.style.display))}})})},"MW/toolstrip/widgets/gallery/ScrollToSelectionMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{scrollToSelection:!1})})},"MW/toolstrip/widgets/gallery/HideDisabledItemsMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{hideDisabledItems:!0})})},"MW/toolstrip/widgets/gallery/GalleryCategory":function(){define("dojo/_base/declare dojo/aspect dojo/dom-construct dojo/on dojo/dnd/Source dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/dnd/Manager mw-dnd/DnDUtils dojo/text!./templates/GalleryCategory.html ../../constants/gallery/GalleryViewConstants ./_GalleryCategoryAnimationMixin ../_WidgetMixin ./GalleryItemAvatar".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return h([b,a,k,p,r],{templateString:q,userCustomizable:!0,postCreate:function(){var a=this;this.inherited(arguments);this.own(e(this.moveTopButtonNode,"click",function(){a.categoryMoved()}));this.own(f.after(this,"addChild",function(b,c){var d=this.getParent();c=0<=c?c:this.getChildren().length-1;d&&d.galleryStateChanged();b.set("displayState",a.displayState);a.dndSource&&a.dndSource.insertNodes(!1,[b.domNode],!1,this.getChildren()[c].domNode);this.showHideCategory()},
!0));this.own(f.after(this,"removeChild",function(a){(a=this.getParent())&&a.galleryStateChanged();this.showHideCategory()},!0));this.showHideCategory()},showHideCategory:function(){0===this.getChildren().length?this.domNode.classList.add("hideFromView"):this.domNode.classList.remove("hideFromView")},_setIsFavoriteCategoryAttr:function(a){a?this.titleIconNode.classList.add("starTitle"):this.titleIconNode.classList.remove("starTitle");this._set("isFavoriteCategory",a);this._createDndSource(this.displayState)},
_setDisplayStateAttr:function(a){this.getChildren().forEach(function(b){b.set("displayState",a)});this._createDndSource(a);this._set("displayState",a)},_setTitleAttr:function(a){""===a&&(this.header.style.display="none");this.titleNode.textContent=a;this._set("title",a)},_setUserCustomizableAttr:function(a){!1===a?this.moveTopNode.style.display="none":!0===a&&(this.moveTopNode.style.display=null);this._set("userCustomizable",a)},_createDndSource:function(a){var b=this,c={};this.isFavoriteCategory&&
(a===n.ICON&&(c={horizontal:!0}),this.dndSource&&(m.unregisterMakeAvatar(this.dndSource),this.dndSource.destroy()),this.dndSource=new d(this.containerNode,c),m.registerMakeAvatar(b.dndSource,function(){return new s(this)}),this.own(f.after(this.dndSource,"onDrop",function(a,c){b._onDropHandler(a,c)},!0)))},_onDropHandler:function(a,b){var d,e;e=c.byNode(b[0]);d=this.getIndexOfChild(e);this.itemMoved({itemId:e.id,newIndex:d})},_qeMoveToTopClick:function(){this.categoryMoved()},categoryMoved:function(){},
itemMoved:function(){}})})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){g.isAsync||a(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var n=f("dojo.dnd.Source",m,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,
constructor:function(a,b){e.mixin(this,e.mixin({},b));var c=this.accept;if(c.length){this.accept={};for(var f=0;f<c.length;++f)this.accept[c[f]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&d.add(this.node,"dojoDndSource");this.targetState="";this.accept&&d.add(this.node,"dojoDndTarget");this.horizontal&&d.add(this.node,"dojoDndHorizontal");this.topics=[k.subscribe("/dnd/source/over",e.hitch(this,
"onDndSourceOver")),k.subscribe("/dnd/start",e.hitch(this,"onDndStart")),k.subscribe("/dnd/drop",e.hitch(this,"onDndDrop")),k.subscribe("/dnd/cancel",e.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==q.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;
return!1},destroy:function(){n.superclass.destroy.call(this);h.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&"Disabled"==this.targetState)){n.superclass.onMouseMove.call(this,a);var b=q.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&b.startDrag(this,d,this.copyState(l.getCopyKeyState(a),!0))}if(this.isDragging){d=
!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=c.position(this.current,!0);d=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==c.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||d!=this.before)this._markTargetAnchor(d),b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||
!l.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,n.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,n.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=q.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&
this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&q.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target",
"")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return d.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id);b=b.cloneNode(!0);b.id=l.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();
this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id);a=a.cloneNode(!0);a.id=l.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=
function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){n.superclass.onOverEvent.call(this);q.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){n.superclass.onOutEvent.call(this);q.manager().outSource(this);if(this.isDragging&&"Disabled"!=
this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){this.current==this.targetAnchor&&this.before==a||(this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After"))},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=
null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!b.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(d.contains(a,"dojoDndHandle"))return!0;if(d.contains(a,"dojoDndItem")||d.contains(a,"dojoDndIgnore"))break}return!1}});return n})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){var n=f("dojo.dnd.Selector",q,{constructor:function(a,b){b||(b={});this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(k(this.node,l.press,e.hitch(this,"onMouseDown")),k(this.node,l.release,e.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var b=new a,c=m._empty,e;for(e in this.selection)e in c||b.push(d.byId(e));return b},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(a,b){this._addItemClass(d.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=m._empty,b;for(b in this.selection)if(!(b in a)){var e=d.byId(b);this.delItem(b);c.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){b=b||g.global;var c=this.selection,d=m._empty,e;for(e in c)e in d||a.call(b,this.getItem(e),e,this)},sync:function(){n.superclass.sync.call(this);
this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],b=m._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);h.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=e.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};n.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){n.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!m.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,b.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){m.getCopyKeyState(a)||this._removeSelection();var c=this.getAllNodes();if(c.length&&(this.anchor||(this.anchor=c[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var d=0,e;d<c.length&&!(e=c[d],e==this.anchor||e==this.current);++d);for(++d;d<c.length;++d){e=c[d];if(e==this.anchor||e==this.current)break;this._addItemClass(e,"Selected");this.selection[e.id]=
1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?m.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):m.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):
(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&
(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=k(this.node,l.move,e.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=m._empty,b;for(b in this.selection)if(!(b in a)){var c=d.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection=
{};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return n})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){f=f("dojo.dnd.Container",k,{skipForm:!1,allowNested:!1,constructor:function(a,d){this.node=c.byId(a);
d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;this.parent=d.dropParent&&c.byId(d.dropParent);this.map={};this.current=null;this.containerState="";b.add(this.node,"dojoDndContainer");(!d||!d._skipStartup)&&this.startup();this.events=[m(this.node,n.over,e.hitch(this,"onMouseOver")),m(this.node,n.out,e.hitch(this,"onMouseOut")),m(this.node,"dragstart",e.hitch(this,"onSelectStart")),m(this.node,"selectstart",e.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},
setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||g.global;var c=this.map,d=p._empty,e;for(e in c)e in d||a.call(b,c[e],e,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return q((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=p.getUniqueId();var c=b.getAttribute("dndType"),
d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);
return this},destroy:function(){h.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=p._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
b!=this.node;)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){if(!this.skipForm||
!p.isFormElement(a))a.stopPropagation(),a.preventDefault()},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,c){var d="dojoDnd"+a,e=a.toLowerCase()+"State";b.replace(this.node,d+c,d+this[e]);this[e]=c},_addItemClass:function(a,c){b.add(a,"dojoDndItem"+c)},_removeItemClass:function(a,c){b.remove(a,"dojoDndItem"+c)},_getChildByEvent:function(a){if(a=a.target)for(var c=a.parentNode;c;a=c,c=a.parentNode)if((c==this.parent||this.allowNested)&&b.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(a,c){var d=(this.creator||this.defaultCreator).call(this,a,c);e.isArray(d.type)||(d.type=["text"]);d.node.id||(d.node.id=p.getUniqueId());b.add(d.node,"dojoDndItem");return d}});p._createNode=function(b){return!b?p._createSpan:function(c){return a.create(b,{innerHTML:c})}};p._createTrTd=function(b){var c=a.create("tr");a.create("td",{innerHTML:b},c);return c};p._createSpan=function(b){return a.create("span",{innerHTML:b})};p._defaultCreatorNodes={ul:"li",ol:"li",
div:"div",p:"div"};p._defaultCreator=function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?p._createTrTd:p._createNode(p._defaultCreatorNodes[a]);return function(a,c){var d=a&&e.isObject(a),f,g;d&&a.tagName&&a.nodeType&&a.getAttribute?(f=a.getAttribute("dndData")||a.innerHTML,d=(d=a.getAttribute("dndType"))?d.split(/\s*,\s*/):["text"],g=a):(f=d&&a.data?a.data:a,d=d&&a.type?a.type:["text"],g=("avatar"==c?p._createSpan:b)(String(f)));g.id||(g.id=p.getUniqueId());return{node:g,data:f,type:d}}};
return f})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){var r=f("dojo.dnd.Manager",[c],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:b("touch")?4:16,OFFSET_Y:b("touch")?4:16,overSource:function(a){this.avatar&&
(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update());l.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),l.publish("/dnd/source/over",null)):l.publish("/dnd/source/over",null)},startDrag:function(a,b,c){function f(a){a.preventDefault();a.stopPropagation()}n.autoScrollStart(e.doc);this.source=a;this.nodes=b;this.copy=Boolean(c);this.avatar=this.makeAvatar();
e.body().appendChild(this.avatar.node);l.publish("/dnd/start",a,b,this.copy);this.events=[k(e.doc,m.move,g.hitch(this,"onMouseMove")),k(e.doc,m.release,g.hitch(this,"onMouseUp")),k(e.doc,"keydown",g.hitch(this,"onKeyDown")),k(e.doc,"keyup",g.hitch(this,"onKeyUp")),k(e.doc,"dragstart",f),k(e.body(),"selectstart",f)];d.add(e.body(),"dojoDnd"+(c?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){d.remove(e.body(),
["dojoDndCopy","dojoDndMove"]);h.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new p(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var c=this.avatar;c&&(n.autoScrollNodes(a),c=c.node.style,c.left=a.pageX+this.OFFSET_X+"px",c.top=a.pageY+this.OFFSET_Y+"px",c=Boolean(this.source.copyState(q.getCopyKeyState(a))),this.copy!=c&&this._setCopyStatus(c));
b("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(q.getCopyKeyState(a)));l.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);l.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else l.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(b){if(this.avatar)switch(b.keyCode){case a.CTRL:b=Boolean(this.source.copyState(!0));this.copy!=b&&this._setCopyStatus(b);break;case a.ESCAPE:l.publish("/dnd/cancel"),
this.stopDrag()}},onKeyUp:function(b){this.avatar&&b.keyCode==a.CTRL&&(b=Boolean(this.source.copyState(!1)),this.copy!=b&&this._setCopyStatus(b))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();d.replace(e.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});q._manager=null;r.manager=q.manager=function(){q._manager||(q._manager=new r);return q._manager};return r})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),
function(h,f,g,e,d,c,b,a){return h("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){var a=c.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),d=this.manager.source,f,g=c.create("tbody",null,a),h=c.create("tr",null,g),p=c.create("td",null,h),r=Math.min(5,this.manager.nodes.length),s=0;b("highcontrast")&&c.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},p);c.create("span",{innerHTML:d.generateText?
this._generateText():""},p);for(e.set(h,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});s<r;++s)d.creator?f=d._normalizedCreator(d.getItem(this.manager.nodes[s].id).data,"avatar").node:(f=this.manager.nodes[s].cloneNode(!0),"tr"==f.tagName.toLowerCase()&&(h=c.create("table"),c.create("tbody",null,h).appendChild(f),f=h)),f.id="",h=c.create("tr",null,g),p=c.create("td",null,h),p.appendChild(f),e.set(h,{"class":"dojoDndAvatarItem",style:{opacity:(9-s)/10}});this.node=a},destroy:function(){c.destroy(this.node);
this.node=!1},update:function(){d.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(b("highcontrast")){var c=g.byId("a11yIcon"),e="+";this.manager.canDropFlag&&!this.manager.copy?e="\x3c ":!this.manager.canDropFlag&&!this.manager.copy?e="o":this.manager.canDropFlag||(e="x");c.innerHTML=e}a("tr.dojoDndAvatarHeader td span"+(b("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"mw-dnd/DnDUtils":function(){define(["dojo/_base/declare","dojo/aspect","dojo/dnd/Manager","mw-utils/Utils"],function(h,f,g,e){var d={},c=function(b){var a=-1;Object.keys(d).some(function(c,e,f){return d[c].dndSource===b?(a=c,!0):!1});return a};f.around(g.manager(),"makeAvatar",function(b){return function(){var a=g.manager(),c;!1===Object.keys(d).some(function(b,e,f){return d[b].dndSource===a.source?(c=d[b].makeAvatarFunc.call(a),!0):!1})&&(c=b.call(a));return c}});return{registerMakeAvatar:function(b,
a){var f=c(b);-1===f&&(f=e.generateUuid());d[f]={dndSource:b,makeAvatarFunc:a}},unregisterMakeAvatar:function(b){b=c(b);-1!==b&&delete d[b]},destroy:function(b){b&&b.remove()}}})},"MW/toolstrip/widgets/gallery/_GalleryCategoryAnimationMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/_base/fx dojo/fx dojo/query dijit/registry ../../constants/gallery/GalleryViewConstants".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h(null,{animate:function(a){switch(a.type){case "move":this._animateCategoryMove(a);
break;case "childAdd":if(this.get("isFavoriteCategory"))this._animateFavoriteItemAdd(a);else a.onEnd();break;case "childRemove":if(this.get("isFavoriteCategory"))this._animateFavoriteItemRemove(a);else a.onEnd()}},_animateCategoryMove:function(a){var c,e,f,h;e=d.position(this.domNode);h=this._createCategoryClone(this);c=d.position(this._getGalleryPopupWidget().getChildren()[0].domNode).y;f=this._getGalleryPopupPos();c-=f.y;e.x-=f.x;e.y-=f.y;0<this._getGalleryPopupWidget().categoryContainer.scrollTop&&
(c=0);b.slideTo({node:h,duration:this._calculateDuration(0,e.y,0,c),left:e.x,top:c,onEnd:function(){g.destroy(h);a.onEnd()}}).play()},_animateFavoriteItemAdd:function(a){var c,e=this,f,h,s,t,u=0,v=0,w,x,B=!0;w=this._getGalleryPopupPos();x=d.position(this.domNode);f=k.byId(a.startId);h=d.position(f.domNode);c=this._createItemClone(f);f=this.getChildren().filter(function(a){return!a.domNode.classList.contains("hideFromView")});t=f.length;0===t?s=h:(f=f[t-1],f=d.position(f.domNode),this.displayState===
l.ICON?(w.w-(f.x-w.x+f.w)<f.w&&(B=!1),B?(s=f,u=f.w):(s=x,v=x.h)):this.displayState===l.LIST&&(s=f,v=f.h));this._getAllItemWidgets().forEach(function(a){a.detachFavButtonClickHandler()});s.x-=w.x;s.y-=w.y;h.x-=w.x;h.y-=w.y;0<this._getGalleryPopupWidget().categoryContainer.scrollTop&&(v=s.y=0);h=this._calculateDuration(h.x,h.y,s.x,s.y);b.slideTo({node:c,duration:h,left:s.x+u,top:s.y+v,onEnd:function(){g.destroy(c);a.onEnd();e._getAllItemWidgets().forEach(function(a){a.attachFavButtonClickHandler()})}}).play()},
_animateFavoriteItemRemove:function(a){var c,e,f=this,h,l;l=this._getGalleryPopupPos();c=a.childWidget;h=d.position(c.domNode);e=this._createItemClone(c);c=k.byId(a.endId);c=d.position(c.domNode);c.x-=l.x;c.y-=l.y;h.x-=l.x;h.y-=l.y;c.y+c.h>l.h+this._getGalleryPopupWidget().categoryContainer.scrollTop&&(c.y=l.h-c.h);this._getAllItemWidgets().forEach(function(a){a.detachFavButtonClickHandler()});h=this._calculateDuration(h.x,h.y,c.x,c.y);b.slideTo({node:e,duration:h,left:c.x+0,top:c.y+0,onEnd:function(){g.destroy(e);
a.onEnd();f._getAllItemWidgets().forEach(function(a){a.attachFavButtonClickHandler()})}}).play()},_getAllItemWidgets:function(){var a=[];k.byId(this.galleryPopupId).getChildren().forEach(function(b){a=a.concat(b.getChildren())});return a},_calculateDuration:function(a,b,c,d){return Math.sqrt(Math.pow(a-c,2)+Math.pow(b-d,2))/0.7},_getGalleryPopupWidget:function(){return this.get("isFavoriteCategory")?k.byId(this.get("galleryPopupId")):this.getParent()},_getGalleryPopupPos:function(){return d.position(this._getGalleryPopupWidget().domNode)},
_createCategoryClone:function(b){b=this._createClone(b);a(".moveTopNode",b)[0].style.display="none";return b},_createItemClone:function(b){b=this._createClone(b);a(".favButton",b)[0].style.display="none";e.remove(b,"dojoDndItemAnchor");e.remove(b,"dojoDndItemOver");return b},_createClone:function(a){var b,c,e;e=this._getGalleryPopupPos();b=f.clone(a.domNode);c=d.position(a.domNode);a=d.getContentBox(a.domNode);c.x-=e.x;c.y-=e.y;g.place(b,this._getGalleryPopupWidget().domNode);b.style.position="absolute";
b.style.top=c.y+"px";b.style.left=c.x+"px";b.style.width=a.w+"px";b.style.height=a.h+"px";b.style.zIndex=5;return b}})})},"MW/toolstrip/widgets/gallery/GalleryItemAvatar":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-construct dojo/query dijit/registry".split(" "),function(h,f,g,e,d,c){return h([],{constructor:function(b){this.manager=b;this.construct()},construct:function(){var b,a,h;b=this.manager.nodes[0];a=b.cloneNode(!0);h=g.position(b);a.style.width=h.w+"px";
a.style.height=h.h+"px";h=d(".itemWrapper",a)[0];b=c.getEnclosingWidget(b).getParent();b=c.byId(b.get("galleryPopupId"));b=e.create("div",{"class":b.domNode.getAttribute("class")});f.remove(b,"galleryPopup");b.style.position="absolute";b.style.zIndex="1999";b.opacity=0.7;f.remove(a,"dojoDndItemOver dojoDndItem dojoDndItemAnchor");f.add(a,"galleryItemAvatar");f.remove(h);f.add(h,"itemWrapper");e.place(a,b);this.node=b},destroy:function(){e.destroy(this.node);this.node=!1},update:function(){f.toggle(this.node,
"dojoDndAvatarCanDrop",this.manager.canDropFlag)}})})},"MW/toolstrip/form/PushButton":function(){define("dojo/_base/declare mw-form/PushButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/QuickAccessIconMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h(p.validate([f,g,e,d,c,b,a,k,l,m,q,n]),{visualFamily:"toolstrip"})})},"MW/toolstrip/mixins/property/QuickAccessIconMixin":function(){define(["dojo/_base/declare","mw-mixins/property/IconMixin"],function(h,f){var g=h(null,{quickAccessIcon:"",postCreate:function(){this.inherited(arguments);this.set("quickAccessIcon",this.get("quickAccessIcon"))},_setQuickAccessIconAttr:function(e){if("string"!==typeof e)throw Error("'quickAccessIcon' property expects a literal string!");
this._set("quickAccessIcon",e);this._updateDOM(e)},_updateDOM:function(e){""===e?e=this.icon:""!==this.quickAccessIcon&&(e=this.quickAccessIcon);this._removeOldIcon(this.get("quickAccessIcon"));arguments[0]=e;this.inherited(arguments)}});g._dependencies=[{mixin:f,orderDependent:!0}];return g})},"MW/toolstrip/form/SplitButton":function(){define("dojo/_base/declare mw-form/SplitButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin MW/toolstrip/form/mixins/property/DropDownButtonTextMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/MenuMixin mw-mixins/ResizeMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){return h(u.validate([f,g,e,d,c,b,a,k,l,m,q,n,t,p,r,s]),{visualFamily:"toolstrip",minWidth:38,resize:function(){this.inherited(arguments);if("Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&-1<navigator.appVersion.indexOf("Edge"))this._updateTextNodeWidth(),this.own(this.watch("text",this._updateTextNodeWidth))},_updateTextNodeWidth:function(){this.textNode&&(!this.textNode.classList.contains("mwEmptyNode")&&this.domNode.classList.contains("mwHorizontalOrientation"))&&
setTimeout(function(){this.textNode&&(this.textNode.style.width="",this.textNode.style.width=Math.ceil(parseFloat(window.getComputedStyle(this.textNode,null).width))+"px")}.bind(this),0)}})})},"MW/toolstrip/form/ToggleButton":function(){define("dojo/_base/declare mw-form/ToggleButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/ButtonGroupMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/IconOverrideMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h(p.validate([f,g,e,d,c,b,a,k,l,m,q,n]),{visualFamily:"toolstrip"})})},"MW/toolstrip/mixins/property/ButtonGroupMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_shouldUncheckWidget:function(f){return f.get("buttonGroup")===this.get("buttonGroup")&&f!==this&&f.get("checked")&&(!f.get("actionId")||f.get("actionId")!==this.get("actionId"))}})})},"MW/toolstrip/form/ColorPickerButton":function(){define("dijit/focus dojo/aspect dojo/_base/declare dojo/_base/lang dojo/keys dojo/query MW/toolstrip/form/SplitButton mw-menu/Menu mw-mixins/event/ChangeEventMixin mw-colorpicker/ColorPicker mw-colorpicker/ColorPalette mw-colorpicker/MColor mw-dom-utils/domUtils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return g([b,k],{baseClass:"mwWidget mwSplitButton mwColorPickerButton",visualFamily:"toolstrip",selectedColor:"#ff0000",closeOnColorSelection:!0,showPreview:!0,showRecentColors:!0,showCustomPicker:!0,constructor:function(){this.standardColors=q.getStandardLightThemeColors();this._colorPickerMenu=new a;this._colorPicker=new l({showPreview:!0,showCustomPicker:!0,showRecentColors:!0,standardColors:this.standardColors});this.recentColors=this._colorPicker.get("recentlyUsedColors");
this._swatchNode=document.createElement("div");this.own(this._colorPickerMenu);this.own(this._colorPicker)},buildRendering:function(){this.inherited(arguments);this._colorPickerMenu.addChild(this._colorPicker);this._swatchNode.classList.add("mwColorSwatchNode");this.iconNode.appendChild(this._swatchNode);this.set("menu",this._colorPickerMenu)},_setSelectedColorAttr:function(a){if("string"!==typeof a)throw Error("'selectedColor' property expects a literal string!");this._validateColor(a);this._swatchNode.style.backgroundColor=
a;this._set("selectedColor",a);this._updatePreview()},_getSelectedColorAttr:function(){return this._get("selectedColor")},_setShowPreviewAttr:function(a){this._colorPicker.set("showPreview",a);this._set("showPreview",a)},_getShowPreviewAttr:function(){return this._colorPicker.get("showPreview")},_setShowRecentColorsAttr:function(a){this._colorPicker.set("showRecentColors",a);this._set("showRecentColors",a)},_getShowRecentColorsAttr:function(){return this._colorPicker.get("showRecentColors")},_setShowCustomPickerAttr:function(a){this._colorPicker.set("showCustomPicker",
a);this._set("showCustomPicker",a)},_getShowCustomPickerAttr:function(){return this._colorPicker.get("showCustomPicker")},_setRecentColorsAttr:function(a){this._validateRecentColors(a);this._colorPicker.set("recentlyUsedColors",a);this._set("recentColors",a)},_getRecentColorsAttr:function(){return this._colorPicker.get("recentlyUsedColors")},_setStandardColorsAttr:function(a){this._validateStandardColors(a);this._set("standardColors",a);this._colorPicker.paletteNode.destroyRecursive();this._colorPicker.paletteNode=
new m({palette:[this.standardColors[0],this.standardColors[1],this.standardColors[2]]});this._colorPicker.paletteNode.domNode.classList.add(this._colorPicker.baseClass+"Palette");this._colorPicker.paletteNode.placeAt(this._colorPicker,"first").startup();this.own(this._colorPicker.paletteNode.set("onChange",e.hitch(this._colorPicker,"_updateWidgetValues",!1,!0,!0,!0)))},_getStandardColorsAttr:function(){return this._colorPicker.get("standardColors")},postCreate:function(){this.inherited(arguments);
this.own(f.after(this._colorPicker.paletteNode,"_onCellClick",e.hitch(this,"_updateSelectedColor")));this.own(f.after(this._colorPicker.recentColorsWidgetNode,"_onCellClick",e.hitch(this,"_updateSelectedColor")));this.menu.domNode.addEventListener("open",this._handleMenuCloseOnFocusOut.bind(this));this.menu.domNode.addEventListener("keydown",this._handleMenuKeyDown.bind(this));this._colorPicker.domNode.addEventListener("keydown",this._handleColorPickerKeyDown.bind(this));this.buttonNode.addEventListener("click",
this._handleButtonClick.bind(this))},_handleButtonClick:function(){var a=this.get("selectedColor");this._triggerChangeEvent("selectedColor",a,a)},_handleMenuCloseOnFocusOut:function(){var a=h.watch("curNode",e.hitch(this,function(b,c,d){if(null===d||!n.findParentNode(d,"mwMenu"))a.unwatch(),this._updatePreview(),this.closeMenu()}));this.own(a)},_handleMenuKeyDown:function(a){a.keyCode===d.DOWN_ARROW||a.keyCode===d.UP_ARROW?this._colorPicker.paletteNode.focus():a.keyCode===d.TAB&&a.stopPropagation()},
_closeMenuOnColorSelection:function(){this.closeOnColorSelection&&this.closeMenu()},_handleColorPickerKeyDown:function(a){"INPUT"===a.target.tagName&&(a.keyCode===d.ENTER?this._updateSelectedColor():a.keyCode===d.ESCAPE&&this.set("selectedColor",this.get("selectedColor")))},_updatePreview:function(){this.get("selectedColor")!==this._colorPicker.value&&this._colorPicker.set("value",this.get("selectedColor"),!1)},_updateRecentColors:function(){var a=this.get("selectedColor"),b=this._colorPicker.recentlyUsedColors,
c=b.indexOf(a);-1!==c&&8>c&&b.splice(c,1);b.unshift(a);this._colorPicker.set("recentlyUsedColors",b);this.own(f.after(this._colorPicker.recentColorsWidgetNode,"_onCellClick",e.hitch(this,"_updateSelectedColor")))},_updateSelectedColor:function(){var a=this.get("selectedColor");this.set("selectedColor",this._colorPicker.value);var b=this.get("selectedColor");this._updateRecentColors();this._closeMenuOnColorSelection();this._triggerChangeEvent("selectedColor",a,b)},_validateStandardColors:function(a){var b=
a.length;if(3<b)throw Error("StandardColors can consist of maximum 3 rows of colors");for(var c=0;c<b;c++)for(var d=a[c],e=0;e<d.length;e++){if("hex"!==this._isRGBOrHex(d[e]))throw Error("Color type invalid. Only hex color values allowed!");this._validateColor(d[e])}},_validateRecentColors:function(a){var b=a.length;if(8<b)throw Error("RecentColors should be 1x8 array");for(var c=0;c<b;c++){var d=a[c];if("hex"!==this._isRGBOrHex(d))throw Error("Color type invalid. Only hex color values allowed!");
this._validateColor(d)}},_validateColor:function(a){var b=this._isRGBOrHex(a);if("invalid"===b)throw Error("'color' invalid value!");if("hex"===b){if(!/[0-9a-f]{6}/i.test(a))throw Error("'color' invalid value!");}else if("rgb"===b){var c;a=a.substring(4,a.length-1);a=a.split(",");if(3!==a.length)throw Error("'color' invalid value!");a.forEach(function(a){a=parseFloat(a);0!==a%1&&(c=!0)});if(c){if(this._checkRGBDouble(a))throw Error("'color' invalid value!");}else if(this._checkRGBInt(a))throw Error("''color' invalid value!");
}},_isRGBOrHex:function(a){return 0===a.indexOf("#")?"hex":0===a.indexOf("rgb")?"rgb":"invalid"},_checkRGBDouble:function(a){for(var b=0;3>b;b++){var c=parseFloat(a[b]);if(0>c||1<c)return!0}},_checkRGBInt:function(a){for(var b=0;3>b;b++){var c=parseInt(a[b]);if(0>c||255<c)return!0}}})})},"mw-colorpicker/ColorPicker":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./ColorPalette ./ColorSpinner ./MColor dojo/text!./templates/ColorPicker.html dojo/i18n!./l10n/nls/ColorPickerResources".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h([d,c,b],{value:"#ff0000",showRecentColors:!0,showPreview:!0,showCustomPicker:!0,recentlyUsedColors:[],standardColors:[],_parsedStandardColors:"",_previewTitle:q.preview,templateString:m,baseClass:"mwColorPicker",constructor:function(){this._set("recentlyUsedColors","#ff0000 #ff00ff #ffff00 #00ff00 #ffffff #00ffff #0000ff #000000".split(" "));this._set("standardColors",l.getStandardLightThemeColors());this.inherited(arguments)},postMixInProperties:function(){this._set("_parsedStandardColors",
JSON.stringify(this.get("standardColors")));this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.paletteNode.set("onChange",f.hitch(this,this._updateWidgetValues,!1,!0,!0,!0));this.spinnerNode.set("onChange",f.hitch(this,this._updateWidgetValues,!0,!1,!0,!0))},_setValueAttr:function(a,b){this._updateWidgetValues(!0,!0,!0,b,a)},_updateWidgetValues:function(a,b,c,d,e){var f=this.get("value");this._set("value",e);this._setPreviewColor(e);a&&this.paletteNode.set("value",e,!1);
b&&this.spinnerNode.set("value",e,!1);c&&this.recentColorsWidgetNode&&this.recentColorsWidgetNode.set("value",e,!1);(d||void 0===d)&&this.emit("change",{mwEventData:{propertyName:"value",oldValue:f,newValue:this.get("value")}})},_setPreviewColor:function(a){e.set(this.previewColorNode,"background",a)},_updateRecentColorsWidget:function(){this.recentColorsWidgetNode&&(this.recentColorsWidgetNode.destroy(),g.empty(this.recentColorsNode));this.recentColorsWidgetNode=new a({palette:[this.recentlyUsedColors.slice(0,
4),this.recentlyUsedColors.slice(4,8)],title:q.recentColors,value:this.value});this.recentColorsWidgetNode.set("onChange",f.hitch(this,this._updateWidgetValues,!0,!0,!1,!0));this.recentColorsWidgetNode.placeAt(this.recentColorsNode).startup()},_setRecentlyUsedColorsAttr:function(a){this._set("recentlyUsedColors",a);this._updateRecentColorsWidget()},_setShowRecentColorsAttr:function(a){this._set("showRecentColors",a);!1===a?(e.set(this.recentColorsNode,"display","none"),e.set(this.previewNode,"padding-left",
"10px"),e.set(this.previewColorNode,"width","202px")):(e.set(this.recentColorsNode,"display",""),e.set(this.previewNode,"padding-left",""),e.set(this.previewColorNode,"width",""))},_setShowPreviewAttr:function(a){this._set("showPreview",a);!1===a?e.set(this.previewNode,"display","none"):e.set(this.previewNode,"display","")},_setShowCustomPickerAttr:function(a){this._set("showCustomPicker",a);!1===a?e.set(this.spinnerNode.domNode,"display","none"):e.set(this.spinnerNode.domNode,"display","")}})})},
"mw-colorpicker/ColorPalette":function(){define("dojo/_base/declare dojo/dom-construct dojo/string dojo/dom-attr dijit/_PaletteMixin dijit/_TemplatedMixin dijit/_WidgetBase ./MColor dojo/text!./templates/ColorPalette.html dojo/text!./templates/ColorPaletteSwatch.html dojo/i18n!./l10n/nls/ColorPickerResources".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){var q=h([b,c,d],{palette:[],title:m.standardColors,_setTitleAttr:{node:"titleNode",type:"innerText"},baseClass:"mwColorPalette",templateString:k,constructor:function(){this._set("palette",
a.getStandardLightThemeColors());this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.dyeClass=q._Color;this._preparePalette(this.palette,{})}});q._Color=h([a],{template:l,getValue:function(){return this.toHex()},fillCell:function(a){var b=g.substitute(this.template,{color:this.toHex(),title:this.toMATLABFriendlyName()});e.set(a,"title",this.toMATLABFriendlyName());f.place(b,a)}});return q})},"dijit/_PaletteMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on ./_CssStateMixin ./a11yclick ./focus ./typematic".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h("dijit._PaletteMixin",a,{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(a){return new ("string"==typeof this.dyeClass?c.getObject(this.dyeClass):this.dyeClass)(a)},_preparePalette:function(a,f){this._cells=[];var g=this._blankGif;this.own(b(this.gridNode,k,c.hitch(this,"_onCellClick")));for(var h=0;h<a.length;h++)for(var l=e.create("tr",{tabIndex:"-1",role:"row"},
this.gridNode),t=0;t<a[h].length;t++){var u=a[h][t];if(u){var v=this._dyeFactory(u,h,t,f[u]),u=e.create("td",{"class":this.cellClass,tabIndex:"-1",title:f[u],role:"gridcell"},l);v.fillCell(u,g);u.idx=this._cells.length;this._cells.push({node:u,dye:v})}}this._xDim=a[0].length;this._yDim=a.length;var w={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},x;for(x in w)this.own(m.addKeyListener(this.domNode,{keyCode:d[x],ctrlKey:!1,altKey:!1,
shiftKey:!1},this,function(){var a=w[x];return function(b){this._navigateByKey(a,b)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){l.focus(this._currentFocus)},_onCellClick:function(a){for(var b=a.target;"TD"!=b.tagName;){if(!b.parentNode||b==this.gridNode)return;b=b.parentNode}var c=this._getDye(b).getValue();this._setCurrent(b);l.focus(b);this._setValueAttr(c,!0);a.stopPropagation();a.preventDefault()},
_setCurrent:function(a){"_currentFocus"in this&&f.set(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&f.set(a,"tabIndex",this.tabIndex)},_setValueAttr:function(a,b){0<=this._selectedCell&&g.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");this._selectedCell=-1;if(a)for(var c=0;c<this._cells.length;c++)if(a==this._cells[c].dye.getValue()){this._selectedCell=c;g.add(this._cells[c].node,this.cellClass+"Selected");break}this._set("value",0<=this._selectedCell?a:null);
if(b||void 0===b)this.onChange(a)},onChange:function(){},_navigateByKey:function(a,b){if(-1!=b){var d=this._currentFocus.idx+a;d<this._cells.length&&-1<d&&(d=this._cells[d].node,this._setCurrent(d),this.defer(c.hitch(l,"focus",d)))}},_getDye:function(a){return this._cells[a.idx].dye}})})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(h,f,g,e,d,c){var b=c.typematic={_fireEventAndReload:function(){this._timer=
null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(g.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,c,d,e,f,h,r){if(e!=this._obj){this.stop();this._initialDelay=h||500;this._subsequentDelay=f||0.9;this._minDelay=r||10;this._obj=e;this._node=c;this._count=
this._currentTimeout=-1;this._callback=g.hitch(b,d);this._evt={faux:!0};for(var s in a)"layerX"!=s&&"layerY"!=s&&(b=a[s],"function"!=typeof b&&"undefined"!=typeof b&&(this._evt[s]=b));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(a,c,d,m,q,n,p){var r="keyCode"in c?"keyCode":"charCode"in c?"charCode":"charOrCode",s=[e(a,"keyCode"in c?"keydown":"charCode"in
c?"keypress":f._keypress,g.hitch(this,function(e){e[r]==c[r]&&(void 0===c.ctrlKey||c.ctrlKey==e.ctrlKey)&&(void 0===c.altKey||c.altKey==e.altKey)&&(void 0===c.metaKey||c.metaKey==(e.metaKey||!1))&&(void 0===c.shiftKey||c.shiftKey==e.shiftKey)?(e.stopPropagation(),e.preventDefault(),b.trigger(e,d,a,m,c,q,n,p)):b._obj==c&&b.stop()})),e(a,"keyup",g.hitch(this,function(){b._obj==c&&b.stop()}))];return{remove:function(){h.forEach(s,function(a){a.remove()})}}},addMouseListener:function(a,c,f,m,q,n){var p=
[e(a,"mousedown",g.hitch(this,function(d){d.preventDefault();b.trigger(d,c,a,f,a,m,q,n)})),e(a,"mouseup",g.hitch(this,function(a){this._obj&&a.preventDefault();b.stop()})),e(a,"mouseout",g.hitch(this,function(a){this._obj&&a.preventDefault();b.stop()})),e(a,"dblclick",g.hitch(this,function(e){e.preventDefault();9>d("ie")&&(b.trigger(e,c,a,f,a,m,q,n),setTimeout(g.hitch(this,b.stop),50))}))];return{remove:function(){h.forEach(p,function(a){a.remove()})}}},addListener:function(a,b,c,d,e,f,g,r){var s=
[this.addKeyListener(b,c,d,e,f,g,r),this.addMouseListener(a,d,e,f,g,r)];return{remove:function(){h.forEach(s,function(a){a.remove()})}}}};return b})},"mw-colorpicker/MColor":function(){define(["dojo/_base/declare","dojo/_base/Color"],function(h,f){var g=h([f],{toDoubleRGBString:function(){var e=this.toDoubleRGB();return"["+e[0].toFixed(2)+" "+e[1].toFixed(2)+" "+e[2].toFixed(2)+"]"},toMATLABFriendlyName:function(){var e=g.namedMATLABColors[this.toHex().toLowerCase()];return e?this.toDoubleRGBString()+
" - "+e:this.toDoubleRGBString()},toDoubleRGB:function(){return[this.r/255,this.g/255,this.b/255]}});g.fromDoubleRGB=function(e){e=e.map(function(d){return Math.round(255*d)});return new g(e)};g.namedMATLABColors={"#ff0000":"red (r)","#ff00ff":"magenta (m)","#ffff00":"yellow (y)","#00ff00":"green (g)","#00ffff":"cyan (c)","#0000ff":"blue (b)","#000000":"black (k)","#ffffff":"white (w)"};g.getStandardLightThemeColors=function(){return["#0073bd #d9541a #edb021 #7d2e8f #78ab30 #4dbfed #a3142e".split(" "),
"#ffffff #f0f0f0 #e6e6e6 #cccccc #a6a6a6 #808080 #262626".split(" "),"#ff0000 #ff00ff #ffff00 #00ff00 #00ffff #0000ff #000000".split(" ")].slice()};g.getStandardDarkThemeColors=function(){return["#ffff11 #139fff #ff6929 #64d413 #b746ff #0fffff #ff13a6".split(" "),"#ffffff #f0f0f0 #e6e6e6 #cccccc #a6a6a6 #808080 #262626".split(" "),"#ff0000 #ff00ff #ffff00 #00ff00 #00ffff #0000ff #000000".split(" ")].slice()};return g})},"mw-colorpicker/ColorSpinner":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/NumberSpinner dijit/form/ValidationTextBox ./MColor ./ToggleButtonGroup dojo/text!./templates/ColorSpinner.html dojo/i18n!./l10n/nls/ColorPickerResources".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){var p={value:0,smallDelta:0.01,intermediateChanges:!0,required:!0,style:"width: 55px; height: 20px; font-size: 13px; text-align: center",selectOnClick:!0,constraints:{min:0,max:1,strict:!0,places:"0,2"}},r={value:0,smallDelta:1,intermediateChanges:!0,required:!0,style:"width: 55px; height: 20px; font-size: 13px; text-align: center",selectOnClick:!0,constraints:{min:0,max:255,fractional:!1,strict:!0,places:"0"}},s={pattern:"^#[0-9a-f]{6}",required:!0,selectOnClick:!0,
intermediateChanges:!0,style:"width: 120px; height: 20px; font-size: 13px;"};return h([d,c,b],{onChange:function(){},value:"#000000",baseClass:"mwColorSpinner",templateString:q,_redTitle:n.redTitle,_greenTitle:n.greenTitle,_blueTitle:n.blueTitle,_hexTitle:n.hexTitle,postCreate:function(){this.inherited(arguments);this.redDoubleSpinner.set(p);this.greenDoubleSpinner.set(p);this.blueDoubleSpinner.set(p);this.redDoubleSpinner.set("onChange",f.hitch(this,this._doubleSpinnerChange));this.greenDoubleSpinner.set("onChange",
f.hitch(this,this._doubleSpinnerChange));this.blueDoubleSpinner.set("onChange",f.hitch(this,this._doubleSpinnerChange));this.redIntSpinner.set(r);this.greenIntSpinner.set(r);this.blueIntSpinner.set(r);this.redIntSpinner.set("onChange",f.hitch(this,this._intSpinnerChange));this.greenIntSpinner.set("onChange",f.hitch(this,this._intSpinnerChange));this.blueIntSpinner.set("onChange",f.hitch(this,this._intSpinnerChange));this.hexSpinner.set(s);this.hexSpinner.set("onChange",f.hitch(this,this._hexSpinnerChange));
this.toggleButton.onChange=f.hitch(this,this._handleToggleChange);this.toggleButton.set("buttonText",["[0-1]","[0-255]",n.hexTitle]);this.toggleButton.set("value",2);this.toggleButton.set("value",1);this._updateSpinnerValues(new l(this.value),!0,!0,!0,!1)},_setValueAttr:function(a,b){var c=new l(a);this._updateSpinnerValues(c,!0,!0,!0,b)},_updateSpinnerValues:function(a,b,c,d,e){this._set("value",a.toHex());b&&(b=a.toDoubleRGB(),this._setSpinnerValueWithoutFiringEvent(this.redDoubleSpinner,b[0]),
this._setSpinnerValueWithoutFiringEvent(this.greenDoubleSpinner,b[1]),this._setSpinnerValueWithoutFiringEvent(this.blueDoubleSpinner,b[2]));c&&(c=a.toRgb(),this._setSpinnerValueWithoutFiringEvent(this.redIntSpinner,c[0]),this._setSpinnerValueWithoutFiringEvent(this.greenIntSpinner,c[1]),this._setSpinnerValueWithoutFiringEvent(this.blueIntSpinner,c[2]));d&&this._setSpinnerValueWithoutFiringEvent(this.hexSpinner,a.toHex());if(e||void 0===e)this.onChange(this.get("value"))},_isSpinnerValid:function(a,
b,c){if(!0===a._beingDestroyed||!0===b._beingDestroyed||!0===c._beingDestroyed||!0===a._destroyed||!0===b._destroyed||!0===c._destroyed||!a.isValid()||!b.isValid()||!c.isValid())return!1;a=a.get("value");b=b.get("value");c=c.get("value");return isNaN(a)||void 0===a||isNaN(b)||void 0===b||isNaN(c)||void 0===c?!1:[a,b,c]},_doubleSpinnerChange:function(){var a=this._isSpinnerValid(this.redDoubleSpinner,this.greenDoubleSpinner,this.blueDoubleSpinner);!1!==a&&(a=l.fromDoubleRGB(a),this._updateSpinnerValues(a,
!1,!0,!0,!0))},_intSpinnerChange:function(){var a=this._isSpinnerValid(this.redIntSpinner,this.greenIntSpinner,this.blueIntSpinner);if(!1!==a){var b=new l;b.setColor(a);this._updateSpinnerValues(b,!0,!1,!0,!0)}},_hexSpinnerChange:function(a){this.hexSpinner.isValid()&&(a=new l(a),this._updateSpinnerValues(a,!0,!0,!1,!0))},_handleToggleChange:function(a){var b=[this.doubleSpinners,this.intSpinners,this.hexSpinners];b.forEach(function(a){e.set(a,"display","none")});e.set(b[a-1],"display","")},_setSpinnerValueWithoutFiringEvent:function(a,
b){a.set("intermediateChanges",!1);a.set("value",b,!1);a.set("intermediateChanges",!0)}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(h,f,g,e){return h("dijit.form.NumberSpinner",[g,e.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(d,c){var b=this.constraints,a=isNaN(d),e=!isNaN(b.max),f=!isNaN(b.min);a&&0!=c&&(d=0<c?f?b.min:e?b.max:0:e?this.constraints.max:f?b.min:0);var g=d+c;if(a||isNaN(g))return d;
e&&g>b.max&&(g=b.max);f&&g<b.min&&(g=b.min);return g},_onKeyDown:function(d){if(!this.disabled&&!this.readOnly&&(d.keyCode==f.HOME||d.keyCode==f.END)&&!d.ctrlKey&&(!d.altKey&&!d.metaKey)&&"undefined"!=typeof this.get("value")){var c=this.constraints[d.keyCode==f.HOME?"min":"max"];"number"==typeof c&&this._setValueAttr(c,!1);d.stopPropagation();d.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h("dijit.form._Spinner",a,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:k,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(a,b,c){!this.disabled&&!this.readOnly&&(this._setValueAttr(this.adjust(this.get("value"),b*c),!1),l.selectInputText(this.textbox,this.textbox.value.length))},
_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,c){var d=this.smallDelta;b==this.textbox&&(b=c.keyCode,d=b==f.PAGE_UP||b==f.PAGE_DOWN?this.largeDelta:this.smallDelta,b=b==f.UP_ARROW||b==f.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==a?this._arrowReleased(b):this._arrowPressed(b,b==this.upArrowNode?1:-1,d)},_wheelTimer:null,_mouseWheeled:function(a){if(this.focused){a.stopPropagation();a.preventDefault();var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?
1:-1);a=a.detail?-1*a.detail:b;if(0!==a){var c=this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(c,a,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(c)},50)}}},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",
this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,b){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,d.wheel,g.hitch(this,"_mouseWheeled")),b.addListener(this.upArrowNode,this.textbox,{keyCode:f.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),b.addListener(this.downArrowNode,
this.textbox,{keyCode:f.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),b.addListener(this.upArrowNode,this.textbox,{keyCode:f.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),b.addListener(this.downArrowNode,this.textbox,{keyCode:f.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",
this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"mw-colorpicker/ToggleButtonGroup":function(){define("dojo/_base/declare dojo/_base/lang dojo/string dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/ToggleButton".split(" "),function(h,f,g,e,d,c,b){return h([e,d,c],{onChange:function(){},value:1,buttonText:["Option1","Option2"],baseClass:"mwToggleButtonGroup",postMixInProperties:function(){this.inherited(arguments);var a="";this.buttonText.forEach(function(b,
c,d){var e="";0===c?e="firstToggle":c===d.length-1&&(e="lastToggle");a+=g.substitute('\x3ctd\x3e\x3cbutton class\x3d"${className}" data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"${attachPoint}" data-test-id\x3d"${dataTestId}"\x3e${buttonText}\x3c/button\x3e\x3c/td\x3e',{className:e,attachPoint:"button"+(c+1),buttonText:b,dataTestId:"toggleGroup_button"+(c+1)})});this.templateString='\x3ctable class\x3d"${baseClass}"\x3e\x3ctr class\x3d"${baseClass}Buttons"\x3e'+a+"\x3c/tr\x3e\x3c/table\x3e"},
buildRendering:function(){this.inherited(arguments);this.buttonWidgets=[];this.buttonText.forEach(f.hitch(this,function(a,b,c){a=this["button"+(b+1)];this.buttonWidgets.push(a);a.set("onChange",f.hitch(this,this._handleToggleChange,b+1))}))},postCreate:function(){this.inherited(arguments)},_setValueAttr:function(a,b){this.buttonWidgets.forEach(function(a){a.set("checked",!1,!1)});this.buttonWidgets[a-1].set("checked",!0,!1);if(this.get("value")!==a&&(this._set("value",a),b||void 0===b))this.onChange(this.get("value"))},
_handleToggleChange:function(a){this.set("value",a)},_setButtonTextAttr:function(a){a.forEach(f.hitch(this,function(a,b){this.buttonWidgets[b].set("label",a)}))}})})},"MW/toolstrip/form/GridPickerButton":function(){define("dijit/focus dojo/_base/declare dojo/_base/lang dojo/on dojo/Evented dojo/keys MW/GridPicker MW/toolstrip/form/DropDownButton mw-menu/Menu mw-dom-utils/domUtils".split(" "),function(h,f,g,e,d,c,b,a,k,l){return f([a,d],{baseClass:"mwWidget mwDropDownButton mwGridPickerButton",visualFamily:"toolstrip",
maxRows:5,maxColumns:5,occupancy:0,fillOrder:"rowMajor",constructor:function(a){a=a||{};this.maxRows=a.maxRows?a.maxRows:this.maxRows;this.maxColumns=a.maxColumns?a.maxColumns:this.maxColumns;this.occupancy=a.occupancy?a.occupancy:this.occupancy;this.fillOrder=a.fillOrder?a.fillOrder:this.fillOrder;this._gridPicker=new b({maxRows:this.maxRows,maxColumns:this.maxColumns,occupancy:this.occupancy,fillOrder:this.fillOrder});this._gridPickerMenu=new k;this.selection={};this.own(this._gridPicker);this.own(this._gridPickerMenu)},
buildRendering:function(){this.inherited(arguments);this._gridPickerMenu.addChild(this._gridPicker);this.set("menu",this._gridPickerMenu)},_setSelectionAttr:function(a){0!==Object.keys(a).length&&this._gridPicker.getLastSelectedRowCount()!==a.row&&this._gridPicker.getLastSelectedColumnCount()!==a.column&&this._gridPicker.highlightCells(a.row-1,a.column-1);this._set("selection",a)},_setMaxRowsAttr:function(a){if(this._created)throw Error("Max Rows can only be set at construction time");this._set("maxRows",
a)},_setMaxColumnsAttr:function(a){if(this._created)throw Error("Max Columns can only be set at construction time");this._set("maxColumns",a)},_setOccupancyAttr:function(a){this._gridPicker.set("occupancy",a);this._set("occupancy",a)},_setFillOrderAttr:function(a){this._gridPicker.set("fillOrder",a);this._set("fillOrder",a)},postCreate:function(){this.inherited(arguments);this._gridPicker.on(b.SELECTION_CHANGED,this._handleGridSelection.bind(this));this.menu.on("keydown",this._handleMenuKeyDown.bind(this));
this.menu.on("open",this._handleMenuCloseOnFocusOut.bind(this))},_handleGridSelection:function(a){var b={};b.row=a.rows;b.column=a.columns;this.set("selection",b);this.closeMenu()},_handleMenuCloseOnFocusOut:function(){var a=h.watch("curNode",g.hitch(this,function(b,c,d){if(null===d||!l.findParentNode(d,"mwMenu"))a.unwatch(),this.closeMenu()}));this.own(a)},_handleMenuKeyDown:function(a){a.keyCode===c.TAB&&a.stopPropagation();this._gridPicker.navigate(a)}})})},"MW/GridPicker":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom dojo/Evented dojo/keys dojo/on dojo/touch dijit/_WidgetBase".split(" "),
function(h,f,g,e,d,c,b,a,k){h=h([k,d],{maxRows:5,maxColumns:5,occupancy:0,fillOrder:"rowMajor",_highlightedRows:0,_highlightedColumns:0,_lastSelectedRows:0,_lastSelectedColumns:0,buildRendering:function(){this.inherited(arguments);this.domNode.classList.add("gridPicker");this.domNode.setAttribute("tabindex",0);this._createGrid()},postCreate:function(){this.inherited(arguments);this.domNode.addEventListener("mousemove",this._highlightSelection.bind(this),!0);this.domNode.addEventListener("click",this._commitSelection.bind(this));
this.domNode.addEventListener("mouseleave",this._clearHighlighting.bind(this))},getLastSelectedRowCount:function(){return this._lastSelectedRows},getLastSelectedColumnCount:function(){return this._lastSelectedColumns},navigate:function(a){var b=!1,d=!1;0!==this._highlightedRows&&0!==this._highlightedColumns&&(b=!0);switch(a.keyCode){case c.DOWN_ARROW:b?this.highlightCells(this._highlightedRows,this._highlightedColumns-1):this.highlightCells(0,0);d=!0;break;case c.UP_ARROW:b&&this.highlightCells(this._highlightedRows-
2,this._highlightedColumns-1);d=!0;break;case c.RIGHT_ARROW:b&&this.highlightCells(this._highlightedRows-1,this._highlightedColumns);d=!0;break;case c.LEFT_ARROW:b&&this.highlightCells(this._highlightedRows-1,this._highlightedColumns-2);d=!0;break;case c.ENTER:this._commitSelection();this._clearHighlighting();d=!0;break;case c.TAB:b?this._highlightedColumns<this.maxColumns?this.highlightCells(this._highlightedRows-1,this._highlightedColumns):this._highlightedRows<this.maxRows&&this.highlightCells(this._highlightedRows,
0):this.highlightCells(0,0);d=!0;break;case c.ESCAPE:this._clearHighlighting()}return d},highlightCells:function(a,b){var c,d,e=0;if(void 0!==a&&void 0!==b)if(this._highlightedRows=a+1,this._highlightedColumns=b+1,"rowMajor"===this.fillOrder)for(c=0;c<this.maxRows;c++)for(d=0;d<this.maxColumns;d++)c<=a&&d<=b?(this._cells[c][d].classList.add("selected"),e<this.occupancy?this._cells[c][d].classList.add("occupied"):this._cells[c][d].classList.remove("occupied"),e++):this._cells[c][d].classList.remove("selected");
else for(d=0;d<this.maxColumns;d++)for(c=0;c<this.maxRows;c++)c<=a&&d<=b?(this._cells[c][d].classList.add("selected"),e<this.occupancy?this._cells[c][d].classList.add("occupied"):this._cells[c][d].classList.remove("occupied"),e++):this._cells[c][d].classList.remove("selected")},_createGrid:function(){var a,b,c;this._cells=[];this._cells.length=this.maxRows;for(a=0;a<this.maxRows;a++){this._cells[a]=[];this._cells[a].length=this.maxColumns;for(b=0;b<this.maxColumns;b++)c=document.createElement("button"),
c.setAttribute("id",this.id+"Cell"+a+"_"+b),c.setAttribute("tabindex","0"),this.domNode.appendChild(c),c.classList.add("cell"),c.row=a,c.col=b,this._cells[a][b]=c;a<this.maxRows&&(b=document.createElement("br"),this.domNode.appendChild(b))}},_highlightSelection:function(a){this.highlightCells(a.target.row,a.target.col)},_clearHighlighting:function(){var a,b;for(a=0;a<this._highlightedRows;a++)for(b=0;b<this._highlightedColumns;b++)this._cells[a][b].classList.remove("selected");this._highlightedColumns=
this._highlightedRows=0},_commitSelection:function(){this._lastSelectedRows=this._highlightedRows;this._lastSelectedColumns=this._highlightedColumns;this.emit("gridSelectionChanged",{rows:this._lastSelectedRows,columns:this._lastSelectedColumns})},startup:function(){this.inherited(arguments)},destroy:function(){this.domNode.removeEventListener("mousemove",this._highlightSelection.bind(this),!0);this.domNode.removeEventListener("click",this._commitSelection.bind(this));this.domNode.removeEventListener("mouseleave",
this._clearHighlighting.bind(this));this.inherited(arguments)}});h.ROW_MAJOR="rowMajor";h.COLUMN_MAJOR="columnMajor";h.SELECTION_CHANGED="gridSelectionChanged";return h})},"MW/toolstrip/qab/QABPushButton":function(){define(["dojo/_base/declare","../form/PushButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,f,g,e){return h([f,g,e],{})})},"MW/toolstrip/mixins/property/ShowTextMixin":function(){define(["dojo/_base/declare","MW/toolstrip/mixins/property/TextMixin",
"mw-mixins/property/DescriptionMixin","mw-mixins/property/ShortcutMixin"],function(h,f,g,e){h=h(null,{showText:!0,_setShowTextAttr:function(d){if("boolean"!==typeof d)throw Error("'showText' property expects a boolean!");this._set("showText",d);this._updateTooltip(d)},_setTextAttr:function(){this.inherited(arguments);this._updateTooltip(this.get("showText"))},_setDescriptionAttr:function(){this.inherited(arguments);this._updateTooltip(this.get("showText"))},_setShortcutAttr:function(){this.inherited(arguments);
this._updateTooltip(this.get("showText"))},_updateTooltip:function(d){var c=this.get("text");c&&(c=c.replace(/\n/g," "));d=d?this.get("description"):c;this.get("shortcut")&&(d=d?d+" ("+this._getPlatformizedShortcut(this.get("shortcut"))+")":this._getPlatformizedShortcut(this.get("shortcut")));this.domNode.setAttribute("title",d);this._updateTextInDOM(this.get("text"))},_getTextForDOM:function(){return this.get("showText")?this.inherited(arguments):""}});h._dependencies=[{mixin:f,orderDependent:!0},
{mixin:g,orderDependent:!0},{mixin:e,orderDependent:!0}];return h})},"MW/toolstrip/qab/QABDropDownButton":function(){define(["dojo/_base/declare","../form/DropDownButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,f,g,e){return h([f,g,e],{})})},"MW/toolstrip/qab/QABSplitButton":function(){define(["dojo/_base/declare","../form/SplitButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,f,g,e){return h([f,g,e],{})})},
"MW/toolstrip/qab/QABToggleButton":function(){define(["dojo/_base/declare","../form/ToggleButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,f,g,e){return h([f,g,e],{})})},"MW/toolstrip/qab/QABToggleSplitButton":function(){define(["dojo/_base/declare","../form/ToggleSplitButton","../mixins/property/QuickAccessIconMixin","../mixins/property/ShowTextMixin"],function(h,f,g,e){return h([f,g,e],{})})},"MW/toolstrip/form/ToggleSplitButton":function(){define("dojo/_base/declare mw-form/ToggleSplitButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/SizeMixin MW/toolstrip/form/mixins/property/DropDownButtonSizeMixin MW/toolstrip/form/mixins/property/DropDownButtonTextMixin MW/toolstrip/mixins/property/OrientationMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/MenuMixin mw-mixins/ResizeMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){return h(u.validate([f,g,e,c,b,a,k,l,m,d,q,n,t,p,r,s]),{visualFamily:"toolstrip",minWidth:38,resize:function(){this.inherited(arguments);if("Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&-1<navigator.appVersion.indexOf("Edge"))this._updateTextNodeWidth(),this.own(this.watch("text",this._updateTextNodeWidth))},_updateTextNodeWidth:function(){this.textNode&&(!this.textNode.classList.contains("mwEmptyNode")&&this.domNode.classList.contains("mwHorizontalOrientation"))&&
setTimeout(function(){this.textNode&&(this.textNode.style.width="",this.textNode.style.width=Math.ceil(parseFloat(window.getComputedStyle(this.textNode,null).width))+"px")}.bind(this),0)}})})},"mw-form/ToggleSplitButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/ArrowModeMixin mw-mixins/property/SizeMixin mw-mixins/property/TabIndexNodesMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-mixins/AccessibilityClickMixin mw-mixins/PreventSelectionMixin mw-form/mixins/property/DropDownButtonIconAlignmentMixin mw-form/mixins/property/DropDownButtonArrowModeMixin mw-form/mixins/property/DropDownButtonTextMixin mw-form/mixins/property/DropDownButtonSizeMixin mw-form/mixins/property/DropDownNeverDisabledMixin mw-form/mixins/SplitButtonToggleSplitButtonMenuMixin mw-form/mixins/SplitButtonToggleSplitButtonFocusMixin mw-mixins/mixinDependencyValidator dojo/text!mw-form/templates/DropDownButton.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O){return h(Q.validate([f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P]),{baseClass:"mwWidget mwToggleSplitButton",templateString:O,cssStateNodes:{buttonNode:"mwButtonNode",dropDownNode:"mwDropDownNode"},postCreate:function(){this.set("checkableNode",this.buttonNode);this.inherited(arguments)}})})},"MW/toolstrip/widgets/qabcontrols/QABFloatingPaneDock":function(){define("dojo/_base/declare dojo/topic dijit/registry MW/toolstrip/constants/TypeConstants MW/toolstrip/hashes/PeerNodeWidgetPropertiesHash MW/toolstrip/menu/PopupList MW/toolstrip/menu/ListItem MW/toolstrip/qab/QABDropDownButton".split(" "),
function(h,f,g,e,d,c,b,a){return h([a],{postCreate:function(){this.text=this[d[e.QAB_FLOATING_PANE_DOCK].text];this.inherited(arguments);f.publish("/floatingPaneDockUpdate",{newWidget:this});g.byId("dockDropDownMenu")?this._popupList=g.byId("dockDropDownMenu"):this._popupList=new c({id:"dockDropDownMenu"});this.set("menuId","dockDropDownMenu")},addItem:function(a){var c=new b({guiId:a.id,text:a.title});a.watch("title",function(){c.set("text",a.title)});c.on("click",function(){a.show();a.bringToTop()});
this._popupList.addChild(c);this._toggleSelectDisplayAndReset()},_findMenuItemForGuiId:function(a){var b=null;this._popupList.getChildren().some(function(c){b=c;return c.guiId===a});return b},removeItem:function(a){a=this._findMenuItemForGuiId(a.id);this._popupList.removeChild(a);a.destroyRecursive();this._destroyed||this._toggleSelectDisplayAndReset()},startup:function(){this.inherited(arguments);this._toggleSelectDisplayAndReset()},_toggleSelectDisplayAndReset:function(){0<this._popupList.getChildren().length?
this.set("disabled",!1):this.set("disabled",!0)},_positionDock:function(){}})})},"MW/toolstrip/hashes/PeerNodeWidgetPropertiesHash":function(){define(["dojo/_base/lang","../constants/TypeConstants","MW/toolstrip/hashes/listOfNewWidgets"],function(h,f,g){var e={},d,c,b,a;c={enabled:"disabled"};d=h.mixin({text:"label"},c);b=h.mixin({text:"label",showText:"showLabel",shortcut:"accelKey"},c);a=h.mixin({popupId:"menuId",hasDynamicPopup:"hasDynamicMenu"},c);e[f.PUSH_BUTTON]=-1===g.indexOf(f.PUSH_BUTTON)?
d:c;e[f.TOGGLE_BUTTON]=h.mixin({selected:"checked"},-1===g.indexOf(f.TOGGLE_BUTTON)?d:c,-1===g.indexOf(f.TOGGLE_BUTTON)?{}:{buttonGroupName:"buttonGroup"});e[f.TOGGLE_SPLIT_BUTTON]=h.mixin({selected:"checked"},-1===g.indexOf(f.TOGGLE_SPLIT_BUTTON)?c:a,-1===g.indexOf(f.TOGGLE_SPLIT_BUTTON)?{}:{buttonGroupName:"buttonGroup"},-1===g.indexOf(f.TOGGLE_SPLIT_BUTTON)?{}:{dropDownAlwaysEnabled:"dropDownNeverDisabled"});e[f.DROP_DOWN_BUTTON]=-1===g.indexOf(f.DROP_DOWN_BUTTON)?d:a;e[f.SPLIT_BUTTON]=h.mixin(-1===
g.indexOf(f.SPLIT_BUTTON)?d:a,-1===g.indexOf(f.SPLIT_BUTTON)?{}:{dropDownAlwaysEnabled:"dropDownNeverDisabled"});e[f.COLOR_PICKER_BUTTON]=c;e[f.GRID_PICKER_BUTTON]=c;e[f.SPLIT_BUTTON_WITH_DISABLE_OVERRIDE]=d;e[f.LIST_ITEM]=-1===g.indexOf(f.LIST_ITEM)?b:c;e[f.LIST_ITEM_WITH_CHECKBOX]=h.mixin({selected:"checked"},-1===g.indexOf(f.LIST_ITEM_WITH_CHECKBOX)?b:c,-1===g.indexOf(f.LIST_ITEM_WITH_CHECKBOX)?{}:{closePopupOnClick:"closeMenuOnClick"});e[f.LIST_ITEM_WITH_RADIO_BUTTON]=h.mixin({selected:"checked"},
-1===g.indexOf(f.LIST_ITEM_WITH_RADIO_BUTTON)?b:c,-1===g.indexOf(f.LIST_ITEM_WITH_RADIO_BUTTON)?{}:{closePopupOnClick:"closeMenuOnClick",buttonGroupName:"buttonGroup"});e[f.LIST_ITEM_WITH_TEXTFIELD]=h.mixin(-1===g.indexOf(f.LIST_ITEM_WITH_TEXTFIELD)?{editable:"readOnly"}:{placeholderText:"placeholder"},{text:"value"},c);e[f.LIST_ITEM_WITH_POPUP]=-1===g.indexOf(f.LIST_ITEM_WITH_POPUP)?b:a;e[f.POPUP_LIST_HEADER]=h.mixin({title:-1===g.indexOf(f.POPUP_LIST_HEADER)?"label":"text"});e[f.SPINNER]=h.mixin({minorStepSize:-1===
g.indexOf(f.SPINNER)?"smallDelta":"step",majorStepSize:-1===g.indexOf(f.SPINNER)?"largeDelta":"step"},-1===g.indexOf(f.SPINNER)?{editable:"readOnly"}:{},c);e[f.TEXT_FIELD]=h.mixin({text:"value"},-1===g.indexOf(f.TEXT_FIELD)?{placeholderText:"placeHolder_asdfasdf",editable:"readOnly"}:{placeholderText:"placeholder"},c);e[f.TEXT_AREA]=h.mixin({text:"value"},-1===g.indexOf(f.TEXT_AREA)?{editable:"readOnly"}:{},c);e[f.RADIO_BUTTON]=h.mixin(-1===g.indexOf(f.RADIO_BUTTON)?{text:"label"}:{buttonGroupName:"buttonGroup"},
{selected:"checked"},c);e[f.LABEL]=h.mixin({},c);e[f.CHECK_BOX]=h.mixin(-1===g.indexOf(f.CHECK_BOX)?{text:"label"}:{},{selected:"checked"},c);e[f.COMBO_BOX]=h.mixin(-1===g.indexOf(f.COMBO_BOX)?{editable:"readOnly"}:{selectedItem:"value",placeholderText:"placeholder"},c);e[f.LIST]=h.mixin(-1===g.indexOf(f.LIST)?{}:{selectedItems:"value"},c);e[f.HORIZONTAL_SLIDER]=c;e[f.GALLERY]=c;e[f.GALLERY_ITEM]=c;e[f.TOGGLE_GALLERY_ITEM]=h.mixin({selected:"checked",buttonGroupName:"buttonGroup"},c);e[f.QAB_PUSH_BUTTON]=
e[f.PUSH_BUTTON];e[f.QAB_DROP_DOWN_BUTTON]=e[f.DROP_DOWN_BUTTON];e[f.QAB_FLOATING_PANE_DOCK]=d;e[f.QAB_SPLIT_BUTTON]=e[f.SPLIT_BUTTON];e[f.QAB_TOGGLE_BUTTON]=e[f.TOGGLE_BUTTON];e[f.QAB_TOGGLE_SPLIT_BUTTON]=e[f.TOGGLE_SPLIT_BUTTON];Object.keys(e).forEach(function(a){Object.keys(e[a]).forEach(function(b){e[a][e[a][b]]=b})});return e})},"MW/toolstrip/menu/PopupList":function(){define(["dojo/_base/declare","mw-menu/Menu","../mixins/property/TypeMixin","../mixins/ScrollbarMixin","mw-mixins/mixinDependencyValidator"],
function(h,f,g,e,d){return h(d.validate([f,g,e]),{visualFamily:"toolstrip",postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","temporary")}})})},"MW/toolstrip/menu/ListItem":function(){define("dojo/_base/declare mw-menu/MenuItem MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/UseQuickAccessIconMixin MW/toolstrip/mixins/property/QuickAccessIconMixin MW/toolstrip/mixins/property/RemovableMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(l.validate([f,g,e,d,c,b,a,k]),{visualFamily:"toolstrip",_setRemovableAttr:function(a){this.inherited(arguments);if(a){this.domNode.classList.add("removableTrue");this._removeNode=document.createElement("div");this._removeNode.classList.add("mwRemoveNode");var b=document.createElement("div");b.classList.add("clear_all");this._removeNode.appendChild(b);this.domNode.appendChild(this._removeNode);this._handleKeyupForRemove=function(a){46===a.keyCode&&(this._emitRemoveEvent(),
a.stopPropagation())}.bind(this);this.domNode.addEventListener("keyup",this._handleKeyupForRemove);this._removeNode.addEventListener("click",this._handleRemoveNodeClick.bind(this));this._removeNode.addEventListener("mouseup",this._handleRemoveNodeMouseup)}else this._removeNode&&(this.domNode.classList.remove("removableTrue"),this.domNode.removeChild(this._removeNode),this._removeNode=null,this.domNode.removeEventListener("keyup",this._handleKeyupForRemove));this._set("removable",a)},_handleRemoveNodeClick:function(a){this._emitRemoveEvent();
a.stopPropagation()},_handleRemoveNodeMouseup:function(a){a.stopPropagation()}})})},"MW/toolstrip/mixins/property/UseQuickAccessIconMixin":function(){define(["dojo/_base/declare","mw-mixins/property/IconMixin"],function(h,f){var g=h(null,{useQuickAccessIcon:!1,postCreate:function(){this.inherited(arguments);this.set("useQuickAccessIcon",this.get("useQuickAccessIcon"))},_setUseQuickAccessIconAttr:function(e){if("boolean"!==typeof e)throw Error("'useQuickAccessIcon' property expects a boolean!");this._set("useQuickAccessIcon",
e);e?this.set("iconProp","quickAccessIcon"):this.set("iconProp","icon")}});g._dependencies=[{mixin:f,orderDependent:!1}];return g})},"MW/toolstrip/menu/ListItemWithPopup":function(){define("dojo/_base/declare mw-menu/PopupMenuItem MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextOverrideMixin MW/toolstrip/mixins/property/MenuIdMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/UseQuickAccessIconMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(k.validate([f,g,e,d,c,b,a]),{visualFamily:"toolstrip"})})},"mw-menu/PopupMenuItem":function(){define("dojo/_base/declare dijit/focus dojo/on dojo/keys dojo/dom-geometry dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-menu/mixins/OnOpenMixin mw-menu/mixins/OnCloseMixin mw-mixins/property/TagMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/MenuMixin mw-mixins/property/HasDynamicMenuMixin mw-mixins/property/IconMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowIconMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/PopupMenuItem.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M,P,Q,O,I,E){return h(I.validate([b,a,k,l,m,q,n,p,r,s,t,u,M,v,w,x,B,A,D,F,H,L,N,Q,O,P]),{baseClass:"mwWidget mwSharedMenuItem mwPopupMenuItem",templateString:E,_focusSubMenuOnOpen:!1,menuOrientation:"horizontal",keyPressButtons:"right_arrow_a11y",postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",c.hitch(this,"_handleRightArrow")))},_setFocusSubMenuOnOpenAttr:function(a){if("boolean"!==typeof a)throw Error("'doFocus' argument expects a boolean value.");
this._set("_focusSubMenuOnOpen",a)},_emitClickEvent:function(){this.emit("click",{mwEventData:{value:this.get("text")},_dojo_click:!0})},focusLost:function(a){this.get("menu")&&(this.get("menu").isDescendant&&!this.get("menu").isDescendant(a,this.get("menu")))&&(this.get("menu")._closeEventData={mwEventData:{gainedFocusWidget:a}},this.closeMenu(!1))},focus:function(){this.inherited(arguments);this.get("disabled")||this.openMenu()},_handleRightArrow:function(a){a.keyCode===e.RIGHT_ARROW&&(this.isMenuOpen()?
this.get("menu").focusFirst():(this.set("_focusSubMenuOnOpen",!0),this.openMenu()))},_showMenu:function(){var a=this.get("menu");null!==a&&(!this._doNotOpen&&!this.isMenuOpen())&&(a._leftArrowListener=g(a.domNode,"keydown",c.hitch(a,this._handleLeftArrow)),a._menuCloseListener=g(a.domNode,"close",c.hitch(a,this._handleCloseMenu)),a._storeFocusOnOpen=a.get("_focusOnOpen"),a._storeOnOpen=a.onOpen,a._storeMatchMinWidthToInvokingWidget=a.get("_matchMinWidthToInvokingWidget"),a.set("_focusOnOpen",this.get("_focusSubMenuOnOpen")),
a.onOpen=this.onOpen,a._matchMinWidthToInvokingWidget=!1,a.domNode.classList.add("mwPopupMenuItemPopup"),this.inherited(arguments))},_handleCloseMenu:function(a){if(a&&a.mwEventData&&a.mwEventData.hasOwnProperty("gainedFocusWidget")){var b=this._invokingWidget.getParentWidget();a=a.mwEventData.gainedFocusWidget;!b.isInvokingWidget(a)&&!b.isDescendant(a,b)&&(this._leftArrowListener&&this._leftArrowListener.remove(),this._menuCloseListener&&this._menuCloseListener.remove(),delete this._leftArrowListener,
delete this._menuCloseListener,this._focusOnOpen=this._storeFocusOnOpen,this.onOpen=this._storeOnOpen,this._matchMinWidthToInvokingWidget=this._storeMatchMinWidthToInvokingWidget,this.domNode.classList.remove("mwPopupMenuItemPopup"),b._focusChange(a))}},_handleLeftArrow:function(a){a.keyCode===e.LEFT_ARROW&&(this._doNotOpen=!0,this._invokingWidget.focus(),this._doNotOpen=!1)},onOpen:function(){this.inherited(arguments);this._emitOpenEvent();this._updateLayout();d.position(this.domNode).x>d.position(this._invokingWidget.domNode).x?
(this.domNode.classList.add("mwPopupMenuItemPopupRight"),this.domNode.classList.remove("mwPopupMenuItemPopupleft"),this.domNode.parentElement.classList.add("mwPopupMenuItemParentRight"),this.domNode.parentElement.classList.remove("mwPopupMenuItemParentLeft")):(this.domNode.classList.add("mwPopupMenuItemPopupLeft"),this.domNode.classList.remove("mwPopupMenuItemPopupRight"),this.domNode.parentElement.classList.remove("mwPopupMenuItemParentRight"),this.domNode.parentElement.classList.add("mwPopupMenuItemParentLeft"));
this.domNode.parentElement.classList.add("mwPopupMenuItemParent");0<this.getChildren().length&&(this._focusOnOpen&&this.focusFirst)&&(this._storeFocus=this.focus,this.focus=function(){this.focusFirst();this.focus=this._storeFocus;delete this._storeFocus});this._invokingWidget.set("_focusSubMenuOnOpen",!1)},_closeMenuOnParentClick:function(){return!1},_updateWidth:function(){}})})},"MW/toolstrip/menu/ListItemWithCheckBox":function(){define("dojo/_base/declare mw-menu/CheckBoxMenuItem ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/TextOverrideMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c){return h(c.validate([f,g,e,d]),{visualFamily:"toolstrip",postCreate:function(){this.inherited(arguments);this.checkBox.set("visualFamily","toolstrip")}})})},"mw-menu/CheckBoxMenuItem":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-form/CheckBox mw-mixins/property/TagMixin mw-mixins/property/CheckedMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/AccessibilityClickMixin mw-mixins/event/ChangeEventMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/CheckBoxRadioButtonMenuItem.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N){return h(L.validate([g,e,d,c,b,x,B,k,l,m,q,p,r,s,t,u,v,n,w,A,D,F,H]),{baseClass:"mwWidget mwSharedMenuItem mwCheckBoxMenuItem",templateString:N,constructor:function(){this.checkBox=new a({text:""});this.own(this.checkBox)},_setCheckedAttr:function(a){this.inherited(arguments);this.checkBox.set("checked",a);this.get("closeMenuOnClick")&&(a?(this.checkBox.domNode.classList.add("mwSpecialCheckBoxIcon"),this.checkBox.domNode.classList.remove("mwNoCheckBoxIcon")):
(this.checkBox.domNode.classList.add("mwNoCheckBoxIcon"),this.checkBox.domNode.classList.remove("mwSpecialCheckBoxIcon")))},buildRendering:function(){this.inherited(arguments);this.checkBox.placeAt(this.domNode,"first")},postCreate:function(){this.inherited(arguments);this.checkBox._triggerChangeEvent=function(){};this.checkBox._onClick=function(){};this.domNode.setAttribute("data-composite-primary","");(this.checkBox.focusNode||this.checkBox.domNode).setAttribute("data-composite-child","");(this.checkBox.focusNode||
this.checkBox.domNode).setAttribute("data-composite-primary-id",this.get("id"))},startup:function(){this.inherited(arguments);this.checkBox.startup()},_onClick:function(){this.inherited(arguments);this.checkBox.set("checked",this.get("checked"))},_emitClickEvent:function(){this.emit("click",{mwEventData:{checked:this.get("checked")},_dojo_click:!0})}})})},"mw-form/CheckBox":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/CheckedMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-form/mixins/CheckBoxRadioButtonTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/CheckBox.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w){return h(v.validate([g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u]),{baseClass:"mwWidget mwCheckBox",templateString:w,postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"keydown",this._handleKeydown.bind(this)),f(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){32===a.keyCode&&a.preventDefault()},_handleKeyup:function(a){32===a.keyCode&&(this.get("disabled")||a.target.click())}})})},"mw-form/mixins/CheckBoxRadioButtonTextSizingMixin":function(){define(["dojo/_base/declare",
"dojo/dom-geometry"],function(h,f){return h(null,{_setWidthAttr:function(){this.inherited(arguments);if(this._started)if("auto"!==this.get("width")){var g=f.position(this.checkBoxRadioIconNode),e=f.getMarginExtents(this.textNode);this.textNode.style.width=this.width-(g.w+e.l)+"px"}else this.textNode.style.width="auto"}})})},"MW/toolstrip/menu/ListItemWithTextField":function(){define("dojo/_base/declare dojo/_base/lang mw-menu/TextFieldMenuItem ../mixins/property/TextOverrideMixin ../mixins/property/TypeMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c){return h(c.validate([g,e,d]),{visualFamily:"toolstrip",constructor:function(){this.textField._triggerTypingEvent=function(b){this.emit("typing",{mwEventData:{text:b}})}},_setLabelAttr:function(b){this.set("text",b);this._set("label",b)},getLabelAttr:function(){this.get("text")},postCreate:function(){this.inherited(arguments);this.textField.set("visualFamily","toolstrip");this.watch("text",f.hitch(this,"_updateLabel"))},_updateLabel:function(b,a,c){this.set("label",c)},_onFocus:function(){this.inherited(arguments);
this.emit("focusgained",{mwEventData:{text:this.textField.inputNode.value}})},_onBlur:function(){this.inherited(arguments);this.emit("focuslost",{mwEventData:{text:this.textField.inputNode.value}})}})})},"mw-menu/TextFieldMenuItem":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-dom-utils/domUtils mw-form/TextField mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/DescriptionMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-mixins/property/ValidationMixin dojo/text!./templates/TextFieldMenuItem.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L){return h(F.validate([c,b,a,k,l,s,t,v,u,w,n,p,r,x,B,A,D,H]),{baseClass:"mwWidget mwSharedMenuItem mwTextFieldMenuItem",templateString:L,closeOnEnter:!0,editable:!0,placeholder:"",constructor:function(){this.textField=new q({value:""});this.own(this.textField)},_setPlaceholderAttr:function(a){this.textField.set("placeholder",a);this._set("placeholder",a)},_getPlaceholderAttr:function(a){return this.textField.get("placeholder")},_setValueAttr:function(a){this.textField.set("value",
a);this._set("value",a)},_setEditableAttr:function(a){this.textField.set("editable",a);this._set("editable",a)},_getValueAttr:function(){return this.textField.get("value")},_getEditableAttr:function(){return this.textField.get("editable")},buildRendering:function(){this.inherited(arguments);this.textField.placeAt(this.shortcutKeyNode,"before");this.inputNode=this.textField.inputNode},postCreate:function(){this.inherited(arguments);this.textField.on("change",f.hitch(this,function(a){this.get("value")!==
a.mwEventData.newValue&&this.set("value",a.mwEventData.newValue)}));this.own(g(this.textField.focusNode,"change",f.hitch(this,"_onChange")),g(this.textField.focusNode,"keydown",f.hitch(this,"_onKeyDown")),g(this.domNode,"focus",f.hitch(this,"_focusGained")));this.domNode.classList.add("mwEditableMixin");this._setEditableAttr(this.get("editable"));this._setPlaceholderAttr(this.get("placeholder"));this.domNode.setAttribute("data-composite-primary","");this.domNode.setAttribute("spellcheck","false");
(this.textField.focusNode||this.textField.domNode).setAttribute("data-composite-child","");(this.textField.focusNode||this.textField.domNode).setAttribute("data-composite-primary-id",this.get("id"));this.textField.domNode.setAttribute("data-composite-child","");this.textField.domNode.setAttribute("data-composite-primary-id",this.get("id"))},startup:function(){this.inherited(arguments);this.textField.startup()},_getDomNodeForValidationClasses:function(){return this.textField.domNode},_focusGained:function(a){this.focus&&
m.isFocusable(this.focusNode||this.domNode)&&this.focus()},focus:function(){var a=this.focusNode||this.domNode;a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));m.isFocusable(a)&&d.focus(this.getFocusNode())},getFocusNode:function(){return this.textField.focusNode},_onKeyDown:function(a){if(a.keyCode===e.TAB)a.preventDefault(),a.stopPropagation(),this.emit("synkeydown",{keyCode:e.TAB});else if(a.keyCode===e.ESCAPE)this.textField.inputNode.value=
this.get("value"),this.emit("textcancelled",{mwEventData:{text:this.get("value")}}),a.preventDefault(),a.stopPropagation(),this._requestClose(!1);else if(a.keyCode===e.ENTER){a=this.get("value");var b=this.textField.inputNode.value;a===b?this.emit("recommit",{mwEventData:{propertyName:"value",value:b}}):(this.emit("commit",{mwEventData:{propertyName:"value",value:b}}),this.set("value",b),this.textField._triggerChangeEvent("value",a,b));this.closeOnEnter&&!0===this.closeOnEnter&&this._requestClose(!1)}else(a.keyCode===
e.HOME||a.keyCode===e.END)&&a.stopPropagation()},_handleInputNodeClick:function(){!1!==this.textField.get("editable")&&this.textField.inputNode.select()},_emitClickEvent:function(a){this.emit("click",{mwEventData:{value:this.get("value")},_dojo_click:!0});a.target!==this.inputNode&&this.emit("itempushed")},_qeTypeOverWithEnter:function(a){this.textField._qeTypeOverWithEnter(a)},_qeTyping:function(a){this.textField._qeTyping(a)}})})},"MW/toolstrip/menu/ListItemWithRadioButton":function(){define("dojo/_base/declare mw-menu/RadioButtonMenuItem ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/TextOverrideMixin ../mixins/property/ButtonGroupMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b){return h(b.validate([f,g,e,d,c]),{visualFamily:"toolstrip",postCreate:function(){this.inherited(arguments);this.radioButton.set("visualFamily","toolstrip")}})})},"mw-menu/RadioButtonMenuItem":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-form/RadioButton mw-mixins/property/CheckedMixin mw-menu/mixins/property/CloseMenuOnClickMixin mw-mixins/property/TagMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/ShortcutMixin mw-menu/mixins/property/ShowDescriptionMixin mw-menu/mixins/property/ShowTextMixin mw-menu/mixins/property/ShowShortcutMixin mw-mixins/property/TextMixin mw-menu/mixins/SingleLineTextMixin mw-mixins/property/VisualFamilyMixin mw-menu/mixins/FocusableMenuChildMixin mw-menu/mixins/MenuChildResizeMixin mw-menu/mixins/MenuItemTextColorMixin mw-mixins/AccessibilityClickMixin mw-mixins/event/ChangeEventMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/CheckBoxRadioButtonMenuItem.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M){return h(N.validate([g,e,d,c,b,B,A,n,r,s,t,u,v,w,p,x,k,l,D,F,m,q,H,L]),{baseClass:"mwWidget mwSharedMenuItem mwRadioButtonMenuItem",templateString:M,constructor:function(){this.radioButton=new a({text:""});this.own(this.radioButton)},_setCheckedAttr:function(a){this.inherited(arguments);this.radioButton.set("checked",a)},buildRendering:function(){this.inherited(arguments);this.radioButton.placeAt(this.domNode,"first")},startup:function(){this.inherited(arguments);
this.radioButton.startup()},_emitClickEvent:function(){this.emit("click",{mwEventData:{checked:this.get("checked")},_dojo_click:!0})}})})},"mw-form/RadioButton":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-form/mixins/CheckBoxRadioButtonTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/RadioButton.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x){return h(w.validate([g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v]),{baseClass:"mwWidget mwRadioButton",templateString:x,postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"keydown",this._handleKeydown.bind(this)),f(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){32===a.keyCode&&a.preventDefault()},_handleKeyup:function(a){32===a.keyCode&&(this.get("disabled")||a.target.click())},_onClick:function(){!0===
!this.get("checked")&&this.inherited(arguments)}})})},"MW/toolstrip/menu/PopupListSeparator":function(){define(["dojo/_base/declare","mw-menu/MenuSeparator","../mixins/property/TypeMixin","mw-mixins/mixinDependencyValidator"],function(h,f,g,e){return h(e.validate([f,g]),{visualFamily:"toolstrip"})})},"MW/toolstrip/menu/PopupListHeader":function(){define(["dojo/_base/declare","mw-menu/MenuHeader","../mixins/property/TypeMixin","mw-mixins/mixinDependencyValidator"],function(h,f,g,e){return h(e.validate([f,
g]),{visualFamily:"toolstrip"})})},"mw-menu/MenuHeader":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin mw-mixins/property/TagMixin mw-mixins/PreventFocusMixin mw-mixins/PreventSelectionMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/MenuHeader.html".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){return h(l.validate([f,g,e,d,c,b,a,k]),{baseClass:"mwWidget mwMenuHeader",templateString:m})})},
"MW/toolstrip/form/ComboBox":function(){define("dojo/_base/declare dojo/keys mw-form/ComboBox dijit/registry ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/property/ValidationMixin".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q){return h([g,d,c,b,a,k,l,m,q],{visualFamily:"toolstrip",height:22,mnemonicKeyNavDirection:"none",
_setEditableAttr:function(a){this.inherited(arguments);!1===a?this.domNode.setAttribute("data-focus","refuse"):(this.domNode.setAttribute("data-focus","accept"),this.arrowNode.setAttribute("data-focus","refuse"))},postCreate:function(){this._textField.set("visualFamily","toolstrip");this.menu.set("visualFamily","toolstrip");this.inherited(arguments);!1===this.get("editable")?this.domNode.setAttribute("data-focus","refuse"):(this.domNode.setAttribute("data-focus","accept"),this.get("menu").domNode.setAttribute("data-focus",
"refuse"));this.get("menu").domNode.setAttribute("data-focus","temporary")},_handleTextFieldKeyDown:function(a){a.keyCode===f.ESCAPE&&(this.emit("textcancelled",{mwEventData:{text:this.inputNode.value}}),this.emit("restorefocustolastnonrefuseelement"));if(a.keyCode===f.ENTER){if(this.get("value")===this.inputNode.value){var b=this._getSelectedItemFromValue(this.get("value"));b&&b.label===this.inputNode.value&&void 0!==b.value?this.emit("recommit",{mwEventData:{value:b.value}}):this.emit("recommit",
{mwEventData:{text:this.get("value")}})}this.emit("restorefocustolastnonrefuseelement")}this.inherited(arguments)},_handleMenuClick:function(a){var b=this._getSelectedItemFromLabel(a.target.textContent);this.get("value")===b.value&&this.emit("recommit",{mwEventData:{value:this.get("value")}});this.inherited(arguments)},_initMenuItems:function(a){this.inherited(arguments);this._started&&a.forEach(function(a){!0===a.selected&&this.set("value",a.value)},this)},resize:function(){var a=this.get("width"),
b=2;"100%"===a&&(a=this.domNode.getBoundingClientRect().width-b,b=0);this._textField.domNode.style.width="calc("+a+"px - 22px - 2px - 1px)";this.menu.domNode.style.minWidth="calc("+a+"px - "+b+"px)"},startup:function(){this.inherited(arguments);this.items.forEach(function(a){!0===a.selected&&this.set("value",a.value)},this)},_openComboBoxMenu:function(){this.inherited(arguments);this.emit("dropdownclick",{})},closeMenu:function(){this.inherited(arguments);this.emit("restorefocustolastnonrefuseelement")},
_setItemsAttr:function(){this.inherited(arguments);this.menu.getChildren().forEach(function(a){a.classList.remove("mwDefaultVisualFamily");a.classList.add("mwToolstripVisualFamily")})},_setFooterIdAttr:function(a){var b=e.byId(a);b&&(this._createFooterNode(),b.placeAt(this.footerNode),b.startup());this._set("footerId",a)},_createFooterNode:function(){if(this.footerNode){var a=e.byId(this.get("footerId"));a&&a.destroyRecursive()}else this.footerNode=document.createElement("div"),this.get("menu").domNode.appendChild(this.footerNode)}})})},
"mw-form/ComboBox":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dojo/keys dijit/popup dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin dijit/focus dojo/mouse mw-mixins/AccessibilityClickMixin mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/EditableMixin mw-mixins/property/DescriptionMixin mw-mixins/property/SizeMixin mw-mixins/property/TextInputValueMixin mw-mixins/property/VisualFamilyMixin mw-mixins/ResizeMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-form/TextField dijit/_Container mw-mixins/KeyNavMixin mw-dom-utils/domUtils mw-mixins/mixinDependencyValidator dojo/text!./templates/ComboBox.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L,N,M){var P=h([c,l,a,F,H,w],{baseClass:"mwWidget mwComboBoxPopup",templateString:'\x3cdiv tabindex\x3d"0"\x3e\x3cdiv data-dojo-attach-point\x3d"menuItemsNode"\x3e\x3c/div\x3e\x3c/div\x3e',getChildren:function(){return Array.prototype.slice.call(this.menuItemsNode.childNodes)}});return h(N.validate([c,b,a,k,l,n,p,r,s,t,u,v,w,x,B,A]),{baseClass:"mwWidget mwComboBox",templateString:M,editable:!1,text:"",height:22,width:150,maxHeight:500,ORIENTATION_VALUES:{below:["below",
"below-alt"],vertical:["below","below-alt","above","above-alt"],horizontal:["after","before"]},constructor:function(a){a=a||{};this._textField=new D({editable:!1,disabled:!0});this.own(this._textField);this.own(f(this._textField,"typing",g.hitch(this,"_handleTextFieldTyping")),f(this._textField,"keydown",g.hitch(this,"_handleTextFieldKeyDown")));this.menu=new P({});this.own(this.get("menu"));this._isTextEmpty=!0;this._pendingValue=null;if(a&&!1===this.get("editable")&&a.value&&!a.items)throw Error("Value cannot be set on a non-editable combo box without having items");
},postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"mousedown",g.hitch(this,"focus")),f(this._textField.inputNode,"blur",g.hitch(this,"_handleTextFieldBlur"),!0),f(this.domNode,"blur",g.hitch(this,"_handleDomNodeBlur"),!0),f(this.domNode,"keydown",g.hitch(this,"_handleDomNodeKeyDown")),f(this.get("menu").menuItemsNode,"click",g.hitch(this,"_handleMenuClick")),f(this.get("menu").menuItemsNode,"keydown",g.hitch(this,"_handleMenuKeyDown")));this._menuNodeMouseDownHandler||(this._menuNodeMouseDownHandler=
g.hitch(this,"_handleArrowNodeMouseDown"),this.menuNode.addEventListener("mousedown",this._menuNodeMouseDownHandler,!0));!0===this.get("disabled")&&(this.menuNode.removeEventListener("mousedown",this._menuNodeMouseDownHandler,!0),this._menuNodeMouseDownHandler=null);this.menu.domNode.addEventListener("blur",g.hitch(this,"_handleMenuBlur"),!0);(void 0===this.get("items")||0===this.get("items").length)&&this.set("items",[]);this.set("menuOrientation","vertical")},startup:function(){this.inherited(arguments);
this.menu.startup();this._textField.startup();this._isResized||this.resize()},destroy:function(){this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this._textField.placeAt(this.textFieldContainerNode);this.inputNode=this._textField.inputNode;this.focusNode=this.domNode},_isDescendant:function(a,b){if(a===b)return!0;for(var c=b.parentNode;null!=c;){if(c===a)return!0;c=c.parentNode}return!1},_handleArrowNodeMouseDown:function(a){!0!==this._comboBoxMenuOpened?this._openComboBoxMenu():
this.closeMenu()},closeMenu:function(){!0===!this._destroyed&&this.domNode.classList.remove("mwHasMenuOpened");d.close(this.menu);this._comboBoxMenuOpened=!1;this.menu&&(this.menu.domNode&&this.menu.domNode.parentNode)&&(this.menu.domNode.parentNode.style.overflowX="visible",this.menu.domNode.parentNode.style.overflowY="visible")},_closeMenuOnBlur:function(a){setTimeout(g.hitch(this,function(){if(!this._isDescendant(this.domNode,document.activeElement)&&!this._isDescendant(this.menu.domNode,document.activeElement)){this.closeMenu();
var a=this._getSelectedItemFromLabel(this.inputNode.value);a||(a={label:"",value:""});!0===this.get("editable")&&""!==this.inputNode.value&&this.inputNode.value!==a.label&&this.inputNode.value!==this.get("value")?a&&void 0!==a.index?this.set("value",a.value):this.set("value",this.inputNode.value):""===this.inputNode.value&&(""!==this.get("value")&&!0===this.get("editable"))&&this.set("value","")}},0))},_handleMenuBlur:function(a){this._closeMenuOnBlur(a)},_handleMenuItemMouseEnter:function(a){L.isFocusable(a.target)&&
m.focus(a.target)},_handleTextFieldBlur:function(a){!0===this.get("editable")&&this._closeMenuOnBlur(a)},_handleDomNodeBlur:function(a){!1===this.get("editable")&&this._closeMenuOnBlur(a)},_handleUpAndDownArrow:function(a){var b=this.get("menu").getChildren(),c=void 0!==this._get("value")?this._getSelectedItemFromValue(this._get("value")):void 0;if(a.keyCode===e.DOWN_ARROW){for(c=c&&void 0!==c.index?(c.index+1)%b.length:0;c<b.length;c++)if(this._isKeyboardNav(b[c])){m.focus(b[c]);break}this._comboBoxMenuOpened||
this._openComboBoxMenu();a.preventDefault()}else if(a.keyCode===e.UP_ARROW){for(c=c&&void 0!==c.index?(c.index-1)%b.length:b.length-1;0<=c;c--)if(this._isKeyboardNav(b[c])){m.focus(b[c]);break}this._comboBoxMenuOpened||this._openComboBoxMenu();a.preventDefault()}},_handleDomNodeKeyDown:function(a){if(!1===this.get("editable")&&!0===!this.get("disabled")&&(this._handleUpAndDownArrow(a),a.keyCode===e.SPACE||a.keyCode===e.ENTER))!0!==this._comboBoxMenuOpened?this._openComboBoxMenu():this.closeMenu(),
a.stopPropagation(),a.preventDefault();a.keyCode===e.ESCAPE&&(!0===this._comboBoxMenuOpened&&(a.stopPropagation(),a.preventDefault()),this.closeMenu())},_setDisabledAttr:function(a){this.inherited(arguments);!0===a?(this._menuNodeMouseDownHandler&&(this.menuNode.removeEventListener("mousedown",this._menuNodeMouseDownHandler,!0),this._menuNodeMouseDownHandler=null),this.closeMenu()):this.menuNode&&null===this._menuNodeMouseDownHandler&&(this._menuNodeMouseDownHandler=g.hitch(this,"_handleArrowNodeMouseDown"),
this.menuNode.addEventListener("mousedown",this._menuNodeMouseDownHandler,!0));!0===this.get("editable")&&this._textField.set("disabled",a)},_handleTextFieldKeyDown:function(a){!0===this.get("editable")&&this._handleUpAndDownArrow(a);!0===this.get("editable")&&a.keyCode===e.ENTER&&(a=this.inputNode.value,this._isTextEmpty=!0,(a=this._getSelectedItemFromLabel(a))&&void 0!==a.index?this.set("value",a.value):this.set("value",this.inputNode.value),this.closeMenu())},_openComboBoxMenu:function(a){var b=
void 0!==this._get("value")?this._getSelectedItemFromValue(this._get("value")):void 0;void 0!==b&&0<this.get("menu").getChildren().length&&(this.get("menu").getChildren()[b.index].classList.add("mwComboBoxSelectedMenuItem"),this.get("menu").getChildren()[b.index].focus());(!a||!a.typing)&&this.get("menu").getChildren().forEach(function(a,b){"none"===a.style.display&&(a.style.display="")});d.open({parent:this,popup:this.menu,around:this.domNode,orient:this.menuOrientation});this.domNode.classList.add("mwHasMenuOpened");
this._comboBoxMenuOpened=!0;this.menu.domNode.parentElement.classList.contains("mwComboBoxPopupParent")||this.menu.domNode.parentElement.classList.add("mwComboBoxPopupParent")},_handleTextFieldTyping:function(a){var b=a.mwEventData.currentContent,c=RegExp(this._escapeRegExp(b),"i");this.get("menu").getChildren().forEach(g.hitch(this,function(a,d){if(this._isSeparator(a))a.style.display="none";else{var e=a.textContent;if(0===e.toLowerCase().indexOf(b.toLowerCase())){if(""!==b||c.test(e))a.style.display=
""}else a.style.display="none"}}));var d=0;this.get("menu").getChildren().forEach(g.hitch(this,function(a){this._isSeparator(a)&&0<d?(a.style.display="block",d=0):!this._isSeparator(a)&&"none"!==a.style.display&&d++}));this._comboBoxMenuOpened||this._openComboBoxMenu({typing:!0})},_handleMenuKeyDown:function(a){a.keyCode===e.BACKSPACE&&(a.preventDefault(),m.focus(this._textField.focusNode));(a.keyCode===e.ENTER||a.keyCode===e.SPACE)&&!this.get("disabled")&&f.emit(a.target,"click",{bubbles:!0,cancelable:!0,
mwEventData:{keyCode:a.keyCode},_dojo_click:!0});(a.keyCode===e.LEFT_ARROW||a.keyCode===e.RIGHT_ARROW)&&this.editable&&m.focus(this._textField.focusNode);a.keyCode===e.ESCAPE&&(this.closeMenu(),m.focus(this.focusNode),a.stopPropagation(),a.preventDefault())},_handleMenuClick:function(a){this._isSeparator(a.target)?a.preventDefault():(a=this._getSelectedItemFromLabel(a.target.textContent).value,this.set("value",a),this.closeMenu())},_removeSelectedMenuItemColor:function(){var a=void 0!==this._get("value")?
this._getSelectedItemFromValue(this._get("value")):void 0;void 0!==a&&0<this.get("menu").getChildren().length&&this.get("menu").getChildren()[a.index].classList.remove("mwComboBoxSelectedMenuItem")},_onMouseDown:function(){this.inherited(arguments);m.focus(this.get("menu").focusNode)},_getParentPopup:function(a){for(;a;){if(a.classList&&a.classList.contains("dijitPopup"))return a;a=a.parentNode}return null},resize:function(){var a=this.get("width"),b=2;"auto"===a&&(a=this.domNode.getBoundingClientRect().width,
b=0);this._textField.domNode.style.width="calc("+a+"px - 22px)";this.menu.domNode.style.minWidth="calc("+a+"px - "+b+"px)"},focus:function(){if(!this.disabled&&this.focusNode.focus)try{setTimeout(g.hitch(this,function(){m.focus(this.focusNode)}),0)}catch(a){}},_setMaxHeightAttr:function(a){if("number"!==typeof a)throw Error("'MaxHeight' property expects a Number!");this.menu.domNode.style.maxHeight=a+"px";this._set("maxHeight",a)},_setValueAttr:function(a){var b=this._getSelectedItemFromValue(a);
if(("number"===typeof a?a.toString():a)&&b&&void 0!==b.index)this._textField.set("value",b.label),this._isTextEmpty=!0,this._removeSelectedMenuItemColor(),0<this.get("menu").getChildren().length&&void 0!==b.index&&this.get("menu").getChildren()[b.index].classList.add("mwComboBoxSelectedMenuItem");else if(("number"===typeof a?a.toString():a)&&!b)if(this.get("editable"))this._removeSelectedMenuItemColor(),this._textField.set("value",a),this._isTextEmpty=!1;else{if(!this.get("items")||0===this.get("items").length){this._pendingValue=
a;return}throw Error("Value must match an existing item for non-editable combo box");}else""===a&&(this._textField.set("value",""),void 0!==this._get("value")&&(this._removeSelectedMenuItemColor(),this._isTextEmpty=!0),""!==this.get("text")&&(this._isTextEmpty=!1));!0===this._isTextEmpty?this.set("text",""):this.set("text",a);b=this.get("value");this._set("value",a);a=this.get("value");b!==a&&this._triggerChangeEvent("value",b,a)},_getValueAttr:function(){return this._get("value")},_setItemsAttr:function(a){a&&
0<a.length?(this.set("value",""),this._initMenuItems(a)):(this.set("value",""),this._destroyMenuItems());this._set("items",a);!1===this.get("editable")&&null!=this._pendingValue&&(this.set("value",this._pendingValue),this._pendingValue=null)},_initMenuItems:function(a){0<this.get("menu").getChildren().length&&this._destroyMenuItems();a.forEach(function(a,b){var c=document.createElement("div");if(a.type&&"separator"===a.type)c.setAttribute("data-refuse-key-nav",!0),c.setAttribute("data-menu-item-type",
"separator"),c.classList.add("mwMenuSeparator"),this.get("menu").menuItemsNode.appendChild(c);else{c.setAttribute("tabIndex","0");"mwDefaultVisualFamily mwTextMixin mwTextMixin mwWidget mwSharedMenuItem mwMenuItem".split(" ").forEach(function(a){c.classList.add(a)});var d=document.createElement("div");d.textContent=a.label;d.classList.add("mwTextNode");c.appendChild(d);this.get("menu").menuItemsNode.appendChild(c);c.addEventListener("mouseover",g.hitch(this,"_handleMenuItemMouseEnter"))}},this)},
_getItemsAttr:function(){return this._get("items")},_setEditableAttr:function(a){a?(this.domNode.classList.add("mwEditableComboBox"),this.domNode.classList.remove("mwNonEditable"),this.focusNode=this._textField.focusNode,this._toggleTextField(!0),this._textField.focusNode.setAttribute("tabIndex","0"),this.menuNode=this.arrowNode,this._set("editable",!0)):(this.domNode.classList.add("mwNonEditable"),this.domNode.classList.remove("mwEditableComboBox"),this.focusNode=this.domNode,this._toggleTextField(!1),
this._textField.focusNode.setAttribute("tabIndex","-1"),this.menuNode=this.domNode,this._set("editable",!1))},_setTextAttr:function(a){!1===this._isTextEmpty||(""===this.get("value")||void 0===this.get("value"))&&""!==a?(this.get("editable")&&void 0===this._getSelectedItemFromValue(a)?(this._set("text",a),this._isTextEmpty=!1):(this._isTextEmpty=!0,this._set("text","")),this._textField.set("value",a)):this._set("text","")},_getTextAttr:function(a){return this._get("text")},_toggleTextField:function(a){this._textField.set("editable",
a);this._textField.set("disabled",!a)},_setMenuOrientationAttr:function(a){if("string"!==typeof a||-1===this.ORIENTATION_VALUES.hasOwnProperty(a))throw Error("'menuOrientation' property expects one of these values: "+Object.keys(this.ORIENTATION_VALUES));this._set("menuOrientation",this.ORIENTATION_VALUES[a])},_setWidthAttr:function(a){this.inherited(arguments);(void 0!==this._started||!0===this._started)&&this.resize()},_setPlaceholderAttr:function(a){this._textField.set("placeholder",a);this._set("placeholder",
a)},_getPlaceholderAttr:function(){return this._textField.get("placeholder")},_destroyMenuItems:function(){for(;this.get("menu").menuItemsNode.firstChild;)this.get("menu").menuItemsNode.firstChild.removeEventListener("mouseover",g.hitch(this,"_handleMenuItemMouseEnter")),this.get("menu").menuItemsNode.removeChild(this.get("menu").menuItemsNode.firstChild)},_escapeRegExp:function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")},_getSelectedItemFromLabel:function(a){var b={};if(this.get("items")&&
0<this.get("items").length)for(var c=0;c<this.get("items").length;c++){var d=this.get("items")[c];if(void 0!==d.label&&d.label===a){b.label=d.label;b.value=d.value;b.index=c;break}}return void 0!==b.index?b:void 0},_getSelectedItemFromValue:function(a){var b={};if(this.get("items")&&0<this.get("items").length)for(var c=0;c<this.get("items").length;c++){var d=this.get("items")[c];if(void 0!==d.value&&(d.value===a||"object"===typeof d.value&&JSON.stringify(d.value)===JSON.stringify(a))){b.label=d.label;
b.value=d.value;b.index=c;break}}return void 0!==b.index?b:void 0},_isSeparator:function(a){return a&&a.getAttribute("data-menu-item-type")&&"separator"===a.getAttribute("data-menu-item-type")},_isKeyboardNav:function(a){return"none"!==a.style.display&&!this._isSeparator(a)},_qeSelectItemByLabel:function(a){a=this._getSelectedItemFromLabel(a).value;this.set("value",a)},_qeSelectItemByIndex:function(a){a=this.get("items")[a].value;this.set("value",a)}})})},"mw-mixins/KeyNavMixin":function(){define("dojo/_base/declare dijit/registry dijit/focus dojo/_base/lang dojo/on dojo/keys".split(" "),
function(h,f,g,e,d,c){return h(null,{postCreate:function(){this.inherited(arguments);this.own(d(this,"keydown",e.hitch(this,"_handleKeyBoardNavigation")))},_handleKeyBoardNavigation:function(b){var a=g.curNode;if(b.keyCode===c.DOWN_ARROW)this._handleDownArrow(a),b.preventDefault();else if(b.keyCode===c.UP_ARROW)this._handleUpArrow(a),b.preventDefault();else if(b.keyCode===c.PAGE_UP||b.keyCode===c.HOME)this._moveToFirstChild(a),b.preventDefault();else if(b.keyCode===c.PAGE_DOWN||b.keyCode===c.END)this._moveToLastChild(a),
b.preventDefault()},_handleDownArrow:function(b){b=b.parentElement.lastChild===b?b.parentElement.firstChild:b.nextSibling;b=this._moveToNextFocusableNode(b);b.focus()},_handleUpArrow:function(b){b=b.parentElement.firstChild===b?b.parentElement.lastChild:b.previousSibling;b=this._moveToPreviousFocusableNode(b);b.focus()},_moveToNextFocusableNode:function(b){for(var a;b;)if(a=f.getEnclosingWidget(b),b.getAttribute("data-refuse-key-nav")||a&&a.get("disabled")||"none"===b.style.display)b=b.nextSibling?
b.nextSibling:this._moveToFirstChild(b);else break;return b},_moveToPreviousFocusableNode:function(b){for(var a;b;)if(a=f.getEnclosingWidget(b),b.getAttribute("data-refuse-key-nav")||a&&a.get("disabled")||"none"===b.style.display)b=b.previousSibling?b.previousSibling:this._moveToLastChild(b);else break;return b},_moveToFirstChild:function(b){for(b=b.parentElement.firstChild;b;)if(b.getAttribute("data-refuse-key-nav"))b=b.nextSibling;else break;return b},_moveToLastChild:function(b){for(b=b.parentElement.lastChild;b;)if(b.getAttribute("data-refuse-key-nav"))b=
b.previousSibling;else break;return b}})})},"MW/toolstrip/mixins/AcceptFocusMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","accept")}})})},"MW/toolstrip/mixins/ColumnWidthMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_allowedValues:["auto","100%"],_validateSizeInput:function(f){"100%"!==f&&this.inherited(arguments)},_setSize:function(f,g){this._validateSizeInput(g);
this._set(f,g);if(this._started){"100%"===g&&this.getParent()&&(g=this.getParent().get("width"));var e="",e=0<=this._allowedValues.indexOf(g)?g:this._getAdjustedSize(f,g,this.domNode);this.domNode.style[f]=e}}})})},"MW/toolstrip/form/ListBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dojo/on mw-form/ListBox ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/CompactMixin mw-mixins/property/ShortcutMixin ../mixins/AcceptFocusMixin ../mixins/ScrollbarMixin ../widgets/_ValidationMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return h(s.validate([d,c,b,a,k,l,m,q,n,p,r]),{visualFamily:"toolstrip",width:150,height:66,mnemonicKeyNavDirection:"horizontal",_setItemsAttr:function(a){this.inherited(arguments);this._started&&this._handleSelection(a)},_handleSelection:function(a){var b=[];a.forEach(function(a){!0===a.selected&&b.push(a.value)},this);0<b.length&&("single"===this.get("selectionMode")?this.set("value",[b[b.length-1]]):this.set("value",b))},postCreate:function(a){this.inherited(arguments);
this.own(e(this.containerNode,"keydown",f.hitch(this,"_handleKeyDownEvent")))},startup:function(){this.inherited(arguments);this._handleSelection(this.get("items"))},_handleKeyDownEvent:function(a){this.inherited(arguments);a.keyCode===g.ESCAPE?this.emit("restorefocustolastnonrefuseelement"):a.keyCode===g.ENTER&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("commit",{}))}})})},"mw-form/ListBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/query dojo/on dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/Destroyable dijit/Tooltip mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/DescriptionMixin mw-mixins/property/SizeMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-mixins/PreventSelectionMixin mw-mixins/mixinDependencyValidator mw-html-utils/HtmlUtils dojo/text!./templates/ListBox.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B){l=h(l,{constructor:function(a){this.widget=a;this.own(d(a.containerNode,"mousedown",f.hitch(this,"_handleMouseDown")),d(a.containerNode,"keydown",f.hitch(this,"_handleKeyDown")))},_handleMouseDown:function(a){if(a.target.classList.contains("mwListItem")){var b=Number(a.target.getAttribute("data-mw-index")),c=this.widget._selectedIndices.indexOf(b);a=this._getNewSelectedIndexOnMouseDown(a,b,c);this._setSelectedItems(a)}},_handleKeyDown:function(a){a=
this._getNewSelectedIndexOnKeyDown(a);-1!==a&&(this._setSelectedItems(a),this.widget.scrollToIndex(a[0]))},_setSelectedItems:function(a){if(-1!==a){var b=[],c=this.widget.get("value");a.forEach(function(a){b.push(this.widget._indexValueMap[a])},this);this.widget.set("value",b);this.widget._triggerChangeEvent("value",c,b)}},_getNewSelectedIndexOnKeyDown:function(a){if(0===this.widget.items.length)return-1;var b=this.widget._selectedIndices[0],d=this.widget._getIndexes(),e=Math.min.apply(null,d),d=
Math.max.apply(null,d),f=[];switch(a.keyCode){case c.UP_ARROW:f=b===e||void 0===b&&this._anchorIndex===e?[e]:void 0===b&&void 0===this._anchorIndex?[d]:void 0===b&&void 0!==this._anchorIndex?[this._anchorIndex-1]:[b-1];a.stopPropagation();a.preventDefault();break;case c.DOWN_ARROW:f=b===d||void 0===b&&this._anchorIndex===d?[d]:void 0===b&&void 0===this._anchorIndex?[e]:void 0===b&&void 0!==this._anchorIndex?[this._anchorIndex+1]:[b+1];a.stopPropagation();a.preventDefault();break;default:f=-1}return f}});
var A=h(l,{_getNewSelectedIndexOnMouseDown:function(a,b,c){var d=[b];0<=c&&(d=a.ctrlKey||a.metaKey?[]:-1);this._anchorIndex=b;return d}}),D=h(l,{constructor:function(){this._anchorIndex=this.widget._selectedIndices[0]||1},_getNewSelectedIndexOnMouseDown:function(a,b,c){var d=[b],e;if(0<=c)a.shiftKey?d=this._getRangeOfIndices(b):(a.ctrlKey||a.metaKey?(d=this.widget._selectedIndices.slice(0),d.splice(c,1)):1===this.widget._selectedIndices.length&&(d=-1),e=!1);else if(a.shiftKey)d=this._getRangeOfIndices(b);
else if(e=!1,a.ctrlKey||a.metaKey)d=this.widget._selectedIndices.slice(0),d.push(b);!1===e&&(this._anchorIndex=b);return d},_getRangeOfIndices:function(a){var b,c=[],d=this._anchorIndex;if(a<=d)for(b=a;b<=d;b+=1)c.push(b);else for(b=d;b<=a;b+=1)c.push(b);return c}});return h(w.validate([b,a,k,q,n,p,r,s,t,u,v]),{templateString:B,baseClass:"mwWidget mwListBox",selectionMode:"single",constructor:function(){this._indexValueMap={};this._valueIndexMap={};this.items=[];this.value=[];this._selectedIndices=
[]},scrollToValue:function(a){this.scrollToIndex(this._valueIndexMap[a])},scrollToIndex:function(a){var b=this._getItemNodes().filter(function(b){return Number(b.getAttribute("data-mw-index"))===a},this)[0];if(b){var c=this.domNode;b.offsetTop+b.offsetHeight>c.offsetHeight+c.scrollTop?this.domNode.scrollTop=b.offsetTop+b.offsetHeight-this.domNode.offsetHeight:b.offsetTop<c.scrollTop&&(this.domNode.scrollTop=b.offsetTop)}},postCreate:function(){this.inherited(arguments);this.set("items",this.get("items"));
this.set("value",this.get("value"));this.own(d(this.containerNode,"mouseover",f.hitch(this,function(a){var b=this._getEscapedToolTipString(a);b&&0<b.length&&m.show(b,a.srcElement)})),d(this.containerNode,"mouseout",function(a){m.hide(a.srcElement)}));this._selectionStrategy=new this._selectionStrategyModule(this)},_getEscapedToolTipString:function(a){var b="";a=a.srcElement.getAttribute("data-mw-tooltiptext");null!==a&&(b=x.escapeHtml(a));return b},startup:function(){this.inherited(arguments);this._updateTooltipForClippedItems()},
_setSelectionModeAttr:function(a){if(0===a.toLowerCase().indexOf("single"))this._selectionStrategyModule=A;else if(0===a.toLowerCase().indexOf("multiple"))this._selectionStrategyModule=D;else throw Error("Selection Mode should be one of: single, multiple");this._created&&(this._selectionStrategy.destroy(),this._selectionStrategy=new this._selectionStrategyModule(this));this._set("selectionMode",a)},_setItemsAttr:function(a){this._validateItemsArray(a);var b=this._getItemsListAndInitInternalDs(a);
this._updateDom(b);this._created&&this.set("value",[]);this._set("items",a);this._updateTooltipForClippedItems()},_setWidthAttr:function(){this.inherited(arguments);this._updateTooltipForClippedItems()},_setHeightAttr:function(){this.inherited(arguments);this._updateTooltipForClippedItems()},_validateItemsArray:function(a){if(Array.isArray(a))a.forEach(function(a){if(void 0===a.label||void 0===a.value)throw Error('The "items" must be an array of objects, where each object should consist of a label and a value property. Like: [ {label: "Item 1", value: 1}, {label: "Item 2", value: 2}, {label: "Item 3", value: 3}, {label: "Item 4", value: 4} ]');
});else throw Error('The "items" must be an array of objects, where each object should consist of a label and a value property. Like: [ {label: "Item 1", value: 1}, {label: "Item 2", value: 2}, {label: "Item 3", value: 3}, {label: "Item 4", value: 4} ]');},_setValueAttr:function(a){this._validateValueArray(a);this._set("value",a);var b=[];a.forEach(function(a){b.push(this._valueIndexMap[a])},this);this._setSelectedIndex(b)},_validateValueArray:function(a){if(Array.isArray(a)){if("single"===this.get("selectionMode")&&
1<a.length)throw Error("'value' property must be a single element array in single selection mode.");a.forEach(function(a){if(!this.items.some(function(b){return b.value===a}))throw Error("'value' must be a subset of the items' values.");},this)}else throw Error("'value' property expects an array.");},_setSelectedIndex:function(a){var b=this._getItemNodes();b.forEach(function(a){a.classList.remove("mwListItemSelected")});this._selectedIndices=a;0!==a.length&&b.forEach(function(b){var c=Number(b.getAttribute("data-mw-index"));
a.forEach(function(a){a===c&&b.classList.add("mwListItemSelected")})})},_getItemsListAndInitInternalDs:function(a){var b=[],c=a.length,d;this._indexValueMap={};this._valueIndexMap={};if(0<c)for(d=0;d<c;d+=1){var e=d+1;b[d]={index:e,label:a[d].label,value:a[d].value};this._indexValueMap[e]=a[d].value;this._valueIndexMap[a[d].value]=e}else b=[];return b},_updateDom:function(a){g.empty(this.containerNode);0<a.length&&a.forEach(function(a){g.create("li",{textContent:a.label,"data-mw-index":a.index,"data-mw-tooltiptext":"",
"class":"mwListItem"},this.containerNode)},this)},_updateTooltipForClippedItems:function(){this._getItemNodes().forEach(function(a){a.offsetWidth<a.scrollWidth?a.setAttribute("data-mw-tooltiptext",a.textContent):a.setAttribute("data-mw-tooltiptext","")})},_getIndexes:function(){var a=[];this._getItemNodes().forEach(function(b){a.push(Number(b.getAttribute("data-mw-index")))});return a},_getItemNodes:function(){return e("li",this.containerNode)},_qeSelectItemsByLabel:function(a){var b=this.get("items").filter(function(b){return-1<
a.indexOf(b.label)}).map(function(a){return a.value});this.set("value",b)},_qeSelectItemsByIndex:function(a){var b=this.get("items").filter(function(b,c){return-1<a.indexOf(c)}).map(function(a){return a.value});this.set("value",b)}})})},"MW/toolstrip/mixins/property/CompactMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_setCompactAttr:function(f){var g=!0===f?42:66;this.get("height")!==g&&this.set("height",g);this._set("compact",f)}})})},"MW/toolstrip/widgets/_ValidationMixin":function(){define("dojo/_base/declare dojo/dom-class dojo/mouse dojo/dom-geometry dojo/dom-construct dojo/on dojo/_base/window ./Tooltip".split(" "),
function(h,f,g,e,d,c,b,a){return h(null,{_createValidationtooltip:function(){this.validationTooltip||(this.validationTooltip=new a({}),this.own(this.validationTooltip),d.place(this.validationTooltip.domNode,b.body()),this._addTooltipEvents())},_setErrorTextAttr:function(a){this.validationTooltip&&(this.validationTooltip.textNode.textContent=a);this._set("errorText",a)},_setWarningTextAttr:function(a){this.validationTooltip&&(this.validationTooltip.textNode.textContent=a);this._set("warningText",a)},
_setValidationStateAttr:function(a){var b=!1,c=!1;"error"===a.toLowerCase()?(c=!0,this._createValidationtooltip(),this.validationTooltip.textNode.textContent=this.errorText):"warning"===a.toLowerCase()&&(b=!0,this._createValidationtooltip(),this.validationTooltip.textNode.textContent=this.warningText);this.validationTooltip&&(f.toggle(this._getDomNodeForValidationClasses(),"has-error",c),f.toggle(this.validationTooltip.domNode,"error-tooltip",c),f.toggle(this.validationTooltip.domNode,"warning-tooltip",
b),this.validationTooltip.domNode.style.visibility="hidden");this._set("validationState",a)},_flipDomOrder:function(a){var b=a.children[1];d.place(a.children[0],d.place(b,a),"after");d.place(b.children[0],d.place(b.children[1],b),"after")},_tooltipOrientation:function(){return f.contains(this.validationTooltip.domNode,"dijitTooltipLeft")?"left":"right"},_getDomNodeForValidationClasses:function(){return this.domNode},_getFocusWidget:function(){return this},_placeTooltip:function(){if(this.validationTooltip&&
("error"===this.validationState||"warning"===this.validationState)){var a=e.position(this.domNode),c,d,g,h,p,r,s,t=!1;c=a.x;d=a.y;g=a.w;"error"===this.validationState?(f.add(this._getDomNodeForValidationClasses(),"has-error"),this.validationTooltip.textNode.textContent=this.errorText,f.add(this.validationTooltip.domNode,"error-tooltip")):"warning"===this.validationState&&(this.validationTooltip.textNode.textContent=this.warningText,f.add(this.validationTooltip.domNode,"warning-tooltip"));this.validationTooltip.domNode.style.visibility=
"visible";r=e.position(this.validationTooltip.domNode).h/2;p=e.position(this.domNode).h/2;a=this.validationTooltip.domNode;s=e.position(b.body()).w;h=this._calculateTooltipWidth();c+g+h>s?(t=!0,c=c-h+"px",d=d+p-r+document.body.scrollTop+"px",f.contains(a.children[0],"tooltipConnector")&&this._flipDomOrder(a)):(c=c+g+"px",d=d+p-r+document.body.scrollTop+"px");f.toggle(this.validationTooltip.domNode,"tooltipLeft",t);f.toggle(this.validationTooltip.domNode,"tooltipRight",!t);this.validationTooltip.domNode.style.left=
c;this.validationTooltip.domNode.style.top=d}},_calculateTooltipWidth:function(){f.add(this.validationTooltip.domNode,"tooltipLeft");var a=e.position(this.validationTooltip.domNode).w;f.remove(this.validationTooltip.domNode,"tooltipLeft");return a},_addTooltipEvents:function(){var a=this;this.own(c(this,g.enter,function(){a._placeTooltip()}),c(this,g.leave,function(){a.validationTooltip&&(a.validationTooltip.domNode.style.visibility="hidden")}),c(this._getFocusWidget(),"focus",function(){a._placeTooltip();
a.validationTooltip&&("error"===a.get("validationState")||"warning"===a.get("validationState"))&&f.add(a.validationTooltip.domNode,"validationFocused")}),c(this._getFocusWidget(),"blur",function(){a.validationTooltip&&(f.remove(a.validationTooltip.domNode,"validationFocused"),a.validationTooltip.domNode.style.visibility="hidden")}))}})})},"MW/toolstrip/widgets/Tooltip":function(){define(["dojo/_base/declare","dijit/_WidgetBase","./_TooltipMixin","dijit/_TemplatedMixin","dojo/text!./templates/Tooltip.html"],
function(h,f,g,e,d){return h([f,e,g],{templateString:d})})},"MW/toolstrip/widgets/_TooltipMixin":function(){define(["dojo/_base/declare","dojo/aspect","./_DescriptionMixin","mw-event-utils/platformize"],function(h,f,g,e){return h([g],{_updateDescription:function(){this.inherited(arguments);this._updateTooltip()},_setTextAttr:function(){this.inherited(arguments);this._updateTooltip()},_setShortcutAttr:function(d){this._set("shortcut",d);this._updateTooltip()},_updateTooltip:function(){var d="",c="",
b="",a="",e="";this.textOverride?d=this.textOverride.replace(/\n/g," "):this.text&&(d=this.text.replace(/\n/g," "));this.shortcut&&(c=this._getPlatformSpecificShortcutString());this.descriptionOverride?b=this.descriptionOverride:this.description&&(b=this.description);!d&&c&&b?(d=b,b="",a=" "):d&&(c&&(a=" "),b&&(e=" - "));this.domNode.setAttribute("title",d+a+c+e+b)},_getPlatformSpecificShortcutString:function(){return"("+e.getPlatformSpecificString(this.shortcut)+")"}})})},"MW/toolstrip/widgets/_DescriptionMixin":function(){define(["dojo/_base/declare"],
function(h){return h(null,{_setDescriptionAttr:function(f){this._set("description",f);this._updateDescription()},_setDescriptionOverrideAttr:function(f){this._set("descriptionOverride",f);this._updateDescription()},_updateDescription:function(){var f="";this.descriptionOverride?f=this.descriptionOverride:this.description&&(f=this.description);this.descriptionNode&&(this.descriptionNode.textContent=f)}})})},"MW/toolstrip/form/Label":function(){define("dojo/_base/declare mw-form/Label MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/IconOverrideMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(k.validate([f,g,e,d,c,b,a]),{visualFamily:"toolstrip",height:22,_setTabIndexOnNode:function(){}})})},"mw-form/Label":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/IconAlignmentMixin mw-mixins/property/IconMixin mw-mixins/property/SizeMixin mw-mixins/property/TextMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/VerticalAlignmentMixin mw-mixins/IconAndTextSizingMixin mw-mixins/PreventSelectionMixin mw-mixins/AccessibilityClickMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/Label.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x){return h(w.validate([f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v]),{baseClass:"mwWidget mwLabel",templateString:x,_paddingAndBorder:0,_setTabIndexOnNode:function(){}})})},"MW/toolstrip/widgets/EmptyControl":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/EmptyControl.html","./_WidgetMixin"],function(h,f,g,e,d){return h([f,g,d],{templateString:e})})},"MW/toolstrip/form/TextField":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojo/on dojo/keys mw-form/TextField MW/uiframework/utils ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/property/ValidationMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return h(s.validate([c,a,k,l,m,q,n,p,r]),{visualFamily:"toolstrip",width:150,height:22,mnemonicKeyNavDirection:"vertical",_onKeyUp:function(a){a.keyCode===d.ESCAPE?(this.inputNode.value=this.get("value"),this.emit("textcancelled",{mwEventData:{text:this.get("value")}}),this.emit("restorefocustolastnonrefuseelement")):a.keyCode===d.ENTER&&(this.get("value")===this.inputNode.value&&this.emit("recommit",{mwEventData:{text:this.get("value")}}),this.emit("restorefocustolastnonrefuseelement"),
this.emit("commit",{}));this.inherited(arguments)},_triggerTypingEvent:function(a){this.emit("typing",{mwEventData:{text:a}})},postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("spellcheck","false");this.own(e(this.inputNode,"focus",f.hitch(this,"_handleInputNodeFocus")))},_handleInputNodeFocus:function(a){!1!==this.get("editable")&&(b.detectIE()?setTimeout(f.hitch(this,function(){this.inputNode.select();return!1},0)):this.inputNode.select())},_onFocus:function(){this.inherited(arguments);
this.emit("focusgained",{mwEventData:{text:this.inputNode.value}})},_onBlur:function(){this.inherited(arguments);this.emit("focuslost",{mwEventData:{text:this.inputNode.value}})}})})},"MW/uiframework/utils":function(){define([],function(){return{detectIE:function(){var h=window.navigator.userAgent,f=h.indexOf("MSIE ");if(0<f)return parseInt(h.substring(f+5,h.indexOf(".",f)),10);if(0<h.indexOf("Trident/"))return f=h.indexOf("rv:"),parseInt(h.substring(f+3,h.indexOf(".",f)),10);f=h.indexOf("Edge/");
return 0<f?parseInt(h.substring(f+5,h.indexOf(".",f)),10):!1}}})},"MW/toolstrip/form/TextArea":function(){define("dojo/_base/declare dojo/keys mw-form/TextArea ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin ../mixins/property/DescriptionOverrideMixin ../mixins/property/CompactMixin mw-mixins/property/ShortcutMixin ../mixins/ScrollbarMixin mw-mixins/property/ValidationMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h(p.validate([g,e,d,c,b,a,k,l,m,q,n]),{visualFamily:"toolstrip",width:150,height:66,mnemonicKeyNavDirection:"none",_triggerTypingEvent:function(a){this.emit("typing",{mwEventData:{text:a}})},_onFocus:function(){this.inherited(arguments);this.emit("focusgained",{mwEventData:{text:this.inputNode.value}})},_onBlur:function(){this.inherited(arguments);this.emit("focuslost",{mwEventData:{text:this.inputNode.value}})},_onKeyUp:function(a){a.keyCode===f.ESCAPE&&
this.emit("restorefocustolastnonrefuseelement");this.inherited(arguments)}})})},"mw-form/TextArea":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-mixins/property/TagMixin mw-mixins/property/DescriptionMixin mw-mixins/property/DisabledMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/property/EditableMixin mw-mixins/property/SizeMixin mw-mixins/property/TextInputValueMixin mw-form/mixins/SharedTextInputMixin mw-mixins/property/PlaceholderMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/ValidationMixin mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/TextArea.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x){return h(w.validate([f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v]),{baseClass:"mwWidget mwTextArea",templateString:x,horizontalAlignment:"left",width:150,height:66,_setDisabledAttr:function(a){this.inherited(arguments);!0===a?this.inputNode.setAttribute("disabled",""):this.inputNode.removeAttribute("disabled")}})})},"MW/toolstrip/form/Spinner":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys mw-form/Spinner ../mixins/property/MnemonicMixin ../mixins/property/MnemonicKeyNavDirectionMixin ../mixins/ColumnWidthMixin ../mixins/property/TypeMixin mw-mixins/property/DescriptionMixin ../mixins/property/DescriptionOverrideMixin ../mixins/AcceptFocusMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h(n.validate([e,d,c,b,a,k,l,m,q]),{visualFamily:"toolstrip",width:70,mnemonicKeyNavDirection:"none",postCreate:function(){this.inherited(arguments);this._textField.set("visualFamily","toolstrip")},_setMinimumAttr:function(a){this.set("limits",{minimum:a,maximum:this.limits.maximum});this._set("minimum",a)},_setMaximumAttr:function(a){this.set("limits",{minimum:this.limits.minimum,maximum:a});this._set("maximum",a)},_setValueAttr:function(a){a<this.get("limits").minimum||
a>this.get("limits").maximum||(this._checkValueInLimits(a),this._textField.set("value",a+""),this._set("value",a))},_onKeyDown:function(a){this.inherited(arguments);a.keyCode===g.ENTER?(this.get("value")+""===this._textField.inputNode.value&&this.emit("recommit",{mwEventData:{value:this.get("value")}}),this.emit("restorefocustolastnonrefuseelement"),this.emit("commit",{})):a.keyCode===g.ESCAPE&&this.emit("restorefocustolastnonrefuseelement")},resize:function(){this.containerNode.style.width="calc(100% -  21px)";
this._textField.domNode.style.width="100%"}})})},"mw-form/Spinner":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/on dojo/keys dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-form/TextField mw-mixins/property/TagMixin mw-mixins/property/DisabledMixin mw-mixins/property/EditableMixin mw-mixins/property/FormatMixin mw-mixins/property/SizeMixin mw-mixins/property/ValidationMixin mw-mixins/property/VisualFamilyMixin mw-mixins/property/HorizontalAlignmentMixin mw-mixins/event/ChangeEventMixin mw-mixins/event/TypingEventMixin mw-mixins/ResizeMixin mw-mixins/mixinDependencyValidator dojo/text!./templates/Spinner.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H){var L=Number.MAX_VALUE,N=Number.NEGATIVE_INFINITY;return h(F.validate([a,k,l,m,q,p,r,s,t,u,v,w,x,B,A,D]),{baseClass:"mwWidget mwSpinner",templateString:H,width:150,height:22,value:100,step:1,errorText:"",horizontalAlignment:"right",_preventClick:!1,includeMinimum:!0,includeMaximum:!0,constructor:function(){this._textField=new n({horizontalAlignment:"right"});this.focusNode=this._textField.focusNode;this.inputNode=this._textField.inputNode;
this.own(this._textField);this.limits={minimum:0,maximum:Number.POSITIVE_INFINITY};this.own(this._textField.watch("value",f.hitch(this,function(a,b,c){isNaN(parseFloat(c))||this._set("value",parseFloat(c))})))},buildRendering:function(){this.inherited(arguments);this._textField.placeAt(this.containerNode,"first")},_setEditableAttr:function(a){if("boolean"!==typeof a)throw Error("Editable property expects a boolean");this._textField.set("editable",a);a?this.domNode.classList.remove("mwNonEditable"):
this.domNode.classList.add("mwNonEditable");this._set("editable",a)},_setDisabledAttr:function(a){this.inherited(arguments);this._textField.set("disabled",a)},_setHorizontalAlignmentAttr:function(a){this.inherited(arguments);this._textField.set("horizontalAlignment",a)},_setStepAttr:function(a){if("number"!==typeof a)throw Error("'step' property expects a Number!");this._set("step",a)},_setValueAttr:function(a){if(a<this.get("limits").minimum||a>this.get("limits").maximum)throw Error("'Value' must be numeric and fall within the range of 'Limits'.");
this._checkValueInLimits(a);this._textField.set("value",a+"");this._set("value",a)},_checkValueInLimits:function(a){if(this._rangeCheck(a)){this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled");this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");if(this.get("includeMaximum"))parseFloat(a)===this.get("limits").maximum&&this.incrementButtonNode.classList.add("mwIncrementButtonDisabled");else{var b=this._calculateIncrement(this.get("limits").maximum,-0.1);parseFloat(a)===
this.get("limits").maximum+b&&this.incrementButtonNode.classList.add("mwIncrementButtonDisabled")}this.get("includeMinimum")?parseFloat(a)===this.get("limits").minimum&&this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"):(b=this._calculateIncrement(this.get("limits").minimum,0.1),parseFloat(a)===this.get("limits").minimum+b&&this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"))}else if(this.get("includeMaximum")&&parseFloat(a)===this.get("limits").maximum||!this.get("includeMaximum")&&
parseFloat(a)<=this.get("limits").maximum)this.incrementButtonNode.classList.add("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");else if(this.get("includeMinimum")&&parseFloat(a)===this.get("limits").minimum||!this.get("includeMinimum")&&parseFloat(a)>=this.get("limits").minimum)this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"),this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled")},_getValueAttr:function(){return parseFloat(this._textField.get("value"))},
_setWidthAttr:function(a){this.inherited(arguments);this.resize()},_setLimitsAttr:function(a){if("object"!==typeof a)throw Error("'IncludeMinimum' property expects an 'Object'!");this._validateLimits(a);this._set("limits",a);this._applyConstraintsToValue()},_validateLimits:function(a){if("number"!==typeof a.maximum||"number"!==typeof a.minimum)throw Error("'Limits' expects an Object of numbers!");if(a.minimum>a.maximum)throw Error("'Minimum' should be less than maximum");},_setIncludeMinimumAttr:function(a){if("boolean"!==
typeof a)throw Error("'IncludeMinimum' property expects a 'Boolean'!");this._set("includeMinimum",a);this._applyConstraintsToValue()},_setIncludeMaximumAttr:function(a){if("boolean"!==typeof a)throw Error("'IncludeMaximum' property expects a 'Boolean'!");this._set("includeMaximum",a);this._applyConstraintsToValue()},_applyConstraintsToValue:function(){var a=this.get("includeMaximum")?this.get("limits").maximum:this.get("limits").maximum-this.get("step"),b=this.get("includeMinimum")?this.get("limits").minimum:
this.get("limits").minimum+this.get("step");this.get("limits").maximum<this.get("value")&&this.set("value",a);this.get("limits").minimum>this.get("value")&&this.set("value",b)},_getDomNodeForValidationClasses:function(){return this.domNode},postCreate:function(){this.inherited(arguments);this.set("value",this.value);this.own(c(this.domNode,"keydown",f.hitch(this,"_onKeyDown")),c(this.incrementButtonNodeWrapper,"click",f.hitch(this,function(){if(!this._preventClick){var a=parseFloat(this._textField.get("value"));
this._handleIncrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangeEvent("value",a,b)}})),c(this.decrementButtonNodeWrapper,"click",f.hitch(this,function(){if(!this._preventClick){var a=parseFloat(this._textField.get("value"));this._handleDecrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangeEvent("value",a,b)}})),c(this.incrementButtonNodeWrapper,"mousedown",f.hitch(this,this._onIncrementButtonMouseDown)),c(this.decrementButtonNodeWrapper,
"mousedown",f.hitch(this,this._onDecrementButtonMouseDown)),c(this.incrementButtonNodeWrapper,"mouseup, mouseout",f.hitch(this,this._onButtonMouseUp)),c(this.decrementButtonNodeWrapper,"mouseup, mouseout",f.hitch(this,this._onButtonMouseUp)),c(this._textField,"focusin",f.hitch(this._textField,function(){this.inputNode.select()})));this._textField.on("change",f.hitch(this,function(a){this._onChangeHandler(a)}));this._textField.on("typing",f.hitch(this,function(a){this._handleValidation(a.mwEventData.currentContent)}))},
_onChangeHandler:function(a){var b;a.preventDefault();a.stopPropagation();"normal"!==this.get("validationState")?this._revertToOldValue(a.mwEventData.oldValue):(b=a.mwEventData.oldValue,a=a.mwEventData.newValue,this._triggerChangeEvent("value",this._isNumeric(b)?parseFloat(b):b,this._isNumeric(a)?parseFloat(a):a),this._checkValueInLimits(a),this.set("value",this._isNumeric(a)?parseFloat(a):a))},startup:function(){this._textField.startup();this.inherited(arguments)},_getParentPopup:function(a){for(;a;){if(a.classList&&
a.classList.contains("dijitPopup"))return a;a=a.parentNode}return null},resize:function(){var a=e.position(this.domNode).w,b=e.position(this.buttonsContainerNode).w;if(0===b){var c=this._getParentPopup(this.buttonsContainerNode);if(null!==c){c.classList.add("dijitOffScreen");var d=g.get(c,"display");c.style.display="block";b=e.position(this.buttonsContainerNode).w;c.style.display=d}}e.getPadBorderExtents(this._textField.domNode);c=e.getPadBorderExtents(this.buttonsContainerNode);c=c.l+c.r;this.containerNode.style.width=
a-b+"px";this._textField.domNode.style.width=a-b-c+"px";this.inherited(arguments)},_onIncrementButtonMouseDown:function(){this._delayStart=setTimeout(f.hitch(this,function(){this._valueChangeTimer=setInterval(f.hitch(this,function(){var a=parseFloat(this._textField.get("value"));this._handleIncrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangingEvent("value",a,b)}),100);this._preventClick=!0}),300)},_triggerChangingEvent:function(a,b,c){this.emit("changing",
{mwEventData:{propertyName:a,oldValue:b,newValue:c}})},_onDecrementButtonMouseDown:function(){this._delayStart=setTimeout(f.hitch(this,function(){this._valueChangeTimer=setInterval(f.hitch(this,function(){var a=parseFloat(this._textField.get("value"));this._handleDecrement(this.get("step"));var b=parseFloat(this._textField.get("value"));this._triggerChangingEvent("value",a,b)}),100);this._preventClick=!0}),300)},_onButtonMouseUp:function(){clearInterval(this._valueChangeTimer);clearTimeout(this._delayStart);
this._preventClick=!1},_onKeyDown:function(a){a.keyCode===b.UP_ARROW?(a.preventDefault(),this._handleIncrement(this.get("step"))):a.keyCode===b.DOWN_ARROW?(a.preventDefault(),this._handleDecrement(this.get("step"))):a.keyCode===b.PAGE_UP?a.preventDefault():a.keyCode===b.PAGE_DOWN&&a.preventDefault()},_handleIncrement:function(a){var b;b=parseFloat(this._textField.get("value"))+a;this._rangeCheck(b)?(this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("value"))),
this.get("includeMaximum")?this.get("limits").maximum===b?this.incrementButtonNode.classList.add("mwIncrementButtonDisabled"):this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"):(this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"))):(this.get("includeMaximum")?(this._textField.set("value",this.get("limits").maximum),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("limits").maximum))):
(b=this._calculateIncrement(this.get("limits").maximum,-0.1),b=this.get("limits").maximum+b,this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(b))),this._disableIncrementButton(b,a))},_handleDecrement:function(a){var b;b=parseFloat(this._textField.get("value"))-a;this._rangeCheck(b)?(this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("value"))),
this.get("includeMinimum")?this.get("limits").minimum===b?this.decrementButtonNode.classList.add("mwDecrementButtonDisabled"):this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"):(this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"))):(this.get("includeMinimum")?(this._textField.set("value",this.get("limits").minimum),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(this.get("limits").minimum))):
(b=this._calculateIncrement(this.get("limits").minimum,0.1),b=this.get("limits").minimum+b,this._textField.set("value",b),!this._isInt(b)&&!this._isInt(this.get("step"))&&this._textField.setValueInDom(this._formatShort(b))),this._disableDecrementButton(b,a))},_calculateIncrement:function(a,b){var c=b;if(a===L||a===N||Infinity===a)return 0;for(;!1===this._rangeCheck(a+c,this.constraints);)c/=10;return c},_disableIncrementButton:function(a,b){this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled");
this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");this._rangeCheck(a+b)?(this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled"),this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled")):this.incrementButtonNode.classList.add("mwIncrementButtonDisabled")},_disableDecrementButton:function(a,b){this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled");this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled");this._rangeCheck(a-
b)?(this.decrementButtonNode.classList.remove("mwDecrementButtonDisabled"),this.incrementButtonNode.classList.remove("mwIncrementButtonDisabled")):this.decrementButtonNode.classList.add("mwDecrementButtonDisabled")},_rangeCheck:function(a){a=parseFloat(a);var b=!1===this.get("includeMinimum")?a>this.get("limits").minimum:a>=this.get("limits").minimum;a=!1===this.get("includeMaximum")?a<this.get("limits").maximum:a<=this.get("limits").maximum;return b&&a},_setRevertTimeout:function(a){return a||2E3},
_revertToOldValue:function(a){this._hiddenDiv=d.create("div",{},this.domNode);var b=e.getBorderExtents(this.domNode);this._hiddenDiv.style.top=-b.t+"px";this._hiddenDiv.style.right=-b.r+"px";this._hiddenDiv.style.bottom=-b.b+"px";this._hiddenDiv.style.left=-b.l+"px";this._hiddenDiv.style.position="absolute";this._hiddenDiv.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation()});setTimeout(f.hitch(this,function(){!0!==this._destroyed&&(this._textField.set("value",a),this._handleDisplayFormat(),
this.set("validationState","normal"),d.destroy(this._hiddenDiv))}),this._setRevertTimeout())},_handleValidation:function(a){parseFloat(a)<=this.get("limits").minimum&&!this.get("includeMinimum")||parseFloat(a)<this.get("limits").minimum&&this.get("includeMinimum")||parseFloat(a)>this.get("limits").maximum&&this.get("includeMaximum")||parseFloat(a)>=this.get("limits").maximum&&!this.get("includeMaximum")||this._containsNonNumericCharacter(a)||isNaN(parseFloat(a))?this.set("validationState","error"):
(this.set("validationState","normal"),this.validationTooltip&&this.validationTooltip.domNode.classList.remove("mwValidationFocused"))},_containsNonNumericCharacter:function(a){return a.split("").some(function(a){return-1==="0123456789.".indexOf(a)})},_isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},_isInt:function(a){return Number(a)===a&&0===a%1},_formatShort:function(a){return a.toFixed(4)},_qeTypeOverWithEnter:function(a){var b=this.get("value");this.set("value",a);this._triggerChangeEvent("value",
b,a)}})})},"mw-mixins/property/FormatMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/_FocusMixin"],function(h,f,g){h=h(null,{format:"",constructor:function(){this.displayValueFormatter=null},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwFormatMixin");this.set("format",this.get("format"))},startup:function(){this.inherited(arguments);this._handleDisplayFormat()},_setFormatAttr:function(e){if("string"!==typeof e)return Error("Format property expects a ''string");
this._set("format",e);this._handleDisplayFormat()},_handleDisplayFormat:function(){var e=this.get("format"),d=parseFloat(this._textField.get("value"));if(d||0===d)if(e.match("%*[0-9|.]d")||0<=e.indexOf("%i"))this._textField.setValueInDom(parseFloat(d).toFixed(4)+e.substr(e.indexOf("d")+1,e.length));else if(e.match("%*[0-9|.]f")){var c=parseFloat(e.replace(/(.*\.)(.*)(f.*)/,"$2"));c&&this._textField.setValueInDom(d.toFixed(c)+e.substr(e.indexOf("f")+1,e.length))}else this.displayValueFormatter&&this.displayValueFormatter(this.get("value")).then(f.hitch(this,
function(b){this._textField.setValueInDom(b)}))},_onBlur:function(){this.inherited(arguments);"normal"===this.get("validationState")&&this._handleDisplayFormat();this._formattedValueSet=!0},_onFocus:function(){this.inherited(arguments);this.get("disabled")||(!this._isInt(this.get("value"))||!this._isInt(this.get("step")))&&"normal"===this.get("validationState")&&this._textField.setValueInDom(this.get("value").toFixed(4));this._formattedValueSet=!1}});h._dependencies=[{mixin:g,orderDependent:!1}];
return h})},"MW/toolstrip/widgets/HorizontalSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/query ./_SliderPropertyMixin ./_SliderKeyBoardEventMixin ../ToolstripUtils ./external/HorizontalSlider ./_TooltipMixin ./_WidgetMixin ./_ValidationMixin mw-mixins/property/DisabledMixin MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin ../mixins/AcceptFocusMixin MW/uiframework/FocusManager".split(" "),function(h,f,g,e,d,
c,b,a,k,l,m,q,n,p,r,s,t){return h([k,c,b,l,m,q,n,p,r,s],{width:150,mnemonicKeyNavDirection:"vertical",_setPixelValue:function(b,c,d){if(!this.disabled&&!this.readOnly){var e=(this.maximum-this.minimum)/this.steps,f=[];b=Math.max(Math.min((this.maximum-this.minimum)*b/c+this.minimum,this.maximum),this.minimum);for(c=this.minimum;c<=this.maximum;c+=e)f.push(c);e=a.getClosestValue(f,b);b=b-e[0]>e[1]-b?e[1]:e[0];this._setValueAttr(b,d)}},_setWidthAttr:function(a){this._set("width",a);this._sliderResize()},
_setMajorTickLabelsAttr:function(a){this.inherited(arguments);this._sliderResize()},_sliderResize:function(){var b,c,e;e=this.get("width");"100%"===e?void 0===this.majorTickLabels?this.getParent()&&(c=this.getParent().get("width"),this._setWidthOnChildren(c)):0<this.majorTickLabels.length?(b=d(".vc-MajorTickLabels",this.containerNode)[0],c=b.childElementCount,e=b.children[0],b=b.children[c-1],e=a.computeWidth(e.textContent),b=a.computeWidth(b.textContent),e/=2,b/=2,c=this.getParent().get("width"),
this.domNode.style.marginLeft=e+"px",this.domNode.style.marginRight=b+"px",this.domNode.style.width=c+"px",this.sliderTrackNode.style.width="100%",this.containerNode.style.width="100%",this._set("width",c)):(c=this.getParent().get("width"),this.domNode.style.marginLeft="5px",this.domNode.style.marginRight="5px",this.domNode.style.width=c+"px",this.sliderTrackNode.style.width="100%",this.containerNode.style.width="100%"):this._setWidthOnChildren(e)},_setWidthOnChildren:function(a){this.sliderTrackNode.style.width=
a-5+"px";this.containerNode.style.width=a-5+"px";this.domNode.style.marginLeft="5px";this.domNode.style.marginRight="5px"},_getDomNodeForValidationClasses:function(){return this.sliderTrackNode},constrainTicksToScaleLimits:function(a,b,c){var d=[],e=[],f;void 0===a.length&&(a=[a]);for(f=0;f<a.length;f+=1)a[f]>=b[0]&&a[f]<=b[1]&&(d[d.length]=a[f],void 0!==c&&(e[e.length]=c[f]));return void 0!==c?{ticks:d,labels:e}:{ticks:d}},_adjustLabelContainerPositioning:function(){this.majorTickLabelDijit&&d(".dijitRuleLabelContainerH",
this.majorTickLabelDijit.domNode).forEach(function(b){var c=-1*(a.computeWidth(b.children[0].innerHTML)/2);b.style.marginLeft=c+"px"})},postCreate:function(){this.inherited(arguments);this.own(g(this,"mouseup",f.hitch(this,function(){this.valueChanged({value:this.value});this._mouseUp=!0})));this.own(g(this,"mouseout",f.hitch(this,function(){this._mouseUp=!1})));this.own(g(this,"mousedragreleased",f.hitch(this,function(){this._emittedValue!==this.value&&!this._mouseUp&&(this.valueChanged({value:this.value}),
this._emittedValue=this.value)})));this.own(g(this,"keydown",f.hitch(this,this._handleKeyDown)))},_handleKeyDown:function(a){this.inherited(arguments);a.keyCode===e.ESCAPE?this.emit("restorefocustolastnonrefuseelement"):a.keyCode===e.ENTER&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("commit",{}))},valueChanged:function(a){}})})},"MW/toolstrip/widgets/_SliderPropertyMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_setStepsAttr:function(f){this._set("steps",
f)},_setNumberOfTicksAttr:function(f){this._set("numberOfTicks",f);var g=this.minimum,e=[];if(1<f){for(;e.length<f-1;)e.push(g),g+=(this.maximum-this.minimum)/(this.numberOfTicks-1);e.push(this.maximum);this.set("minorTicks",e)}else 1===f?(e.push((this.maximum+this.minimum)/2),this.set("minorTicks",e)):this.set("minorTicks",[])},_setLabelsAttr:function(f){var g=this.minimum,e=[];this._set("labels",f);if(0<f.length){if(1===f.length)e.push((this.minimum+this.maximum)/2);else for(;g<=this.maximum;)e.push(g),
g+=(this.maximum-this.minimum)/(this.labels.length-1);this.set("majorTicks",e);this.set("majorTickLabels",f)}else this.set("majorTicks",[]),this.set("majorTickLabels",[])}})})},"MW/toolstrip/widgets/_SliderKeyBoardEventMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/aspect","dojo/keys","../ToolstripUtils"],function(h,f,g,e,d){return h(null,{constructor:function(){this.own(g.after(this,"postCreate",this._attachKeyBoardEvent,!0))},_attachKeyBoardEvent:function(){var c;this.own(f(this,
"keyup",function(b){if(!this.get("disabled")){var a=[],f;f=[];a=(this.maximum-this.minimum)/this.steps;for(c=this.minimum;c<=this.maximum;c+=a)f.push(c);b.keyCode===e.LEFT_ARROW||b.keyCode===e.PAGE_DOWN?(a=d.getClosestValue(f,this.get("value"))[0],b=f.indexOf(a),f=0===b?f[0]:f[b-1],this.set("value",f)):b.keyCode===e.RIGHT_ARROW||b.keyCode===e.PAGE_UP?(a=d.getClosestValue(f,this.get("value"))[1],b=f.indexOf(a),f=0===b?f[1]:b===f.length-1?f[f.length-1]:f[b+1],this.set("value",f)):b.keyCode===e.END?
(f=f[f.length-1],this.set("value",f)):b.keyCode===e.HOME&&(f=f[0],this.set("value",f))}}))}})})},"MW/toolstrip/widgets/external/HorizontalSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/query ./_AbstractSlider ./HorizontalRule ./HorizontalRuleLabels".split(" "),function(h,f,g,e,d,c,b){return h(d,{baseClass:"vc-slider vc-horizontalSlider",width:200,height:6,_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_thumbPositionParam1:"width",_thumbPositionParam2:"left",
_isScaleDirectionReverse:!1,orientation:"horizontal",getRuleLabelConstructor:function(){return b},_setWidthAttr:function(a){this.sliderTrackNode.style.width=a+"px";this.containerNode.style.width=a+"px";this._set("width",a)},getRuleConstructor:function(){return c},postCreate:function(){this.inherited(arguments);this.own(this.watch("width",f.hitch(this,"_adjustThumbPosition")),this.watch("fontSize",f.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontWeight",f.hitch(this,"_adjustLabelContainerPositioning")),
this.watch("fontFamily",f.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontStyle",f.hitch(this,"_adjustLabelContainerPositioning")))},_setMajorTickLabelsAttr:function(a){this.inherited(arguments);this._adjustLabelContainerPositioning()},_adjustLabelContainerPositioning:function(){this.majorTickLabelDijit&&e(".dijitRuleLabelContainerH",this.majorTickLabelDijit.domNode).forEach(function(a){var b=-1*(g.position(a).w/2);a.style.marginLeft=b+"px"})},_computePreferredWidth:function(){var a,
b;a=this.width+this.sliderThumbSize.w;b=this._computePreferredWidthOfMajorTickLabels();return Math.max(a,b)},_computePreferredX:function(){var a=this._adjustTrackAndContainerOffset();return this.location[0]-a},_computePreferredHeight:function(){var a=this._getDomNodeOfWidgetAtEnd();a&&(this._bottomWidgetPosition=g.position(a));return(a?this._bottomWidgetPosition.y+this._bottomWidgetPosition.h:this.sliderThumbSize.y+this.sliderThumbSize.h)-this.sliderThumbSize.y},_computePreferredY:function(){var a;
a=g.position(this.sliderTrackNode);this._bottomWidgetPosition?(a=this._bottomWidgetPosition.y-a.y-a.h+this._bottomWidgetPosition.h,this._bottomWidgetPosition=null):a=this.sliderThumbSize.h/3;return this.location[1]-a},_computePreferredWidthOfMajorTickLabels:function(){var a=0;if(this.majorTickLabelDijit)var a=e(".dijitRuleLabel",this.containerNode),b=0,b=g.position(a[0]),c=g.position(this.sliderTrackNode),b=b.x<c.x-this.sliderThumbSize.w/2?b.x:c.x-this.sliderThumbSize.w/2,a=g.position(a[a.length-
1]),a=a.x-b+a.w;return a},_adjustTrackAndContainerOffset:function(){var a=e(".dijitRuleLabel",this.containerNode),b=this.sliderThumbSize.w/2;if(0===a.length)b=this.sliderThumbSize.w/2;else{for(var c=[],d=0;d<a.length;d+=1)c[d]=g.position(a[d]).x;c=Math.min.apply(null,c);a=g.position(this.sliderTrackNode);c<a.x-this.sliderThumbSize.w/2&&(b=a.x-c)}this.sliderTrackNode.style.left=b+"px";this.containerNode.style.left=b+"px";return b}})})},"MW/toolstrip/widgets/external/_AbstractSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/_base/event dijit/focus dijit/form/_FormValueWidget dijit/_Container dojo/text!./templates/Slider.html dojo/dnd/Moveable ./_SliderThumbMover".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h([c,b],{templateString:a,sliderTrackNode:null,sliderThumbNode:null,value:0,maximum:100,minimum:0,THUMB_WIDTH:14,preferredSize:{width:0,height:0,left:0,bottom:0},_setHeightAttr:function(a){this.sliderTrackNode.style.height=a+"px";this._set("height",a)},_setOuterWidthAttr:function(a){this.domNode.style.width=a+"px"},_setOuterHeightAttr:function(a){this.domNode.height=a+"px"},_setLocationAttr:function(a){this._set("location",a)},_setPixelValue:function(a,b,c){!this.disabled&&
!this.readOnly&&this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*a/b+this.minimum,this.maximum),this.minimum),c)},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;this.inherited(arguments)},_setMinimumAttr:function(a){this._set("minimum",a)},_setMaximumAttr:function(a){this._set("maximum",a)},_setMajorTicksAttr:function(a){if(this.majorTickDijit&&(this.majorTickDijit.destroy(),this.majorTickDijit=null,0===a.length)){this._set("majorTicks",a);return}var b=this.constrainTicksToScaleLimits(a,
[this.get("minimum"),this.get("maximum")]),c=this.getRuleConstructor();0===b.ticks.length?this._set("majorTicks",a):(this._set("majorTicks",b.ticks.slice(0)),this.majorTickDijit=new c({"class":"vc-MajorTickMarks",ticks:this.majorTicks,minimum:this.minimum,maximum:this.maximum,count:this.majorTicks.length}),this.majorTickDijit.placeAt(this.containerNode))},_setMinorTicksAttr:function(a){if(this.minorTickDijit&&(this.minorTickDijit.destroy(),this.minorTickDijit=null,0===a.length)){this._set("minorTicks",
a);return}var b=this.constrainTicksToScaleLimits(a,[this.get("minimum"),this.get("maximum")]),c=this.getRuleConstructor();0===b.ticks.length?this._set("minorTicks",a):(this._set("minorTicks",b.ticks.slice(0)),this.minorTickDijit=new c({"class":"vc-MinorTickMarks",count:this.minorTicks.length,ticks:this.minorTicks,minimum:this.minimum,maximum:this.maximum}),this.minorTickDijit.placeAt(this.containerNode))},_setMajorTickLabelsAttr:function(a){this.majorTickLabelDijit&&(this.majorTickLabelDijit.destroy(),
this.majorTickLabelDijit=null);if(0===a.length||0===a.join("").trim().length)this._set("majorTickLabels",a);else{var b=this.constrainTicksToScaleLimits(this.get("majorTicks"),[this.get("minimum"),this.get("maximum")],a),c=this.getRuleLabelConstructor();0===b.labels.length?this._set("majorTickLabels",a):(this._set("majorTickLabels",b.labels.slice(0)),this.majorTickLabelDijit=new c({"class":"vc-MajorTickLabels",minimum:this.minimum,maximum:this.maximum,labels:this.majorTickLabels,count:this.majorTickLabels.length,
ticks:this.majorTicks}),this.majorTickLabelDijit.placeAt(this.containerNode))}},_onTrackClick:function(a){if(!this.disabled&&!(this.readOnly||a.target===this.sliderThumbNode)){d.focus(this.sliderThumbNode);e.stop(a);var b=g.position(this.sliderTrackNode),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._isScaleDirectionReverse&&(c=b[this._pixelCount]-c);this._setPixelValue(c,b[this._pixelCount],!0);this.emit("mouseclicked");this._thumbMoveable.onMouseDown(a)}},postCreate:function(){this.inherited(arguments);
var a=h(l,{widget:this});this._thumbMoveable=new k(this.sliderThumbNode,{mover:a});this.own(this.watch("value",f.hitch(this,"_adjustThumbPosition")));this.own(this.watch("minimum",f.hitch(this,"_adjustThumbPosition")));this.own(this.watch("maximum",f.hitch(this,"_adjustThumbPosition")));this._adjustThumbPosition()},_adjustThumbPosition:function(){var a=(this.value-this.minimum)/(this.maximum-this.minimum),a=100*a-100*(this.THUMB_WIDTH/this[this._thumbPositionParam1]/2);this.sliderThumbNode.style[this._thumbPositionParam2]=
a+"%"},computePreferredSize:function(){var a,b,c,d;this.sliderThumbSize=g.position(this.sliderThumbNode);c=this._computePreferredWidth();a=this._computePreferredX();d=this._computePreferredHeight();b=this._computePreferredY();this.set("preferredSize",{width:c,height:d,left:a,bottom:b})},_getDomNodeOfWidgetAtEnd:function(){var a;this.majorTickLabelDijit?a=this.majorTickLabelDijit.domNode:this.majorTickDijit?a=this.majorTickDijit.domNode:this.minorTickDijit&&(a=this.minorTickDijit.domNode);return a}})})},
"MW/toolstrip/widgets/external/_SliderThumbMover":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/dnd/Mover"],function(h,f,g){return h(g,{onMouseMove:function(e){var d=this.widget,c=d._sliderTrackDimensions;c||(c=d._sliderTrackDimensions=f.position(d.sliderTrackNode,!0));e=e[d._mousePixelCoord]-c[d._startingPixelCoord];d._isScaleDirectionReverse&&(e=c[d._pixelCount]-e);d._setPixelValue(e,c[d._pixelCount],!1);this._wasDragged=!0;d.emit("mousedragging")},onMouseUp:function(){var e=
this.widget;this._wasDragged?(e.emit("mousedragreleased"),this._wasDragged=!1):e.emit("mouseclicked");this.inherited(arguments)},destroy:function(){this.widget._sliderTrackDimensions=null;this.inherited(arguments)}})})},"MW/toolstrip/widgets/external/HorizontalRule":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin"],function(h,f,g){return h("dijit.form.HorizontalRule",[f,g],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,
container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',ticks:null,minimum:0,maximum:100,_isHorizontal:!0,isAddQeIdForTickBased:!0,_qeIdSuffix:"id\x3d",_genHTML:function(e,d){var c="";this.isAddQeIdForTickBased&&this.ticks&&(c='"'+this._qeIdSuffix+'"'+this["class"]+"_"+this.ticks[d]);return this._positionPrefix+e+this._positionSuffix+this.ruleStyle+c+this._suffix},buildRendering:function(){this.inherited(arguments);
var e="",d,c;if(this.ticks){c=this.maximum-this.minimum;for(d=0;d<this.count;d+=1)e+=this._genHTML(100*((this.ticks[d]-this.minimum)/c),d)}else{e=this._genHTML(0,0);c=100/(this.count-1);for(d=1;d<this.count-1;d+=1)e+=this._genHTML(c*d,d);e+=this._genHTML(100,this.count-1)}this.domNode.innerHTML=e}})})},"MW/toolstrip/widgets/external/HorizontalRuleLabels":function(){define(["dojo/_base/declare","dojo/number","dojo/query","./HorizontalRule"],function(h,f,g,e){return h("dijit.form.HorizontalRuleLabels",
e,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"',_suffix:"\x3c/div\x3e\x3c/div\x3e",_qeIdSuffix:"id\x3d",_calcPosition:function(d){return d},_genHTML:function(d,
c){var b=this._qeIdSuffix+'"'+this["class"]+"_"+this.labels[c]+'"\x3e';return this._positionPrefix+this._calcPosition(d)+this._positionSuffix+this.labelStyle+this._labelPrefix+b+this.labels[c]+this._suffix},getLabels:function(){var d=this.labels,c,b,a;!d.length&&this.srcNodeRef&&(d=g("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!d.length&&1<this.count){c=this.minimum;b=(this.maximum-c)/(this.count-1);for(a=0;a<this.count;a+=1)d.push(a<this.numericMargin||a>=this.count-
this.numericMargin?"":f.format(c,this.constraints)),c+=b}return d},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}})})},"MW/toolstrip/form/RadioButton":function(){define("dojo/_base/declare mw-form/RadioButton MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin MW/toolstrip/mixins/property/ButtonGroupMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h(m.validate([f,g,e,d,c,b,a,k,l]),{visualFamily:"toolstrip",height:22})})},"MW/toolstrip/form/CheckBox":function(){define("dojo/_base/declare mw-form/CheckBox MW/toolstrip/mixins/property/MnemonicMixin MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/TypeMixin MW/toolstrip/mixins/property/DescriptionOverrideMixin MW/toolstrip/mixins/property/TextMixin MW/toolstrip/mixins/property/TextOverrideMixin mw-mixins/property/ShortcutMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(l.validate([f,g,e,d,c,b,a,k]),{visualFamily:"toolstrip",height:22})})},"MW/toolstrip/widgets/ToolbarWrapper":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/ToolbarWrapper.html ./_WidgetMixin".split(" "),function(h,f,g,e,d,c){return h([f,g,e,c],{templateString:d})})},"MW/toolstrip/widgets/MenubarWrapper":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dojo/text!./templates/MenubarWrapper.html ./_WidgetMixin".split(" "),
function(h,f,g,e,d,c){return h([f,g,e,c],{templateString:d})})},"MW/toolstrip/widgets/gallery/GalleryItem":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-geometry dojo/dom-construct dojo/_base/window dojo/on dojo/mouse dojo/touch dijit/popup dijit/_WidgetBase dijit/_CssStateMixin dijit/_TemplatedMixin dojo/text!./templates/GalleryItem.html ../../constants/gallery/GalleryViewConstants ../../constants/gallery/ItemLocationConstants ../../constants/TypeConstants mw-mixins/property/IconMixin ../_TooltipMixin ../_WidgetMixin mw-mixins/event/ChangeEventMixin mw-mixins/property/DisabledMixin mw-mixins/AccessibilityClickMixin MW/toolstrip/ToolstripUtils MW/toolstrip/mixins/property/MnemonicKeyNavDirectionMixin MW/toolstrip/mixins/property/RemovableMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H){return h([m,q,n,u,v,w,x,B,A,F,H],{baseClass:"mwWidget mwGalleryItem",templateString:p,constructor:function(a){a=a||{};this.disabled=!!a.disabled;this._favButtonClickConnection=null;this._handleFavButtonClick=f.hitch(this,function(){this.favButtonPushed()})},postCreate:function(){var a=this;this.own(b(this.itemWrapperNode,"click",function(){a.disabled||a.itemPushed()}));this.inherited(arguments);this.attachFavButtonClickHandler()},_setIsFavoriteAttr:function(a){a?
this.domNode.classList.add("isFavorite"):this.domNode.classList.remove("isFavorite");this._set("isFavorite",a)},_setDisplayStateAttr:function(a){var b=this.getParent(),b=b&&b.getParent();if(!b||!(b.get("type")===t.GALLERY_POPUP&&b.get("displayState")!==a))this._set("displayState",a),this._updateItemDimensions(),this._updateText(),"DATA_URI"===this._getIconType(this.icon)&&this._updateIconNodeSize()},_updateItemDimensions:function(){this.displayState===r.LIST?this.domNode.style.width="auto":this._getPropertyFromAncestor("galleryItemWidth")&&
(this.domNode.style.width=this._getPropertyFromAncestor("galleryItemWidth")+"px")},attachFavButtonClickHandler:function(){this._favButtonClickConnection=b(this.favButtonNode,"click",this._handleFavButtonClick)},detachFavButtonClickHandler:function(){this._favButtonClickConnection&&(this._favButtonClickConnection.remove(),this._favButtonClickConnection=null)},_setTextAttr:function(a){this._set("text",a);this._updateText()},_setTextOverrideAttr:function(a){this._set("textOverride",a);this._updateText()},
_updateText:function(){var a;this.textOverride?a=this.textOverride:this.text&&(a=this.text);a&&(this.displayState===r.LIST&&(a=a.replace(/\n/g," "),this.shortcut&&(a=a+" "+this.shortcut)),this.labelNode.textContent=a,this._updateTooltip())},_getLocation:function(){var a=this.getParent(),b=!1;if(a)switch(a.type){case t.GALLERY_CATEGORY:b=s.CATEGORY;break;case t.GALLERY_FAVORITE_CATEGORY:b=s.FAVORITES;break;case t.GALLERY:b=s.GALLERY}return b},_getPropertyFromAncestor:function(a){var b=!1,c=this._getLocation();
if(c===s.GALLERY)b=this.getParent()[a];else if(c===s.CATEGORY||c===s.FAVORITES)this.getParent().getParent()&&(b=this.getParent().getParent()[a]);return b},itemPushed:function(){!1!==this.get("closePopupOnClick")&&l.close()},favButtonPushed:function(){},_setIconAttr:function(a){this.inherited(arguments);this.iconNode.classList.remove("dijitInline");"DATA_URI"===this._getIconType(a)&&this._updateIconNodeSize()},_updateIconNodeSize:function(){var a,b,c,e;this.icon&&1===this._getPropertyFromAncestor("galleryItemRowCount")&&
(e=this.iconNode,a=d.create("img",{src:this.icon.replace(/"/g,"").replace(/url\(|\)$/ig,"")}),b=this._getPropertyFromAncestor("galleryItemWidth"),g.after(a,"onload",function(){c=a.width>b-4?b-4:a.width;e.style.width=c+"px";e.style.height=a.height+"px"}))},_qeClick:function(){this.itemPushed()},_qeFavoriteClick:function(){this._handleFavButtonClick()}})})},"MW/toolstrip/constants/gallery/ItemLocationConstants":function(){define([],function(){return{GALLERY:"Gallery",FAVORITES:"Favorites",CATEGORY:"Category"}})},
"MW/toolstrip/widgets/gallery/ToggleGalleryItem":function(){define("dojo/_base/declare ./GalleryItem ../../constants/TypeConstants mw-mixins/event/ChangeEventMixin mw-mixins/property/CheckedMixin mw-mixins/property/ButtonGroupMixin MW/toolstrip/mixins/property/ButtonGroupMixin MW/toolstrip/mixins/property/RemovableMixin".split(" "),function(h,f,g,e,d,c,b,a){return h([f,e,d,c,b,a],{baseClass:"mwWidget mwToggleGalleryItem",postCreate:function(){this.set("checkableNode",this.itemWrapperNode);this.inherited(arguments)},
_setCheckedAttr:function(){this.inherited(arguments);if(!this._destroyed){var a=this.getParent(),b=null;a&&(a.type===g.GALLERY&&a.scrollToSelection?a.getChildren().some(function(a){return!0===a.get("checked")},this)||a.refresh():(b=a.getParent())&&b.type===g.GALLERY_POPUP&&b.scrollToSelection&&this.checked&&!b._invokingGallery.getChildren().some(function(a){return a.get("actionId")===this.get("actionId")},this)&&b.galleryStateChanged())}}})})},"MW/uiframework/hashes/ControlEventsHash":function(){define(["dojo/_base/lang",
"MW/toolstrip/hashes/ControlEventsHash"],function(h,f){var g={};h.mixin(g,f);return g})},"MW/toolstrip/hashes/ControlEventsHash":function(){define(["../constants/TypeConstants"],function(h){var f={};f[h.TOOLSTRIP]={actionEvents:[],componentEvents:["toolstripPlaced"]};f[h.TAB]={actionEvents:[],componentEvents:["remove"]};f[h.PUSH_BUTTON]={actionEvents:["buttonPushed"],componentEvents:[]};f[h.QAB]={actionEvents:[],componentEvents:["restoreFactoryControls"]};f[h.QAB_PUSH_BUTTON]=f[h.PUSH_BUTTON];f[h.TOGGLE_BUTTON]=
{actionEvents:[],componentEvents:[]};f[h.QAB_TOGGLE_BUTTON]=f[h.TOGGLE_BUTTON];f[h.DROP_DOWN_BUTTON]={actionEvents:[],componentEvents:["dropDownPerformed"]};f[h.QAB_DROP_DOWN_BUTTON]=f[h.DROP_DOWN_BUTTON];f[h.SPLIT_BUTTON]={actionEvents:["buttonPushed"],componentEvents:["dropDownPerformed"]};f[h.COLOR_PICKER_BUTTON]={actionEvents:["valueChanged"],componentEvents:[]};f[h.QAB_SPLIT_BUTTON]=f[h.SPLIT_BUTTON];f[h.TOGGLE_SPLIT_BUTTON]={actionEvents:[],componentEvents:["dropDownPerformed"]};f[h.QAB_TOGGLE_SPLIT_BUTTON]=
f[h.TOGGLE_SPLIT_BUTTON];f[h.COMBO_BOX]={actionEvents:"dropDownPerformed focusGained focusLost typing textCancelled recommit".split(" "),componentEvents:[]};f[h.POPUP_LIST]={actionEvents:[],componentEvents:["onOpen","onClose"]};f[h.LIST_ITEM]={actionEvents:["itemPushed"],componentEvents:["remove"]};f[h.LIST_ITEM_WITH_POPUP]={actionEvents:[],componentEvents:["dropDownPerformed"]};f[h.LIST_ITEM_WITH_CHECKBOX]={actionEvents:[],componentEvents:["closeRequest"]};f[h.TEXT_FIELD]={actionEvents:["focusGained",
"focusLost","typing","textCancelled","recommit"],componentEvents:[]};f[h.TEXT_AREA]={actionEvents:["focusGained","focusLost"],componentEvents:[]};f[h.LIST_ITEM_WITH_TEXTFIELD]={actionEvents:"focusGained focusLost typing commit recommit textCancelled itemPushed".split(" "),componentEvents:[]};f[h.HORIZONTAL_SLIDER]={actionEvents:["valueChanged"],componentEvents:[]};f[h.SPINNER]={actionEvents:["valueChanged","recommit"],componentEvents:[]};f[h.GALLERY]={actionEvents:[],componentEvents:["refresh"]};
f[h.GALLERY_POPUP]={actionEvents:[],componentEvents:["galleryStateChanged"]};f[h.GALLERY_CATEGORY]={actionEvents:[],componentEvents:["categoryMoved"]};f[h.GALLERY_FAVORITE_CATEGORY]={actionEvents:[],componentEvents:["itemMoved"]};f[h.GALLERY_ITEM]={actionEvents:["itemPushed"],componentEvents:["favButtonPushed","remove"]};f[h.TOGGLE_GALLERY_ITEM]={actionEvents:[],componentEvents:["favButtonPushed","remove"]};f[h.QA_GROUP]={actionEvents:[],componentEvents:["itemMoved"]};f[h.SPLIT_BUTTON_WITH_DISABLE_OVERRIDE]=
f[h.SPLIT_BUTTON];return f})},"MW/uiframework/hashes/PeerNodeWidgetPropertiesHash":function(){define(["dojo/_base/lang","MW/toolstrip/hashes/PeerNodeWidgetPropertiesHash"],function(h,f){var g={};h.mixin(g,f);Object.keys(g).forEach(function(e){Object.keys(g[e]).forEach(function(d){g[e][g[e][d]]=d})});return g})},"MW/toolstrip/hashes/PeerNodeWidgetEventsHash":function(){define(["../constants/TypeConstants"],function(h){var f={};f[h.PUSH_BUTTON]={buttonPushed:"click"};f[h.DROP_DOWN_BUTTON]={dropDownPerformed:"dropdownclick"};
f[h.SPLIT_BUTTON]={dropDownPerformed:"dropdownclick",buttonPushed:"click"};f[h.COLOR_PICKER_BUTTON]={valueChanged:"change"};f[h.TOGGLE_SPLIT_BUTTON]={dropDownPerformed:"dropdownclick"};f[h.QAB_PUSH_BUTTON]=f[h.PUSH_BUTTON];f[h.QAB_DROP_DOWN_BUTTON]=f[h.DROP_DOWN_BUTTON];f[h.QAB_SPLIT_BUTTON]=f[h.SPLIT_BUTTON];f[h.QAB_TOGGLE_SPLIT_BUTTON]=f[h.TOGGLE_SPLIT_BUTTON];f[h.TEXT_FIELD]={focusGained:"focusgained",focusLost:"focuslost",typing:"typing",textCancelled:"textcancelled"};f[h.TEXT_AREA]={focusGained:"focusgained",
focusLost:"focuslost"};f[h.COMBO_BOX]={focusGained:"focus",focusLost:"blur",typing:"typing",textCancelled:"textcancelled",dropDownPerformed:"dropdownclick"};f[h.POPUP_LIST]={onOpen:"open",onClose:"close"};f[h.SPINNER]={valueChanged:"change"};f[h.LIST_ITEM]={itemPushed:"click"};f[h.LIST_ITEM_WITH_TEXTFIELD]={focusGained:"focusgained",focusLost:"focuslost",typing:"typing",commit:"commit",recommit:"recommit",textCancelled:"textcancelled",itemPushed:"itempushed"};f[h.LIST_ITEM_WITH_POPUP]={dropDownPerformed:"dropdownclick"};
f[h.LIST_ITEM_WITH_CHECKBOX]={closeRequest:"closeRequest"};return f})},"MW/toolstrip/hashes/ToolstripCollapseTriggers":function(){define(["../constants/TypeConstants"],function(h){var f={};f[h.PUSH_BUTTON]={events:["buttonPushed"],properties:[]};f[h.SPLIT_BUTTON]={events:["buttonPushed"],properties:[]};f[h.TOGGLE_BUTTON]={events:[],properties:["checked"]};f[h.LIST_ITEM]={events:["itemPushed"],properties:[]};f[h.LIST_ITEM_WITH_CHECKBOX]={events:["closeRequest"],properties:[]};f[h.COMBO_BOX]={events:[],
properties:["value"]};f[h.CHECK_BOX]={events:[],properties:["checked"]};f[h.RADIO_BUTTON]={events:[],properties:["checked"]};f[h.SPLIT_BUTTON_WITH_DISABLE_OVERRIDE]={events:["buttonPushed"],properties:[]};f[h.GALLERY_ITEM]={events:["itemPushed"],properties:[]};f[h.TOGGLE_GALLERY_ITEM]={events:[],properties:["checked"]};return f})},"MW/uiframework/supportedUIBuilderFunctions":function(){define({fromModelManager:"create destroy add remove get set exists indexOf getChildrenIds getParentId isAnOrphan addEventCallback addPropertySetCallback createPopupsFromConfig addTabGroupFromConfig createGalleryPopupFromConfig addGalleryItemToFavorites removeGalleryItemFromFavorites getGalleryState setGalleryState getQABState setQABState widgetByTag tagToId showPopup addToolstripFromConfig placeToolstripAt selectTab selectFirstTabInTabGroup getMenubarWrapperWidget getToolbarWrapperWidget".split(" "),
fromWidgetManager:["refreshGallery","isAnyPopupOpen","closeAllOpenPopups"]})},"MW/rtc/plugins/goto/GotoUtilities":function(){define([],function(){return{gotoLineColumn:function(h,f,g,e,d){var c=f.getNumberOfCodeLines();0!=c&&(e>c?e=c:1>e&&(e=1),f=f.getLineNumberFromCodeLineNumber(e)+1,h=h.getLineNode(f-1).getText().length+1,d>h?d=h:1>d&&(d=1),g.setLineColumn(f,d,!0))},sortFunctionDeclarations:function(h,f){var g=h.map(function(d,c){return{elem:d,idx:c}}),e=f?g.shift():null;g.sort(function(d,c){var b=
d.elem.getName().toLocaleLowerCase(),a=c.elem.getName().toLocaleLowerCase(),b=b.localeCompare(a);return 0!==b?b:d.idx-c.idx});e&&g.unshift(e);return g.map(function(d){return d.elem})}}})},"MW/rtc/plugins/htmlmime/HTMLMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HTMLMimeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/htmlmime/HTMLMimeConverter":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/cutcopypaste/mime/MimeConverter MW/rtc/plugins/htmlmime/DocumentBuilder".split(" "),
function(h,f,g,e,d,c,b){return f(c,{_PRIORITY:50,SKIP_NODES:["META","LINK","#comment","STYLE"],constructor:function(){this._handlers=[];this._textHandlers=[];this._preprocessors=[]},getType:function(){return d.HTML},priority:function(){return this._PRIORITY},setDefaultParagraphFactory:function(a){this._defaultParagraphFactory=a},registerDocumentPreprocessor:function(a){this._preprocessors.push(a)},registerNodeHandler:function(a,b,c){"string"===typeof a&&(a=[a]);this._handlers.push(g.mixin({acceptedNodeNames:a,
convertNode:b,priority:c||0},b));this._handlers=this._handlers.sort(function(a,b){return b.priority-a.priority})},registerTextHandler:function(a,b){this._textHandlers.push({convertText:a,priority:b||0});this._textHandlers=this._textHandlers.sort(function(a,b){return b.priority-a.priority})},convertFromMimeData:function(a){if(this._defaultParagraphFactory){a=a.replace(/<\/html>[\s\S]*/,"\x3c/html\x3e");var c=document.createElement("iframe");c.style.visibility="hidden";document.body.appendChild(c);
c.sandbox="allow-same-origin";c.contentDocument.documentElement.innerHTML=a;a=c.contentDocument.documentElement.querySelector("head");e.create("style",{type:"text/css",textContent:"pre {font-family: monospace }\nbody {font-family: 'Arial', 'Helvetica', sans-serif}"},a,"first");var d=c.contentDocument.body;this._preprocessors.forEach(function(a){a(d)});this._builder=new b(this._defaultParagraphFactory);this._traverseDOM(d);document.body.removeChild(c);c=this._builder.getDocumentFragment();return 0===
c.length?void 0:c}},_traverseDOM:function(a){var b=this._builder.getActiveNode();this._enterNode(a);a=a.firstChild;for(var c;a;)"#text"===a.nodeName?(c=a.textContent)&&this._callTextConverter(a):0>this.SKIP_NODES.indexOf(a.nodeName)&&this._traverseDOM(a),a=a.nextSibling;b?this._builder.popTo(b):this._builder.getActiveNode()&&(this._builder.isImplicitParagraph()?this._builder.setActiveNode(this._builder.getLastParagraph()):this._builder.leaveParagraph())},_callTextConverter:function(a){this._textHandlers.forEach(function(b){b.convertText(a,
this._builder)},this)},_enterNode:function(a){h.some(this._handlers,function(b){if(!b.convertNode||0>b.acceptedNodeNames.indexOf(a.nodeName))return!1;b.convertNode(a,this._builder)},this)}})})},"MW/rtc/plugins/htmlmime/DocumentBuilder":function(){define(["dojo/_base/array","dojo/_base/declare"],function(h,f){return f(null,{constructor:function(f){this._defaultParagraphFactory=f;this._content=[];this._isImplicitParagraph=!1},getDocumentFragment:function(){this.leaveParagraph();return h.map(this._content,
function(f){return f.serialize()})},getActiveNode:function(){return this._activeNode},isInParagraph:function(){return!!this.getActiveNode()},getLastParagraph:function(){return this._content[this._content.length-1]},appendNode:function(f){this._activeNode||(this.appendParagraph(),this._isImplicitParagraph=!0);this._activeNode.children.push(f)},appendInnerNode:function(f){this.appendNode(f);this._activeNode=f},setActiveNode:function(f){this._activeNode!==f&&(this._activeNode&&0===this._activeNode.children.length&&
this._removeNode(this._activeNode),this._activeNode=f)},appendParagraph:function(f){this._isImplicitParagraph=!1;var e=this.getLastParagraph();e&&0===e.children.length&&this._removeNode(e);this._activeNode=f||this._defaultParagraphFactory();this._content.push(this._activeNode)},_removeNode:function(f){var e,d=this.getParent(f);d?(e=d.children.indexOf(f),d.children.splice(e,1)):(e=this._content.indexOf(f))&&this._content.splice(e,1);this._activeNode===f&&(this._activeNode=null)},getParent:function(f){var e;
h.some(this._content,function(d){return e=this._searchParent(f,d)},this);return e},isImplicitParagraph:function(){return this._isImplicitParagraph},_searchParent:function(f,e){if(!e.children)return!1;if(0<=e.children.indexOf(f))return e;var d;h.some(e.children,function(c){return d=this._searchParent(f,c)},this);return d},leaveParagraph:function(){this.setActiveNode(null)},popTo:function(f){for(var e=this._activeNode;e&&e!==f;)e=this.getParent(e);this.setActiveNode(e)}})})},"MW/rtc/plugins/hyperlink/HyperlinkProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/hyperlink/Hyperlink","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.eventhandler rtc.view rtc.cursor rtc.internalhyperlinkservice rtc.textnodeservice".split(" ")}},createInstance:function(e,d,c,b,a,g,h){return new f(e,d,c,b,a,g,h)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/hyperlink/Hyperlink":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has dojo/mouse dojo/on MW/rtc/model/DocumentUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/DocumentEvent MW/rtc/model/Position MW/rtc/plugins/richtext/nodes/leaf/RichTextNode ./model/HyperlinkNode".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(null,{constructor:function(a,b,d,e,h,k,l){this._internalDocument=a;this._document=b;this._eventHandler=d;this._view=e;this._cursor=h;this._hyperlinkService=k;this._textNodeService=l;this._handles=[];this._handles.push(c(e.getDomtarget(),"a.hyperlinkNode:click, a.hyperlinkNode:auxclick",f.hitch(this,this._handleClick)));this._handles.push(g.after(this._document,"onDirectedDeletion",f.hitch(this,"_onDelete"),!0))},_handleClick:function(a){var b;a.preventDefault();
if(e("mac")?!a.ctrlKey:a.ctrlKey){if(!this._cursor.hasSelection()&&(!d.isRight(a)&&!a.altKey)&&(b=this._view.getCoordinateFromEvent(this._view.fixEvent(a)),b=this._view.getPositionFromCoordinate(b),b=b.getNode().parent.hyperlink))this._hyperlinkService.openUrl(b),a.stopPropagation(),a.preventDefault()}else a.stopPropagation(),a.preventDefault()},_onDelete:function(a,b){if(!this._cursor.hasSelection()&&b.isLocal){var c=this._getHyperlinkByTextNode(b.startNode);if(c){if(-1===a&&b.endNode===c.endNode()&&
b.endPos===b.endNode.maxOffset())return this.performEditAction(c,null),!0;if(1===a&&b.startNode===c.startNode()&&0===b.startPos)return this._cursor.setPosition(c,c.maxOffset()),this._cursor.fixAnchor(),this._cursor.setPosition(c),!0}}},hyperlinkUnderCursor:function(){var a=this._cursor.selectionInfo(),c=a.startNode,d=this._getHyperlinkByTextNode(c);return d&&c.parent===a.endNode.parent?a.isNull&&b.isEdgeOfTextLevelContainer(c,a.startPos)?null:d:null},_getHyperlinkByTextNode:function(a){return!a.isTextNode()?
null:(a=a.parent)&&a instanceof q?a:null},_buildHyperlink:function(a){var b=new m({text:a.displayText});return new q([b],{hyperlink:a.targetUrl})},_removeHyperlink:function(a){var b,c;a||(a=this.hyperlinkUnderCursor());if(a){b=this._cursor.getPosition();c=a.startPosition();var d=this._textNodeService.createTextNodeForPosition("",c);c=this._internalDocument.insertAtPosition(d,c);c=c.insertedRange.getStartPosition();d=this._internalDocument.removeChildren(a);this._internalDocument.deleteNode(a,c);this._internalDocument.insertAtPosition(d,
c);this._cursor.setPosition(b)}},_openHyperlink:function(){var a;if(a=this.hyperlinkUnderCursor())a=a.hyperlink,this._hyperlinkService.openUrl(a)},performEditAction:function(b,c){var d=this._cursor.getNode().rootContainer(),d=this._internalDocument.getLineNumber(d),e=this._document.startEdit(),f=[],g=[];if(b)!c||""===c.targetUrl?this._removeHyperlink(b):(f=this._cursor.position.getNode().offsetInContainer(b)+this._cursor.position.getOffset(),this._cursor.collapseSelection(),this._replaceDisplayText(b,
c.displayText),f>c.displayText.length&&(f=c.displayText.length),this._internalDocument.changeNodeAttributes(b,{hyperlink:c.targetUrl}),this._cursor.setPosition(b.children[0],f)),this._nodeBeingEdited=null,f=g=[k.create(d,d)];else{var g=this._cursor.hasSelection(),h=this._cursor.selectionInfo(),m=this._buildHyperlink(c),q=new l(h.endNode,h.endPos),B=this._internalDocument.insertAtPosition(m,q),f=f.concat(B.events),q=m.rootContainer()!==q.node.rootContainer();g&&!q&&this._internalDocument.deleteSelection(h);
this._cursor.releaseAnchor(!0);g&&(this._cursor.releaseAnchor(!0),this._cursor.setPosition(m,0),this._cursor.fixAnchor());this._cursor.setPosition(m,-1);g=[a.create(d,d)]}e.appendUndoEvents(g);e.appendRedoEvents(f);this._document.endEdit();this._internalDocument.emitDocumentEvents(f);this._cursor.onUpdate()},_replaceDisplayText:function(a,b){this._internalDocument.removeChildren(a,1);this._internalDocument.changeNodeAttributes(a.firstChild(),{text:b})},applyHyperlinkInLineColumn:function(a,b,c,d,
e){var f=this._cursor.getLineColumn(),g=f.line,h=f.column;this._cursor.setSelectionLineColumn(c,d,c,e);this.performEditAction(null,{targetUrl:a,displayText:b});a=e-d-b.length;c===f.line&&0<a&&(h-=a);this._cursor.setLineColumn(g,h)},isAtHyperlink:function(a){return null!==this._getHyperlinkByTextNode(a.getNode())},destroy:function(){this._handles.forEach(function(a){a.remove()});this._handles=[]}})})},"MW/rtc/plugins/hyperlink/HyperlinkEditorProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/hyperlink/HyperlinkEditor",
"MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.actionservice","rtc.cursor","rtc.richtext.hyperlink","rtc.focusservice"]}},createInstance:function(e,d,c,b){return new f(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/hyperlink/HyperlinkEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on MW/rtc/RichTextComponentFeatureEnum ./view/HyperlinkDialog dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b,c,d){this._actionService=a;this._cursor=b;this._hyperlink=c;this._focusService=d;a.loadActions(this._actions());this._aspectHandle=g.after(this._cursor,"onChange",f.hitch(this,"_updateActions"))},_actions:function(){return[{id:d.HYPERLINK.HYPERLINK_ACTION,key:"ctrl_k",platformKey:{mac:"meta_k"},enabled:!1,callback:f.hitch(this,this._editHyperlink)},{id:"rtc_general_hyperlink",enabled:!0,contextMenuGroup:"RichText",description:b.generalHyperlink,
callback:f.hitch(this,this._editHyperlink)}]},_updateActions:function(){var a=this._canEditHyperlink();this._actionService.updateAction(d.HYPERLINK.HYPERLINK_ACTION,{enabled:a});this._actionService.updateAction("rtc_general_hyperlink",{enabled:a})},_canEditHyperlink:function(){var a;if(!this._cursor||this._cursor.isCursorReadOnly())return!1;a=this._cursor.selectionInfo();return!a.isInTextContainer||a.fileEndSelected?!1:!0},_editHyperlink:function(){var a={displayText:"",targetUrl:""};this._canEditHyperlink()&&
((this._nodeBeingEdited=this._hyperlink.hyperlinkUnderCursor())?(a.displayText=this._nodeBeingEdited.getText(),a.targetUrl=this._nodeBeingEdited.hyperlink):a.displayText=this._cursor.selectedText(),this.dialog=new c(f.hitch(this,this._dlgClose),f.hitch(this,this._dlgAccept),a))},_dlgClose:function(a){this._nodeBeingEdited=null;this._focusService.setFocus()},_dlgAccept:function(a){var b=/^\S*:/;""!==a.targetUrl&&!b.test(a.targetUrl)&&(a.targetUrl="http://"+a.targetUrl);this._hyperlink.performEditAction(this._nodeBeingEdited,
a);setTimeout(f.hitch(this,function(){this._focusService.setFocus()}),0)},destroy:function(){this._aspectHandle.remove()}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkDialog":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/keys dojo/on dojo/text!./HyperlinkDialogTemplate.html dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/hyperlinkDialog mw-dialog-utils/DialogUtils".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){return e([h,
f,g],{templateString:a,widgetsInTemplate:!0,constructor:function(a,b,c){this._acceptCallBack=b;this._closeCallBack=a;this._displayText=c.displayText||"MathWorks";this._targetUrl=c.targetUrl;this._linkExists=""!==c.targetUrl;!c.displayText&&!c.targetUrl&&(this._targetUrl="https://www.mathworks.com");this._dialogTitle=c.targetUrl?l.editTitle:l.createTitle},postCreate:function(){this.inherited(arguments);this.displayTextInput.set("value",this._displayText);this.urlTextInput.set("value",this._targetUrl);
this.okButton.set("label",k.ok);this.cancelButton.set("label",k.cancel);this.displayTextLabel.innerHTML=l.displayText;this.urlTextLabel.innerHTML=l.targetURL;this.removeButton.set("label",l.remove);this.removeButton.set("Disabled",!this._linkExists);b(this.okButton,"click",d.hitch(this,"onOK"));b(this.cancelButton,"click",d.hitch(this,"onCancel"));b(this.removeButton,"click",d.hitch(this,"onRemove"));this._goToDialogWidget=m.displayModalDialog(this,this._dialogTitle,[]);this._displayText&&!this._targetUrl&&
this.urlTextInput.focus()},onTextKeyup:function(a){if(a.keyCode===c.ENTER&&"text"===a.target.type&&!this.okButton.get("disabled"))this.onOK();else a=this.displayTextInput.get("value"),void 0===a||""===a?this.okButton.set("disabled",!0):this.okButton.set("disabled",!1)},onRemove:function(){this.urlTextInput.set("value","");this.onOK()},onCancel:function(){this._goToDialogWidget.onClose()},onOK:function(){var a={displayText:this.displayTextInput.get("value"),targetUrl:this.urlTextInput.get("value")};
this._acceptCallBack(a);this.onCancel()},onClose:function(){this._closeCallBack()}})})},"MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/hyperlink/HTMLHyperlinkElementHandler":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/plugins/hyperlink/model/HyperlinkNode"],function(h,f,g){return h(null,{constructor:function(e){e.registerNodeHandler("A",f.hitch(this,"_convertHyperlinkNode"))},_convertHyperlinkNode:function(e,d){e.hasAttribute("href")&&d.appendInnerNode(new g([],{hyperlink:e.getAttribute("href")}))}})})},"MW/rtc/plugins/hyperlink/HyperlinkMIMEConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/hyperlink/HyperlinkMIMEConverter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.converter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/hyperlink/HyperlinkMIMEConverter":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/DocumentUtilities MW/rtc/model/PositionUtilities MW/rtc/plugins/cutcopypaste/MIMETypes MW/rtc/plugins/hyperlink/model/HyperlinkNode".split(" "),function(h,f,g,e,d,c){return h(null,{constructor:function(b){b.registerNodeConverter(c,f.hitch(this,
"_convertFromHyperlinkNode"))},_convertFromHyperlinkNode:function(b){var a=b.getStartPosition();b=b.getEndPosition();return g.isInTextLevelContainer(a.getNode())&&a.getNode().parent===b.getNode().parent&&g.isEdgeOfTextLevelContainer(a.getNode(),a.getOffset())&&g.isEdgeOfTextLevelContainer(b.getNode(),b.getOffset())&&0!==e.comparePositions(a,b)?[{flavor:d.MATLAB_RICHTEXT,content:JSON.stringify([a.getNode().parent.serialize()])}]:[]}})})},"MW/rtc/plugins/hyperlink/HyperlinkTooltipProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/plugins/hyperlink/HyperlinkTooltip","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.eventhandler","rtc.view"]}},createInstance:function(d,c,b){return new g(d,c,b)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/hyperlink/HyperlinkTooltip":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-style dojo/has dojo/query MW/rtc/plugins/view/tooltip/Tooltip mw-html-utils/HtmlUtils dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(null,{_LINE_BREAK:"\x3cbr\x3e",constructor:function(a,c,e){this._tooltip=new b(e,a,{timeout:500});this._aspectHandles=[];this._aspectHandles.push(g.after(this._tooltip,"onTooltip",f.hitch(this,"_displayTooltip"),!0));this._aspectHandles.push(g.after(c,"onMouseDown",f.hitch(this,"_onMouseDown"),!0));this._clickHintText=d("mac")?"":k.ctrlClickHint},_onMouseDown:function(a){this._tooltip&&this._tooltip.hideTooltip()},_isActiveWindow:function(){return!!c(".layeredNode").every(function(a){return"none"===
e.get(a,"display")})},_displayTooltip:function(b){if(b&&b.box&&b.parent&&this._isActiveWindow()&&"HyperlinkNode"===b.parent.className){var c=0!==b.parent.hyperlink.indexOf("internal")?b.parent.hyperlink:"",d=(c=c?a.escapeHtml(c):"")&&this._clickHintText?this._LINE_BREAK+this._clickHintText:this._clickHintText;(c||d)&&this._tooltip.showTooltip(c+d,{domNode:b.box})}},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/view/tooltip/Tooltip":function(){define("dijit/Destroyable dojo/_base/declare dojo/_base/lang dojo/aspect ./TooltipEventHandler ./view/TooltipView".split(" "),
function(h,f,g,e,d,c){return f(h,{constructor:function(b,a,f){this._tooltipView=new c(b);this.own(this._tooltipView);this._tooltipEventHandler=new d(b,f);this.own(e.after(this._tooltipEventHandler,"onTooltip",g.hitch(this,"_onTooltip"),!0));this.own(e.after(this._tooltipEventHandler,"onHideTooltip",g.hitch(this,"hideTooltip"),!0));this.own(e.after(a,"onDocumentChanged",g.hitch(this,"clearTooltip",!0)));this.own(e.after(b,"onLinesDOMUpdated",g.hitch(this,"clearTooltip"),!0))},onTooltip:function(b,
a){},_onTooltip:function(b,a){!b.rteNode&&b.parentNode&&b.parentNode.rteNode&&(b=b.parentNode);this.onTooltip(b.rteNode||null,a)},showTooltip:function(){this._tooltipView.show.apply(this._tooltipView,arguments)},hideTooltip:function(){this._tooltipView.hide()},clearTooltip:function(){this._tooltipEventHandler.clear();this.hideTooltip()}})})},"MW/rtc/plugins/view/tooltip/TooltipEventHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on"],function(h,f,g){return h(null,{_TIMEOUT:780,
_AUTOHIDE:0,constructor:function(e,d){d&&d.timeout&&(this._TIMEOUT=d.timeout);d&&d.autohide&&(this._AUTOHIDE=d.autohide);this._tooltipTimer=null;var c=e.getDomtarget();g(c,"mousemove",f.hitch(this,"_onMousemove"))},onTooltip:function(e,d){},onHideTooltip:function(){},_onTooltipTimeout:function(e){this.onTooltip(e.target,e);if(this._AUTOHIDE){var d=f.hitch(this,this.onHideTooltip);this._tooltipTimer=setTimeout(function(){d()},this._AUTOHIDE)}},_onMousemove:function(e){if(e&&"mousemove"===e.type){this.clear();
if(this._domNode!==e.target)this.onHideTooltip();this._domNode=e.target;var d=f.hitch(this,this._onTooltipTimeout);this._tooltipTimer=setTimeout(function(){d(e)},this._TIMEOUT)}},clear:function(){this._tooltipTimer&&(clearTimeout(this._tooltipTimer),this._tooltipTimer=null)}})})},"MW/rtc/plugins/view/tooltip/view/TooltipView":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-style dojo/on dijit/popup dijit/Destroyable dijit/TooltipDialog MW/uiframework/FocusManager".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(b,{_ORIENT_BELOW_FIRST:["below-centered","above-centered"],_ORIENT_ABOVE_FIRST:["above-centered","below-centered"],constructor:function(b){var d=this;this._view=b;this._offsetNode=null;this.tooltip=new a({onMouseLeave:function(){d.hide()}});this.own(this.tooltip);c.moveOffScreen(this.tooltip)},show:function(a,b){this.tooltip.set("content",a);var d=b.domNode;b.hasOwnProperty("xOffset")&&!isNaN(b.xOffset)&&(this._createOffsetDiv(b.domNode,b.xOffset),d=this._offsetNode);
this._popupInfo={popup:this.tooltip,around:d,orient:b.orient||this._ORIENT_BELOW_FIRST};c.open(this._popupInfo);this._registerResizeHandler(a);this._deriveProperOrientation(a);k.refuseFocus(this.tooltip.domNode)},hide:function(){this._destroyOffsetDiv();c.close(this.tooltip);this._popupInfo=null},_registerResizeHandler:function(a){this._isDomElement(a)&&a.addEventListener("onResized",f.hitch(this,"_reposition"))},_reposition:function(){this._popupInfo&&c.open(this._popupInfo)},_deriveProperOrientation:function(a){if(this._isDomElement(a)){d.emit(a,
"onAdjustingOrientation",{bubbles:!1,cancelable:!0});var b=this._popupInfo.around.getBoundingClientRect();1>=this.tooltip.domNode.parentNode.getBoundingClientRect().bottom-b.top&&(this._popupInfo.orient=this._ORIENT_ABOVE_FIRST);d.emit(a,"onReadyToDisplay",{bubbles:!1,cancelable:!0})}},_isDomElement:function(a){return a&&a.nodeType===Node.ELEMENT_NODE},_createOffsetDiv:function(a,b){this._offsetNode&&this._destroyOffsetDiv();var c=this._view.getCoordinateForDomNode(a);this._offsetNode=g.create("div",
{style:{position:"absolute",left:c.x+b+"px",top:c.y+"px",width:"0px",height:c.height+"px"}},this._view.getDomtarget())},_destroyOffsetDiv:function(){this._offsetNode&&(g.destroy(this._offsetNode),this._offsetNode=null)}})})},"MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HyperlinkNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/hyperlink/model/HyperlinkNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./HyperlinkNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HyperlinkCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/model/Position","MW/rtc/plugins/hyperlink/model/HyperlinkNode","MW/rtc/view/coordinateconverter/CoordinateConverterUtilities","MW/rtc/view/coordinateconverter/base/BaseCoordinateConverter"],function(h,f,g,e,d){return h(d,{constructor:function(){},getApplicableNodeClass:function(){return g},getCoordinateFromPosition:function(c){return null},getDelegatedPositionForCoordinate:function(c){var b=
c.getNode();c=c.getOffset();c=b.findChildIndexForPosInNode(c);return new f(b.children[c.n],c.posInNode)},_getClientRects:function(c){var b=document.createRange();c=this.getDomNode(c);try{b.selectNodeContents(c)}catch(a){return[]}b=b.getClientRects();return e.getClientRectsArray(b)}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HyperlinkLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/hyperlink/view/HyperlinkLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/HyperlinkNode"],function(h,f,g){return h(f,{constructor:function(){},getApplicableNodeClass:function(){return g},layout:function(e,d){return e.layoutInto(d,"a",{"class":"hyperlinkNode",target:"_blank",href:d.hyperlink})}})})},"MW/rtc/plugins/images/HTMLImageElementHandlerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/HTMLImageElementHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/images/HTMLImageElementHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/images/model/ImageNode"],function(h,f,g){return h(null,{_IMG_URI_DATA_ATTRIBUTE:"data-imguri",_IMG_WIDTH_ATTRIBUTE:"width",_IMG_HEIGHT_ATTRIBUTE:"height",
_REGEXP_VALID_DIM:/^\d+(\.\d+)?(px)?$/,constructor:function(e){this._styleStack=[{}];this._fromhtml=e;this._fromhtml.registerNodeHandler("IMG",f.hitch(this,"_convertImageNode"))},_convertImageNode:function(e,d){var c;e.src.match(/^data:image\/\S+;base64,/)?c=new g({imgSrc:e.src}):e.hasAttribute(this._IMG_URI_DATA_ATTRIBUTE)&&(c=new g({imgSrc:e.getAttribute("data-imguri")}));if(c){var b;e.hasAttribute(this._IMG_WIDTH_ATTRIBUTE)&&(b=e.getAttribute(this._IMG_WIDTH_ATTRIBUTE),b.match(this._REGEXP_VALID_DIM)&&
(c.width=parseInt(b,10)));e.hasAttribute(this._IMG_HEIGHT_ATTRIBUTE)&&(b=e.getAttribute(this._IMG_HEIGHT_ATTRIBUTE),b.match(this._REGEXP_VALID_DIM)&&(c.height=parseInt(b,10)));d.appendNode(c)}}})})},"MW/rtc/plugins/images/model/ImageNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/OpaqueNode"],function(h,f){return h([f],{constructor:function(f){this.width=f.width||-1;this.height=f.height||-1;this.align=f.align||"baseline";f.imgSrc&&(this.imgSrc=f.imgSrc.replace(/\n|\r/g,""));this.altText=
f.altText||"";this.originalWidth=this.width},className:"ImageNode",_serializeAttributes:function(f){f.width=this.width;f.height=this.height;f.align=this.align;f.altText=this.altText;f.imgSrc=this.imgSrc;f.text=this.getText()}})})},"MW/rtc/plugins/images/ImagesProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/images/Images","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.view","rtc.cursor"]}},
createInstance:function(e,d,c,b){return new f(e,d,c,b)}})})},"MW/rtc/plugins/images/Images":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/model/events/NumberOfLinesChangedEvent ./model/ImageNode".split(" "),function(h,f,g,e,d,c,b,a,k){return h(e,{_IMAGE_MIN_SIZE:18,_IMAGE_SCALING_FACTOR:0.9,constructor:function(a,b,c,d){this._cursor=d;this._internalDocument=
a;this._document=b;this._view=c;this.own(g.after(this._document,"onDirectedDeletion",f.hitch(this,"_onDelete"),!0))},_onDelete:function(a,b){if(!this._cursor.hasSelection()&&b.isLocal&&this._isImageNode(b.startNode))return this._cursor.setPosition(this._cursor.selectionInfo2cursorPos(b)),!0},_isImageNode:function(a){return a&&a instanceof k},canInsertImage:function(){if(this._cursor.isCursorReadOnly()||this._cursor.hasSelection()&&!this.imageUnderCursor())return!1;var a=this._cursor.getNode();return d.isInTextLevelContainer(a)&&
!d.isEdgeOfTextLevelContainer(a,this._cursor.getOffset())?!1:!0},imageUnderCursor:function(){var a;a=this._cursor.selectionInfo();var b=a.isLocal&&this._isImageNode(a.startNode)?a.startNode:null;!b&&(a.isNull&&a.endPos===a.endNode.maxOffset())&&(a=a.endNode.nextSibling(),b=this._isImageNode(a)?a:null);return b},imageFromDOMNode:function(a){a=a.rteNode;return this._isImageNode(a)?a:null},insertImageFromData:function(a){a=this._createImageNode(a);this._insertImageNode(a);return a},startImageChange:function(a){var b=
this._document.startEdit(),c=this._cursor.getNode().rootContainer();this._savedState={imageNode:a,container:c,editBlock:b,lineNum:this._internalDocument.getLineNumber(c)}},endImageChange:function(d){if(this._savedState){var e=this._savedState.lineNum,f=[c.create(e,e)];d.rootContainer()!==this._savedState.container&&(f.push(b.create(e,e+1,0,1)),f.push(a.create(e,e+1)));this._savedState.editBlock.appendUndoEvents(f);this._savedState.editBlock.appendRedoEvents(f);this._internalDocument.emitDocumentEvents(f);
if(!this._savedState.imageNode)this.onImageInserted(d);this._document.endEdit();this._savedState=null}},onImageInserted:function(a){},_createImageNode:function(a){return new k({imgSrc:a.imgSrc,width:a.width||-1,height:a.height||-1,altText:a.altText})},_insertImageNode:function(a){this._internalDocument.insertAtPosition(a,this._cursor.position);this._cursor.setPosition(a,1)},getWidthToFitOnScreen:function(){var a=this._view.getDocumentDimension();return Math.max(this._IMAGE_SCALING_FACTOR*a.width,
this._IMAGE_MIN_SIZE)}})})},"MW/rtc/plugins/images/ImageMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/ImageMimeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/images/ImageMimeConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/cutcopypaste/mime/MimeConverter","MW/rtc/plugins/images/model/ImageNode"],
function(h,f,g,e){return h(g,{_PRIORITY:1,constructor:function(){},getType:function(){return"image/x-java-image"},convertFromMimeData:function(d){return[(new e({className:"ImageNode",imgSrc:d.src,width:d.width,height:d.height})).serialize()]},priority:function(){return this._PRIORITY}})})},"MW/rtc/plugins/images/InsertImageProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/InsertImage"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.cursor","rtc.actionservice","rtc.richtext.images","rtc.focusservice"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/images/InsertImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/RichTextComponentFeatureEnum ./view/ImageDialog dojo/i18n!l10n/nls/richtext_actions".split(" "),function(h,f,g,e,d,c,b){return h(e,{constructor:function(a,b,c,e,h){this._cursor=b;this._focusService=h;this._internalDocument=
a;this._imagesPlugin=e;this._actionService=c;this._actionService.loadActions([{id:d.IMAGES.IMAGE_ACTION,enabled:!1,key:"ctrl_alt_z",callback:f.hitch(this,"_imageAction")}]);this.own(g.after(this._cursor,"onDoubleClick",f.hitch(this,"_doubleClick")));this.own(g.after(this._cursor,"onChange",f.hitch(this,"_updateActions")))},_updateActions:function(){this._actionService.updateAction(d.IMAGES.IMAGE_ACTION,{enabled:this._canInsertImage()});this._actionService.updateAction("rtc_insert_image",{enabled:this._canInsertImage()&&
!this._imagesPlugin.imageUnderCursor()});this._actionService.updateAction("rtc_edit_image",{enabled:this._canInsertImage()&&!!this._imagesPlugin.imageUnderCursor()})},_canInsertImage:function(){return this._imagesPlugin.canInsertImage()},_doubleClick:function(){if(!this._cursor.isCursorReadOnly()){var a=this._imagesPlugin.imageUnderCursor();a&&(this._cursor.resetAction(),this._openDialog(a))}},_imageAction:function(){if(this._canInsertImage()){var a=this._imagesPlugin.imageUnderCursor();this._openDialog(a)}},
_openDialog:function(a){this._dialog=new c(f.hitch(this,this._dlgAccept),f.hitch(this,this._dlgClose),a)},_dlgClose:function(){this._focusService.setFocus()},_dlgAccept:function(a){this._imagesPlugin.startImageChange();var b=a.node;b?(b.updateAttributes(a),this._cursor.onUpdate()):b=this._imagesPlugin.insertImageFromData(a);this._imagesPlugin.endImageChange(b)}})})},"MW/rtc/plugins/images/view/ImageDialog":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/on dojo/text!./ImageDialogTemplate.html dojo/i18n!l10n/nls/dialog dojo/i18n!l10n/nls/insertImageDialog mw-dialog-utils/DialogUtils dijit/form/RadioButton dijit/form/ComboBox dijit/form/Button dijit/form/TextBox".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return e([h,f,g],{templateString:k,widgetsInTemplate:!0,TRIANGLE_COLLAPSED_CLASS:"detailTriangleCollapsed",TRIANGLE_EXPANDED_CLASS:"detailTriangleExpanded",constructor:function(a,b,c){this._acceptCallBack=a;this._closeCallBack=b;this.dataUri=this.url="";this.settingsStore={altText:"",size:100,align:"bottom"};this._imgNode=c||null},postCreate:function(){this.inherited(arguments);this.okButton.set("label",l.ok);a(this.okButton,"click",d.hitch(this,"onOK"));this.cancelButton.set("label",
l.cancel);a(this.cancelButton,"click",d.hitch(this,"onCancel"));this.fileRadioLabel.innerHTML=m.fromLocalFile;this.urlRadioLabel.innerHTML=m.fromWeb;c.after(this.urlRadioBut,"onChange",d.hitch(this,"_onInputModeChanged"));a(this.imageFileInput,"change",d.hitch(this,"onFileChange"));a(this.imageUrlTextInput,"input",d.hitch(this,"onUrlChange"));this.urlField.style.display="none";this.own(a(this.imagePreview,"load",d.hitch(this,"_previewLoad")),a(this.imagePreview,"error",d.hitch(this,"_previewLoad")));
this.detailArea.style.display="none";this.detailsLabel.innerHTML=m.displaySettings;a(this.detailsTriangle,"click",d.hitch(this,"_detailsToggle"));a(this.detailsLabel,"click",d.hitch(this,"_detailsToggle"));this.altTextInputLabel.innerHTML=m.altText;this.sizeInputLabel.innerHTML=m.sizeInPercent;this.alignInputLabel.innerHTML=m.alignment;this._init();c.after(this.sizeTextInput,"onChange",d.hitch(this,"_sizeUpdate"));this._goToDialogWidget=q.displayModalDialog(this,this._imgNode?m.editTitle:m.insertTitle,
[])},_init:function(){var a=1;this._imgNode&&(this.alignInput.value=this._imgNode.align,this.altTextInput.setValue(this._imgNode.altText),this.imagePreview.src=this._imgNode.imgSrc,0<this._imgNode.width&&this.imagePreview.naturalWidth&&(a=this.imagePreview.naturalWidth/this._imgNode.width),this.sizeTextInput.setValue(Math.round(100/a)),this._isDataUri(this._imgNode.imgSrc)?(this.dataUri=this._imgNode.imgSrc,this.fileDataPath=this.altTextInput.value):(this.urlRadioBut.set("checked",!0),this.fileRadioBut.set("checked",
!1),this.imageUrlTextInput.setValue(this._imgNode.imgSrc),this._onInputModeChanged()),this._detailsToggle());this._renderPreview()},_previewLoad:function(a){"load"===a.type?(this.okButton.set("Disabled",!1),this._altTextUpdate(!0)):0>=this.imagePreview.naturalWidth&&0>=this.imagePreview.naturalHeight&&this.okButton.set("Disabled",!0);this._sizeUpdate()},_detailsToggle:function(){"none"===this.detailArea.style.display?(this.detailArea.style.display="inline",b.replace(this.detailsTriangle,this.TRIANGLE_EXPANDED_CLASS,
this.TRIANGLE_COLLAPSED_CLASS)):(this.detailArea.style.display="none",b.replace(this.detailsTriangle,this.TRIANGLE_COLLAPSED_CLASS,this.TRIANGLE_EXPANDED_CLASS))},_onInputModeChanged:function(){this.fileField.style.display=this.urlRadioBut.checked?"none":"inline";this.urlField.style.display="none"===this.fileField.style.display?"inline":"none";var a;a=this.altTextInput.value;this.altTextInput.setValue(this.settingsStore.altText);this.settingsStore.altText=a;a=this.sizeTextInput.value;this.sizeTextInput.setValue(this.settingsStore.size);
this.settingsStore.size=a;a=this.alignInput.value;this.alignInput.value=this.settingsStore.align;this.settingsStore.align=a;this.imageUrlTextInput.focus();this._renderPreview()},_altTextUpdate:function(a){if(""===this.altTextInput.value||a)this.altTextInput.setValue(this._fileNameFromPath(this.urlRadioBut.checked?this.url:this.fileDataPath))},_sizeUpdate:function(){var a="";if(this.imagePreview.naturalWidth||this.imagePreview.naturalHeight)a=this._calcWidth(),a=a.width+" x "+a.height;this.origSize.innerHTML=
a},_renderPreview:function(){var a="";a=this.urlRadioBut.checked?this.url=this.imageUrlTextInput.get("value"):this.dataUri;this.imagePreview.src=a;""===a?(this.imagePreview.style.display="none",this.noPreview.style.display="inline-block"):(this.imagePreview.style.display="inline-block",this.noPreview.style.display="none");this._sizeUpdate()},onUrlChange:function(a){var b=this;setTimeout(function(){b._destroyed||b._renderPreview()},0)},onFileChange:function(){this.dataUri="";this.imagePreview.src=
"";var a=this.imageFileInput.value;if(a){var b=new FileReader;b.readAsDataURL(this.imageFileInput.files[0]);var c=this;b.onloadend=function(b){c.dataUri=b.target.result;c.fileDataPath=a;c._renderPreview();c._altTextUpdate()}}else this.dataUri="",this._renderPreview(),this._altTextUpdate()},onClose:function(){this._closeCallBack()},onCancel:function(){this.onClose();this._goToDialogWidget.onClose()},onOK:function(){var a={},a={},b=parseInt(this.sizeTextInput.value,10);isNaN(b)||100===b||(a=this._calcWidth());
a={node:this._imgNode,imgSrc:this.urlRadioBut.checked?this.url:this.dataUri,altText:this.altTextInput.value,align:this.alignInput.value,width:a.width||-1,height:a.height||-1};this._acceptCallBack(a);this.onClose();this._goToDialogWidget.onClose()},_fileNameFromPath:function(a){return!a||this._isDataUri(a)?"":a.replace(/^.*(\\|\/|\:)/,"")},_calcWidth:function(){var a={},b=parseInt(this.sizeTextInput.value,10);a.width=Math.round(this.imagePreview.naturalWidth*b/100);a.height=Math.round(this.imagePreview.naturalHeight*
b/100);return a},_isDataUri:function(a){return a&&a.substring&&a.substring(0,25).match(/^data:image.+;base64/)?!0:!1},onTextKeyup:function(a){}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin","../_mw/utils/deprecation"],function(h,f,g,e){e.deprecated({deprecated:{module:"dijit/form/RadioButton"},replacement:{module:"mw-form/RadioButton"},geckNumber:1352405});return h("dijit.form.RadioButton",[f,g],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(h,f,g,e,d,c){return f("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var b=[];d("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(e.hitch(this,function(a){a.name==this.name&&a.form==this.focusNode.form&&(a=c.getEnclosingWidget(a))&&b.push(a)}));return b},_setCheckedAttr:function(b){this.inherited(arguments);this._created&&b&&h.forEach(this._getRelatedWidgets(),e.hitch(this,function(a){a!=this&&a.checked&&a.set("checked",!1)}))},_getSubmitValue:function(b){return null==
b?"on":b},_onClick:function(b){if(this.checked||this.disabled)return b.stopPropagation(),b.preventDefault(),!1;if(this.readOnly)return b.stopPropagation(),b.preventDefault(),h.forEach(this._getRelatedWidgets(),e.hitch(this,function(a){g.set(this.focusNode||this.domNode,"checked",a.checked)})),!1;var a=!1,c;h.some(this._getRelatedWidgets(),function(a){return a.checked?(c=a,!0):!1});this.checked=!0;c&&(c.checked=!1);if(!1===this.onClick(b)||b.defaultPrevented)a=!0;this.checked=!1;c&&(c.checked=!0);
a?b.preventDefault():this.set("checked",!0);return!a}})})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(h,f,g){return h("dijit.form.ComboBox",[f,g],{})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(h,f,g,e,d,c,b,a,k){return h("dijit.form.ComboBoxMixin",
[a,c],{dropDownClass:b,hasDownArrow:!0,templateString:k,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||e.mixin(a,{_oldAPI:!0,get:function(a){var b=new f;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});
return b.promise},query:function(a,b){var c=new f(function(){g.abort&&g.abort()});c.total=new f;var g=this.fetch(e.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return d(c)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&this.store&&!this.store._oldAPI){var b=this.declaredClass;e.mixin(this.store,{getValue:function(a,
c){g.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){g.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(a){g.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],e.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}},buildRendering:function(){this.inherited(arguments);
this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(h,f,g){var e=function(d){function c(a){d[a]=function(){var c=arguments,f=g(d,function(b){Array.prototype.unshift.call(c,b);return e(h[a].apply(h,c))});if("forEach"!==a||b)return f}}if(!d)return d;var b=!!d.then;b&&(d=f.delegate(d));c("forEach");c("filter");c("map");null==d.total&&(d.total=g(d,function(a){return a.length}));
return d};f.setObject("dojo.store.util.QueryResults",e);return e})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){return f("dijit.form._AutoCompleterMixin",m,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(b){var c=0;
if("number"==typeof b.selectionStart)c=b.selectionStart;else if(a("ie")){var d=b.ownerDocument.selection.createRange().duplicate();b=b.createTextRange();d.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",d),c=String(b.text).replace(/\r/g,"").length}catch(e){}}return c},_setCaretPos:function(a,b){b=parseInt(b);l.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=
a.charCode)){var b=a.charCode||a.keyCode;if(!(b==e.ALT||b==e.CTRL||b==e.META||b==e.SHIFT)){var c=this.dropDown,d=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(d=c.getHighlightedOption()),b){case e.PAGE_DOWN:case e.DOWN_ARROW:case e.PAGE_UP:case e.UP_ARROW:this._opened&&this._announceOption(d);a.stopPropagation();a.preventDefault();break;case e.ENTER:if(d){if(d==c.nextButton){this._nextSearch(1);a.stopPropagation();a.preventDefault();break}else if(d==
c.previousButton){this._nextSearch(-1);a.stopPropagation();a.preventDefault();break}a.stopPropagation();a.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case e.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;d&&this._selectOption(d);case e.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(a){var b=this.focusNode;l.selectInputText(b,b.value.length);
var c=this.ignoreCase?"toLowerCase":"substr";0==a[c](0).indexOf(this.focusNode.value[c](0))?(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length&&(b.value=a,l.selectInputText(b,c))):(b.value=a,l.selectInputText(b))},_openResultList:function(a,b,c){var e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=d.hitch(this,function(b){a.nextPage(-1!==b);this.focus()}),this.dropDown.createOptions(a,
c,d.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&(!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString()))&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded",
"true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&
this._handleOnChange(this.value,!0),this._refreshState());this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];
b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",g.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},
_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (d.isString(this.dropDownClass)?d.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:d.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);
if(!this.store&&this.srcNodeRef&&(this.store=new k({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=c('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",a[0].id));this.inherited(arguments);h.after(this,"onSearch",d.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=
this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&("text"==this.labelType&&this._lastInput)&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,c){var d=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),e=this.queryExpr.indexOf("${0}");c=b.escapeString(c);return this._escapeHtml(a.replace(RegExp((0==e?"^":"")+"("+c+")"+(e==this.queryExpr.length-4?"$":""),d),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,
'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,d){this._set("item",d||null);null==a&&(a="");this.inherited(arguments)}})})},
"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(h,f,g,e,d,c){function b(a){return{id:a.value,value:a.value,name:g.trim(a.innerText||a.textContent||"")}}return h("dijit.form.DataList",d,{constructor:function(a,d){this.domNode=f.byId(d);g.mixin(this,a);this.id&&c.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:e("option",this.domNode).map(b)}])},destroy:function(){c.remove(this.id)},
fetchSelectedItem:function(){var a=e("\x3e option[selected]",this.domNode)[0]||e("\x3e option",this.domNode)[0];return a&&b(a)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(h,f,g){return h("dojo.store.Memory",null,{constructor:function(e){for(var d in e)this[d]=e[d];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:g,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},
put:function(e,d){var c=this.data,b=this.index,a=this.idProperty,a=e[a]=d&&"id"in d?d.id:a in e?e[a]:Math.random();if(a in b){if(d&&!1===d.overwrite)throw Error("Object already exists");c[b[a]]=e}else b[a]=c.push(e)-1;return a},add:function(e,d){(d=d||{}).overwrite=!1;return this.put(e,d)},remove:function(e){var d=this.index,c=this.data;if(e in d)return c.splice(d[e],1),this.setData(c),!0},query:function(e,d){return f(this.queryEngine(e,d)(this.data))},setData:function(e){e.items?(this.idProperty=
e.identifier||this.idProperty,e=this.data=e.items):this.data=e;this.index={};for(var d=0,c=e.length;d<c;d++)this.index[e[d][this.idProperty]]=d}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(h){return function(f,g){function e(c){c=h.filter(c,f);var b=g&&g.sort;b&&c.sort("function"==typeof b?b:function(a,c){for(var d,e=0;d=b[e];e++){var f=a[d.attribute],g=c[d.attribute],f=null!=f?f.valueOf():f,g=null!=g?g.valueOf():g;if(f!=g)return!!d.descending==(null==
f||f>g)?-1:1}return 0});if(g&&(g.start||g.count)){var a=c.length;c=c.slice(g.start||0,(g.start||0)+(g.count||Infinity));c.total=a}return c}switch(typeof f){default:throw Error("Can not query with a "+typeof f);case "object":case "undefined":var d=f;f=function(c){for(var b in d){var a=d[b];if(a&&a.test){if(!a.test(c[b],c))return!1}else if(a!=c[b])return!1}return!0};break;case "string":if(!this[f])throw Error("No filter function "+f+" was found in store");f=this[f];case "function":}e.matches=f;return e}})},
"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(h,f,g,e,d,c,b){return h("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(a){this._set("list",a)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,c,d){return c?".*":d?
".":b?b:"\\"+a})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&
!this.readOnly){a=a.charOrCode;var b=!1;this._prev_key_backspace=!1;switch(a){case f.DELETE:case f.BACKSPACE:b=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:b="string"==typeof a||229==a}if(b)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(a){this._abortQuery();var b=this,e=g.clone(this.query),f={start:0,count:this.pageSize,
queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},h=d.substitute(this.queryExpr,[a.replace(/([\\\*\?])/g,"\\$1")]),n,p=function(){var a=b._fetchHandle=b.store.query(e,f);!b.disabled&&!(b.readOnly||n!==b._lastQuery)&&c(a,function(d){b._fetchHandle=null;!b.disabled&&(!b.readOnly&&n===b._lastQuery)&&c(a.total,function(a){d.total=a;var c=b.pageSize;if(isNaN(c)||c>d.total)c=d.total;d.nextPage=function(a){f.direction=a=!1!==a;f.count=c;a?(f.start+=d.length,f.start>=d.total&&(f.count=0)):(f.start-=c,0>
f.start&&(f.count=Math.max(c+f.start,0),f.start=0));0>=f.count?(d.length=0,b.onSearch(d,e,f)):p()};b.onSearch(d,e,f)})},function(a){b._fetchHandle=null;b._cancelingQuery||console.error(b.declaredClass+" "+a.toString())})};g.mixin(f,this.fetchProperties);this.store._oldAPI?n=h:(n=this._patternToRegExp(h),n.toString=function(){return h});this._lastQuery=e[this.searchAttr]=n;this._queryDeferHandle=this.defer(p,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var a=
this.list;a&&(this.store=b.byId(a))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(h,f,g,e,d,c,b,a){return h("dijit.form._ComboBoxMenu",[d,c,a,b],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(f.add(this.previousButton,"dijitMenuItemRtl"),f.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");a.setAttribute("role","option");return a},onHover:function(a){f.add(a,"dijitMenuItemHover")},onUnhover:function(a){f.remove(a,
"dijitMenuItemHover")},onSelect:function(a){f.add(a,"dijitMenuItemSelected")},onDeselect:function(a){f.remove(a,"dijitMenuItemSelected")},_page:function(a){var b=0,c=this.domNode.scrollTop,d=g.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<d;){var e=this.getHighlightedOption();if(a){if(!e.previousSibling||"none"==e.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!e.nextSibling||"none"==e.nextSibling.style.display)break;this.selectNextNode()}e=
this.domNode.scrollTop;b+=(e-c)*(a?-1:1);c=e}},handleKey:function(a){switch(a.keyCode){case e.DOWN_ARROW:return this.selectNextNode(),!1;case e.PAGE_DOWN:return this._page(!1),!1;case e.UP_ARROW:return this.selectPreviousNode(),!1;case e.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(h,f,g,e,d){return f("dijit.form._ComboBoxMenuMixin",
null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=d.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(c){this._set("value",c);this.onChange(c)},onClick:function(c){if(c==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(c==this.nextButton)this._setSelectedAttr(null),
this.onPage(1);else this.onChange(c)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(c,b){var a=this._createMenuItem(),d=b(c);d.html?a.innerHTML=d.label:a.appendChild(a.ownerDocument.createTextNode(d.label));""==a.innerHTML&&(a.innerHTML="\x26#160;");return a},createOptions:function(c,b,a){this.items=c;this.previousButton.style.display=0==b.start?"none":"";g.set(this.previousButton,"id",this.id+"_prev");h.forEach(c,function(b,c){var d=
this._createOption(b,a);d.setAttribute("item",c);g.set(d,"id",this.id+c);this.nextButton.parentNode.insertBefore(d,this.nextButton)},this);var d=!1;c.total&&!c.total.then&&-1!=c.total?b.start+b.count<c.total?d=!0:b.start+b.count>c.total&&b.count==c.length&&(d=!0):b.count==c.length&&(d=!0);this.nextButton.style.display=d?"":"none";g.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var c=this.containerNode;2<c.childNodes.length;)c.removeChild(c.childNodes[c.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare",
"dojo/on","dojo/touch","./_ListBase"],function(h,f,g,e){return h("dijit.form._ListMouseMixin",e,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(d,c){this._setSelectedAttr(c,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=
this.defer(function(){this._deferredClick=null;this.onClick(c)})},_onMouseDown:function(d,c){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(c,!1)},_onMouseUp:function(d,c){this._isDragging=!1;var b=this.selected,a=this._hoveredNode;b&&c==b?this.defer(function(){this._onClick(d,b)}):a&&this.defer(function(){this._onClick(d,a)})},_onMouseOut:function(d,c){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=
null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(d,c){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=c;this.onHover(c);this._isDragging&&this._setSelectedAttr(c,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(h,f,g){return h("dijit.form._ListBase",null,{selected:null,_listConnect:function(e,d){var c=this;return c.own(f(c.containerNode,
f.selector(function(b,a,c){return b.parentNode==c},e),function(b){c[d](b,this)}))},selectFirstNode:function(){for(var e=this.containerNode.firstChild;e&&"none"==e.style.display;)e=e.nextSibling;this._setSelectedAttr(e,!0)},selectLastNode:function(){for(var e=this.containerNode.lastChild;e&&"none"==e.style.display;)e=e.previousSibling;this._setSelectedAttr(e,!0)},selectNextNode:function(){var e=this.selected;if(e){for(e=e.nextSibling;e&&"none"==e.style.display;)e=e.nextSibling;e?this._setSelectedAttr(e,
!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var e=this.selected;if(e){for(e=e.previousSibling;e&&"none"==e.style.display;)e=e.previousSibling;e?this._setSelectedAttr(e,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(e,d){if(this.selected!=e){var c=this.selected;if(c)this.onDeselect(c);e&&(d&&g.scrollIntoView(e),this.onSelect(e));this._set("selected",e)}else if(e)this.onSelect(e)}})})},"MW/rtc/plugins/images/InlineResizeImageProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/images/InlineResizeImage"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.richtext.images rtc.view rtc.internaldocument rtc.cursor rtc.richtext.resizer rtc.actionservice".split(" ")}},createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/images/InlineResizeImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has dojo/on mw-log/Log MW/rtc/model/events/DocumentEvent dojo/i18n!l10n/nls/richtext_actions".split(" "),
function(h,f,g,e,d,c,b,a){return h(null,{constructor:function(b,c,e,h,n,p){this._imagePlugin=b;this._cursor=h;this._internalDocument=e;this._actionService=p;this._view=c;this._resizer=n;this._temporaryListeners=[];this._listeners=[];this._listeners.push(d(c.getDomtarget(),"click",f.hitch(this,this._handleClick)));this._listeners.push(g.after(this._cursor,"onChange",f.hitch(this,"_cursorChanged")));this._listeners.push(g.after(this._imagePlugin,"onImageInserted",f.hitch(this,"_imageInserted"),!0));
this._actionService.loadActions([{id:"rtc_reset_image",enabled:!1,contextMenuGroup:"RichText",description:a.resetImage,callback:f.hitch(this,"_resetImageSize")},{id:"rtc_deactivate_image",enabled:!1,key:"escape",callback:f.hitch(this,"_escapePressed")}])},destroy:function(){this._deactivateImage();this._listeners.forEach(function(a){a.remove()});this._listeners=[];this._actionService.removeAction("rtc_reset_image");this._actionService.removeAction("rtc_deactivate_image")},_imageInserted:function(a){this._cursor.setPosition(a,
{posInNode:1});this._cursor.movePosition(this._cursor.LEFT,!0)},_updateActions:function(){this._actionService.updateAction("rtc_reset_image",{enabled:this._canResetImage()})},_escapePressed:function(){return this._activeImage?(this._cursor.collapseSelection(),!0):!1},_cursorChanged:function(){var a,b;if(!this._activeImage&&(a=this._imagePlugin.imageUnderCursor(),b=this._cursor.selectionInfo(),a&&!b.isNull)){this._tryActivateImage(a);return}this._resizer.deactivate()},_handleClick:function(a){if(a=
this._imagePlugin.imageFromDOMNode(a.target)){var b=this._cursor.getNode()===a?this._cursor.getOffset():1;this._cursor.setPosition(a,{posInNode:b?0:1});this._cursor.movePosition(b?this._cursor.RIGHT:this._cursor.LEFT,!0)}else this._resizer.deactivate()},_canResetImage:function(){if(this._cursor.isCursorReadOnly())return!1;var a=this._activeImage||this._imagePlugin.imageUnderCursor();return a&&a.width!==a.originalWidth?!0:!1},_resetImageSize:function(){if(this._cursor.isCursorReadOnly())return!1;var a=
this._activeImage||this._imagePlugin.imageUnderCursor();a&&(this._imagePlugin.startImageChange(),this._internalDocument.changeNodeAttributes(a,{width:a.originalWidth,height:-1}),this._view.layoutNode(a),this._cursor.onUpdate(!1,!0),this._imagePlugin.endImageChange(a),this._activateImage(a))},_tryActivateImage:function(a){7<=e("trident")?(this._activateImage(a),a.box.addEventListener("load",f.hitch(this,function(){this._view.onLayoutChange()}),{once:!0})):a.box.complete?this._activateImage(a):a.box.addEventListener("load",
f.hitch(this,function(){this._activateImage(a);this._view.onLayoutChange()}),{once:!0})},_activateImage:function(a){if(!this._cursor.isCursorReadOnly()&&this._activeImage!==a){this._activeImage=a;this._cursor.hideSelection();var b=1;-1<this._activeImage.width?(a=this._activeImage.width,b=this._activeImage.width/this._activeImage.box.naturalWidth):a=this._activeImage.box.naturalWidth;this._resizer.activate({top:this._activeImage.box.offsetTop,left:this._activeImage.box.offsetLeft,width:a,height:-1<
this._activeImage.height?this._activeImage.height:Math.round(b*this._activeImage.box.naturalHeight)},{startDrag:f.hitch(this,"_startResize"),endDrag:f.hitch(this,"_endResize"),drag:f.hitch(this,"_trackResize"),closed:f.hitch(this,"_deactivateImage")});this._temporaryListeners.push(g.after(this._view,"onResize",f.hitch(this,"_handleViewChange")));this._temporaryListeners.push(g.after(this._view,"onLayoutChange",f.hitch(this,"_handleViewChange")));this._temporaryListeners.push(g.after(this._internalDocument,
"onDocumentChanged",f.hitch(this,"_documentChanged"),!0));this._updateActions()}},_deactivateImage:function(){this._activeImage=null;this._temporaryListeners.forEach(function(a){a.remove()});this._temporaryListeners=[];this._cursor.showSelection();this._updateActions()},_handleViewChange:function(){this._resizer.moveTo(this._activeImage.box.offsetTop,this._activeImage.box.offsetLeft)},_documentChanged:function(){!this._activeImage.box.offsetTop||!this._activeImage.box.offsetLeft||!this._activeImage.box.offsetWidth||
!this._activeImage.box.offsetHeight?this._resizer.deactivate():(this._resizer.moveTo(this._activeImage.box.offsetTop,this._activeImage.box.offsetLeft),this._resizer.resize(this._activeImage.box.offsetWidth,this._activeImage.box.offsetHeight))},_startResize:function(){this._savedSizeAttributes={width:this._activeImage.width,height:this._activeImage.height};this._imagePlugin.startImageChange(this._activeImage)},_endResize:function(a,b){this._activeImage.updateAttributes(this._savedSizeAttributes);this._internalDocument.changeNodeAttributes(this._activeImage,
{width:a,height:b});this._imagePlugin.endImageChange(this._activeImage);this._view.layoutNode(this._activeImage);this._updateActions()},_trackResize:function(a,b){this._activeImage.updateAttributes({width:a,height:b});this._view.layoutNode(this._activeImage);this._view.onLayoutChange();return!0}})})},"MW/rtc/plugins/images/model/ImageNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ImageNodeContentConverter"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/images/model/ImageNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","./ImageNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/images/view/ImageCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ImageCoordinateConverter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/images/view/ImageCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/images/model/ImageNode","MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f},getCoordinateFromPosition:function(e){var d=this.inherited(arguments),c=e.getOffset();
d.x-=c?0:1;return d}})})},"MW/rtc/plugins/images/view/ImageLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ImageLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/images/view/ImageLayouter":function(){define(["dojo/_base/declare","MW/rtc/model/NodeUtilities","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter",
"../model/ImageNode"],function(h,f,g,e){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){var b={"class":"imageNode"};0<=c.width&&(b.width=c.width);0<=c.height&&(b.height=c.height);b.style=c.align?"vertical-align: "+c.align:"vertical-align: baseline";c.imgSrc&&(b.src=c.imgSrc.replace(/\n|\r/g,""));c.altText&&(b.alt=c.altText);c.textContainer().tempAlign=f.isFreestandingOpaque(c);return d.layoutInto(c,"img",b)}})})},"MW/rtc/plugins/imeinput/IMEInputProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./IMEInput"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.cursor rtc.document rtc.internaldocument rtc.keyhandler rtc.shadowtextservice rtc.view.movehiddenkeycapture".split(" ")}},createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/imeinput/IMEInput":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/on MW/rtc/model/DocumentConstants".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(null,{constructor:function(b,c,d,e,g,h){this._cursor=b;this._document=c;this._internalDocument=d;this._keyhandler=e;this._keyCapture=this._keyhandler.keyCapture;this._shadowtextservice=g;this._moveHiddenkeyCapture=h;this._handlers=[];this._handlers.push(a(this._keyCapture,"compositionstart",f.hitch(this,"_handleCompositionstart")));this._handlers.push(a(this._keyCapture,"compositionend",f.hitch(this,"_handleCompositionend")));this._IMEnodeHandle=null;this._currentText=
""},destroy:function(){this._handlers.forEach(function(a){a.remove()});this._handlers=[]},_handleServiceUpdate:function(a){a.update(this._currentText)},_inputHandlerIME:function(a){this._currentText=a;this._IMEnodeHandle.update(a)},_handleCompositionstart:function(a){this._cursor.isCursorReadOnly()?this._keyCapture.value="":(this._cursor.hasSelection()&&this._document.deleteTextAtCurrentPosition(k.FORWARD_DELETE),this._keyhandler.setInputHandler(f.hitch(this,"_inputHandlerIME")),this._currentText=
"",a={text:"",cssClass:"composingInIME",updateCallback:f.hitch(this,"_handleServiceUpdate"),caretRightAligned:!0},this._IMEnodeHandle=this._shadowtextservice.requestTextAfterCursor(a),a=c.getComputedStyle(this._cursor.getNode().box),c.set(this._keyCapture,"fontSize",a.fontSize),this._moveHiddenkeyCapture.moveHiddenKeyCaptureToCaret(!0))},_handleCompositionend:function(a){this._IMEnodeHandle.remove();this._IMEnodeHandle=null;this._currentText="";this._keyhandler.setDefaultInputHandler();(b("trident")||
54<b("chrome"))&&this._keyhandler.handleInput({});this._moveHiddenkeyCapture.moveHiddenKeyCaptureToCaret(!1)}})})},"MW/rtc/plugins/indentation/IndentationProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./Indentation"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cursor","rtc.actionservice","rtc.internaldocument","rtc.keyhandler","rtc.indentutilities"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},
"MW/rtc/plugins/indentation/Indentation":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h(e,{constructor:function(a,b,c,d,e){this._cursor=a;this._actionService=b;this._internalDocument=c;this._keyhandler=d;this._indentUtilities=
e;this._addActions();this._addKeyBindings();this.own(g.after(this._cursor,"onChange",f.hitch(this,this._updateActiveSection)));this.own(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,this._updateActionsOnDocumentChange),!0))},_addActions:function(){this._actions=[{id:k.INDENT.INDENT_ACTION,enabled:!0,key:"ctrl_]",platformKey:{mac:"meta_]"},description:l.indentDescription,callback:f.hitch(this,"_indentCode",f.hitch(this._indentUtilities,"indentSelection"))},{id:k.INDENT.OUTDENT_ACTION,
enabled:!0,key:"ctrl_[",platformKey:{mac:"meta_["},description:l.outdentDescription,callback:f.hitch(this,"_indentCode",f.hitch(this._indentUtilities,"unindentSelection"))},{id:"rtc_format_code_tab",key:"tab",enabled:!0,callback:f.hitch(this,"_tabIndent")}];this._actionService.loadActions(this._actions)},_addKeyBindings:function(){this._keyhandler.addBindings([{key:"shift_tab",action:k.INDENT.OUTDENT_ACTION}])},_indentCode:function(a){if(this._isCodeInSelection())return a(b.DEFAULT_TAB_STRING),!0},
_tabIndent:function(){if(!this._cursor.hasSelection())return!1;this._indentCode(f.hitch(this._indentUtilities,"indentSelection"));return!0},_updateActionsOnDocumentChange:function(a){a&&f.isArray(a)&&a.some(function(a){if(a.type===c.READONLY_STATE_CHANGE_EVENT)return this._updateActiveSection(),!0},this)},_updateActiveSection:function(){var a=!this._cursor.isCursorReadOnly(),a=this._isCodeInSelection()&&a;this._actionService.updateAction(k.INDENT.INDENT_ACTION,{enabled:a});this._actionService.updateAction(k.INDENT.OUTDENT_ACTION,
{enabled:a});this._actionService.updateAction("rtc_format_code_tab",{enabled:a})},_isCodeInSelection:function(){var a=this._cursor.selectionInfo();return d.isCodeInRange(a.startNode,a.endNode)},destroy:function(){this._actions.forEach(function(a){this._actionService.removeAction(a.id)},this)}})})},"MW/rtc/plugins/indentutilities/IndentUtilitiesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/Document","MW/rtc/plugins/indentutilities/IndentUtilities"],
function(h,f,g,e){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.internaldocument","rtc.document","rtc.textnodeservice","matlab.tokens"]}},createInstance:function(d,c,b,a,f){return new e(d,c,b,a,f)}})})},"MW/rtc/plugins/indentutilities/IndentUtilities":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/events/DocumentEvent MW/rtc/plugins/language/matlab/autoindent/preferences/FunctionIndentingPreferences MW/rtc/plugins/language/matlab/tokenizer/TokenConstants MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities MW/rtc/plugins/undoredo/EditBlockConstants mw-utils/Utils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h(null,{_INDENT_AMOUNT:4,_UNDOREDO_BLOCK_NAME:"AutoIndent",constructor:function(a,b,c,d,e){this._cursor=a;this._textNodeService=d;this._internalDocument=b;this._document=c;this._tokenizerService=e;this.setIndentingStyle(l.MixedFunctionIndenting)},indentSelection:function(a,b){this._indentSelection(1,a,b)},unindentSelection:function(a){this._internalDocument.root.getTextForPositioning().length&&this._indentSelection(-1,a)},setIndentingStyle:function(a){this._indentingStyle=
a},_indentSelection:function(a,b,c){var d=this._document.startEdit(n.INDENT),e=this._cursor.selectionInfo(),f=this._internalDocument.getLineNumber(e.startNode.rootContainer()),g=this._internalDocument.getLineNumber(e.endNode.rootContainer());if(a=this._doIndentOrUnindentOnSelection(a,b,e,c))this._generateAndEmitEvents(d,f,g),this._cursor.setPosition(a)},_doIndentOrUnindentOnSelection:function(a,b,c,d){var e=this.getRangeFromSelection(c),f=this._cursor.selectionInfo2cursorPos(c),g=b.length;if(0<a)this.blockIndent(e.start,
e.end,b,d),c=this._adjustSelectionForIndent(c,f,b,d);else{a=this.blockUnindent(e.start,e.end,"",g);if(0===a.length)return this._document.endEdit(),null;c=this._adjustSelectionForUnindent(c,f,a)}return c},_adjustSelectionForIndent:function(a,b,d,e){var f=a.isReversed;d=d.length;var g=this._internalDocument.getLineNode(b.line),h=this._internalDocument.getLineNode(b.anchor.line);if(a.isNull){if(c.isCodeContainer(g)||e)b.column+=f||void 0!==b.column?d:0}else{if(c.isCodeContainer(g)||e)b.column+=f||b.column?
d:0;if(c.isCodeContainer(h)||e)b.anchor.column+=!f||b.anchor.column?d:0}return b},_adjustSelectionForUnindent:function(a,b,d){a=a.isReversed;var e=this._internalDocument.getLineNode(b.line),f=this._internalDocument.getLineNode(b.anchor.line);c.isCodeContainer(e)&&(b.column-=a?d[0]:d[1],b.column=Math.max(0,b.column));c.isCodeContainer(f)&&(b.anchor.column-=!a?d[0]:d[1],b.anchor.column=Math.max(0,b.anchor.column));return b},_generateAndEmitEvents:function(a,b,c){b=[k.create(b,c)];a.appendUndoEvents(b);
a.appendRedoEvents(b);this._document.endEdit();this._internalDocument.emitDocumentEvents(b)},getRangeFromSelection:function(a){var b=a.startNode.rootContainer(),c=a.endNode.rootContainer(),d=0;0===a.endPos&&b!==c?(c=c.previousSibling(),d=0):d=c.maxOffset();return{start:b,end:c,endLength:d}},blockIndent:function(a,b,d,e){for(var f=null;!f||f!==b;)(c.isCodeContainer(a)||e)&&this.indentContainer(a,d),f=a,a=a.nextSibling()},blockDeltaIndent:function(a,b,d,e){for(var f=null,g=0,h=!1,k=0;!f||f!==b;)c.isCodeContainer(a)&&
!a.isReadOnly()&&(f=d[g],0<f?(this.indentContainer(a,e.substring(0,f)),h=!0):0>f&&(k=this.unindentContainer(a,-f))&&(h=!0),p.isWhitespace(a.getText())||0!==this.rightTrimContainer(a)&&(h=!0)),f=a,a=a.nextSibling(),g+=1;return h},blockUnindent:function(a,b,d,e){for(var f=null,g=-1,h=!1,k=0,l=0<d.length;!f||f!==b;)c.isCodeContainer(a)&&!a.isReadOnly()&&(k=l?this.unindentContainerByString(a,d,e):this.unindentContainer(a,e),0>g&&(g=k),k&&(h=!0)),f=a,a=a.nextSibling();return!h?[]:[g,k]},indentContainer:function(b,
c){var d=b.startNode();if(d){var d=new a(d,0),e=this._textNodeService.createTextNodeForPosition(c,d);this._internalDocument.insertAtPosition(e,d)}},unindentContainer:function(a,b){var c=a.getText(),d=0;if(b&&0<b)if((c=c.substr(d,b).match(/\s*/))&&c[0])d+=c[0].length;else return 0;return this._internalDocument.deleteTextRange(a,d,!1,!0)},unindentContainerByString:function(a,b,c){var d=a.getText(),e=d.indexOf(b);if(0>e)return 0;b=b.length;c&&0<c&&(c=d.substr(e+b,c).match(/\s*/))&&c[0]&&(b+=c[0].length);
return this._internalDocument.deleteTextRange(a,b,e,!0)},rightTrimContainer:function(a){var b=0,c=0;if((b=a.getText().match(/\s*$/))&&b[0])c=b.index,b=b[0].length;else return 0;return this._internalDocument.deleteTextRange(a,b,c,!0)},skipWhiteSpaces:/\S|$/,_indentDelta:function(a,b){var c=a.search(this.skipWhiteSpaces);return b.search(this.skipWhiteSpaces)-c},getIndentLevel:function(a){return a.getText().search(this.skipWhiteSpaces)},getIndentForLineNumber:function(a){a=this._internalDocument.getLineNode(a);
return this.getIndentLevel(a)},getIndentArray:function(a,b){var c=[],d,e=0;for(d=0;d<a.length;d+=1){var f=this._indentDelta(a[d],b[d]);c.push(f);e<f&&(e=f)}c.push(e);return c},changeLineIndent:function(a,b){g.assert(0!==b,"Delta should not be zero");var c=this._internalDocument.getLineNode(a),d=this._document.startEdit(),e;0<b?e=this._indentContainer(c,b):0>b&&(e=this._unindentContainer(c,-b));this._cursor.setPosition(e);c=k.create(a,a);d.appendUndoEvents([c]);d.appendRedoEvents([c]);this._document.endEdit();
this._internalDocument.emitDocumentEvents([c])},_indentContainer:function(a,b){g.assert(0<b,"Amount to indent should be greater than zero");var c=d.getWhitespaceStringOfLength(b);this.indentContainer(a,c);var e=this._cursor.getPosition();e.column<c.length&&(e.column+=c.length);return e},_unindentContainer:function(a,b){g.assert(0<b,"Amount to un-indent should be greater than zero");this.unindentContainer(a,b);return this._cursor.getPosition()},format:function(a){var b=this._tokenizerService.getLexStateForLine(a),
c=0;b&&this._tokenizerService.isLineContinuation(b)?c=this.processLineContinuations(a):b&&!this._tokenizerService.isLineContinuation(b)&&(c=this.processNonLineContinuations(a));b=this.findFirstNonWhitespaceTokenInLine(a);c=this._findIndentLevel(b,a,c);b=this.getDeltaOfIndent(a,c);0!==b&&this._document.undoable(f.hitch(this,"changeLineIndent",a,b),this._UNDOREDO_BLOCK_NAME);return c},processLineContinuations:function(a){var b=0,c=null;0<a&&(c=this._tokenizerService.getLexStateForLine(a-1));a=!0;c&&
this._tokenizerService.isLineContinuation(c)&&(a=!1);a&&(b=this._INDENT_AMOUNT);return b},processNonLineContinuations:function(a){for(var b=null,c=0,d=!1,e=a;!d;){var f=this._isCodeLineEmpty(e-1);0<a&&(b=this._tokenizerService.getLexStateForLine(e-1));if(b&&this._tokenizerService.isLineContinuation(b))c=-this._INDENT_AMOUNT,d=!0;else if(!f||!b)d=!0;e-=1}return c},_isCodeLineEmpty:function(a){if(0<=a)return!this._document.isLineCode(a+1)||""===this._document.getLineText(a+1)},findFirstNonWhitespaceTokenInLine:function(a){for(a=
this._tokenizerService.getFirstTokenOnLine(a);null!==a&&q.isWhitespaceToken(a);)a=this._tokenizerService.getNextTokenOf(a);return a},_findIndentLevel:function(a,b,c){var d=-1;if(null!==a){var e=this._findStartTokenForMidBlock(a,b);null!==e?d=this._getIndentLevelForMidToken(e):q.isTokenEndOfBlock(a)?d=this._getIndentLevelForEndToken(a,b):q.isFunctionToken(a)&&this._isTokenNestedFunction(a)&&(d=this._getIndentLevelForFunctionToken(a,b))}if(0>d){a=this._findNonWhitespaceAndComment(a,null,!0,b);if(null!==
a)if(b=this.findFirstNonWhitespaceTokenInLine(a.getPositionInfo().line),q.isTokenEndOfBlock(a)&&a.equals(b)){if(d=this.getTokenIndent(a),this._indentingStyle===l.MixedFunctionIndenting||this._indentingStyle===l.ClassicFunctionIndenting)(a=this.findCorrespondingStartToken(a,a._line))&&this._isTokenNestedFunction(a,a._line&&this._indentingStyle===l.ClassicFunctionIndenting)&&(d-=this._INDENT_AMOUNT)}else null!==b&&(d=this.searchBackAndCalculateIndent(a,b));d+=c}0>d&&(d=0);return d},_findStartTokenForMidBlock:function(a,
b){var c=null;switch(a.getType()){case m.ELSE:case m.ELSEIF:c=this.findCorrespondingStartToken(a,b);break;case m.CATCH:c=this.findCorrespondingStartToken(a,b);break;case m.CASE:case m.OTHERWISE:c=this.findCorrespondingStartToken(a,b)}return c},findCorrespondingStartToken:function(a,b){var c=0;for(a=this._findToken(a,b);null!==a;){if(q.isTokenStartOfBlock(a))if(0===c)break;else{if(0>(c-=1))return null}else q.isTokenEndOfBlock(a)&&(c+=1);a=this._findToken(a,b)}return a},_findToken:function(a,b){g.assert(null!==
a,"Input token should not be null");for(var c=this._tokenizerService.getPreviousTokenOf(a,b);null!==c;){if(q.isTokenStartOfBlock(c)||q.isTokenEndOfBlock(c)||q.isTokenStartOfMidBlock(c))return c;c=this._tokenizerService.getPreviousTokenOf(c,b)}return null},_isTokenNestedFunction:function(a,b){return q.isFunctionToken(a)&&null!==this._findMatchingFunctionToken(a,b)},searchBackAndCalculateIndent:function(a,b){for(var c=0,d=a;null!==d;){a=d;if(q.isTokenStartOfBlockIndent(a)){if(!q.isFunctionToken(a)||
this._indentingStyle===l.AllFunctionIndent||q.isIndentableFunction(a)&&this._indentingStyle===l.MixedFunctionIndenting)if(a.equals(b)||q.isTokenStartOfBlock(a))c+=1}else q.isTokenEndOfBlock(a)&&!a.equals(b)&&(c-=1,this._indentingStyle===l.MixedFunctionIndenting&&(d=this.findCorrespondingStartToken(a,a._line))&&this._isTokenNestedFunction(d)&&(c-=1));d=this._findNonWhitespaceAndComment(a,b,!0)}return this.getTokenIndent(a)+c*this._INDENT_AMOUNT},_findMatchingFunctionToken:function(a,b){var c=null;
if(a.getType()===m.FUNCTION||a.getType()===m.NESTED)c=this.findCorrespondingStartToken(a,b);return c},_getIndentLevelForMidToken:function(a){var b=this.getTokenIndent(a);q.isSwitchToken(a)&&(b+=this._INDENT_AMOUNT);return b},_getIndentLevelForEndToken:function(a,b){var c=-1,d=this.findCorrespondingStartToken(a,b);null!==d&&(c=this.getTokenIndent(d));return c},_getIndentLevelForFunctionToken:function(a,b){var c=-1,d=this._findMatchingFunctionToken(a,b);null!==d&&(c=this.getTokenIndent(d)+this._INDENT_AMOUNT);
return c},getTokenIndent:function(a){a=a.getPositionInfo();return this.getIndentForLineNumber(a.line)},getDeltaOfIndent:function(a,b){g.assert(0<=b,"Indent should be greater than or equal to zero");var c=this.getIndentForLineNumber(a);return b-c},_findNonWhitespaceAndComment:function(a,b,c,d){if(c){if(null!==a&&a.equals(b))return null;a=this._tokenizerService.getPreviousTokenOf(a,d);null!==b&&(b=this._tokenizerService.getPreviousTokenOf(b,d))}for(;null!==a&&!a.equals(b);){if(this.isNotWhitespaceOrComment(a))return a;
a=c?this._tokenizerService.getPreviousTokenOf(a,d):this._tokenizerService.getNextTokenOf(a)}return null},isNotWhitespaceOrComment:function(a){g.assert(null!==a,"Token passed in cannot be null");return q.isWhitespaceToken(a)&&!q.isSectionTitleToken(a)||q.isBlockCommentToken(a)||q.isCommentToken(a)&&!this.findFirstNonWhitespaceTokenInLine(a.getPositionInfo().line).equals(a)?!1:!0}})})},"MW/rtc/plugins/language/matlab/autoindent/preferences/FunctionIndentingPreferences":function(){define([],function(){return{AllFunctionIndent:"AllFunctionIndent",
MixedFunctionIndenting:"MixedFunctionIndent",ClassicFunctionIndenting:"ClassicFunctionIndent"}})},"MW/rtc/plugins/hyperlink/HyperlinkInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HyperlinkInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/hyperlink/HyperlinkInsertionRules":function(){define("dojo/_base/declare mw-log/Log MW/rtc/plugins/hyperlink/model/HyperlinkNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction MW/rtc/plugins/insertionrules/receivinginstructions/InsertIfCompatibleInstruction MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode".split(" "),
function(h,f,g,e,d,c,b,a){return h([e],{_compatibleParents:[a],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return g},getReceivingInstruction:function(a){return a.isAtEdge()?new c:new b},getTopLevelInsertionInstruction:function(b,c,e,f,g){return{insertInRoot:{relationToPosition:d.RELATION.AFTER,containerConstructor:a}}}})})},"MW/rtc/plugins/insertionrules/InsertionRuleServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./InsertionRuleService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.insertionrule"]}},createInstance:function(e){return new g(e)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/insertionrules/InsertionRuleService":function(){define(["dojo/_base/declare","MW/rtc/core/NodeMap","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],function(h,f,g){return h(null,{RECEIVING_INSTRUCTION:g.RECEIVING_INSTRUCTION,RELATION:g.RELATION,constructor:function(e){this._rules=
new f(e)},destroy:function(){},getRulesForNode:function(e){var d=this._rules.get(e);if(!d)throw Error("MW.rtc.plugins.insertionrules.InsertionRuleService: No rule for node of type: "+e.className);return d},isInstructionOfType:function(e,d){return e.getType()===d}})})},"MW/rtc/plugins/lists/model/ListParagraphContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListParagraphContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/lists/model/ListParagraphContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./ListParagraph"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/lists/model/ListParagraph":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode"],function(h,f){return h([f],{constructor:function(f,e){e&&(this.type=e.type);this.type=this.type||
"unordered";this.wrappable=!0},className:"ListParagraph",CHILD_TEXT_SEPARATOR:"\n",containerType:function(){return this.type},defaultTextNode:function(){return{className:"RichTextNode",text:""}},isEmpty:function(){return 1<this.children.length?!1:this.inherited(arguments)},isSameTypeAs:function(f){return this.className===f.className&&this.type===f.type},isTextContainerNode:function(){return!0},canSpliceContainers:function(f,e){return"ordered"===f.type&&"ordered"===e.type||"ordered"!==f.type&&"ordered"!==
e.type},canMergeContainerWithSibling:function(f,e){return"ordered"===f.type&&"ordered"===e.type||"ordered"!==f.type&&"ordered"!==e.type},_serializeAttributes:function(f){f.type=this.type},childrenAreContainers:!0})})},"MW/rtc/plugins/lists/model/ListItemContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListItemContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/lists/model/ListItemContentConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverter","./ListItem"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./RichTextParagraphNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},
"MW/rtc/plugins/lists/model/ListItem":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,f){return h([f],{constructor:function(f,e){e&&(this.bullet=e.bullet)},className:"ListItem",containerType:function(){return this.parent.type},isTextContainerNode:function(){return!0},offsetInContainer:function(f){var e,d=0;f=f||this.rootContainer();for(var c=0;c<f.children.length;c++){e=f.children[c];if(this===e)return d;d=d+e.maxOffset()+f.CHILD_TEXT_SEPARATOR.length}return-1},
_serializeAttributes:function(f){this.inherited(arguments);this.bullet&&(f.bullet=this.bullet)}})})},"MW/rtc/plugins/lists/ListParagraphInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListParagraphInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/lists/ListParagraphInsertionRules":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants","MW/rtc/plugins/lists/model/ListParagraph"],function(h,f,g,e){return h([f],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return e},getTopLevelInsertionInstruction:function(d,c,b,a,f){c=d.getNode();return c.isInstanceOf(e)&&!d.isAtEdge()&&c.containerType()===a.containerType()?{insertAlternateNodes:a.children}:{insertInRoot:{relationToPosition:g.RELATION.AT}}}})})},
"MW/rtc/plugins/lists/ListItemInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListItemInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/lists/ListItemInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants",
"MW/rtc/plugins/lists/model/ListItem","MW/rtc/plugins/lists/model/ListParagraph"],function(h,f,g,e,d){return h([f],{_compatibleParents:[d],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return e},getTopLevelInsertionInstruction:function(c,b,a,e,f){return{insertInRoot:{relationToPosition:g.RELATION.AT,containerConstructor:d}}}})})},"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/codeexample/model/CodeExampleBlockNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},
"MW/rtc/plugins/codeexample/model/CodeExampleBlockNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/InnerNode","MW/rtc/plugins/codeexample/CodeExampleEnum"],function(h,f,g){return h(f,{constructor:function(e,d){d=d||{};this.type=d.type||g.MATLAB;this.wrappable=!1},className:"CodeExampleBlockNode",CHILD_TEXT_SEPARATOR:"\n",containerType:function(){return this.type},isSameTypeAs:function(e){return this.className===e.className&&this.type===e.type},isTextContainerNode:function(){return!0},_serializeAttributes:function(e){e.type=
this.type},childrenAreContainers:!0})})},"MW/rtc/plugins/codeexample/CodeExampleEnum":function(){define([],function(){return{MATLAB:"codeexample_matlab",PLAIN:"codeexample_plain"}})},"MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/codeexample/model/CodeExampleLineNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","MW/rtc/plugins/codeexample/model/CodeExampleLineNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/codeexample/model/CodeExampleLineNode":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/view/layoutmanager/rules/DefaultRule"],function(h,f,g){return h([f],
{constructor:function(e){this.wrappable=!1;this.groupingType=g().groupingType},className:"CodeExampleLineNode",containerType:function(){return this.parent.type},offsetInContainer:function(e){var d,c=0;e=e||this.rootContainer();for(var b=0;b<e.children.length;b++){d=e.children[b];if(this===d)return c;c=c+d.maxOffset()+e.CHILD_TEXT_SEPARATOR.length}return-1},_serializeAttributes:function(e){}})})},"MW/rtc/plugins/view/layoutmanager/rules/DefaultRule":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities",
"MW/rtc/plugins/view/layoutmanager/abstract/BaseRule"],function(h,f,g){return h(g,{constructor:function(){},getOperationsForLayout:function(e,d,c){return{nodeToPlace:e}},getOperationsForRemove:function(e,d){return{nodeToRemove:this._getDomNode(e)}},priority:function(){return 0}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeExampleBlockLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f},layout:function(e,d){return e.layoutInto(d,"div",{"class":"CodeExampleBlock "+d.type})}})})},"MW/rtc/plugins/codeexample/view/CodeExampleLineLayouterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CodeExampleLineLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/codeexample/view/CodeExampleLineLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/model/CodeExampleLineNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f},
layout:function(e,d){return e.layoutInto(d,"div",{"class":"CodeExampleLine"})}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeExampleBlockCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/codeexample/view/CodeExampleBlockCoordinateConverter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f}})})},"MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter":function(){define(["dojo/_base/declare","../CoordinateConverterUtilities","./BaseCoordinateConverter"],function(h,f,g){return h(g,{_SEARCH_BIDIRECTION:0,_SEARCH_UPWARD:1,_SEARCH_DOWNWARD:2,getClosestRect:function(e,
d,c){for(var b=0,a=e.children.length-1;b<=a;){var g=Math.floor((b+a)/2),h=this._getClosestRectFrom(e,g,c,this._SEARCH_BIDIRECTION);if(f.isCoordinateAboveRect(d,h))a=g-1;else if(f.isCoordinateBelowRect(d,h))b=g+1;else break}b>a&&(a=this._getClosestRectFrom(e,a,c,this._SEARCH_UPWARD),e=this._getClosestRectFrom(e,b,c,this._SEARCH_DOWNWARD),a&&e&&(h=f.getClosestYDistanceToRect(d,a),d=f.getClosestYDistanceToRect(d,e),h=h<d?a:e));return h},_getClosestRectFrom:function(e,d,c,b){for(var a=0,f=e.children.length;a<
f;){if(0<=[this._SEARCH_UPWARD,this._SEARCH_BIDIRECTION].indexOf(b)){var g=this._getRectForChildNode(e,d-a,c);if(g)return g}if(0<=[this._SEARCH_DOWNWARD,this._SEARCH_BIDIRECTION].indexOf(b)&&(g=this._getRectForChildNode(e,d+a,c)))return g;var a=a+1,g=0>d-a,h=d+a>e.children.length-1;if(b===this._SEARCH_UPWARD&&g||b===this._SEARCH_DOWNWARD&&h||b===this._SEARCH_BIDIRECTION&&g&&h)break}return null},_getRectForChildNode:function(e,d,c){return(e=e.children[d])?c(e)[0]:null}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CodeExampleBlockInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/LineNode","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],
function(h,f,g,e,d){return h([e],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return g},getTopLevelInsertionInstruction:function(c,b,a,e,g){return c.isAtRightEdge()&&c.isAtLeftEdge()?{insertInRoot:{relationToPosition:d.RELATION.AT}}:g.isAtRightEdge()&&!a?{insertInRoot:{relationToPosition:d.RELATION.AFTER,insertSibling:!0,siblingConstructor:f}}:{insertInRoot:{insertionPosition:g}}}})})},"MW/rtc/plugins/codeexample/CodeExampleLineInsertionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CodeExampleLineInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/codeexample/CodeExampleLineInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/model/CodeExampleBlockNode","MW/rtc/plugins/codeexample/model/CodeExampleLineNode","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/insertionrules/InsertionRuleConstants"],
function(h,f,g,e,d){return h([e],{_compatibleParents:[f],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return g},getTopLevelInsertionInstruction:function(c,b,a,e,g){return{insertInRoot:{relationToPosition:d.RELATION.AT,containerConstructor:f}}}})})},"MW/rtc/model/io/serializers/providers/containers/CodeExampleBlockContainerSerializerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/CodeExampleBlockContainerSerializer"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/model/io/serializers/containers/CodeExampleBlockContainerSerializer":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/io/DocumentTag MW/rtc/model/io/serializers/containers/CodeExampleLineContainerSerializer MW/rtc/model/io/serializers/containers/ContainerSerializer MW/rtc/model/io/XmlUtils MW/rtc/plugins/codeexample/CodeExampleEnum".split(" "),function(h,
f,g,e,d,c,b){return h(d,{constructor:function(a){this._codeExampleLineHandler=new e(a)},_INTRODUCED_VERSION:"R2018a",write:function(a,b,c){var d=document.createElement(this.getNodeType());a.forEach(function(a){this._writeCodeExample(a,d,b,c)},this);return d},read:function(a,b,c,d){var e=!0,f={className:this.getNodeType(),children:[]};f.type=this.getXMLType(d);for(d=0;d<a.childNodes.length;d++)e=this._codeExampleLineHandler.read(a.childNodes[d],b,c),f.children=f.children.concat(e.readObject),e=e.readStatus;
return{readObject:[f],readStatus:e}},_writeCodeExample:function(a,b,d,e){var f=c.createXMLElement(g.SDT_TAG),h=c.createSdtAliasPropertyElement(c.createXMLElement(g.SDT_PROPERTY_TAG),this.getXMLType(a.type)),p=c.createParagraphProperty(g.TEXT_FORMAT_VALUE),p=c.createAlternateContent(this._INTRODUCED_VERSION,h,p);f.appendChild(p);var h=c.createXMLElement(g.SDT_CONTENT_TAG),r;for(r in a.children){var s=a.children[r],t=c.createXMLElement(),u=c.createParagraphProperty(this._codeExampleLineHandler.getXMLType()),
p=c.createParagraphProperty(g.TEXT_FORMAT_VALUE),p=c.createAlternateContent(this._INTRODUCED_VERSION,u,p);t.appendChild(p);p=this._codeExampleLineHandler.write(s,d,e);for(s=p.length;0!==s;)t.appendChild(p[0]),s--;h.appendChild(t)}f.appendChild(h);b.appendChild(f)},getXMLType:function(a){if(!a)return"none";for(var c in b)if(b.hasOwnProperty(c)&&b[c]===a)return a;return"none"},getNodeType:function(){return"CodeExampleBlockNode"}})})},"MW/rtc/model/io/serializers/containers/CodeExampleLineContainerSerializer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/serializers/containers/ContainerSerializer","MW/rtc/model/io/XmlUtils"],function(h,f,g,e,d){return h(e,{_CHILD_TYPE:"PlainTextNode",write:function(c,b,a){var d=document.createElement(this.getXMLType());c.children.forEach(function(c){c=a.getSerializer(c.className).write(c,b,a);d.appendChild(c);var e=this._createRunPropertyWithFonts("monospace");c.insertBefore(e,c.firstElementChild)},this);return d.childNodes},read:function(c,b,a){c=a.getSerializer(this._CHILD_TYPE).read([c]);
return{readObject:c.readObject.map(function(a){return{className:this.getNodeType(),children:[a]}},this),readStatus:c.readStatus}},_createRunPropertyWithFonts:function(c){var b=d.createXMLElement(g.RUN_OF_TEXT_PROPERTY_TAG_NAME),a=d.createXMLElement(g.RUN_OF_FONT);a.setAttributeNS(g.NAMESPACE_URL,g.NAMESPACE_TAG+":cs",c);b.appendChild(a);return b},getXMLType:function(){return"CodeExampleLine"},getNodeType:function(){return"CodeExampleLineNode"}})})},"MW/rtc/model/io/serializers/providers/containers/CodeExampleLineContainerSerializerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/model/io/serializers/containers/CodeExampleLineContainerSerializer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.document",
"rtc.internaldocument","rtc.cursor","rtc.actionservice"]}},createInstance:function(e,d,c,b){return new f(e,d,c,b)}})})},"MW/rtc/plugins/codeexample/CodeExampleBlockKeyHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/events/FormatChangeEvent MW/rtc/model/NodeUtilities MW/rtc/model/PositionUtilities MW/rtc/plugins/codeexample/model/CodeExampleBlockNode".split(" "),function(h,f,g,e,d,c,b,a,k){return h(e,
{constructor:function(a,b,c,d){this._document=a;this._internalDocument=b;this._cursor=c;this._actionService=d;d.loadActions([{id:"codeexampleblock.backspace",key:"backspace",enabled:!0,callback:f.hitch(this,"_handleBackspace")},{id:"codeexampleblock.delete",key:"delete",enabled:!0,callback:f.hitch(this,"_handleDelete")},{id:"codeexampleblock.escape",key:"escape",enabled:!0,callback:f.hitch(this,"_handleEscape")},{id:"codeexampleblock.selectall",enabled:!0,key:"ctrl_a",platformKey:{mac:"meta_a"},callback:f.hitch(this,
"_handleSelectAll")}])},_handleBackspace:function(){var a=this._cursor.getNode().rootContainer(),b=null;if(!this._cursor.hasSelection()&&d.isAtStartOfContainer(this._cursor.position,a)){var c=a.prevNode()?a.prevNode().rootContainer():null;a instanceof k?b=a:c&&c instanceof k&&(b=c)}return!this._cursor.hasSelection()&&b?(this._cursor.anchor.setPosition(b.startNode(),0),b.nextNode()?this._cursor.setPosition(b.nextNode(),0,!0):this._cursor.setPosition(b.endNode(),b.endNode().maxOffset(),!0),!0):!1},
_handleDelete:function(){var a=this._cursor.getNode().rootContainer(),b=null;if(!this._cursor.hasSelection()&&d.isAtEndOfContainer(this._cursor.position,a)){var c=a.nextNode()?a.nextNode().rootContainer():null;a instanceof k?b=a:c&&c instanceof k&&(b=c)}return!this._cursor.hasSelection()&&b?(this._cursor.anchor.setPosition(b.startNode(),0),b.nextNode()?this._cursor.setPosition(b.nextNode(),0,!0):this._cursor.setPosition(b.endNode(),b.endNode().maxOffset(),!0),!0):!1},_handleEscape:function(){var a=
this._cursor.getNode().rootContainer();return!this._cursor.hasSelection()&&a instanceof k&&(a=a.nextNode()?a.nextNode().rootContainer():null)?(this._cursor.setPosition(a.startNode(),0,!0),!0):!1},_handleSelectAll:function(){var b=this._cursor.getNode().rootContainer();if(b instanceof k){var c=!1,d=!1,e=b.startNode(),f=b.endNode();if(this._cursor.hasSelection()){var d=!0,b=this._cursor.getSelectionStartNode().rootContainer(),g=this._cursor.getSelectionEndNode().rootContainer();if(b===g){var b=e.startPosition(),
g=f.endPosition(),h=this._cursor.getSelection(),t=h.getStartPosition(),h=h.getEndPosition();if(0!==a.comparePositions(b,t)||0!==a.comparePositions(g,h))c=!0}}else b.isEmpty()||(c=!0);if(c)return d&&this._cursor.internalCollapseSelection(!1),this._cursor.setPosition(e,0),this._cursor.fixAnchor(),this._cursor.setPosition(f,f.maxOffset(),!0),!0}return!1}})})},"MW/rtc/model/events/FormatChangeEvent":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentConstants","MW/rtc/model/DocumentEventUtilities",
"./DocumentEventBase"],function(h,f,g,e){var d=h(e,{constructor:function(c,b,a,d){this.type=f.FORMAT_CHANGE_EVENT;this.oldFormat=a;this.newFormat=d},destroy:function(){}});return{create:function(c,b,a,e){g.assertValidLines(c,b,f.FORMAT_CHANGE_EVENT);return new d(c,b,a,e)}}})},"MW/rtc/plugins/codeexample/CodeExampleProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/codeexample/CodeExample","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.view rtc.cursor rtc.cursor.view rtc.actionservice".split(" ")}},
createInstance:function(e,d,c,b,a,g){return new f(e,d,c,b,a,g)}})})},"MW/rtc/plugins/codeexample/CodeExample":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/model/NodeUtilities MW/rtc/plugins/codeexample/CodeExampleEnum MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/codeexample/model/CodeExampleLineNode MW/rtc/RichTextComponentFeatureEnum".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h(d,{constructor:function(a,b,c,d,e,h){this._document=a;this._internalDocument=b;this._view=c;this._cursor=d;this._actionService=h;a=[{name:l.MATLAB,method:f.hitch(this,this.formatTemplate,l.MATLAB)},{name:l.PLAIN,method:f.hitch(this,this.formatTemplate,l.PLAIN)}];b.registerFormatTemplates(a);this.own(g.after(e,"onChange",f.hitch(this,"_updateView")));this.own(g.after(this._cursor,"onChange",f.hitch(this,this._updateActions)));this.own(g.after(this._cursor,
"onChange",f.hitch(this,this._fixPartialSelection)));h.loadActions(this._actions())},_ACTIVE_BLOCK_CSS_CLASS:"BlockActive",formatTemplate:function(a){var b={};b.container=new m([],{type:a});b.textContainer=new q([]);b.container.addChild(b.textContainer,0);return b},_actions:function(){return[{id:n.CODE_EXAMPLE.DEFAULT_ACTION,enabled:!1,selected:!1,callback:f.hitch(this,this._insertCodeExample,l.MATLAB)},{id:n.CODE_EXAMPLE.MATLAB_ACTION,key:"ctrl_alt_m",platformKey:{mac:"ctrl_alt_m"},enabled:!1,selected:!1,
callback:f.hitch(this,this._insertCodeExample,l.MATLAB)},{id:n.CODE_EXAMPLE.PLAIN_ACTION,key:"ctrl_alt_k",platformKey:{mac:"ctrl_alt_k"},enabled:!1,selected:!1,callback:f.hitch(this,this._insertCodeExample,l.PLAIN)}]},_updateActions:function(){var a=this._getParagraphFormat();this._actionService.updateAction(n.CODE_EXAMPLE.DEFAULT_ACTION,{enabled:this._canSetFormat(),selected:a===l.MATLAB});this._actionService.updateAction(n.CODE_EXAMPLE.MATLAB_ACTION,{enabled:this._canSetFormat(),selected:a===l.MATLAB});
this._actionService.updateAction(n.CODE_EXAMPLE.PLAIN_ACTION,{enabled:this._canSetFormat(),selected:a===l.PLAIN})},_fixedSelectionInfo:function(){var a=this._cursor.selectionInfo();a.isNull||(a=this._cursor.adjustSelection(a,!0),this._cursor.setPosition(a.startNode,a.startPos),this._cursor.fixAnchor(!0),this._cursor.setPosition(a.endNode,a.endPos),a=this._cursor.selectionInfo());return a},_treatSelection:function(){var a;this._cursor.hasSelection()&&(a=this._cursor.selectedText(),this._document.deleteTextAtCurrentPosition(c.BACKWARD_DELETE));
return a},_insertEmptyCodeExample:function(a){var b=this._cursor.position;this._cursor.hasSelection()&&e.assert("_insertEmptyCodeExample: Selection must be empty!");var c=this._internalDocument.createContainerForType(a);a=c.container;var d=c.textContainer,c=this._internalDocument.createNode(d.defaultTextNode());d.addChild(c);b=this._internalDocument.insertAtPosition(a,b);this._cursor.setPosition(c.startPosition());this._cursor.onUpdate(!1,!0);return b.events},_insertCodeExample:function(c){var d=
this._getParagraphFormat();if(this._canSetFormat()&&d!==c){var d=this._cursor.isReversed(),e=this._fixedSelectionInfo(),f=e.startPosition.getLineColumn().line-1,g=e.endPosition.getLineColumn().line-1;this._internalDocument.onPreDocumentChanged({});var h=this._document.startBlockEdit(),k=this._treatSelection();c=this._insertEmptyCodeExample(c);k&&(k=b.textToContent(k,this._cursor.getNode()),this._document.insertContent(k,this._cursor.position,this._cursor));e.isNull||(k=this._cursor.getNode().rootContainer(),
e=k.startPosition().getLineColumn(),k=k.endPosition().getLineColumn(),d?this._cursor.setSelectionLineColumn(k.line,k.column,e.line,e.column):this._cursor.setSelectionLineColumn(e.line,e.column,k.line,k.column));h.appendUndoEvents([a.create(f,g)]);h.appendRedoEvents(c);this._internalDocument.emitDocumentEvents(c);this._document.endBlockEdit(h);this._cursor.onUpdate(!1,!0);return!0}},_updateView:function(){var a=this._cursor.getSelectionStartContainer();this._prevActiveContainer!==a&&(this._blur(this._prevActiveContainer),
this._focus(a),this._prevActiveContainer=a)},_focus:function(a){a instanceof m&&this._view.applyClassToLine(this._internalDocument.getLineNumber(a),this._ACTIVE_BLOCK_CSS_CLASS)},_blur:function(a){a instanceof m&&this._view.removeClassFromLine(this._internalDocument.getLineNumber(a),this._ACTIVE_BLOCK_CSS_CLASS)},_fixPartialSelection:function(){if(this._cursor.hasSelection()){var a=this._cursor.getNode().rootContainer(),c=this._cursor.anchor.getNode().rootContainer();if(a!==c){if(c instanceof m)if(this._cursor.isReversed()){if(b.isAtStartOfContainer(this._cursor.anchor,
c))return;b.isAtStartOfContainer(this._cursor.anchor,c.nextNode())||(c.nextNode()?this._cursor.anchor.setPosition(c.nextNode().startNode(),0):this._cursor.anchor.setPosition(c.endNode(),c.endNode().maxOffset()))}else b.isAtStartOfContainer(this._cursor.anchor,c)||this._cursor.anchor.setPosition(c.startNode(),0);a instanceof m&&(this._cursor.suspendChangeEvent(),this._cursor.isReversed()?b.isAtStartOfContainer(this._cursor.position,a)||this._cursor.setPosition(a.startNode(),0,!0):b.isAtStartOfContainer(this._cursor.position,
a.nextNode())||(a.nextNode()?this._cursor.setPosition(a.nextNode(),0,!0):this._cursor.setPosition(a.endNode(),a.endNode().maxOffset(),!0)),this._cursor.activateChangeEvent(!0))}}},_getParagraphFormat:function(){if(!this._cursor)return"none";var a=this._cursor.getSelectionStartNode(),b=this._cursor.getSelectionEndNode();return k.getParagraphFormat({startNode:a,endNode:b})},_canSetFormat:function(){return this._isReadOnly()?!1:!this._isCodeExample()},_isReadOnly:function(){return this._internalDocument&&
this._internalDocument.isReadOnly()||this._cursor&&this._cursor.isCursorReadOnly()?!0:!1},_isCodeExample:function(){var a=this._getParagraphFormat(),b;for(b in l)if(l.hasOwnProperty(b)&&l[b]===a)return!0;return!1}})})},"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighter"],function(h,f,g){return h(f,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.internaldocument","rtc.view.decoration","rtc.richtext.codeexample.matlab.tokens"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/SyntaxHighlighter":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/CodeUtilities MW/rtc/plugins/codeexample/CodeExampleEnum MW/rtc/plugins/codeexample/model/CodeExampleBlockNode MW/rtc/plugins/text/syntaxhighlighter/SyntaxHighlighter".split(" "),
function(h,f,g,e,d,c){return h(c,{constructor:function(b,a,c,d){this._document=b;this._internalDocument=a;this._decorator=c.createDecorator();this._matlabTokens=d},_updateTokens:function(b){for(var a=b.startLine;a<=b.endLine;a++){var c=this._internalDocument.getLineNode(a);if(c instanceof d&&c.containerType()===e.MATLAB){var f=c.children.length-1;this._matlabTokens.retokenizeFromLine(c.getText(),0,f);c=this._matlabTokens.getFlatTokenMapOnLine(a);this._redrawSyntaxHighlighting(a,c)}}},_redrawSyntaxHighlighting:function(b,
a){var c=this._processTokens(a,b,b),d=this._internalDocument.getRangeForLine(b+1);this._decorator.clearRange(d);this._decorateLines(b,c);this._decorator.applyChanges()},_decorateLines:function(b,a){a[b].forEach(function(a){var b=a.range.start,c=a.range.end,b=this._internalDocument.getRangeForLineColumn(b.row+1,b.column+1,c.row+1,c.column+1);this._decorator.setStyle(b,"color",a.color)},this)}})})},"MW/rtc/plugins/text/syntaxhighlighter/SyntaxHighlighter":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/plugins/language/matlab/tokenizer/TokenConstants MW/syntaxhighlighting/ColorMapDefaults mw-log/Log".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b,c,d){this._document=a;this._internalDocument=b;this._decorator=c.createDecorator();this._matlabTokens=d;this._tokensData=d.getTokensData();this._cachedTokens=[];this._aspectHandles=[];this._changedLines=[];this._aspectHandles.push(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_resetCaches")));this._aspectHandles.push(g.after(this._matlabTokens,"onUpdate",f.hitch(this,"_updateTokens"),!0));this._aspectHandles.push(g.after(this._matlabTokens,
"onDelete",f.hitch(this,"_handleDelete"),!0));this._inTypeSection=!1;this._typeSectionStart=this._typeSectionLength=0},_resetCaches:function(){this._tokensData=this._matlabTokens.getTokensData();this._cachedTokens=[];for(var a=this._internalDocument.getMaxLineNumber(),b=0;b<a;b++)this._changedLines[b]=!0},_updateTokens:function(a){this._redrawSyntaxHighlighting(a)},_handleDelete:function(a,b){for(var c=a;c<=b;c++)this._cachedTokens[c]=""},_redrawSyntaxHighlighting:function(a){if(this._document.getCodeText()){var b=
a.startLine,c=a.endLine,d=a.eventEndLine,e=a.isUndoRedo;a=a.tokens;var f=Math.max(c,d),f=this._processTokens(a,b,f);this._updateCache(a,b,c);c>d?(this._decorateLines(b,c,f,this._changedLines),e&&this._decorateLines(b,d,f,!0)):this._decorateLines(b,d,f,!0);this._decorator.applyChanges()}else this._resetCaches()},_decorateLines:function(a,b,c,d){for(;a<=b;a++){var e=this._internalDocument.getLineNode(a);Array.isArray(d)?d[a]&&this._decorate(e,a,c[a]):this._decorate(e,a,c[a])}},_decorate:function(a,
b,c){e.isCodeContainer(a)&&c&&(a=this._internalDocument.getRangeForLine(b+1),this._decorator.clearRange(a),this._decorateForTokens(c))},_decorateForTokens:function(a){a.forEach(function(a){var b=a.range.start,c=a.range.end,b=this._internalDocument.getRangeForLineColumn(b.row+1,b.column+1,c.row+1,c.column+1);this._decorator.setStyle(b,"color",a.color)},this)},_updateCache:function(a,b,c){var d=this._cachedTokens,e=d.length,f=this._internalDocument.getMaxLineNumber();if(e>f){a=e-f;this._cachedTokens.splice(c,
a);this._changedLines.splice(c,a);for(a=b;a<=c;a++)void 0!==this._changedLines[a]&&(this._changedLines[a]=!0)}else if(e<f){d=f-e;for(a=b;a<b+d;a++)this._cachedTokens.splice(a,0,"");for(a=b;a<=c;a++)this._changedLines[a]=!0}else this._markWhichLinesChangedTokens(d,a,b,c)},_markWhichLinesChangedTokens:function(a,b,c,d){for(;c<=d;c++){var e=JSON.stringify(b[c]),f=a[c];this._changedLines[c]=e!==f;e!==f&&b[c]&&(this._cachedTokens[c]=e)}},_appendTokenToMap:function(a,b,c){a.value&&void 0!==c&&b[c].push(a)},
_convertTokenColorToRgbString:function(a){return a=a.r||a.g||a.b?"rgb("+a.r+", "+a.g+", "+a.b+")":""},_createNewToken:function(a,b,c,d){return{value:a?a:"",color:b?b:"",range:{start:c?c:{row:0,column:0},end:d?d:{row:0,column:0}}}},_createRangeOfToken:function(a,b,c){return{start:{row:a,column:b},end:{row:a,column:c}}},_isValidToken:function(a){return 0<a._length&&!(0===a.color.r&&0===a.color.g&&0===a.color.b)},_createNewTokenAndAppendToMap:function(a,b){if(a.valueBuffer){var c=this._createNewToken(a.valueBuffer,
a.colorString,a.start,a.end);this._appendTokenToMap(c,b,a.start.row)}return b},_isInTypeSection:function(){return this._inTypeSection},_doesTokenMarkEndOfTypeSection:function(a){return a===d.DOTDOTDOT||a===d.COMMENT||a===d.CEOL||a===d.EOL||a===d.IEOL||a===d.SEOL||a===d.END_TYPE},_determineColorForToken:function(a){this._isInTypeSection()?this._doesTokenMarkEndOfTypeSection(a._type)?(this._inTypeSection=!1,this._typeSectionLength=this._typeSectionStart=0,a.color=c.colorMapDefaults[d.getCategoryOfToken(a._type)]||
c.colorMapDefaults[339]):(a._column>=this._typeSectionStart&&(this._typeSectionLength+=a._length),a.color=c.colorMapDefaults[d.BEGIN_TYPE]):(a._type===d.BEGIN_TYPE&&(this._inTypeSection=!0,this._typeSectionLength=0,this._typeSectionStart=a._column),a.color=c.colorMapDefaults[d.getCategoryOfToken(a._type)]||c.colorMapDefaults[339])},_processTokens:function(a,c,d){for(var e={"0":[]};c<=d;c++){var f=a[c];if(f){e[c]=[];for(var g={valueBuffer:"",colorString:"",start:-1,end:-1},h=0;h<f.length;h++){var r=
f[h];this._determineColorForToken(r);var s=this._convertTokenColorToRgbString(r.color),t=this._createRangeOfToken(c,r._column,r._column+r._length),u=t.start,t=t.end;b.assert(u.row===t.row,"Tokens should not span multiple lines");this._isValidToken(r)?s===g.colorString?(g.end=t,g.valueBuffer+=r._value):(e=this._createNewTokenAndAppendToMap(g,e),g.start=u,g.end=t,g.colorString=s,g.valueBuffer=r._value):" "===r._value?(g.end=t,g.valueBuffer+=r._value):(e=this._createNewTokenAndAppendToMap(g,e),g={valueBuffer:"",
colorString:"",start:-1,end:-1})}e=this._createNewTokenAndAppendToMap(g,e)}}return e},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._cachedTokens=[];this._changedLines=[]}})})},"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/tokenizer/MatlabTokensPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/tokenizer/MatlabTokensPlugin","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],
function(h,f,g,e){return h(f,{isApplicable:function(d){return e.isMatlabCodeFileOrBuffer(d)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.internaldocument","rtc.document"]}},createInstance:function(d,c){return new g(d,c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/tokenizer/MatlabTokensPlugin":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/tokenizer/TokenState",
"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPlugin"],function(h,f,g,e){return h([e],{constructor:function(d,c){this._tokenState=new g},getFlatTokenMapOnLine:function(d){return this._tokenState.getFlatTokenMap(d)}})})},"MW/rtc/plugins/codeexample/syntaxhighlighter/matlab/tokenizer/TokenState":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","MW/rtc/plugins/language/matlab/tokenizer/Token","MW/rtc/plugins/language/matlab/tokenizer/TokenState"],function(h,f,g,e,
d){return h([d],{getFlatTokenMap:function(c){var b=this.getTokenMap(),a={},d=a[c]=[],f=0,h=-1,q;for(q in b)g.forEach(b[q],function(a){h+=1;d.push(new e(h,a._type,c,f,a._length,a._value));f+=a._length});return a}})})},"MW/rtc/plugins/language/matlab/tokenizer/Token":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g,e,d,c,b){this._index=f;this._type=g;this._line=e;this._column=d;this._length=c;this._value=b},getIndex:function(){return this._index},equals:function(f){return f&&
this._index===f._index&&this._type===f._type&&this._line===f._line&&this._column===f._column&&this._length===f._length&&this._value===f._value},getPositionInfo:function(){return{line:this._line,column:this._column}},setLine:function(f){this._line=f},getType:function(){return this._type},getValue:function(){return this._value}})})},"MW/rtc/plugins/language/matlab/tokenizer/TokenState":function(){define("dojo/_base/declare dojo/_base/lang ./TokenConstants ./Token ./Tokenizer ./TokenUtilities".split(" "),
function(h,f,g,e,d,c){return h(null,{SHIFT_FOR_LENGTH:8,AND_FOR_TYPE:255,constructor:function(){this._tokenizer=d;this._tokenizer.initialize();this._resetTokenStates()},_resetTokenStates:function(){this._tokenMap={};this._lexState=this._tokenizer.make_lex_state();this._savedLexStates=[this._lexState];this._isLineExecutable=[];this._tokensOnLine=[]},initializeLines:function(b){b=b.split("\n");var a=b.length,c;this._resetTokenStates();b=this._addNewLineCharacter(b);for(var d=0;d<a;d++)c=this.tokenizeCode(b[d],
d,this.getLexStateForLine(d)),this.replaceLineHandle(d,c)},retokenize:function(b,a,c){var d=Object.keys(this._tokenMap).length;if(0<=a){b=b.split("\n");b=this._addNewLineCharacter(b);var e=b.length;a>d&&(a=d);var f=c;d>e?(this._deleteTokenPlaceHolders(c,d,d-e,e),this._deleteLineHandles(a,c)):d<e&&(this._insertTokenPlaceHolders(a,c,e-d),this._insertLineHandles(b,a,c));1<this.getNumberOfSavedStates()&&(f=this._rippleThroughLines(b,a,c));return f}},_addNewLineCharacter:function(b){for(var a=b.length,
c=0;c<a-1;c++)b[c]+="\n";return b},_deleteTokenPlaceHolders:function(b,a,c,d){for(var e,g=b;g<a;g++)if(this._tokenMap[g]){b=this._tokenMap[g];for(var h=0;h<b.length;h++)e=b[h],e.setLine(Math.max(0,e.getPositionInfo().line-c));this._tokenMap[Math.max(0,g-c)]=this._tokenMap[g]}a=Object.keys(this._tokenMap).reverse();a.forEach(f.hitch(this,function(a){a=parseInt(a,10);a>=d&&(delete this._tokenMap[a],delete this._tokensOnLine[a])}));this._isLineExecutable.splice(d,a.length-d)},_deleteLineHandles:function(b,
a){for(var c=a-1;c>=b;c--)this._removeLineHandle(c)},_removeLineHandle:function(b){b+1<this.getNumberOfSavedStates()&&this._savedLexStates.splice(b+1,1)},_insertTokenPlaceHolders:function(b,a,c){for(var d=[],e=Object.keys(this._tokenMap).reverse(),f,g=parseInt(e[0],10);g>=b;g--){for(var e=this._tokenMap[g],h=0;h<e.length;h++)f=e[h],f.setLine(f.getPositionInfo().line+c);this._tokenMap[g+c]=this._tokenMap[g];this._isLineExecutable[g+c]=this._isLineExecutable[g]}for(g=b;g<=a;g++)this._tokenMap[g]=d},
_insertLineHandles:function(b,a,c){var d=[],e=this.createStateHandle(b,a);c=Math.min(c,b.length-1);for(var f=a;f<c;f++)d[f-a]={},this._tokenizer.copy_lex_state(d[f-a],e),e=this._createStateHandle(b,f+1,e);for(f=a;f<c;f++)this.insertLineHandle(f,d[f-a])},insertLineHandle:function(b,a){b+1<this.getNumberOfSavedStates()?this._savedLexStates.splice(b+1,0,a):this.replaceLineHandle(b,a)},replaceLineHandle:function(b,a){this._savedLexStates[b+1]={};this._tokenizer.copy_lex_state(this._savedLexStates[b+1],
a)},resetStartingTokenizerStateForLine:function(b){var a=this._tokenizer.make_lex_state();this.replaceLineHandle(b-1,a)},_rippleThroughLines:function(b,a,c){if(0<=a){for(var d=!1,e=-1,f=b.length,g,h=!1;!d;)g=this.createStateHandle(b,a),h=this._isLineUnchanged(a,g),h||(e=a,this.replaceLineHandle(a,g)),a>=c&&h&&(d=!0),a++,a===f&&(d=!0);-1===e&&(e=c);return e}},createStateHandle:function(b,a){var c=this.getLexStateForLine(a);return this._createStateHandle(b,a,c)},_createStateHandle:function(b,a,c){return this.tokenizeCode(b[a],
a,c)},tokenizeCode:function(b,a,c){var d=b.length+3,e=[],f=this._tokenizer.lex_line(e,d,c,b,b.length);this._notEnoughRoom(f)&&(f=this._tokenizer.lex_line(e,2*d,c,b,b.length));this._isLineExecutable[a]=f.isExecutable;this._parseTokens(e,b,a);this._tokensChanged=this._tokensOnLine[a]!==JSON.stringify(this._tokenMap[a]);this._tokensOnLine[a]=JSON.stringify(this._tokenMap[a]);return f.newState},_isLineUnchanged:function(b,a){return this.areStatesEqual(a,this.getLexStateForLine(b+1))&&!this._tokensChanged},
_notEnoughRoom:function(b){return-1===b.numTokens},getLexStateForLine:function(b){return this._savedLexStates[b]},getExecutableLineData:function(){return this._isLineExecutable},isLineContinuation:function(b){return this._tokenizer.is_contin(b)},areStatesEqual:function(b,a){if(b&&a)return this._tokenizer.are_states_equal(b,a)},getNumberOfSavedStates:function(){return this._savedLexStates.length},getTokenMap:function(){return this._tokenMap},getLastToken:function(b){var a=null;if((b=this._tokenMap[b])&&
0<b.length){var d=b.length-1,e;for(e=0;e<=d;e++){var f=b[e];c.isEndOfLineToken(f)||(a=f)}}return a},getFirstToken:function(b){var a=null;if((b=this._tokenMap[b])&&0<b.length)a=b[0],c.isEndOfLineToken(a)&&(a=null);return a},getTokenOnLineColumn:function(b,a){for(var c=this.getFirstToken(b);c&&!this.isTokenAtColumn(c,a);)c=this.getNextToken(c);return c},isTokenAtColumn:function(b,a){var c=this.getTokenColumn(b),d=this.getTokenLength(b);return c<=a&&a<=c+d-1},getTokenColumn:function(b){return b._column},
getTokenLength:function(b){return b._length},getNextToken:function(b){var a=null,d=b.getPositionInfo(),d=this._tokenMap[d.line];b=b.getIndex();d&&(d[b+1]&&!c.isEndOfLineToken(d[b+1]))&&(a=d[b+1]);return a},getPreviousToken:function(b,a){var c;if(null===b)return this._searchBackForToken(a-1);c=null;c=b.getPositionInfo();var d=this._tokenMap[c.line],e=b.getIndex();if(d&&d[e-1])return c=d[e-1];c=c.line-1;return this._searchBackForToken(c)},getNumberOfTokensOnLine:function(b){return!this._tokenMap[b]?
null:this._tokenMap[b].length},_searchBackForToken:function(b){for(var a=this.getLastToken(b);!a&&0<=b;)a=this.getLastToken(b-=1);return a},_parseTokens:function(b,a,c){var d,f=[],g,h,p=b.length,r=0;for(d=0;d<p;d+=1)g=this._extractTokenInfo(b[d]),h=a.substr(r,g.length),h=new e(d,g.type,c,r,g.length,h),f.push(h),r+=g.length;this._tokenMap[c]=f},_extractTokenInfo:function(b){var a={};a.type=b&this.AND_FOR_TYPE;a.length=b>>this.SHIFT_FOR_LENGTH;return a},destroy:function(){this._tokenMap={};this._tokenizer=
{};this._lexState={};this._savedLexStates=[];this._isLineExecutable=[]}})})},"MW/rtc/plugins/language/matlab/tokenizer/Tokenizer":function(){define([],function(){var h,f,g,e,d,c,b,a,k;function l(a,b){a+=oc[b&127];a=a+" ("+(b>>8);return a+=") "}var m=1,q=2,n=3,p=4,r=5,s=6,t=7,u=8,v=9,w=10,x=11,B=12,A=13,D=15,F=16,H=20,L=21,N=22,M=23,P=25,Q=28,O=30,I=31,E=32,K=33,Y=34,Z=35,S=40,V=41,ha=42,U=43,ea=44,W=45,aa=46,ba=47,$=50,ka=51,da=52,fa=53,qa=54,T=55,la=56,ua=57,X=58,va=60,xa=61,tb=62,Fa=63,Ia=64,Ea=
65,Wa=67,Ha=70,fb=71,gb=72,Da=73,Ua=74,za=75,Na=76,Lb=80,Ub=81,Vb=82,hb=83,vb=84,ub=85,Wb=86,wb=87,Xb=88,rb=89,Ta=90,qb=91,eb=92,Kb=93,Mb=94,ib=95,xb=96,Ja=100,yb=101,Sa=102,Ka=103,Xa=105,Va=106,sb=107,Oa=108,Nb=109,hc=110,Fb=111,Rc=112,zc=113,Ac=114,Ma=116,Gb=118,ic=119,jc=120,Tb=121,kc=122,Hb=123,Ib=124,lc=125,mc=126,Jb=127,ya=128,Bc=129,pc=130,wa=0,Pa=1,ra=2,Ya=3,na=4,qc=5,Zb=6,$b=7,rc=0,Cc=1,Aa=2,ac=3,jb=4,oc=[null,"FUNCTION","NESTED","IF","SWITCH","TRY","WHILE","FOR","END","ELSE","ELSEIF","BREAK",
"RETURN","PARFOR",null,"GLOBAL","PERSISTENT",null,null,null,"CATCH","CONTINUE","CASE","OTHERWISE",null,"CLASSDEF",null,null,"PROPERTIES",null,"METHODS","EVENTS","ENUMERATION","SPMD","PARSECTION","SECTION",null,null,null,null,"ID","EEND","INT","FLOAT","STRING","DUAL","BANG","QUEST",null,null,"SEMI","COMMA","LP","RP","LB","RB","LC","RC","FEEND",null,"TRANS","DOTTRANS","NOT","AT","DOLLAR","BACKQUOTE","DOUBLEQUOTE",null,null,null,"PLUS","MINUS","MUL","DIV","LDIV","EXP","COLON",null,null,null,"DOT","DOTMUL",
"DOTDIV","DOTLDIV","DOTEXP","AND","OR","ANDAND","OROR","LT","GT","LE","GE","EQ","NE","EQUALS","CNE","ARROW",null,null,"EOL","SEOL","CEOL","IEOL",null,"COMMENT","BLKSTART","BLKCOM","BLKEND","CPAD","PRAGMA","DOTDOTDOT","DOTDOT","DEEP_NEST","DEEP_STMT",null,"WHITE",null,"NEGERR","SEMERR","EOLERR","UNTERM","BADCHAR","DEEP_PAREN","FP_ERR","RES_ERR","DEEP_COM","BEGIN_TYPE","END_TYPE","STRING_LITERAL","UNTERM_STRING_LITERAL","LAST_TOKEN"];h=0;f=1;g=2;e=3;d=4;c=5;b=6;a=7;k=8;return function(){function nc(){return{cstate:rc,
lstate:wa,indent:0,infun:0,npars:0,ncoms:0,ldsv:0,atlp:0,contin:0,elist:0,haveends:0,begin:1,spare:0,stack:0,propParseState:-1}}function Yb(a,b){a.cstate=b.cstate;a.lstate=b.lstate;a.indent=b.indent;a.infun=b.infun;a.npars=b.npars;a.ncoms=b.ncoms;a.ldsv=b.ldsv;a.atlp=b.atlp;a.contin=b.contin;a.elist=b.elist;a.haveends=b.haveends;a.begin=b.begin;a.spare=b.spare;a.stack=b.stack;a.propParseState=b.propParseState}function Dc(a){a.lstate=wa;a.cstate=rc;a.atlp=a.contin=a.elist=a.haveends=0;a.indent=a.infun=
0;a.npars=a.ncoms=a.stack=0;a.begin=1;a.ldsv=0;a.spare=0}function J(a){if(a>=ca)return oa;a=sa.charCodeAt(a);return!(a&-128)?Sc[a]:C}function Ob(){for(;J(z)!==oa;++z);}function Za(){for(;J(z)!==oa;++z);if(z+1<ca){var a=sa[z],b=sa[z+1];("\n"===a&&"\r"===b||"\r"===a&&"\n"===b)&&++z}z<ca&&++z}function ia(a,b,c,d){3===arguments.length&&(d=0);if(a.length+d<c)return 0;for(;0<c;--c)if(a.charCodeAt(d+c-1)!==b.charCodeAt(c-1))return 0;return 1}function Ec(a,b,c,d){a=a.slice(b);switch(c){case 2:if(ia(a,"if",
2))return n;break;case 3:if(ia(a,"for",3))return t;if(ia(a,"end",3))return u;if(ia(a,"try",3))return r;break;case 4:if(ia(a,"case",4))return N;if(ia(a,"else",4))return v;if(ia(a,"spmd",4))return K;break;case 5:if(ia(a,"catch",5))return H;if(ia(a,"while",5))return s;if(ia(a,"break",5))return x;break;case 6:if(ia(a,"elseif",6))return w;if(ia(a,"switch",6))return p;if(ia(a,"global",6))return D;if(ia(a,"return",6))return B;if(d&&ia(a,"events",6))return I;if(ia(a,"parfor",6))return A;break;case 7:if(d&&
ia(a,"methods",7))return O;break;case 8:if(ia(a,"function",8))return m;if(ia(a,"continue",8))return L;if(ia(a,"classdef",8))return P;break;case 9:if(ia(a,"otherwise",9))return M;break;case 10:if(ia(a,"persistent",10))return F;if(d&&ia(a,"properties",10))return Q;break;case 11:if(d&&ia(a,"enumeration",11))return E}return S}function kb(a,b){var c=z===G?Ka:Ja;if(y.npars){if(y.stack&1)return a[b]=z-G<<8|yb,1;a[b+0]=0|jc;a[b+1]=z-G<<8|c;return 2}a[b]=z-G<<8|c;return 1}function Fc(){if(J(G+1)===sc){var a;
for(a=2;J(G+a)===ma;++a);if(J(G+a)===R)return hc}return Xa}function Gc(a,b){var c=0;G=z;z+=3;a[b+c++]=z-G<<8|Fb;G=z;Ob();G!=z&&(a[b+c++]=z-G<<8|Xa,G=z);Za();a[b+c++]=z-G<<8|Sa;return c}function oc(a,b){switch(J(z)){case ma:for(++z;J(z)===ma;++z);a[b]=z-G<<8|Ma;return 1;case Ga:return Ob(),a[b]=z-G<<8|Fc(),G=z,Za(),kb(a,b+1)+1;case ga:return J(z+1)===ga&&J(z+2)===ga?Gc(a,b):0;case oa:return Za(),kb(a,b);case $a:return++z,a[b]=z-G<<8|$,y.lstate=wa,1;case ab:return++z,a[b]=z-G<<8|ka,y.lstate=wa,1;default:return 0}}
function Hc(){if(z>=ca)return 0;switch(J(z)){case Pb:case Qb:return J(z+1)===ma?0:1;case Rb:return J(z+1)===ta?0:1;case ga:return J(z+1)===ja?1:0;case R:case ja:case bb:case Qa:case lb:case pa:case Ba:case Ra:case Sb:case tc:return 1;default:return 0}}function Ic(a){return a>>8}function uc(){for(;z<ca&&(J(z)===R||J(z)===ja||J(z)===bb);)++z;return y.lstate!==$b?Ec(sa+G,G,z-G,y.cstate===Aa||y.cstate===jb):S}function Tc(g,l){var m=J(z);if(y.propParseState===f){if(m!==R&&m!==Qa&&m!==pa&&m!==ma&&m!==ga)return y.propParseState=
k,0}else if(y.propParseState===d){if(m!==R&&m!==pa&&m!==ma&&m!==ga)return g[l+0]=0|ya,1}else if(y.propParseState===c){if(m!==R&&m!==pa&&m!==ma&&m!==ga)return g[l+0]=0|ya,1}else if(y.propParseState===b&&m!==pa&&m!==ma&&m!==ga)return g[l+0]=0|ya,1;switch(m){case Ga:return y.propParseState!==h&&y.propParseState!==k?(g[l+0]=0|ya,1):0;case ma:return y.propParseState===c&&(y.propParseState=b),0;case oa:return y.propParseState!==h&&y.propParseState!==k?(g[l+0]=0|ya,1):0;case R:if(y.propParseState===f){m=
uc();if(m===S)return g[l+0]=0|Jb,g[l+1]=z-G<<8|S,2;y.propParseState=k;g[l+0]=z-G<<8|m;return 1}if(y.propParseState===c){m=uc();if(m===S)return g[l+0]=z-G<<8|S,1;g[l+0]=0|ya;g[l+1]=z-G<<8|m;return 2}return y.propParseState===b?(uc(),g[l+0]=0|ya,2):0;case ga:if(y.propParseState===c){if(J(z+1)===R)return++z,g[l+0]=z-G<<8|Lb,1;if(J(z+1)===ga&&J(z+2)===ga)y.propParseState=b;else return g[l+0]=0|ya,1}return 0;case ta:switch(y.propParseState){case h:case k:case e:case a:return 0;default:return g[l+0]=0|
ya,1}case ab:switch(y.propParseState){case b:case d:case c:return g[l+0]=0|ya,1;default:return 0}case $a:switch(y.propParseState){case b:case d:case c:return g[l+0]=0|ya,1;default:return 0}case Qa:return y.propParseState===f?(g[l+0]=0|Jb,1):y.propParseState===b||y.propParseState===c?(g[l+0]=0|ya,1):0;case pa:if(y.propParseState===c)y.propParseState=b;else if(y.propParseState===f)return g[l+0]=0|Jb,1;return 0;case cb:return 0===y.npars&&y.propParseState!==h&&y.propParseState!==k?(g[l+0]=0|ya,1):1===
y.npars&&y.propParseState===e?(++z,g[l+0]=z-G<<8|fa,1):0;case db:if(0===y.npars){if(y.propParseState!==h&&y.propParseState!==k)return g[l+0]=0|ya,1}else if(1===y.npars&&y.propParseState===a)return++z,g[l+0]=z-G<<8|ua,g[l+1]=0|ya,2;return 0;default:return 0}}function Jc(a,b){var c;if(z>=ca)return bc&&!y.begin?(G=z=ca,kb(a,b)):0;G=z;if(y.begin&&(c=Uc(a,b)))return c;if(y.cstate===jb){if(c=Tc(a,b),0<c)return c}else if(y.lstate===Pa){a:{var d;c=oc(a,b);if(!c){for(d=c=0;z<ca;++z){switch(J(z)){case Ba:if(c)continue;
if(1===d)if(z+1>=ca||J(z+1)!==Ba)d=0;else{++z;continue}else d=1;continue;case Qa:case lb:case pa:d||++c;continue;case cb:case zb:case db:d||--c;continue;case ma:if(d||c)continue;break;case $a:if(d)continue;break;case oa:break;case Ga:if(d)continue;break;case ga:if(d)continue;if(J(z+1)===ga&&J(z+2)===ga)break;continue;case ab:if(d||c)continue;break;default:continue}break}if(d&&!c)a[b]=z-G<<8|Tb;else{if(y.ldsv===vc&&J(G)===R){for(c=G+1;c<z&&!(J(c)!==R&&J(c)!==ja&&J(c)!==bb);++c);if(c===z){a[b]=z-G<<
8|S;c=1;break a}}a[b]=z-G<<8|W}c=1}}return c}if(1===y.begin&&y.stack&1&&y.contin&&(y.lstate===Ya||y.lstate===ra)&&Hc()){if(z>G)return a[b+0]=z-G<<8|Ma,G=z,a[b+1]=z-G<<8|ka,2;a[b]=z-G<<8|ka;return 1}switch(J(z)){case Kc:return z=ca,a[b]=z-G<<8|Ma,1;case ma:for(++z;J(z)==ma;++z);if(y.stack&1&&(y.lstate==Ya||y.lstate==ra)&&Hc())return a[b+0]=z-G<<8|Ma,G=z,a[b+1]=z-G<<8|ka,2;a[b]=z-G<<8|Ma;return 1;case oa:return Za(),kb(a,b);case R:for(c=z+1;c<ca&&!(J(c)!=R&&J(c)!=ja&&J(c)!=bb);++c);z=c;c=y.lstate==
$b?S:Ec(sa,G,z-G,y.cstate===Aa||y.cstate===jb);if(c==S||c==u&&(y.npars||y.lstate==Zb))return c==u&&(c=y.npars?V:X),a[b]=z-G<<8|c,1;switch(c){case m:if(y.infun&&(y.haveends||!y.begin)||y.cstate==Aa||y.cstate==ac)c=q}if(y.npars)return a[b+0]=0|lc,a[b+1]=z-G<<8|c,2;a[b]=z-G<<8|c;return 1;case ja:for(++z;J(z)==ja;++z);if(J(z)==ga)switch(J(z+1)){case mb:case nb:case ob:case pb:case Ba:break;default:return++z,c=wc(),a[b]=z-G<<8|c,1}if(J(z)==R)return c=wc(),a[b]=z-G<<8|c,1;a[b]=z-G<<8|ha;return 1;case ga:if(J(z+
1)==ga&&J(z+2)==ga)return Gc(a,b);++z;switch(J(z)){case ja:return c=wc(),a[b]=z-G<<8|c,1;case mb:return++z,a[b]=z-G<<8|Ub,1;case nb:return++z,a[b]=z-G<<8|Vb,1;case ob:return++z,a[b]=z-G<<8|hb,1;case pb:return++z,a[b]=z-G<<8|vb,1;case Ba:return++z,a[b]=z-G<<8|xa,1;case ga:return++z,a[b]=z-G<<8|Rc,1;default:return a[b]=z-G<<8|Lb,1}case Ga:if(!sa[G]&&G>=ca-1)return ca=G,0;Ob();a[b]=z-G<<8|Fc();G=z;Za();return 1+kb(a,b+1);case Rb:++z;if(J(z)==ta)return++z,a[b]=z-G<<8|Mb,1;a[b]=z-G<<8|tb;return 1;case ta:++z;
if(J(z)==ta)return++z,a[b]=z-G<<8|Kb,1;a[b]=z-G<<8|ib;return 1;case cc:++z;if(J(z)==ta)return++z,a[b]=z-G<<8|qb,1;a[b]=z-G<<8|rb;return 1;case dc:++z;if(J(z)==ta)return++z,a[b]=z-G<<8|eb,1;a[b]=z-G<<8|Ta;return 1;case Ab:++z;if(J(z)==Ab)return++z,a[b]=z-G<<8|wb,1;a[b]=z-G<<8|ub;return 1;case Bb:++z;if(J(z)==Bb)return++z,a[b]=z-G<<8|Xb,1;a[b]=z-G<<8|Wb;return 1;case ab:return++z,a[b]=z-G<<8|ka,1;case $a:++z;if(y.npars&&!(y.stack&1))return a[b+0]=0|ic,a[b+1]=z-G<<8|$,2;a[b]=z-G<<8|$;return 1;case ec:return++z,
a[b]=z-G<<8|Na,1;case Qa:++z;if(y.npars==Cb)return a[b+0]=0|Hb,a[b+1]=z-G<<8|da,2;a[b]=z-G<<8|da;return 1;case pa:++z;if(y.npars==Cb)return a[b+0]=0|Hb,a[b+1]=z-G<<8|la,2;a[b]=z-G<<8|la;return 1;case lb:++z;if(y.npars==Cb)return a[b+0]=0|Hb,a[b+1]=z-G<<8|qa,2;a[b]=z-G<<8|qa;return 1;case cb:++z;if(0==y.npars)return a[b+0]=0|Gb,a[b+1]=z-G<<8|fa,2;a[b]=z-G<<8|fa;return 1;case zb:++z;if(0==y.npars)return a[b+0]=0|Gb,a[b+1]=z-G<<8|T,2;a[b]=z-G<<8|T;return 1;case db:++z;if(0==y.npars)return a[b+0]=0|Gb,
a[b+1]=z-G<<8|ua,2;a[b]=z-G<<8|ua;return 1;case tc:return++z,a[b]=z-G<<8|ba,1;case sc:return++z,a[b]=z-G<<8|Wa,1;case Lc:return++z,a[b]=z-G<<8|Ia,1;case Mc:return++z,a[b]=z-G<<8|Ea,1;case Sb:return++z,a[b]=z-G<<8|Fa,1;case Pb:return++z,a[b]=z-G<<8|Ha,1;case Qb:return++z,a[b]=z-G<<8|fb,1;case mb:return++z,a[b]=z-G<<8|gb,1;case nb:return++z,a[b]=z-G<<8|Da,1;case ob:return++z,a[b]=z-G<<8|Ua,1;case pb:return++z,a[b]=z-G<<8|za,1;case Ba:if(0<z&&y.lstate!=na&&y.lstate!=Zb)switch(J(z-1)){case cb:if(y.atlp)break;
case R:case ja:case bb:case ga:case db:case zb:case Ba:case Ra:return++z,a[b]=z-G<<8|va,1}for(++z;J(z)!=oa;++z)if(J(z)==Ba)if(J(z+1)==Ba)++z;else return++z,a[b]=z-G<<8|ea,1;a[b]=z-G<<8|Tb;return 1;case Ra:for(++z;J(z)!=oa;++z)if(J(z)==Ra)if(J(z+1)==Ra)++z;else return++z,a[b]=z-G<<8|Bc,1;a[b]=z-G<<8|pc;return 1;case xc:if(y.lstate!=wa&&J(z+1)==ta)return z+=2,a[b]=z-G<<8|xb,1;Ob();a[b+0]=z-G<<8|aa;G=z;Za();return 1+kb(a,b+1);case bb:case C:for(++z;;){switch(J(z)){case bb:case C:++z;continue}break}a[b]=
z-G<<8|kc;return 1;default:return++z,a[b]=z-G<<8|kc,1}}function wc(){for(;z<ca&&J(z)==ja;++z);if(z<ca&&J(z)==R)switch(sa.charAt(z)){case "d":case "D":case "e":case "E":++z;if(z>=ca)return Ib;if(J(z)==Pb||J(z)==Qb)if(++z,z>=ca)return Ib;if(J(z)!=ja)return Ib;for(;z<ca&&J(z)==ja;)++z}z<ca&&(J(z)==R&&("i"==sa.charAt(z)||"j"==sa.charAt(z)))&&++z;return U}function Vc(a,b){var c,d=0,e=0,f=0,d=!1;if(J(z)!=ma)return ra;for(c=z;J(c)==ma;++c);if(c>=ca)return ra;if(Nc&&b&&(ia(sa,"load",4,a)||ia(sa,"save",4,
a)))d=!0;switch(J(c)){case ga:if(J(c+1)==ga&&J(c+2)==ga)return ra;switch(J(c+1)){case ja:return Pa;case ma:break;case pb:case mb:case nb:case ob:case Ba:case Qa:return La(c+2);case R:break;default:return Pa}break;case ta:if(J(c+1)==ta)return La(c+2);case Qa:case cb:return ra;case oa:case $a:case ab:case Ga:case Ra:return ra;case pa:break;case Ab:return J(c+1)==Ab?La(c+2):La(c+1);case Bb:return J(c+1)==Bb?La(c+2):La(c+1);case Rb:return J(c+1)==ta?La(c+2):Pa;case cc:case dc:case xc:return J(c+1)==ta?
La(c+2):La(c+1);case ec:case Pb:case Qb:case mb:case nb:case ob:case pb:case Sb:return La(c+1);case lb:if(d||y.ldsv==fc)return na;default:return Pa}for(f=e=d=0;c<ca;++c){switch(J(c)){case ta:if(!e&&!f&&J(c+1)!=ta)return d?Pa:ra;continue;case ab:if(!e&&!f&&!d)break;continue;case ga:if(J(c+1)==ga&&J(c+2)==ga)break;continue;case $a:if(!e||!f||!d)break;continue;case Ga:if(!e&&!f)break;continue;case oa:break;case Ba:e^=1;continue;case Ra:f^=1;continue;case Qa:case pa:case lb:!e&&!f&&++d;continue;case cb:case db:case zb:!e&&
!f&&--d;continue;default:continue}break}return Pa}function La(a){if(J(a)==ma){for(;J(a)==ma;)++a;switch(J(a)){case ga:if(J(a+1)==ga&&J(a+2)==ga||J(a+1)==ja)return ra;break;case ab:case $a:case oa:case cb:case db:case zb:case Ga:case Ab:case Bb:case cc:case dc:case ta:case ec:case mb:case nb:case ob:case Sb:case pb:break;default:return ra}}return Pa}function Ic(a){return a>>8}function Oc(a){for(;a<ca;++a){if(J(a)===oa)return z=J(a+1)===oa&&"\r"===sa.charAt(a)?a+1:a,1;if(J(a)!==ma)return 0}z=ca;return 1}
function Uc(a,b){var c=z;G=z;if(z>=ca)return 0;for(;J(c)==ma;)++c;if(0!==y.ncoms){var d=sb;if(J(c)===Ga&&(J(c+1)===pa||J(c+1)===db)&&Oc(c+2))d=J(c+1)===pa?y.ncoms>=Pc?mc:Va:Oa;Za();a[b]=z-G<<8|d;return 1}if(J(c)===oa)return 0;if(J(c)===Ga){if(J(c+1)===Ga&&(J(c+2)===oa||J(c+2)===ma))return Ob(),a[b]=z-G<<8|Nb,1;if(J(c+1)===pa&&Oc(c+2))return Za(),a[b]=z-G<<8|Va,1}return 0}function yc(l,C){y.lstate===wa&&Ca===gc&&(Ca=Qc);a:{var G,ba=C>>8;y.begin=0;if(y.cstate===jb)switch(C&255){case Ja:case Ka:y.propParseState===
k&&(y.propParseState=h);break;case Jb:y.propParseState=g;break;case ya:y.propParseState=k;break;case S:if(y.propParseState===h)y.propParseState=f;else if(y.propParseState===d||y.propParseState===g)y.propParseState=c;break;case ka:y.propParseState===k&&0===y.npars&&(y.propParseState=h);break;case $:if(y.propParseState===k&&(0===y.npars||!(y.stack&1)))y.propParseState=h;break;case fa:1===y.npars&&y.propParseState===e&&(y.propParseState=d);break;case da:y.propParseState===g&&(y.propParseState=e);break;
case la:if(y.propParseState===b||y.propParseState===d||y.propParseState===g)y.propParseState=a}switch(C&255){case Xa:case Fb:break;case Va:case sb:case Oa:y.begin=1;break;case Ja:case Ka:y.begin=1;y.contin=0;break;case yb:case Sa:y.contin=1;y.begin=1;break;case da:y.lstate==qc&&(y.atlp=1);case S:case V:case X:y.lstate==qc&&(y.lstate=na);default:y.contin=0}if(y.cstate==rc)switch(C&255){case Ma:case Xa:case Va:case sb:case Oa:case Fb:case Ja:case Ka:case Sa:break;case P:y.cstate=Aa;break;default:y.cstate=
Cc}switch(C&255){case S:case V:case X:switch(y.lstate){case wa:G=z-(C>>8);var ca;b:{ca=C>>8;var ma=sa.slice(G),oa="pi eps nan NaN inf Inf i j ans".split(" "),ta=[2,3,3,3,3,3,1,1,3],pa;if(0===ma.length)ca=1;else{for(pa=0;pa<oa.length;++pa)if(ca==ta[pa]&&ia(ma,oa[pa],ca)){ca=1;break b}ca=0}}if(ca){y.lstate=ra;break}y.lstate=Vc(G,4===C>>8);if(Nc&&4===C>>8&&y.lstate!==ra&&(ia(l,"load",4,ba)||ia(l,"save",4,ba)))y.ldsv=fc;break;case $b:case na:case Zb:y.lstate=ra}break;case r:++y.indent;case v:case M:case H:case B:case x:case L:y.npars=
0;y.stack=0;y.lstate=wa;break;case m:y.npars=0;y.stack=0;y.indent=1;y.cstate===Aa&&(y.cstate=ac,y.indent=3);y.infun=y.indent;y.lstate=na;break;case q:y.npars=0;y.stack=0;y.indent<Wc&&(y.infun=++y.indent);y.cstate===Aa&&(y.cstate=ac,y.indent=3);y.haveends=1;y.lstate=na;break;case u:y.npars=0;y.stack=0;0<y.indent&&--y.indent;if(y.cstate===ac&&2===y.indent||y.cstate===jb){y.cstate=Aa;y.lstate=na;break}y.cstate===Aa&&0===y.indent&&(y.cstate=Cc,y.infun=0);y.indent<y.infun&&(y.haveends=1,--y.infun);y.lstate=
wa;break;case Q:y.cstate=jb,y.propParseState=h;case O:case I:case E:y.npars=0;y.stack=0;++y.indent;y.lstate=na;break;case n:case s:case t:case A:case K:case Y:case Z:case p:++y.indent;case w:case N:y.npars=0;y.stack=0;y.lstate=na;break;case D:case F:y.npars=0;y.stack=0;y.elist=1;y.lstate=na;break;case Va:y.ncoms<Pc&&++y.ncoms;break;case Oa:0<y.ncoms&&--y.ncoms;break;case ka:y.npars?y.lstate=na:(y.ldsv=0,y.stack=0,y.lstate=y.cstate===Aa?na:wa);y.elist=0;break;case $:y.npars?y.stack&1?y.lstate=na:(y.elist=
0,y.npars=0,y.stack=0,y.ldsv=0,y.lstate=y.cstate===Aa?na:wa):(y.ldsv=0,y.stack=0,y.lstate=y.cstate===Aa?na:wa);break;case T:0<y.npars&&(y.npars--,y.stack>>=1);y.ldsv===fc&&0===y.npars?(y.lstate=Pa,y.ldsv=vc):y.lstate=Ya;break;case ua:0<y.npars&&(y.npars--,y.stack>>=1);y.lstate=ra;break;case fa:0<y.npars&&(y.npars--,y.stack>>=1);y.lstate=ra;y.atlp&&(y.lstate=na,y.atlp=0);break;case da:y.npars<Cb&&(y.npars++,y.stack<<=1);y.lstate=na;break;case qa:y.npars<Cb&&(y.npars++,y.stack<<=1,y.stack|=1);y.lstate=
na;break;case la:y.npars<Cb&&(y.npars++,y.stack<<=1,y.lstate!==ra&&(y.stack|=1));y.lstate=na;break;case Xa:case Ma:case hc:case Nb:case Fb:switch(y.lstate){case ra:case Ya:if(y.npars||y.elist||y.cstate==Aa)break a;switch(J(z)){case R:case ja:case Ba:case Ra:case lb:case Rb:y.lstate=wa;break;case ga:J(z+1)===ja&&(y.lstate=wa)}}break;case Fa:switch(y.lstate){case ra:case Ya:y.elist=1;break;default:y.lstate=qc}break;case Ha:case fb:case gb:case Da:case Ua:case za:case Na:case ub:case wb:case Wb:case Xb:case tb:case rb:case qb:case Ta:case eb:case Kb:case Mb:case xb:case Ub:case Vb:case hb:case vb:y.lstate=
na;break;case ib:y.lstate=Zb;y.elist=0;break;case xa:case U:case ha:case ea:case Bc:case va:y.lstate=Ya;break;case Lb:y.lstate=$b;break;case yb:y.elist=0;y.lstate=na;break;case Ja:case Ka:y.elist=0;y.npars=0;y.stack=0;y.ldsv=0;y.lstate=y.cstate===Aa?na:wa;break;case Sa:y.contin=1;break;case aa:y.lstate=wa;break;case ic:case jc:y.stack=0;y.npars=0;y.elist=0;y.lstate=wa;break;case Gb:y.stack=0;y.npars=0;y.elist=0;y.lstate=Ya;break;case Hb:case mc:case zc:case Ac:y.stack=0;y.npars=0;y.elist=0;y.lstate=
na;break;case lc:case Ib:case Tb:case pc:case kc:case Wa:case Ia:case Ea:y.lstate=Ya;break;case P:y.cstate=Aa;y.lstate=na;y.indent=1;y.haveends=1;break;case W:y.ldsv===fc&&"-"!==l[ba+0]&&(y.ldsv=vc)}}switch(C&255){case Xa:case Va:case sb:case Oa:case Ma:case Fb:case Nb:case hc:case Ja:case yb:case Ka:case Sa:break;case m:case q:case P:case Tb:case pc:case Hb:case mc:case zc:case Ac:case Ib:case lc:case ic:case jc:case Gb:case Wa:case Ia:case Ea:Ca=Xc;break;default:Ca===Qc&&(Ca=Db)}}var z=0,ca=0,G=
0,sa=null,Eb=null,Ca=0,bc=0,Nc=0,y=nc(),fc=1,vc=2,gc=0,Qc=1,Db=2,Xc=3,Cb=32,Wc=7,Pc=7,C=0,R=1,ja=2,bb=3,Qa=4,cb=5,pa=6,db=7,lb=8,zb=9,Sb=10,Pb=11,Qb=12,mb=13,nb=14,ob=15,pb=16,ec=17,ga=18,Ab=19,Bb=20,cc=21,dc=22,Rb=23,Ba=24,$a=25,ab=26,oa=27,ta=28,Ga=29,sc=30,ma=31,xc=32,tc=33,Lc=34,Mc=35,Ra=36,Kc=37,Sc=[Ga,C,C,C,C,C,C,C,C,ma,oa,oa,oa,oa,C,C,C,C,C,C,C,C,C,C,C,C,Kc,C,C,C,C,C,ma,xc,Ra,sc,Lc,Ga,Ab,Ba,Qa,cb,mb,Pb,ab,Qb,ga,nb,ja,ja,ja,ja,ja,ja,ja,ja,ja,ja,ec,$a,cc,ta,dc,tc,Sb,R,R,R,R,R,R,R,R,R,R,R,R,R,
R,R,R,R,R,R,R,R,R,R,R,R,R,lb,ob,zb,pb,bb,Mc,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,pa,Bb,db,Rb,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C];return{lex_line:function(a,b,c,d,e){Ca=gc;Yb(y,c);sa=d;z=0;ca=e;G=0;bc=!0;d=0;var f,g;Eb=sa;if(0===e){f=kb(a,0);for(e=0;e<f;++e)yc(Eb,
a[e]);return{numTokens:f,newState:y,isExecutable:Ca===Db}}if(g=y.cstate===jb&&y.propParseState!==h&&y.propParseState!==k)if(3<b)a[0]=0|Jb,d=1;else return{numTokens:-1,newState:c,isExecutable:Ca===Db};for(;d<b-3;){f=Jc(a,d);if(!f)break;for(e=0;e<f;++e,++d)if(yc(Eb,a[d]),(a[d]&255)===X){var l=a,m=d+e,n=Ic(a[d+e]);l[m]=n<<8|V}}if(d>=b-3&&!y.begin)return{numTokens:-1,newState:c,isExecutable:Ca===Db};g&&(1<d&&(a[1]&255)===Ma)&&(b=a[0],a[0]=a[1],a[1]=b);return{numTokens:d,newState:y,isExecutable:Ca===Db}},
lex_file:function(a,b,c,d,e){Ca=gc;Yb(y,c);sa=d;z=0;ca=e;bc=!1;G=0;Eb=sa;for(c=0;c<b-3;c+=e){e=Jc(a,c);if(!e)break;for(d=0;d<e;++d)yc(Eb,a[c+d]),(a[c+d]&127)===X&&(a[c+d]=a[c+d]>>8<<8|V)}return{isExecutable:Ca===Db,newState:y}},make_lex_state:nc,copy_lex_state:Yb,dump_token:l,set_state:function(a){Yb(y,a)},initialize:function(a,b,c){y=nc();Dc(y);Eb=sa=a;z=0;ca=b;bc=c;Ca=gc},initialize_state:Dc,in_block_comment:function(a){a||(a=y);return 0<a.ncoms},are_states_equal:function(a,b){return a.lstate!==
b.lstate||a.cstate!==b.cstate||a.indent!==b.indent||a.contin!==b.contin||a.atlp!==b.atlp||a.begin!==b.begin||a.infun!==b.infun||a.ldsv!==b.ldsv||a.ncoms!==b.ncoms||a.elist!==b.elist||a.npars!==b.npars||a.stack!==b.stack||a.haveends!==b.haveends?0:1},is_contin:function(a){return a.contin}}}()})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPlugin":function(){define("dojo/_base/declare dojo/aspect dojo/_base/lang MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/plugins/language/matlab/tokenizer/TokenState MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b){this._internalDocument=a;this._document=b;this._tokenState=new c;this._tokensData={tokens:{},executableLines:[],lastEventStartLine:0};this._aspectHandles=[];this._aspectHandles.push(f.after(this._internalDocument,"onDocumentReset",g.hitch(this,"_initializeLines")));this._aspectHandles.push(f.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_handleDocumentChanged"),!0))},_initializeLines:function(){var a=this._internalDocument.getMaxLineNumber()-
1,b=this._document.getCodeText();this._tokenState.initializeLines(b);this._emitEvent(0,a,a,!1)},_emitEvent:function(a,b,c,d){var e=this._tokenState.getTokenMap(),f=this._tokenState.getExecutableLineData();this._tokensData={tokens:e,executableLines:f,startLine:a,endLine:b,eventEndLine:c,isUndoRedo:d};this.onUpdate(this._tokensData)},requestUpdate:function(a,b){var c=this._internalDocument.getMaxLineNumber()-1;a=a||0;a<=c&&this._updateTokens(a,b||c)},_handleDocumentChanged:function(a){var b=this._findDeletionEvent(a);
if(b)this.onDelete(b.startLine,b.endLine);b=d.lineRangeFromEvents(a);this._updateTokens(b.startLine,b.endLine,a[0].isUndoRedo)},_findDeletionEvent:function(a){var b=null;a.some(function(a){if(a.type===e.DELETION_EVENT)return b=a,!0},this);return b},onDelete:function(a,b){},_updateTokens:function(a,b,c){var d=this.retokenizeFromLine(this._document.getCodeText(),a,b);this._emitEvent(a,d,b,c)},retokenizeFromLine:function(a,b,c){return this._tokenState.retokenize(a,b,c)},onUpdate:function(a){},getTokensData:function(){return this._tokensData},
getTokensOnLine:function(a){return this._tokensData.tokens[a]},resetTokenStateForLine:function(a){this._tokenState.resetStartingTokenizerStateForLine(a)},getFirstTokenOnLine:function(a){return this._tokenState.getFirstToken(a)},getTokenOnLineColumn:function(a,b){return this._tokenState.getTokenOnLineColumn(a,b)},getNextTokenOf:function(a){return this._tokenState.getNextToken(a)},getPreviousTokenOf:function(a,b){return this._tokenState.getPreviousToken(a,b)},getNumberOfTokensOnLine:function(a){return this._tokenState.getNumberOfTokensOnLine(a)},
getLexStateForLine:function(a){return this._tokenState.getLexStateForLine(a)},isLineContinuation:function(a){return this._tokenState.isLineContinuation(a)},isInComment:function(a,c){var d=this.getTokenOnLineColumn(a,c);return!!d&&b.isCommentToken(d)},isUnmatchedStartToken:function(a){var c=!1,d=[],e=!0;this._getAllBlockTokens().forEach(function(f){if(a!==f)if(b.isTokenStartOfBlock(f))d.push(f);else if(0<d.length)d.pop();else{if(c)return e=!1}else c=!0});return e},_getAllBlockTokens:function(){var a=
this.getTokensData().tokens,c=[],d;for(d in a)for(var e=a[d],f=0;f<e.length;f++){var g=e[f];(b.isTokenStartOfBlock(g)||b.isTokenEndOfBlock(g))&&c.push(g)}return c},findStartOfBlockOnLine:function(a){var c=0;a=this.getTokensData().tokens[a];for(var d=a.length-1;0<=d;d--){var e=a[d];if(b.isTokenStartOfBlock(e)){if(0===c)return e;c-=1}else b.isTokenEndOfBlock(e)&&(c+=1)}return null},isInBlockComment:function(a,c){var d=this.getTokenOnLineColumn(a,c);return!!d&&b.isBlockCommentToken(d)},isInString:function(a,
c){var d=this.getTokenOnLineColumn(a,c);return!!d&&b.isMatlabStringToken(d)},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._tokenState.destroy()}})})},"MW/rtc/plugins/resizer/ResizerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/resizer/Resizer"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/resizer/Resizer":function(){define("dijit/popup dijit/TooltipDialog dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/on dojo/touch mw-log/Log".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return g(null,{_MINIMUM_SIZE:18,constructor:function(a){this._view=a;this._handlers=[]},activate:function(b,d){this._resizer||(l.assert(b,"Missing initial rectangle!"),this._callbacks=d,this._resizer=this._makeResizer(b),c.place(this._resizer,this._view.getDomtarget()),this._tooltip=new f,this._handlers.push(a(this._resizer,"click",function(a){a.preventDefault();a.stopPropagation()})))},deactivate:function(){this._resizer&&(c.destroy(this._resizer),this._resizer=null,
this._handlers.forEach(function(a){a.remove()}),this._handlers=[],this._callbacks.closed&&this._callbacks.closed())},moveTo:function(a,c){null!==a&&b.set(this._resizer,"top",a+"px");null!==c&&b.set(this._resizer,"left",c+"px")},resize:function(a,c){null!==a&&b.set(this._resizer,"width",a+"px");null!==c&&b.set(this._resizer,"height",c+"px")},_trackResize:function(a,b){this._tooltip.set("content",a+" x "+b+"px");return this._callbacks.drag?this._callbacks.drag(a,b):!1},_pointerMove:function(a){if(this._resizer){var c=
a.clientX-this._lastClickState.startX,d=a.clientY-this._lastClickState.startY,e=this._lastClickState.currentWidth,f=this._lastClickState.currentHeight,g=e/f,h=this._lastClickState.dir,c=c*h[0],d=d*h[1],k;h[0]&&h[1]&&!a.altKey?c>d*g?(k=e+c,c=(e+c)/g):(c=f+d,k=(f+d)*g):(k=e+c,c=f+d);k>this._MINIMUM_SIZE&&c>this._MINIMUM_SIZE&&(b.set(this._resizer,"width",k+"px"),b.set(this._resizer,"height",c+"px"));this._tracking||(this._tracking=!0,this._callbacks.startDrag());this._trackResize(this._resizer.clientWidth,
this._resizer.clientHeight)||(0>h[0]&&b.set(this._resizer,"left",this._lastClickState.currentLeft+e-k+"px"),0>h[1]&&b.set(this._resizer,"top",this._lastClickState.currentTop+f-c+"px"));a.preventDefault();a.stopPropagation()}},_pointerUp:function(a){a.preventDefault();a.stopPropagation();this._moveHandle.remove();this._upHandle.remove();h.close(this._tooltip);this._tracking&&(this._resizer&&this._callbacks.endDrag&&this._callbacks.endDrag(this._resizer.clientWidth,this._resizer.clientHeight),this._tracking=
!1)},_pointerDown:function(b,c){c.preventDefault();c.stopPropagation();this._lastClickState={startX:c.clientX,startY:c.clientY,currentWidth:this._resizer.clientWidth,currentHeight:this._resizer.clientHeight,currentTop:this._resizer.offsetTop,currentLeft:this._resizer.offsetLeft,dir:b};this._moveHandle=a(window,k.move,e.hitch(this,"_pointerMove"));this._upHandle=a(window,k.release,e.hitch(this,"_pointerUp"));this._tooltip.set("content",this._resizer.clientWidth+" x "+this._resizer.clientHeight+"px");
h.open({popup:this._tooltip,around:c.target})},_makeResizer:function(b){var d,f,g={"class":"gripperFrame"};g.style="width: "+b.width+"px; height: "+b.height+"px; top: "+b.top+"px; left: "+b.left+"px;";d=c.create("div",g);var h={"top-right":[1,-1],"middle-right":[1,0],"bottom-right":[1,1],"top-center":[0,-1],"bottom-center":[0,1],"top-left":[-1,-1],"middle-left":[-1,0],"bottom-left":[-1,1]};Object.keys(h).forEach(function(b){f=c.create("div",{"class":"gripper "+b});c.place(f,d);this._handlers.push(a(f,
k.press,e.hitch(this,"_pointerDown",h[b])))},this);return d}})})},"MW/rtc/plugins/richtext/RichTextNodeInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextNodeInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/richtext/RichTextNodeInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionRules",
"MW/rtc/plugins/richtext/nodes/inner/RichTextContainerNode","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode","MW/rtc/plugins/richtext/nodes/leaf/RichTextNode"],function(h,f,g,e,d){return h([f],{_compatibleParents:[g],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return d},getTopLevelInsertionInstruction:function(c,b,a,d,f){return{insertInRoot:{insertionPosition:f,containerConstructor:e}}}})})},"MW/rtc/plugins/richtext/RichTextParagraphInsertionRulesProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RichTextParagraphInsertionRules"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/richtext/RichTextParagraphInsertionRules":function(){define(["dojo/_base/declare","MW/rtc/plugins/insertionrules/BaseInsertionRules","MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode"],function(h,f,g){return h([f],{_compatibleParents:[],constructor:function(){},
destroy:function(){},getApplicableNodeClass:function(){return g},getTopLevelInsertionInstruction:function(e,d,c,b,a){return{insertInRoot:{insertionPosition:a}}}})})},"MW/rtc/plugins/richtext/view/HeadingLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HeadingLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/richtext/view/HeadingLayouter":function(){define(["dojo/_base/declare",
"dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../nodes/inner/HeadingNode"],function(h,f,g,e){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){var b={"class":"heading-"+c.level};c.align&&(b.style="text-align: "+c.align+";");return d.layoutInto(c,"h"+c.level,b)}})})},"MW/rtc/plugins/richtext/view/RichTextLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextLayouter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view.decoration.viewmodel"]}},createInstance:function(e){return new g(e)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/richtext/view/RichTextLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouter","../nodes/leaf/RichTextNode"],function(h,f,g){return h(f,{constructor:function(e){this._decorationViewModel=e},getApplicableNodeClass:function(){return g},
_getStyle:function(e){var d="";e.color&&(d=e.color.hasOwnProperty("r")&&e.color.hasOwnProperty("g")&&e.color.hasOwnProperty("b")?d+("color: rgb("+e.color.r+","+e.color.g+","+e.color.b+");"):d+("color: "+e.color+";"));e.bold&&(d+="font-weight: bold;");e.italic&&(d+="font-style: italic;");e.underline&&(d+="text-decoration: underline;");e.monospace&&(d+='font-family: Menlo, Monaco, Consolas, "Courier New", monospace;');e.size&&(d+="font-size: "+e.size+";");e.font&&(d+="font-family: "+e.font+";");return d}})})},
"MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouter":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/nodes/leaf/PlainTextNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","MW/rtc/view/decoration/DecorationUtilities"],function(h,f,g,e,d){return h(e,{_TEXT_OUTER_CSS:"textBox",_TEXT_INNER_CSS:"textWrapper",constructor:function(c){this._decorationViewModel=c},getApplicableNodeClass:function(){return g},layout:function(c,b){var a=c.layoutInto(b,"span",
{"class":this._TEXT_OUTER_CSS});a.hasChildNodes()||this._render(c,b,a);return a},refresh:function(c,b,a,d){this._render(c,b,d);return d},_render:function(c,b,a){var e=b.getText(),g=this._decorationViewModel.getDecoration(b),h=f.create("span",this._getAttributes(b)),e=d.createViewForTextNode(e,g,h);a.appendChild(e);g.forEach(function(d){d.domNodes.forEach(function(d,e){b===d.rtcPosition.getNode()&&c.insertDomNode(e,d.rtcPosition,d.domPlacement,a)})})},_getAttributes:function(c){var b={},a=this._getClass(c);
a&&(b["class"]=a);(c=this._getStyle(c))&&(b.style=c);return b},_getClass:function(c){var b=this._TEXT_INNER_CSS;c.cssClass&&(b+=" "+c.cssClass);return b},_getStyle:function(c){return""}})})},"MW/rtc/plugins/richtext/view/RichTextParagraphLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextParagraphLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},
"MW/rtc/plugins/richtext/view/RichTextParagraphLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../nodes/inner/RichTextParagraphNode"],function(h,f,g,e){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return e},layout:function(d,c){var b={"class":"paragraphNode"};c.align&&(b.style="text-align: "+c.align+";");return d.layoutInto(c,"div",b)}})})},"MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNodeContentConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RichTextParagraphNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HeadingNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/richtext/nodes/inner/HeadingNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./HeadingNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/nodes/leaf/RichTextNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","./RichTextNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/sectionbreak/SectionBreakInsertionRulesProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SectionBreakInsertionRules"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/sectionbreak/SectionBreakInsertionRules":function(){define("dojo/_base/declare MW/rtc/model/Position MW/rtc/nodes/inner/LineNode MW/rtc/plugins/insertionrules/BaseInsertionRules MW/rtc/plugins/insertionrules/InsertionRuleConstants MW/rtc/plugins/insertionrules/receivinginstructions/ContinueUpInstruction MW/rtc/plugins/sectionbreak/model/SectionBreakNode".split(" "),
function(h,f,g,e,d,c,b){return h([e],{_compatibleParents:[],constructor:function(){},destroy:function(){},getApplicableNodeClass:function(){return b},getReceivingInstruction:function(a){return new c},getTopLevelInsertionInstruction:function(a,c,e,f,h){if(a.isAtRightEdge()&&a.isAtLeftEdge())return this._getInstructionForInsertingIntoEmptyLine(c,e);a=a.isAtEdge()||a.node.isUnique?g:a.getNode().constructor;return h.isAtRightEdge()&&(!e||e.isInstanceOf(b))?{insertInRoot:{relationToPosition:d.RELATION.AFTER,
insertSibling:!0,siblingConstructor:a}}:h.isAtLeftEdge()&&(!c||c.isInstanceOf(b))?{insertInRoot:{relationToPosition:d.RELATION.BEFORE,insertSibling:!0,siblingConstructor:a}}:{insertInRoot:{insertionPosition:h}}},_getInstructionForInsertingIntoEmptyLine:function(a,c){return a&&!a.isInstanceOf(b)?{insertInRoot:{relationToPosition:d.RELATION.BEFORE}}:c&&!c.isInstanceOf(b)?{insertInRoot:{relationToPosition:d.RELATION.AFTER}}:{insertInRoot:{relationToPosition:d.RELATION.AFTER,insertSibling:!0,siblingConstructor:g}}}})})},
"MW/rtc/plugins/undoredo/UndoRedoControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/undoredo/UndoRedoController"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.undoredo.editblock","rtc.cursor","rtc.cursorcontroller"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)}})})},"MW/rtc/plugins/undoredo/UndoRedoController":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/undoredo/EditBlockConstants MW/rtc/RichTextComponentFeatureEnum".split(" "),
function(h,f,g,e,d,c){return h(e,{constructor:function(b,a,c,d){this._undoStack=[];this._redoStack=[];this._transientBlock=null;this._internalDocument=b;this._cursor=c;this._cursorController=d;this.own(g.after(a,"onEndBlock",f.hitch(this,"_insert"),!0));this.own(g.after(b,"onDocumentReset",f.hitch(this,"clear"),!0))},_update:function(){this.onUndoRedoStackUpdated({isUndoable:this.canUndo(),isRedoable:this.canRedo()})},onUndoRedoStackUpdated:function(b){},clear:function(){this._undoStack=[];this._redoStack=
[];this._transientBlock=null;this._update()},canUndo:function(){return 0<this._undoStack.length&&!this._internalDocument.isReadOnly()},canRedo:function(){return 0<this._redoStack.length&&!this._internalDocument.isReadOnly()},undo:function(){if(this.canUndo()){var b=this._suspendCursor();this._transientBlock&&(this._transientBlock.unexecute(),this._transientBlock=null);var a=this._undoStack.pop();a.unexecute();var c=a.getUndoEvents();c.length&&this._internalDocument.emitDocumentEvents(c);this._resumeCursor(b);
this._redoStack.push(a);this._update()}},redo:function(){if(this.canRedo()){var b=this._suspendCursor();this._transientBlock&&(this._transientBlock.unexecute(),this._transientBlock=null);var a=this._redoStack.pop();a.execute();var c=a.getRedoEvents();c.length&&this._internalDocument.emitDocumentEvents(c);this._resumeCursor(b);this._undoStack.push(a);this._update()}},_insert:function(b){if(!(0===this._undoStack.length&&0===this._redoStack.length&&b.getType()===d.AUTO))if(0<this._redoStack.length&&
b.getType()===d.AUTO)this._transientBlock?b.mergeWith(this._transientBlock):this._transientBlock=b;else{var a=this._undoStack[this._undoStack.length-1];a&&this._transientBlock&&this._transientBlock.mergeWith(a);this._transientBlock=null;a&&b.canMergeWith(a)?b.mergeWith(a):(this._undoStack.push(b),this._redoStack=[],this._update());this._mergeAndAdvance(b.getBlockTypesForMergeAndAdvance())}},_mergeAndAdvance:function(b){for(;0<b.length;){var a=this._undoStack[this._undoStack.length-1],c=this._undoStack[this._undoStack.length-
2];if(!a||!c)break;a.mergeWith(c);this._undoStack.pop();if(0>b.indexOf(c.getType()))break}},_suspendCursor:function(){this._cursorController.suspendUpdates();return!this._cursor.isSelectionHidden()?(this._cursor.hideSelection(),!0):!1},_resumeCursor:function(b){b&&this._cursor.showSelection();this._cursorController.activateUpdates(!0);this._cursorController.onUpdate(!0,!0)}})})},"MW/rtc/plugins/undoredo/EditBlockControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/undoredo/EditBlockController"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/undoredo/EditBlockController":function(){define(["dojo/_base/declare","dojo/aspect","MW/rtc/plugins/undoredo/EditBlock","MW/rtc/plugins/undoredo/EditBlockConstants"],function(h,f,g,e){return h(null,{constructor:function(){this._block=null},startEdit:function(d){this._block?this._block.incrementReferenceCount():(this._block=
new g(d),this.onStartBlock(this._block));return this._block},endEdit:function(){this._block.decrementReferenceCount()&&(this._block.hasCommands()&&(this.onBeforeEndBlock(this._block),this.onEndBlock(this._block)),this._block=null)},getActiveBlock:function(){return this._block},onStartBlock:function(d){},onEndBlock:function(d){},onBeforeEndBlock:function(d){}})})},"MW/rtc/plugins/undoredo/EditBlock":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/undoredo/EditBlockConstants"],
function(h,f,g,e){return f(null,{constructor:function(d){this._commands=[];this._undoEvents=[];this._redoEvents=[];this._type=d;this._references=1;this._blockTypesForMergeAndAdvance=[]},setType:function(d){this._type||(this._type=d)},getType:function(){return this._type},appendUndoEvents:function(d){d=this._copyEvents(d);this._undoEvents=this._undoEvents.concat(d)},getUndoEvents:function(){return this._undoEvents},appendRedoEvents:function(d){d=this._copyEvents(d);this._redoEvents=this._redoEvents.concat(d)},
getRedoEvents:function(){return this._redoEvents},_copyEvents:function(d){return h.map(d,function(c){return!c?c:g.mixin({},c,{isUndoRedo:!0})})},appendCommand:function(d){this._commands.push(d)},hasCommands:function(){return 0<this._commands.length},execute:function(){this._commands.forEach(function(d){d.execute()},this)},unexecute:function(){for(var d=this._commands.length-1;0<=d;d-=1)this._commands[d].unexecute()},pushAndExecuteCommand:function(d){this._commands.push(d);return d.execute()},preventMerge:function(){this._preventMerge=
!0},canMergeWith:function(d){return!this._type?!1:this._type===e.AUTO?!0:this._preventMerge||this._type!==d.getType()?!1:!0},setBlockTypesForMergeAndAdvance:function(d){this._blockTypesForMergeAndAdvance=d},getBlockTypesForMergeAndAdvance:function(){return this._blockTypesForMergeAndAdvance},mergeWith:function(d){d.addCommands(this._commands);d.appendRedoEvents(this._redoEvents);d.appendUndoEvents(this._undoEvents)},addCommands:function(d){this._commands=this._commands.concat(d)},incrementReferenceCount:function(){this._references+=
1},decrementReferenceCount:function(){this._references-=1;return 0===this._references}})})},"MW/rtc/plugins/undoredo/UndoRedoActionProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/undoredo/UndoRedoAction"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.actionservice","rtc.undoredo.controller"]}},createInstance:function(e,d){return new g(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/undoredo/UndoRedoAction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/RichTextComponentFeatureEnum"],function(h,f,g,e){return h(null,{constructor:function(d,c){this._actionService=d;this._undoRedoController=c;var b=[{id:e.UNDO_REDO.UNDO_ACTION,enabled:c.canUndo(),key:"ctrl_z",platformKey:{mac:"meta_z"},callback:f.hitch(this._undoRedoController,"undo")},{id:e.UNDO_REDO.REDO_ACTION,enabled:c.canRedo(),key:"ctrl_y",platformKey:{mac:"meta_shift_z"},callback:f.hitch(this._undoRedoController,"redo")},{id:e.UNDO_REDO.CLEAR_ACTION,enabled:!0,
callback:f.hitch(this._undoRedoController,"clear")}];d.loadActions(b);this.aspectHandler=g.after(c,"onUndoRedoStackUpdated",f.hitch(this,"_updateActions"),!0)},_updateActions:function(d){this._actionService.updateAction(e.UNDO_REDO.UNDO_ACTION,{enabled:d.isUndoable});this._actionService.updateAction(e.UNDO_REDO.REDO_ACTION,{enabled:d.isRedoable})},destroy:function(){this.aspectHandler.remove()}})})},"MW/rtc/plugins/undoredo/UndoRedoCursorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/undoredo/UndoRedoCursor"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.undoredo.editblock","rtc.cursorcontroller"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/undoredo/UndoRedoCursor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/undoredo/commands/SetCursorCommand MW/rtc/plugins/undoredo/EditBlockConstants".split(" "),function(h,f,g,e,d,c){return h(e,{constructor:function(b,
a){this._cursorController=a;this._lastPosition=null;this.own(g.after(b,"onStartBlock",f.hitch(this,"_onStartBlock"),!0));this.own(g.after(b,"onBeforeEndBlock",f.hitch(this,"_onEndBlock"),!0))},_onStartBlock:function(b){b.getType()!==c.AUTO&&((this._cursorController.hasSelection()||!this._matchesLastPosition())&&b.preventMerge(),b.appendCommand(new d(this._cursorController)))},_onEndBlock:function(b){b.getType!==c.AUTO&&(this._lastPosition=this._getPositions(),b.appendCommand(new d(this._cursorController,
!0)))},_matchesLastPosition:function(){var b=this._getPositions();return this._lastPosition&&b.length===this._lastPosition.length&&b.every(function(a,b){return a.line===this._lastPosition[b].line&&a.column===this._lastPosition[b].column},this)},_getPositions:function(){return this._cursorController.getCursors(!0).map(function(b){return b.getPosition()})}})})},"MW/rtc/plugins/undoredo/commands/SetCursorCommand":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/plugins/undoredo/commands/CommandInterface"],
function(h,f,g){return h(g,{constructor:function(e,d){this._cursorController=e;this._positions=this._cursorController.getPositions();this._onRedo=d},execute:function(){this._onRedo&&this._cursorController.setPositions(this._positions)},unexecute:function(){this._onRedo||this._cursorController.setPositions(this._positions)}})})},"MW/rtc/plugins/language/matlab/alert/AlertControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertController","MW/rtc/core/provider/PluginProvider"],
function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.alert.model","rtc.internaldocument"]}},createInstance:function(e,d){return new f(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/alert/AlertController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{constructor:function(e,d){this._alertModel=e;this._aspectHandle=g.after(d,"onDocumentReset",
f.hitch(this,"_handleDocumentReset"))},_handleDocumentReset:function(){this._alertModel.removeAllAlerts();this.onAlertsReset()},onAlertsReset:function(){},destroy:function(){this._aspectHandle&&(this._aspectHandle.remove(),this._aspectHandle=null);this._alertModel.removeAllAlerts()}})})},"MW/rtc/plugins/language/matlab/alert/AlertModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertModel","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,
{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document"]}},createInstance:function(e){return new f(e)}})})},"MW/rtc/plugins/language/matlab/alert/AlertModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","mw-utils/Utils","MW/rtc/plugins/language/matlab/alert/AlertModelBase"],function(h,f,g,e,d){return h(d,{constructor:function(c){this._document=c;this._alerts=[]},getAlerts:function(){return this._alerts},addAlert:function(c,
b,a){c=this._addAlert(c,b,a);this.onModelChanged();return c},addAlerts:function(c){c=c.map(function(b){return this._addAlert(b.type,b.line,b.payload)},this);this.onModelChanged();return c},updateAlert:function(c,b){var a=this._getAlertById(c);this._copyAlertProperties(b,a);b.isActive&&this._clearActiveAlert();this.onModelChanged()},removeAlerts:function(c){var b=Array.isArray(c)?c:[c];this._alerts=this._alerts.filter(function(a){var c=b.some(function(b){return b===a.id});c&&this._document.deletePosition(a.position);
return!c},this);this.onModelChanged()},removeAllAlerts:function(){this._alerts=this._alerts.filter(function(c){this._document.deletePosition(c.position)},this);this.onModelChanged()},_addAlert:function(c,b,a){var d=e.generateUuid();a.isActive&&this._clearActiveAlert();b=this._document.createLinePositionInLine(b-1,!0);this._alerts.push({id:d,type:c,position:b,payload:a});return d},_getAlertById:function(c){for(var b=0;b<this._alerts.length;b++)if(this._alerts[b].id===c)return this._alerts[b];throw Error("Alert with ID "+
c+" not found.");},_copyAlertProperties:function(c,b){for(var a in c)"object"===typeof c[a]?this._copyAlertProperties(c[a],b[a]):b[a]=c[a]},_clearActiveAlert:function(){this._alerts.forEach(function(c){c.payload.isActive&&(c.payload.isActive=!1)})}})})},"MW/rtc/plugins/language/matlab/alert/AlertModelBase":function(){define(["dojo/_base/declare"],function(h){return h(null,{getAlerts:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.alert.getAlerts");},onModelChanged:function(){}})})},
"MW/rtc/plugins/language/matlab/alert/AlertViewProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertView","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.document rtc.view rtc.view.visibility rtc.alert.model rtc.alert.widgetfactory rtc.internaldocument".split(" ")}},createInstance:function(e,d,c,b,a,g){return new f(e,d,c,b,a,g)},destroyInstance:function(e){e.destroy()}})})},
"MW/rtc/plugins/language/matlab/alert/AlertView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/plugins/language/matlab/alert/AlertTypeEnum".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h(null,{_HORIZONTAL_OFFSET_PX:43,constructor:function(a,b,d,e,h,k){this._document=a;this._view=b;this._visibliltyNotifier=
d;this._alertModel=e;this._alertWidgetFactory=h;this._internalDocument=k;this._alertLayerNode=c.create("div",{className:"alertPluginLayer"});this._view.addLayer(this._alertLayerNode);this._alertLinesMap={};this._rightMarginCache=this._leftPositionCache=NaN;this._transientAspectHandles=[];this._permanentAspectHandles=[g.after(this._visibliltyNotifier,"onShow",f.hitch(this,"_enable")),g.after(this._visibliltyNotifier,"onHide",f.hitch(this,"_disable"))];this._enable()},destroy:function(){this._removeTransientAspectHandles();
this._permanentAspectHandles.forEach(function(a){a.remove()});this._permanentAspectHandles=[];this._clearAlertLines()},_removeTransientAspectHandles:function(){this._transientAspectHandles.forEach(function(a){a.remove()});this._transientAspectHandles=[]},_enable:function(){0===this._transientAspectHandles.length&&(this._transientAspectHandles=[g.after(this._alertModel,"onModelChanged",f.hitch(this,"_layout")),g.after(this._view,"onViewUpdated",f.hitch(this,"_handleOnViewUpdated"))]);this._layout()},
_disable:function(){this._removeTransientAspectHandles();this._clearAlertLines()},_layout:function(){this._clearAlertLines();var a=this._alertModel.getAlerts();this._updateLeftPositionCache();var b=this._calculateViewPositions(a);a.forEach(function(a,c){var d=a.position,e=d.getLineColumn().line,f=this._alertLinesMap[e];f?this._mergeAlertIntoAlertLine(a,f):(f=this._createAlertLine(d),this._alertLinesMap[e]=f,this._updateAlertLinePositioning(f,b[c]),this._addAlertToAlertLine(a,f,"last"))},this)},_clearAlertLines:function(){this._getAlertLines().forEach(function(a){a.alerts.forEach(function(a){a.destroy()},
this);a.alerts=[];a.positionListeners.forEach(function(a){a.remove()},this);a.domNode&&c.destroy(a.domNode)},this);this._alertLinesMap={}},_mergeAlertIntoAlertLine:function(a,b){var c=a.type,d=b.alerts.filter(function(a){return a.getType()===c},this);if(0<d.length){if(d=d[0],d.payload.isActive=d.payload.isActive||a.payload.isActive,a.payload.message&&d.setMessage(d.getMessage()+"\x3chr\x3e"+a.payload.message),void 0!==d.payload.isStale||void 0!==a.payload.isStale)d.payload.isStale=!(!d.payload.isStale||
!a.payload.isStale),d.setStaleness(d.payload.isStale)}else this._addAlertToAlertLine(a,b,c===n.WARNING?"first":"last")},_createAlertLine:function(a){var b={alerts:[],domNode:c.create("div",{className:"alertPlugin-alertLine"},this._alertLayerNode,"last"),position:a,positionListeners:null};b.positionListeners=[g.after(a,"onChange",f.hitch(this,"_handleAlertLinePositionOnChange",b)),g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_handleOnDocumentChanged",b),!0)];return b},_addAlertToAlertLine:function(a,
b,d){a=this._alertWidgetFactory.createAlert(a.type,a.position,a.payload);c.place(a.domNode,b.domNode,d);b.alerts.push(a);this._updateAlertLineVisibility(b);a.startup()},_handleAlertLinePositionOnChange:function(a){var b=a.position,c=b.getLineColumn().line;this._getAlertLines().some(function(a){a=a.position;var d=a.getLineColumn().line;return c===d&&b!==a},this)?this._layout():this._updatePositioningOfAlertLines([a]);this._updateAlertLineVisibility(a)},_handleOnViewUpdated:function(){this._updateRightMarginCache();
this._updateLeftPositionCache();this._updatePositioningOfAlertLines(this._getAlertLines())},_updatePositioningOfAlertLines:function(a){var b=this._calculateViewPositions(a);a.forEach(function(a,c){this._updateAlertLinePositioning(a,b[c])},this)},_updateAlertLinePositioning:function(a,b){a.domNode.style.top=b.top+"px";a.domNode.style.left=b.left+"px"},_handleOnDocumentChanged:function(a,b){q.hasEventType(b,m.FORMAT_CHANGE_EVENT)&&this._updateAlertLineVisibility(a)},_updateAlertLineVisibility:function(a){var b=
!l.isCodeContainer(a.position.node);d.toggle(a.domNode,"alertPlugin-onTextLine",b)},_getAlertLines:function(){return Object.keys(this._alertLinesMap).map(function(a){return this._alertLinesMap[a]},this)},_calculateViewPositions:function(a){return a.map(function(a){a=a.position.getNode();return{top:this._view.getCoordinateForPosition(a.startPosition()).y,left:this._leftPositionCache}},this)},_updateLeftPositionCache:function(){var a=this._view.getDomTargetPosition();this._leftPositionCache=a.scrollLeft+
a.clientWidth-this._rightMarginCache-this._HORIZONTAL_OFFSET_PX},_updateRightMarginCache:function(){if(!isFinite(this._rightMarginCache)){var c=this._view.getDomtarget().querySelector(".lineNode");if(c&&e.isDescendant(c,document.body)){var d=this._view.getDomTargetPosition(),f=a.getComputedStyle(c),c=b.getMarginBox(c,f);this._rightMarginCache=d.scrollWidth-c.w-c.l}}}})})},"MW/rtc/plugins/language/matlab/alert/AlertWidgetFactoryProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/alert/AlertWidgetFactory",
"MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.view","rtc.cursor"]}},createInstance:function(e,d){return new f(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/alert/AlertWidgetFactory":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct MW/rtc/plugins/language/matlab/alert/AlertTypeEnum MW/rtc/plugins/language/matlab/alert/ErrorAlert MW/rtc/plugins/language/matlab/alert/WarningAlert".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b){this._view=a;this._cursor=b},destroy:function(){},createAlert:function(a,e,f){switch(a){case d.ERROR:a=new c({view:this._view,position:e,payload:f});break;case d.WARNING:a=new b({view:this._view,position:e,payload:f});break;default:throw Error("Unable to construct alert widget. Unkown alert widget type.");}return a}})})},"MW/rtc/plugins/language/matlab/alert/ErrorAlert":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/aspect dojo/on dijit/_TemplatedMixin dojo/text!./templateErrorAlert.html MW/rtc/plugins/language/matlab/alert/AlertWidgetBase MW/rtc/plugins/language/matlab/alert/AlertTypeEnum".split(" "),
function(h,f,g,e,d,c,b,a,k){return h([a,c],{templateString:b,baseClass:"alertPlugin-errorElement",constructor:function(a){this._payload=a.payload},startup:function(){this.inherited(arguments);this.setStaleness(this._payload.isStale);this.setMessage(this._payload.message)},destroy:function(){this.inherited(arguments)},getType:function(){return k.ERROR}})})},"MW/rtc/plugins/language/matlab/alert/AlertWidgetBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dijit/_WidgetBase dijit/popup dijit/TooltipDialog MW/rtc/view/ViewEventUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h([a],{_STALE_CLASS:"alertPlugin-isStale",_HAS_TOOLTIP_CLASS:"alertPlugin-hasTooltip",_MOUSE_DOWN_EVENT:window.PointerEvent?"pointerdown":"mousedown",_MOUSE_UP_EVENT:window.PointerEvent?"pointerup":"mouseup",statics:{onAlertBecameActive:function(a){}},constructor:function(a){this._message="";this._tooltip=null;this._isTooltipVisible=!1;this._view=a.view;this._position=a.position;this._tooltipPosition="after-centered below below-alt below-centered above above-alt above-centered".split(" ");
this._mouseListeners=[];this._tooltipListeners=[];this._blockedMouseDown=!1},startup:function(){this.inherited(arguments)},destroy:function(){this._removeMouseListeners();this._removeTooltipAndListeners();this.inherited(arguments)},getType:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.alert.AlertWidgetBase.getType");},setMessage:function(a){this._message=a;this._removeMouseListeners();this._removeTooltipAndListeners();this._isTooltipEnabled()&&(this._addMouseListeners(),
e.add(this.domNode,this._HAS_TOOLTIP_CLASS),this._updateTooltipVisibility())},getMessage:function(){return this._message},_showMessage:function(){this._tooltip||this._initializeTooltips();this._tooltip.connectorNode.style.top="";this._tooltip.connectorNode.style.left="";k.open({parent:this,popup:this._tooltip,around:this.domNode,orient:this._tooltipPosition,maxHeight:Infinity,onClose:f.hitch(this,"_onTooltipClose")});this._adjustTooltipZIndex("99");this._tooltip.set("data-testid","alertPluginTooltip_visible");
this._isTooltipVisible=this._payload.isActive=!0;this.statics.onAlertBecameActive(this)},_hideMessage:function(a){if(this._tooltip){var b=this._payload.isActive;k.close(this._tooltip);this._tooltip.set("data-testid","alertPluginTooltip_hidden");a&&(this._payload.isActive=b)}},_onTooltipClose:function(){this._isTooltipVisible=this._payload.isActive=!1},setStaleness:function(a){e.toggle(this.domNode,this._STALE_CLASS,a||!1)},onMouseDown:function(a){a.stopPropagation();this._blockedMouseDown=!0},onMouseUp:function(a){this._blockedMouseDown&&
(a.stopPropagation(),this._payload.isActive=!this._payload.isActive,this._updateTooltipVisibility());this._blockedMouseDown=!1},onWindowMouseUp:function(){this._blockedMouseDown=!1},_handleOtherAlertBecameActive:function(a){a!==this&&(this._payload.isActive=!1)},_wrapMessage:function(a){return d.create("div",{className:"alertPlugin-alertMessage",innerHTML:a})},_isTooltipEnabled:function(){return this._message&&0<this._message.length},_initializeTooltips:function(){this._tooltip=new l({content:this._wrapMessage(this._message)});
k.moveOffScreen(this._tooltip);this._addTooltipListeners()},_addMouseListeners:function(){this._mouseListeners=[b(this.domNode,this._MOUSE_DOWN_EVENT,f.hitch(this,"onMouseDown")),b(this.domNode,this._MOUSE_UP_EVENT,f.hitch(this,"onMouseUp")),b(window,this._MOUSE_UP_EVENT,f.hitch(this,"onWindowMouseUp"))]},_removeMouseListeners:function(){this._mouseListeners.forEach(function(a){a.remove()});this._mouseListeners=[]},_addTooltipListeners:function(){this._tooltipListeners=[g.after(this._view,"onViewUpdated",
f.hitch(this,"_updateTooltipVisibilityOnViewChange"),!0),g.after(this._position,"onChange",f.hitch(this,"_updateTooltipVisibility")),g.after(this.statics,"onAlertBecameActive",f.hitch(this,"_handleOtherAlertBecameActive"),!0)]},_removeTooltipAndListeners:function(){null!==this._tooltip&&(this._tooltipListeners.forEach(function(a){a.remove()}),this._tooltipListeners=[],this._hideMessage(!0),this._tooltip.destroy(),this._tooltip=null);e.remove(this.domNode,this._HAS_TOOLTIP_CLASS)},_updateTooltipVisibility:function(){if(this._isTooltipEnabled()){if(this._payload.isActive){var a=
this._position.getLineColumn();if(this._view.isLineInView(a.line)){this._showMessage();return}}this._hideMessage(!0)}},_updateTooltipVisibilityOnViewChange:function(a){(m.hasScrollEvent(a)||m.hasSizingEvent(a))&&this._updateTooltipVisibility()},_adjustTooltipZIndex:function(a){for(var b=this._tooltip.domNode;b&&!e.contains(b,"dijitTooltipDialogPopup");)b=b.parentNode;c.set(b,"zIndex",a)}})})},"MW/rtc/plugins/language/matlab/alert/WarningAlert":function(){define("dojo/_base/declare dojo/dom-construct dijit/_TemplatedMixin dojo/text!./templateWarningAlert.html MW/rtc/plugins/language/matlab/alert/AlertWidgetBase MW/rtc/plugins/language/matlab/alert/AlertTypeEnum".split(" "),
function(h,f,g,e,d,c){return h([d,g],{templateString:e,baseClass:"alertPlugin-warningElement",constructor:function(b){this._payload=b.payload},startup:function(){this.inherited(arguments);this.setStaleness(this._payload.isStale);this.setMessage(this._payload.message)},destroy:function(){this.inherited(arguments)},getType:function(){return c.WARNING}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatterProvider":function(){define(["dojo/_base/declare","./DiagnosticMessageFormatter",
"MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:[]}},createInstance:function(){return new f},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/DiagnosticMessageFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/language/matlab/diagnosticmessage/ErrorMessageContent","MW/rtc/plugins/language/matlab/diagnosticmessage/WarningMessageContent"],
function(h,f,g,e,d){return h(null,{constructor:function(){},destroy:function(){},createErrorMessageWithStack:function(c){return new e(c)},createWarningMessageWithStack:function(c){return new d(c)}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/ErrorMessageContent":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/diagnosticmessage/MessageContentBase"],function(h,f){return h([f],{_SECTION_SEPARATOR:"\x3cbr\x3e\x3cbr\x3e",_ERROR_CLASS:"diagnosticMessage-errorType",constructor:function(){},
getClass:function(){return this._ERROR_CLASS},getSectionSeparator:function(){return this._SECTION_SEPARATOR}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/MessageContentBase":function(){define(["dojo/_base/declare","dojo/dom-construct"],function(h,f){return h(null,{_LINEBREAK:"\x3cbr\x3e",constructor:function(f){this._rawReport=f},getClass:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.diagnosticmessage.MessageContentBase.getClass");},getSectionSeparator:function(){throw Error("Unimplemented API: MW.rtc.plugins.language.matlab.diagnosticmessage.MessageContentBase.getSectionSeparator");
},getDomNode:function(){var g,e,d=this._rawReport,d=d.replace(/\n/g,this._LINEBREAK);e=d.indexOf(this.getSectionSeparator());1<e?(g=d.substring(0,e),e=d.substring(e+this._LINEBREAK.length)):(g=d,e="");d={className:"diagnosticMessage-wrapper "+this.getClass()};e={innerHTML:e,className:"diagnosticMessage-stackPart"};g={innerHTML:g,className:"diagnosticMessage-messagePart"};d=f.create("div",d);f.create("div",g,d);f.create("div",e,d);return d}})})},"MW/rtc/plugins/language/matlab/diagnosticmessage/WarningMessageContent":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/diagnosticmessage/MessageContentBase"],function(h,f){return h([f],{_SECTION_SEPARATOR:"\x3cbr\x3e\x3e ",_WARNING_CLASS:"diagnosticMessage-warningType",constructor:function(){},getClass:function(){return this._WARNING_CLASS},getSectionSeparator:function(){return this._SECTION_SEPARATOR}})})},"MW/rtc/plugins/language/matlab/autoindent/AutoIndentProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/autoindent/AutoIndent","MW/rtc/core/provider/PluginProvider"],
function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","matlab.tokens","rtc.indentutilities"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/autoindent/AutoIndent":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/language/matlab/autoindent/ExchangeService MW/rtc/plugins/language/matlab/autoindent/Formatter MW/rtc/plugins/language/matlab/autoindent/FormatSupport mw-utils/Utils".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(null,{constructor:function(a,b,c,d,e){this._document=b;this._internalDocument=a;this._cursor=c;this._tokenizerService=d;this._indentUtilities=e;this._formatter=new l(this._cursor,this._document,this._internalDocument,d,e);this._notifyAutoIndentEnablement();this._formatSupport=new m(this._formatter,this._document);this._aspectHandle=g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"),!0);this._isEnabled=!0},_notifyAutoIndentEnablement:function(){k.notifyAutoIndentEnablement()},
_handleDocumentChanged:function(a){if(this._isEnabled&&a){var b=a[0],b=b||{},c=this._cursor.getNode();if(!b.isUndoRedo)switch(b.type){case d.INSERT_TEXT:if(!e.isCodeContainer(c))break;this._handleInsertTextEvent(a);break;case d.INSERT_BREAK_EVENT:this._handleLineBreakEvent(a);break;case d.DELETION_EVENT:if(!e.isCodeContainer(c))break;this._handleDeleteEvent();break;case d.FORMAT_CHANGE_EVENT:e.isCodeContainer(c)&&this._shouldFormatChangeTriggerIndent(b)&&this._handleFormatChangeEvent(b)}}},enable:function(){this._isEnabled=
!0},disable:function(){this._isEnabled=!1},_handleInsertTextEvent:function(a){if(!c.isMultiLineEvent(a,this._internalDocument)){a=a[0].text;var b=this._cursor.getLineColumn();b.line-=1;b.column-=1;this._formatIfNecessary(a,b)}},_handleLineBreakEvent:function(a){k.resetNumberOfWhiteSpaces();k.resetIndentLevel();a=c.lineRangeFromEvents(a);var b=a.startLine;a=a.endLine;var d=this._internalDocument.getLineNode(b),f=this._internalDocument.getLineNode(a);if(d&&f&&e.isCodeContainer(d)&&e.isCodeContainer(f)){for(;b<
a;b+=1)d={line:b,column:this._document.getLineText(b+1).length},this._formatIfNecessary("\n",d);b=this._indentUtilities.getIndentForLineNumber(a);0<b&&k.setNumberOfWhiteSpaces(b);a=this._formatter.format(a);0<a&&k.setIndentLevel(a);b=this._cursor.getPosition().line;d=this._document.getLineText(b+1);this._adjustCursorPosition(d,b,a)}},_handleDeleteEvent:function(){var a=this._cursor.getLineColumn();a.line-=1;a.column-=1;this._formatIfNecessary("\b",a)},_handleFormatChangeEvent:function(a){this._formatter.format(a.startLine)},
_adjustCursorPosition:function(a,b,c){q.isWhitespace(a)?this._cursor.movePosition(this._cursor.LINE_END):this._cursor.setPosition(null,{line:b,column:c},!0)},_formatIfNecessary:function(a,b){this._formatSupport.shouldKeyTriggerFormat(a,b)&&this._formatter.format(b.line)},_shouldFormatChangeTriggerIndent:function(a){return"code"===a.newFormat&&a.startLine===a.endLine},destroy:function(){this._aspectHandle.remove();this._formatSupport=this._formatter=null}})})},"MW/rtc/plugins/language/matlab/autoindent/ExchangeService":function(){define([],
function(){return{_latestNumberOfWhiteSpaces:0,_latestIndentLevel:0,_autoIndentEnablement:!1,getLatestNumberOfWhiteSpaces:function(){return this._latestNumberOfWhiteSpaces},setNumberOfWhiteSpaces:function(h){this._latestNumberOfWhiteSpaces=h},resetNumberOfWhiteSpaces:function(){this._latestNumberOfWhiteSpaces=0},getLatestIndentLevel:function(){return this._latestIndentLevel},setIndentLevel:function(h){this._latestIndentLevel=h},resetIndentLevel:function(){this._latestIndentLevel=0},notifyAutoIndentEnablement:function(){this._autoIndentEnablement=
!0},isAutoIndentEnabled:function(){return this._autoIndentEnablement}}})},"MW/rtc/plugins/language/matlab/autoindent/Formatter":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants","MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities"],function(h,f,g,e,d){return h(null,{_INDENT_AMOUNT:4,_UNDOREDO_BLOCK_NAME:"AutoIndent",constructor:function(c,b,a,d,e){this._cursor=c;this._document=b;this._internalDocument=a;this._tokenizerService=
d;this._indentUtilities=e},findFirstNonWhitespaceTokenInLine:function(c){return this._indentUtilities.findFirstNonWhitespaceTokenInLine(c)},processLineContinuations:function(c){return this._indentUtilities.processLineContinuations(c)},processNonLineContinuations:function(c){return this._indentUtilities.processNonLineContinuations(c)},format:function(c){return this._indentUtilities.format(c)},_isNotWhitespaceOrComment:function(c){return this._indentUtilities.isNotWhitespaceOrComment(c)},_findCorrespondingStartToken:function(c,
b){return this._indentUtilities.findCorrespondingStartToken(c,b)},_searchBackAndCalculateIndent:function(c,b){return this._indentUtilities.searchBackAndCalculateIndent(c,b)},_getTokenIndent:function(c){return this._indentUtilities.getTokenIndent(c)},_getDeltaOfIndent:function(c,b){return this._indentUtilities.getDeltaOfIndent(c,b)}})})},"MW/rtc/plugins/language/matlab/autoindent/FormatSupport":function(){define(["dojo/_base/array","dojo/_base/declare","mw-utils/Utils"],function(h,f,g){return f(null,
{constructor:function(e,d){this.KEYWORD_MAP=this._createOutdentKeywordMap();this._formatter=e;this._document=d},shouldKeyTriggerFormat:function(e,d){var c=this._checkTextMatchesToken(e,d);!1===c&&1===e.length&&(c=this._checkPreviousChar(e,d));return c},_checkTextMatchesToken:function(e,d){var c=!1;if(this._isStringAtEndOfKeyword(e)){var b=this._formatter.findFirstNonWhitespaceTokenInLine(d.line),a=this._getKeywordsEndingInString(e),f;if(b)for(f=0;f<a.length;f+=1)if(this._doesTokenMatch(b,a,f,d)){c=
!0;break}}return c},_checkPreviousChar:function(e,d){var c=!1;g.isWhitespace(e)?(c=this._goBackUntilNoWhitespace(e,d),c=this._checkTextMatchesToken(c.typedText,c.cursorPosition)):this._didDeletionOccur(d,e)?c=this._checkCursorPositionForToken(d):1<d.column&&(d.column-=1,c=this._checkCursorPositionForToken(d));return c},_checkCursorPositionForToken:function(e){var d=this._document.getTextCharacters(e.line,e.column-1,1);return this._checkTextMatchesToken(d,e)},_didDeletionOccur:function(e,d){return 0<
e.column&&this._document.getTextCharacters(e.line,e.column-1,1)!==d},_goBackUntilNoWhitespace:function(e,d){for(;e&&g.isWhitespace(e)&&1<d.column;)d.column-=1,e=this._document.getTextCharacters(d.line,d.column,1);return{typedText:e,cursorPosition:d}},_getKeywordsEndingInString:function(e){return this.KEYWORD_MAP[e]},_isStringAtEndOfKeyword:function(e){return void 0!==this.KEYWORD_MAP[e]},_createOutdentKeywordMap:function(){return{e:["else","case","otherwise"],f:["elseif"],n:["function"],h:["catch"],
d:["end"]}},_doesTokenMatch:function(e,d,c,b){e=e.getPositionInfo();return!(0<=e.column)?!1:this._document.getTextCharacters(b.line,e.column,d[c].length)===d[c]}})})},"MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreferenceProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreference","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.preferences.service",
"rtc.indentutilities"]}},createInstance:function(e,d){return new f(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/autoindent/preferences/AutoIndentPreference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./FunctionIndentingPreferences"],function(h,f,g,e,d){return h(e,{_INDENTING_PREFERENCE_KEY:"EditorMFunctionIndentType",constructor:function(c,b){this._preferenceService=c;this._indentUtilities=b;this.own(g.after(this._preferenceService,
"onPreferencesChanged",f.hitch(this,"_handlePreferenceChanged")));this._setIndentingStyle()},_handlePreferenceChanged:function(){this._setIndentingStyle()},_setIndentingStyle:function(){var c=this._preferenceService.getValue(this._INDENTING_PREFERENCE_KEY,d.MixedFunctionIndenting);this._indentUtilities.setIndentingStyle(c)}})})},"MW/rtc/plugins/language/matlab/code/CodeChangeServiceProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","./CodeChangeService","MW/rtc/core/provider/PluginProvider"],
function(h,f,g,e){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.internaldocument"]}},createInstance:function(d,c){return new g(d,c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/code/CodeChangeService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/NodeUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b){this._cursor=a;this._internalDocument=b;this._aspectHandles=[];this._aspectHandles.push(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_checkCodeChange"),!0));this._aspectHandles.push(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_checkCodeChangeOnReset")))},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]},onCodeChanged:function(a){},_checkCodeChange:function(a){if(!a||
0===a.length)this.onCodeChanged([this._cursor.getNode().rootContainer()]);else{var d=c.getLineNodesFromEvents(a,this._internalDocument).filter(e.isCodeContainer,b);a=this._getFormerCodeLineNodes(a);d=d.concat(a);if(d.length)this.onCodeChanged(d)}},_getFormerCodeLineNodes:function(a){a=c.getEventsOfType(a,d.FORMAT_CHANGE_EVENT);a=a.filter(function(a){return"code"===a.oldFormat});return c.getLineNodesFromEvents(a,this._internalDocument)},_checkCodeChangeOnReset:function(){var a=e.getCodeLineNodes(this._internalDocument);
if(a.length)this.onCodeChanged(a)}})})},"MW/rtc/plugins/language/matlab/codecontent/CodeContentProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","./CodeContent","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,f,g,e,d){return h(g,{isApplicable:function(c){return d.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:[]}},createInstance:function(){return new e}})})},
"MW/rtc/plugins/language/matlab/codecontent/CodeContent":function(){define(["dojo/_base/declare","mw-string-utils/StringUtils"],function(h,f){return h(null,{_FUNCTION_KEYWORD:"function ",_CLASSDEF_KEYWORD:"classdef ",_COMMENT_SYMBOL:"%",_BLOCK_COMMENT_START_SYMBOL:"%{",_BLOCK_COMMENT_END_SYMBOL:"%}",TYPE_ENUM:{SCRIPT:0,FUNCTION:1,CLASS:2},constructor:function(){},getCodeType:function(f){var e=this.TYPE_ENUM.SCRIPT;(f=this._findFirstCodeLine(f))&&(e=this._checkLineForCodeType(f));return e},_checkLineForCodeType:function(g){var e=
f.leftTrim(g.getText());g=0===e.indexOf(this._FUNCTION_KEYWORD);e=0===e.indexOf(this._CLASSDEF_KEYWORD);return g?this.TYPE_ENUM.FUNCTION:e?this.TYPE_ENUM.CLASS:this.TYPE_ENUM.SCRIPT},lineNodesContainCode:function(f){return!!this._findFirstCodeLine(f)},_findFirstCodeLine:function(f){for(var e=0;e<f.length;e++){var d=f[e],c=d.getText().trim();if(0!==c.length)if(0===c.indexOf(this._BLOCK_COMMENT_START_SYMBOL)){if(e=this._findEndOfBlockLine(e,f),-1===e)break}else if(0!==c.indexOf(this._COMMENT_SYMBOL))return d}return null},
_findEndOfBlockLine:function(f,e){for(var d=f+1;d<e.length;d++){var c=e[d].getText().trim();if(0===c.indexOf(this._BLOCK_COMMENT_START_SYMBOL))this._findEndOfBlockLine(d,e);else if(0===c.indexOf(this._BLOCK_COMMENT_END_SYMBOL))return d}return-1}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModelProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModel","MW/rtc/core/provider/PluginProvider"],function(h,
f,g,e){return h(e,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice","rtc.document"]}},createInstance:function(d,c){return new g(d,c)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/model/CodeAnalyzerModel":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractDocumentSynchronizableMixin","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h([e,g],{constructor:function(d,c){this._editorDataService=
d;this._document=c;this._modelData=null;this._model={};this._processedMessages=[];this._linePropertiesArray=[];this.initializeSynchronizable(c);this._handles=[this._editorDataService.listenTo("matlab.code.codeanalyzer",f.hitch(this,"_handleResponse"))]},_handleResponse:function(d){d&&(this._lastDocumentState=d.documentState,this._shouldModelBeUpdated(d)&&(this._updateForModelData(d),this.onModelChange()),this._checkForSyntaxErrors())},_shouldModelBeUpdated:function(d){if(!this.isModelUpToDate())return!1;
if(!this._modelData)return!0;var c=JSON.stringify(this._modelData.messages)+JSON.stringify(this._modelData.extendedHelpMessageMap);d=JSON.stringify(d.messages)+JSON.stringify(d.extendedHelpMessageMap);return c!==d},_updateForModelData:function(d){this._modelData=d;this._model=this._processMessages(d.messages,d.extendedHelpMessageMap)},_processMessages:function(d,c){var b={};this._linePropertiesArray=this._document.getLinePropertiesArray();this._processedMessages=[];for(var a=0;a<d.length;a+=1){var e=
d[a],f=this._linePropertiesArray[e.lineNumber];if(!f||!f.readOnly)e.extendedHelpMessage=c[e.messageTag],f=this._createNewToken(e),this._processedMessages.push(f),this._appendTokenToMap(b,e.lineNumber,f)}return b},_appendTokenToMap:function(d,c,b){d[c]||(d[c]=[]);d[c].push(b)},_createNewToken:function(d){var c=this._linePropertiesArray[d.lineNumber],c=c&&c.readOnly;return{message:d.message,severity:d.severity,range:{start:{row:d.lineNumber,column:d.startColumn},end:{row:d.lineNumber,column:d.endColumn}},
autoFix:{autoFixMessage:c?null:d.autoFixMessage,autoFixChanges:c?null:d.autoFixChanges},extendedHelpMessage:d.extendedHelpMessage}},_checkForSyntaxErrors:function(){if(this.isModelUpToDate()){var d=this._processedMessages;1>d.length?(this.onDocumentChangeWithNoSyntaxErrors(),this.markClean()):d.some(function(c){return 1<c.severity})||(this.onDocumentChangeWithNoSyntaxErrors(),this.markClean())}},isModelUpToDate:function(){return this._document.getState()===this._lastDocumentState},onDocumentChangeWithNoSyntaxErrors:function(){},
onModelChange:function(){},hasMessages:function(){return!!this._model},getMessages:function(d){return this._model[d]||[]},getAllMessages:function(){return this._processedMessages},destroy:function(){this._handles.forEach(function(d){d.remove()})}})})},"MW/rtc/abstract/AbstractDocumentSynchronizableMixin":function(){define(["dojo/_base/declare","dojo/aspect","dojo/_base/lang","MW/rtc/abstract/AbstractSynchronizableMixin"],function(h,f,g,e){return h(e,{constructor:function(){},initializeSynchronizable:function(d){this._document=
d;this.own(f.after(d,"onChange",g.hitch(this,"markDirty")))}})})},"MW/rtc/abstract/AbstractSynchronizableMixin":function(){define(["dojo/_base/declare","dojo/aspect","dojo/_base/lang","dojo/Deferred"],function(h,f,g,e){return h([],{"-chains-":{destroy:"before"},constructor:function(){this._isReadyState=!1;this._promise=null},whenReady:function(d){this.isReady()?d():(this._promise||(this._promise=new e),this._promise.then(d))},isReady:function(){return this._isReadyState},markDirty:function(){this._isReadyState=
!1},markClean:function(){this._isReadyState=!0;this._promise&&(this._promise.resolve(this),this._promise=null)},destroy:function(){this._promise=null}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltip","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.codeanalyzermodel",
"rtc.code.codeanalyzerautofix","rtc.hyperlinkservice"]}},createInstance:function(e,d,c){return new f(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltip":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/tooltip/HoverableTooltipPlugin","MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerUtils","MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipContent"],function(h,f,g,e,d){return h(g,
{constructor:function(c,b,a){this._codeAnalyzerModel=c;this._codeAnalyzerAutoFix=b;this._hyperlinkService=a},priority:function(){return 5},_generateToolTipContent:function(c){c={messageInfo:c,callback:f.hitch(this,function(b){this._codeAnalyzerAutoFix.fixLine(b);this.onTooltipClose()}),hyperlinkService:this._hyperlinkService};return(new d(c)).tooltipContentNode},onTooltipClose:function(){},getTooltipContent:function(c,b,a){var d;if(b&&(c=b.getLineColumn(),b=this._codeAnalyzerModel.getMessages(c.line-
1))){b=e.generateRangeToMessageMap(b);for(var f in b)if(b.hasOwnProperty(f)){var g=b[f];this._isEventPositionWithinMessageRange(c,g)&&(d=this._generateToolTipContent(g))}}a(d)},_isEventPositionWithinMessageRange:function(c,b){var a=c.column,d=b.range;return d.start.column<=a&&a<=d.end.column+1},destroy:function(){}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerUtils":function(){define([],function(){return{hasHigherSeverity:function(h,f){return h.severity>f.severity?!0:h.severity===
f.severity?Boolean(h.autoFix.autoFixMessage&&!f.autoFix.autoFixMessage):!1},generateRangeToMessageMap:function(h){var f={};h.forEach(function(g){var e=JSON.stringify(g.range);if(!f[e]||this.hasHigherSeverity(g,f[e]))f[e]=g},this);return f}}})},"MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipContent":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/form/Button dojo/text!MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/templates/CodeAnalyzerTooltipContent.html dojo/i18n!l10n/nls/actions mw-utils/Utils require dojo/domReady!".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return h([k,l],{templateString:q,constructor:function(a){this._callBack=a.callback;this._codeAnlayzerMessage=a.messageInfo.message;this._autoFixObject=a.messageInfo.autoFix;this._extendedHelpMessage=a.messageInfo.extendedHelpMessage;this._hyperlinkService=a.hyperlinkService;this._hyperlinkHandle=null;this._widgetId=p.generateUuid()},postCreate:function(){this.tooltipContentNode.innerHTML=this._codeAnlayzerMessage;this.tooltipContentNode.setAttribute("data-testid",
"codeAnalyzerTooltip");e.add(this.tooltipContentNode,"codeAnalyzerTooltip");var c=d.create("div",{className:"hoverFix"});this.tooltipContentNode.appendChild(c);null!=this._extendedHelpMessage&&(c=new m({label:n.detailsButtonLabel}),this._extendedHelpButtonDomNode=c.domNode,c.set("data-testid","extendedHelpButton"),g.set(c.domNode,"id","extendedHelpButton_"+this._widgetId),e.add(c.domNode,"tooltipInlineButton extendedHelp"),a(c,"click",b.hitch(this,"_extendedHelpButtonClick")),c.placeAt(this.tooltipContentNode));
this._autoFixObject.autoFixMessage&&(c=new m({label:n.fixButtonLabel}),c.set("data-testid","autoFixButton"),a(c,"click",b.hitch(this,function(){this._callBack(this._autoFixObject.autoFixChanges)})),e.add(c.domNode,"tooltipInlineButton autoFixButton"),c.placeAt(this.tooltipContentNode));this.inherited(arguments);this.tooltipContentNode.addEventListener("onAdjustingOrientation",b.hitch(this,"_handleAdjustingOrientation"));this.tooltipContentNode.addEventListener("onReadyToDisplay",b.hitch(this,"_handleReadyToDisplay"))},
_handleAdjustingOrientation:function(){this._extendedHelpButtonDomNode&&this._expandExtendedHelp(this._extendedHelpButtonDomNode)},_handleReadyToDisplay:function(){this._extendedHelpButtonDomNode&&this._collapseExtendedHelp(this._extendedHelpButtonDomNode)},_extendedHelpButtonClick:function(){e.contains(this._extendedHelpButtonDomNode,"extendedHelpExpanded")?this._collapseExtendedHelp(this._extendedHelpButtonDomNode):this._expandExtendedHelp(this._extendedHelpButtonDomNode)},_expandExtendedHelp:function(a){e.toggle(a,
"extendedHelpExpanded",!0);this.tooltipContentNode.appendChild(d.create("hr",{id:"exthelpdivider"+this._widgetId}));a=d.create("div",{id:"exthelptextnode"+this._widgetId,innerHTML:this._extendedHelpMessage,className:"extendedHelpTextNode","data-testid":"extendedHelpDialog"});c.set(a,"width",this.tooltipContentNode.clientWidth+"px");this._hyperlinkHandle=this._hyperlinkService.attachMatlabHyperlinkHandler(a);this.tooltipContentNode.appendChild(a);this._emitResizeEvent()},_collapseExtendedHelp:function(a){e.toggle(a,
"extendedHelpExpanded",!1);d.destroy("exthelptextnode"+this._widgetId);d.destroy("exthelpdivider"+this._widgetId);this._hyperlinkHandle.remove();this._hyperlinkHandle=null;this._emitResizeEvent()},_emitResizeEvent:function(){a.emit(this.tooltipContentNode,"onResized",{bubbles:!1,cancelable:!0})},getWidgetId:function(){return this._widgetId}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerViewProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerView",
"MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view.decoration"]}},createInstance:function(e,d){return new f(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/view/CodeAnalyzerView":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerUtils"],
function(h,f,g){return h(null,{_CSSCLASSES:{ERROR:"error_squiggle_rte",WARNING:"warning_squiggle_rte",WARNING_HIGHLIGHT:"warningHighlight"},constructor:function(e,d){this._internalDocument=e;this._decorator=d.createDecorator();this._SEVERITY_THRESHOLD=1;this._DEFAULT_VALUE=-99},updateMarkers:function(e,d){var c=this._getDecorationInfo(d);this._decorator.clearRange(e);this._decorator.addClasses(c);this._decorator.applyChanges()},_isError:function(e){return void 0===e||e>this._SEVERITY_THRESHOLD||e===
this._DEFAULT_VALUE},_getErrorOrWarningClass:function(e){return this._isError(e)?this._CSSCLASSES.ERROR:this._CSSCLASSES.WARNING},_getDecorationInfo:function(e){var d=[];if(!(e&&0<e.length))return d;e=g.generateRangeToMessageMap(e);for(var c in e)if(e.hasOwnProperty(c)){var b=e[c];d.push({range:this._getRangeFromMessage(b),classList:this._getClassListFromMessage(b)})}return d},_getClassListFromMessage:function(e){var d=[this._getErrorOrWarningClass(e.severity)];e.autoFix&&e.autoFix.autoFixMessage&&
d.push(this._CSSCLASSES.WARNING_HIGHLIGHT);return d},_getRangeFromMessage:function(e){var d=e.range.start;e=e.range.end;return this._internalDocument.getRangeForLineColumn(d.row+1,d.column+1,e.row+1,e.column+1)},_isParentElementValid:function(e){return f.isCodeContainer(e.parent)},destroy:function(){this._tooltip&&this._tooltip.hideTooltip()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPluginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities",
"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPlugin","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{isApplicable:function(c){return g.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.internaldocument","rtc.code.codeanalyzermodel","rtc.code.codeanalyzerview"]}},createInstance:function(c,b,a,d){return new e(c,b,a,d)},destroyInstance:function(c){c.destroy()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerPlugin":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/model/CodeUtilities"],function(h,f,g,e){return h(null,{constructor:function(d,c,b,a){this._document=d;this._internalDocument=c;this._codeAnalyzerModel=b;this._codeAnalyzerView=a;this._WAIT_TIME=900;this._aspectHandles=[g.after(this._document,"onChange",f.hitch(this,"_handleDocumentChange"),!0),g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_handleDocumentChange"),!0),g.after(this._codeAnalyzerModel,"onModelChange",f.hitch(this,"_handleModelChange"))]},
_handleDocumentChange:function(){this._timer&&clearTimeout(this._timer);this._timer=setTimeout(f.hitch(this,"_handleTimeout"),this._WAIT_TIME)},_handleTimeout:function(){this._timer=null;this._redrawMessages()},_handleModelChange:function(){this._timer||this._redrawMessages()},_redrawMessages:function(){if(this._codeAnalyzerModel.hasMessages()&&this._codeAnalyzerModel.isModelUpToDate())for(var d=this._internalDocument.getMaxLineNumber(),c=0;c<d;c+=1){var b=this._internalDocument.getLineNode(c);if(e.isCodeContainer(b)){var b=
this._internalDocument.getRangeForLine(c+1),a=this._codeAnalyzerModel.getMessages(c);this._codeAnalyzerView.updateMarkers(b,a)}}},destroy:function(){this._aspectHandles.forEach(function(d){d.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFixProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFix","MW/rtc/core/provider/PluginProvider"],
function(h,f,g,e,d){return h(d,{isApplicable:function(c){return g.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.cursor","rtc.eventhandler","rtc.actionservice","rtc.code.codeanalyzermodel"]}},createInstance:function(c,b,a,d,f){return new e(c,b,a,d,f)}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/CodeAnalyzerAutoFix":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,
{constructor:function(e,d,c,b,a){this._document=e;this._cursor=d;this._codeAnalyzerModel=a;this._actionService=b;this._evtListener=g.after(c,"onMouseDown",f.hitch(this,"_updateContextMenuLabel"));this._addActions()},destroy:function(){this._evtListener.remove()},_findAndExecuteAutoFix:function(){var e=this._cursor.getLineColumn(),d=e.line-1,e=e.column-1,c=this._codeAnalyzerModel.getMessages(d);if(c)for(var b=0;b<c.length;b+=1){var a=c[b];if(this._isWithinRangeOfAutoFix(a,d,e))return this.fixLine(a.autoFix.autoFixChanges),
!0}},_addActions:function(){var e=[{id:"rtc_autofix",enabled:!0,contextMenuGroup:"Autofix",text:"",callback:f.hitch(this,"_findAndExecuteAutoFix")}];this._actionService.loadActions(e)},_updateContextMenuLabel:function(){var e="",d=this._cursor.getLineColumn(),c=d.column-1;if(d=this._codeAnalyzerModel.getMessages(d.line-1))for(var b=0;b<d.length;b+=1){var a=d[b],f=a.range.end.column;c>=a.range.start.column&&c<=f&&a.autoFix.autoFixMessage&&(e=a.autoFix.autoFixMessage,e=e.bold())}this._actionService.updateAction("rtc_autofix",
{text:e})},_isWithinRangeOfAutoFix:function(e,d,c){var b=e.range.start.row,a=e.range;return e.autoFix.autoFixChanges&&b===d&&a.start.column<=c&&a.end.column>=c},fixLine:function(e){this._document.startEdit();e.forEach(function(d){this._replace(d)},this);this._document.endEdit()},_replace:function(e){this._isEndOfLineAddition(e)?this._document.insertText(e.fText,e.fStartLine,e.fStartColumn+1):this._isEndOfLineDeletion(e)?this._document.replaceText(e.fText,e.fStartLine,e.fStartColumn,e.fEndLine+1,1):
this._document.replaceText(e.fText,e.fStartLine,e.fStartColumn,e.fEndLine,e.fEndColumn+1)},_isEndOfLineAddition:function(e){return e.fStartColumn>e.fEndColumn&&e.fStartLine===e.fEndLine||e.fStartLine>e.fEndLine},_isEndOfLineDeletion:function(e){var d=this._document.getLineText(e.fEndLine);return e.fEndColumn===d.length+1},isAutoFixAvailable:function(){return!this._document.isReadOnly()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayerProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./AlertMessageLayer"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.alert.model","rtc.internaldocument"]}},createInstance:function(e,d){return new g(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/AlertMessageLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/language/matlab/alert/AlertTypeEnum",
"MW/rtc/plugins/messagebar/MessageBarLayer"],function(h,f,g,e,d){return h(d,{_ALERT_LAYER:"alertLayer",_ERROR:"errorMarker",_WARNING:"warningMarker",constructor:function(c,b){this._alertModel=c;this._internalDocument=b;this._handles=[];this._handles.push(g.after(this._alertModel,"onModelChanged",f.hitch(this,"_updateMessages")));this._handles.push(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_updateMessages")))},getLayerName:function(){return this._ALERT_LAYER},_updateMessages:function(){this.clearLayer(this._ALERT_LAYER);
this._alertModel.getAlerts().forEach(f.hitch(this,function(c){if(c.position.isValid()){var b=c.position.getLineColumn(),a=b.line,b=b.column;c.type===e.ERROR?this.addMessage(this._ALERT_LAYER,this._ERROR,null,!0,a,b):this.addMessage(this._ALERT_LAYER,this._WARNING,null,!1,a,b)}}));this.updateLayer()},destroy:function(){this._handles.forEach(function(c){c.remove()})}})})},"MW/rtc/plugins/messagebar/MessageBarLayer":function(){define(["dojo/_base/declare"],function(h){return h(null,{getLayerName:function(){throw Error("Unimplemented API: MW.rtc.plugins.messagebar.MessageBarLayer.getLayerName");
},addMessage:function(f,g,e,d,c,b){},clearLayer:function(f){},updateLayer:function(){},onTooltipClose:function(){}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./CodeAnalyzerMessageLayer"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.code.codeanalyzermodel","rtc.code.codeanalyzerautofix",
"rtc.hyperlinkservice"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codeanalyzer/messagebar/CodeAnalyzerMessageLayer":function(){define("dojo/_base/declare dojo/_base/lang dijit/registry dojo/aspect dojo/query MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/CodeAnalyzerTooltipContent MW/rtc/plugins/messagebar/MessageBarLayer".split(" "),function(h,f,g,e,d,c,b){return h(b,{_CODE_ANALYZER_LAYER:"codeAnalyzerLayer",
_ERROR:"errorMarker",_WARNING:"warningMarker",_TIMER_LENGTH:900,constructor:function(a,b,c,d){this._codeAnalyzerModel=b;this._codeAnalyzerAutoFix=c;this._hyperlinkService=d;this._timer=null;this._layerIsUpdating=!1;this._handles=[];this._handles.push(e.after(this._codeAnalyzerModel,"onModelChange",f.hitch(this,"_updateMessages")));this._handles.push(e.after(a,"onChange",f.hitch(this,"_handleDocumentChange")))},getLayerName:function(){return this._CODE_ANALYZER_LAYER},_handleDocumentChange:function(){this.onTooltipClose()},
_updateMessages:function(){this._resetTimeout();this._layerIsUpdating=!0;this._timer=setTimeout(f.hitch(this,function(a){this.clearLayer(this._CODE_ANALYZER_LAYER);this._codeAnalyzerModel.getAllMessages().forEach(f.hitch(this,function(a){var b=a.range.start.row+1,d=a.range.start.column+1,e={messageInfo:a,hyperlinkService:this._hyperlinkService,callback:f.hitch(this,function(a){this._codeAnalyzerAutoFix.fixLine(a);this.onTooltipClose()})},g=f.hitch(this,function(){var a=new c(e);this._updateAutofixButtonState(a);
return a});2<=a.severity?this.addMessage(this._CODE_ANALYZER_LAYER,this._ERROR,g,!0,b,d):this.addMessage(this._CODE_ANALYZER_LAYER,this._WARNING,g,!1,b,d)}));this._layerIsUpdating=!1;this.updateLayer()}),this._TIMER_LENGTH)},_resetTimeout:function(){this._timer&&clearTimeout(this._timer)},_updateAutofixButtonState:function(a){(a=g.getEnclosingWidget(d(".tooltipInlineButton.autoFixButton",a.domNode)[0]))&&a.set("disabled",!this._codeAnalyzerModel.isModelUpToDate()||this._layerIsUpdating)},destroy:function(){this._resetTimeout();
this._handles.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.document rtc.cursor rtc.actionservice rtc.code.codingui.view rtc.code.codingui.eventbus rtc.code.codingui.contextmanager rtc.code.codingui.requesthandler rtc.embeddedoutputs.statehandler rtc.view rtc.focusservice rtc.code.codingui.helpicon".split(" ")}},
createInstance:function(e,d,c,b,a,f,h,m,q,n,p){return new g(e,d,c,b,a,f,h,m,q,n,p)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIActionHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys mw-messageservice/MessageService ./CodingUIActivities ./CodingUIContextEvents ./utilities/CodingUIActionHandlerUtilities ./utilities/CodingUIWidgetUtilities".split(" "),function(h,f,g,e,d,c,b,a,k){return h(null,{NAMEVALUE_PAIR_SEPERATOR:",",
_METADATA_ARGUMENT_KIND_NAME:"name",_METADATA_CALLING_SYNTAX_COMMAND:"command",constructor:function(a,b,c,d,g,h,k,t,u,v,w){this._document=a;this._cursor=b;this._actionService=c;this._uiView=d;this._uiViewEventBus=g;this._contextManager=h;this._requestHandler=k;this._stateHandler=t;this._rtcView=u;this._focusService=v;this._helpIcon=w;this._aspectHandles=[];this._actions=[{id:"codingui_tab",enabled:!0,key:"tab",callback:f.hitch(this,"_complete",{keyCode:e.TAB})},{id:"codingui_escape",enabled:!0,key:"escape",
callback:f.hitch(this,"_escape",{keyCode:e.ESCAPE})},{id:"codingui_enter",enabled:!0,key:"enter",callback:f.hitch(this,"_select")},{id:"codingui_up",enabled:!0,key:"up",callback:f.hitch(this,"_navigate",{keyCode:e.UP_ARROW})},{id:"codingui_down",enabled:!0,key:"down",callback:f.hitch(this,"_navigate",{keyCode:e.DOWN_ARROW})},{id:"codingui_open_signature_dropdown",enabled:!0,key:"ctrl_down",platformKey:{mac:"meta_down"},callback:f.hitch(this,"_navigate",{keyCode:e.DOWN_ARROW,ctrlKey:!0,metaKey:!0})},
{id:"codingui_right",enabled:!0,key:"right",callback:f.hitch(this,"_rightNavigate",{keyCode:e.RIGHT_ARROW})},{id:"rtc_codingui_move_left_arg",enabled:!0,key:"ctrl_left",platformKey:{mac:"meta_left"},callback:f.hitch(this,"_navigate",{keyCode:e.LEFT_ARROW,ctrlKey:!0,metaKey:!0})},{id:"rtc_codingui_move_right_arg",enabled:!0,key:"ctrl_right",platformKey:{mac:"meta_right"},callback:f.hitch(this,"_navigate",{keyCode:e.RIGHT_ARROW,ctrlKey:!0,metaKey:!0})},{id:"codingui_pageup",enabled:!0,key:"pageup",
callback:f.hitch(this,"_navigate",{keyCode:e.PAGE_UP})},{id:"codingui_pagedown",enabled:!0,key:"pagedown",callback:f.hitch(this,"_navigate",{keyCode:e.PAGE_DOWN})},{id:"codingui_show_widget",enabled:!0,key:"ctrl_f1",platformKey:{mac:"ctrl_f1"},callback:f.hitch(this,"_toggleView")}];c.loadActions(this._actions);this._setListeners();this._isRightArrowQueued=this._isTabQueued=!1;this._inFocus=!0},setEnabled:function(a){a&&0===this._aspectHandles.length?this._setListeners():a||this.destroy();for(var b=
0;b<this._actions.length;b++)this._actionService.updateAction(this._actions[b].id,{enabled:a})},_setListeners:function(){this._aspectHandles=[g.after(this._uiViewEventBus,"onCompleteText",f.hitch(this,"completeText"),!0),g.after(this._uiViewEventBus,"onSelectBounds",f.hitch(this,"_selectBoundsRequest"),!0),g.after(this._uiViewEventBus,"onRequestHelp",f.hitch(this,"_requestHelp"),!0),g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0),g.after(this._focusService,"onBlur",
f.hitch(this,"_handleBlur"),!0),g.after(this._focusService,"onFocus",f.hitch(this,"_handleFocus")),g.after(this._contextManager,"onContextUpdated",f.hitch(this,"_handleOnContextUpdated"),!0)]},_handleOnContextUpdated:function(a){if(a===b.CONTEXT_RESET||a===b.CONTEXT_SWITCHED)this._fulfilQueuedAction(),this._isRightArrowQueued=this._isTabQueued=!1},_fulfilQueuedAction:function(){this._isTabQueued?this._complete({keyCode:e.TAB})||this._document.insertTab():this._isRightArrowQueued&&(this._rightNavigate({keyCode:e.RIGHT_ARROW})||
this._cursor.movePosition(11))},_stateChangeListener:function(a){switch(a){case this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED:this._closeView()}},completeText:function(b,d){if(!this._requestHandler.hasPendingRequest()){var e=this._contextManager.getContext();if(e&&!this._contextManager.isContextCompleted()){this._contextManager.setContextToCompleted();var f=e.currentBounds,g=e.position.getLineColumn().line,h=!1,k=e.metaData,t,u,v=k.getPresentingSignature();v&&(t=this._isCommaRequired(d),
u=v.callingSyntax===this._METADATA_CALLING_SYNTAX_COMMAND);f=this._getReplacementBounds(f,g);t&&!u&&(t=this._document.getLineText(g).substr(f.right-1),/^\s*,/.test(t)||(b+=this.NAMEVALUE_PAIR_SEPERATOR,h=!0));f=a.updateBoundsForFolderAndMessageId(k,f,b);this._document.replaceText(b,g,f.left,g,f.right);!h&&(!k.isFileOrFolderName()&&!k.isMessageId())&&(e.widget.set("showWidgets",!1),this._requestHandler.request(c.COMPLETE))}}},_getReplacementBounds:function(a,b){var c={left:a.left,right:a.right};if(this._cursor.hasSelection()){var d=
this._cursor.getSelectionLineColumn();if(d.start.line!==d.end.line)return c;var e=d.start.column,d=d.end.column;e<d?(c.left=e,c.right=d):(c.left=d,c.right=e);e=this._document.getTextCharacters(b-1,c.right-1,1);if("'"===e||'"'===e)c.left--,c.right++}return c},_selectBoundsRequest:function(a){var b=this._contextManager.getContext();b&&(this._selectBounds(a,b),this._requestHandler.request(c.ACTIVE_REQUEST,{line:a.endLine,column:a.right}))},_selectBounds:function(a,b){var c=b.position.getLineColumn().column,
d=a.left,e=a.right,f=a.startLine,g=a.endLine,h={start:{line:f,column:d},end:{line:g,column:e}},k=this._cursor.hasSelection()&&this._cursor.getSelectionLineColumn();if((!k||!(JSON.stringify(k)===JSON.stringify(h)||a.startLine===k.start.line&&(a.left===k.start.column||a.left===k.end.column)))&&!(d===c&&d===e))this._rtcView.scrollLineColumnIntoView(f,d),this._cursor.setSelectionLineColumn(f,d,g,e)},_requestHelp:function(){var a=this._contextManager.getContext();if(a){var b=a.widget.domNode.getBoundingClientRect();
if(a=a.metaData.getFunctionName()){var c=this._rtcView.getCoordinateForPosition(this._cursor.position),b={currentLineCode:this._cursor.getNode().rootContainer().getText(),caretX:b.left+b.width+100,caretY:b.top,lineHeight:c.height,endCaretPosition:this._cursor.getPosition().column};this._helpIcon.showInHelpBrowser(a,b)}}},_select:function(){return!this._uiView.isTopViewDisplayed()||!this._contextManager.getContext()?!1:this._navigate({keyCode:e.ENTER})},_complete:function(a){if(this._requestHandler.hasPendingRequest())return a.keyCode===
e.TAB?this._isTabQueued=!0:a.keyCode===e.RIGHT_ARROW&&(this._isRightArrowQueued=!0),!0;a=this._contextManager.getContext();return!a?!1:this._tabKeyHandled(a)?!0:this._uiView.sendEventToTopView({keyCode:e.TAB})},_tabKeyHandled:function(a){var b=a.widget,c=k.getSelectedCompletion(b),b=k.getNumberOfChoices(b),d=this._uiView.isTopViewDisplayed(),e=c===a.code;a=this._cursor.getLineColumn().column===a.currentBounds.right;var f=!1;d&&e?(this._closeView(),f=!0):!d&&(!e&&a&&1===b)&&(this.completeText(c),f=
!0);return f},_escape:function(a){a=this._navigate(a);return!a?this._closeView():a},_navigate:function(a){if(!this._contextManager.getContext())return!1;var b=!1;this._uiView.isTopViewDisplayed()&&(b=this._uiView.sendEventToTopView(a));return b},_rightNavigate:function(a){return this._uiView.isShadowTextViewDisplayed()&&this._uiView.isTopViewDisplayed()?(this._complete(a),!0):!1},_handleBlur:function(){this._inFocus=!1;this._closeView();this._contextManager.reset()},_handleFocus:function(){this._inFocus||
(this._inFocus=!0,this._requestHandler.request(c.SILENT_UPDATE))},_toggleView:function(){return!this._contextManager.getContext()?!1:this._uiView.isTopViewDisplayed()?this._uiView.close():this._uiView.show()},_isCommaRequired:function(a){return a&&a.mwEventData.kind===this._METADATA_ARGUMENT_KIND_NAME},_closeView:function(){return this._uiView.close()},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIActivities":function(){define([],
function(){return{SILENT_UPDATE:1,CURSOR_SELECTION:2,INSERT_DELETE_TEXT:3,ACTIVE_REQUEST:4,COMPLETE:5}})},"MW/rtc/plugins/language/matlab/codingui/CodingUIContextEvents":function(){define([],function(){return{CONTEXT_SWITCHED:1,CONTEXT_RESET:2,LEAVING_RANGE:3,SILENT_RESET:4}})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIActionHandlerUtilities":function(){define([],function(){return{updateBoundsForFolderAndMessageId:function(h,f,g){h=h.getFunctionPresentingArgument();if(!h)return f;
var e=h.value,d=e.length;if(e&&1>=d)return f;e=e.charAt(d-1);if(!("'"===e||'"'===e))return f;g=this._getMatchingChoice(h,g);return!g?f:this._getBoundsForMatchingChoice(g,f)},_getMatchingChoice:function(h,f){if(!h.widgetData)return null;var g=h.widgetData.choices;if(!g)return null;for(var e=0;e<g.length;e++){var d=g[e];if(d.completion===f)return d}return null},_getBoundsForMatchingChoice:function(h,f){var g=h.matchType;if("folder"!==g&&"messageId"!==g)return f;var e=h.completion,d=e.length;if(1>=d)return f;
g=e.charAt(0);e=e.charAt(d-1);("'"===g&&"'"!==e||'"'===g&&'"'!==e)&&f.right--;return f}}})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIWidgetUtilities":function(){define(["dojo/_base/lang","MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes","MW/rtc/plugins/language/matlab/codingui/programmingaids/manifest"],function(h,f,g){return{isSuggestionWidget:function(e){e=e.widgetType;return e===f.COMPLETION||e===f.FILE_NAME},isFunctionAssistantWidget:function(e){return(e=
e.signatures)&&0<e.length},getNumberOfChoices:function(e){return!e?0:e.get("numberOfChoices")},getSelectedCompletion:function(e){if(!e)return null;var d=e.get("value");return d?d:e.get("valueOfFirstChoice")},getCompletionChoices:function(e){return!e?[]:e.get("choices")},createWidget:function(e,d){var c=e.getData(),b=null,a=c.signatures,k=c.shared;if(a&&0<a.length)k=d&&!e.isCallingSyntaxObjectOrCell(),b=new g[f.FUNCTION_ASSISTANT]({data:c}),b.set("showHelp",k);else if(a=null,k?a=k:c.widgetType&&(a=
c),a&&g[a.widgetType]&&(c=g[a.widgetType]))b=h.mixin({},a.widgetData),b=new c(b);return b}}})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes":function(){define({FUNCTION_ASSISTANT:"functionAssistant",COMPLETION:"completion",FILE_NAME:"filename",FOLDER_NAME:"foldername",SCALAR:"scalar"})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/manifest":function(){define(["dojo/_base/lang","MW/rtc/plugins/language/matlab/codingui/programmingaids/atomicManifest","MW/rtc/plugins/language/matlab/codingui/programmingaids/widgets/FunctionAssistant",
"MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes"],function(h,f,g,e){var d={};d[e.FUNCTION_ASSISTANT]=g;h.mixin(d,f);return d})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/atomicManifest":function(){define(["MW/rtc/plugins/language/matlab/codingui/widgets/Completion","MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes"],function(h,f){var g={};g[f.FILE_NAME]=h;g[f.FOLDER_NAME]=h;g[f.COMPLETION]=h;g[f.SCALAR]=h;return g})},"MW/rtc/plugins/language/matlab/codingui/widgets/Completion":function(){define("dojo/_base/declare dojo/_base/lang dojo/keys dojo/on dijit/_WidgetBase MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility".split(" "),
function(h,f,g,e,d,c){function b(a,b){var c=null,d=a.parentNode.children,e=d.length,f=null,g;for(g=0;g<e;g+=1)if(d[g]===a){f=g;break}null!==f&&(c=0<b?d[Math.min(e-1,f+b)]:d[Math.max(0,f+b)]);return c}var a=["mwCompletion__choiceContainer__choice--hover","mwCompletion__choiceContainer__choice--selected"];h=h(d,{baseClass:"mwCompletion",presenting:!1,attachedAt:"none",value:"",constructor:function(){this.choices=[];this._choiceClass="mwCompletion__choiceContainer__choice--hover"},buildRendering:function(){this.inherited(arguments);
this.completionContainer=c.buildNode("div",{className:"choiceContainer",parent:this.domNode},"mwCompletion")},postCreate:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","refuse");this.on("mouseover",f.hitch(this,this._handleMouseOver));this.own(e(this.completionContainer,"scroll",f.hitch(this,this._handleScroll)));this.on("click",f.hitch(this,this._handleClick))},_handleMouseOver:function(a){var b;a=a.target;!a.classList.contains("mwCompletion")&&!a.classList.contains("mwCompletion__choiceContainer")&&
(b=a.classList.contains("mwCompletion__choiceContainer__choice")?a:a.parentNode,b.classList.contains("mwCompletion__choiceContainer__choice--hover")||(b=b.getAttribute("data-completion"),this._choiceClass="mwCompletion__choiceContainer__choice--hover",this.set("value",b)),this._hideExistingTooltip(),(a.classList.contains("mwCompletion__choiceContainer__choice__purpose")||a.classList.contains("mwCompletion__choiceContainer__choice__text"))&&this._createTooltip(a))},_hideExistingTooltip:function(){var a=
this.domNode.querySelector(".mwCompletion__choiceContainer__choice__purpose--showTooltip");a&&a.classList.remove("mwCompletion__choiceContainer__choice__purpose--showTooltip");(a=this.domNode.querySelector(".mwCompletion__choiceContainer__choice__text--showTooltip"))&&a.classList.remove("mwCompletion__choiceContainer__choice__text--showTooltip")},_createTooltip:function(a){if(a.offsetWidth<a.scrollWidth){var b,d;b=a.classList.contains("mwCompletion__choiceContainer__choice__purpose")?"mwCompletion__choiceContainer__choice__purpose":
"mwCompletion__choiceContainer__choice__text";d=a.classList.contains("mwCompletion__choiceContainer__choice__purpose")?"purposeTooltip":"choiceTooltip";a.classList.add(b+"--showTooltip");0===a.children.length?(b=a.textContent,a=c.buildNode("span",{className:d,text:b,parent:a},"mwCompletion")):a=a.children[0];d=this.domNode.querySelector(".mwCompletion__choiceContainer__choice--hover");b=this.completionContainer.getBoundingClientRect().top;d=d.getBoundingClientRect().top-b;a.style.top=d+"px"}},_handleScroll:function(){this._hideExistingTooltip()},
_handleClick:function(){this._triggerChangeEvent(this.get("value"),this.get("value"))},_triggerChangeEvent:function(a,b){this.emit("change",{mwEventData:{propertyName:"value",oldValue:a,newValue:b}})},_triggerSelectEvent:function(a,b){this.emit("select",{mwEventData:{propertyName:"value",oldValue:a,newValue:b}})},_removeChoiceClasses:function(b){a.forEach(function(a){b.classList.remove(a)})},_setValueAttr:function(a){if(void 0===a)throw Error("Invalid Value. Value can only be a string");var b=this._getChoiceNode(this.get("value")),
c="";b&&(c=b.getAttribute("data-completion"),this._removeChoiceClasses(b));if(""===a)this._triggerSelectEvent(c,"");else if(b=this._getChoiceNode(a)){b.classList.add(this._choiceClass);var d=b.getAttribute("data-completion");this._triggerSelectEvent(c,d);var c=this.completionContainer,b=b.getBoundingClientRect(),d=c.getBoundingClientRect(),e=b.bottom>d.bottom;b.top<d.top?c.scrollTop-=d.top-b.top+1:e&&(c.scrollTop+=b.bottom-d.bottom+1)}this._set("value",a)},_setPresentingAttr:function(a){a?this.domNode.classList.add("mwCompletion--presenting"):
this.domNode.classList.remove("mwCompletion--presenting");this._set("presenting",a)},_setAttachedAtAttr:function(a){-1!==["none","top","bottom"].indexOf(a)&&(this.domNode.classList.remove("mwCompletion--top"),this.domNode.classList.remove("mwCompletion--bottom"),"top"===a?this.domNode.classList.add("mwCompletion--top"):"bottom"===a&&this.domNode.classList.add("mwCompletion--bottom"),this._set("attachedAt",a))},_setNumberOfChoicesAttr:function(){throw Error("numberOfChoices is a read-only property!");
},_getNumberOfChoicesAttr:function(){return this.domNode.querySelectorAll(".mwCompletion__choiceContainer__choice").length},_setValueOfFirstChoiceAttr:function(){throw Error("valueOfFirstChoice is a read-only property!");},_getValueOfFirstChoiceAttr:function(){var a=this.completionContainer.firstChild,b=null;a&&(b=a.getAttribute("data-completion"));return b},_setAlignmentXOffsetAttr:function(){throw Error("alignmentXOffset is a read-only property!");},_getAlignmentXOffsetAttr:function(){var a=this.completionContainer.firstChild,
b=0;if(a&&(a=a.querySelector(".mwCompletion__choiceContainer__choice__text")))b=a.getBoundingClientRect().left,a=this.domNode.getBoundingClientRect().left,b-=a;return b},_setChoicesAttr:function(a){for(;this.completionContainer.firstChild;)this.completionContainer.removeChild(this.completionContainer.firstChild);var b=!0;a.forEach(function(a){var d=c.buildNode("div",{className:"choice",parent:this.completionContainer},"mwCompletion");this.renderItem(d,a)||(b=!1);d.setAttribute("data-completion",a.completion)},
this);b?this.domNode.classList.add("mwCompletion--hideIcons"):this.domNode.classList.remove("mwCompletion--hideIcons");this.domNode.style.display=0===a.length?"none":null;this._set("choices",a)},renderItem:function(a,b){var d=!0;b.matchType&&"unknown"!==b.matchType&&("mFile"===b.matchType?b.matchType="function":"pathItem"===b.matchType&&(b.matchType="filename"),d=!1);b.separated&&a.classList.add("mwCompletion__choiceContainer__choice--separated");c.buildNode("div",{className:"icon",parent:a},"mwCompletion").classList.add("mwCompletion__icon--"+
b.matchType);var e=b.hasOwnProperty("displayString")?b.displayString:b.completion;c.buildNode("div",{className:"text",text:e,parent:a},"mwCompletion");c.buildNode("div",{className:"purpose",text:b.purpose,parent:a},"mwCompletion");return d},navigate:function(a){var c=this._getChoiceNode(this.get("value")),d,e=!1;switch(a.keyCode){case g.DOWN_ARROW:if(c){var f;c.nextSibling&&(f=c.nextSibling);d=f}else d=this.completionContainer.firstChild;e=!0;break;case g.UP_ARROW:if(c){var h;c.previousSibling&&(h=
c.previousSibling);d=h;e=!0}break;case g.HOME:d=this.completionContainer.firstChild;break;case g.END:d=this.completionContainer.lastChild;break;case g.PAGE_DOWN:d=b(c,7);break;case g.PAGE_UP:d=b(c,-7);break;case g.TAB:e=c?c:this.completionContainer.firstChild;this._triggerChangeEvent(this.get("value"),e.getAttribute("data-completion"));e=!0;break;case g.ENTER:c&&(this._triggerChangeEvent(this.get("value"),this.get("value")),e=!0)}void 0!==d&&(d=d.getAttribute("data-completion"),e=!0,this._choiceClass=
"mwCompletion__choiceContainer__choice--selected",this.set("value",d),this._choiceClass="mwCompletion__choiceContainer__choice--hover");return e},_getChoiceNode:function(a){for(var b=null,c=this.completionContainer.children.length,d=0;d<c;d++)if(this.completionContainer.children[d].getAttribute("data-completion")===a){b=this.completionContainer.children[d];break}return b},startup:function(){this.inherited(arguments)}});h.BASE_CLASS="mwCompletion";h.CHOICE_CLASS="mwCompletion__choiceContainer__choice";
h.SELECTED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--selected";h.HOVER_SELECTED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--hover";h.CHOICE_TEXT_CLASS="mwCompletion__choiceContainer__choice__text";h.CHOICE_TOOLTIP_CLASS="mwCompletion__choiceContainer__choice__text__choiceTooltip";h.PURPOSE_CLASS="mwCompletion__choiceContainer__choice__purpose";h.PURPOSE_TOOLTIP_CLASS="mwCompletion__choiceContainer__choice__purpose__purposeTooltip";h.SEPARATED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--separated";
h.HIDE_ICON_CLASS="mwCompletion--hideIcons";h.PRESENTING_CLASS="mwCompletion--presenting";h.BOTTOM_ATTACHED_CLASS="mwCompletion--bottom";h.TOP_ATTACHED_CLASS="mwCompletion--top";return h})},"MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility":function(){define([],function(){return{buildNode:function(h,f,g){f=f||{};var e=document.createElement(h),d="";f.parent&&!f.useOwnClass?d=f.parent.classList[0]:f.useOwnClass||(d=g);f.className&&(""===d?e.classList.add(f.className):e.classList.add(d+
"__"+f.className));f.classModifiers&&f.classModifiers.forEach(function(c){""===d?e.classList.add(f.className+"--"+c):e.classList.add(d+"__"+f.className+"--"+c)},this);f.text&&(e.textContent=f.text);f.parent&&f.parent.appendChild(e);f.title&&e.setAttribute("title",f.title);return e}}})},"MW/rtc/plugins/language/matlab/codingui/programmingaids/widgets/FunctionAssistant":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/keys dojo/on dojo/string dijit/registry dijit/_WidgetBase MW/rtc/plugins/language/matlab/codingui/programmingaids/atomicManifest MW/rtc/plugins/language/matlab/codingui/programmingaids/WidgetTypes MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility dojo/i18n!l10n/nls/tabcompletion".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){h=h(a,{baseClass:"mwFunctionAssistant",showWidgets:!0,showSignatures:!1,position:"bottom",showHelp:!0,constructor:function(){this.data={signatures:[]}},buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("data-focus","refuse");this._createChildDomNodes()},_setShowSignaturesAttr:function(a){if(a){if(1<this._signatureCompletion.get("numberOfChoices")){this._previousSignature=this._currentSignature;this.domNode.classList.add("mwFunctionAssistant--showSignatures");
var b=this._indexOfSignature(this._currentSignature);-1<b&&this._signatureCompletion.set("value",b+"");this.emit("size-change",{});this._set("showSignatures",a)}}else this.domNode.classList.remove("mwFunctionAssistant--showSignatures"),this.emit("size-change",{}),this._set("showSignatures",a)},_setPositionAttr:function(a){this.domNode.classList.remove(this.baseClass+"--"+this.position);this.domNode.classList.add(this.baseClass+"--"+a);this.position!==a&&this._set("position",a)},_setShowWidgetsAttr:function(a){a?
this.domNode.classList.remove("mwFunctionAssistant--widgetsHidden"):this.domNode.classList.add("mwFunctionAssistant--widgetsHidden");this._set("showWidgets",a)},_setValueAttr:function(){throw Error("value is a read-only property!");},_getValueAttr:function(){var a="",c=this._signatureContainer.querySelector(".mwCompletion__choiceContainer__choice--selected"),d=this._signatureContainer.querySelector(".mwCompletion__choiceContainer__choice--hover");(c=c?c:d)&&(a=b.getEnclosingWidget(c).get("value"));
return a},_setNumberOfChoicesAttr:function(){throw Error("numberOfChoices is a read-only property!");},_getNumberOfChoicesAttr:function(){var a=0,b=this._signatureContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");b&&(a=b.querySelectorAll(".mwCompletion__choiceContainer__choice").length);return a},_setAlignmentXOffsetAttr:function(){throw Error("alignmentXOffset is a read-only property!");},_getAlignmentXOffsetAttr:function(){var a=this._argumentContainer.getBoundingClientRect().left,
b=this.domNode.getBoundingClientRect().left;return a-b},_setValueOfFirstChoiceAttr:function(){throw Error("valueOfFirstChoice is a read-only property!");},_getValueOfFirstChoiceAttr:function(){var a=this.domNode.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current"),b=null;a.widget&&(a=a.widget.completionContainer.firstChild)&&(b=a.getAttribute("data-completion"));return b},_setDataAttr:function(a){this._signaturesBeforePromotion=JSON.parse(JSON.stringify(a.signatures));
var b=this._sortPromotedSignatures(a);this._set("data",b);this.data.signatures&&0<this.data.signatures.length&&(this._setCurrentSignatureIndex(),2>this.data.signatures.length?this.domNode.classList.add("mwFunctionAssistant--noSignatureCompletions"):this.domNode.classList.remove("mwFunctionAssistant--noSignatureCompletions"));this._setAppropriateSignature();0!==this.data.signatures.length&&(this._buildArgumentContainer(),this._setTotalSignaturesNode(a.signatures),this._buildSignatureCompletion(a.signatures));
this.domNode.style.display=0===a.signatures.length?"none":null;this._dropDownContainer.style.display=1===a.signatures.length?"none":null},_setShowHelpAttr:function(a){a?this.domNode.classList.add("mwFunctionAssistant--helpAvailable"):this.domNode.classList.remove("mwFunctionAssistant--helpAvailable");this._set("showHelp",a)},postCreate:function(){this.inherited(arguments);this._hookupDomNodeListeners()},_createChildDomNodes:function(){this._signatureContainer=m.buildNode("div",{className:"signatureContainer",
parent:this.domNode},"mwFunctionAssistant");this._createHelpNode();this._argumentContainer=m.buildNode("div",{className:"argumentContainer",parent:this._signatureContainer},"mwFunctionAssistant");this._createDropDownNode()},_createHelpNode:function(){this._helpContainer=m.buildNode("div",{className:"helpContainer",parent:this._signatureContainer,title:q.help},"mwFunctionAssistant");this._helpNode=m.buildNode("div",{parent:this._helpContainer,className:"help"},"mwFunctionAssistant")},_createDropDownNode:function(){var a=
g("mac")?q.moreSignatures+" (\u2318\u2193)":q.moreSignatures+" (Ctrl + Down)";this._dropDownContainer=m.buildNode("div",{className:"dropDownContainer",parent:this._signatureContainer,title:a},"mwFunctionAssistant");this._currentSignatureIndexNode=m.buildNode("div",{className:"currentSignatureIndex",parent:this._dropDownContainer},"mwFunctionAssistant");m.buildNode("div",{className:"signatureLabel",parent:this._dropDownContainer,text:"of"},"mwFunctionAssistant");this._totalSignaturesNode=m.buildNode("div",
{className:"totalSignatures",parent:this._dropDownContainer},"mwFunctionAssistant");m.buildNode("div",{className:"dropDown",parent:this._dropDownContainer},"mwFunctionAssistant")},_hookupDomNodeListeners:function(){this._handleDocumentBodyClick=f.hitch(this,function(a){this.domNode.classList.contains("mwFunctionAssistant--showSignatures")&&!this._dropDownContainer.contains(a.target)&&this.set("showSignatures",!1)});document.body.addEventListener("click",this._handleDocumentBodyClick,!0);this.domNode.addEventListener("change",
this._handleChange.bind(this));this.domNode.addEventListener("select",this._handleSelect.bind(this));this.domNode.addEventListener("click",this._handleClick.bind(this));this.domNode.addEventListener("mouseover",this._handleMouseOver.bind(this));this.domNode.addEventListener("mouseout",this._handleMouseOut.bind(this))},_handleChange:function(a){var c=b.getEnclosingWidget(a.target);c===this._signatureCompletion?a.mwEventData.type="signatureChange":c&&c._argumentNode&&(a.mwEventData.kind=c._argumentNode.kind,
this._findOriginalSignature(c))},_handleSelect:function(a){b.getEnclosingWidget(a.target)===this._signatureCompletion&&(a.stopImmediatePropagation(),a.stopPropagation())},_handleClick:function(a){var b=a.target;if(b===this._helpNode)this.emit("help");else if(this._dropDownContainer.contains(b))this._toggleSignatureCompletion();else if(b.classList.contains("leftArrow")||b.classList.contains("rightArrow")){var c=b.classList.contains("leftArrow")?-1:1;a=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");
b=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--present"));c=b.indexOf(a)+c;this._updateCurrentArgumentOnNavigation(a,b[c])}else if(this._argumentContainer.contains(b)&&(a=this._findArgument(a))&&a.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present"))b=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current"),
this._updateCurrentArgumentOnNavigation(b,a)},_handleMouseOver:function(a){this._argumentContainer.contains(a.target)&&(a=this._findArgument(a))&&this.emit("argument-over",{mwEventData:{argumentName:a.name,bounds:a.bounds}})},_handleMouseOut:function(a){this._argumentContainer.contains(a.target)&&(a=this._findArgument(a))&&this.emit("argument-out",{mwEventData:{argumentName:a.name,bounds:a.bounds}})},_findOriginalSignature:function(a){var b=a.domNode.parentNode.parentNode,b=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).indexOf(b),
c=a.get("value")?a.get("value"):a.get("valueOfFirstChoice");a=this.data.signatures[this._currentSignatureIndex].inputArguments[b];if(void 0!==a.widgetData){var d;a.widgetData.choices.some(function(a){if(a.completion===c)return d=a,!0});if(d&&0<=d.originalSignature){a=this._signaturesBeforePromotion[d.originalSignature];for(var e,b=0;b<this.data.signatures.length;b++)if(this._isSameArgumentArray(a.inputArguments,this.data.signatures[b].inputArguments)){e=b;break}e!==this._currentSignatureIndex&&(this._currentSignature=
this.data.signatures[e].inputArguments)}}},_setCurrentSignatureIndex:function(){for(var a=this.data.signatures,b=null,c=0;c<a.length;c++)if(0!==a[c].inputArguments.length){b=c;break}this._currentSignatureIndex=b},_setAppropriateSignature:function(){if(this._currentSignature)for(var a=0;a<this.data.signatures.length;a++)if(this._isSameArgumentArray(this._currentSignature,this.data.signatures[a].inputArguments)){this._currentSignatureIndex=a;break}if(!(2>this.data.signatures.length)&&(a=this._findCurrentArgumentIndex(),
-1!==a)){var b=this.data.signatures[this._currentSignatureIndex].inputArguments[a];b&&b.value&&(b=b.value,0!==b.length&&(b&&"''"!==b)&&(b=b.replace(/'/g,""),a=this._findMatchingSignature(a,b),this._currentSignatureIndex=-1==a?this._currentSignatureIndex:a))}},_isArgumentMatching:function(a,b,c){if((a=this.data.signatures[a].inputArguments[b])&&a.widgetData&&a.widgetData.choices&&0!==a.widgetData.choices.length){a=a.widgetData.choices;c=c.toLowerCase();for(b=0;b<a.length;b++){if(a[b].displayString){var d=
a[b].displayString;0<=c.lastIndexOf("\\")&&c.lastIndexOf("\\")<c.length?c=c.substring(c.lastIndexOf("\\")+1):0<=c.lastIndexOf("/")&&c.lastIndexOf("/")<c.length&&(c=c.substring(c.lastIndexOf("/")+1))}else d=a[b].completion;d=d.replace(/'/g,"");d=d.toLowerCase();if(0===d.indexOf(c))return!0}}return!1},_findMatchingSignature:function(a,b){if(this._isArgumentMatching(this._currentSignatureIndex,a,b))return this._currentSignatureIndex;for(var c=0;c<this.data.signatures.length;c++)if(c!==this._currentSignatureIndex&&
this._isArgumentMatching(c,a,b))return c;return-1},_findCurrentArgumentIndex:function(){var a=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");return Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).indexOf(a)},_findArgument:function(a){var b=null;a.target.parentNode.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument")?
b=a.target.parentNode:a.target.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument")&&(b=a.target);return b},_isSameArgumentArray:function(a,b){var c=a.map(function(a){return a.name}).sort(),d=b.map(function(a){return a.name}).sort();return c.join(",")===d.join(",")},_indexOfSignature:function(a){for(var b=this.data.signatures,c=b.length,d=-1,e=0;e<c;e+=1)if(this._isSameArgumentArray(a,b[e].inputArguments)){d=e;break}return d},_sortPromotedSignatures:function(a){var b=
[],c=[];a=JSON.parse(JSON.stringify(a));a.signatures.forEach(function(a){"primary"===a.promotion?b.push(a):c.push(a)});a.signatures=b.concat(c);return a},_setCurrentSignatureIndexNode:function(a){0<=a&&(this._currentSignatureIndexNode.textContent=a+1)},_setTotalSignaturesNode:function(a){this._totalSignaturesNode.textContent=a.length},_checkForCommandLineSyntax:function(){return"command"===this.data.signatures[this._currentSignatureIndex].callingSyntax},_checkForObjectSyntax:function(){return"object"===
this.data.signatures[this._currentSignatureIndex].callingSyntax},_checkForCellSyntax:function(){return"cell"===this.data.signatures[this._currentSignatureIndex].callingSyntax},_checkBracketType:function(){var a="(";this._checkForCommandLineSyntax()?a=" ":this._checkForCellSyntax()&&(a="{");return a},_findHeaderText:function(a){var b="";a.purpose?b=a.purpose:"name"===a.kind?b="name-value pairs":"value"===a.kind&&(b=a.name+" value");return b},_buildSignatureCompletion:function(a){this._signatureCompletion&&
this._signatureCompletion.destroyRecursive();a=JSON.parse(JSON.stringify(a));(this._checkForObjectSyntax()||this._checkForCellSyntax())&&a.forEach(function(a){a.inputArguments=Array.prototype.slice.call(a.inputArguments,1)});this._signatureCompletion=new k[l.COMPLETION]({choices:a.map(function(a,b){return{data:a.inputArguments,completion:b+"",functionName:a.functionName}}),renderItem:f.hitch(this,function(a,b){var c=this._checkForCommandLineSyntax();m.buildNode("span",{text:b.functionName,parent:a},
"mwFunctionAssistant");m.buildNode("span",{text:c?" ":"(",parent:a},"mwFunctionAssistant");b.data.forEach(function(b,d){var e=this._prepareClassModifiers(b);if(0<d){var f=this._prepareCommaClassModifiers(e);m.buildNode("span",{parent:a,text:c?" ":",",className:"comma",useOwnClass:!0,classModifiers:f},"mwFunctionAssistant")}m.buildNode("span",{parent:a,text:b.repeatedCount?b.name+b.repeatedCount:b.name,className:"mwFunctionAssistant__signatureCompletion__mwCompletion__choice__argument",useOwnClass:!0,
classModifiers:e})},this);m.buildNode("span",{text:c?" ":")",parent:a},"mwFunctionAssistant")})});this._signatureCompletion.domNode.classList.add("mwFunctionAssistant__signatureCompletion");this._signatureCompletion.placeAt(this.domNode);this._signatureCompletion.startup();this._signatureCompletion.on("change",f.hitch(this,this._handleSignatureChange))},_handleSignatureChange:function(a){this._currentSignatureIndex=parseInt(a.mwEventData.newValue,10);this.set("showSignatures",!1);this._buildArgumentContainer()},
_buildArgumentContainer:function(){this._setCurrentSignatureIndexNode(this._currentSignatureIndex);this._updateCurrentSignature(this.data.signatures[this._currentSignatureIndex].inputArguments);this._buildNavigationArrowsInToolTip();this._setCurrentArgument()},_updateCurrentSignature:function(a){this._currentSignature=a;this._buildCurrentSignature(a)},_updateCurrentArgument:function(a){this._currentArgument=a},_buildCurrentSignature:function(a){var b=a.length;this._cleanupOldDOM();m.buildNode("span",
{text:this.data.signatures[0].functionName,parent:this._argumentContainer},"mwFunctionAssistant");if(0!==b){var c=this._checkBracketType();m.buildNode("span",{text:c,parent:this._argumentContainer},"mwFunctionAssistant");if(this._checkForObjectSyntax()||this._checkForCellSyntax())Array.prototype.splice.call(a,0,1),b-=1;a.forEach(function(a,c){this._buildArgumentsAndWidget(a,c,b)},this)}},_buildArgumentsAndWidget:function(a,b,c){b=this._buildArgument(a,b,c);c=this._buildCorrespondingWidget(a,this.data.shared);
var d=m.buildNode("div",{className:"widgetContainer",parent:b},"mwFunctionAssistant"),e=this._findHeaderText(a),e=this._buildHeaderNode(e,d,b,!!c);c?(c.placeAt(d),c.startup(),c._argumentNode=b,b.widget=c,b.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--hasWidget")):this._buildSubHeadNode(a,e)},_buildHeaderNode:function(a,b,d,e){var f=!1;if(""===a){if(!e){a=q.argumentHeader;var g=a.split("${0}")}f=!0}e=m.buildNode("div",{className:"header",parent:b},"mwFunctionAssistant");
var h=m.buildNode("div",{className:"text",parent:e},"mwFunctionAssistant"),k=m.buildNode("div",{parent:h,useOwnClass:!0,className:"headerValue"},"mwFunctionAssistant");g?(""!==g[0]&&""!==g[1]&&(g.push(g[1]),g[1]=""),g.forEach(function(a){""!==a?m.buildNode("span",{parent:k,text:a,useOwnClass:!0},"mwFunctionAssistant"):m.buildNode("span",{parent:k,text:d.name,useOwnClass:!0,className:"argumentName"},"mwFunctionAssistant")}),a=c.substitute(q.argumentHeader,[d.name])):a&&m.buildNode("span",{parent:k,
text:a,useOwnClass:!0},"mwFunctionAssistant");""===a&&f&&(m.buildNode("span",{parent:k,text:d.name,useOwnClass:!0,className:"argumentName"},"mwFunctionAssistant"),a+=d.name);""!==a?b.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer--headerAvailable"):b.classList.remove("mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer--headerAvailable");b=m.buildNode("div",{parent:h,useOwnClass:!0,className:"optionalDiv"},"mwFunctionAssistant");
21<a.length&&k.setAttribute("title",a);!d.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--required")&&!d.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--value")&&(b.textContent="("+q.optionalArgument+")");return e},_findNavigationTooltipText:function(a,b){var c;switch(b){case "first":c=a?q.nextArgument+" (\u2318\u2192)":q.nextArgument+" (Ctrl + Right)";break;case "middle":c=a?q.nextArgument+" (\u2318\u2192).\n"+q.previousArgument+
" (\u2318\u2190)":q.nextArgument+" (Ctrl + Right).\n"+q.previousArgument+" (Ctrl + Left)";break;case "last":c=a?q.previousArgument+" (\u2318\u2190)":q.previousArgument+" (Ctrl + Left)"}return c},_buildNavigationArrowsInToolTip:function(){var a=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).filter(function(a){return a.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present")}),
b=a.length;1<b&&a.forEach(function(a,c){var d=a.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer__header").firstChild;d.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer__header--hasNavigationArrows");var e;e=0===c?this._findNavigationTooltipText(g("mac"),"first"):c===b-1?this._findNavigationTooltipText(g("mac"),"last"):this._findNavigationTooltipText(g("mac"),"middle");d=m.buildNode("div",{className:"argNavigationContainer",
parent:d,useOwnClass:!0,title:e},"mwFunctionAssistant");0!==c&&m.buildNode("div",{className:"leftArrow",parent:d,useOwnClass:!0},"mwFunctionAssistant");e=m.buildNode("div",{className:"presentingArgIndexContainer",parent:d,useOwnClass:!0,title:e},"mwFunctionAssistant");m.buildNode("div",{className:"currentArg",parent:e,text:c+1,useOwnClass:!0},"mwFunctionAssistant");m.buildNode("div",{className:"argumentLabel",parent:e,text:"of",useOwnClass:!0},"mwFunctionAssistant");m.buildNode("div",{className:"totalArguments",
parent:e,text:b,useOwnClass:!0},"mwFunctionAssistant");c!==b-1&&m.buildNode("div",{className:"rightArrow",parent:d,useOwnClass:!0},"mwFunctionAssistant")},this)},_buildSubHeadNode:function(a,b){if(a.valueSummary){if(26<a.valueSummary.length)var c=a.valueSummary;m.buildNode("div",{className:"valueSummary",parent:b,text:a.valueSummary,title:c},"mwFunctionAssistant")}},_isValueOfTypeString:function(a){var b=!1;0<a.length&&-1!==a.indexOf("'")&&(b=!0);return b},_setCurrentArgument:function(){var a,b=0,
c=!0;a=this.data.signatures[this._currentSignatureIndex].inputArguments.filter(function(a){return"presenting"===a.status});if(0!==a.length){var d=a[b];if(this._currentArgument&&(a.forEach(function(a,c){a.name===this._currentArgument.name&&(b=c)},this),d=a[b],d.widgetData&&d.widgetData.choices&&d.widgetData.choices.length||"none"===d.widgetType))c=!1;a=this._signatureContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--present");var e=Array.prototype.slice.call(this._signatureContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument"));
if(this._isValueOfTypeString(d.value)&&c){var f=!0;"none"===d.widgetType&&(f=!1);c=d.value;c=c.toLowerCase();0===c.indexOf("'")&&(c=c.substring(1));c.lastIndexOf("'")===c.length-1&&(c=c.substring(0,c.lastIndexOf("'")));if(!(""===c||"required"===d.kind||!f))for(d=0;d<a.length;d++)if(a[d].classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--hasWidget")&&(f=e.indexOf(a[d]),this._isArgumentMatching(this._currentSignatureIndex,f,c))){b=d;break}}a=a[b];a.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");
this.moveWidgetIntoView()}},moveWidgetIntoView:function(){var a=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");if(a){var b=a.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer");b&&0>b.getBoundingClientRect().left&&a.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--moveIntoView")}},_cleanupOldDOM:function(){for(;this._argumentContainer.children.length;){var a=
this._argumentContainer.lastChild;this._argumentContainer.removeChild(a);(a=a.widget)&&a.destroy()}},_prepareClassModifiers:function(a){var b=[];"presenting"===a.status&&b.push("present");a.bounds||b.push("future");a.kind&&(b.push(a.kind),"required"!==a.kind&&"value"!==a.kind&&b.push("optional"));return b},_prepareCommaClassModifiers:function(a){var b=[];-1!==a.indexOf("optional")&&(b.push("optional"),-1!==a.indexOf("present")?b.push("present"):-1!==a.indexOf("future")&&b.push("present"));return b},
_buildArgument:function(a,b,c){var d=this._prepareClassModifiers(a);if(0<b){var e=this._prepareCommaClassModifiers(d);m.buildNode("span",{text:this._checkForCommandLineSyntax()?" ":",",parent:this._argumentContainer,className:"comma",useOwnClass:!0,classModifiers:e},"mwFunctionAssistant")}e=a.name;a.repeatedCount&&(e=a.name+a.repeatedCount);e="value"===a.kind?"value":e;d=m.buildNode("div",{parent:this._argumentContainer,className:"argument",classModifiers:d},"mwFunctionAssistant");m.buildNode("span",
{parent:d,text:e,className:"argumentText",useOwnClass:!0});d.status=a.status;d.name=a.originalName?a.originalName:a.name;d.bounds=a.bounds;d.kind=a.kind;a=this._checkBracketType();"("===a?a=")":"{"===a&&(a="}");b===c-1&&m.buildNode("span",{text:a,parent:this._argumentContainer},"mwFunctionAssistant");return d},_buildCorrespondingWidget:function(a,b){var c=null;if(void 0===a.widgetType||"scalar"===a.widgetType)a.widgetType=l.COMPLETION,a.widgetData={choices:[]};if("presenting"===a.status&&(a.widgetData||
b)){var d=k[l.COMPLETION];if(d){var e=a.widgetData?a.widgetData.choices:[];if(b&&b.widgetData&&b.widgetData.choices&&0<b.widgetData.choices.length){var f=b.widgetData.choices.filter(function(a){return!e.some(function(b){return b.completion===a.completion})});0<e.length&&0<f.length&&(f[0].separated=!0);e=e.concat(f)}0<e.length&&(c=new d({choices:e,autoSelect:!1,selectionScope:this._signatureContainer,attachedAt:"bottom",presenting:!0}),c.domNode.classList.add(a.kind))}}return c},_toggleSignatureCompletion:function(){this.set("showSignatures",
!this.get("showSignatures"))},_updateCurrentArgumentOnNavigation:function(a,b){if(a!==b){a.classList.remove("mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");var c=a.widget,d="";c&&(d=c.get("value")?c.get("value"):c.get("valueOfFirstChoice"),c.set("value",""));b.classList.add("mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");var e=b.widget,c="";e&&(c=e.get("valueOfFirstChoice"));e=Array.prototype.slice.call(this.domNode.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")).indexOf(b);
this._updateCurrentArgument(this.data.signatures[this._currentSignatureIndex].inputArguments[e]);this.moveWidgetIntoView();this.emit("argument-change",{mwEventData:{oldValue:d,newValue:c}})}},_signatureCompletionNavigate:function(a){if(-1<[e.UP_ARROW,e.DOWN_ARROW,e.HOME,e.END,e.PAGE_UP,e.PAGE_DOWN].indexOf(a.keyCode))return this._signatureCompletion.navigate(a);if(a.keyCode===e.ENTER)return this._signatureCompletion.navigate(a),this.set("showSignatures",!1),!0;if(a.keyCode===e.ESCAPE)return this.set("showSignatures",
!1),!0},_navigateWithinArgumentCompletion:function(a){var b=this.domNode.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current");if(b.widget)return b.widget.navigate(a)},_navigateBetweenPresentingArguments:function(a){var b=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument")),c=Array.prototype.slice.call(this._argumentContainer.querySelectorAll(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--present")),
d=this._argumentContainer.querySelector(".mwFunctionAssistant__signatureContainer__argumentContainer__argument--current"),f=b.indexOf(d);if(1===c.length)return!1;if((a.metaKey||a.ctrlKey)&&a.keyCode===e.LEFT_ARROW)var g=-1;else if((a.metaKey||a.ctrlKey)&&a.keyCode===e.RIGHT_ARROW)g=1;for(a=f;;){a+=g;if(0>a||a>=b.length)return!1;if(b[a].classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present"))break}(b=b[a])&&(b.classList.contains("mwFunctionAssistant__signatureContainer__argumentContainer__argument--present")&&
a!==f)&&this._updateCurrentArgumentOnNavigation(d,b);return!0},navigate:function(a){if((a.metaKey||a.ctrlKey)&&a.keyCode===e.DOWN_ARROW)return this._toggleSignatureCompletion(),!0;if(this.domNode.classList.contains("mwFunctionAssistant--showSignatures"))return this._signatureCompletionNavigate(a);if(this.showWidgets)return(a.metaKey||a.ctrlKey)&&(a.keyCode===e.LEFT_ARROW||a.keyCode===e.RIGHT_ARROW)?this._navigateBetweenPresentingArguments(a):this._navigateWithinArgumentCompletion(a)},startup:function(){this.inherited(arguments);
this.moveWidgetIntoView()},destroy:function(){for(;this._signatureContainer.firstChild;){var a=this._signatureContainer.firstChild;this._signatureContainer.removeChild(a);(a=a.widget)&&a.destroy()}document.body.removeEventListener("click",this._handleDocumentBodyClick,!0);this.domNode.removeEventListener("change",this._handleChange.bind(this));this.domNode.removeEventListener("select",this._handleSelect.bind(this));this.domNode.removeEventListener("click",this._handleClick.bind(this));this.domNode.removeEventListener("mouseover",
this._handleMouseOver.bind(this));this.domNode.removeEventListener("mouseout",this._handleMouseOut.bind(this));this.inherited(arguments)}});h.BASE_CLASS="mwFunctionAssistant";h.SIGNATURE_CONTAINER_CLASS="mwFunctionAssistant__signatureContainer";h.CURRENT_SIGNATURE_INDEX_CLASS="mwFunctionAssistant__signatureContainer__dropDownContainer__currentSignatureIndex";h.HELP_AVAILABLE_CLASS="mwFunctionAssistant--helpAvailable";h.SIGNATURE_COMPLETION_CLASS="mwFunctionAssistant__signatureCompletion";h.COMPLETION_CLASS=
"mwCompletion";h.CHOICE_CLASS="mwCompletion__choiceContainer__choice";h.SELECTED_CHOICE_CLASS="mwCompletion__choiceContainer__choice--selected";h.SHOW_SIGNATURE_CLASS="mwFunctionAssistant--showSignatures";h.ARGUMENT_CONTAINER_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer";h.ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument";h.PRESENT_ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--present";h.CURRENT_ARGUMENT_CLASS=
"mwFunctionAssistant__signatureContainer__argumentContainer__argument--current";h.WIDGET_CONTAINER_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer";h.HAS_WIDGET_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--hasWidget";h.WIDGETS_HIDDEN_CLASS="mwFunctionAssistant--widgetsHidden";h.MOVE_INTO_VIEW_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--moveIntoView";h.SIGNATURE_COMPLETION_ARGUMENT_CLASS="mwFunctionAssistant__signatureCompletion__mwCompletion__choice__argument";
h.NO_SIGNATURE_COMPLETIONS_CLASS="mwFunctionAssistant--noSignatureCompletions";h.ARGUMENT_HEADER_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument__widgetContainer__header";h.HELP_BUTTON_CLASS="mwFunctionAssistant__signatureContainer__helpContainer";h.DROPDOWN_BUTTON_CLASS="mwFunctionAssistant__signatureContainer__dropDownContainer";h.REQUIRED_ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--required";h.OPTIONAL_ARGUMENT_CLASS="mwFunctionAssistant__signatureContainer__argumentContainer__argument--optional";
return h})},"MW/rtc/plugins/language/matlab/codingui/CodingUIContextManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/codingui/CodingUIContextManager"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cursor","rtc.internaldocument"]}},createInstance:function(e,d){return new g(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIContextManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect ./CodingUIContext ./CodingUIContextEvents ./utilities/CodingUIContextManagerUtilities ./utilities/CodingUIContextUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b){this._cursor=a;this._aspectHandles=[g.after(this._cursor,"onChange",f.hitch(this,"_handleCursorChanged")),g.before(b,"onDocumentReset",f.hitch(this,"reset"))];this._context=null;this._contextDataStack=[]},createContextAndSetup:function(a){this._cleanupOldContext();a=new e(a);this._updateContextAndStack(a);this._setContext(a);this._shouldCacheWidget&&(this._contextDataStack[this._contextDataStack.length-1].widget=a.widget,this._shouldCacheWidget=
!1)},_cleanupOldContext:function(){this._context&&(this._context.position.destroy(),this._context.range.destroy(),this._context=null)},_setContext:function(a){this._context=a;this.onContextUpdated(d.CONTEXT_SWITCHED)},_updateContextAndStack:function(a){var b=c.getPresentingSignature(a);if(b){var d;for(d=this._contextDataStack.length-1;0<=d;d--){var e=this._contextDataStack[d];if(c.isNewContextSameAsOldContext(a,b,e)){a.widget=e.widget;break}}if(-1===d)this._addContextDataToStack(a,b);else for(a=this._contextDataStack.length-
1;a>d;a--)this._contextDataStack.pop()}},_addContextDataToStack:function(a,b){var c=a.widget;this._contextDataStack.push({functionName:b.functionName,leftBounds:a.leftMostBounds.left,widget:c});c||(this._shouldCacheWidget=!0)},isWidgetHeld:function(a){return this._contextDataStack.some(function(b){return a===b.widget})},getContext:function(){return this._context},reset:function(){this._clearStack();this._cleanupOldContext();this.onContextUpdated(d.CONTEXT_RESET)},setContextToCompleted:function(){this._context.setCompleted()},
isContextCompleted:function(){return this._context.isCompleted()},onContextUpdated:function(a){},_handleCursorChanged:function(){if(this.getContext()){var a=b.checkLeavingContext(this._context,this._cursor.position);a&&(a===d.LEAVING_RANGE?this._clearLastElementInStack():a===d.SILENT_RESET&&this._clearStack(),a&&(this._cleanupOldContext(),this.onContextUpdated(a)))}},_clearLastElementInStack:function(){var a=this._contextDataStack[this._contextDataStack.length-1];a&&a.widget&&(a.widget.destroy(),
this._contextDataStack.pop())},_clearStack:function(){this._contextDataStack.forEach(function(a){a.widget&&a.widget.destroy()});this._contextDataStack=[]},destroy:function(){this._clearStack();this._cleanupOldContext();this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIContext":function(){define(["mw-utils/Utils","dojo/_base/declare"],function(h,f){return f(null,{constructor:function(f){this.uid=h.generateUuid();this.position=
f.position;this.range=f.range;this.activity=f.activity;this.widget=f.widget;this.metaData=f.metaData;this.completed=!1;this.isWidgetReUsed=f.isWidgetReUsed;this.isStale=!1;this.code=this.metaData.getCode();this.leftMostBounds=this.metaData.getLeftMostBounds(this.position);this.currentBounds=this.metaData.getCurrentBounds(this.position)},setCompleted:function(){this.completed=!0},isCompleted:function(){return this.completed}})})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIContextManagerUtilities":function(){define([],
function(){return{getPresentingSignature:function(h){h=h.metaData;return!h?null:h.getPresentingSignature()},isNewContextSameAsOldContext:function(h,f,g){return!g?!1:f.functionName===g.functionName&&h.leftMostBounds.left===g.leftBounds}}})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIContextUtilities":function(){define(["MW/rtc/model/PositionUtilities","MW/rtc/nodes/OpaqueNode","../CodingUIContextEvents"],function(h,f,g){return{_METADATA_WIDGET_TYPE_PROPERTY:"widgetType",checkLeavingContext:function(e,
d){return this._checkLeavingRange(e,d)||this._isInvalidPosition(d)},_isInvalidPosition:function(e){if(1===e.getLineColumn().column)return g.SILENT_RESET},_checkLeavingRange:function(e,d){return!h.isPositionInRange(d,e.range)?g.LEAVING_RANGE:null},isInSameContext:function(e,d,c){return!d||d.leftMostBounds.left!==e.getLeftMostBounds(c).left||e.hasSignatures()!==d.metaData.hasSignatures()||e.hasOwnProperty(this._METADATA_WIDGET_TYPE_PROPERTY)?!1:!0},getLineColumnForOffsetBounds:function(e,d,c){if(!e)return null;
var b=e.right;e=this.getLineColumnForOffsetPosition(e.left,d,c);d=this.getLineColumnForOffsetPosition(b,d,c);return{startLine:e.line,startColumn:e.column,endLine:d.line,endColumn:d.column}},getLineColumnForOffsetPosition:function(e,d,c){var b=c.getLineColumn(),a=b.line,f=b.column;c=c.getNode().rootContainer();b=c.getTextForPositioning().length;d=d-f+1;var f=d+b,g=0;for(e<d?g=-1:e>f&&(g=1);!(e>=d&&e<=f);){a+=g;c=-1===g?c.previousSibling():c.nextSibling();if(!c)return null;b=c.getTextForPositioning().length;
-1===g?(f=d-1,d=f-b):1===g&&(d=f+1,f=d+b)}return{column:b-(f-e)+1,line:a}},isContextInOpaqueNode:function(e,d){var c=e.currentBounds,b=d.createPositionAtLineColumn(c.startLine-1,c.left-1),c=d.createPositionAtLineColumn(c.endLine-1,c.right-1),a=b.getNode(),g=!1,h=c.getNode();for(h instanceof f&&(g=!0);a!==h;)a instanceof f&&(g=!0),a=a.nextNode();b.destroy();c.destroy();return g}}})},"MW/rtc/plugins/language/matlab/codingui/CodingUIProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/language/matlab/codingui/CodingUI"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.cursor rtc.code.codingui.view rtc.code.codingui.requesthandler rtc.code.codingui.contextmanager rtc.eventhandler rtc.document".split(" ")}},createInstance:function(e,d,c,b,a,f,h){return new g(e,d,c,b,a,f,h)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUI":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants ./CodingUIActivities ./utilities/CodingUIUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b,c,d,e,h,p){this._internalDocument=a;this._cursor=b;this._eventHandler=h;this._document=p;this._uiView=c;this._requestHandler=d;this._contextManager=e;this._aspectHandles=[g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_initialize"))];this._initialized=!1},_initialize:function(){this._initialized||(this._setListeners(),this._initialized=!0)},setEnabled:function(a){a&&0===this._aspectHandles.length?this._setListeners():
a||this.destroy()},_setListeners:function(){this._aspectHandles.push(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"),!0));this._aspectHandles.push(g.after(this._cursor,"onChange",f.hitch(this,"_handleCursorChanged")));this._aspectHandles.push(g.after(this._cursor,"movePosition",f.hitch(this,"_checkAndEmitSelectionEvent")));this._aspectHandles.push(g.after(this._eventHandler,"onMouseUp",f.hitch(this,"_checkAndEmitSelectionEvent")));this._aspectHandles.push(g.after(this._document,
"deleteTextAtCurrentPosition",f.hitch(this,"_handleInsertDeleteText")));this._aspectHandles.push(g.after(this._document,"insertTextAtCurrentPosition",f.hitch(this,"_handleInsertDeleteText")))},_handleDocumentChanged:function(a){if(a&&0<a.length)if(a=a[a.length-1],a.isUndoRedo)this._uiView.close();else switch(a.type){case d.INSERT_BREAK_EVENT:this._requestHandler.request(c.INSERT_DELETE_TEXT);break;case d.FORMAT_CHANGE_EVENT:this._contextManager.reset(),this._requestHandler.request(c.SILENT_UPDATE)}},
_handleInsertDeleteText:function(){this._requestHandler.request(c.INSERT_DELETE_TEXT)},_handleCursorChanged:function(){var a=this._cursor.position.getLineColumn(),d=this._requestHandler.getLastRequestPosition();b.isSamePositionAsLast(a,d)||this._requestHandler.request(c.SILENT_UPDATE,null)},_checkAndEmitSelectionEvent:function(){this._cursor.hasSelection()&&this._requestHandler.request(c.CURSOR_SELECTION)},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=
[]}})})},"MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIUtilities":function(){define([],function(){return{isSamePositionAsLast:function(h,f){return f.line===h.line&&f.column===h.column},isMatlabString:function(h){return"'"===h.slice(0,1)&&"'"===h.slice(-1)||'"'===h.slice(0,1)&&'"'===h.slice(-1)},isArgumentSelected:function(h,f,g){if(!(h.startLine===h.endLine&&f.start.line===f.end.line&&h.startLine===f.start.line))return!1;var e=f.start.column;f=f.end.column;if(e>f){var d=e,e=f;f=d}d=h.startColumn;
h=h.endColumn;return d===e&&h===f||this.isMatlabString(g)&&d+1===e&&h-1===f?!0:!1}}})},"MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cursor","rtc.document","rtc.internaldocument","rtc.code.codingui.contextmanager","rtc.code.codingui.backendservice"]}},createInstance:function(e,
d,c,b,a){return new g(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIRequestHandler":function(){define("dojo/_base/declare dojo/_base/lang mw-utils/Utils MW/rtc/model/CodeUtilities MW/rtc/model/Range ./CodingUIActivities ./CodingUIMetaData ./utilities/CodingUIContextUtilities ./utilities/CodingUIUtilities".split(" "),function(h,f,g,e,d,c,b,a,k){return h(null,{_TIMER:150,_FEATURE_ID:"matlab.code.codingui",constructor:function(a,b,c,d,e){this._cursor=
a;this._document=b;this._internalDocument=c;this._contextManager=d;this._serviceProvider=e;this._lastRequestPosition={};this._lastClientPacket={};this._requestMadeForCurrentPosition=this._isBusy=!1},request:function(a,b){this.stopPendingRequest();this._setLastRequestPosition(this._cursor.getLineColumn());this._isBusy=!0;this._requestTimeout=window.setTimeout(f.hitch(this,"_requestCodingUI",a,b),this._TIMER)},stopPendingRequest:function(){this.hasPendingRequest()&&this._serviceProvider.cancelRequest();
this._requestTimeout&&(window.clearTimeout(this._requestTimeout),this._requestTimeout=null);this._isBusy=!1},hasPendingRequest:function(){return this._isBusy||this._serviceProvider.isBusy()},_setLastRequestPosition:function(a){this._lastRequestPosition={id:g.generateUuid(),line:a.line,column:a.column}},getLastRequestPosition:function(){return this._lastRequestPosition},_requestCodingUI:function(a,b){b=b||this._cursor.getLineColumn();this._setLastRequestPosition(b);if(this._isInvalidPosition(b))this._isBusy=
!1;else{this._lastClientPacket={activity:a,requestId:this._lastRequestPosition.id,position:b,documentState:this._internalDocument.getState()};var c=f.hitch(this,"_handleResponse",this._lastClientPacket),d=this._contextManager.getContext();d&&(d.isStale=!0);this._serviceProvider.requestMetaData(this._FEATURE_ID,c,b)}},_handleResponse:function(c,d){this._isBusy=!1;if(!(c.requestId!==this._lastRequestPosition.id||c.documentState!==this._internalDocument.getState())){var e=new b(d);if(e.hasSuggestion())if(!this._requestMadeForCurrentPosition&&
!this._isSilentUpdate(c.activity)&&this._continuousRequest(c,e))this._requestMadeForCurrentPosition=!0;else{this._requestMadeForCurrentPosition=!1;var f=this._contextManager.getContext(),g,h=this._document.createPositionAtLineColumn(c.position.line-1,c.position.column-1);if(f=a.isInSameContext(e,f,h))g=this._contextManager.getContext().widget;this._contextManager.createContextAndSetup({position:h,range:this._getSignatureBoundsAsRange(e,h),activity:c.activity,widget:g,metaData:e,isWidgetReUsed:f})}else this._contextManager.reset()}},
_getSignatureBoundsAsRange:function(b,c){var e=b.getMetaDataBounds();if(!e)return null;var f=b.getCursorPosition(),g=a.getLineColumnForOffsetPosition(e.left-1,f,c),e=a.getLineColumnForOffsetPosition(e.right-1,f,c);")"===this._document.getTextCharacters(e.line-1,e.column-2,1)&&(e.column-=1);g=this._document.createPositionAtLineColumn(g.line-1,g.column-1);e=this._document.createPositionAtLineColumn(e.line-1,e.column-1,!0);return new d(g,e)},_continuousRequest:function(a,b){var c;c=this._getRequestForSelection(a,
b);if(!c)return!1;this.request(c.activity,c.position);return!0},_getRequestForSelection:function(a,b){if(!this._cursor.hasSelection()||!this._presentingArgumentIsSelected(b))return null;var d=this._cursor.getSelectionLineColumn(),e=d.start.column,d=d.end.column;return{activity:c.ACTIVE_REQUEST,position:{line:a.position.line,column:e>d?e:d}}},_presentingArgumentIsSelected:function(b){var c=b.getFunctionPresentingArgument();if(!c)return!1;b=a.getLineColumnForOffsetBounds(c.bounds,b.getCursorPosition(),
this._cursor.position);var d=this._cursor.getSelectionLineColumn();return k.isArgumentSelected(b,d,c.value)},_isInvalidPosition:function(a){var b=this._internalDocument.getLineNode(a.line-1);return!e.isCodeContainer(b)||1===a.column},_isSilentUpdate:function(a){return a===c.SILENT_UPDATE},destroy:function(){this.stopPendingRequest()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIMetaData":function(){define(["dojo/_base/declare","./programmingaids/WidgetTypes","./utilities/CodingUIContextUtilities"],
function(h,f,g){return h(null,{_METADATA_PRESENTING_STATUS:"presenting",_METADATA_KIND_REQUIRED:"required",_METADATA_WIDGET_TYPE_NONE:"none",_METADATA_CALLING_SYNTAX_OBJECT:"object",_METADATA_CALLING_SYNTAX_COMMAND:"command",_METADATA_CALLING_SYNTAX_CELL:"cell",_METADATA_SIGNATURES_PROPERTY:"signatures",_METADATA_MATCHTYPE_MESSAGE_ID:"messageId",constructor:function(e){this._data=e},_getFirstSignatureWithInputArgs:function(){var e=this._getSignatures();if(!e)return null;var d=null;e.some(function(c){if(c.inputArguments&&
0<c.inputArguments.length)return d=c,!0});return d},_getSignatures:function(){var e=this._data.signatures;if(!e)return null;Array.isArray(e)||(e=[e]);return e},getPresentingArgument:function(){var e=this.getFunctionPresentingArgument();!e&&this._data.widgetType!==this._METADATA_WIDGET_TYPE_NONE&&(e=this._data);return e},getFunctionPresentingArgument:function(){var e=null,d=this._getSignatures();d&&d.some(function(c){if(c.status===this._METADATA_PRESENTING_STATUS)return c.inputArguments.some(function(b){if(b.status===
this._METADATA_PRESENTING_STATUS)return e=b,!0},this)},this);return e},getPresentingSignature:function(){var e=this._getSignatures(),d=null;e&&e.some(function(c){if(c.status===this._METADATA_PRESENTING_STATUS)return d=c,!0},this);return d},getMetaDataBounds:function(){var e=this._getFirstSignatureWithInputArgs(),d,c=0;e?(d=e.bounds,c=e.functionName.length+1):d=this._data.bounds;return d?{left:d.left+c+1,right:d.right+1}:null},getLeftMostBounds:function(e){var d=this._getFirstSignatureWithInputArgs();
if(!d)return this.getCurrentBounds(e);e=d.callingSyntax===this._METADATA_CALLING_SYNTAX_OBJECT||d.callingSyntax===this._METADATA_CALLING_SYNTAX_CELL?this._getArgument(d,1):this._getArgument(d,0);var c=d.bounds.left+1;return e&&e.wsbounds?{left:c,right:c+d.functionName.length}:null},getFunctionName:function(){var e=this.getPresentingSignature();return!e?null:e.functionName},getCurrentBounds:function(e){var d,c,b=this.getPresentingArgument();if(b&&(d=(d=this._data.shared)?d.bounds:b.widgetData&&b.widgetData.bounds?
b.widgetData.bounds:b.bounds,d=g.getLineColumnForOffsetBounds(d,this.getCursorPosition(),e),(e=b.widgetData)&&e.choices&&0<e.choices.length)){b=e.choices[0];e=b.completion;var b=b.displayString,a=e.length;b&&(a-=b.length);0<=a&&0<=e.indexOf(b,a)&&(c=a)}return d?{left:d.startColumn,right:d.endColumn,startLine:d.startLine,endLine:d.endLine,offset:c||0}:null},getNextBounds:function(e){var d=this._getNextNonPresentingArgument();if(d)var d=d.widgetData&&d.widgetData.bounds?d.widgetData.bounds:d.bounds,
c=g.getLineColumnForOffsetBounds(d,this.getCursorPosition(),e);return c?{left:c.startColumn,right:c.endColumn,startLine:c.startLine,endLine:c.endLine}:null},_getNextNonPresentingArgument:function(){for(var e=this.getPresentingArgument(),d=this._getInputArguments(),c,e=d.indexOf(e)+1;e<d.length;e+=1){var b=d[e];if(b.status!==this._METADATA_PRESENTING_STATUS){c=b;break}}return c},_getInputArguments:function(){return this.getPresentingSignature().inputArguments},getCode:function(){var e="",d=this._data.signatures;
if(d&&0<d.length){arguments=d[0].inputArguments;if(!arguments)return e;arguments.some(function(c){if(c.status&&c.status===this._METADATA_PRESENTING_STATUS)return e=c.value,!0},this)}else this._data.widgetType!==this._METADATA_WIDGET_TYPE_NONE&&(e=this._data.value);return e},hasSuggestion:function(){if(!this._data)return!1;var e=this._data.widgetType,d=this._data.signatures,d=d&&0<d.length;return e&&e!==this._METADATA_WIDGET_TYPE_NONE||d},hasSignatures:function(){return this._data.hasOwnProperty(this._METADATA_SIGNATURES_PROPERTY)},
_getArgument:function(e,d){arguments=e.inputArguments;return!arguments||d>=arguments.length?null:arguments[d]},isCallingSyntaxObjectOrCell:function(){var e=this.getPresentingSignature();return null===e?!1:e.callingSyntax===this._METADATA_CALLING_SYNTAX_OBJECT||e.callingSyntax===this._METADATA_CALLING_SYNTAX_CELL?!0:!1},getData:function(){return this._data},isFileOrFolderName:function(){var e=this.getPresentingArgument().widgetType;return e===f.FILE_NAME||e==f.FOLDER_NAME},isMessageId:function(){var e=
this.getPresentingArgument().widgetData;if(e&&(e=e.choices)&&0<e.length)return e[0].matchType===this._METADATA_MATCHTYPE_MESSAGE_ID},getCursorPosition:function(){return this._data.cursorPosition}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBusProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBus"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},
destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/CodingUIViewEventBus":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(){},onCompleteText:function(f,g){},onSelectBounds:function(f){},onRequestHelp:function(){},destroy:function(){}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/codingui/view/CodingUIView"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.cursor rtc.view rtc.domnode rtc.internaldocument rtc.code.codingui.contextmanager rtc.shadowtextservice rtc.code.codingui.eventbus rtc.tooltipservice rtc.code.codingui.helpicon rtc.document matlab.tokens".split(" ")}},createInstance:function(e,d,c,b,a,f,h,m,q,n,p){return new g(e,d,c,b,a,f,h,m,q,n,p)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/view/ViewEventUtilities ./CodingUIFunctionAssistantView ./CodingUIShadowTextView ./CodingUISuggestionView ./CodingUIViewProxy ../CodingUIContextEvents ../utilities/CodingUIContextUtilities ../utilities/CodingUIWidgetUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(null,{_LAYER_CSS:"mwCodingUILayer",constructor:function(d,e,h,l,m,q,v,w,x,B,A){this._cursor=d;this._rtcView=e;this._contextManager=m;this._helpIcon=x;this._document=B;this._topView=new k;this._shadowTextView=new b(d,B,m,q);this._functionAssistantView=new c(e,m,h,v,this._shadowTextView,w,d,l,A,B);this._suggestionView=new a(e,d,m,h,l,v,this._shadowTextView,w,B,A);this._aspectHandles=[g.after(this._contextManager,"onContextUpdated",f.hitch(this,"_handleContextUpdated"),
!0),g.after(e,"onViewUpdated",f.hitch(this,"_handleViewUpdated"),!0)];this._scrolledIntoViewNow=!1},_handleContextUpdated:function(a){switch(a){case l.CONTEXT_RESET:case l.LEAVING_RANGE:case l.SILENT_RESET:this._updateViewOnInvalidContext();break;case l.CONTEXT_SWITCHED:this._updateViewOnContextChanged()}},_handleViewUpdated:function(a){if(d.hasHeightEvent(a)||d.hasScrollEvent(a)){var b=this._contextManager.getContext();if(b&&this._topView.isDisplayed()){var c=b.position.isValid()&&this._rtcView.isLineInView(b.position.getLineColumn().line,
!0);!c&&this._shouldCloseView(b,a)?this.close():(c&&(this._scrolledIntoViewNow=!1),this._topView.reposition())}}},_shouldCloseView:function(a,b){return this._scrolledIntoViewNow||d.isOnlyClientOrOffsetHeightChange(b)?!1:!0},_updateViewOnInvalidContext:function(){this._shadowTextView.close();this.closeTopView()},_updateViewOnContextChanged:function(){var a=this._contextManager.getContext();this._shadowTextView.close();a.isWidgetReUsed||this.closeTopView();m.isContextInOpaqueNode(a,this._document)||
this._updateTopView(a)},sendEventToTopView:function(a){var b=this._topView.sendEvent(a),c=this._contextManager.getContext();if(c){var c=c.position.getLineColumn(),d=c.line;b&&this._isTabAction(a)&&!this._rtcView.isLineInView(d,!0)?(this._rtcView.scrollLineColumnIntoView(d,c.column),this._scrolledIntoViewNow=!0):this._scrolledIntoViewNow=!1}return b},_isTabAction:function(a){return a.hasOwnProperty("keyCode")&&a.keyCode===e.TAB},_updateTopView:function(a){var b=a.metaData,c=b.getData(),d,e=!!this._helpIcon;
if(q.isSuggestionWidget(c)){if(c=q.createWidget(b,e))a.widget=c,d=this._suggestionView}else q.isFunctionAssistantWidget(c)&&((c=a.widget)||(c=q.createWidget(b,e)),c&&(a.widget=c,d=this._functionAssistantView));d?(this._topView.setView(d),d.update(),d.show()):this._updateViewOnInvalidContext()},isShadowTextViewDisplayed:function(){return this._shadowTextView.isDisplayed()},isTopViewDisplayed:function(){return this._topView.isDisplayed()},closeTopView:function(){this._scrolledIntoViewNow=!1;return this._topView.close()},
close:function(){this._shadowTextView.close();return this.closeTopView()},show:function(){return this._topView.show()},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[];this._destroy()},_destroy:function(){this._shadowTextView.destroy();this._topView.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIFunctionAssistantView":function(){define("dojo/_base/declare dojo/_base/lang ../CodingUIActivities ./CodingUIHighlightView ./CodingUIPopupWidgetView ../utilities/CodingUIContextUtilities ../utilities/CodingUIWidgetUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(d,{_CONTAINER_NAME:"mwCodingUIFunctionAssistant",_CONTAINER_CSS:"mwCodingUIContainer mwCodingUIFunctionAssistant",_FLIPPED_OFFSET:5,_SIGNATURE_CHANGE_EVENT:"signatureChange",constructor:function(a,b,c,d,f,g,h,r,s,t){this._rtcView=a;this._contextManager=b;this._parentContainer=c;this._uiViewEventBus=d;this._shadowTextView=f;this._tooltipService=g;this._cursor=h;this._highlightView=new e(a,r,s,t);this._initialize();this._continueShowingWidget=!1},update:function(){var a=
this._contextManager.getContext(),b=a.activity===g.COMPLETE;if(b){var c=a.metaData.getNextBounds(a.position);if(c){this._uiViewEventBus.onSelectBounds(c);return}}this.isDisplayed()&&(this._continueShowingWidget=!0);this._isActivityForAutomatic(a.activity)||this.close();this._highlightView.close();b&&this._shadowTextView.close();this.inherited(arguments);this._widget&&(this._widget.set("showWidgets",!b),this._widget.set("showSignatures",!1))},show:function(a){var c=this._contextManager.getContext();
if(!c)return!1;var d=c.widget;if(a||this._isActivityForAutomatic(c.activity)||c.isWidgetReUsed&&this._continueShowingWidget){if(!this._show(a))return!1;this._continueShowingWidget=!1;d&&d.moveWidgetIntoView()}a=b.getSelectedCompletion(d);var e=b.getNumberOfChoices(d);c.activity!==g.COMPLETE&&this.isDisplayed()&&this._shadowTextView.show(a);1===e&&a===c.code&&d.set("showWidgets",!1);return!0},_isActivityForAutomatic:function(a){return a!==g.SILENT_UPDATE&&a!==g.CURSOR_SELECTION},_registerEventHandlers:function(a){this.inherited(arguments);
a.on("argument-over",f.hitch(this,"_handleWidgetArgumentOver"));a.on("argument-out",f.hitch(this,"_handleWidgetArgumentOut"));a.on("argument-change",f.hitch(this,"_handleWidgetArgumentChange"));a.on("help",f.hitch(this,"_handleWidgetHelp"))},_handleWidgetArgumentOver:function(a){if(a=a.mwEventData.bounds){var b=this._contextManager.getContext();b.isStale||(a=c.getLineColumnForOffsetBounds(a,b.metaData.getCursorPosition(),b.position),this._highlightView.show({start:{line:a.startLine,column:a.startColumn},
end:{line:a.endLine,column:a.endColumn}}))}},_handleWidgetArgumentOut:function(){this._highlightView.show()},_handleWidgetArgumentChange:function(a){this.showShadowTextIfAllowed(a.mwEventData.newValue.toString())},handleWidgetChange:function(a,c){if(c.mwEventData.type===this._SIGNATURE_CHANGE_EVENT){var d=b.getSelectedCompletion(a);this.showShadowTextIfAllowed(d)}else this.inherited(arguments)},_handleWidgetHelp:function(){this._uiViewEventBus.onRequestHelp()},destroy:function(){this.inherited(arguments);
this._highlightView.destroy()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIHighlightView":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities","./CodingUIAbstractView"],function(h,f,g,e){return h(e,{_HIGHLIGHT_LAYER_CLASS:"mwCodingUIHighlightLayer",_HIGHLIGHT_MARKER_CLASS:"mwCodingUIHighlightMarker",constructor:function(d,c,b,a){this._rtcView=d;this._internalDocument=c;this._tokenService=b;this._document=a;this._layer=
this._createLayer();d.addLayer(this._layer)},_createLayer:function(){return f.create("div",{"class":this._HIGHLIGHT_LAYER_CLASS})},_createHighlightMarkerDiv:function(d,c){var b=this._rtcView.getCoordinateForLineColumn(c.start.line,c.start.column),a=this._rtcView.getCoordinateForLineColumn(c.end.line,c.end.column);f.create("div",{"class":this._HIGHLIGHT_MARKER_CLASS,style:{top:b.y+"px",height:b.height+"px",left:b.x+"px",width:a.x-b.x+"px"}},d)},show:function(d){this._clear();if(d){var c=this._createLayer();
d.start.line===d.end.line?this._createHighlightMarkerDiv(c,d):this._createHighlightMarkerDivForEachLine(c,d);this._rtcView.switchLayer(c,this._layer);this._layer=c}},_createHighlightMarkerDivForEachLine:function(d,c){for(var b=c.end.line,a=c.start.line;a<=b;a++){var e=this._getStartAndEndColumnToHighlightForLine(c,a);this._createHighlightMarkerDiv(d,{start:{line:a,column:e.startColumn},end:{line:a,column:e.endColumn}})}},_getStartAndEndColumnToHighlightForLine:function(d,c){var b=d.start.line;if(c===
d.end.line)var b=this._getTrimmedStartColumn(c,1),a=d.end.column;else a=this._getLineLength(c),b=c===b?d.start.column:this._getTrimmedStartColumn(c,1),a=this._getTrimmedEndColumn(c,a+1);return{startColumn:b,endColumn:a}},_getTrimmedStartColumn:function(d,c){for(var b=c,a=this._getLineLength(d),e=c;e<a&&" "===this._document.getTextCharacters(d-1,e-1,1);e++)b++;return b},_getTrimmedEndColumn:function(d,c){for(var b=this._tokenService.getTokensOnLine(d-1),a=c,e=b.length-1;1<=e;e--){var f=b[e];if(g.isDotDotDotToken(f)){a=
f.getPositionInfo().column+1;b=b[e-1];g.isWhitespaceToken(b)&&(a=b.getPositionInfo().column+1);break}}return a},_getLineLength:function(d){return this._internalDocument.getLineNode(d-1).getTextForPositioning().length},close:function(){this._clear()},_clear:function(){f.empty(this._layer)},destroy:function(){this._clear()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIAbstractView":function(){define(["dojo/_base/declare"],function(h){return h(null,{isDisplayed:function(){},show:function(f){},
close:function(){},update:function(){},sendEvent:function(f){},destroy:function(){}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIPopupWidgetView":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/keys ../utilities/CodingUIWidgetUtilities ./CodingUIAbstractView".split(" "),function(h,f,g,e,d,c){return h(c,{_CONTAINER_NAME:null,_CONTAINER_CSS:null,_BOTTOM_MAX_HEIGHT:200,_BOTTOM_OFFSET:5,_FLIPPED_OFFSET:0,_INVALID_MATCH_TYPES_FOR_REPOSITION:["filename","folder",
"literal"],_initialize:function(){var b=this._createContainer();this._parentContainer&&g.place(b,this._parentContainer);this._container=b},isDisplayed:function(){return"none"!==this._container.style.display},update:function(){var b=this._contextManager.getContext(),a=b.widget;a!==this.getWidget()&&(this.destroy(),this.setWidget(a));a.set("data",b.metaData.getData())},getWidget:function(){return this._widget},setWidget:function(b){b!==this.getWidget()&&this._registerEventHandlers(b);this._widget=b},
_registerEventHandlers:function(b){b.on("size-change",f.hitch(this,"reposition"));b.on("change",f.hitch(this,"handleWidgetChange",b));b.on("select",f.hitch(this,"_handleWidgetSelect"))},handleWidgetChange:function(b,a){this._uiViewEventBus.onCompleteText(a.mwEventData.newValue.toString(),a)},_handleWidgetSelect:function(b){this.showShadowTextIfAllowed(b.mwEventData.newValue.toString())},showShadowTextIfAllowed:function(b){!this._cursor.hasSelection()&&this.isDisplayed()&&this._shadowTextView.show(b)},
show:function(b){return this._show(b)},_show:function(b){if(this._widget)return this._ensureTooltipRemoved(),b=b?this._tooltipService.PRIORITY.ON_DEMAND:this._tooltipService.PRIORITY.AUTO,this._tooltipServiceHandle=this._tooltipService.requestTooltip(f.hitch(this,"_showCallback"),f.hitch(this,"_closeCallback"),b),!!this._tooltipServiceHandle},_showCallback:function(){this._showContainer();this._showWidget();this.reposition()},_closeCallback:function(){this.close()},close:function(){this._contextManager.getContext()||
(this._widget=null);this._ensureTooltipRemoved();return this.isDisplayed()?(this._closeContainer(),!0):!1},_ensureTooltipRemoved:function(){this._tooltipServiceHandle&&(this._tooltipServiceHandle.remove(),this._tooltipServiceHandle=null)},sendEvent:function(b){return b.hasOwnProperty("keyCode")?this._handleKeyEvent(b):!1},_handleKeyEvent:function(b){return b.keyCode===e.TAB?this._handleTabKey(b):this.getWidget().navigate(b)},_handleTabKey:function(b){var a=this._contextManager.getContext();return this.isDisplayed()?
(b=this.getWidget().navigate(b),!b?(this.close(),!0):b):a.metaData.hasSuggestion()?this.show(!0):!1},reposition:function(){var b=this._contextManager.getContext();b&&(b=this._getCoordinateForPosition(b),this._reposition(b.x,b.y))},_reposition:function(b,a){this._container.style.left=b+"px";this._container.style.top=a+"px"},_showWidget:function(){this._widget.placeAt(this._container);this._widget.startup()},_getCoordinateForPosition:function(b){var a=this._rtcView.getCoordinateForLineColumn(this._getLineNumberForPositioning(b),
this._getColumnNumberForPositioning(b)),c=this._getPageX(a);b=this._getPageY(a);var a=b+a.height,c=c-this._widget.get("alignmentXOffset"),d=a+this._BOTTOM_OFFSET;d+this._BOTTOM_MAX_HEIGHT>window.innerHeight&&b>window.innerHeight-a?(this._widget.set("position","top"),d=b-(this._widget.domNode.clientHeight+this._FLIPPED_OFFSET)):this._widget.set("position","bottom");b=this._parentContainer.getBoundingClientRect().left;return{x:Math.max(b,c,0),y:d}},_getLineNumberForPositioning:function(b){return b.position.getLineColumn().line},
_getColumnNumberForPositioning:function(b){var a=b.position.getNode().rootContainer().maxOffset()+1,c=b.leftMostBounds.left;this._shouldUpdateColumnForDotNotation(b)&&(b=b.metaData.getData().value.lastIndexOf("."),c=c+b+1);return Math.min(c,a)},_shouldUpdateColumnForDotNotation:function(b){b=d.getCompletionChoices(b.widget);if(!b||0===b.length)return!1;for(var a=0;a<b.length;a++){var c=b[a];if(!c.displayString||0<=this._INVALID_MATCH_TYPES_FOR_REPOSITION.indexOf(c.matchType)||-1===c.completion.indexOf("."))return!1}return!0},
_getPageX:function(b){return b.pageX},_getPageY:function(b){var a=this._rtcView.getDomtarget().getBoundingClientRect().top,c=this._rtcView.getDomTargetPosition().scrollTop;return b.y+a-c},_showContainer:function(){this._container.style.display=""},_closeContainer:function(){this._container.style.display="none"},_clearContainer:function(){g.empty(this._container)},_createContainer:function(){return g.create("div",{className:this._CONTAINER_CSS,style:"display: none","data-testid":this._CONTAINER_NAME})},
destroy:function(){this._widget&&(!this._contextManager.isWidgetHeld(this._widget)&&!this._widget._destroyed)&&this._widget.destroy();this._closeContainer();this._clearContainer()}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIShadowTextView":function(){define("dojo/_base/declare dojo/_base/lang MW/rtc/model/DocumentUtilities ./CodingUIAbstractView ../CodingUIActivities ../utilities/CodingUIWidgetUtilities".split(" "),function(h,f,g,e,d,c){return h(e,{_SHADOWTEXT_CSS:"mwCodingUIShadowText",
_SINGLE_QUOTE:"'",_DOUBLE_QUOTE:'"',constructor:function(b,a,c,d){this._cursor=b;this._document=a;this._contextManager=c;this._shadowTextService=d;this._shadowTextBeforeCursorHandle=this._shadowTextAfterCursorHandle=null},isDisplayed:function(){return null!==this._shadowTextAfterCursorHandle},show:function(b){var a=this._contextManager.getContext();a&&(this._destroy(),this._cursor.position.isEqualTo(a.position)&&b&&0!==c.getNumberOfChoices(a.widget)&&this._createShadowTextViews(a,b))},_createShadowTextViews:function(b,
a){var c=b.code,d=b.position.getLineColumn().column-b.currentBounds.left,e=this._getShadowTextAfterCursor(c,d,a);if(e&&(this._shadowTextAfterCursorHandle=this._createView(e.text,e.position),c=this._getShadowTextBeforeCursor(c,d,a)))this._shadowTextBeforeCursorHandle=this._createView(c.text,c.position),this._cursor.onUpdate(!0)},_getShadowTextAfterCursor:function(b,a,c){b=this._getShadowTextInfo(b,a,c);b.leftTextMatch&&a++;if((b.leftMatch||b.leftTextMatch)&&b.rightMatch){a=c.slice(a,c.length-b.right.length);
if(!a)return null;c=this._cursor.getLineColumn();c=this._document.createPositionAtLineColumn(c.line-1,c.column-1,!0);return{text:a,position:c}}return null},_getShadowTextBeforeCursor:function(b,a,c){a=this._getShadowTextInfo(b,a,c);return a.leftTextMatch&&a.rightMatch?(a=this._cursor.getLineColumn(),b=this._document.createPositionAtLineColumn(a.line-1,a.column-1-b.length,!0),{text:c.charAt(0),position:b}):null},_getShadowTextInfo:function(b,a,c){var d=b.substr(0,a);b=b.substr(a,b.length);a=this._isRightTextAllowed(b);
var e=c.toLowerCase().indexOf(d.toLowerCase());c=c.charAt(0);return{left:d,right:b,rightMatch:a,leftMatch:0===e,leftTextMatch:1===e&&("'"===c||'"'===c)}},_createView:function(b,a){var c=a.getLineColumn(),c={text:b,cssClass:this._SHADOWTEXT_CSS,updateCallback:f.hitch(this,"_handleServiceUpdate",c,b),position:a};return this._shadowTextService.requestTextAtPosition(c)},_handleServiceUpdate:function(b,a,c){var d=c.position.getLineColumn(),e=d.column-b.column,f=g.getTextRangeFromLeftToPosition(c.position),
f=f?f.text:"",f=e?f.substr(-e):"",h=a.substr(0,e);d.column<b.column||f!==h||0!==e&&e===a.length?c.remove():c.update(a.substring(e));this._cursor.onUpdate(!0)},_isRightTextAllowed:function(b){return""===b||b===this._SINGLE_QUOTE||b===this._DOUBLE_QUOTE},close:function(){this._destroy()},destroy:function(){this._destroy()},_destroy:function(){this._shadowTextBeforeCursorHandle&&(this._shadowTextBeforeCursorHandle.remove(),this._shadowTextBeforeCursorHandle=null);this._shadowTextAfterCursorHandle&&(this._shadowTextAfterCursorHandle.remove(),
this._shadowTextAfterCursorHandle=null,this._cursor.onUpdate(!0))}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUISuggestionView":function(){define(["dojo/_base/declare","../CodingUIActivities","../utilities/CodingUIWidgetUtilities","./CodingUIPopupWidgetView","MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities"],function(h,f,g,e,d){return h(e,{_CONTAINER_NAME:"mwCodingUISuggestion",_CONTAINER_CSS:"mwCodingUIContainer mwCodingUISuggestion",_FLIPPED_OFFSET:5,constructor:function(c,
b,a,d,e,f,g,h,p,r){this._rtcView=c;this._cursor=b;this._contextManager=a;this._parentContainer=d;this._internalDocument=e;this._uiViewEventBus=f;this._shadowTextView=g;this._tooltipService=h;this._document=p;this._tokenService=r;this._initialize()},update:function(){this.inherited(arguments);var c=this._contextManager.getContext(),b=g.getNumberOfChoices(c.widget);(0>=b||!this._isActivityAllowed(c.activity))&&this.close();(0===b||this._cursor.hasSelection())&&this._shadowTextView.close()},show:function(c){var b=
this._contextManager.getContext(),a=b.widget;if(!this._isCursorAtValidPositionForCompletions(b))return!1;if(!c&&!this._isActivityAllowed(b.activity)||!this._showView(b,c)||!this._show(c))return!0;c=g.getSelectedCompletion(a);this._shadowTextView.show(c);return!0},_isCursorAtValidPositionForCompletions:function(c){var b=c.metaData,a=this._cursor.getLineColumn(),d=a.line,a=a.column;c=b.getLeftMostBounds(c.position).right;d=this._document.getTextCharacters(d-1,a-1,1);return a===c||a===c-1&&("'"===d||
'"'===d)},_isActivityAllowed:function(c){return c!==f.COMPLETE&&c!==f.SILENT_UPDATE&&c!==f.CURSOR_SELECTION},_showView:function(c,b){var a=c.widget;if(0===g.getNumberOfChoices(a))return!1;a=g.getSelectedCompletion(a);return!b&&a===c.code?!1:!0}})})},"MW/rtc/plugins/language/matlab/codingui/view/CodingUIViewProxy":function(){define(["dojo/_base/declare","mw-log/Log","./CodingUIAbstractView"],function(h,f,g){return h(g,{constructor:function(){this._view=null},setView:function(e){f.assert(e instanceof
g,"The view instance to configure must be of CodingUIAbstractView");this._view=e},getView:function(){return this._view},sendEvent:function(e){return this._view&&this._view.sendEvent(e)},isDisplayed:function(){return this._view&&this._view.isDisplayed()},reposition:function(){return this._view&&this._view.reposition()},show:function(e){return this._view&&this._view.show(e)},close:function(){return this._view&&this._view.close()},destroy:function(){this._view&&(this._view.destroy(),this._view=null)}})})},
"MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelectionProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelection","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{requires:function(){return{createInstance:["rtc.document","rtc.cursor","rtc.eventhandler","rtc.actionservice","rtc.executionservice"]}},createInstance:function(c,
b,a,d,f){return new e(c,b,a,d,f)},destroyInstance:function(c){c.dispose()}})})},"MW/rtc/plugins/language/matlab/contextualselection/EvaluateSelection":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/i18n!l10n/nls/actions","MW/rtc/RichTextComponentFeatureEnum"],function(h,f,g,e,d){return h(null,{constructor:function(c,b,a,h,l){this._document=c;this._cursor=b;this._actionService=h;this._executionService=l;this._connections=[];this._connections.push(g.after(this._cursor,
"onChange",f.hitch(this,this._updateActionState)));this._connections.push(g.after(a,"onMouseDown",f.hitch(this,this._updateActionState)));c=[{id:d.EVALUATE_SELECTION.EVALUATE_SELECTION_ACTION,key:"f9",shortcut:e.evaluateSelectionShortcut,platformKey:{mac:"shift_f7"},enabled:!1,contextMenuGroup:"Selections",text:e.evaluateSelectionLabel,callback:f.hitch(this,"evaluateSelection")}];this._actionService.loadActions(c)},evaluateSelection:function(){var c=this._getSelection();this._executionService&&c&&
(this._executionService.streamingEval?this._executionService.authoringEval(c,this._executionService.streamingEval):this._executionService.authoringEval(c))},_getSelection:function(){if(!this._cursor.hasSelection())return"";var c=this._cursor.getSelectionLineColumn();return c.start.line===c.end.line?this._cursor.selectedText():this._document.getCodeTextForRange(this._cursor.getSelection())},_updateActionState:function(){var c=this._cursor.hasSelection();this._actionService.updateAction(d.EVALUATE_SELECTION.EVALUATE_SELECTION_ACTION,
{enabled:c})},dispose:function(){this._connections.forEach(function(c){c.remove()})}})})},"MW/rtc/plugins/language/matlab/contextualselection/OpenSelectionProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/contextualselection/OpenSelection","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{requires:function(){return{createInstance:"rtc.internaldocument rtc.cursor rtc.eventhandler rtc.actionservice rtc.executionservice rtc.functionservice".split(" ")}},
createInstance:function(c,b,a,d,f,g){return new e(c,b,a,d,f,g)},destroyInstance:function(c){c.dispose()}})})},"MW/rtc/plugins/language/matlab/contextualselection/OpenSelection":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/string dojo/touch MW/rtc/RichTextComponentFeatureEnum MW/rtc/model/DocumentUtilities dojo/i18n!l10n/nls/actions".split(" "),function(h,f,g,e,d,c,b,a,k){return h(null,{constructor:function(a,c,d,e,h,r){this._internalDocument=a;this._cursor=c;this._actionService=
e;this._executionService=h;this._functionService=r;this._connections=[];this._connections.push(g.after(d,"onMouseDown",f.hitch(this,this._updateLabel)));a=[{id:b.OPEN_SELECTION.OPEN_SELECTION_ACTION,key:"ctrl_d",shortcut:"Ctrl+D",platformKey:{mac:"meta_shift_d"},enabled:!0,contextMenuGroup:"Selections",text:k.openSelectionLabel,callback:f.hitch(this,"openSelection")}];this._actionService.loadActions(a)},_getText:function(){var a=null;return a=this._cursor.selectedText()?this._cursor.selectedText().trim():
this._getTextAtPosition()},_getTextAtPosition:function(){var b=a.getWordAtPosition(this._internalDocument,this._cursor.position),c;b&&(c=b.text);return c},_updateLabel:function(){var a=this._getText(),c="",c=a?1<a.split("\n").length?k.openSelectionLabel:30<a.length?d.substitute(k.openLabelTruncated,[a.substring(0,30)]):d.substitute(k.openLabel,[a]):k.openSelectionLabel;this._actionService.updateAction(b.OPEN_SELECTION.OPEN_SELECTION_ACTION,{text:c})},_getLocalFunctionInfo:function(a){var b=this._functionService.getFunctionDeclarationByName(a);
if(b)return b;this._functionService.getAllFunctionDeclarations().some(function(c){return c.getName()===a?(b=c,!0):!1});return b},openSelection:function(){var a=this._getText();if(a){var b=this._getLocalFunctionInfo(a);b?this._cursor.setLineColumn(b.getStartLine(),1,!0):this._executionService.executionEval("try open('"+a+"'); catch edit('"+a+"'); end;")}},dispose:function(){this._connections.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/language/matlab/commentCode/CommentCodeProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/commentCode/CommentCode","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{isApplicable:function(d){return g.isMatlabCodeFileOrBuffer(d)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.cursor","rtc.actionservice","rtc.document"]}},createInstance:function(d,c,b){return new f(d,c,b)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/commentCode/CommentCode":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-string-utils/StringUtils MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(null,{_DEFAULT_COMMENT_STRING:"%",_DEFAULT_COMMENT_ANNOTATION:"% ",constructor:function(a,b,c){this._cursor=a;this._document=c;this._actionService=b;this._connections=[];a=[{id:m.COMMENT.COMMENT_ACTION,key:"ctrl_r",platformKey:{mac:"meta_/"},enabled:!0,shortcut:q.commentShortcut,description:q.commentDescription,icon:"smallInsertComment",callback:f.hitch(this,"_comment")},{id:m.COMMENT.UNCOMMENT_ACTION,enabled:!0,description:q.uncommentDescription,icon:"smallUncomment",
callback:f.hitch(this,"_uncomment")}];this._actionService.loadActions(a);this._actionService.updateAction(m.COMMENT.COMMENT_ACTION,{enabled:!0});this._actionService.updateAction(m.COMMENT.UNCOMMENT_ACTION,{enabled:!0});this._connections.push(g.after(this._cursor,"onChange",f.hitch(this,this._updateActionState)));this._connections.push(g.after(this._document,"onChange",f.hitch(this,this._updateActionsOnDocumentChange),!0))},_commentValid:function(){return!this._document.isReadOnly()&&!this._cursor.isCursorReadOnly()},
_comment:function(){this._commentValid()&&this._augmentSelection(f.hitch(this,"_commentAugmenter"))},_uncomment:function(){this._commentValid()&&this._augmentSelection(f.hitch(this,"_uncommentAugmenter"))},_augmentSelection:function(a){var b,c;if(c=this._cursor.getSelection()){b=c.getStartPosition().getLineColumn().line;var d=c.getEndPosition().getLineColumn();c=1===d.column&&!c.fileEndSelected()?d.line-1:d.line}else b=c=this._cursor.getLineColumn().line;this._augmentLines(b,c,a)},_augmentLines:function(b,
c,d){for(var e=this._document.startBlockEdit(),f=b;f<=c;f++)this._document.isLineCode(f)&&d(f);e.appendRedoEvents([a.create(b-1,c-1)]);e.appendUndoEvents([a.create(b-1,c-1)]);this._document.endBlockEdit(e)},_commentAugmenter:function(a){this._document.insertText(this._DEFAULT_COMMENT_ANNOTATION,a,1)},_uncommentAugmenter:function(a){var b=this._document.getLineText(a),c="";if(0===e.leftTrim(b).indexOf(this._DEFAULT_COMMENT_ANNOTATION))c=this._DEFAULT_COMMENT_ANNOTATION;else if(0===e.leftTrim(b).indexOf(this._DEFAULT_COMMENT_STRING))c=
this._DEFAULT_COMMENT_STRING;else return;b=b.indexOf(c)+1;this._document.deleteText(a,b,a,b+c.length)},_updateActionsOnDocumentChange:function(a){a&&f.isArray(a)&&a.some(function(a){if(a.type===b.READONLY_STATE_CHANGE_EVENT)return this._updateActionState(),!0},this)},_updateActionState:function(){var a=this._isCodeInRange(),b=!this._cursor.isCursorReadOnly(),a=a&&b&&c.isConvertable(this._cursor,l);this._actionService.updateAction(m.COMMENT.COMMENT_ACTION,{enabled:a});this._actionService.updateAction(m.COMMENT.UNCOMMENT_ACTION,
{enabled:a})},_isCodeInRange:function(){var a=this._cursor.selectionInfo();return d.isCodeInRange(a.startNode,a.endNode)},destroy:function(){this._connections.forEach(function(a){a.remove()})},getCommentAnnotation:function(){return this._DEFAULT_COMMENT_ANNOTATION}})})},"MW/rtc/plugins/language/matlab/filetype/FileTypeProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","./FileType","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],
function(h,f,g,e,d){return h(g,{isApplicable:function(c){return d.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.editordataservice"]}},createInstance:function(c,b){return new e(c,b)}})})},"MW/rtc/plugins/language/matlab/filetype/FileType":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractDocumentSynchronizableMixin","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h([e,g],{_FILE_TYPE_INFO:"matlab.code.filetype",
FILE_TYPE:{ScriptFile:0,FunctionFile:1,ClassDefinitionFile:2,Unknown:3},constructor:function(d,c){this._document=d;this._editorDataService=c;this._fileType=-1;this._isFileTypeSupported=null;this._connections=[];this.initializeSynchronizable(d);this._connections.push(this._editorDataService.listenTo(this._FILE_TYPE_INFO,f.hitch(this,"_updateFileType")))},isFunction:function(){return this.getFileType()===this.FILE_TYPE.FunctionFile},isClass:function(){return this.getFileType()===this.FILE_TYPE.ClassDefinitionFile},
isScript:function(){return this.getFileType()===this.FILE_TYPE.ScriptFile||this.getFileType()===this.FILE_TYPE.Unknown},getFileType:function(){return this._fileType},onFileTypeChange:function(d,c){},onSupportedFileTypeChange:function(d,c){},_updateFileType:function(d){var c=this._fileType;this._fileType=this.FILE_TYPE[d.fileType];this._fileType!==c&&(this.onFileTypeChange(this._fileType,c),this._isFileTypeSupported!==d.isFileTypeSupported&&(this._isFileTypeSupported=d.isFileTypeSupported,this.onSupportedFileTypeChange(this._isFileTypeSupported,
this._fileType)));this._document.getState()===d.documentState&&this.markClean()},destroy:function(){this._connections.forEach(function(d){d.remove()})}})})},"MW/rtc/plugins/language/matlab/functionhints/FunctionHintsProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/functionhints/FunctionHints","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,f,g,e,d){return h(g,{isApplicable:function(c){return d.isMatlabCodeFileOrBuffer(c)},
requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.document rtc.cursor rtc.focusservice rtc.editordataservice rtc.actionservice rtc.functionargumentnotifier rtc.view".split(" ")}},createInstance:function(c,b,a,d,f,g,h){return new e(c,b,a,d,f,g,h)},destroyInstance:function(c){c.dispose()}})})},"MW/rtc/plugins/language/matlab/functionhints/FunctionHints":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-style dojo/dom-construct mw-log/Log dijit/popup dijit/TooltipDialog dojo/mouse dojo/on dojo/touch MW/rtc/plugins/functionnotifier/FunctionStateConstants".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(null,{_FUNCTION_HINTS_FEATURE_ID:"code.functionhints",constructor:function(b,c,e,h,k,q,v){this._document=b;this._cursor=c;this._editorDataService=h;this._handles=[];this._view=v;this._tooltipInfo={tooltipDialog:new a({style:"width: 300px; word-wrap: break-word;"}),isTooltipOpen:!1};this._isCancelled=!1;this._actionService=k;this._functionArgumentNotifier=q;this._functionHintsHolder=d.create("div",{"class":"functionHintsHolder",style:{position:"absolute",
top:"0px",left:"0px",width:"0px",height:"0px"}});d.place(this._functionHintsHolder,this._view.getDomtarget());b=[{id:"rtc_function_hints",key:"ctrl_f1",platformKey:{mac:"ctrl_f1"},enabled:!0,callback:f.hitch(this,"_toggleTooltip")},{id:"rtc_function_hints_close",key:"escape",enabled:!0,callback:f.hitch(this,"_closeTooltip")}];this._actionService.loadActions(b);this._handles.push(g.after(this._functionArgumentNotifier,"onFunctionNavigationNotify",f.hitch(this,"_checkForFunctionHints"),!0));this._handles.push(g.after(this._document,
"onChange",f.hitch(this,"_openFunctionHints")));this._handles.push(l(v.getDomtarget(),m.press,f.hitch(this,"_closeTooltipOnRightClick")));this._handles.push(g.after(e,"onBlur",f.hitch(this,"_closeTooltip")))},_toggleTooltip:function(){this._tooltipInfo.isTooltipOpen?this._closeTooltip():this.showFunctionHints()},showFunctionHints:function(){var a=this._functionArgumentNotifier.getFunctionInfo();a?(this._updateHintsHolderPosition(),this._triggerFunctionHints(a.text)):this._functionHintsScheduled=!0},
_updateHintsHolderPosition:function(){var a=this._cursor.getLineColumn(),a=this._view.getCoordinateForLineColumn(a.line,a.column);this._setHolderPosition(a.y,a.x,a.height)},_setHolderPosition:function(a,b,c){e.set(this._functionHintsHolder,{top:a+"px",left:b+"px",height:c+"px"})},_resetHolderPosition:function(){this._setHolderPosition(0,0,0)},_openFunctionHints:function(){"("===this._cursor.charAtCursor(-1)&&this.showFunctionHints()},_checkForFunctionHints:function(a){var b="",c=this._tooltipInfo.isTooltipOpen;
this._functionHintsScheduled&&(this._functionHintsScheduled=!1,this.showFunctionHints());c&&a.type===q.FUNCTION_ARGS_NAVIGATE_ENTER&&(b=a.functionInfo,b.relation===q.INNER_NESTED_FUNCTION_CALL||b.relation===q.OUTER_NESTED_FUNCTION_CALL?(b=b.text,this._updateHintsHolderPosition(),this._triggerFunctionHints(b)):this._closeTooltip());c&&a.type===q.FUNCTION_ARGS_NAVIGATE_CHANGE&&(b=a.functionInfo.text,this._triggerFunctionHints(b));a.type===q.FUNCTION_ARGS_NAVIGATE_EXIT&&this._closeTooltip()},_triggerFunctionHints:function(a){this._isCancelled=
!1;this._editorDataService.request(this._FUNCTION_HINTS_FEATURE_ID,{content:a}).then(f.hitch(this,function(a){this._openFunctionHintsTooltip(a)}),function(a){c.assert(!1,"[Unsuccessful Request] The request for function hints was not sent successfully -\x3e"+a)})},_openFunctionHintsTooltip:function(a){if(this._isCancelled)return this._resetHolderPosition(),!1;if(!a||a.error)c.assert(!1,"[Unsuccessful Response] The data from the server is not received successfully -\x3e"+(a?a.error:""));a.functionHintsResults&&
this._showTooltip(a.functionHintsResults);return!0},_showTooltip:function(a){var c=this._tooltipInfo.tooltipDialog;c.set("content",a);b.open({popup:c,around:this._functionHintsHolder,orient:["below-centered","below","above-centered","above"],onCancel:f.hitch(this,"_closeTooltip")});this._tooltipInfo={tooltipDialog:c,isTooltipOpen:!0};this._tooltipInfo.tooltipDialog.set("data-testid","functionHints_visible")},_closeTooltipOnRightClick:function(a){a&&k.isRight(a)&&this._closeTooltip()},_closeTooltip:function(){this._isCancelled=
!0;return this._tooltipInfo&&this._tooltipInfo.isTooltipOpen?(this._tooltipInfo.tooltipDialog.set("data-testid","functionHints_hidden"),b.close(this._tooltipInfo.tooltipDialog),this._resetHolderPosition(),this._tooltipInfo.isTooltipOpen=!1,!0):!1},dispose:function(){this._closeTooltip();this._tooltipInfo.tooltipDialog.destroy();d.destroy(this._functionHintsHolder);this._tooltipInfo=null;this._handles.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./FunctionService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.editordataservice","rtc.internaldocument"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionService":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","./FunctionDeclaration","./FunctionDeclarationUtils"],function(h,f,g,e,d){return h(g,{_MATLAB_FUNCTIONS_FEATURE_ID:"matlab.code.functions",
_DEFAULT_FUNCTION_NAME:"untitled",constructor:function(c,b){this._internalDocument=b;this._functionsInfo=[];this._functionDeclarations=null;this._edsHandle=c.listenTo(this._MATLAB_FUNCTIONS_FEATURE_ID,f.hitch(this,"_handleEDSCallback"))},destroy:function(){this.inherited(arguments);this._edsHandle.remove()},_handleEDSCallback:function(c){this._functionsInfo=c.functionsInfo;this._expandFunctionBounds();this._functionDeclarations=null},_expandFunctionBounds:function(){if(this._functionsInfo&&!(0<!this._functionsInfo.length)){var c=
this._functionsInfo[0];c.isTopLevelFunction&&!this._functionsInfo[1]&&(c.endLine=this._internalDocument.getMaxLineNumber()+1)}},getFunctionsInfo:function(){return this._functionsInfo},getLocalFunctionsInfo:function(){return this._filterForLocalFunctions(this._functionsInfo)},getTopLevelFunctionInfo:function(){return this._filterForTopFunction(this._functionsInfo)},getAllFunctionDeclarations:function(){return this.getFunctionDeclarations().map(function(c){return d.flattenFunctionDeclaration(c)}).reduce(function(c,
b){return c.concat(b)},[])},getFunctionDeclarations:function(){this._functionDeclarations||this._buildFunctionDeclarations();return this._functionDeclarations},_buildFunctionDeclarations:function(){this._functionDeclarations=this._functionsInfo.map(function(c){return new e(c)})},isFunction:function(c){return!!this._getLocalFunctionInfoByName(c)},getFunctionDeclarationByName:function(c){return(c=this._getLocalFunctionInfoByName(c))?new e(c):null},_getLocalFunctionInfoByName:function(c){var b=null;
this._functionsInfo.some(function(a){return a.functionName===c?(b=a,!0):!1});return b},isLineInFunction:function(c){return!!this._getLocalFunctionInfoByLine(c)},_getLocalFunctionInfoByLine:function(c){var b=null;this._functionsInfo.some(function(a){return c>=a.startLine&&c<=a.endLine?(b=a,!0):!1});return b},isNewLocalFunctionName:function(c){return!this.isFunction(c)},getUniqueFunctionName:function(){var c=this._DEFAULT_FUNCTION_NAME,b=c.length,a=RegExp("^"+this._DEFAULT_FUNCTION_NAME+"\\d*$"),d=
this.getLocalFunctionsInfo().filter(function(b){return a.test(b.functionName)}).map(function(a){return a.functionName.slice(b)}).reduce(function(a,b){return Math.max(a,b)},-Infinity);return-Infinity<d?c+(d+1):c},_filterForLocalFunctions:function(c){return c.filter(function(b){return!b.isTopLevelFunction})},_filterForTopFunction:function(c){return c.filter(function(b){return b.isTopLevelFunction})}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionDeclaration":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(f){this._data=f},getStartLine:function(){return this._data.startLine},getStartColumn:function(){return this._data.startLine},getEndLine:function(){return this._data.endLine},getEndColumn:function(){return this._data.endColumn},getName:function(){return this._data.functionName},getInputArgumentNames:function(){return this._data.functionInputArguments},getOutputArgumentNames:function(){return this._data.functionOutputArguments},getNestedFunctionDeclarations:function(){var f=
this.constructor;return this._data.nestedFunctions.map(function(g){return new f(g)})},isTopLevelFunction:function(){return this._data.isTopLevelFunction}})})},"MW/rtc/plugins/language/matlab/syntax/functions/FunctionDeclarationUtils":function(){define([],function(){return{flattenFunctionDeclaration:function(h){return h.getNestedFunctionDeclarations().reduce(function(f,g){return f.concat(this.flattenFunctionDeclaration(g))}.bind(this),[h])}}})},"MW/rtc/plugins/functionnotifier/FunctionArgumentNotifierProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/FunctionArgumentNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,f,g,e,d){return h(g,{isApplicable:function(c){return d.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.cursor"]}},createInstance:function(c,b){return new e(c,b)}})})},"MW/rtc/plugins/functionnotifier/FunctionArgumentNotifier":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/plugins/functionnotifier/FunctionUtilities MW/rtc/plugins/functionnotifier/FunctionStateConstants".split(" "),
function(h,f,g,e,d,c,b){return h(e,{constructor:function(a,b){this._document=a;this._cursor=b;this._lastEventObject=null;this.own(g.after(b,"onChange",f.hitch(this,"_checkFunctionArgsNavigation")))},onFunctionNavigationNotify:function(a){},getFunctionInfo:function(){return this._lastEventObject.functionInfo},_checkFunctionArgsNavigation:function(){var a={},c=this._getFunctionInfoForCursorPosition();if(c){var a=!0,d=null;this._lastEventObject&&this._lastEventObject.functionInfo&&(d=this._lastEventObject.functionInfo,
a=d.functionName!==c.functionName);a?(c.relation=this._checkForRelationship(c,d),a={type:b.FUNCTION_ARGS_NAVIGATE_ENTER,functionInfo:c}):a=this._lastEventObject.functionInfo.currentArgumentNumber!==c.currentArgumentNumber?{type:b.FUNCTION_ARGS_NAVIGATE_CHANGE,functionInfo:c}:{type:b.FUNCTION_ARGS_NAVIGATE,functionInfo:c}}else a.type=b.FUNCTION_ARGS_NAVIGATE_EXIT;this._notifyFunctionInfoChanged(a)},_notifyFunctionInfoChanged:function(a){this._lastEventObject=a;this.onFunctionNavigationNotify(a)},_getFunctionInfoForCursorPosition:function(){var a=
this._getCodeLineInfoUnderCursor();return!a?null:c.getFunctionArgsInfoForOffset(a.lineText,a.column-1,a.line-1)},_getCodeLineInfoUnderCursor:function(){var a=this._cursor.selectionInfo();if(!d.isCodeInRange(a.startNode,a.endNode))return null;a=this._cursor.getLineColumn();return{lineText:this._document.getLineText(a.line),line:a.line,column:a.column}},_checkForRelationship:function(a,c){return!c||a.line!==c.line||-1===a.line?null:a.functionCallDepth>c.functionCallDepth?b.INNER_NESTED_FUNCTION_CALL:
b.OUTER_NESTED_FUNCTION_CALL}})})},"MW/rtc/plugins/functionnotifier/FunctionUtilities":function(){define(["mw-utils/Utils"],function(h){return{functionComparator:function(f,g){return f===g?!0:f.functionName===g.functionName&&f.startLine===g.startLine&&f.startColumn===g.startColumn&&f.endLine===g.endLine&&f.endColumn===g.endColumn&&f.isTopLevelFunction===g.isTopLevelFunction&&h.arrayEquals(f.functionInputArguments,g.functionInputArguments)&&h.arrayEquals(f.functionOutputArguments,g.functionOutputArguments)&&
h.arrayEquals(f.nestedFunctions,g.nestedFunctions,this.functionComparator)},getFunctionArgsInfoForOffset:function(f,g,e){var d={};if(!f)return null;var c=f.substring(0,g),b=f.substring(g,f.length),a=this._getLastUnClosedOpenParen(c);if(-1==a)return null;c=c.substring(0,a).split(" ").pop();if(!c.trim())return null;d.functionName=c;b=b.indexOf(")");d.isArgsEnclosed=-1!==b;d.isArgsEnclosed?(b=f.substring(a,g+b),d.totalArgsEnclosed=b.split(",").length):d.totalArgsEnclosed=0;a=f.substring(a,g);d.currentArgumentNumber=
a.split(",").length;d.text=f.substring(0,g);d.line=e;d.functionCallDepth=this._getUnclosedParenCountTillOffset(d.text);return d},_getLastUnClosedOpenParen:function(f){var g=f.length,e=f.lastIndexOf("(");if(-1==e)return e;var d=f.substring(0,e),c=f.substring(e,g).indexOf(")");-1<c&&(c=e+c,f=d+"@"+f.substring(e+1,c)+"#"+f.substring(c+1,g),e=this._getLastUnClosedOpenParen(f));return e},_getUnclosedParenCountTillOffset:function(f){var g=f.split("(").length-1;f=f.split(")").length-1;return g-f}}})},"MW/rtc/plugins/functionnotifier/LocalFunctionNotifierProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/LocalFunctionNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,f,g,e,d){return h(g,{isApplicable:function(c){return d.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.functionservice","rtc.code.codeanalyzermodel"]}},createInstance:function(c,b){return new e(c,b)}})})},"MW/rtc/plugins/functionnotifier/LocalFunctionNotifier":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier"],function(h,f,g,e){return h(e,{constructor:function(d,c){this._functionService=d;this._codeAnalyzerModel=c},getFunctionInfoOfDesiredFunctions:function(){return this._functionService.getLocalFunctionsInfo()}})})},"MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/plugins/functionnotifier/FunctionUtilities MW/rtc/plugins/functionnotifier/FunctionStateConstants mw-utils/Utils".split(" "),
function(h,f,g,e,d,c,b,a){return h(e,{constructor:function(a,b){this._functionService=a;this._codeAnalyzerModel=b;this.own(g.after(this._codeAnalyzerModel,"onDocumentChangeWithNoSyntaxErrors",f.hitch(this,"_validFunctionsHandler")));this._updatedValidFunctionInfo=[]},onValidFunctionsChange:function(a){},getFunctionInfoOfDesiredFunctions:function(){throw"Unimplemented API in AbstractFunctionNotifier";},_validFunctionsHandler:function(){var a=this.getFunctionInfoOfDesiredFunctions(),c={};0<a.length?
(1>this._updatedValidFunctionInfo.length?c.type=b.VALID_FUNCTIONS_ADDED:this._hasFunctionsChanged(a)?c.type=b.VALID_FUNCTIONS_CHANGED:c.type=b.FUNCTIONS_ON_VALID_DOCUMENT_CHANGE,this._updatedValidFunctionInfo=a,c.validFunctions=this._updatedValidFunctionInfo,this.onValidFunctionsChange(c)):0<this._updatedValidFunctionInfo.length&&(this._updatedValidFunctionInfo=[],c={type:b.VALID_FUNCTIONS_REMOVED},this.onValidFunctionsChange(c))},_hasFunctionsChanged:function(b){return!a.arrayEquals(b,this._updatedValidFunctionInfo,
f.hitch(c,"functionComparator"))}})})},"MW/rtc/plugins/functionnotifier/AllFunctionNotifierProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/AllFunctionNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,f,g,e,d){return h(g,{isApplicable:function(c){return d.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.functionservice",
"rtc.code.codeanalyzermodel"]}},createInstance:function(c,b){return new e(c,b)}})})},"MW/rtc/plugins/functionnotifier/AllFunctionNotifier":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier"],function(h,f,g,e){return h(e,{constructor:function(d,c){this._functionService=d;this._codeAnalyzerModel=c},getFunctionInfoOfDesiredFunctions:function(){return this._functionService.getFunctionsInfo()}})})},"MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifierProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifier","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,f,g,e,d){return h(g,{isApplicable:function(c){return d.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.functionservice","rtc.code.codeanalyzermodel"]}},createInstance:function(c,b){return new e(c,b)}})})},"MW/rtc/plugins/functionnotifier/TopLevelFunctionNotifier":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/functionnotifier/AbstractFunctionNotifier"],function(h,f,g,e){return h(e,{constructor:function(d,c){this._functionService=d;this._codeAnalyzerModel=c},getFunctionInfoOfDesiredFunctions:function(){return this._functionService.getTopLevelFunctionInfo()}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlActionHandler"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.cursor rtc.actionservice matlab.tokens rtc.livecontrols.contextmanager rtc.livecontrols.toolstrip rtc.livecontrols.widgethandler rtc.document".split(" ")}},createInstance:function(e,d,c,b,a,f,h,m,q){return new g(e,d,c,b,a,f,h,m,q)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActionHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/SelectionUtilities MW/rtc/model/DocumentConstants MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActions MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(d,{_EMPTY_WIDGET_VALUE:"",constructor:function(a,b,c,d,h,k,l,m){this._internalDocument=a;this._cursor=b;this._actionService=c;this._tokenService=d;this._document=m;this._contextManager=h;this._liveControlToolstripActions=k;this._widgetHandler=l;a=[{id:"rtc_live_control_delete",enabled:!0,key:"delete",callback:f.hitch(this,"_handleNavigation",{keyCode:e.DELETE},!0)},{id:"rtc_live_control_tab",enabled:!0,key:"tab",callback:f.hitch(this,"_handleNavigation",
{keyCode:e.TAB},!0)},{id:"rtc_live_control_right",enabled:!0,key:"right",callback:f.hitch(this,"_handleNavigation",{keyCode:e.RIGHT_ARROW},!0)},{id:"rtc_live_control_left",enabled:!0,key:"left",callback:f.hitch(this,"_handleNavigation",{keyCode:e.LEFT_ARROW})},{id:"rtc_live_control_backspace",enabled:!0,key:"backspace",callback:f.hitch(this,"_handleNavigation",{keyCode:e.BACKSPACE})}];c.loadActions(a);this.own(g.after(this._cursor,"onChange",f.hitch(this,"_handleCursorChange")));this.own(g.after(this._document,
"onPreDeletion",f.hitch(this,"_handlePreDeletion")));this.own(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_handleDocumentChange"),!0));this.own(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_updateControlState")));this.own(g.after(this._internalDocument,"readOnlyChanged",f.hitch(this,"_updateControlState")))},_handleNavigation:function(a,b){if(this._cursor.hasSelection())return!1;var c=this._cursor.getNode(),d=this._cursor.getLineColumn();return b?this._navigateToControlAfterCursor(a,
c,d):this._navigateToControlBeforeCursor(a,c,d)},_navigateToControlAfterCursor:function(a,b,c){b=m.getControlAfterCursor(b,c);return this._sendEventToEnabledWidget(b,a)},_navigateToControlBeforeCursor:function(a,b,c){b=m.getControlBeforeCursor(b,c);return this._sendEventToEnabledWidget(b,a)},_sendEventToEnabledWidget:function(a,b){if(!a)return!1;var c=a.widget;return q.getDisabled(c)?this._handleForDisabledWidget(a,b.keyCode):c.navigate(b)},_handleForDisabledWidget:function(a,b){return b===e.BACKSPACE||
b===e.DELETE?(this._widgetHandler.replaceControlWithText(a),!0):!1},_handleCursorChange:function(){this._actionService.updateAction(k.CONFIGURE_CONTROL,{enabled:!1});if(this._internalDocument.isReadOnly()||this._cursor.isCursorReadOnly()||this._isCursorInCommentedCode())this._resetModelAndUpdateActions(!1);else{var a=this._cursor.getSelection();if(a){var b=this._cursor.getSelectionLineColumn();b.start.line!==b.end.line?this._resetModelAndUpdateActions(!1):m.isLiveControlNodeInRange(a)?this._resetModelAndUpdateActions(!1):
(a=this._parseSelection(),this._widgetHandler.update(a))}else this._resetModelAndUpdateActions(!0)}},_isCursorInCommentedCode:function(){var a=this._cursor.getLineColumn(),b=a.line,a=a.column,c=this._tokenService.getTokensOnLine(b-1);return m.isCursorInCommentedCode(b,a,c)},_resetModelAndUpdateActions:function(a){this._contextManager.reset();this._liveControlToolstripActions.updateAllActions(a)},_parseSelection:function(){var a=this._cursor.selectedText(),b=m.getWidgetType(a);this._contextManager.createContextAndSetup({selectedText:a});
return{text:a,widgetType:b}},_handlePreDeletion:function(){var a=this._cursor.getSelection();if(!a)return!1;a=b.trimTrailingLineBreak(a);if(!m.isLiveControlNodeInRange(a))return!1;var c=this._cursor.getSelectionLineColumn();m.getLiveControlNodesInRange(a).forEach(function(a){this._replaceNodeWithText(a)},this);a=c.start;c=c.end;this._cursor.setSelectionLineColumn(a.line,a.column,c.line,c.column);return!1},_replaceNodeWithText:function(a){var b=a.startPosition().getLineColumn(),c=a.getText();this._internalDocument.deleteNode(a);
this._document.insertText(c,b.line,b.column)},_handleDocumentChange:function(a){for(var b=0;b<a.length;b++){var c=a[b];this._enableDisableControlInLines(c.startLine,c.endLine)}},_updateControlState:function(){this._enableDisableControlInLines(0,this._internalDocument.getMaxLineNumber()-1)},_enableDisableControlInLines:function(a,b){for(var d=a;d<=b;d++){var e=this._internalDocument.getLineNode(d);if(e&&c.isCodeContainer(e)){var f=e.children;f&&0!==f.length&&(e.isReadOnly()?m.setDisabledPropertyOfControlInNodes(f,
!0):(e=this._tokenService.getTokensOnLine(d),m.enableOrDisableControl(e,f)))}}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActions":function(){define([],function(){return{CONFIGURE_CONTROL:"rtc_configure_live_control",NUMERIC_SLIDER_INSERT_ACTION:"rtc_insert_slider",COMBO_BOX_INSERT_ACTION:"rtc_insert_combo_box"}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlUtilities":function(){define("MW/rtc/model/RangeUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes MW/rtc/plugins/language/matlab/codingui/utilities/CodingUIUtilities MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities".split(" "),
function(h,f,g,e,d,c){return{getControlAfterCursor:function(b,a){var c=b.startPosition().getLineColumn();if(this._isNodeALiveControlNodeAndNextToCursor(b,c,a))return b;c=b.nextNode();if(!c)return null;var d=c.startPosition().getLineColumn();return this._isNodeALiveControlNodeAndNextToCursor(c,d,a)?c:null},getControlBeforeCursor:function(b,a){var c=b.endPosition().getLineColumn();if(this._isNodeALiveControlNodeAndNextToCursor(b,c,a))return b;c=b.prevNode();if(!c)return null;var d=c.endPosition().getLineColumn();
return this._isNodeALiveControlNodeAndNextToCursor(c,d,a)?c:null},_isNodeALiveControlNodeAndNextToCursor:function(b,a,c){return b instanceof f&&a.line===c.line&&a.column===c.column},isLiveControlNodeInRange:function(b){return h.isNodeTypeInRange(b,f)},getLiveControlNodesInRange:function(b){return h.getNodesInRangeOfNodeType(b,f)},isCursorInCommentedCode:function(b,a,c){b=this.getCommentStartColumnOnLine(c);return-1===b?!1:a>b},getCommentStartColumnOnLine:function(b){if(!b)return-1;for(var a=-1,d=
0;d<b.length;d++)if(c.isCommentToken(b[d])){a=b[d].getPositionInfo().column+1;break}return a},getWidgetType:function(b){return!isNaN(b)&&""!==b.trim()?e.SCALAR:d.isMatlabString(b)?e.STRING:e.NONE},enableOrDisableControl:function(b,a){for(var c=this.getCommentStartColumnOnLine(b),d=0;d<a.length;d++){var e=a[d];if(e instanceof f){var h=e.startPosition().getLineColumn().column-1,e=e.getWidget();-1===c?g.setDisabled(e,!1):g.setDisabled(e,h>c-1)}}},setDisabledPropertyOfControlInNodes:function(b,a){for(var c=
0;c<b.length;c++){var d=b[c];d instanceof f&&g.setDisabled(d.getWidget(),a)}}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities":function(){define([],function(){return{_CONTROL_EDIT_MODE_PROPERTY:"editMode",_CONTROL_DATA_PROPERTY:"data",_CONTROL_VALUE_PROPERTY:"value",_CONTROL_DISABLED_PROPERTY:"disabled",_CONTROL_POSITION_PROPERTY:"position",getEditMode:function(h){return h.get(this._CONTROL_EDIT_MODE_PROPERTY)},getData:function(h){return h.get(this._CONTROL_DATA_PROPERTY)},
getValue:function(h){return h.get(this._CONTROL_VALUE_PROPERTY)},getDisabled:function(h){return h.get(this._CONTROL_DISABLED_PROPERTY)},setEditMode:function(h,f){h.set(this._CONTROL_EDIT_MODE_PROPERTY,f)},setDisabled:function(h,f){h.set(this._CONTROL_DISABLED_PROPERTY,f)},setPosition:function(h,f){h.set(this._CONTROL_POSITION_PROPERTY,f)}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes":function(){define({SCALAR:"scalar",NONE:"none",STRING:"string",SLIDER:"slider",COMBO_BOX:"comboBox"})},
"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlContextManager"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContextManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin",
"./LiveControlContext"],function(h,f,g,e,d){return h(e,{constructor:function(){this._context=null},createContextAndSetup:function(c){this._cleanupOldContext();c=new d(c);this._setContext(c)},_cleanupOldContext:function(){this._context=null},_setContext:function(c){this._context=c},getContext:function(){return this._context},reset:function(){this._cleanupOldContext()},destroy:function(){this._cleanupOldContext()}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlContext":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(f){this.selectedText=f.selectedText}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecutionProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlExecution"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.code.sections.model","rtc.embeddedoutputs.viewservice"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlExecution":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h(e,{_EXECUTION_TIMEOUT:1E3,constructor:function(d,c){this._sectionModel=d;this._viewService=c},execute:function(d){d=this._sectionModel.getSectionNumberForLine(d);this._viewService.executeSectionWithVisualDelay(d,!1,!1,this._EXECUTION_TIMEOUT)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertionProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./LiveControlInsertion"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","rtc.livecontrols.contextmanager"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlInsertion":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/events/DocumentEvent MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetDetails".split(" "),
function(h,f,g,e,d,c,b,a){return h(e,{constructor:function(a,b,c,d,e){this._internalDocument=a;this._document=b;this._cursor=c;this._actionService=d;this._contextManager=e;this._loadActions();this.own(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_handleDocumentReset")))},_loadActions:function(){var b=[{id:"rtc_insert_live_control",enabled:!1,callback:f.hitch(this,function(){})}],c;for(c in a){var d=a[c],e=d.actionId,d={id:e,enabled:!0,callback:f.hitch(this,"_insertLiveControlNode",
{type:c,id:e,value:d.defaultValue})};b.push(d)}this._actionService.loadActions(b)},_handleDocumentReset:function(){this._actionService.updateAction("rtc_insert_live_control",{enabled:!0})},_insertLiveControlNode:function(a){if(!this._actionService.getAction(a.id).enabled)return!1;var e=this._document.startBlockEdit();a=this._createNodeData(a);a=new c(a);var f=this._internalDocument.insertAtPosition(a,this._cursor.position),g=this._cursor.position.getLineColumn().line-1,h=a.startPosition().getLineColumn().line-
1;e.appendUndoEvents([d.create(g,h)]);f=f.events;e.appendRedoEvents(f);this._internalDocument.emitDocumentEvents(f);f=a.endPosition().getLineColumn();this._cursor.setLineColumn(f.line,f.column);this._document.endBlockEdit(e);b.setEditMode(a.widget,!0);return!0},_createNodeData:function(a){var b=a.type;a=a.value;var c=this._contextManager.getContext();c&&(a=c.selectedText.trim(),this._document.deleteTextAtCurrentPosition());return{context:{type:b,data:{value:a}}}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetDetails":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActions",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes"],function(h,f){var g={};g[f.SLIDER]={actionId:h.NUMERIC_SLIDER_INSERT_ACTION,defaultValue:0,key:"ctrl_shift_s"};g[f.COMBO_BOX]={actionId:h.COMBO_BOX_INSERT_ACTION,defaultValue:"",key:"ctrl_shift_c"};return g})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActionsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlToolstripActions"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:["rtc.actionservice"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlToolstripActions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetDetails"],function(h,f,g,e,d){return h(e,{constructor:function(c){this._actionService=c},updateActions:function(c){for(var b in d){var a=
d[b],e=!1;-1<c.indexOf(b)&&(e=!0);this._actionService.updateAction(a.actionId,{enabled:e})}},updateAllActions:function(c){for(var b in d)this._actionService.updateAction(d[b].actionId,{enabled:c})}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlWidgetHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.livecontrols.viewmodel rtc.view rtc.cursor rtc.internaldocument rtc.document rtc.livecontrols.execution rtc.livecontrols.toolstrip".split(" ")}},
createInstance:function(e,d,c,b,a,f,h){return new g(e,d,c,b,a,f,h)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlWidgetHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/keys MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/events/InsertTextEvent MW/rtc/model/events/DeletionEvent MW/rtc/model/events/DocumentEvent MW/rtc/view/ViewEventUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/ValidWidgetsManifest MW/rtc/plugins/undoredo/EditBlockConstants".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h(d,{_BOTTOM_MAX_HEIGHT:100,_BOTTOM_OFFSET:5,constructor:function(a,b,c,d,e,h,k){this._view=b;this._cursor=c;this._internalDocument=d;this._document=e;this._liveControlExecution=h;this._liveControlToolstripActions=k;this.own(g.after(a,"onKeyEvents",f.hitch(this,"_handleKeyEvents"),!0));this.own(g.after(a,"onControlChange",f.hitch(this,"_handleControlChange"),!0));this.own(g.after(a,"onEditModeStart",f.hitch(this,"_handleEditModeStart"),!0));this.own(g.after(a,
"onEditModeEnd",f.hitch(this,"_handleEditModeEnd"),!0))},_handleKeyEvents:function(a,b){if(a)switch(a.mwEventData.keyCode){case e.LEFT_ARROW:var d=b.startPosition();this._cursor.setPosition(d);break;case e.RIGHT_ARROW:case e.TAB:case e.ENTER:d=b.endPosition();this._cursor.setPosition(d);break;case e.BACKSPACE:this.replaceControlWithText(b,c.BACKWARD_DELETE);break;case e.DELETE:this.replaceControlWithText(b,c.FORWARD_DELETE)}},replaceControlWithText:function(b,d){var e=this._document.startBlockEdit(),
f=b.startPosition().getLineColumn(),g=b.endPosition().getLineColumn(),h=b.getText();this._document.replaceText(h,f.line,f.column,g.line,g.column);g=this._cursor.getLineColumn().line;g=[a.create(g-1,g-1,0)];d===c.BACKWARD_DELETE?this._cursor.setLineColumn(f.line,f.column+h.length):d===c.FORWARD_DELETE&&this._cursor.setLineColumn(f.line,f.column);e.appendUndoEvents(g);e.appendRedoEvents(g);this._internalDocument.emitDocumentEvents(g);this._document.endBlockEdit(e)},update:function(a){this._liveControlToolstripActions.updateActions(q[a.widgetType])},
_handleControlChange:function(a,b,c){var d=a.getWidget(),d=m.getValue(d).toString();c?this._updateNodeIntermediately(a,d):this._updateNodeAndRecord(a,d);var d=a.startPosition().getLine()-1,e=[k.create(d,d)];this._internalDocument.emitDocumentEvents(e);c||a.widget.focus();b.mwEventData.oldValue!==b.mwEventData.newValue&&this._liveControlExecution.execute(d)},_handleEditModeStart:function(a){this._cursor.collapseSelection();var b=this._view.getCoordinateForPosition(a.startPosition());this._getTopYCoordinate(b)+
this._BOTTOM_MAX_HEIGHT>window.innerHeight?m.setPosition(a.widget,"top"):m.setPosition(a.widget,"bottom")},_getTopYCoordinate:function(a){var b=this._view.getDomtarget().getBoundingClientRect().top,c=this._view.getDomTargetPosition().scrollTop;return a.y+b-c},_handleEditModeEnd:function(a){var b=a.getWidget(),b=m.getValue(b).toString();""===b?this._deleteNode(a):this._updateNode(a,b);this._view.onViewUpdated([l.createEvent(l.EVENTS.renderUpdate)])},_deleteNode:function(b){var c=b.startPosition().getLineColumn().line-
1,d=this._document.startEdit(this._getUndoRedoBlockType(b));this._internalDocument.deleteNode(b);b.widget.destroy();b.widget=null;b=[a.create(c,c,0)];d.appendUndoEvents(b);d.appendRedoEvents(b);this._document.endEdit(d);this._internalDocument.emitDocumentEvents(b)},_updateNode:function(a,b){var c=this._updateNodeAndRecord(a,b);this._internalDocument.emitDocumentEvents(c)},_updateNodeIntermediately:function(a,b){a.intermediateEvalText=b},_updateNodeAndRecord:function(c,d){if(!this._shouldUpdate(c,
d))return[];var e=c.getText(),f=c.startPosition(),g=f.getLine()-1,h=f.getColumn()-1,l=this._document.startEdit(this._getUndoRedoBlockType(c)),m=[k.create(g,g)];if(d!==e){this._internalDocument.updateTextInNode(c,d,0,e.length);var n=[a.create(g,g,h),b.create(g,g,f,e)],q=[b.create(g,g,f,d),a.create(g,g,h)]}this._internalDocument.changeNodeAttributes(c,{context:this._createContextFromWidget(c)});c.intermediateEvalText=null;l.appendUndoEvents(n||m);l.appendRedoEvents(q||m);this._document.endEdit(l);return q||
m},_shouldUpdate:function(a,b){if(a.getText()!==b)return!0;var c=this._createContextFromWidget(a);return!a.isContextEqualTo(c)?!0:!1},_createContextFromWidget:function(a){return{type:a.getType(),data:m.getData(a.getWidget())}},_getUndoRedoBlockType:function(a){return" "===a.getText()?n.AUTO:null}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/ValidWidgetsManifest":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes"],function(h){var f={};f[h.SCALAR]=[h.SLIDER,
h.COMBO_BOX];f[h.NONE]=[h.COMBO_BOX];f[h.STRING]=[h.COMBO_BOX];return f})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeContentConverter":function(){define(["dojo/_base/declare",
"MW/rtc/nodes/contentconverter/base/LeafNodeContentConverter","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlNodeExecutableCodeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNodeExecutableCodeConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/executablecode/executablecodeconverter/base/AbstractExecutableCodeConverter","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode"],function(h,f,g){return h(f,{constructor:function(){},getApplicableNodeClass:function(){return g},getEvalTextFromNode:function(e){return e.intermediateEvalText||
e.text}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/converters/LiveControlCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/model/Position",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode","MW/rtc/view/coordinateconverter/base/OpaqueBoxCoordinateConverter","MW/rtc/view/coordinateconverter/CoordinateConverterUtilities"],function(h,f,g,e,d){return h(e,{BOUNDARY_OFFSET:1,getApplicableNodeClass:function(){return g},getCoordinateFromPosition:function(c){var b=this.inherited(arguments),a=c.getOffset();a===c.getNode().maxOffset()?(b.x+=this.BOUNDARY_OFFSET,b.pageX+=this.BOUNDARY_OFFSET):0===a&&(b.x-=this.BOUNDARY_OFFSET,
b.pageX-=this.BOUNDARY_OFFSET);return b},getPositionFromCoordinate:function(c,b){var a=this._getClientRects(b)[0];if(!d.isCoordinateWithinRect(c,a))return null;var e=0;c.x>=a.left+a.width/2&&(e=b.maxOffset());return new f(b,e)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlViewModel"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.actionservice","rtc.view.decoration.viewmodel"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlViewModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/aspect dojo/i18n!l10n/nls/actions dojo/on MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/language/matlab/codingui/livecontrols/LiveControlActions MW/rtc/plugins/language/matlab/codingui/livecontrols/utilities/LiveControlWidgetUtilities MW/rtc/plugins/language/matlab/codingui/livecontrols/manifest MW/rtc/view/decoration/DecorationUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h(b,{_LIVE_CONTROL_INNER_NODE:"liveControlInnerNode",_LIVE_CONTROL_DIV:"liveControlDiv",_LIVE_CONTROL_TEXT_VIEW:"liveControlTextView",constructor:function(b,c,e){this._internalDocument=b;this._actionService=c;this._decorationViewModel=e;b=[{id:a.CONFIGURE_CONTROL,enabled:!1,contextMenuGroup:"RichText",callback:f.hitch(this,"_handleConfigureControl"),text:d.configureControl}];c.loadActions(b);this._rightClickedWidget=null},_handleConfigureControl:function(){this._rightClickedWidget&&
k.setEditMode(this._rightClickedWidget,!0);this._updateConfigureControlAction(!1)},_updateConfigureControlAction:function(b){this._actionService.updateAction(a.CONFIGURE_CONTROL,{enabled:b})},createLiveControl:function(a){var b=this._createWrapperDomNode(),c=this._createWidgetView(a,b);b.appendChild(c);a=this._createTextView(a);b.appendChild(a);return b},updateTextView:function(a,b){var c=this._createTextView(a),d=b.querySelector("."+this._LIVE_CONTROL_TEXT_VIEW);d.parentNode.replaceChild(c,d)},_createWrapperDomNode:function(){var a=
g.create("div",{"class":this._LIVE_CONTROL_INNER_NODE});c(a,"pointerdown, mousedown",f.hitch(this,function(a){a.stopPropagation()}));return a},_createTextView:function(a){var b=a.getText(),c=g.create("span");a=this._decorationViewModel.getDecoration(a);b=m.createViewForTextNode(b,a,c);c=g.create("div",{"class":this._LIVE_CONTROL_TEXT_VIEW});c.appendChild(b);return c},_createWidgetView:function(a){var b=g.create("div",{"class":this._LIVE_CONTROL_DIV}),c=a.widget;c?(c.set("data",a.getContextData()),
c.placeAt(b)):(c=this._createAndSetWidget(a),c.placeAt(b),c.startup());return b},_createAndSetWidget:function(a){var b=new (l[a.getType()])({data:a.getContextData()});a.setWidget(b);a.setContextData(k.getData(b));this._attachListenersOnWidget(a);return b},_attachListenersOnWidget:function(a){var b=a.widget;b.on("change",f.hitch(this,function(b){this._handleChangeEvent(a,b)}));b.on("changing",f.hitch(this,function(b){this._handleChangingEvent(a,b)}));b.on("rightclick",f.hitch(this,function(){this._handleRightClick(b)}));
b.on("keyuponwidgets",f.hitch(this,function(b){this.onKeyEvents(b,a)}));b.watch("editMode",f.hitch(this,function(){this._handleEditModeChange(a)}))},_handleChangeEvent:function(a,b){this.onControlChange(a,b,!1)},_handleChangingEvent:function(a,b){this.onControlChange(a,b,!0)},_handleEditModeChange:function(a){if(k.getEditMode(a.widget))this.onEditModeStart(a),this._updateConfigureControlAction(!1);else this.onEditModeEnd(a)},_handleRightClick:function(a){k.getEditMode(a)||(this._updateConfigureControlAction(!0),
this._rightClickedWidget=a)},onControlChange:function(a,b,c){},onEditModeStart:function(a){},onEditModeEnd:function(a){},onKeyEvents:function(a,b){}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/manifest":function(){define(["MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlSlider","MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlComboBox","MW/rtc/plugins/language/matlab/codingui/livecontrols/WidgetTypes"],function(h,f,g){var e={};e[g.SLIDER]=
h;e[g.COMBO_BOX]=f;return e})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlSlider":function(){define("dojo/_base/declare dojo/keys dijit/_WidgetBase dijit/registry mw-form/TextField mw-event-utils/doubleClickHandler MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/HorizontalSlider MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/SliderWidgetUtility MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/EditableMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DataMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DisabledMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/PositionMixin dojo/i18n!l10n/nls/liveControls".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){h=h([g,m,q,l,n],{baseClass:"mwLiveControlSlider",type:"Slider",value:0,dataProperties:["minimum","maximum","value","step"],constructor:function(){this.slider=new a;this.own(this.slider)},buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("tabindex","-1");this.domNode.setAttribute("data-focus","temporary");this.valueContainer=b.buildNode("div",{className:"valueContainer",parent:this.domNode},"mwLiveControlSlider");this.valueNode=b.buildNode("div",
{className:"value",parent:this.valueContainer},"mwLiveControlSlider");this.widgetContainer=b.buildNode("div",{className:"mwSliderContainer",parent:this.domNode},"mwLiveControlSlider");this.minLabel=b.buildNode("span",{className:"minLabel",parent:this.widgetContainer},"mwLiveControlSlider");this.maxLabel=b.buildNode("span",{className:"maxLabel",parent:this.widgetContainer},"mwLiveControlSlider");this.widgetContainer.appendChild(this.slider.domNode);this.editorContainer=b.buildNode("div",{className:"mwSliderEditorContainer",
parent:this.widgetContainer},"mwLiveControlSlider")},_setDefaultLimits:function(){var a=this.get("value");if(void 0===this.get("maximum")){var b=a?Math.max(0,2*a):100;this.set("maximum",b)}void 0===this.get("minimum")&&(a=a?Math.min(0,2*a):-100,this.set("minimum",a))},_setValueAttr:function(a){this.slider.set("value",a);this._set("value",a);this.valueNode.textContent=a;this._resizeValueNode()},_setMinimumAttr:function(a){this.slider.set("minimum",a);this.minLabel.textContent=a;this._set("minimum",
a);this._resizeValueNode()},_setMaximumAttr:function(a){this.slider.set("maximum",a);this.maxLabel.textContent=a;this._set("maximum",a);this._resizeValueNode()},_setStepAttr:function(a){this.slider.set("step",a);this._set("step",a)},_getStepAttr:function(){return this.slider.get("step")?this.slider.get("step"):this.slider.get("defaultStep")},_setDisabledAttr:function(a){this.inherited(arguments);this.slider.set("disabled",a)},postCreate:function(){this.inherited(arguments);this.set("value",this.value);
this._setDefaultLimits();this.domNode.addEventListener("focus",this.focus.bind(this));this.slider.focusNode.addEventListener("blur",this._handleSliderBlur.bind(this));this.slider.focusNode.addEventListener("focus",this._handleSliderFocus.bind(this));this._clickCallback=this._handleClick.bind(this);this._doubleClickCallback=this._handleDoubleClick.bind(this);this._doubleClickHandlerCallback=c.createCallback(this._clickCallback,this._doubleClickCallback);this.valueContainer.addEventListener("click",
this._doubleClickHandlerCallback);this.widgetContainer.addEventListener("click",this._handleClick.bind(this));this.widgetContainer.addEventListener("dblclick",this._handleDoubleClick.bind(this));this.domNode.addEventListener("mousedown",this._handleMouseDown.bind(this),!0);this.slider.domNode.addEventListener("mousedragging",this.focus.bind(this),!0);this.slider.domNode.addEventListener("mousedragreleased",this.focus.bind(this),!0);this.slider.domNode.addEventListener("mouseclicked",this.focus.bind(this),
!0);this.domNode.addEventListener("keyup",this._handleKeyUp.bind(this));this.domNode.addEventListener("keydown",this._handleKeyDown.bind(this));this.domNode.addEventListener("change",this._handleChange.bind(this));this._valueWatchHandle=this.slider.watch("value",this._updateValue.bind(this))},focus:function(){this.slider.focusNode.focus()},_handleSliderBlur:function(){this.domNode.classList.remove("mwLiveControlSlider--SliderFocused")},_handleSliderFocus:function(){this.domNode.classList.add("mwLiveControlSlider--SliderFocused")},
_handleChange:function(a){var b=e.getEnclosingWidget(a.target);if(b===this.valueEditor||b===this.minEditor||b===this.maxEditor||b===this.stepEditor)a.stopImmediatePropagation(),a.stopPropagation()},showInPlaceEditor:function(){this._showSliderLimitEditors()},_showSliderValueEditor:function(){this.domNode.classList.add("mwLiveControlSlider--valueEdit");this.valueEditor||this._createEditor("mwValueEditor");this._setValueEditorContent();this._saveEditor=!0},_showSliderLimitEditors:function(){var a=this.valueContainer.getBoundingClientRect().width;
this.editorContainer.style.left="-"+a+"px";0===this.editorContainer.children.length&&(this._createEditor("mwMinEditor"),this._createEditor("mwStepEditor"),this._createEditor("mwMaxEditor"));this._setLimitEditorContents();this._saveEditor=!0},_createEditor:function(a){var c,e;if("mwValueEditor"!==a){var f=b.buildNode("div",{className:"editorWrapper",parent:this.editorContainer},"mwLiveControlSlider");switch(a){case "mwMinEditor":c=p.sliderMinLabel;this.minEditor=e=new d;break;case "mwStepEditor":c=
p.sliderStepLabel;this.stepEditor=e=new d;break;case "mwMaxEditor":c=p.sliderMaxLabel,this.maxEditor=e=new d}b.buildNode("span",{className:"editorLabel",useOwnClass:!0,text:c,parent:f},"mwLiveControlSlider");c=f}else c=this.valueContainer,this.valueEditor=e=new d;e.domNode.classList.add(a);c.appendChild(e.domNode);e.startup();a=this.valueEditor?this.valueContainer.getBoundingClientRect().width:40;e.set("width",a);this._hookUpEditorListeners(e)},_hookUpEditorListeners:function(a){this.get("editMode")?
(this._editorChangeCallback=this._handleInputChanges.bind(this),a.focusNode.addEventListener("change",this._editorChangeCallback)):(this._editorBlurCallback=this._handleValueEditorBlur.bind(this),a.focusNode.addEventListener("blur",this._editorBlurCallback))},_setValueEditorContent:function(){this.valueEditor.set("value",this.get("value"));this.valueEditor.focusNode.focus()},_setLimitEditorContents:function(){this.minEditor.set("value",this.get("minimum"));this.maxEditor.set("value",this.get("maximum"));
this.stepEditor.set("value",this.get("step"));this.minEditor.focusNode.focus()},_handleValueEditorBlur:function(){this.hideInPlaceEditor()},_handleInputChanges:function(){var a=parseFloat(this.stepEditor.focusNode.value),b=parseFloat(this.minEditor.focusNode.value),c=parseFloat(this.maxEditor.focusNode.value),a=this._computeValidSliderProperties(this.get("value"),b,c,a);isNaN(a.max)||this.maxEditor.set("value",a.max);isNaN(a.min)||this.minEditor.set("value",a.min);isNaN(a.step)||this.stepEditor.set("value",
a.step)},hideInPlaceEditor:function(){this._removeEditors();this.domNode.classList.remove("mwLiveControlSlider--valueEdit")},shouldCloseEditor:function(a){var b=!0;this.get("editMode")?this.widgetContainer.contains(a)&&(b=!1):this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&this.valueContainer.contains(a)&&(b=!1);return b},_removeEditors:function(){var a=this._getEditorContentToSave();this._saveEditor&&this._saveSliderChanges(a)},_getEditorContentToSave:function(){var a=[],b=[];
this.get("editMode")?(b.push(this.minEditor),b.push(this.stepEditor),b.push(this.maxEditor)):this.valueEditor&&b.push(this.valueEditor);b&&b.forEach(function(b){var c,d,e={},f=this._validateWidgetTextChanges(b);switch(b){case this.minEditor:c="minimum";d=this.get("minimum");break;case this.stepEditor:c="step";d=this.get("step");break;case this.maxEditor:c="maximum";d=this.get("maximum");break;case this.valueEditor:c="value",d=this.get("value")}f&&(d=b.focusNode.value);e[c]=d;a.push(e)},this);return a},
_validateWidgetTextChanges:function(a){a=a.get("value");return/^[-+]?([0-9]*.?[0-9]+|[0-9]+.?[0-9]*)([eE][-+]?[0-9]+)?$|^$/.test(a)},_saveSliderChanges:function(a){var b,c=this.get("value");if(0!==a.length)if(1===a.length)a=a[0],b=Object.keys(a)[0],b=a[b],b=parseFloat(b),a=this._computeValidSliderProperties(b,this.get("minimum"),this.get("maximum"),this.get("step")),b=a.value,c!==b&&!isNaN(b)&&(this.set("value",b),this.slider._triggerChangeEvent("value",c,b));else{b=parseFloat(a[0].minimum);var d=
parseFloat(a[1].step),e=parseFloat(a[2].maximum);a=this._computeValidSliderProperties(this.get("value"),b,e,d);c!==a.value&&this.set("value",a.value);isNaN(b)||this.set("minimum",a.min);isNaN(d)||this.set("step",a.step);isNaN(e)||this.set("maximum",a.max)}},_computeValidSliderProperties:function(a,b,c,d){var e=Math.abs(c-b);if(c<b){var f=c;c=b;b=f}d>e?d=e:0>=d&&(d=this.get("step"));return{value:a<b?b:a>c?c:a,max:c,min:b,step:d}},_handleClick:function(a){this.valueContainer.contains(a.target)&&!this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&
this._showSliderValueEditor();a.stopPropagation()},_handleDoubleClick:function(a){!this.get("editMode")&&!this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&(this.set("editMode",!0),a.stopPropagation())},_handleMouseDown:function(a){2===a.button&&this.emit("rightclick",{});a.target===this.slider.focusNode&&this.slider.focusNode.focus()},_updateValue:function(a,b,c){this._set("value",c);this.valueNode.textContent=c},_resizeValueNode:function(){var a=this.get("value"),b=this.get("step"),
c=k.findSuitablePrecision(b,a),d=this.get("maximum"),e=d?d.toString().length:0,f=0;-1!==b.toString().indexOf(".")&&(f=parseFloat((d-b).toFixed(c)),f=f.toString().length);var g=this.get("minimum"),d=g?g.toString().length:0,h=0;-1!==b.toString().indexOf(".")&&(c=parseFloat((g-b).toFixed(c)),h=c.toString().length);a=Math.max(d,h,e,f,a.toString().length,b.toString().length);this.valueContainer.style.width=a+"ch"},navigate:function(a){var b=document.activeElement,c=!1;switch(a.keyCode){case f.BACKSPACE:b!==
this.domNode&&!this.get("editMode")&&(this.focus(),this._backSpaceKeyCount=1,c=!0);break;case f.DELETE:b!==this.domNode&&!this.get("editMode")&&(this.focus(),this._deleteKeyCount=1,c=!0);break;case f.LEFT_ARROW:b!==this.domNode&&(this._showSliderValueEditor(),b=document.activeElement,a=b.value.length,b.setSelectionRange(a,a),c=!0);break;case f.RIGHT_ARROW:b!==this.domNode&&(this._showSliderValueEditor(),document.activeElement.setSelectionRange(0,0),c=!0);break;case f.TAB:b!==this.domNode&&(this.focus(),
c=!0)}return c},_handleKeyDown:function(a){a=a.keyCode;var b=document.activeElement;switch(a){case f.LEFT_ARROW:this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&0===b.selectionStart&&(this.hideInPlaceEditor(),this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));break;case f.RIGHT_ARROW:if(this.domNode.classList.contains("mwLiveControlSlider--valueEdit")){var c=this.valueContainer.querySelector(".mwTextField"),c=e.getEnclosingWidget(c);
b.selectionStart===c.focusNode.value.length&&(this.hideInPlaceEditor(),this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}))}break;case f.TAB:b===this.slider.focusNode?(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}})):this.maxEditor&&b===this.maxEditor.focusNode&&(this.set("editMode",!1),this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));break;
case f.ESCAPE:this._saveEditor=!1;this.domNode.classList.contains("mwLiveControlSlider--valueEdit")?this.hideInPlaceEditor():this.get("editMode")&&this.set("editMode",!1);this.emit("restorefocustolastnonrefuseelement");break;case f.ENTER:this.get("editMode")?this.set("editMode",!1):this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&this.hideInPlaceEditor();this.emit("restorefocustolastnonrefuseelement");break;case f.BACKSPACE:b===this.slider.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),
this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));break;case f.DELETE:b===this.slider.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}))}},_handleKeyUp:function(a){a.keyCode===f.TAB&&this.domNode.classList.contains("mwLiveControlSlider--valueEdit")&&(this.hideInPlaceEditor(),this.slider.focusNode.focus())},startup:function(){this.inherited(arguments);this.slider.startup()},destroy:function(){this._valueWatchHandle.unwatch();this.slider.destroy();
this._editorDestroy();this.domNode.removeEventListener("click",this._doubleClickHandlerCallback);this.inherited(arguments)},_editorDestroy:function(){0<this.editorContainer.children.length&&(this.minEditor.focusNode.removeEventListener("change",this._editorChangeCallback),this.maxEditor.focusNode.removeEventListener("change",this._editorChangeCallback),this.stepEditor.focusNode.removeEventListener("change",this._editorChangeCallback),this.minEditor.destroy(),this.maxEditor.destroy(),this.stepEditor.destroy());
this.valueEditor&&(this.valueEditor.focusNode.removeEventListener("blur",this._editorBlurCallback),this.valueEditor.destroy())}});h.BASE_CLASS="mwLiveControlSlider";h.EDIT_MODE_CLASS="mwLiveControlSlider--editMode";h.VALUE_EDIT_CLASS="mwLiveControlSlider--valueEdit";return h})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/HorizontalSlider":function(){define(["dojo/_base/declare","dojo/keys","dijit/_WidgetBase","MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/BaseHorizontalSlider",
"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/SliderWidgetUtility"],function(h,f,g,e,d){return h([g,e],{discrete:!0,minimum:0,maximum:100,value:0,width:150,defaultStep:1,step:null,constructor:function(){this.minorTicks=[];this.majorTicks=[];this.majorTickLabels="     ".split(" ")},postCreate:function(){this.inherited(arguments);this.set("outerWidth",this.get("width")+13);this.set("outerHeight",16);this.set("minimum",this.minimum);this.set("value",this.value);this.domNode.addEventListener("keydown",
this._handleKeyboardEvents.bind(this))},_emitChangeEvent:function(){var c=this.get("value");this._lastChangeValueEmitted!==c&&(this._triggerChangeEvent("value",c,c),this._lastChangeValueEmitted=c)},_triggerChangeEvent:function(c,b,a){this.emit("change",{mwEventData:{propertyName:c,oldValue:b,newValue:a}})},_triggerChangingEvent:function(c,b){this.emit("changing",{mwEventData:{propertyName:"value",oldValue:c,newValue:b}})},_setMinimumAttr:function(c){this.inherited(arguments);this._set("minimum",c);
this._calculateStepSize()},_setMaximumAttr:function(c){this.inherited(arguments);this._set("maximum",c);this._calculateStepSize()},_setValueAttr:function(c){this.inherited(arguments);this._set("value",c);0!==c%1?(this.set("discrete",!1),this._calculateStepSize()):this.set("discrete",!0)},_calculateStepSize:function(){var c=d.findSuitableStepSize(this.get("value"),this.get("maximum"),this.get("minimum"),this.get("discrete"));this.set("defaultStep",c)},_handleKeyboardEvents:function(c){if(!this.get("disabled")){var b=
parseFloat(this.get("value")),a=this.get("step")?this.get("step"):this.get("defaultStep"),e=b;c.keyCode===f.LEFT_ARROW||c.keyCode===f.DOWN_ARROW?(e=b-a,e<this.get("minimum")&&(e=this.get("minimum"))):c.keyCode===f.RIGHT_ARROW||c.keyCode===f.UP_ARROW?(e=b+a,e>this.get("maximum")&&(e=this.get("maximum"))):c.keyCode===f.HOME?e=this.get("minimum"):c.keyCode===f.END&&(e=this.get("maximum"));a=d.findSuitablePrecision(a,this.get("value"));e=parseFloat(e.toFixed(a));this.set("value",e);b!==e&&this._triggerChangeEvent("value",
b,e);c.preventDefault()}},_onTrackClick:function(c){(c.target===this.sliderTrackNode||this.sliderTrackNode.contains(c.target))&&this.inherited(arguments)},_setPixelValue:function(c,b,a){var e=[];if(!this.disabled&&!this.readOnly&&!(0>c||c>b)){a=this.get("value");c=(this.maximum-this.minimum)*(c/b)+this.minimum;var f=this.get("step")?this.get("step"):this.get("defaultStep"),g=d.findSuitablePrecision(f,this.get("value"));for(b=this.minimum;b<=this.maximum;b+=f)b=parseFloat(b.toFixed(g)),e.push(b);e=
d.getClosestValue(e,c);c=Math.abs(c-e[0])<Math.abs(c-e[1])?e[0]:e[1];this._set("value",c);a!==c&&this._triggerChangingEvent(a,c)}}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/BaseHorizontalSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/query dojo/number dijit/_WidgetBase dijit/_TemplatedMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/SliderMixin".split(" "),function(h,f,g,e,d,c,b,a,k){var l=h(k,{baseClass:"mwWidget mwSlider mwHorizontalSlider",
width:200,height:3,_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_thumbPositionParam1:"width",_thumbPositionParam2:"left",_isScaleDirectionReverse:!1,orientation:"horizontal",getRuleLabelConstructor:function(){return l._HorizontalRuleLabels},_setWidthAttr:function(a){this.inherited(arguments);g.set(this.containerNode,{width:a+"px"})},_updateVisual:function(){0<this.width&&0<this.height?(g.set(this.sliderTrackNode,{display:"block"}),g.set(this.containerNode,{display:"block"})):(g.set(this.sliderTrackNode,
{display:"none"}),g.set(this.containerNode,{display:"none"}))},getRuleConstructor:function(){return l._HorizontalRule},postCreate:function(){this.inherited(arguments);this.own(this.watch("width",f.hitch(this,"_adjustThumbPosition")),this.watch("fontSize",f.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontWeight",f.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontFamily",f.hitch(this,"_adjustLabelContainerPositioning")),this.watch("fontStyle",f.hitch(this,"_adjustLabelContainerPositioning")))},
_setMajorTickLabelsAttr:function(a){this.inherited(arguments);this._adjustLabelContainerPositioning()},_adjustLabelContainerPositioning:function(){this.majorTickLabelDijit&&d(".dijitRuleLabelContainerH",this.majorTickLabelDijit.domNode).forEach(function(a){var b=-1*(e.position(a).w/2);g.set(a,"margin-left",b+"px")})},_computePreferredWidth:function(){var a,b;b=e.position(this.sliderTrackNode);a=Math.min(b.x-this.sliderThumbSize.w/2,this.sliderThumbSize.x);b=Math.max(b.x+b.w+this.sliderThumbSize.w/
2,this.sliderThumbSize.x+this.sliderThumbSize.w);this._majorTickLabelsPosition=this._computePreferredSizeOfMajorTickLabels();null!==this._majorTickLabelsPosition&&(a=Math.min(this._majorTickLabelsPosition.x,a),b=Math.max(this._majorTickLabelsPosition.x+this._majorTickLabelsPosition.w,b));return Math.ceil(b)-Math.floor(a)},_computePreferredX:function(){var a=this._adjustTrackAndContainerOffset();return this.location[0]-a},_computePreferredHeight:function(){var a=this._getDomNodeOfWidgetAtEnd(),b=this.sliderThumbSize.y;
a?(this._bottomWidgetPosition=null!==this.majorTickLabelDijit&&a===this.majorTickLabelDijit.domNode?null!==this._majorTickLabelsPosition?this._majorTickLabelsPosition:this._computePreferredSizeOfMajorTickLabels():e.position(a),a=this._bottomWidgetPosition.y+this._bottomWidgetPosition.h):a=this.sliderThumbSize.y+this.sliderThumbSize.h;return Math.ceil(a)-Math.floor(b)},_computePreferredY:function(){var a;a=e.position(this.sliderTrackNode);this._bottomWidgetPosition?(a=this._bottomWidgetPosition.y-
a.y-a.h+this._bottomWidgetPosition.h,this._bottomWidgetPosition=null):a=this.sliderThumbSize.h/3;return this.location[1]-a},_computePreferredSizeOfMajorTickLabels:function(){var a=null;if(this.majorTickLabelDijit){var a=d(".dijitRuleLabel",this.majorTickLabelDijit.domNode),b=[],c=-1*Number.MAX_VALUE,f=0,g=Number.MAX_VALUE,h=0;a.forEach(function(a){a=e.position(a);a.y>c&&(c=a.y);a.x<g&&(g=a.x);a.h>f&&(f=a.h);b.push(a.x+a.w)});a=Math.max.apply(null,b);h=Math.ceil(a)-Math.floor(g);a={w:h,h:f,y:c,x:g}}return a},
_adjustTrackAndContainerOffset:function(){var a=d(".dijitRuleLabel",this.containerNode),b=e.position(this.sliderTrackNode),c=Math.max(this.sliderThumbSize.w/2,b.x-this.sliderThumbSize.x);if(0!==a.length){for(var f=[],h=0;h<a.length;h++)f[h]=e.position(a[h]).x;a=Math.min.apply(null,f);a<Math.min(b.x-this.sliderThumbSize.w/2,this.sliderThumbSize.x)&&(c=b.x-a)}c=Math.round(c);g.set(this.sliderTrackNode,{left:c+"px"});g.set(this.containerNode,{left:c+"px"});return c},getTickLabelTrackLength:function(a){return e.position(this.sliderTrackNode).w}});
l._HorizontalRule=h([b,a],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',ticks:null,minimum:0,maximum:100,_isHorizontal:!0,isAddQeIdForTickBased:!0,_qeIdSuffix:"id\x3d",_genHTML:function(a,b){var c="";this.isAddQeIdForTickBased&&this.ticks&&(c='"'+this._qeIdSuffix+'"'+this["class"]+
"_"+this.ticks[b]);return this._positionPrefix+a+this._positionSuffix+this.ruleStyle+c+this._suffix},buildRendering:function(){this.inherited(arguments);var a="",b;if(this.ticks){var c=this.maximum-this.minimum;for(b=0;b<this.count;b++)a+=this._genHTML(100*((this.ticks[b]-this.minimum)/c),b)}else{a=this._genHTML(0,0);c=100/(this.count-1);for(b=1;b<this.count-1;b++)a+=this._genHTML(c*b,b);a+=this._genHTML(100,this.count-1)}this.domNode.innerHTML=a}});l._HorizontalRuleLabels=h(l._HorizontalRule,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',
labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"',_suffix:"\x3c/div\x3e\x3c/div\x3e",_qeIdSuffix:"id\x3d",_calcPosition:function(a){return a},_genHTML:function(a,b){var c=this._qeIdSuffix+'"'+this["class"]+"_"+this.labels[b]+'"\x3e';return this._positionPrefix+this._calcPosition(a)+this._positionSuffix+
this.labelStyle+this._labelPrefix+c+this.labels[b]+this._suffix},getLabels:function(){var a=this.labels;!a.length&&this.srcNodeRef&&(a=d("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!a.length&&1<this.count)for(var b=this.minimum,e=(this.maximum-b)/(this.count-1),f=0;f<this.count;f++)a.push(f<this.numericMargin||f>=this.count-this.numericMargin?"":c.format(b,this.constraints)),b+=e;return a},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();
this.count=this.labels.length}});return l})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/SliderMixin":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/_base/event dojo/dnd/Moveable dojo/dnd/Mover dijit/focus dijit/_WidgetBase dijit/_CssStateMixin dijit/_TemplatedMixin dijit/_Container dojo/text!../templates/Slider.html mw-mixins/property/DisabledMixin mw-mixins/property/VisualFamilyMixin mw-mixins/event/ChangeEventMixin mw-mixins/mixinDependencyValidator".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u){var v=h(u.validate([l,m,q,n,r,s,t]),{baseClass:"mwWidget mwSlider",templateString:p,sliderTrackNode:null,sliderThumbNode:null,value:0,maximum:100,minimum:0,THUMB_WIDTH:11,majorTickDijit:null,majorTickLabelDijit:null,minorTickDijit:null,_majorTickLabelsPosition:null,constructor:function(){this.location=[100,100];this.preferredSize={width:0,height:0,left:0,bottom:0};this.minorTicks=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100];this.majorTicks=
[0,20,40,60,80,100];this.majorTickLabels="0 20 40 60 80 100".split(" ")},_setHeightAttr:function(a){e.set(this.sliderTrackNode,{height:a+"px"});this._set("height",a);this.set("outerHeight",this.get("height")+35);this._updateVisual()},_setWidthAttr:function(a){e.set(this.sliderTrackNode,{width:a+"px"});this._set("width",a);this.set("outerWidth",this.get("width")+30);this._updateVisual()},_updateVisual:function(){},_setOuterWidthAttr:function(a){e.set(this.domNode,{width:a+"px"})},_setOuterHeightAttr:function(a){e.set(this.domNode,
{height:a+"px"})},_setLocationAttr:function(a){this._set("location",a)},_setPixelValue:function(a,b){if(!this.disabled&&!this.readOnly){var c=(this.maximum-this.minimum)*(a/b)+this.minimum,c=Math.min(c,this.maximum),c=Math.max(c,this.minimum);this._setValueAttr(c)}},_setValueAttr:function(a){this._set("value",a)},_setMinimumAttr:function(a){this._set("minimum",a);this._setMajorTickLabelsAttr(this.get("majorTickLabels"));this._setMajorTicksAttr(this.get("majorTicks"))},_setMaximumAttr:function(a){this._set("maximum",
a)},_setMajorTicksAttr:function(a){this.majorTickDijit&&(this.majorTickDijit.destroy(),this.majorTickDijit=null);this._set("majorTicks",a);0<a.length&&(this.majorTickDijit=new (this.getRuleConstructor())({"class":"mwMajorTickMarks",ticks:this.majorTicks,minimum:this.minimum,maximum:this.maximum,count:this.majorTicks?this.majorTicks.length:3}),this.majorTickDijit.placeAt(this.containerNode))},_setMinorTicksAttr:function(a){this.minorTickDijit&&(this.minorTickDijit.destroy(),this.minorTickDijit=null);
this._set("minorTicks",a);0<a.length&&(this.minorTickDijit=new (this.getRuleConstructor())({"class":"mwMinorTickMarks",count:this.minorTicks?this.minorTicks.length:3,ticks:this.minorTicks,minimum:this.minimum,maximum:this.maximum}),this.minorTickDijit.placeAt(this.containerNode))},_setMajorTickLabelsAttr:function(a){this.majorTickLabelDijit&&(this.majorTickLabelDijit.destroy(),this.majorTickLabelDijit=null);this._set("majorTickLabels",a);0<a.length&&0<a.join("").trim().length&&(this.majorTickLabelDijit=
new (this.getRuleLabelConstructor())({"class":"mwMajorTickLabels",minimum:this.minimum,maximum:this.maximum,labels:this.majorTickLabels,count:this.majorTickLabels.length,ticks:this.majorTicks}),this.majorTickLabelDijit.placeAt(this.containerNode))},_onTrackClick:function(a){if(!this.disabled&&!(this.readOnly||0!==a.button))this._sliderTrackDimensions=d.position(this.sliderTrackNode),this._snapValueToTarget(this,a),k.focus(this.sliderThumbNode),c.stop(a),this._thumbMoveable.onMouseDown(a)},_emitChangeEvent:function(){var a=
this.get("value");this._lastChangeValueEmitted!==a&&(this._triggerChangeEvent("value",this._lastChangeValueEmitted,a),this._lastChangeValueEmitted=a)},_snapValueToTarget:function(a,b){var c=b.target;if(this._snapToMajorTick(c))c=this._findChildNode(c),c=a.majorTicks[c],a.set("value",c);else if(this._snapToMajorTickLabel(c))c=this._findChildNode(c.parentNode),c=a.majorTicks[c],a.set("value",c);else if(a._snapToMinorTick(c))c=this._findChildNode(c),a.set("value",a.minorTicks[c]);else{var c=this._sliderTrackDimensions,
d=b[a._mousePixelCoord]-c[a._startingPixelCoord];a._isScaleDirectionReverse&&(d=c[a._pixelCount]-d);a._setPixelValue(d,c[a._pixelCount])}},_snapToMajorTick:function(a){return-1!==a.id.indexOf("MajorTickMarks")},_snapToMajorTickLabel:function(a){return-1!==a.id.indexOf("MajorTickLabels")},_snapToMinorTick:function(a){return-1!==a.id.indexOf("MinorTickMarks")},postCreate:function(){this.inherited(arguments);this.set("outerWidth",this.get("width")+30);this.set("outerHeight",this.get("height")+35);var a=
h(v._SliderThumbMover,{widget:this});this._thumbMoveable=new v._SliderThumbMoveable(this.sliderThumbNode,{mover:a});this.own(this.watch("value",g.hitch(this,"_adjustThumbPosition")),this.watch("minimum",g.hitch(this,"_adjustThumbPosition")),this.watch("maximum",g.hitch(this,"_adjustThumbPosition")));this._adjustThumbPosition();this._lastChangeValueEmitted=this.get("value")},_adjustThumbPosition:function(){var a,b=!1;a=100*((this.value-this.minimum)/(this.maximum-this.minimum)-this.THUMB_WIDTH/this[this._thumbPositionParam1]/
2);this.value<this.minimum?(a=Math.max(100*-(this.THUMB_WIDTH/this[this._thumbPositionParam1]),a),b=!0):this.value>this.maximum&&(a=Math.min(100,a),b=!0);var c=[];c[this._thumbPositionParam2]=a+"%";e.set(this.sliderThumbNode,c);b&&this.computePreferredSize()},computePreferredSize:function(){var a,b,c,e;this.sliderThumbSize=d.position(this.sliderThumbNode);c=Math.round(this._computePreferredWidth());a=Math.round(this._computePreferredX());e=Math.round(this._computePreferredHeight());b=Math.round(this._computePreferredY());
this.set("preferredSize",{width:c,height:e,left:a,bottom:b})},_getDomNodeOfWidgetAtEnd:function(){var a;this.majorTickLabelDijit?a=this.majorTickLabelDijit.domNode:this.majorTickDijit?a=this.majorTickDijit.domNode:this.minorTickDijit&&(a=this.minorTickDijit.domNode);return a},_findChildNode:function(a){for(var b=a.parentNode.childNodes,c=0;c<b.length;c++)if(b.item(c)===a)return c;return-1}});v._SliderThumbMoveable=h(b,{onMouseDown:function(a){0===a.button&&this.inherited(arguments)}});v._SliderThumbMover=
h(a,{onMouseMove:function(a){var b=this.widget;b._sliderTrackDimensions||(b._sliderTrackDimensions=d.position(b.sliderTrackNode,!0));b._snapValueToTarget(b,a,!1);this._wasDragged=!0;b.emit("mousedragging")},onMouseUp:function(a){var b=this.widget;b._sliderTrackDimensions||(b._sliderTrackDimensions=d.position(b.sliderTrackNode,!0));b._snapValueToTarget(b,a,!0);b._emitChangeEvent();this._wasDragged?(b.emit("mousedragreleased"),this._wasDragged=!1):b.emit("mouseclicked");this.inherited(arguments)},destroy:function(){this.widget._sliderTrackDimensions=
null;this.inherited(arguments)}});return v})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/SliderWidgetUtility":function(){define([],function(){return{getClosestValue:function(h,f){for(var g=-1,e=h.length-1,d;1<e-g;)d=Math.round((g+e)/2),h[d]<=f?g=d:e=d;h[g]===f&&(e=g);return[h[g],h[e]]},findSuitableStepSize:function(h,f,g,e){var d;e?d=Math.pow(10,(f-g).toString().length-1)/10:(h=h.toString().split("."),void 0!==h[1]&&(d=1/Math.pow(10,h[1].length)));0===d&&(d=1);return d},findSuitablePrecision:function(h,
f){var g=0,e=h.toString().split(".");if(e[1])var d=e[1].length;e=f.toString().split(".");if(e[1])var c=e[1].length;if(d&&c)g=Math.max(c,d);else if(d||c)g=d?d:c;return g}}})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/EditableMixin":function(){define(["dojo/_base/declare","dojo/aspect"],function(h,f){return h(null,{editMode:!1,_setEditModeAttr:function(f){var e=this.baseClass+"--editMode";f?(this._set("editMode",f),this.domNode.classList.add(e),this.showInPlaceEditor(),this._hookUpEventListener()):
(this.domNode.classList.remove(e),this.hideInPlaceEditor(),this._removeEventListener(),this._set("editMode",f))},_hookUpEventListener:function(){this._clickCallback=this._handleDocumentClick.bind(this);setTimeout(function(){document.body.addEventListener("click",this._clickCallback)}.bind(this),0);this._windowBlurCallback=f.after(window,"onblur",this._handleWindowBlur.bind(this))},_removeEventListener:function(){this._clickCallback&&setTimeout(function(){document.body.removeEventListener("click",
this._clickCallback)}.bind(this),0);this._windowBlurCallback&&this._windowBlurCallback.remove()},_handleDocumentClick:function(f){this.shouldCloseEditor(f.target)&&this.get("editMode")&&this.set("editMode",!1)},_handleWindowBlur:function(){this.get("editMode")&&this.set("editMode",!1)},showInPlaceEditor:function(){throw Error("showInPlaceEditor method should be implemented");},hideInPlaceEditor:function(){throw Error("hideInPlaceEditor method should be implemented");},shouldCloseEditor:function(){throw Error("shouldCloseEditor method should be implemented");
},destroy:function(){this._removeEventListener();this.inherited(arguments)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DataMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_setDataAttr:function(f){0!==Object.keys(f).length&&Object.keys(f).forEach(function(g){this.set(g,f[g])},this)},_getDataAttr:function(){var f={},g=this.get("dataProperties");if(!g)throw Error("no 'dataProperties' property present");g.forEach(function(e){f[e]=this.get(e)},
this);return f}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DisabledMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{disabled:!1,_setDisabledAttr:function(f){var g=this.baseClass+"--disabled";f?this.domNode.classList.add(g):this.domNode.classList.remove(g);this._set("disabled",f)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/PositionMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{position:"bottom",
_setPositionAttr:function(f){this.domNode.classList.remove(this.baseClass+"--"+this.position);this.domNode.classList.add(this.baseClass+"--"+f);this.position!==f&&this._set("position",f)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/LiveControlComboBox":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/registry dojo/has dojo/keys mw-event-utils/doubleClickHandler mw-form/TextArea MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/ComboBox MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/EditableMixin MW/rtc/plugins/language/matlab/codingui/widgets/WidgetsUtility MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DataMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/DisabledMixin MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/mixins/PositionMixin".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){h=h([f,m,q,k,n],{baseClass:"mwLiveControlComboBox",type:"ComboBox",constructor:function(){this.comboBox=new a;this.own(this.comboBox);this.dataProperties=["items","value"]},buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("tabindex","-1");this.domNode.setAttribute("data-focus","temporary");l.buildNode("div",{className:"widgetContainer",parent:this.domNode},"mwLiveControlComboBox").appendChild(this.comboBox.domNode);this.editorContainer=
l.buildNode("div",{className:"editorContainer",parent:this.domNode},"mwLiveControlComboBox")},_setItemsAttr:function(a){this.comboBox.set("items",a);this._set("items",a)},_setValueAttr:function(a){this.comboBox.set("value",a);this._set("value",a)},_setDisabledAttr:function(a){this.inherited(arguments);this.comboBox.set("disabled",a)},postCreate:function(){this.inherited(arguments);this.get("items")||this._setComboBoxItems();this.domNode.addEventListener("change",this._handleChange.bind(this));this.domNode.addEventListener("keyup",
this._handleKeyUp.bind(this));this.domNode.addEventListener("keydown",this._handleKeyDown.bind(this));this.domNode.addEventListener("doubleclick",this._handleDoubleClick.bind(this));this.comboBox.watch("value",this._updateValue.bind(this))},focus:function(){this.comboBox.focusNode.focus()},showInPlaceEditor:function(){0===this.editorContainer.children.length&&this._createEditor();this._setEditorContent();this._saveEditor=!0},_getContentForEditor:function(){var a=[];this.get("items").forEach(function(b){a.push(b.label)});
return a},_setComboBoxItems:function(){var a=[],b={label:this.get("value"),value:this.get("value")};a.push(b);this.set("items",a)},_createEditor:function(){this.editor=new b;this.editorContainer.appendChild(this.editor.domNode);this.editor.startup();this._editorWheelCallback=this._handleEditorWheel.bind(this);this.editor.domNode.addEventListener("wheel",this._editorWheelCallback)},_handleEditorWheel:function(a){a.stopPropagation()},_setEditorContent:function(){var a=this._getContentForEditor(),b=
"";1===a.length&&""===a[0]?this.editor.set("placeholder","'one'\n'two'"):a.forEach(function(a){b+=a+"\n"});this.editor.set("value",b);this.editor.focusNode.focus();e("trident")&&(a=b.length,this.editor.focusNode.setSelectionRange(a,a))},hideInPlaceEditor:function(){if(this.editor&&this._saveEditor){var a=this.editor.focusNode.value.split("\n");this._saveComboBoxChanges(a)}},_saveComboBoxChanges:function(a){var b=[],c=this.get("value"),d=!1;this._hasEmptyContent(a)?(this.set("value",""),this._setComboBoxItems()):
(a.forEach(function(a){if(a=a.trim())a===c&&(d=!0),b.push({label:a,value:a})},this),this.set("items",b),a=d?c:b[0].label,this.set("value",a))},_hasEmptyContent:function(a){var b=!0;a.forEach(function(a){""!==a&&(b=!1)});return b},shouldCloseEditor:function(a){return!this.editorContainer.contains(a)},_handleChange:function(a){g.getEnclosingWidget(a.target)===this.editor&&(a.stopImmediatePropagation(),a.stopPropagation())},_handleDoubleClick:function(){this.get("editMode")||this.set("editMode",!0)},
_updateValue:function(a,b,c){this._set("value",c)},navigate:function(a){a=a.keyCode;var b=document.activeElement,c=!1;if((a===d.DELETE||a===d.BACKSPACE||a===d.TAB)&&b!==this.comboBox.domNode)this.comboBox.focusNode.focus(),this.focus(),c=!0;return c},_handleKeyDown:function(a){a=a.keyCode;var b=document.activeElement;switch(a){case d.TAB:this.editor&&b===this.editor.focusNode&&this.set("editMode",!1);this.emit("restorefocustolastnonrefuseelement");this.emit("keyuponwidgets",{mwEventData:{keyCode:a}});
break;case d.BACKSPACE:b===this.comboBox.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}));break;case d.DELETE:b===this.comboBox.focusNode&&(this.emit("restorefocustolastnonrefuseelement"),this.emit("keyuponwidgets",{mwEventData:{keyCode:a}}))}},_handleKeyUp:function(a){a.keyCode===d.ESCAPE&&(this.get("editMode")&&(this._saveEditor=!1,this.set("editMode",!1)),this.emit("restorefocustolastnonrefuseelement"))},startup:function(){this.inherited(arguments);
this.comboBox.startup()},destroy:function(){this.editor&&(this.editor.domNode.removeEventListener("wheel",this._editorWheelCallback),this.editor.destroy());this.comboBox.destroy();this.inherited(arguments)}});h.BASE_CLASS="mwLiveControlComboBox";return h})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/ComboBox":function(){define(["dijit/_WidgetBase","dojo/_base/declare","mw-event-utils/doubleClickHandler","mw-form/ComboBox"],function(h,f,g,e){return f([e],{postCreate:function(){this.domNode.addEventListener("mousedown",
this._handleMouseDown.bind(this),!0);this.inherited(arguments);this.domNode.addEventListener("click",g.createCallback(this._handleClick.bind(this),this._handleDoubleClick.bind(this)),220)},_handleClick:function(d){(!d.mwEventData||!d.mwEventData.keyCode)&&this._handleArrowNodeMouseDown(d)},_handleMouseDown:function(d){d.stopImmediatePropagation();2===d.button&&this.emit("rightclick",{})},_handleDoubleClick:function(d){this.emit("doubleclick",{});d.stopPropagation()},_handleMenuClick:function(d){if(this._isSeparator(d.target))d.preventDefault();
else{d=this._getSelectedItemFromLabel(d.target.textContent).value;var c=this.get("value");this.set("value",d);c!==d&&this._triggerChangeEvent("value",c,d);this.closeMenu()}},_setValueAttr:function(d){var c=this._getSelectedItemFromValue(d);if(("number"===typeof d?d.toString():d)&&c&&void 0!==c.index)this._textField.set("value",c.label),this._isTextEmpty=!0,this._removeSelectedMenuItemColor(),0<this.get("menu").getChildren().length&&void 0!==c.index&&this.get("menu").getChildren()[c.index].classList.add("mwComboBoxSelectedMenuItem");
else if(("number"===typeof d?d.toString():d)&&!c)if(this.get("editable"))this._removeSelectedMenuItemColor(),this._textField.set("value",d),this._isTextEmpty=!1;else{if(!this.get("items")||0===this.get("items").length){this._pendingValue=d;return}throw Error("Value must match an existing item for non-editable combo box");}else""===d&&(this._textField.set("value",""),void 0!==this._get("value")&&(this._removeSelectedMenuItemColor(),this._isTextEmpty=!0),""!==this.get("text")&&(this._isTextEmpty=!1));
!0===this._isTextEmpty?this.set("text",""):this.set("text",d);this._set("value",d)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LiveControlLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.livecontrols.viewmodel","rtc.view.decoration.viewmodel"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/language/matlab/codingui/livecontrols/view/LiveControlLayouter":function(){define(["dojo/_base/declare",
"dojo/dom-construct","MW/rtc/plugins/language/matlab/codingui/livecontrols/nodes/LiveControlNode","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter"],function(h,f,g,e){return h(e,{_LIVE_CONTROL_OUTER_NODE:"liveControlOuterNode",_LIVE_CONTROL_DECORATION_NODE:"liveControlDecoration",constructor:function(d,c){this._layoutService=d;this._decorationViewModel=c},getApplicableNodeClass:function(){return g},layout:function(d,c){var b=d.layoutInto(c,"div",{"class":this._LIVE_CONTROL_OUTER_NODE}),
a=this._createDecorationView(c);a&&b.appendChild(a);a=this._layoutService.createLiveControl(c);b.appendChild(a);return b},refresh:function(d,c,b,a){this._layoutService.updateTextView(c,b);this._updateDecoration(c,b);return null},_createDecorationView:function(d){d=this._decorationViewModel.getDecoration(d);if(!d.length)return null;var c=f.create("div",{"class":this._LIVE_CONTROL_DECORATION_NODE});d.forEach(function(b){b.domNodes.forEach(function(a,b){f.place(b,c,a.domPlacement)})});return 0===c.children.length?
null:c},_updateDecoration:function(d,c){var b=this._createDecorationView(d),a=c.querySelector("."+this._LIVE_CONTROL_DECORATION_NODE);a&&a.parentNode!==c||(a&&b?c.replaceChild(b,a):a&&!b?c.removeChild(a):!a&&b&&c.insertBefore(b,c.firstChild))}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctionsProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/LocalFunctions","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.code.sections.sectionbreak","rtc.code.sections.model"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctions":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/plugins/richtext/nodes/leaf/RichTextNode".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h(d,{_UNDOREDO_BLOCK_TYPE:"LocalFunction",_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["AutoIndent"],constructor:function(a,b,c,d,e){this._internalDocument=a;this._document=b;this._cursor=c;this._sectionBreak=d;this._sectionModel=e;this.own(g.around(b,"insertBreak",f.hitch(this,"_onInsertBreak")));this.own(g.after(e,"onAttributesUpdated",f.hitch(this,"_handleAttributesUpdate"),!0))},_onInsertBreak:function(a){var c=this;return function(){var d=c._sectionModel.getCurrentSection();
if(d&&d[k.LOCAL_FUNCTION_ATTRIBUTE]&&0<d[k.LOCAL_FUNCTION_ATTRIBUTE].length){var e=d.start.getLineColumn().line,f=c._cursor.getLineColumn(),g=f.line,f=f.column,d=d.localFunctions[0].position.getLineColumn().line;if(g>=e&&g<=d&&1===f)return e=c._document.startEdit(),c._cursor.hasSelection()&&c._document.deleteTextAtCurrentPosition(),g=c._cursor.getLineColumn().line,c._insertTextContainerBefore(g),e.appendUndoEvents([b.create(g,g)]),e.appendRedoEvents([b.create(g-1,g)]),c._document.endEdit(),!0}return a.apply(c._document,
arguments)}},_insertTextContainerBefore:function(a){a=this._internalDocument.getLineNode(a-1);var b=new l([]);b.addChild(new m({}));this._document.startEdit();a=this._internalDocument.insertAtPosition(b,a.startPosition());this._cursor.setPosition(a.insertedRange.getEndPosition());this._document.endEdit();this._internalDocument.emitDocumentEvents(a.events);this._cursor.onUpdate()},_handleAttributesUpdate:function(b){if(b===k.LOCAL_FUNCTION_ATTRIBUTE&&(b=this._sectionModel.getSections(),b=this._getFirstLocalFunction(b))){b=
b.startLine;var c=this._internalDocument.getMaxLineNumber();if(this._needsUpdate(b,c)){var d=this._document.startBlockEdit(this._UNDOREDO_BLOCK_TYPE);d.setBlockTypesForMergeAndAdvance(this._BLOCK_TYPES_FOR_MERGE_AND_ADVANCE);this._sectionBreak.deleteSectionBreakInBetween(b,c);c=this._getTopBoundary(b);this._sectionBreak.isLineSectionBreak(c-1)||this._sectionBreak.insertSectionBreakAtLineColumn(c,1);d.appendRedoEvents([a.create(b,b+1)]);d.appendUndoEvents([a.create(b,b+1)]);this._document.endBlockEdit(d)}}},
_needsUpdate:function(a,b){if(!(1<a))return!1;if(this._sectionBreak.hasSectionBreakInBetween(a,b))return!0;var c=this._sectionModel.getSectionForLine(a-1).start.getLineColumn().line;return this._getTopBoundary(a)!==c?!0:!1},_getTopBoundary:function(a){var b=this._sectionModel.getSectionForLine(a-1).start.getLineColumn().line;e.assert(b<=a,"Invalid start line of section or local function");for(a-=1;a>=b;a-=1){var d=this._internalDocument.getLineNode(a-1);if(c.isCodeContainer(d))break}return a+1},_getFirstLocalFunction:function(a){var b=
null;a.some(function(a){if((a=a[k.LOCAL_FUNCTION_ATTRIBUTE])&&0<a.length)return b=a[0],!0});return b}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributorProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributor","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.code.sections.model",
"rtc.localfunctionnotifier"]}},createInstance:function(e,d,c){return new f(e,d,c)}})})},"MW/rtc/plugins/language/matlab/functions/LocalFunctionsSectionAttributeContributor":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/AbstractFunctionSectionAttributeContributor","MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants"],function(h,f,g){return h(f,{constructor:function(e,d,c){},getSectionAttribute:function(){return g.LOCAL_FUNCTION_ATTRIBUTE}})})},"MW/rtc/plugins/language/matlab/functions/AbstractFunctionSectionAttributeContributor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/functionnotifier/FunctionStateConstants".split(" "),
function(h,f,g,e,d,c){return h(d,{constructor:function(b,a,c){this._document=b;this._sectionModel=a;this._functionNotifier=c;this.own(g.after(this._functionNotifier,"onValidFunctionsChange",f.hitch(this,"_handleFunctionChange"),!0));this.own(g.before(this._sectionModel,"onModelUpdated",f.hitch(this,"_setAttributesForSectionsOnReset")));this._functionsData=null},getSectionAttribute:function(){throw"Unimplemented API in AbstractFunctionSectionAttributeContributor";},_handleFunctionChange:function(b){b&&
(b=this._getFunctionsFromEvent(b),this._initializeFunctionData(b),this._setAttributesForSections(this._functionsData))},_getFunctionsFromEvent:function(b){var a;switch(b.type){case c.VALID_FUNCTIONS_REMOVED:a=null;break;case c.VALID_FUNCTIONS_ADDED:case c.VALID_FUNCTIONS_CHANGED:case c.FUNCTIONS_ON_VALID_DOCUMENT_CHANGE:a=b.validFunctions}return a},_initializeFunctionData:function(b){this._functionsData&&(this._functionsData.forEach(function(a){e.assert(a.position,"Must have position!");this._document.deletePosition(a.position)},
this),this._functionsData=null);b&&(b.forEach(function(a){a.position=this._document.createLinePositionInLine(a.startLine-1)},this),this._functionsData=b)},_setAttributesForSections:function(b){this._sectionModel.setAttribute(this.getSectionAttribute(),this._getFunctionMap(b))},_setAttributesForSectionsOnReset:function(){this._sectionModel.setAttributeOnReset(this.getSectionAttribute(),this._getFunctionMap(this._functionsData))},_getFunctionMap:function(b){var a={};b&&b.forEach(function(b){var c=this._sectionModel.getSectionNumberForLine(b.startLine-
1);a[c]?a[c].push(b):a[c]=[b]},this);return a}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/functions/TopLevelFunction","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.code.sections.sectionbreak","rtc.code.sections.model"]}},createInstance:function(e,d,c){return new f(e,
d,c)}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunction":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants".split(" "),function(h,f,g,e,d,c){return h(e,{_UNDOREDO_BLOCK_TYPE:"TopLevelFunction",_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["AutoIndent"],constructor:function(b,a,c){this._document=b;this._sectionBreak=a;this._sectionModel=
c;this.own(g.after(c,"onAttributesUpdated",f.hitch(this,"_handleAttributesUpdate"),!0))},_handleAttributesUpdate:function(b){if(b===c.TOP_LEVEL_FUNCTION_ATTRIBUTE&&(b=this._sectionModel.getSections(),b=this._getTopLevelFunction(b)))if(b=Math.min(b.endLine,this._document.getNumberOfLines()),b=this._getLastLineInSectionForLine(b-1),this._needsUpdate(1,b)){var a=this._document.startBlockEdit(this._UNDOREDO_BLOCK_TYPE);a.setBlockTypesForMergeAndAdvance(this._BLOCK_TYPES_FOR_MERGE_AND_ADVANCE);this._sectionBreak.deleteSectionBreakInBetween(1,
b);a.appendRedoEvents([d.create(1,2)]);a.appendUndoEvents([d.create(1,2)]);this._document.endBlockEdit(a)}},_needsUpdate:function(b,a){return this._sectionBreak.hasSectionBreakInBetween(b,a)},_getTopLevelFunction:function(b){var a=null;b.some(function(b){if((b=b[c.TOP_LEVEL_FUNCTION_ATTRIBUTE])&&0<b.length)return a=b[0],!0});return a},_getLastLineInSectionForLine:function(b){return this._sectionModel.getSectionForLine(b).end.getLine()}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributor","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.code.sections.model","rtc.toplevelfunctionnotifier"]}},createInstance:function(e,d,c){return new f(e,d,c)}})})},"MW/rtc/plugins/language/matlab/functions/TopLevelFunctionSectionAttributeContributor":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/functions/AbstractFunctionSectionAttributeContributor","MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants"],function(h,f,g){return h(f,{constructor:function(e,d,c){},getSectionAttribute:function(){return g.TOP_LEVEL_FUNCTION_ATTRIBUTE}})})},"MW/rtc/plugins/language/matlab/section/SectionPluginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/language/matlab/section/SectionPlugin",
"MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{isApplicable:function(c){return g.isMatlabCodeFileOrBuffer(c)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:"rtc.document rtc.internaldocument rtc.view rtc.cursor rtc.cursor.view rtc.actionservice rtc.executionservice rtc.featureinterface rtc.indentutilities rtc.backingstore rtc.code.matlabfiletype".split(" ")}},createInstance:function(c,b,a,d,f,g,h,n,p,r,s){return new e(c,b,a,d,f,g,h,n,p,r,s)}})})},
"MW/rtc/plugins/language/matlab/section/SectionPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has MW/rtc/abstract/AbstractPlugin MW/rtc/datamodel/FileBackingStore MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/plugins/language/matlab/section/PublishUtilities MW/rtc/plugins/language/matlab/section/SectionsList MW/rtc/plugins/language/matlab/section/view/SectionPluginViewLayer MW/rtc/RichTextComponentFeatureEnum dojo/i18n!l10n/nls/actions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r){return h(d,{_SECTION_EVALUATION_FUNCTION:"matlab.internal.editor.evaluateCode",constructor:function(a,b,c,d,e,h,k,l,D,F,H){this._internalDocument=b;this._document=a;this._view=c;this._cursor=d;this._cursorView=e;this._actionService=h;this._executionService=k;this._editorInterface=l;this._backingStore=F;this._fileType=H;this._sections=[];this._activeSection={};this._sectionMarkers={};this._sectionTitles={};this._sectionsList=new q(this._internalDocument,this._document);
this._viewLayer=new n;this._SECTION_TITLE_CLASS="section_title";this._SECTION_SEPARATOR_CLASS="matlab_section_separator";this._publishUtilities=new m(this,this._document,this._internalDocument,this._cursor,D);this.own(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this._sectionsList,"updateCells")));this.own(g.after(this._sectionsList,"onUpdateModel",f.hitch(this,"_onSectionLocationUpdate"),!0));this.own(g.after(this._cursorView,"onChange",f.hitch(this,"_updateActiveSection"),!0));this.own(g.after(this._internalDocument,
"onDocumentChanged",f.hitch(this,"_updateSectionsInView",!1)));this.own(g.after(this._editorInterface,"onActivated",f.hitch(this,"_updateActiveSection")));this.own(g.after(this._internalDocument,"onDocumentReset",f.hitch(this._sectionsList,"updateCells")));a=[{id:p.SECTIONS.INSERT_SECTION_ACTION,enabled:!0,description:r.insertSectionDescription,text:r.insertSectionLabel,icon:"smallInsertSection",contextMenuGroup:"Sections",callback:f.hitch(this._publishUtilities,"insertSection")},{id:p.SECTIONS.RUN_SECTION_ACTION,
enabled:!1,contextMenuGroup:"Sections",text:r.runSectionLabel,key:"ctrl_enter",platformKey:{mac:"meta_enter"},callback:f.hitch(this,"evaluateActiveSection")},{id:p.SECTIONS.NEXT_SECTION_ACTION,enabled:!0,key:"ctrl_down",platformKey:{mac:"meta_down"},callback:f.hitch(this,"gotoNextSection")},{id:p.SECTIONS.PREVIOUS_SECTION_ACTION,enabled:!0,key:"ctrl_up",platformKey:{mac:"meta_up"},callback:f.hitch(this,"_gotoPreviousSection")}];this._actionService.loadActions(a)},hasSection:function(){return 0<this._sections.length},
_onSectionLocationUpdate:function(a,b,c,d){this._document.getText()===d&&(this._sections=this._sectionsList.getSections(),this._updateSectionsInView(!0))},_getMaxColumnOnLine:function(a){return this._internalDocument.getLineNode(a).getText().length},_updateSectionsInView:function(a){this._updateActiveSection();this._updateSectionSeparators(a);this._updateSectionTitle()},_updateSectionTitle:function(){var a,b=this;Object.keys(this._sectionTitles).forEach(function(a){b._view.removeClassFromLine(a,b._SECTION_TITLE_CLASS)});
this._sectionTitles={};for(a=0;a<this._sections.length;a+=1){var c=this._sections[a].startPosition.getRow(),d=this._internalDocument.getLineNode(c);d&&q.hasSectionTitle(d.getText())&&(this._view.applyClassToLine(c,this._SECTION_TITLE_CLASS),this._sectionTitles[c]=!0)}},getLeadingWhitespace:function(a){return a.match(/^\s*/)[0].length},_addSectionMarker:function(a,b){var c=b?a.startPosition.getRow():a.endPosition.getRow()+1;0!==c&&c<this._internalDocument.getMaxLineNumber()&&!this._sectionMarkers[c]&&
(this._view.applyClassToLine(c,this._SECTION_SEPARATOR_CLASS),this._sectionMarkers[c]=!0,b?a.usedSectionStart=!0:a.usedSectionEnd=!0)},_updateSectionSeparators:function(a){var b;this._view.removeClassFromAllLines(this._SECTION_SEPARATOR_CLASS);this._sectionMarkers={};for(b=this._sections.length-1;0<=b;b-=1)a?(this._addSectionMarker(this._sections[b],!0),this._addSectionMarker(this._sections[b],!1)):(this._sections[b].usedSectionStart&&this._addSectionMarker(this._sections[b],!0),this._sections[b].usedSectionEnd&&
this._addSectionMarker(this._sections[b],!1))},_updateActiveSection:function(){var a=this._cursor.getPosition();a&&(a=a.line,this._currentSectionNodes&&(this._viewLayer.hide(this._currentSectionNodes),this._currentSectionNodes=null),this.hasSection()?(a=this.getSectionNumber(a),this._activeSection=this._sections[a]||{}):this._activeSection={},this._actionService.updateAction(p.SECTIONS.RUN_SECTION_ACTION,{enabled:this.hasSection()}),this._updateActiveSectionHighlighting(),a=!this._cursor.isCursorReadOnly(),
this._actionService.updateAction(p.SECTIONS.INSERT_SECTION_ACTION,{enabled:a}))},_updateActiveSectionHighlighting:function(){if(void 0!==this._activeSection.startPosition){var a=this._internalDocument.getLineNode(this._activeSection.startPosition.getRow()),b=this._internalDocument.getLineNode(this._activeSection.endPosition.getRow());a&&b&&(this._currentSectionNodes=k.getParagraphNodesInRange(a,b),this._viewLayer.show(this._currentSectionNodes))}},_getMATLABStringFromCodeText:function(a){a=a.replace(/'/g,
"''");return"['"+a.split("\n").join("' 10 '")+"']"},_getActiveSectionContents:function(){var a="";if(void 0!==this._activeSection.startPosition)var a=this._internalDocument.getLineNode(this._activeSection.startPosition.getRow()),b=this._internalDocument.getLineNode(this._activeSection.endPosition.getRow()),a=k.getFullRange(a,b),a=this._internalDocument.getTextInRange(a.start.node,a.start.offset,a.end.node,a.end.offset);return a},evaluateActiveSection:function(){if(this._executionService&&void 0!==
this._activeSection.startPosition){var a=this._fileType.getFileType()===this._fileType.FILE_TYPE.ClassDefinitionFile;this._backingStore instanceof c&&!a?this._evaluateActiveSectionInFileContext():(a=this._getActiveSectionContents(),this._executionService.executionEval(a))}},_evaluateActiveSectionInFileContext:function(){var a=this._internalDocument.getLineNode(this._activeSection.startPosition.getRow()),b=this._internalDocument.getLineNode(this._activeSection.endPosition.getRow()),c=new l(a,0),d=
new l(b,b.getText().length),b=this._backingStore.getFileName(),a=this._backingStore.getAbsoluteFilePath(),a=a.substring(0,a.length-b.length),e=this._document.getCodeText(),e=this._getMATLABStringFromCodeText(e),c=this._getAbsoluteCodeOffsetFromPosition(this._internalDocument,c)+1,d=this._getAbsoluteCodeOffsetFromPosition(this._internalDocument,d)+1-c,b=this._SECTION_EVALUATION_FUNCTION+"('"+b+"', '"+a+"', "+e+", "+c+", "+d+", "+this._document.getState()+");";this._executionService.executionEval(b,
this._executionService.streamingEval)},_getAbsoluteCodeOffsetFromPosition:function(a,c){return b.getAbsoluteCodeOffsetFromPosition(a,c)},gotoNextSection:function(a){var b=this._cursor.getPosition();a=this._getNextSectionPosition(b,a);this._cursor.releaseAnchor();this._cursor.setPosition(a);this._cursor.onUpdate()},_gotoPreviousSection:function(){var a=this._cursor.getPosition(),a=this._getPreviousSectionPosition(a);this._cursor.releaseAnchor();this._cursor.setPosition(a);this._cursor.onUpdate()},
_getNextSectionPosition:function(a,b){var c=this.getSectionNumber(a.line);if(0>c||c===this._sections.length-1)return a;var d=c+1;if(b){var c=this._getSectionEndPosititon(c),e,f;for(e=this._sections.length-1;0<=e;e-=1){var g=this._sections[e].startPosition.getRow();if(g<=c.line){d=this.getSectionNumber(f);break}else f=g}}return this.getSectionStartPosition(d)},_getPreviousSectionPosition:function(a){var b=a.line,c=a.column,d=this.getSectionNumber(b);if(0>d)return a;a=this.getSectionStartPosition(d);
return this.getSectionStartPosition(b>a.line||c>a.column||0===d?d:d-1)},getSectionNumber:function(a){var b=-1,c;for(c=this._sections.length-1;0<=c;c-=1){var d=this._sections[c].startPosition.getRow(),e=this._sections[c].endPosition.getRow();if(a>=d&&a<=e){b=c;break}}return b},getSectionStartPosition:function(a){a=this._sections[a].startPosition.getRow();var b=this._internalDocument.getLineNode(a).getText(),b=this.getLeadingWhitespace(b);return{line:a,column:b}},_getSectionEndPosititon:function(a){a=
this._sections[a].endPosition.getRow();var b=this._internalDocument.getLineNode(a).getText().length;return{line:a,column:b}},isSectionStart:function(a){var b=!1,c;for(c=this._sections.length-1;0<=c;c-=1){var d=this._sections[c].startPosition.getRow();if(a===d&&(d=this._internalDocument.getLineNode(a))&&q.hasSectionTitle(d.getText())){b=!0;break}}return b}})})},"MW/rtc/plugins/language/matlab/section/PublishUtilities":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/EditorUtilities",
"MW/rtc/model/DocumentConstants"],function(h,f,g,e,d){return h(null,{constructor:function(c,b,a,d,e){this._sectionPlugin=c;this._document=b;this._internalDocument=a;this._cursor=d;this._indentUtilities=e;this.DESCRIPTIVE_START="% ";this.BULLETED_LIST_SYMBOL="* ";this.NUMBERED_LIST_SYMBOL="# ";this.PREFORMATTED_TEXT_SYMBOL=" ";this.CODE_SYMBOL="  ";this.DISPLAY_LATEX_SYMBOL="$$";this.IMAGE_START_SYMBOL="\x3c\x3c";this.IMAGE_END_SYMBOL="\x3e\x3e";this.PREFORMATTED_TEXT="PREFORMATTED\n% "+this.PREFORMATTED_TEXT_SYMBOL+
"TEXT";this.CODE_TEXT="for x \x3d 1:10\n%       disp(x)\n% "+this.CODE_SYMBOL+"end";this.BULLETED_LIST="ITEM1\n% "+this.BULLETED_LIST_SYMBOL+"ITEM2";this.NUMBERED_LIST="ITEM1\n% "+this.NUMBERED_LIST_SYMBOL+"ITEM2";this.IMAGE="FILENAME.PNG";this.DISPLAY_LATEX="e^{\\pi i} + 1 \x3d 0";this.BOLD_INSERT_TEXT="BOLD TEXT";this.ITALIC_INSERT_TEXT="ITALIC TEXT";this.MONO_INSERT_TEXT="MONOSPACED TEXT";this.INLINE_MATH_TEXT="x^2+e^{\\pi i}";this.HYPERLINKED_TEXT_BEGINNING="http://www.mathworks.com ";this.HYPERLINKED_TEXT_END=
"MathWorks";this.TITLE_AND_DESCRIPTION="SECTION TITLE\n% DESCRIPTIVE TEXT";this.SECTION_TAG="%%";this.SELECTION_MARK="$%^";this.FORMATTED_BLOCK_REGEX=/^\s*%(\s|$)/},insertSection:function(){this._insertSection("")},insertSectionWithTitle:function(){this._insertSection(this.TITLE_AND_DESCRIPTION)},insertBoldMarkup:function(){this._insertInlineMarkup(" *"," *","* ",this.BOLD_INSERT_TEXT)},insertItalicMarkup:function(){this._insertInlineMarkup(" _"," _","_ ",this.ITALIC_INSERT_TEXT)},insertMonospacedMarkup:function(){this._insertInlineMarkup(" |",
" |","| ",this.MONO_INSERT_TEXT)},insertHyperlinkMarkup:function(){this._insertInlineMarkup(" \x3c"," \x3c"+this.HYPERLINKED_TEXT_BEGINNING,"\x3e ",this.HYPERLINKED_TEXT_BEGINNING+this.HYPERLINKED_TEXT_END)},insertInlineLatexMarkup:function(){this._insertInlineMarkup(" $"," $","$ ",this.INLINE_MATH_TEXT)},insertBulletedListMarkup:function(){this._insertBlockMarkup(this.BULLETED_LIST_SYMBOL,this.BULLETED_LIST,"")},insertNumberedListMarkup:function(){this._insertBlockMarkup(this.NUMBERED_LIST_SYMBOL,
this.NUMBERED_LIST,"")},insertImageMarkup:function(){this._insertBlockMarkup(this.IMAGE_START_SYMBOL,this.IMAGE,this.IMAGE_END_SYMBOL)},insertPreformattedTextMarkup:function(){this._insertBlockMarkup(this.PREFORMATTED_TEXT_SYMBOL,this.PREFORMATTED_TEXT,"")},insertCodeMarkup:function(c,b){this._insertBlockMarkup(this.CODE_SYMBOL,this.CODE_TEXT,"")},insertDisplayLatexMarkup:function(){this._insertBlockMarkup(this.DISPLAY_LATEX_SYMBOL,this.DISPLAY_LATEX,this.DISPLAY_LATEX_SYMBOL)},_insertSection:function(c){var b=
this._document.startBlockEdit();c=this.SECTION_TAG+" "+this.SELECTION_MARK+c+this.SELECTION_MARK;var a=this._getSelectionStartPosition(),d=this._getFirstNonWhiteSpace(a.line),e="",f="";this._isWithinInitialWhiteSpace(a)?(this._cursor.movePosition(this._cursor.LINE_START),e="\n"):(this._cursor.movePosition(this._cursor.LINE_END),f="\n");this._document.insertTextAtCurrentPosition(this._getExpandedText(f+c+e,d));this._selectMarkedText();this._document.endBlockEdit(b)},_insertInlineMarkup:function(c,
b,a,d){c=this._cursor.hasSelection()?b+this.SELECTION_MARK:c+this.SELECTION_MARK;a=this.SELECTION_MARK+a;var e=this._getSelectionStartPosition(),f=e.line;b=this._isInFormattedBlock(f);var g=this._sectionPlugin.isSectionStart(f),h=this._getSelectionEndPosition(),p=h.line,r=this._isInFormattedBlock(p),s=this._sectionPlugin.isSectionStart(p);b?e.column=Math.max(e.column,this._getFirstNonWhiteSpace(f)+this.DESCRIPTIVE_START.length):g&&(e.column=Math.max(e.column,this._getFirstNonWhiteSpace(f)+this.SECTION_TAG.length+
1));r?h.column=Math.max(h.column,this._getFirstNonWhiteSpace(p)+this.DESCRIPTIVE_START.length):s&&(h.column=Math.max(h.column,this._getFirstNonWhiteSpace(p)+this.SECTION_TAG.length+1));this._isWhiteSpace({line:f,column:e.column-1})&&(c=c.substring(1));this._isWhiteSpace({line:p,column:h.column})&&(a=a.substring(0,a.length-1));f===p&&e.column===h.column?this._cursor.setPosition(e):this._cursor.setPosition({line:p,column:h.column,anchor:e});e=this._document.startBlockEdit();this._cursor.hasSelection()?
(f=this._sectionPlugin.getSectionNumber(f),p=this._sectionPlugin.getSectionNumber(p),f===p&&(b||g)&&(r||s)?this._wrapSelection(c,a):(this._cursor.releaseAnchor(),this._cursor.setPosition(h),this._insertSectionWithInlineMarkup(c+d+a))):b||g?this._document.insertTextAtCurrentPosition(c+d+a):this._insertSectionWithInlineMarkup(c+d+a);this._selectMarkedText();this._document.endBlockEdit(e)},_insertSectionWithInlineMarkup:function(c){" "===c.charAt(0)&&(c=c.substring(1));var b=this._getSelectionStartPosition(),
a=this._getFirstNonWhiteSpace(b.line),d="";this._isWithinInitialWhiteSpace(b)?this._cursor.movePosition(this._cursor.LINE_START):(this._cursor.movePosition(this._cursor.LINE_END),d="\n");c=this._getExpandedText(d+"%%\n"+this.DESCRIPTIVE_START+c,a);this._document.insertTextAtCurrentPosition(c)},_insertBlockMarkup:function(c,b,a){var d=this._document.startBlockEdit();b=this.SELECTION_MARK+b+this.SELECTION_MARK;var e=this._getSelectionStartPosition(),f=this._getFirstNonWhiteSpace(e.line),g=this._sectionPlugin.isSectionStart(e.line),
h=this._isInFormattedBlock(e.line),p="";this._cursor.setPosition(e);g||h?(this._cursor.movePosition(this._cursor.LINE_END),p=this._getExpandedText("\n"+this.DESCRIPTIVE_START+"\n"+this.DESCRIPTIVE_START+c+b+a+"\n"+this.DESCRIPTIVE_START,f)):(h=g="",this._isWithinInitialWhiteSpace(e)?(this._cursor.movePosition(this._cursor.LINE_START),g="\n"):(this._cursor.movePosition(this._cursor.LINE_END),h="\n"),p=this._getExpandedText(h+"%%\n"+this.DESCRIPTIVE_START+"\n"+this.DESCRIPTIVE_START+c+b+a+"\n"+this.DESCRIPTIVE_START+
g,f));this._document.insertTextAtCurrentPosition(p);this._selectMarkedText();this._document.endBlockEdit(d)},_getExpandedText:function(c,b){var a=e.getWhiteSpaces(b),d=c.split("\n"),f="",g;for(g=0;g<d.length;g+=1)f+=a+d[g]+"\n";return f=f.substring(0,f.length-1)},_wrapSelection:function(c,b){var a=this._getSelectionStartPosition(),d=this._getSelectionEndPosition();this._cursor.releaseAnchor();this._cursor.setPosition(a);this._document.insertTextAtCurrentPosition(c);a.line===d.line&&(d.column+=c.length);
this._cursor.setPosition(d);this._document.insertTextAtCurrentPosition(b)},_selectMarkedText:function(){var c=this._getSelectionMark({line:0,column:0}),b=this._getSelectionMark({line:c.line,column:c.column+this.SELECTION_MARK.length});this._cursor.setPosition({line:b.line,column:b.column,anchor:{line:b.line,column:b.column+this.SELECTION_MARK.length}});this._document.deleteTextAtCurrentPosition(d.BACKWARD_DELETE);this._cursor.setPosition({line:c.line,column:c.column,anchor:{line:c.line,column:c.column+
this.SELECTION_MARK.length}});this._document.deleteTextAtCurrentPosition(d.BACKWARD_DELETE);var a=c.line,e=c.column,f=b.line,c=c.line===b.line?b.column-this.SELECTION_MARK.length:b.column;(a!==f||e!==c)&&this._cursor.setPosition({line:f,column:c,anchor:{line:a,column:e}})},_isInFormattedBlock:function(c){var b=!0;if(!this._internalDocument.getLineNode(c).getText().match(this.FORMATTED_BLOCK_REGEX)||!this._sectionPlugin.hasSection())return!1;for(var a=this._sectionPlugin.getSectionNumber(c),a=this._sectionPlugin.getSectionStartPosition(a).line+
1;a<c;a+=1)if(!this._internalDocument.getLineNode(a).getText().match(this.FORMATTED_BLOCK_REGEX)){b=!1;break}return b},_getSelectionMark:function(c){var b=this._internalDocument.getMaxLineNumber(),a=c.line,d;for(d=a;d<b;d+=1){var e=this._internalDocument.getLineNode(d).getText();d===a&&(e=e.substring(c.column));if(-1!==e.indexOf(this.SELECTION_MARK))return{line:d,column:d===a?c.column+e.indexOf(this.SELECTION_MARK):e.indexOf(this.SELECTION_MARK)}}return null},_isWithinInitialWhiteSpace:function(c){var b=
!1,a=this._getFirstNonWhiteSpace(c.line);c.column<=a&&(b=!0);return b},_getFirstNonWhiteSpace:function(c){c=this._internalDocument.getLineNode(c);return this._indentUtilities.getIndentLevel(c)},_isWhiteSpace:function(c){return" "===this._internalDocument.getLineNode(c.line).getText().charAt(c.column)},_getSelectionStartPosition:function(){var c=this._cursor.getPosition();return this._cursor.hasSelection()&&!this._cursor.isReversed()?c.anchor:{line:c.line,column:c.column}},_getSelectionEndPosition:function(){var c=
this._cursor.getPosition();return this._cursor.hasSelection()&&this._cursor.isReversed()?c.anchor:{line:c.line,column:c.column}}})})},"MW/rtc/plugins/language/matlab/section/view/SectionPluginViewLayer":function(){define(["dojo/_base/declare","dojo/dom-class"],function(h,f){return h(null,{constructor:function(){},show:function(g){g&&g.forEach(function(e){f.add(e.box,"active_cell")},this)},hide:function(g){g&&g.forEach(function(e){f.remove(e.box,"active_cell")},this)}})})},"MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributor","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.document","rtc.code.sections.model"]}},createInstance:function(e,d,c){return new f(e,d,c)}})})},"MW/rtc/plugins/language/matlab/sections/CodeRegionSectionContributor":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/on MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k){return f(null,{constructor:function(a,b,c){this._internalDocument=a;this._document=b;this._sectionModel=c;this._aspectHandles=[];this._aspectHandles.push(e.after(this._document,"onChange",g.hitch(this,"_updateSectionsOnDocLength"),!0));this._aspectHandles.push(e.after(this._internalDocument,"onDocumentChanged",g.hitch(this,"_updateSectionsOnFormatChange"),!0));this._aspectHandles.push(e.after(this._internalDocument,"onDocumentReset",g.hitch(this,"_updateSections")))},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});
this._aspectHandles=[]},_updateSectionsOnDocLength:function(b){k.hasEventType(b,a.NUMBER_OF_LINES_CHANGED)&&this._updateSections()},_updateSectionsOnFormatChange:function(b){k.hasEventType(b,a.FORMAT_CHANGE_EVENT)&&this._updateSections()},_updateSections:function(){var a=this._getSectionsAsLineNodes();this._sectionModel.resetSections(a)},_getSectionsAsLineNodes:function(){for(var a=[],b=this._internalDocument.startNode(),b=this._getNextStartCodeNode(b);b;){var c=this._getSectionEndNode(b);a.push({startNode:b,
endNode:c});b=this._getNextSection(c)}return a},_getNextStartCodeNode:function(a){return a&&!b.isCodeContainer(a)?this._getNextStartCodeNode(a.rootContainer().nextSibling()):a},_getSectionEndNode:function(a){if(!b.isCodeContainer(a))return null;var c=a.rootContainer().nextSibling();return!c||!b.isCodeContainer(c)?a:this._getSectionEndNode(c)},_getNextSection:function(a){b.isCodeContainer(a)&&(a=this._getNextStartNonCodeNode(a));return this._getNextStartCodeNode(a)},_getNextStartNonCodeNode:function(a){return a&&
b.isCodeContainer(a)?this._getNextStartNonCodeNode(a.rootContainer().nextSibling()):a}})})},"MW/rtc/plugins/language/matlab/sections/CurrentSectionViewProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/CurrentSectionView","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view","rtc.code.sections.model","rtc.code.sections.view.containerutility"]}},
createInstance:function(e,d,c,b){return new f(e,d,c,b)}})})},"MW/rtc/plugins/language/matlab/sections/CurrentSectionView":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-class","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e,d){return h(d,{_ACTIVE_CLASS:"active",constructor:function(c,b,a,d){this._internalDocument=c;this._view=b;this._sectionModel=a;this._sectionContainerUtil=d;this.own(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_updateView")));
this.own(g.after(this._view,"onLayoutChange",f.hitch(this,"_updateView")));this.own(g.after(this._sectionModel,"currentSectionChanged",f.hitch(this,"_updateView")))},_updateView:function(){var c=this._sectionModel.getCurrentSectionNumber();if(0>c)this._clearDecoration();else if(c=this._sectionContainerUtil.getSectionBlock(c))e.contains(c,this._ACTIVE_CLASS)?this._currentSectionDomNode=c:(this._clearDecoration(),this._currentSectionDomNode=c,this._applyDecoration())},_applyDecoration:function(){this._currentSectionDomNode&&
e.add(this._currentSectionDomNode,this._ACTIVE_CLASS)},_clearDecoration:function(){this._currentSectionDomNode&&e.remove(this._currentSectionDomNode,this._ACTIVE_CLASS)}})})},"MW/rtc/plugins/language/matlab/sections/InsertSectionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/InsertSection","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument",
"rtc.cursor","rtc.actionservice","rtc.document"]}},createInstance:function(e,d,c,b){return new f(e,d,c,b)}})})},"MW/rtc/plugins/language/matlab/sections/InsertSection":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/events/NumberOfLinesChangedEvent dojo/i18n!l10n/nls/actions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(d,{_CODE_NODE_TYPE:"code",_TEXT_NODE_TYPE:"text",_INSERT_NODE_BEFORE:"before",_INSERT_NODE_AFTER:"after",constructor:function(a,b,c,d){this._internalDocument=a;this._cursor=b;this._actionService=c;this._document=d;a=[{id:"rtc_insert_section",enabled:!1,callback:f.hitch(this,"_insertSection")},{id:"rtc_insert_text",enabled:!1,key:"alt_enter",platformKey:{mac:"alt_enter"},callback:f.hitch(this,"_insertTextOrCode")},{id:"rtc_insert_code",enabled:!1,key:"alt_enter",
platformKey:{mac:"alt_enter"},callback:f.hitch(this,"_insertTextOrCode")}];this._actionService.loadActions(a);this.own(g.after(this._cursor,"onChange",f.hitch(this,this._updateActionState)))},_updateActionState:function(){this._actionService.updateAction("rtc_insert_section",{enabled:this._canInsertSection()});var a=this._canInsertText(),b=a&&this._cursor.hasSelection()?q.convertSelectionToTextDescription:q.insertTextDescription;this._actionService.updateAction("rtc_insert_text",{enabled:a,description:b});
b=(a=this._canInsertCode())&&this._cursor.hasSelection()?q.convertSelectionToCodeDescription:q.insertCodeDescription;this._actionService.updateAction("rtc_insert_code",{enabled:a,description:b})},_canInsertSection:function(){return!this._cursor||this._internalDocument.isReadOnly()?!1:!this._cursor.hasSelection()},_canInsertText:function(){if(!this._cursor||this._internalDocument.isReadOnly())return!1;var a=this._cursor.adjustSelection(this._cursor.selectionInfo(),!0);return!l.isContinuousFormat(a)?
!1:"code"===l.getParagraphFormat(a)},_canInsertCode:function(){if(!this._cursor||this._internalDocument.isReadOnly())return!1;var a=this._cursor.adjustSelection(this._cursor.selectionInfo(),!0);return!l.isContinuousFormat(a)?!1:"code"!==l.getParagraphFormat(a)},_insertSection:function(){if(this._internalDocument.isReadOnly())return e.assert("Trying to insert a section in a read only state."),!1;var a=this._cursor.adjustSelection(this._cursor.selectionInfo(),!0);if(!l.isContinuousFormat(a))return e.assert("Trying to insert a section in a multi format selection."),
!1;this._insertTextOrCode()},_insertTextOrCode:function(){var a=this._canInsertText(),b=this._canInsertCode();if(!a&&!b)return!1;var c=this._fixedSelectionInfo(),d=c.startPosition.getLineColumn().line-1,e=c.endPosition.getLineColumn().line-1;if(this._coversFullParagraphs(c))return this._actionService.executeAction("rtc_toggle_code_and_text"),!0;this._internalDocument.onPreDocumentChanged({});var c=this._document.startBlockEdit(),f=this._treatSelection(),a=this._insertBlankLine(a);f&&(f=k.textToContent(f,
this._cursor.getNode()),b&&!this._cursor.getNode().textContainer().isEmpty()&&this._insertBlankLine(!1),this._document.insertContent(f,this._cursor.position,this._cursor));c.appendUndoEvents([m.create(d,e)]);c.appendRedoEvents(a);this._internalDocument.emitDocumentEvents(a);this._document.endBlockEdit(c);this._cursor.onUpdate(!1,!0);return!0},_insertBlankLine:function(a){var b=this._cursor.position;this._cursor.hasSelection()&&e.assert("_insertBlankLine: Selection must be empty!");var c=this._internalDocument.createContainerForType(a?
this._TEXT_NODE_TYPE:this._CODE_NODE_TYPE).container;a=this._internalDocument.createNode(c.defaultTextNode());c.addChild(a);b=this._internalDocument.insertAtPosition(c,b);b.insertionNotAllowed||(this._cursor.setPosition(a.startPosition()),this._cursor.onUpdate(!1,!0));return b.events},_treatSelection:function(){var a;this._cursor.hasSelection()&&(a=this._cursor.selectedText(),this._document.deleteTextAtCurrentPosition(b.BACKWARD_DELETE));return a},_coversFullParagraphs:function(a){return k.isAtStartOfContainer(a.startPosition)&&
k.isAtEndOfContainer(a.endPosition)},_fixedSelectionInfo:function(){var a=this._cursor.selectionInfo();a.isNull||(a=this._cursor.adjustSelection(a,!0),this._cursor.setPosition(a.startNode,a.startPos),this._cursor.fixAnchor(!0),this._cursor.setPosition(a.endNode,a.endPos),a=this._cursor.selectionInfo());return a}})})},"MW/rtc/plugins/language/matlab/sections/NavigateSectionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/NavigateSection","MW/rtc/core/provider/PluginProvider"],
function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.cursor","rtc.actionservice","rtc.view","rtc.code.sections.model","rtc.code.sections.view.containerutility"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/sections/NavigateSection":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h([],{_CHECK_FULLY_ONSCREEN:!0,_SECTION_TOP_PERCENT:3,
constructor:function(e,d,c,b,a){this._cursor=e;this._actionService=d;this._view=c;this._sectionModel=b;this._sectionContainerUtility=a;e=[{id:"rtc_navigate_next_section",enabled:!1,key:"ctrl_down",callback:f.hitch(this,"_nextSection")},{id:"rtc_navigate_previous_section",enabled:!1,key:"ctrl_up",callback:f.hitch(this,"_previousSection")}];this._actionService.loadActions(e);this._updateActionState();this._aspectHandles=[];this._aspectHandles.push(g.after(this._sectionModel,"currentSectionChanged",
f.hitch(this,"_updateActionState")))},destroy:function(){this._aspectHandles.forEach(function(e){e.remove()});this._aspectHandles=[]},_updateActionState:function(){var e=null!=this._sectionModel.getNextSection(),d=null!=this._sectionModel.getPreviousSection();this._actionService.updateAction("rtc_navigate_next_section",{enabled:e});this._actionService.updateAction("rtc_navigate_previous_section",{enabled:d})},_previousSection:function(){var e=this._sectionModel.getPreviousSection(),d=this._sectionModel.getCurrentSection(),
c=this._cursor.getLineColumn();if(!e||!e.start.getNode()||c.line!==d.start.line+1||c.column!==d.start.column+1)return this._cursor.releaseAnchor(),this._cursor.setPosition(d.start.getNode(),0,!0),!0;e=e.start.getNode();this._cursor.releaseAnchor();this._cursor.setPosition(e,0,!1);this._view.isNodeInView(e,this._CHECK_FULLY_ONSCREEN)||this._view.scrollNodeToPercent(e,this._SECTION_TOP_PERCENT);return!0},_nextSection:function(){var e=this._sectionModel.getNextSection();if(!e||!e.start.getNode())return!0;
var e=e.start.getNode(),d=this._sectionModel.getCurrentSectionNumber(),c=this._sectionModel.getSection(d),b=null;this._cursor.releaseAnchor();this._cursor.setPosition(e,0,!1);var a=d+2,b=this._view.getDomTargetPosition().clientHeight,f=this._sectionContainerUtility.getSectionDimensions(d+1).height,a=this._sectionModel.getSection(a),g=null,h=g=!1;a&&(g=a.start.getNode(),g=this._view.isNodeInView(g,this._CHECK_FULLY_ONSCREEN),h=this._view.isNodeInView(e,this._CHECK_FULLY_ONSCREEN));if(!g||!h)b=b>f?
this._sectionContainerUtility.getSectionDimensions(d).height+f<b?c.start.getNode():e:e,this._view.scrollNodeToPercent(b,this._SECTION_TOP_PERCENT);return!0}})})},"MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributorProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributor","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument",
"rtc.document","rtc.code.sections.model"]}},createInstance:function(e,d,c){return new f(e,d,c)}})})},"MW/rtc/plugins/language/matlab/sections/SectionBreakSectionContributor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentEventUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/sectionbreak/model/SectionBreakNode".split(" "),function(h,f,g,e,d,c,b,a){return h(e,{constructor:function(a,b,c){this._internalDocument=
a;this._document=b;this._sectionModel=c;this.own(g.after(b,"onChange",f.hitch(this,"_handleDocumentChanged"),!0));this.own(g.after(a,"onDocumentReset",f.hitch(this,"_handleDocumentReset")))},_handleDocumentChanged:function(a){a=c.lineRangeFromEvents(a);a.startLine!==a.endLine&&this._updateSections()},_handleDocumentReset:function(){this._updateSections()},_updateSections:function(){var a=this._getSectionsAsLineNodes();this._sectionModel.resetSections(a)},_getSectionsAsLineNodes:function(){for(var c=
[],d=null,e=null,f=this._internalDocument.getMaxLineNumber(),g=0;g<f;g+=1){var h=this._internalDocument.getLineNode(g),r=b.isInType(h,a);r||(d||(d=h),e=h);h=d&&e;if((r||g===f-1)&&h)c.push({startNode:d,endNode:e}),e=d=null}return c}})})},"MW/rtc/plugins/language/matlab/sections/SectionModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/SectionModel","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.internaldocument","rtc.document","rtc.cursor"]}},createInstance:function(e,d,c){return new f(e,d,c)}})})},"MW/rtc/plugins/language/matlab/sections/SectionModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/NodeUtilities".split(" "),function(h,f,g,e,d,c){return h(d,{constructor:function(b,a,c){this._internalDocument=b;this._document=a;this._cursor=c;this._sections=[];this._lastLine=null;this._currentSection=
-1;this.own(g.after(c,"onChange",f.hitch(this,"_updateCurrentSection")))},_areSectionsEqual:function(b){return this._sections.length!==b.length?!1:!this._sections.some(function(a,c){var d=b[c];if(a.start.getNode()!==d.startNode||a.end.getNode()!==d.endNode)return!0},this)},resetSections:function(b){this._areSectionsEqual(b)?-1===this._currentSection&&this._updateCurrentSection():(this._clearSections(),this._sections=this._convertFromNodesToPositions(b),this._lastLine=null,this._currentSection=-1,
this._updateCurrentSection(),this.onModelUpdated())},_convertFromNodesToPositions:function(b){return b.map(function(a){return{start:this._document.createLinePosition(a.startNode),end:this._document.createLinePosition(a.endNode)}},this)},setAttribute:function(b,a){this._setAttribute(b,a);this.onAttributesUpdated(b)},setAttributeOnReset:function(b,a){this._setAttribute(b,a)},_setAttribute:function(b,a){e.assert("start"!==b&&"end"!==b,"You cannot use start/end as they are reserved attributes!");this._sections.forEach(function(c,
d){c[b]=a.hasOwnProperty(d)?a[d]:null})},getFirstSectionWithAttributeData:function(b){var a=null;this._sections.some(function(c){return(a=c[b])&&0<a.length});return a},_clearSections:function(){this._sections.forEach(function(b){this._document.deletePosition(b.start);this._document.deletePosition(b.end)},this);this._sections=[]},onModelUpdated:function(){},onAttributesUpdated:function(){},getSections:function(){return this._sections},getSection:function(b){if(0>b||b>=this._sections.length)return null;
b=this._sections[b];return this._isSectionValid(b)?b:null},_isSectionValid:function(b){return b&&b.start&&b.start.isValid()&&b.end&&b.end.isValid()},getSectionNumberForNode:function(b){b=c.getLineNumberForNode(b,this._internalDocument);return this.getSectionNumberForLine(b)},getSectionForNode:function(b){b=this.getSectionNumberForNode(b);return this.getSection(b)},getSectionNumberForLine:function(b){var a=-1;this._sections.some(function(c,d){if(b>=c.start.line&&b<=c.end.line)return a=d,!0},this);
return a},getSectionForLine:function(b){b=this._internalDocument.getLineNode(b);if(!b)return null;b=this.getSectionNumberForNode(b);return this.getSection(b)},_updateCurrentSection:function(){var b=this._cursor.getNode().rootContainer();this._lastLine===b&&-1<this._currentSection||(this._currentSection=b?this.getSectionNumberForNode(b):-1,this._lastLine=b,this.currentSectionChanged())},currentSectionChanged:function(){},getCurrentSectionNumber:function(){return this._currentSection},getCurrentSection:function(){return 0>
this._currentSection?null:this._sections[this._currentSection]},getNextSection:function(){return 0>this._currentSection||this._currentSection===this._sections.length-1?null:this._sections[this._currentSection+1]},getPreviousSection:function(){return 0>this._currentSection||0===this._currentSection?null:this._sections[this._currentSection-1]},destroy:function(){this.inherited(arguments);this._clearSections()}})})},"MW/rtc/plugins/language/matlab/sections/SectionContainerUtilityProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/sections/SectionContainerUtility","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.scrollpane"]}},createInstance:function(e){return new f(e)}})})},"MW/rtc/plugins/language/matlab/sections/SectionContainerUtility":function(){define(["dojo/_base/declare","dojo/dom-geometry","dojo/query!lite"],function(h,f,g){return h(null,{constructor:function(e){this._scrollPane=
e},getSectionDimensions:function(e){var d=this.getSectionBlock(e);if(!d)return null;e={top:0,left:0,height:0,width:0};var d=d.getBoundingClientRect(),c=this._scrollPane.getBoundingClientRect();e.top=d.top-c.top;e.left=d.left-c.left;e.height=d.height;e.width=d.width;return e},getSectionNumberByCoordinate:function(e){for(var d=this._getSectionBlocks(),c=0;c<d.length;c+=1){var b=f.getMarginBox(d[c]);if(e.y>=b.t&&e.y<=b.t+b.h)return c}return-1},getClosestSectionNumberByCoordinate:function(e){var d=this._getSectionBlocks();
if(0===d.length)return-1;for(var c=0,b=0;b<d.length;b+=1){var a=f.getMarginBox(d[b]);if(e.y<a.t)break;c=b}return c},getSectionBlock:function(e){return this._getSectionBlocks()[e]},_getSectionBlockClass:function(){return"SectionBlock"},_getSectionBlocks:function(){return g(".rootNode \x3e ."+this._getSectionBlockClass(),this._scrollPane)}})})},"MW/rtc/plugins/language/matlab/sections/StaleSectionModelProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/sections/StaleSectionModel",
"MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.internaldocument rtc.code.sections.model rtc.document rtc.code.codechange rtc.code.codecontent rtc.embeddedoutputs.statehandler rtc.allfunctionnotifier".split(" ")}},createInstance:function(e,d,c,b,a,g,h){return new f(e,d,c,b,a,g,h)},destroyInstance:function(e){this.inherited(arguments);e.destroy()}})})},"MW/rtc/plugins/language/matlab/sections/StaleSectionModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/CodeUtilities MW/rtc/model/NodeUtilities MW/rtc/plugins/functionnotifier/FunctionStateConstants MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants mw-utils/Utils".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(e,{constructor:function(a,b,c,d,e,h,k){this._sectionModel=b;this._stateHandler=h;this._codeChangeService=d;this._document=c;this._codeContent=e;this._internalDocument=a;this._functionNotifier=k;this._upperBoundaryPosition=this._previousFunctionRange=null;this._staleNodePositions=[];this._latestCompletedSectionNumber=null;this.own(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_clearStaleNodes")));this.own(g.after(this._codeChangeService,"onCodeChanged",
f.hitch(this,"_codeChangeListener"),!0));this.own(g.after(this._stateHandler,"stateChanged",f.hitch(this,"_stateChangeListener"),!0));this.own(g.after(this._functionNotifier,"onValidFunctionsChange",f.hitch(this,"_handleValidFunctionChange"),!0))},destroy:function(){this._staleNodePositions=[];this._upperBoundaryPosition&&this._document.deletePosition(this._upperBoundaryPosition)},onModelUpdated:function(){},isSectionStale:function(a){a=this._sectionModel.getSection(a);if(!a)return!1;var c=b.getParagraphNodesInRangeAsSet(a.start.getNode(),
a.end.getNode());return this._staleNodePositions.some(function(a){return c.has(a.position.getNode())})},getStaleSectionNumbers:function(){return l.unique(this.getStaleNodes().map(function(a){return this._sectionModel.getSectionNumberForNode(a)},this))},_clearDeadStaleNodes:function(){this._staleNodePositions=this._staleNodePositions.filter(function(a){if(a.position.getNode().parent)return!0;this._document.deletePosition(a.position)},this)},_clearStaleNodes:function(){this._staleNodePositions=this._clearStaleNodePositions();
this.onModelUpdated()},_clearStaleNodePositions:function(){return this._staleNodePositions.filter(function(a){this._document.deletePosition(a.position)},this)},_codeChangeListener:function(a){this._removeMergedStaleNodes();this._clearDeadStaleNodes();a=a.filter(c.isCodeContainer,c);a.forEach(function(a){this._nodeInFunction(a)||this._setNodeStale(a)},this);this.onModelUpdated(a)},_removeMergedStaleNodes:function(){var a=d.createSet();this._staleNodePositions=this._staleNodePositions.filter(function(b){var c=
b.position.getNode();if(!a.has(c))return a.add(c),!0;this._document.deletePosition(b.position)},this)},_handleValidFunctionChange:function(a){this._clearStalenessFromFunctions(a);this.onModelUpdated()},_clearStalenessFromFunctions:function(a){a=this._getFunctionRange(a);if(this._hasFunctionRangeShrunk(a)){var b=this._getRangeDiffForFunctions(a);this._setPreviousFunctionNodesStale(b)}else this._clearStalenessFromLineRange(a);this._updateUpperBoundaryPosition(a);this._previousFunctionRange=a},_getFunctionRange:function(a){var b=
this._getFunctionsFromEvent(a),c=a=null;b&&0<b.length&&b[0].isTopLevelFunction?(a=[b[0]],c=b.slice(1)):c=b;b=null;c&&0<c.length&&(b=c);if(!a&&!b)return null;c={startLine:null,endLine:null};a&&(c.startLine=0,c.endLine=a[0].endLine-1);b&&(a||(c.startLine=b[0].startLine-1),c.endLine=this._internalDocument.getMaxLineNumber());return c},_getFunctionsFromEvent:function(b){var c;switch(b.type){case a.VALID_FUNCTIONS_REMOVED:c=[];break;case a.VALID_FUNCTIONS_ADDED:case a.VALID_FUNCTIONS_CHANGED:case a.FUNCTIONS_ON_VALID_DOCUMENT_CHANGE:c=
b.validFunctions}return c},_hasFunctionRangeShrunk:function(a){if(!a)return!0;if(!this._upperBoundaryPosition||!this._upperBoundaryPosition.isValid())return!1;a=a.startLine;var b=this._upperBoundaryPosition.getLine();if(-1===b)return!1;if(a>b)return!0},_getRangeDiffForFunctions:function(a){if(!a)return this._previousFunctionRange;a=a.startLine;return{startLine:this._upperBoundaryPosition.getLine(),endLine:a-1}},_updateUpperBoundaryPosition:function(a){this._upperBoundaryPosition&&this._document.deletePosition(this._upperBoundaryPosition);
a&&(this._upperBoundaryPosition=this._document.createLinePositionInLine(a.startLine))},_clearStalenessFromLineRange:function(a){a&&(this._staleNodePositions=this._staleNodePositions.filter(function(b){if(b.position.getLineColumn().line-1<a.startLine||b.position.getLineColumn().line-1>a.endLine)return!0;this._document.deletePosition(b.position);return!1},this))},_setPreviousFunctionNodesStale:function(a){if(a)for(var b=a.startLine;b<=a.endLine;b+=1)this._setNodeStale(this._internalDocument.getLineNode(b))},
_nodeInFunction:function(a){if(!this._previousFunctionRange)return!1;var b=this._internalDocument.getLineNumber(a)>=this._previousFunctionRange.startLine,c=this._internalDocument.getLineNumber(a)<=this._previousFunctionRange.endLine;if(b&&c)return!0;a=this._sectionModel.getSectionForNode(a);return!a?!1:!!a[k.TOP_LEVEL_FUNCTION_ATTRIBUTE]||!!a[k.LOCAL_FUNCTION_ATTRIBUTE]},_setNodeStale:function(a){if(c.isCodeContainer(a)){var b=this.getStaleNodes().indexOf(a);0>b?(a={position:this._document.createLinePosition(a),
count:2},this._staleNodePositions.push(a)):this._staleNodePositions[b].count+=1}},getStaleNodes:function(){return this._staleNodePositions.map(function(a){return a.position.getNode()})},_stateChangeListener:function(a,b){switch(a){case this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_STARTED:this._normalizeStaleness();this._clearEmptySections();this.onModelUpdated();break;case this._stateHandler.CHANGE_TYPE_ENUM.SECTION_EVAL_COMPLETE:this._clearEmptyLinesInSectionNumber(b);this._setSectionUpToDate(b);
this._latestCompletedSectionNumber=b;this.onModelUpdated();break;case this._stateHandler.CHANGE_TYPE_ENUM.REGIONS_EVAL_COMPLETE:this._updateMissedSections(b.requestedEvaluationRange,b.didRunToCompletion,this._latestCompletedSectionNumber),this._latestCompletedSectionNumber=null,this._normalizeStaleness()}},_sectionIsEmpty:function(a){a=b.getParagraphNodesInRange(a.start.getNode(),a.end.getNode());a=a.filter(c.isCodeContainer,c);return!this._codeContent.lineNodesContainCode(a)},_clearEmptySections:function(){this._sectionModel.getSections().forEach(function(a,
b){this._sectionIsEmpty(a)&&this._setSectionUpToDate(b)},this)},_setSectionUpToDate:function(a){(a=this._sectionModel.getSection(a))&&this._setRangeUpToDate(a.start.line,a.end.line)},_setRangeUpToDate:function(a,b){this._staleNodePositions=this._staleNodePositions.filter(function(c){var d=!0,e=c.position.line;a<=e&&e<=b&&(d=this._setStaleNodeUpToDate(c));return d},this)},_setStaleNodeUpToDate:function(a){a.count-=1;return 0===a.count?(this._document.deletePosition(a.position),!1):!0},_updateMissedSections:function(a,
b,c){if(b&&null!==c&&(b=this._sectionModel.getSection(c+1)))b=b.start.line,a=a.getEndPosition().line,b<=a&&(this._setRangeUpToDate(b,a),this.onModelUpdated())},_normalizeStaleness:function(){this._staleNodePositions.forEach(function(a){a.count=0<a.count?1:0})},_clearEmptyLinesInSectionNumber:function(a){(a=this._sectionModel.getSection(a))&&b.getParagraphNodesInRange(a.start.getNode(),a.end.getNode()).forEach(function(a){this._lineIsEmpty(a)&&(this._staleNodePositions=this._staleNodePositions.filter(function(b){if(b.position.getNode()!==
a)return!0;this._document.deletePosition(b.position)},this))},this)},_lineIsEmpty:function(a){return!this._codeContent.lineNodesContainCode([a])}})})},"MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/tokenizer/MatlabTokensPlugin","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities"],function(h,f,g,e){return h(f,{isApplicable:function(d){return e.isMatlabCodeFileOrBuffer(d)},
requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.internaldocument","rtc.document"]}},createInstance:function(d,c){return new g(d,c)},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlightingProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlighting"],function(h,f,g){return h(f,
{requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","matlab.code.variables.service","rtc.view.decoration"]}},createInstance:function(e,d,c){return new g(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/nonlocalvariablehighlighting/NonlocalVariableHighlighting":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{_NONLOCAL_VARIABLE_HIGHLIGHT:["nonlocalVariableHighlighting"],constructor:function(e,
d,c){this._internalDocument=e;this._variableService=d;this._decorator=c.createDecorator();this._handleArray=[];this._handleArray.push(g.after(this._variableService,"onVariablesUpdated",f.hitch(this,"_handleVariablesUpdated")))},_handleVariablesUpdated:function(){var e=this._variableService.getNonlocalVariableInstances();null!==e&&(this._removeHighlights(),this._applyHighlights(e),this._decorator.applyChanges())},_applyHighlights:function(e){0<!e.length||e.forEach(function(d){d=this._internalDocument.getRangeForLineColumn(d.startLine+
1,d.startColumn+1,d.endLine+1,d.endColumn+1);this._decorator.addClass(d,this._NONLOCAL_VARIABLE_HIGHLIGHT)},this)},_removeHighlights:function(){for(var e=this._internalDocument.getMaxLineNumber(),d=0;d<e;d+=1){var c=this._internalDocument.getRangeForLine(d+1);this._decorator.removeClass(c,this._NONLOCAL_VARIABLE_HIGHLIGHT)}},destroy:function(){this._handleArray.forEach(function(e){e.remove()});this._handleArray=[]}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlightProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlight"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:"rtc.internaldocument rtc.eventhandler rtc.view rtc.cursor matlab.code.variables.service rtc.actionservice".split(" ")}},createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/variablehighlighting/VariableHighlight":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/variableservice/VariableUtilities MW/rtc/view/ViewEventUtilities ./view/VariableHighlightView".split(" "),
function(h,f,g,e,d,c,b,a){return h(null,{_UPDATE_TIMER_LENGTH:1333,constructor:function(b,c,d,e,h,p){this._internalDocument=b;this._eventHandler=c;this._view=d;this._cursor=e;this._variableService=h;this._actionService=p;this._variableHighlightView=new a(d);this._handleCallbacks=[];this._handleCallbacks.push(g.after(this._variableService,"onEnable",f.hitch(this,"_setListeners")));this._handleCallbacks.push(g.after(this._variableService,"onDisable",f.hitch(this,"_removeListeners")));this._handleCallbacks.push(g.after(this._variableService,
"onVariablesUpdated",f.hitch(this,"_clearAllAndUpdateNow")));this._handleArray=[];this._setListeners();this._showTimer=null;this._suspend=!1;b=[{id:"rtc_variable_highlighting_escape",key:"escape",enabled:!0,callback:f.hitch(this,"_removeHighlights")}];this._actionService.loadActions(b);this._highlightedVariableInstances=[]},_setListeners:function(){0===this._handleArray.length&&(this._handleArray.push(g.after(this._eventHandler,"onMouseDown",f.hitch(this,"_updateNow"))),this._handleArray.push(g.after(this._cursor,
"selectAll",f.hitch(this,"_updateNow"))),this._handleArray.push(g.after(this._cursor,"setPosition",f.hitch(this,"_update"),!0)),this._handleArray.push(g.before(this._cursor,"movePosition",f.hitch(this,"_updateLater"))),this._handleArray.push(g.after(this._internalDocument,"onPreDocumentChanged",f.hitch(this,"_pendingDocumentChanged"))),this._handleArray.push(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_clearAllAndUpdateNow"))),this._handleArray.push(g.after(this._view,"onLayoutChange",
f.hitch(this,"_update"))),this._handleArray.push(g.after(this._view,"onViewUpdated",f.hitch(this,"_handleViewUpdated"),!0)))},_handleViewUpdated:function(a){(b.hasWidthEvent(a)||b.hasRenderEvent(a))&&this._update()},_drawHighlights:function(){this._variableHighlightView.highlightAllVariables(this._highlightedVariableInstances)},_removeHighlights:function(){this._clearCache();this._variableHighlightView.removeAllHighlights()},_clearCache:function(){this._highlightedVariableInstances=[]},_updateLater:function(){this._showTimer&&
clearTimeout(this._showTimer);this._clearCache();this._showTimer=setTimeout(f.hitch(this,"_updateNow"),this._UPDATE_TIMER_LENGTH)},_updateNow:function(){var a=this._getVariableUnderCursor();this._highlightedVariableInstances=this._variableService.getVariableInstances(a);1>=this._highlightedVariableInstances.length&&(this._highlightedVariableInstances=[]);this._drawHighlights()},_update:function(){this._suspend||this._updateNow()},_pendingDocumentChanged:function(){this._suspend=!0},_clearAllAndUpdateNow:function(){this._suspend=
!1;this._clearCache();this._drawHighlights();this._updateNow()},destroy:function(){this._removeListeners();this._variableHighlightView.destroy()},_removeListeners:function(){this._handleArray.forEach(function(a){a.remove()});this._handleArray=[]},_getVariableUnderCursor:function(){if(!e.isCodeContainer(this._cursor.position.getNode()))return null;var a=d.getWordAtPosition(this._internalDocument,this._cursor.position);return!a||c.selectionSpansOutsideVariable(this._cursor,a)?null:a}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableUtilities":function(){define([],
function(){return{isSameVariableLocation:function(h,f){return!h||!f?!1:h.startLineCol.line===f.startLineCol.line&&h.endLineCol.line===f.endLineCol.line&&h.startLineCol.column===f.startLineCol.column},getUpdatedVariableStructure:function(h){return!h?null:{endLineCol:{column:h.endColumn,line:h.endLine},startLineCol:{column:h.startColumn,line:h.startLine},text:h.text}},selectionSpansOutsideVariable:function(h,f){if(!h.hasSelection())return!1;if(!f)return!0;var g=h.getSelectionLineColumn(),e=f.startLineCol.line;
if(g.start.line-1!==e||g.end.line-1!==e)return!0;e=g.start.column;g=g.end.column;if(e>g)var d=e,e=g,g=d;return e-1<f.startLineCol.column||g-1>f.endLineCol.column?!0:!1}}})},"MW/rtc/plugins/language/matlab/variablehighlighting/view/VariableHighlightView":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-style dojo/dom-attr".split(" "),function(h,f,g,e,d,c){return h(null,{_VARIABLE_HIGHLIGHT_LAYER:"variableHighlightLayer",_VARIABLE_HIGHLIGHT:"variableHighlight",
_VARIABLE_HIGHLIGHT_LAYER_HIDDEN:"variableHighlight_hidden",_VARIABLE_HIGHLIGHT_LAYER_VISIBLE:"variableHighlight_visible",constructor:function(b){this._view=b;this._layer=this._createLayer();b.addLayer(this._layer)},destroy:function(){this.removeAllHighlights();e.destroy(this._layer)},_createLayer:function(){return e.create("div",{"class":this._VARIABLE_HIGHLIGHT_LAYER,"data-testid":this._VARIABLE_HIGHLIGHT_LAYER_HIDDEN})},highlightAllVariables:function(b){if(b.length){var a=this._createLayer();b.forEach(function(b){var c=
this._view.getCoordinateForLineColumn(b.startLine+1,b.startColumn+1);b=this._view.getCoordinateForLineColumn(b.endLine+1,b.endColumn+1);this._highlightVariable(c,b,a)},this);this._view.switchLayer(a,this._layer);this._layer=a;c.set(this._layer,"data-testid",this._VARIABLE_HIGHLIGHT_LAYER_VISIBLE)}else this.removeAllHighlights()},removeAllHighlights:function(){c.set(this._layer,"data-testid",this._VARIABLE_HIGHLIGHT_LAYER_HIDDEN);e.empty(this._layer)},_highlightVariable:function(b,a,c){c=e.create("div",
{"class":this._VARIABLE_HIGHLIGHT},c);d.set(c,{top:b.y+"px",height:b.height+"px",left:b.x+"px",width:a.x-b.x+"px"})}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingControllerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingController"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice","matlab.code.variables.rename.model",
"matlab.code.variables.rename.view","rtc.tooltipservice"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingController":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(h,f,g){return h(null,{constructor:function(e,d,c,b){this._actionService=e;this._variableRenamingModel=d;this._tooltipService=b;this._variableRenamingView=c;this._handleArray=[];this._handleArray.push(g.after(this._variableRenamingModel,
"onModelUpdated",f.hitch(this,"_checkRenaming")));this._handleArray.push(g.after(this._variableRenamingModel,"exitRenaming",f.hitch(this,"_hideTooltip")));e=[{id:"rtc_variable_renaming_action",key:"shift_enter",platformKey:{mac:"shift_enter"},enabled:!0,callback:f.hitch(this,"_doRenameCallback")},{id:"rtc_variable_renaming_escape",key:"escape",enabled:!0,callback:f.hitch(this,"_notRenamingCallback")}];this._actionService.loadActions(e);this._isRenaming=!1},_checkRenaming:function(){this._isRenaming=
!1;this._variableRenamingModel.isRenaming()?this._renaming():this._notRenaming()},_renaming:function(){this._tooltipServiceHandle=this._tooltipService.requestTooltip(f.hitch(this,"_renamingCallback"),f.hitch(this,"_notRenamingCallback"),this._tooltipService.PRIORITY.PROMPT)},_notRenaming:function(){this._variableRenamingModel.notRenaming();this._variableRenamingView.closeTooltip()},_renamingCallback:function(){this._isRenaming=!0;this._variableRenamingModel.renaming();var e=this._variableRenamingModel.getCurrentVariable(),
d=this._variableRenamingModel.getLastVariable();this._variableRenamingView.showToolTip(d,e,e.getOtherInstances().length+1)},_hideTooltip:function(){this._variableRenamingView.closeTooltip();this._isRenaming=!1;this._tooltipServiceHandle&&(this._tooltipServiceHandle.remove(),this._tooltipServiceHandle=null)},destroy:function(){this._variableRenamingView.closeTooltip();this._handleArray.forEach(function(e){e.remove()})},_doRenameCallback:function(){return this._isRenaming&&this._variableRenamingView.isTooltipOpen()?
(this._variableRenamingModel.doRename(),!0):!1},_notRenamingCallback:function(){return this._isRenaming?(this._variableRenamingModel.exitRenamingCompletely(),this._hideTooltip(),!0):!1}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModel"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument",
"rtc.cursor","rtc.document","matlab.code.variables.service","matlab.code.variables.rename.utility"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities MW/rtc/plugins/language/matlab/variableservice/VariableUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(null,{_EMPTY_BLOCK_TYPE_FOR_MERGE_WITH_LAST_BLOCK:[""],_VARIABLE_NAME_REGEXP:/[a-zA-Z][a-zA-Z0-9_]*/,constructor:function(a,b,c,d,e){this._internalDocument=a;this._cursor=b;this._document=c;this._variableService=d;this._variableRenamingUtility=e;this._setListeners();this._renamingVariable=this._variableCache=this._lastVariable=null;this._inUndoRedoState=!1},_setListeners:function(){this._handleArray=[];this._handleArray.push(g.after(this._internalDocument,"onDocumentChanged",
f.hitch(this,"_documentChanged"),!0));this._handleArray.push(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_documentChanged"),!0));this._handleArray.push(g.after(this._cursor,"onChange",f.hitch(this,"_cursorChanged")));this._handleArray.push(g.after(this._variableService,"EDSUpdateToDate",f.hitch(this,"_documentChanged"),!0));this._variableService.onEnable()},_documentChanged:function(a){a&&(a[0]||{}).isUndoRedo?(this._clearRenamingObjects(),this._inUndoRedoState=!0):(this._inUndoRedoState=
!1,this._lastVariable&&!this._isCodeLine(this._lastVariable)?this._clearVariables():(a=this._getCurrentVariable(),this._updateModel(a)))},_cursorChanged:function(){if(!this._inUndoRedoState){var a=this._getCurrentVariable();b.selectionSpansOutsideVariable(this._cursor,a)||this._hasCursorMovedToAnotherLine(a)?this._clearRenamingObjects():this._updateModel(a)}},_updateModel:function(a){this._notPossibleToRename(a)||(this._setVariables(a),this.onModelUpdated())},_setVariables:function(a){this._lastVariable||
(this._lastVariable=a);this._renamingVariable=a},_notPossibleToRename:function(a){return!a||this._variableRenamingUtility.checkVariableLength(a)?(this._variableService.startListeningToEDS(),this.exitRenaming(),!0):!1},_clearRenamingObjects:function(){this._clearVariables();this._variableService.startListeningToEDS();this.exitRenaming()},_hasCursorMovedToAnotherLine:function(a){return!a&&this._renamingVariable&&this._renamingVariable.startLineCol.line!==this._cursor.getLineColumn().line-1},_getCurrentVariable:function(){var a=
d.getWordAtPosition(this._internalDocument,this._cursor.position);if(!a||-1===a.text.search(this._VARIABLE_NAME_REGEXP))return null;this._variableRenamingUtility.isLastVariablePositionInvalid(this._lastVariable)&&this._clearVariables();a=this._isSameAsLastVariable(a)?this._createNewVariableUsingLastVariable(a):this._createCurrentVariableWithLivePositions(a);return!a?null:this._variableRenamingUtility.updateVariableAndInstancesWithLivePosition(a)},_isSameAsLastVariable:function(a){if(!this._lastVariable||
!a)return!1;var c=this._lastVariable.startPos.getLineColumn();this._lastVariable.startLineCol.line=c.line-1;this._lastVariable.startLineCol.column=c.column-1;c=this._lastVariable.endPos.getLineColumn();this._lastVariable.endLineCol.line=c.line-1;this._lastVariable.endLineCol.column=c.column-1;return b.isSameVariableLocation(a,this._lastVariable)},onModelUpdated:function(){},exitRenaming:function(){},_createNewVariableUsingLastVariable:function(a){a.isAssignment=this._lastVariable.isAssignment;this._lastVariable=
this._variableRenamingUtility.updateVariableInstances(this._lastVariable);a.otherInstances=this._lastVariable.otherInstances;a.getOtherInstances=this._lastVariable.getOtherInstances;return a},_createCurrentVariableWithLivePositions:function(a){return this._variableService.getVariableThatOverlapsRange(a)},destroy:function(){this._removeListeners();this._clearVariables();this._variableCache=null},_clearVariables:function(){this._lastVariable&&(this._variableRenamingUtility.clearLivePositionsFromVariable(this._lastVariable),
this._lastVariable=null);this._renamingVariable&&(this._variableRenamingUtility.clearLivePositionsFromVariable(this._renamingVariable),this._renamingVariable=null)},isRenaming:function(){return this._variableRenamingUtility.isRenaming(this._lastVariable,this._renamingVariable)},getCurrentVariable:function(){return this._renamingVariable},getLastVariable:function(){return this._lastVariable},renaming:function(){this._variableCache||(this._variableCache=this._variableService.getVariableData());this._variableService.stopListeningToEDS(this._lastVariable);
this._updateVariableCache();this._variableService.setVariableCache(this._variableCache)},_updateVariableCache:function(){var a=c.getScopedVariables(this._lastVariable,this._variableCache);this._variableRenamingUtility.updateVariableCache(a,this._renamingVariable)},notRenaming:function(){this._lastVariable=this._renamingVariable;this._startListeningToEDS()},exitRenamingCompletely:function(){this._clearVariables();this._startListeningToEDS()},_startListeningToEDS:function(){this._variableService.startListeningToEDS();
this._variableCache=null},doRename:function(){this._removeListeners();this._renameVariablesAndUpdateCache();this.exitRenamingCompletely();this._updateModel(this._getCurrentVariable())},_removeListeners:function(){this._handleArray.forEach(function(a){a.remove()});this._handleArray=[];this._variableService.onDisable()},_renameVariablesAndUpdateCache:function(){var a=this._document.startBlockEdit();a.setBlockTypesForMergeAndAdvance(this._EMPTY_BLOCK_TYPE_FOR_MERGE_WITH_LAST_BLOCK);this._renamingVariable.getOtherInstances().forEach(function(a){var b=
a.startPos.getLineColumn(),c=a.endPos.getLineColumn();this._document.replaceText(this._renamingVariable.text,b.line,b.column,c.line,c.column);a.startColumn=a.startPos.getLineColumn().column-1;a.endColumn=a.startColumn+this._renamingVariable.text.length;this._updateCacheWithRenamingVariables(a)},this);this._setListeners();this._document.endBlockEdit(a)},_updateCacheWithRenamingVariables:function(a){this._variableRenamingUtility.updateInstanceWithLivePosition(a);this._updateVariableCache();this._variableService.setVariableCache(this._variableCache)},
_isCodeLine:function(a){a=this._internalDocument.getLineNode(a.startLineCol.line);return e.isCodeContainer(a)}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities":function(){define(["MW/rtc/model/DocumentUtilities","MW/rtc/plugins/language/matlab/variableservice/Variable","MW/rtc/plugins/language/matlab/variableservice/VariableUtilities"],function(h,f,g){return{getValidScopedVariables:function(e,d,c){d=this._getMatchingVariableLocations(e,d);var b,a;for(b=0;b<d.length;b+=
1){var f=this._getVariablePositionsFromScope(d[b]);for(a=0;a<f.length;a+=1)if(!h.checkLineColumnIsValid(c,f[a].startLine,f[a].endColumn))return[];if(h.checkOverlapsWithRange(e.startLineCol,e.endLineCol,f))return f}return[]},getScopedVariables:function(e,d){for(var c=this._getMatchingVariableLocations(e,d),b=0;b<c.length;b+=1){var a=this._getVariablePositionsFromScope(c[b]);if(h.checkOverlapsWithRange(e.startLineCol,e.endLineCol,a))return a}return[]},_getMatchingVariableLocations:function(e,d){if(!e||
!d)return[];var c=d[e.text];return!c?[]:c},isSameVariableLocation:function(e,d){var c=g.getUpdatedVariableStructure(e);return g.isSameVariableLocation(c,d)},_getVariablePositionsFromScope:function(e){var d=[],c;for(c=0;c<e.length;c+=1)d[c]=e[c].position;return d},getOverlappingVariableFromCache:function(e,d){if(!d)return null;var c=d[e.text];if(!c)return null;var b;for(b=0;b<c.length;b+=1){var a=this._checkAndCreateOverlappingVariable(c[b],e);if(a)return a}return null},_checkAndCreateOverlappingVariable:function(e,
d){var c=this._getVariablePositionsFromScope(e);if(h.checkOverlapsWithRange(d.startLineCol,d.endLineCol,c)){var b=new f(d.startLineCol,d.endLineCol,d.text),a;for(a=0;a<c.length;a++)this.isSameVariableLocation(c[a],d)?b.isAssignment=e[a].isAssignment:b.addOtherInstance(c[a].startLine,c[a].startColumn,c[a].endLine,c[a].endColumn);return b}return null},findNonlocalVariableInstances:function(e){var d=[];Object.keys(e).forEach(function(c){e[c].forEach(function(b){b.forEach(function(a){a.isNonlocal&&d.push(a.position)})})});
return d}}})},"MW/rtc/plugins/language/matlab/variableservice/Variable":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,g,e){this.startLineCol=f;this.endLineCol=g;this.endPos=this.startPos=null;this.text=e;this.isAssignment=!1;this.otherInstances=[]},getOtherInstances:function(){return this.otherInstances},addOtherInstance:function(f,g,e,d){this.otherInstances.push({startPos:null,endPos:null,startLine:f,startColumn:g,endLine:e,endColumn:d})}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtilityProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtility"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.internaldocument"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/language/matlab/variablerenaming/VariableRenamingModelUtility":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities",
"MW/rtc/plugins/language/matlab/variableservice/VariableUtilities"],function(h,f,g,e,d){return h(null,{_MAX_VARIABLE_LENGTH:64,_INVALID_KEYWORD_LIST:["varargin","varargout"],constructor:function(c,b){this._document=c;this._internalDocument=b},isRenaming:function(c,b){return!c||(!b||!b.text)||c.text===b.text||!d.isSameVariableLocation(c,b)||-1!==this._INVALID_KEYWORD_LIST.indexOf(c.text.toLowerCase())||!b.isAssignment||1>b.getOtherInstances().length?!1:!0},checkVariableLength:function(c){return c.text.length>=
this._MAX_VARIABLE_LENGTH?!0:!1},updateVariableCache:function(c,b){var a=0;c.forEach(function(c){if(e.isSameVariableLocation(c,b))c.startColumn=b.startLineCol.column,c.startLine=b.startLineCol.line,c.endColumn=b.endLineCol.column,c.endLine=b.endLineCol.line;else{var d=b.otherInstances[a];c.startColumn=d.startPos.getLineColumn().column-1;c.startLine=d.startPos.getLineColumn().line-1;c.endColumn=d.endPos.getLineColumn().column-1;c.endLine=d.endPos.getLineColumn().line-1;a++}})},updateVariableAndInstancesWithLivePosition:function(c){c.startPos&&
(this._document.deletePosition(c.startPos),this._document.deletePosition(c.endPos));var b=c.startLineCol,a=c.endLineCol;c.startPos=this._document.createPositionAtLineColumn(b.line,b.column);c.endPos=this._document.createPositionAtLineColumn(a.line,a.column,!0);c.getOtherInstances().forEach(function(a){if(a.startLine<this._internalDocument.getMaxLineNumber())this.updateInstanceWithLivePosition(a);else return null},this);return c},updateInstanceWithLivePosition:function(c){c.startPos&&this._document.deletePosition(c.startPos);
c.startPos=this._document.createPositionAtLineColumn(c.startLine,c.startColumn);c.endPos&&this._document.deletePosition(c.endPos);c.endPos=this._document.createPositionAtLineColumn(c.endLine,c.endColumn,!0);return c},clearLivePositionsFromVariable:function(c){c.getOtherInstances().forEach(function(b){b.startPos&&(this._document.deletePosition(b.startPos),b.startPos=null);b.endPos&&(this._document.deletePosition(b.endPos),b.endPos=null)},this);c.startPos&&(this._document.deletePosition(c.startPos),
this._document.deletePosition(c.endPos),c.startPos=null,c.endPos=null)},isLastVariablePositionInvalid:function(c){if(!c)return!1;var b=c.startPos.getLineColumn();c=c.endPos.getLineColumn();var a=b.line===c.line;return!a||a&&b.column===c.column?!0:!1},updateVariableInstances:function(c){c.getOtherInstances().forEach(function(b){var a=b.startPos,c=b.endPos;a&&c&&(b.startColumn=a.getLineColumn().column-1,b.startLine=a.getLineColumn().line-1,b.endColumn=c.getLineColumn().column-1,b.endLine=c.getLineColumn().line-
1)},this);return c}})})},"MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingView"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.cursor","rtc.view.visibility"]}},createInstance:function(e,d,c){return new g(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/variablerenaming/view/VariableRenamingView":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/aspect dijit/popup dijit/TooltipDialog dojo/i18n!l10n/nls/actions dojo/string MW/rtc/view/ViewEventUtilities MW/uiframework/FocusManager".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h(null,{_VERTICAL_OFFSET_PX:7,constructor:function(a,c,g){this._view=a;this._cursor=c;this._tooltipInfo={tooltipDialog:new b({}),isTooltipOpen:!1};this._variableRenamingTooltipHolder=f.create("div",{"class":"variableRenamingTooltipHolder",id:"renamingNode"});f.place(this._variableRenamingTooltipHolder,this._view.getDomtarget());this._handleArray=[];this._handleArray.push(d.after(g,"onHide",e.hitch(this,"hideTooltip")));this._handleArray.push(d.after(g,"onShow",
e.hitch(this,"_prepareTooltipInfo")));this._reopenTooltipListener=null;this._wasOutOfView=!0},showToolTip:function(a,b,c){this._prepareTooltipInfo();this._openTooltipIfInView();this._updateTooltipContent(a,b,c);this._reopenTooltipListener&&this._reopenTooltipListener.remove();this._reopenTooltipListener=d.after(this._view,"onViewUpdated",e.hitch(this,"_updateTooltipOnScroll"),!0);m.refuseFocus(this._tooltipInfo.tooltipDialog.domNode)},_prepareTooltipInfo:function(){var a=this._tooltipInfo.tooltipDialog,
b=this._getTooltipPosition();g.set(this._variableRenamingTooltipHolder,{top:b.y+"px",left:b.x+"px"});this._tooltipInfo={tooltipDialog:a,isTooltipOpen:!0}},_openTooltipIfInView:function(){this._view.isElementOutOfView(this._variableRenamingTooltipHolder)||(this._wasOutOfView=!1,this._openTooltip(!0))},_openTooltip:function(){c.open({popup:this._tooltipInfo.tooltipDialog,around:this._variableRenamingTooltipHolder,orient:["below-centered","below","above-centered","above"],onCancel:e.hitch(this,"closeTooltip")});
this._tooltipInfo.isTooltipOpen=!0;this._tooltipInfo.tooltipDialog.set("data-testid","variableRenaming_visible")},_getTooltipPosition:function(){var a=this._cursor.getLineColumn(),a=this._view.getCoordinateForLineColumn(a.line,a.column);return{y:a.y+this._VERTICAL_OFFSET_PX,x:a.x}},_updateTooltipContent:function(b,c,d){c=this._getStyledVariableText(b.text,c.text);b=k.substitute(a.variableRenamingTooltip,{"0":d,1:b.text,2:c});this._tooltipInfo.tooltipDialog.set("content",b)},_getStyledVariableText:function(a,
b){var c="";b.split("").some(function(b,d){var e=a.charAt(d);if(e===b)c+=e;else return!0});var d=b.substring(c.length,b.length);return""!==d?c+"\x3cb\x3e"+d+"\x3c/b\x3e":c},_updateTooltipOnScroll:function(a){l.hasScrollEvent(a)&&(a=this._view.isElementOutOfView(this._variableRenamingTooltipHolder),this._wasOutOfView!==a&&((this._wasOutOfView=a)?this.hideTooltip():this._openTooltip()))},hideTooltip:function(){return this._tooltipInfo.isTooltipOpen?(this._tooltipInfo.tooltipDialog.set("data-testid",
"variableRenaming_hidden"),c.close(this._tooltipInfo.tooltipDialog),this._tooltipInfo.isTooltipOpen=!1,!0):!1},closeTooltip:function(){this._reopenTooltipListener&&(this._reopenTooltipListener.remove(),this._reopenTooltipListener=null);return this.hideTooltip()},isTooltipOpen:function(){return this._tooltipInfo.isTooltipOpen},destroy:function(){this._handleArray.forEach(function(a){a.remove()});this._handleArray=[]}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/language/matlab/variableservice/VariableService"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.editordataservice"]}},createInstance:function(e,d){return new g(e,d)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/language/matlab/variableservice/VariableService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/language/matlab/variableservice/VariableServiceUtilities"],
function(h,f,g,e){return h(null,{_VARIABLE_EDS_NAME:"matlab.code.variables",_DOCUMENT_STATE:".documentstate",constructor:function(d,c){this._editorDataService=c;this._editorDataService.get(this._VARIABLE_EDS_NAME);this._internalDocument=d;this._listenToHandle=this._editorDataService.listenTo(this._VARIABLE_EDS_NAME,f.hitch(this,"onVariablesUpdated"));this._handleArray=[];this._variableCache=null;this._isListeningToEDS=!0;this._variableBeingChanged=null},onDisable:function(){},onEnable:function(){},
onVariablesUpdated:function(){},destroy:function(){this._handleArray.forEach(function(d){d.remove()});this._listenToHandle.remove()},getVariableInstances:function(d){if(this._isListeningToEDS&&!this._isDocumentUpToDate())return[];d=this._getVariableInstances(d);return!d?[]:d},_isDocumentUpToDate:function(){return this._internalDocument.getState()===this._editorDataService.get(this._VARIABLE_EDS_NAME+this._DOCUMENT_STATE)},_getVariableInstances:function(d){if(!d)return[];var c=[];if(this._isListeningToEDS)this._variableCache=
this._editorDataService.get(this._VARIABLE_EDS_NAME),this.EDSUpdateToDate(),c=e.getValidScopedVariables(d,this._variableCache,this._internalDocument);else{if(!this._variableBeingChanged)return[];c=e.getValidScopedVariables(this._variableBeingChanged,this._variableCache,this._internalDocument)}return c},getNonlocalVariableInstances:function(){if(!this._isDocumentUpToDate())return null;var d=[];this._isDocumentUpToDate()&&this._isListeningToEDS&&(this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME))&&
(d=e.findNonlocalVariableInstances(this._variableCache));return d},EDSUpdateToDate:function(){},setVariableCache:function(d){this._variableCache=d;this.onVariablesUpdated()},getVariableData:function(){this._isListeningToEDS&&(this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME));return this._variableCache},getVariableThatOverlapsRange:function(d){return!this._overwriteCacheWithUpToDateEDS()?null:e.getOverlappingVariableFromCache(d,this._variableCache)},_overwriteCacheWithUpToDateEDS:function(){if(this._isListeningToEDS){if(!this._isDocumentUpToDate())return!1;
this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME)}return!0},stopListeningToEDS:function(d){this._isListeningToEDS&&(this._variableBeingChanged=d,this._listenToHandle&&this._listenToHandle.remove(),this._isListeningToEDS=!1)},startListeningToEDS:function(){this._isListeningToEDS||(this._listenToHandle=this._editorDataService.listenTo(this._VARIABLE_EDS_NAME,f.hitch(this,"onVariablesUpdated")),this._variableCache=this._editorDataService.get(this._VARIABLE_EDS_NAME),this._isListeningToEDS=
!0,this._variableBeingChanged=null)}})})},"MW/rtc/plugins/lists/ListsProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/lists/Lists","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.document","rtc.internaldocument","rtc.cursor","rtc.actionservice"]}},createInstance:function(e,d,c,b){return new f(e,d,c,b)}})})},"MW/rtc/plugins/lists/Lists":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/events/FormatChangeEvent MW/rtc/model/events/InsertBreakEvent MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/plugins/richtext/nodes/leaf/RichTextNode MW/rtc/RichTextComponentFeatureEnum MW/rtc/plugins/codeexample/CodeExampleEnum ./model/ListParagraph ./model/ListItem".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){return h(e,{constructor:function(a,b,c,d){this._internalDocument=b;this._document=a;this._cursor=c;this._actionService=d;this._ORDERED_LIST_TYPE="ordered";this._UNORDERED_LIST_TYPE="unordered";a=[{name:"ordered",method:f.hitch(this,this.formatTemplate,this._ORDERED_LIST_TYPE)},{name:"unordered",method:f.hitch(this,this.formatTemplate,this._UNORDERED_LIST_TYPE)}];b.registerFormatTemplates(a);this.own(g.around(this._document,"deleteTextAtCurrentPosition",
f.hitch(this,"_onDoDelete")));this.own(g.around(this._document,"insertBreak",f.hitch(this,"_onInsertBreak")));this.own(g.after(this._cursor,"onChange",f.hitch(this,this._updateActions)));d.loadActions(this._actions());this.own(g.after(this._actionService,"onActionChange",f.hitch(this,"_onActionChange"),!0))},formatTemplate:function(a){var b={};b.container=new s([],{type:a});b.textContainer=new t([]);b.container.addChild(b.textContainer,0);return b},_actions:function(){return[{id:p.LISTS.UNORDERED_LIST_ACTION,
key:"ctrl_alt_u",platformKey:{mac:"ctrl_alt_u"},enabled:!1,selected:!1,callback:f.hitch(this,this._toggleToList,this._UNORDERED_LIST_TYPE)},{id:p.LISTS.ORDERED_LIST_ACTION,key:"ctrl_alt_o",platformKey:{mac:"ctrl_alt_o"},enabled:!1,selected:!1,callback:f.hitch(this,this._toggleToList,this._ORDERED_LIST_TYPE)}]},_onActionChange:function(a){if("selected"===a.key)switch(a.id){case p.LISTS.UNORDERED_LIST_ACTION:this._toggleIfNeeded(a.newValue,this._UNORDERED_LIST_TYPE);break;case p.LISTS.ORDERED_LIST_ACTION:this._toggleIfNeeded(a.newValue,
this._ORDERED_LIST_TYPE)}},_toggleIfNeeded:function(a,b){var c=this._getParagraphFormat();a!==(c===b)&&this._toggleToList(b)},_updateActions:function(){var a=this._getParagraphFormat();this._actionService.updateAction(p.LISTS.UNORDERED_LIST_ACTION,{enabled:this._canSetFormat(),selected:a===this._UNORDERED_LIST_TYPE});this._actionService.updateAction(p.LISTS.ORDERED_LIST_ACTION,{enabled:this._canSetFormat(),selected:a===this._ORDERED_LIST_TYPE})},_canSetFormat:function(){if(this._internalDocument&&
this._internalDocument.isReadOnly()||!b.isConvertable(this._cursor,q))return!1;var a=this._getParagraphFormat();return!(this._isCode(a)||this._isCodeExample(a))},_getParagraphFormat:function(){if(!this._cursor)return"none";var a=this._cursor.selectionInfo(),a=this._cursor.adjustSelection(a,!0);return b.getParagraphFormat(a)},_isCode:function(a){return"code"===(a||this._getParagraphFormat())},_isCodeExample:function(a){a=a||this._getParagraphFormat();for(var b in r)if(r[b]===a)return!0;return!1},_stripListItem:function(b,
c){var d=this._document.startEdit(),e=c.nextSibling(),f=this._internalDocument.createContainerForType("text").container,g=new n({});f.addChild(g);var g=this._internalDocument.splitContainerAtNode(b,c.endNode()),h=new a(g,g.maxOffset());this._internalDocument.insertAtPosition(f,h);this._internalDocument.spliceContainers(f,c);var k=f,h=f;g.firstChild()&&(k=g);0===b.children.length&&this._internalDocument.deleteNode(b,{node:f,offset:0});e&&(h=f.nextSibling());e=this._internalDocument.getLineNumber(k);
g=this._internalDocument.getLineNumber(h);h=[l.create(e,g)];g>e&&h.push(m.create(e,g,0,1));d.appendRedoEvents([l.create(e,g)]);d.appendUndoEvents([l.create(e,g)]);this._document.endEdit();this._internalDocument.emitDocumentEvents(h);return f},_onDoDelete:function(a){var b=this._cursor,e=this._document,f=this;return function(g){if(g===d.BACKWARD_DELETE&&!b.hasSelection()&&c.isAtStartOfContainer(b.position)){var h=b.getNode().rootContainer();if(f._isListParagraph(h)){var k=b.getNode().textContainer(),
h=f._stripListItem(h,k);b.setPosition(h,0);b.onUpdate(!1,!0);return!0}}return g===d.FORWARD_DELETE&&!b.hasSelection()&&(h=b.getNode().rootContainer(),(k=h.nextSibling())&&k.childrenAreContainers&&(!h.isEmpty()||h.childrenAreContainers)&&c.isAtEndOfContainer(b.position))?(e.startEdit(),f._stripListItem(k,k.firstChild()),h=a.apply(e,arguments),e.endEdit(),h):a.apply(e,arguments)}},_onInsertBreak:function(a){var b=this._document,e=this._cursor,f=this;return function(){var g=b.startBlockEdit();if(e.hasSelection()){var h=
e.selectionInfo();c.isAtStartOfContainer(h.startPosition)&&c.isAtEndOfContainer(h.endPosition)&&b.deleteTextAtCurrentPosition(d.FORWARD_DELETE)}if(!e.hasSelection()&&0===e.getOffset()){var k=e.getNode(),h=k.textContainer(),k=k.rootContainer();if(h instanceof t&&h.isEmpty()){h=f._stripListItem(k,h);e.setPosition(h,0);e.onUpdate(!1,!0);b.endBlockEdit(g);return}}h=a.apply(b,arguments);b.endBlockEdit(g);return h}},_toggleToList:function(a){this._canSetFormat()&&(this._getParagraphFormat()===a?this._actionService.executeAction(p.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,
{}):this._convertToList(a))},_convertToList:function(a){if(this._canSetFormat()){var c=this._cursor.selectionInfo(),d=c.startNode.rootContainer(),e=this._internalDocument.getLineNumber(d),f=c.endNode,c=this._cursor.adjustSelection(c,!0),g=b.getParagraphFormat(c);if(g!==a&&d){for(var h=c.endNode.rootContainer(),k=this._internalDocument.getLineNumber(h),m=this._cursor.getPosition(),n,q=d,p=q,d=this._document.startEdit();q&&p;){var r=q.nextSibling(),t=q===h,s=r&&!r.isTextContainerNode();if(t){n=this._convertRangeToList(p,
q,a);break}else s&&(n=this._convertRangeToList(p,q,a),p=r.nextSibling());q=r}a=l.create(e,k,g,a);d.appendRedoEvents([a]);d.appendUndoEvents([a]);this._document.endEdit();this._internalDocument.emitDocumentEvents([a]);if(n&&(a=n.listParagraph,e=n.newListItem,n=n.needCursorChangeEvent,e=e?e.startNode().offsetInContainer(a):0,m.anchor.hasOwnProperty("line")?(a=this._internalDocument.getLineNumber(a),f!==c.endNode&&(a+=1,e=0),c.isReversed?(m.anchor.line=a,m.anchor.column+=e):(m.line=a,m.column+=e)):m.column+=
e,this._cursor.setPosition(m),n))this._cursor.onUpdate(!1,!0)}}},_convertRangeToList:function(a,b,c){var d=this._internalDocument.getLineNumber(a),e=this._internalDocument.getLineNumber(b),f=this._document.startEdit(),g=new s([],{type:c}),h=new n({});c=new t([h]);g.addChild(c);var k=c;this._internalDocument.insertAtPosition(g,a.startPosition());for(var m,q=!1;a;){var p=!0;m=a===b?null:a.nextSibling();this._isListParagraph(a)?k=g:a.childrenAreContainers?(a.children.forEach(function(a){h=new n({text:a.getText()});
k=new t([h]);this._internalDocument.insertAtPosition(k,g.endPosition())},this),this._internalDocument.deleteNode(a,{node:h,offset:0}),p=!1):(h=new n({}),k=new t([h],{align:a.align}),this._internalDocument.insertAtPosition(k,g.endPosition()));"LineNode"===a.className&&(h=new n({text:a.getText()}),this._internalDocument.insertAtPosition(h,k.startPosition()),this._internalDocument.deleteNode(a,{node:h,offset:0}),p=!1);p&&(this._internalDocument.spliceContainers(k,a),q=!0);a=m}c.parent&&this._internalDocument.deleteNode(c,
{node:c.nextSibling(),offset:0});f.appendRedoEvents([l.create(d,e)]);f.appendUndoEvents([l.create(d,e)]);this._document.endEdit();return{listParagraph:g,needCursorChangeEvent:q,newListItem:k}},convertLineRangeIntoList:function(a,b,c){if(this._canSetFormat()&&(a=this._internalDocument.getLineNode(a-1),b=this._internalDocument.getLineNode(b-1),this._convertRangeToList(a,b,c).needCursorChangeEvent))this._cursor.onUpdate(!1,!0)},isLineListParagraph:function(a,b){if(1>a||a>this._internalDocument.getMaxLineNumber())return!1;
var c=this._internalDocument.getLineNode(a-1);return this._isListParagraph(c,b)},_isListParagraph:function(a,b){return a instanceof s&&!(b&&a.type!==b)},getNumberOfItemsInList:function(a,b){return!this.isLineListParagraph(a,b)?0:this._internalDocument.getLineNode(a-1).children.length}})})},"MW/rtc/plugins/lists/HTMLListElementHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/lists/HTMLListElementHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter",
"rtc.richtext.lists.htmlwordstylelist"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/lists/HTMLListElementHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","MW/rtc/plugins/lists/model/ListItem","MW/rtc/plugins/lists/model/ListParagraph"],function(h,f,g,e,d){return h(null,{constructor:function(c){c.registerNodeHandler("LI",f.hitch(this,"_convertLI"))},_convertLI:function(c,b){var a=g.getComputedStyle(c);this._startOrContinueList(b,c.parentNode&&
"OL"===c.parentNode.nodeName?"ordered":"unordered",a.textAlign)},_startOrContinueList:function(c,b,a){b=b||"unordered";var f=c.getLastParagraph();!f||!(f instanceof d)||f.type!==b?c.appendParagraph(new d([],{type:b})):c.setActiveNode(f);c.appendInnerNode(new e([],{align:"start"!==a?a:"left"}))}})})},"MW/rtc/plugins/lists/HTMLWordStyleListHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./HTMLWordStyleListHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},
createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/lists/HTMLWordStyleListHandler":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-construct"],function(h,f,g,e){return f(null,{constructor:function(d){d.registerDocumentPreprocessor(g.hitch(this,"_preprocess"))},_preprocess:function(d){for(var c,b=d.querySelectorAll("p[style*\x3dmso-list]").length;0<b;){c=d.querySelector("p[style*\x3dmso-list]");if(!c)break;this._convert(c);b-=1}},_convert:function(d){var c=
d.querySelectorAll("span[style*\x3d'mso-list']"),c=h.some(c,function(a){return a.getAttribute("style").match(/\bmso-list:\s*Ignore\b/)&&a.textContent.match(/\d/)}),c=e.create(c?"ol":"ul");e.place(c,d,"before");for(var b,a;this._isWordListItem(d);){b=d.nextElementSibling;a=d.querySelectorAll("br");for(var f=0;f<a.length;f+=1)e.destroy(a[f]);a=this._createLiFromParagraph(d);e.place(a,c,"append");this._copyChildren(d,a);e.destroy(d);d=b}},_isWordListItem:function(d){return!d?!1:d.className.match(/MsoListParagraph/)?
!0:(d=d.getAttribute("style"))&&d.match(/mso-list/)?!0:!1},_createLiFromParagraph:function(d){var c=e.create("li");h.forEach(d.attributes,function(b){c.setAttribute(b.name,b.value);c.style.textIndent=""});return c},_copyChildren:function(d,c){for(var b,a=d.firstChild;a;){a=this._skipConditionalComments(a);if(!a)break;b=a.nextSibling;e.place(a,c,"append");a=b}},_skipConditionalComments:function(d){if("#comment"===d.nodeName&&"[if !supportLists]"===d.textContent){for(;d&&("#comment"!==d.nodeName||"[endif]"!==
d.textContent);)d=d.nextSibling;d&&(d=d.nextSibling)}return d}})})},"MW/rtc/plugins/lists/view/ListParagraphCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListParagraphCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/lists/view/ListParagraphCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/lists/model/ListParagraph",
"MW/rtc/view/coordinateconverter/base/VerticalAlignCoordinateConverter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f}})})},"MW/rtc/plugins/lists/view/ListItemLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./ListItemLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/lists/view/ListItemLayouter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/ListItem"],function(h,f,g){return h(f,{constructor:function(){},getApplicableNodeClass:function(){return g},layout:function(e,d){var c={"class":"RTClistItem",style:""};d.bullet&&(c.style+="list-style-type:"+d.bullet+";");d.align&&(c.style+=" text-align: "+d.align+";");return e.layoutInto(d,"li",c)}})})},"MW/rtc/plugins/lists/view/ListParagraphLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./ListParagraphLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/lists/view/ListParagraphLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","../model/ListParagraph"],function(h,f,g){return h(f,{constructor:function(){},getApplicableNodeClass:function(){return g},layout:function(e,d){var c={"class":"RTClistNode"},
b;"ordered"===d.type?(b="ol",d.start&&(c.start=d.start)):b="ul";return e.layoutInto(d,b,c)}})})},"MW/rtc/plugins/smoothscrolling/SmoothScrollingPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smoothscrolling/SmoothScrollingPlugin"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/smoothscrolling/SmoothScrollingPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has dojo/on MW/rtc/events/MouseEventUtil".split(" "),
function(h,f,g,e,d,c){return h(null,{_DIRECTION:{UNSET:0,UP:1,DOWN:2,LEFT:3,RIGHT:4},_SET_SCROLL_TOP_DURATION:500,_SET_SCROLL_LEFT_DURATION:500,_SCROLL_DURATION:800,constructor:function(b){this._view=b;this._offsetScrollLeftAction=this._offsetScrollTopAction=this._setScrollLeftAction=this._setScrollTopAction=null;this._targetDataMap={};this._isEnabled=!1},destroy:function(){this.disable()},setEnabled:function(b){b&&!this._isEnabled?(this._isEnabled=!0,this._enable()):!b&&this._isEnabled&&(this._isEnabled=
!1,this._disable())},_enable:function(){this.setSmoothScrolling(this._view.getDomtarget());this._setScrollTopAction=g.before(this._view,"setScrollTop",f.hitch(this,"_animateSetScrollTop"));this._setScrollLeftAction=g.before(this._view,"setScrollLeft",f.hitch(this,"_animateSetScrollLeft"));this._offsetScrollTopAction=g.before(this._view,"offsetScrollTop",f.hitch(this,"_animateOffsetScrollTop"));this._offsetScrollLeftAction=g.before(this._view,"offsetScrollLeft",f.hitch(this,"_animateOffsetScrollLeft"))},
_disable:function(){Object.keys(this._targetDataMap).forEach(function(b){this._targetDataMap[b].scrollAction&&this._targetDataMap[b].scrollAction.remove()},this);this._targetDataMap={};this._setScrollTopAction.remove();this._setScrollTopAction=null;this._setScrollLeftAction.remove();this._setScrollLeftAction=null;this._offsetScrollTopAction.remove();this._offsetScrollTopAction=null;this._offsetScrollLeftAction.remove();this._offsetScrollLeftAction=null},setSmoothScrolling:function(b){this._targetDataMap[b]||
(this._targetDataMap[b]={scrollAction:d(b,c.MOUSEWHEEL,f.hitch(this,"_initiateAnimation",b)),previousScrollDirectionV:this._DIRECTION.UNSET,previousScrollDirectionH:this._DIRECTION.UNSET,mouseTimeEvent:null,remainingDistanceV:0,remainingDistanceH:0})},_initiateAnimation:function(b,a){if(!a.defaultPrevented){a.preventDefault();var c=this._calculateScrollDestination(b,a);this._animateSmoothScroll(b,c,this._SCROLL_DURATION)}},_calculateScrollDestination:function(b,a){var d=this._targetDataMap[b],e=c.getVerticalScrollDistance(a),
f=b.scrollTop-e,e=0<e?this._DIRECTION.UP:0>e?this._DIRECTION.DOWN:this._DIRECTION.UNSET;e!==d.previousScrollDirectionV&&(d.remainingDistanceV=0);f+=d.remainingDistanceV;d.previousScrollDirectionV=e;var g=c.getHorizontalScrollDistance(a),e=b.scrollLeft-g,g=0<g?this._DIRECTION.LEFT:0>g?this._DIRECTION.RIGHT:this._DIRECTION.UNSET;g!==d.previousScrollDirectionH&&(d.remainingDistanceH=0);e+=d.remainingDistanceH;d.previousScrollDirectionH=g;return{v:f,h:e}},_easeFunction:function(b,a,c){return c<=b?0:c>=
a?1:1+Math.pow((c-b)/(a-b)-1,5)},_animateSmoothScroll:function(b,a,c){var d=this._targetDataMap[b],e=b.scrollLeft+d.remainingDistanceH,f=b.scrollTop+d.remainingDistanceV,f=void 0===a.v?f:a.v;a=void 0===a.h?e:a.h;f=Math.round(f);a=Math.round(a);if(f===b.scrollTop&&a===b.scrollLeft)d.mouseTimeEvent&&(clearTimeout(d.mouseTimeEvent),d.mouseTimeEvent=null);else{var d=Date.now(),e=b.scrollTop,g=b.scrollLeft;this._scrollFrame(b,d,d+c,{top:e,left:g},{v:f-e,h:a-g},{v:f,h:a})}},_scrollFrame:function(b,a,c,
d,e,g){var h=this._targetDataMap[b],p=Date.now(),r=this._easeFunction(a,c,p),s=Math.round(d.top+e.v*r);b.scrollTop=s;h.remainingDistanceV=g.v-s;r=Math.round(d.left+e.h*r);b.scrollLeft=r;h.remainingDistanceH=g.h-r;s=p>=c||0.5<Math.abs(b.scrollTop-s);p=p>=c||0.5<Math.abs(b.scrollLeft-r);s&&p?(clearTimeout(h.mouseTimeEvent),h.mouseTimeEvent=null,this._view.onScroll()):(b=f.hitch(this,"_scrollFrame",b,a,c,d,e,g),null!==h.mouseTimeEvent&&clearTimeout(h.mouseTimeEvent),h.mouseTimeEvent=setTimeout(b,2))},
_animateSetScrollTop:function(b){this._animateSmoothScroll(this._view.getDomtarget(),{v:b},this._SET_SCROLL_TOP_DURATION);return[this._view.getDomtarget().scrollTop]},_animateSetScrollLeft:function(b){this._animateSmoothScroll(this._view.getDomtarget(),{h:b},this._SET_SCROLL_LEFT_DURATION);return[this._view.getDomtarget().scrollLeft]},_animateOffsetScrollTop:function(b){var a=this._view.getDomtarget();this._animateSmoothScroll(a,{v:a.scrollTop+this._targetDataMap[a].remainingDistanceV+b},this._SET_SCROLL_TOP_DURATION);
return[0]},_animateOffsetScrollLeft:function(b){var a=this._view.getDomtarget();this._animateSmoothScroll(a,{h:a.scrollLeft+this._targetDataMap[a].remainingDistanceH+b},this._SET_SCROLL_LEFT_DURATION);return[0]}})})},"MW/rtc/plugins/margin/TraditionalLineNumberMarginProvider":function(){define(["dojo/_base/declare","dojo/dom-attr","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/DecoratableLineMargin","MW/rtc/margin/LineNumberDecorator"],function(h,f,g,e,d){return h(g,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.internaldocument","rtc.linenumberservice","rtc.featureinterface","margin.linenumberdecorator"]}},createInstance:function(c,b,a,d,g){c=new e(c,b,a,d,[g],300);f.set(c.getMarginElement(),"data-testid","lineNumberMargin");return c}})})},"MW/rtc/plugins/margin/MarginContainerProvider":function(){define(["dojo/_base/declare","dojo/dom-construct","MW/rtc/core/provider/PluginProvider","MW/rtc/margin/MarginContainer"],function(h,f,
g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.left.margin","rtc.featureinterface","rtc.focusservice"]}},createInstance:function(d,c,b,a){return new e(d,c,b,a)}})})},"MW/rtc/margin/MarginContainer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/events/MouseEventUtil MW/rtc/view/ViewEventUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h(k,{MARGIN_SPACER:2,constructor:function(a,c,e,h){this.marginContainer=d.create("div",{"class":"leftMargin"});this.lineMargin=d.create("div",{"class":"rteGutter"},this.marginContainer);this.lineMargin.setAttribute("tabIndex",-1);this.margins=c;this._focusService=h;this.margins.sort(this.marginPriorityComparator);this.own(g.after(a,"onViewUpdated",f.hitch(this,"_handleViewUpdated"),!0));this._getMargins().forEach(function(a){d.place(a.getMarginElement(),this.lineMargin);
this.own(g.after(a,"onWidthChange",f.hitch(this,"updateWidth")));this.own(g.after(a,"onUpdate",f.hitch(this,"update")))},this);this.own(g.after(e,"onEnableLineGutter",f.hitch(this,this.show,!0)));this.own(b(this.marginContainer,"mouseup",f.hitch(this,"_setFocus")));this.own(b(this.lineMargin,"focusin",f.hitch(this,"_setFocus")));l.redirectMouseScroll(this.lineMargin,a)},_setFocus:function(){this._focusService.setFocus()},_handleViewUpdated:function(a){0!==this.margins.length&&(m.hasVerticalScrollEvent(a)||
m.hasSizingEvent(a)||m.hasLayoutEvent(a))&&this.update()},marginPriorityComparator:function(b,c){var d=c.priority()-b.priority();a.assert(0!==d,"Duplicate priority of "+c.priority()+" found.");return d},onResize:function(){},show:function(){c.set(this.lineMargin,{display:"block"});this.lineMargin.hidden=!1},hide:function(){c.set(this.lineMargin,{display:"none"});this.lineMargin.hidden=!0},update:function(){var a=0,b=0;this._getMargins().forEach(function(c){c.getMarginElement().style.left=a+"px";c.update();
c=c.getWidth();a=a+c+this.MARGIN_SPACER;b=b+c+this.MARGIN_SPACER},this);this._hasWidthChanged(this.marginContainer.style.width,a)&&(this.marginContainer.style.width=a+"px",this.lineMargin.style.width=b+"px",this._width=a,this.onResize())},updateWidth:function(){var a=0,b=0;this._getMargins().forEach(function(c){c.getMarginElement().style.left=a+"px";c=c.getWidth();a=a+c+this.MARGIN_SPACER;b=b+c+this.MARGIN_SPACER},this);this._hasWidthChanged(this.marginContainer.style.width,a)&&(this.marginContainer.style.width=
a+"px",this.lineMargin.style.width=b+"px",this._width=a,this.onResize())},_hasWidthChanged:function(a,b){return!a||1E-4<Math.abs(parseFloat(a)-b)},getWidth:function(){return this._width||10},_getMargins:function(){return this.margins}})})},"MW/rtc/plugins/margin/RightMarginButtonProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RightMarginButton"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.messagebar.rightmargincontainer"]}},
createInstance:function(e){return new g(e)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/margin/RightMarginButton":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/aspect dojo/on dojo/touch".split(" "),function(h,f,g,e,d,c,b,a){return h(null,{constructor:function(a){this._rightMarginContainer=a;this._tooltips={};this._buttons={};this._handles=[]},addButton:function(c,e,g){var h=f.create("div",{"class":c,"data-buttonname":c});
this._rightMarginContainer.addLayer(h,e);this._buttons[c]=h;this._handles.push(b(this._buttons[c],"mouseover",d.hitch(this,"_generateTooltipMessage")));this._handles.push(b(this._buttons[c],"mouseout",d.hitch(this._rightMarginContainer,"hideTooltip")));this._handles.push(b(this._buttons[c],a.release,g))},setTooltipMessage:function(a,b){this._tooltips[a]=b},_generateTooltipMessage:function(a){var b=this._tooltips[a.target.dataset.buttonname];null!==b&&"undefined"!==typeof b&&this._rightMarginContainer.showTooltip(b,
a.target)},modifyButton:function(a,b){g.remove(this._buttons[a]);g.add(this._buttons[a],[a,b])},destroy:function(){this._handles.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/margin/RightMarginContainerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RightMarginContainer"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view","rtc.domnode","rtc.bordercontainer","rtc.focusservice"]}},
createInstance:function(e,d,c,b){return new g(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/margin/RightMarginContainer":function(){define("dijit/layout/ContentPane dijit/TooltipDialog dijit/popup dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/touch dojo/dom-construct dojo/dom dojo/dom-attr dojo/dom-class MW/rtc/abstract/AbstractPlugin MW/uiframework/FocusManager".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return e(n,{_FIXED_LAYER_HEIGHT:17,_LINE_CENTER_OFFSET:12,
_RIGHT_MARGIN_TOOLTIP:"rightMarginTooltipHolder",_TOOLTIP_TIMER_LENGTH:2500,_MAX_PRIORITY:99,_LAYER_PRIORITY_PROPERTY:"rightMarginLayerPriority",_TOP_REGION:"top",constructor:function(e,g,m,n,p){this._view=e;this._rtcDomNode=g;this._borderContainer=m;this._focusService=n;this._topStaticHeight=0;this._fixedLayerHeight=this._FIXED_LAYER_HEIGHT+(p||0);this._rightMarginContainer=new h({"class":"rightMarginContainer"});k.place(this._rightMarginContainer.domNode,this._rtcDomNode,"last");this._borderContainer.domNode.style.width=
"calc(100% - "+this._fixedLayerHeight+"px)";this.own(c.after(this._view,"onResize",d.hitch(this,"_handleViewResize")));this.own(b(this._rightMarginContainer,a.release,d.hitch(this,"_setFocus")));this._tooltipTimer=null;this._tooltipInfo={tooltipDialog:new f({onMouseDown:d.hitch(this,function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null}),onMouseEnter:d.hitch(this,function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null}),onMouseLeave:d.hitch(this,function(){this.hideTooltip()})}),
isTooltipOpen:!1};e=k.create("div",{"class":this._RIGHT_MARGIN_TOOLTIP});k.place(e,this._view.getDomtarget());(this._buttonPanel=l.byId("toggleButtonPanel"))&&q.add(this._buttonPanel,"buttonPanelShift")},_setFocus:function(){this._focusService.setFocus()},showTooltip:function(a,b){var c=this._tooltipInfo.tooltipDialog;this._tooltipInfo={tooltipDialog:c,isTooltipOpen:!0};this._tooltipInfo.tooltipDialog.set("content",a);this._tooltipInfo.tooltipDialog.set("data-testid","rightMarginTooltip_visible");
p.refuseFocus(c.domNode);a&&a.domNode&&a.domNode.addEventListener("onResized",d.hitch(this,"_repositionTooltip"));this._popupInfo={popup:c,around:b,orient:["before-centered","before"],onCancel:d.hitch(this,"hideTooltip"),onExecute:d.hitch(this,"hideTooltip"),onMouseOver:d.hitch(this,function(){clearTimeout(this._tooltipTimer);this._tooltipTimer=null})};g.open(this._popupInfo)},_repositionTooltip:function(){this._popupInfo&&g.open(this._popupInfo)},hideTooltip:function(){this._tooltipInfo.isTooltipOpen&&
(this._tooltipInfo.tooltipDialog.set("data-testid","rightMarginTooltip_hidden"),g.close(this._tooltipInfo.tooltipDialog),this._tooltipInfo.isTooltipOpen=!1,clearTimeout(this._tooltipTimer),this._popupInfo=this._tooltipTimer=null)},timeoutTooltip:function(){null===this._tooltipTimer&&(this._tooltipTimer=setTimeout(d.hitch(this,function(a){this.hideTooltip()}),this._TOOLTIP_TIMER_LENGTH))},addLayer:function(a,b){0===b?b=this._MAX_PRIORITY:(m.set(a,this._LAYER_PRIORITY_PROPERTY,b),this._topStaticHeight+=
this._fixedLayerHeight);k.place(a,this._rightMarginContainer.domNode,this._getPositionBasedOnPriority(b))},getRelativePositionForLine:function(a){try{return this._view.canScroll()?this._view.getPercentAtLine(a)+"%":Math.max(0,this._view.getCoordinateForLineColumn(a,1).y-(this._topStaticHeight+this._LINE_CENTER_OFFSET))+"px"}catch(b){}},destroy:function(){this.inherited(arguments);this._buttonPanel&&q.remove(this._buttonPanel,"buttonPanelShift")},_getPositionBasedOnPriority:function(a){for(var b=0,
c=0;c<this._rightMarginContainer.domNode.children.length;c+=1)m.get(this._rightMarginContainer.domNode.children[c],this._LAYER_PRIORITY_PROPERTY)<=a&&(b+=1);return b},_handleViewResize:function(){var a=this._borderContainer.getChildInRegion(this._TOP_REGION),b=(a?this._borderContainer.getFreeDimension(this._TOP_REGION):0)+"px";this._rightMarginContainer.domNode.style.top=b;this._rightMarginContainer.domNode.style.height="calc(100% - "+b+")";a&&(a.domNode.style.width="100%")}})})},"MW/rtc/plugins/margin/SeverityStatusButtonProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./SeverityStatusButton"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.margin.button","rtc.code.codeanalyzermodel","rtc.cursor","rtc.focusservice"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/margin/SeverityStatusButton":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/i18n!l10n/nls/messagebar"],
function(h,f,g,e){return h(null,{_SEVERITY_STATUS_BUTTON:"severityStatusButton",_CLEAR:"statusClear",_ERROR:"statusError",_WARNING:"statusWarning",_BUSY:"statusBusy",_SEVERITY_LEVEL_NONE:0,_SEVERITY_LEVEL_WARNING:1,_BUTTON_POSITION_PRIORITY:2,_SEVERITY_LEVEL_ERROR:2,_TIMER_LENGTH:900,constructor:function(d,c,b,a){this._messageBarButtonView=d;this._codeAnalyzerModel=c;this._cursor=b;this._focusService=a;this._timer=null;this._severity=0;this._messagePositions=[];this._messageBarButtonView.addButton(this._SEVERITY_STATUS_BUTTON,
this._BUTTON_POSITION_PRIORITY,f.hitch(this,"_buttonClick"));this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,e.noMessages);this._handles=[];this._handles.push(g.after(this._codeAnalyzerModel,"onModelChange",f.hitch(this,"_updateMarkerPositions")))},_buttonClick:function(){this._focusService.setFocus();if(0!==this._messagePositions.length){var d=this._getNextCursorPosition(this._cursor.getPosition(),this._messagePositions);this._cursor.setLineColumn(d.line,d.column,!0)}},
_getNextCursorPosition:function(d,c){var b=d.line+1,a=d.column+1,e=c.length;if(b>c[e-1].line||b===c[e-1].line&&a>=c[e-1].column)return c[0];for(var f=0;f<e;f++)if(c[f].line>b||c[f].line===b&&c[f].column>a)return c[f];return c[e-1]},_updateMarkerPositions:function(){this._timer&&(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._BUSY),clearTimeout(this._timer));this._timer=setTimeout(f.hitch(this,function(d){this._severity=this._SEVERITY_LEVEL_NONE;var c=[],b=[];this._codeAnalyzerModel.getAllMessages().forEach(f.hitch(this,
function(a){var d={line:a.range.start.row+1,column:a.range.start.column+1};2<=a.severity?(this._severity=this._SEVERITY_LEVEL_ERROR,b.push(d)):this._severity<=this._SEVERITY_LEVEL_WARNING&&(this._severity=this._SEVERITY_LEVEL_WARNING,c.push(d))}));switch(this._severity){case this._SEVERITY_LEVEL_NONE:this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._CLEAR);this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,e.noMessages);this._messagePositions=[];break;
case this._SEVERITY_LEVEL_WARNING:1<c.length?(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._WARNING),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,e.warningsFound)):(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._WARNING),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,e.warningFound));this._messagePositions=c;break;case this._SEVERITY_LEVEL_ERROR:1<b.length?(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,
this._ERROR),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,e.errorsFound)):(this._messageBarButtonView.modifyButton(this._SEVERITY_STATUS_BUTTON,this._ERROR),this._messageBarButtonView.setTooltipMessage(this._SEVERITY_STATUS_BUTTON,e.errorFound)),this._messagePositions=b}}),this._TIMER_LENGTH)},destroy:function(){this._handles.forEach(function(d){d.remove()})}})})},"MW/rtc/plugins/messagebar/MessageBarModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./MessageBarModel"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/messagebar/MessageBarModel":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h([],{constructor:function(){this._layers={}},hideMessagesOnLine:function(f){for(var e in this._layers)if(this._layers.hasOwnProperty(e)){var d=this._layers[e].messageAtLine[f];if("undefined"!==
typeof d){this._getMessage(d,e).visible=!1;this.onMessageHidden(e,d);break}}},addLayer:function(f){this._layers[f.name]=f;this.onLayerAdded(f.name)},getLayer:function(f){return this._layers[f]?this._layers[f]:null},resetLayer:function(f){this._layers[f].messages={};this._layers[f].messageAtLine={};this.onLayerReset(f)},getTooltip:function(f,e){return this._getMessage(f,e).tooltip},_getMessage:function(f,e){return this._layers[e].messages[f]},getPositionInfo:function(f,e){var d=this._getMessage(e,
f);return{line:d.line,column:d.column}},getAllLayers:function(){return this._layers},addMessage:function(f,e,d){this._layers[f].messages[e]=d;this._layers[f].messageAtLine[d.line]=e},onMessageHidden:function(f,e){},onLayerAdded:function(f){},onLayerUpdate:function(f){},onLayerReset:function(f){}})})},"MW/rtc/plugins/messagebar/MessageBarServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MessageBarService"],function(h,f,g){return h(f,{isApplicable:function(){return!0},
requires:function(){return{isApplicable:[],createInstance:["rtc.messagebar.view","rtc.messagebar.model","messagebarlayer"]}},createInstance:function(e,d,c){return new g(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/messagebar/MessageBarService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","mw-utils/Utils"],function(h,f,g,e){return h(null,{constructor:function(d,c,b){this._messageBarView=d;this._messageBarModel=c;this._messageBarLayers=b;this._handles=
[];for(d=0;d<this._messageBarLayers.length;d++)this._initializeLayer(this._messageBarLayers[d].getLayerName()),this._handles.push(g.after(this._messageBarLayers[d],"addMessage",f.hitch(this,"_onAddMessage"),!0)),this._handles.push(g.after(this._messageBarLayers[d],"clearLayer",f.hitch(this,"_clearLayer"),!0)),this._handles.push(g.after(this._messageBarLayers[d],"updateLayer",f.hitch(this._messageBarModel,"onLayerUpdate",this._messageBarLayers[d].getLayerName()))),this._handles.push(g.after(this._messageBarLayers[d],
"onTooltipClose",f.hitch(this._messageBarView,"triggerTooltipClose")))},_onAddMessage:function(d,c,b,a,f,g){var h=e.generateUuid();c={style:c,tooltip:b,highPriority:a,visible:!0};a&&this._messageBarModel.hideMessagesOnLine(f);c.line=f;c.column=g;this._messageBarModel.addMessage(d,h,c)},_initializeLayer:function(d){this._messageBarModel.addLayer({name:d,messages:{},messageAtLine:{}})},_clearLayer:function(d){this._messageBarModel.resetLayer(d)},destroy:function(){this._handles.forEach(function(d){d.remove()})}})})},
"MW/rtc/plugins/messagebar/MessageBarViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MessageBarView"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.messagebar.model","rtc.cursor","rtc.messagebar.rightmargincontainer"]}},createInstance:function(e,d,c){return new g(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/messagebar/MessageBarView":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/aspect dojo/on dojo/touch".split(" "),
function(h,f,g,e,d,c,b,a){return h(null,{_MESSAGE_BAR_TITLE:"messageBar",_PRIORITY:0,constructor:function(a,b,e){this._cursor=b;this._messageBarModel=a;this._layerNodes={};this._markerNodes={};this._messageBar=f.create("div",{"class":this._MESSAGE_BAR_TITLE});this._rightMarginContainer=e;this._rightMarginContainer.addLayer(this._messageBar,this._PRIORITY);this._handles=[];this._handles.push(c.after(this._messageBarModel,"onMessageHidden",d.hitch(this,"_removeMarker"),!0));this._handles.push(c.after(this._messageBarModel,
"onLayerAdded",d.hitch(this,"_createLayer"),!0));this._handles.push(c.after(this._messageBarModel,"onLayerUpdate",d.hitch(this,"_updateLayer"),!0));this._handles.push(c.after(this._messageBarModel,"onLayerReset",d.hitch(this,"_resetLayer"),!0))},triggerTooltipClose:function(){this._rightMarginContainer.hideTooltip()},_updateLayer:function(a){var b=this._messageBarModel.getLayer(a).messages;this._resetLayer(a);for(var c in b)b.hasOwnProperty(c)&&this._drawMessage(a,c,b[c].style,b[c].line)},_generateTooltipMessage:function(a){if(a.target.dataset.messageid)var b=
this._messageBarModel.getTooltip(a.target.dataset.messageid,a.target.dataset.layer);null!==b&&"undefined"!==typeof b&&("string"===typeof b?this._rightMarginContainer.showTooltip(b,a.target):this._rightMarginContainer.showTooltip(b(),a.target))},_markerClick:function(a){a=this._messageBarModel.getPositionInfo(a.target.dataset.layer,a.target.dataset.messageid);try{this._cursor.setLineColumn(a.line,a.column,!0)}catch(b){}},_removeMarker:function(a,b){f.destroy(this._markerNodes[a][b]);this._markerNodes[a][b]=
null},_drawMessage:function(a,b,c,d){if(d=this._rightMarginContainer.getRelativePositionForLine(d))d=f.create("div",{"class":"messageMarker",style:"top: "+d,"data-messageid":b,"data-testid":c,"data-layer":a},this._layerNodes[a]),this._markerNodes[a][b]=f.create("div",{"class":c},d)},_resetLayer:function(a){this._layerNodes[a]&&(f.empty(this._layerNodes[a]),this._markerNodes[a]={})},_createLayer:function(c){var e=f.create("div",{"class":c});this._layerNodes[c]=f.place(e,this._messageBar,"first");this._markerNodes[c]=
{};this._handles.push(b(this._layerNodes[c],a.release,d.hitch(this,"_markerClick")));this._handles.push(b(this._layerNodes[c],"mouseover",d.hitch(this,"_generateTooltipMessage")));this._handles.push(b(this._layerNodes[c],"mouseout",d.hitch(this._rightMarginContainer,"timeoutTooltip")))},destroy:function(){this._handles.forEach(function(a){a.remove()})}})})},"MW/rtc/plugins/richtext/RichTextProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/RichText","MW/rtc/core/provider/PluginProvider"],
function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.document","rtc.internaldocument","rtc.cursor","rtc.actionservice","rtc.indentutilities"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)}})})},"MW/rtc/plugins/richtext/RichText":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities MW/rtc/model/Position MW/rtc/model/PositionUtilities MW/rtc/model/events/DocumentEvent MW/rtc/model/events/FormatChangeEvent MW/rtc/RichTextComponentFeatureEnum MW/rtc/plugins/codeexample/CodeExampleEnum ./nodes/inner/HeadingNode ./nodes/inner/RichTextParagraphNode ./nodes/leaf/RichTextNode dojo/i18n!l10n/nls/actions".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t){return h(e,{_SET_ALIGN:"_setAlign",_LEFT:"left",_CENTER:"center",_RIGHT:"right",constructor:function(a,b,c,d,e){this._document=a;this._internalDocument=b;this._cursor=c;this._actionService=d;this._indentUtilities=e;this.own(g.after(this._cursor,"onChange",f.hitch(this,"_onCursorChange")));this.own(g.around(this._document,"insertBreak",f.hitch(this,"_aroundInsertBreak")));this.own(g.after(this._actionService,"onActionChange",f.hitch(this,"_onActionChange"),
!0));this.own(g.after(this._document,"onPreInsertText",f.hitch(this,"_createStyledContentFromText"),!0));a=[{name:"text",method:f.hitch(this,"formatTemplate","text")},{name:"title",method:f.hitch(this,"formatTemplate","title")},{name:"heading",method:f.hitch(this,"formatTemplate","heading")}];b.registerFormatTemplates(a);d.loadActions(this._actions())},_onCursorChange:function(a){this._checkPendingStyle();this._updateActions()},_onActionChange:function(a){if("selected"===a.key)switch(a.id){case q.RICH_TEXT.TOGGLE_BOLD_ACTION:var b=
this.getFormatAndStyle();a.newValue!==b.bold&&this._toggleBold();break;case q.RICH_TEXT.TOGGLE_ITALIC_ACTION:b=this.getFormatAndStyle();a.newValue!==b.italic&&this._toggleItalic();break;case q.RICH_TEXT.TOGGLE_UNDERLINE_ACTION:b=this.getFormatAndStyle();a.newValue!==b.underline&&this._toggleUnderline();break;case q.RICH_TEXT.TOGGLE_MONOSPACE_ACTION:b=this.getFormatAndStyle();a.newValue!==b.monospace&&this._toggleMonospace();break;case q.RICH_TEXT.ALIGNMENT_LEFT_ACTION:a.newValue&&!this._isAlignTo(this._LEFT)&&
this._setAlign(this._LEFT);break;case q.RICH_TEXT.ALIGNMENT_CENTER_ACTION:a.newValue&&!this._isAlignTo(this._CENTER)&&this._setAlign(this._CENTER);break;case q.RICH_TEXT.ALIGNMENT_RIGHT_ACTION:a.newValue&&!this._isAlignTo(this._RIGHT)&&this._setAlign(this._RIGHT)}},formatTemplate:function(a){var b={};switch(a){case "text":b.container=new r([]);break;case "title":b.container=new p([],{level:1});break;case "heading":b.container=new p([],{level:2})}return b},_actions:function(){return[{id:"rtc_bold_on",
enabled:!1,callback:f.hitch(this,"_setStyle","bold",!0)},{id:"rtc_bold_off",enabled:!1,callback:f.hitch(this,"_setStyle","bold",!1)},{id:q.RICH_TEXT.TOGGLE_BOLD_ACTION,enabled:!1,selected:!1,key:"ctrl_b",platformKey:{mac:"meta_b"},callback:f.hitch(this,"_toggleBold")},{id:"rtc_italic_on",enabled:!1,callback:f.hitch(this,"_setStyle","italic",!0)},{id:"rtc_italic_off",enabled:!1,callback:f.hitch(this,"_setStyle","italic",!1)},{id:q.RICH_TEXT.TOGGLE_ITALIC_ACTION,enabled:!1,selected:!1,key:"ctrl_i",
platformKey:{mac:"meta_i"},callback:f.hitch(this,"_toggleItalic")},{id:"rtc_smart_indent_or_italic",enabled:!1,selected:!1,key:"ctrl_alt_shift_9",platformKey:{mac:"meta_alt_shift_9"},callback:f.hitch(this,"_smartIndentOrItalic")},{id:"rtc_underline_on",enabled:!1,callback:f.hitch(this,"_setStyle","underline",!0)},{id:"rtc_underline_off",enabled:!1,callback:f.hitch(this,"_setStyle","underline",!1)},{id:q.RICH_TEXT.TOGGLE_UNDERLINE_ACTION,enabled:!1,selected:!1,key:"ctrl_u",platformKey:{mac:"meta_u"},
callback:f.hitch(this,"_toggleUnderline")},{id:"rtc_monospace_on",enabled:!1,callback:f.hitch(this,"_setStyle","monospace",!0)},{id:"rtc_monospace_off",enabled:!1,callback:f.hitch(this,"_setStyle","monospace",!1)},{id:q.RICH_TEXT.TOGGLE_MONOSPACE_ACTION,enabled:!1,selected:!1,key:"ctrl_m",platformKey:{mac:"ctrl_m"},callback:f.hitch(this,"_toggleMonospace")},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_CODE_ACTION,enabled:!1,selected:!1,callback:f.hitch(this,"_setTextFormat","code")},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,
enabled:!1,selected:!1,callback:f.hitch(this,"_setTextFormat","text")},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING_ACTION,enabled:!1,selected:!1,callback:f.hitch(this,"_setTextFormat","heading")},{id:q.RICH_TEXT.PARAGRAPH_FORMAT_TITLE_ACTION,enabled:!1,selected:!1,callback:f.hitch(this,"_setTextFormat","title")},{id:"rtc_insert_break_and_toggle",enabled:!1,callback:f.hitch(this,"_insertBreakAndToggleCode")},{id:q.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION,text:t.toggleCodeText,enabled:!this._isReadOnly(),
callback:f.hitch(this,"_toggleCodeAndText")},{id:"rtc_richtext_tab_insert",key:"tab",callback:f.hitch(this,"_insertTab")},{id:"rtc_richtext_shift_tab_insert",key:"shift_tab",callback:f.hitch(this,"_insertTab",!0)},{id:q.RICH_TEXT.ALIGNMENT_LEFT_ACTION,enabled:!1,selected:!1,callback:f.hitch(this,this._SET_ALIGN,this._LEFT)},{id:q.RICH_TEXT.ALIGNMENT_CENTER_ACTION,enabled:!1,selected:!1,callback:f.hitch(this,this._SET_ALIGN,this._CENTER)},{id:q.RICH_TEXT.ALIGNMENT_RIGHT_ACTION,enabled:!1,selected:!1,
callback:f.hitch(this,this._SET_ALIGN,this._RIGHT)}]},_setAlign:function(a){for(var b=this._document.startEdit(),c=this._cursor.selectionInfo(),d=c.startNode,c=this._cursor.adjustSelection(c,!0),c=c.endNode,e=c.textContainer();e;){e instanceof r&&this._internalDocument.changeNodeAttributes(e,{align:a});if(e===d.textContainer())break;e=e.prevNode().textContainer()}a=this._internalDocument.getLineNumber(d.rootContainer());d=this._internalDocument.getLineNumber(c.rootContainer());a=[l.create(a,d)];this._internalDocument.emitDocumentEvents(a);
this._cursor.onUpdate();b.appendUndoEvents(a);b.appendRedoEvents(a);this._document.endEdit();this._updateActions()},_setTextFormat:function(a){this._isCode()||this._setParagraphFormat(a)},_setPendingStyleChange:function(a,b){this._pendingStyleChange||(this._pendingStyleChange={});a?(this._pendingStyleChange[a]=b,this._lastPendingStylePosition=this._cursor.getLineColumn()):this._resetPendingStyleChange()},_checkPendingStyle:function(){var a=this._cursor.getLineColumn();(!this._lastPendingStylePosition||
!(this._lastPendingStylePosition.line===a.line&&this._lastPendingStylePosition.column===a.column))&&this._resetPendingStyleChange()},_aroundInsertBreak:function(a){var b=this._document,c=this._cursor,d=this;return function(){if(a.apply(b,arguments)){var e=c.getNode().textContainer();e.isEmpty()&&"HeadingNode"===e.className&&d._setParagraphFormat("text")}}},_createStyledContentFromText:function(a){if(this._pendingStyleChange&&this._canSetStyle){a=new s({text:a});var b=this._getStyle();a.updateAttributes(b);
this._pendingStyleChange=null;return[a.serialize()]}},_resetPendingStyleChange:function(){this._lastPendingStylePosition=this._pendingStyleChange=null},_updateActions:function(){var a=this.getFormatAndStyle();this._updateTextStyleActions(a);this._updateParagraphStyleActions(a)},_updateTextStyleActions:function(a){this._actionService.updateAction(q.RICH_TEXT.TOGGLE_BOLD_ACTION,{enabled:this._canSetStyle(),selected:a.bold});this._actionService.updateAction(q.RICH_TEXT.TOGGLE_ITALIC_ACTION,{enabled:this._canSetStyle(),
selected:a.italic});this._actionService.updateAction(q.RICH_TEXT.TOGGLE_UNDERLINE_ACTION,{enabled:this._canSetStyle(),selected:a.underline});this._actionService.updateAction(q.RICH_TEXT.TOGGLE_MONOSPACE_ACTION,{enabled:this._canSetStyle(),selected:a.monospace})},_updateParagraphStyleActions:function(a){var b=this.canSetFormat(),c=this._isAlignTo(this._LEFT),d=!1,e=!1;c||(d=this._isAlignTo(this._CENTER));!c&&!d&&(e=this._isAlignTo(this._RIGHT));var f="text";if("text"===a.format||"title"===a.format||
"heading"===a.format)f=a.format;this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_CODE_ACTION,{enabled:b,selected:"code"===a.format});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,{enabled:b,selected:"text"===f});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_HEADING_ACTION,{enabled:b,selected:"heading"===f});this._actionService.updateAction(q.RICH_TEXT.PARAGRAPH_FORMAT_TITLE_ACTION,{enabled:b,selected:"title"===f});this._actionService.updateAction(q.RICH_TEXT.ALIGNMENT_LEFT_ACTION,
{enabled:!c&&b,selected:c});this._actionService.updateAction(q.RICH_TEXT.ALIGNMENT_CENTER_ACTION,{enabled:!d&&b,selected:d});this._actionService.updateAction(q.RICH_TEXT.ALIGNMENT_RIGHT_ACTION,{enabled:!e&&b,selected:e})},_isAlignTo:function(a){if(!this.canSetFormat())return!1;for(var b=this._cursor.adjustSelection(this._cursor.selectionInfo(),!0),c=b.startNode,b=b.endNode.textContainer();b;){if(b instanceof r&&b.align!==a)return!1;if(b===c.textContainer())break;b=b.prevNode().textContainer()}return!0},
_insertTab:function(a){if(!this._cursor.hasSelection())return a&&!d.isCodeContainer(this._cursor.getNode())?this._document.insertTab():!1;a=this._cursor.selectionInfo();if(!d.isCodeInRange(a.startNode,a.endNode))return this._indentUtilities.indentSelection(c.DEFAULT_TAB_STRING,!0),!0},_toggleCodeAndText:function(){this._isReadOnly()||("code"===this._getParagraphFormat()?this._setParagraphFormat("text"):this._setParagraphFormat("code"))},_insertBreakAndToggleCode:function(){var a=this._cursor.selectionInfo(),
b=this._cursor.getNode().textContainer();this._document.insertBreak();a.isLocal&&("RichTextParagraphNode"===b.className?this._setParagraphFormat("code"):"LineNode"===b.className&&this._setParagraphFormat("text"))},getFormatAndStyle:function(){var a={bold:!1,italic:!1,underline:!1,monospace:!1};a.format=this._getParagraphFormat();if("code"===a.format||!this._cursor)return a;var b=this._getStyle(),c;for(c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(a[c]=b[c]?!0:!1);return a},_getStyle:function(){var a=
this._pendingStyleChange;if(!this._cursor)return a;a=this._cursor.selectionInfo();a.startPosition.isEqualTo(a.endPosition)?a=this._getStyleAttributes(this._cursor.getNode()):(a=this._cursor.adjustSelection(a,!0),a=this._getSelectionStyleAttributes(a.startNode,a.endNode));return a},_getSelectionStyleAttributes:function(a,c){return c?b.getStyleAttributesFromRange(a,c):this._getStyleAttributes(a)},_getStyleAttributes:function(a){if(a){a=a.getStyleAttributes();if(this._pendingStyleChange)for(var b in this._pendingStyleChange)this._pendingStyleChange.hasOwnProperty(b)&&
(a[b]=this._pendingStyleChange[b]);return a}return null},_setStyle:function(b,d){if(this._canSetStyle()){void 0===d&&(d=!0);var e=this._cursor.selectionInfo();if(e.startPosition.isEqualTo(e.endPosition))if(!0===c.isInWord(this._cursor.position))this._cursor.selectWordUnderCursor();else{this._setPendingStyleChange(b,d);this._updateActions();return}var e=this._cursor.selectionInfo(),e=this._cursor.adjustSelection(e,!0),f=new a(e.startNode,e.startPos),e=new a(e.endNode,e.endPos);this._setStyleForRange(b,
d,f,e)}},_setStyleForRange:function(a,b,c,d){var e=this._cursor.getPosition(),f=this._document.startEdit();c=this._internalDocument.createContiguousRange(c,d,!0);d={};d[a]=b;this._applyStyle(d,c.startNode,c.endNode);this._cursor.setPosition(e);this._cursor.onUpdate();a=this._internalDocument.getLineNumber(c.startNode.rootContainer());b=this._internalDocument.getLineNumber(c.endNode.rootContainer());a=[l.create(a,0<=b?b:a)];this._internalDocument.emitDocumentEvents(a);f.appendUndoEvents(a);f.appendRedoEvents(a);
this._document.endEdit()},applyStyleInLineColumn:function(a,b,c,d,e,f){c=this._internalDocument.getPositionForLineColumn(c,d);e=this._internalDocument.getPositionForLineColumn(e,f);this._setStyleForRange(a,b,c,e)},applyFormatInLine:function(a,b){var c=this._cursor.getLineColumn();this._cursor.setLineColumn(b,1);this._setParagraphFormatAtCursor(a);this._cursor.setLineColumn(c.line,c.column)},_applyStyle:function(a,b,c){for(;c;){this._internalDocument.changeNodeAttributes(c,a);this._internalDocument.mergeTextNodeWithSibling(c,
!0);if(c===b)break;c=c.prevNode()}this._internalDocument.mergeTextNodeWithSibling(b)},_canSetStyle:function(){if(this._isReadOnly()||!b.isConvertable(this._cursor,r)||!this._cursor||this._isCode())return!1;var a=this._cursor.selectionInfo();if(a.isNull)return this._isRichTextNode(a.startNode,a.startPos);a=this._cursor.adjustSelection(a,!0);if(a.startPosition.isEqualTo(a.endPosition)&&!this._cursor.isFileEndSelected())return!1;for(var c=a.startNode;c;){if(c instanceof s)return!0;c=c===a.endNode?null:
c.nextNode()}return!1},_isRichTextNode:function(a,b){return a.isInstanceOf(s)||(0===b||b===a.maxOffset())&&a.textContainer().isInstanceOf(r)?!0:!1},canSetFormat:function(){if(this._isReadOnly()||!b.isConvertable(this._cursor,r))return!1;var a=this._getParagraphFormat();return!this._isCode(a)},_isReadOnly:function(){return this._internalDocument&&this._internalDocument.isReadOnly()||this._cursor&&this._cursor.isCursorReadOnly()?!0:!1},_toggleBold:function(){var a=this._getStyle().bold?!1:!0;this._setStyle("bold",
a)},_smartIndentOrItalic:function(){var a=this._cursor.selectionInfo();d.isCodeInRange(a.startNode,a.endNode)||this._toggleItalic()},_toggleItalic:function(){var a=this._getStyle().italic?!1:!0;this._setStyle("italic",a)},_toggleMonospace:function(){var a=this._getStyle().monospace?!1:!0;this._setStyle("monospace",a)},_toggleUnderline:function(){var a=this._getStyle().underline?!1:!0;this._setStyle("underline",a)},_setParagraphFormat:function(a){this._setParagraphFormatAtCursor(a);this._cursor.onUpdate(!1,
!0)},_setParagraphFormatAtCursor:function(b){if(this._cursor){var c=this._getParagraphFormat();if(c!==b){var d=this._cursor.selectionInfo(),e=d.startNode.rootContainer(),f=d.endNode,g=d.startNode,d=this._cursor.adjustSelection(d,!0);if(e){var h=d.endNode.rootContainer(),k=f===d.endNode?0:1,l=this._cursor.getPosition(),l=this._cursor.expandCursorPos(l),n,q,p=this._document.startBlockEdit(),r,t,s=-1;e.childrenAreContainers&&(r=d.startNode.textContainer(),r!==e.firstChild()&&(e=this._internalDocument.splitContainerAtNode(e,
r.startNode(),!0),n=d.isNull?l.posInNode:l.anchor.posInNode,t={line:this._internalDocument.getLineNumber(g.rootContainer()),column:g.offsetInContainer(r)+n},n=e.previousSibling()));h.childrenAreContainers&&(r=d.endNode.textContainer(),s=f.offsetInContainer(f.textContainer()),f=r===h.lastChild(),this._internalDocument.splitContainerAtNode(h,r.endNode()),f||(q=h.nextSibling()));var I=null;for(r=!1;e;){e===h&&(r=!0);if(e.childrenAreContainers){f=e.children.length;for(g=0;g<f;g+=1){var I=this._internalDocument.createContainerForType("text").container,
E=this._internalDocument.createNode(I.defaultTextNode());I.addChild(E);this._internalDocument.insertAtPosition(I,new a(e,0));var K=e.firstChild();K.firstChild().className===E.className?this._internalDocument.spliceContainers(I,K):(E.insertText(K.getText()),this._internalDocument.deleteNode(K,{node:E,offset:0}));I=this._internalDocument.convertParagraph(b,I);if(K=K.align)I.align=K;n||(n=I)}this._internalDocument.deleteNode(e,{node:I.firstChild(),offset:0})}else I=this._internalDocument.convertParagraph(b,
e),e.align&&(I.align=e.align),n||(n=I);if(r)break;e=I.nextSibling()}q||(q=I);d.isReversed?(l.anchor.line=this._internalDocument.getLineNumber(I)+k,0<=s&&(l.anchor.column=s+l.anchor.posInNode),!d.isNull&&t&&(l.line=t.line,l.column=t.column)):(l.line=this._internalDocument.getLineNumber(I)+k,0<=s&&(l.column=s+l.posInNode),!d.isNull&&t&&(l.anchor=t));this._cursor.setPosition(l);d=this._internalDocument.getLineNumber(n);h=this._internalDocument.getLineNumber(q);q=m.create(d,h,c,b);b=m.create(d,h,b,c);
b.isUndoRedo=!0;p.appendRedoEvents([q]);p.appendUndoEvents([b]);this._internalDocument.emitDocumentEvents([q]);this._document.endBlockEdit(p)}}}},_getParagraphFormat:function(){if(!this._cursor)return"none";var a=this._cursor.selectionInfo(),a=this._cursor.adjustSelection(a,!0);return b.getParagraphFormat(a)},_isCode:function(a){a=a||this._getParagraphFormat();return"code"===a||this._isCodeExample(a)},_isCodeExample:function(a){a=a||this._getParagraphFormat();for(var b in n)if(n.hasOwnProperty(b)&&
n[b]===a)return!0;return!1}})})},"MW/rtc/plugins/richtext/CodeTextToggleShortcutsProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/CodeTextToggleShortcuts"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.actionservice","rtc.richtext"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/richtext/CodeTextToggleShortcuts":function(){define(["dojo/_base/declare","MW/rtc/RichTextComponentFeatureEnum"],
function(h,f){return h(null,{_ACTIONS:[{id:f.RICH_TEXT.TOGGLE_CODE_AND_TEXT_ACTION,key:"ctrl_e",contextMenuGroup:"Default",platformKey:{mac:"ctrl_alt_e"}},{id:f.RICH_TEXT.PARAGRAPH_FORMAT_TEXT_ACTION,key:"ctrl_alt_t",platformKey:{mac:"ctrl_alt_t"}},{id:f.RICH_TEXT.PARAGRAPH_FORMAT_HEADING_ACTION,key:"ctrl_alt_h",platformKey:{mac:"ctrl_alt_h"}},{id:f.RICH_TEXT.PARAGRAPH_FORMAT_TITLE_ACTION,key:"ctrl_alt_l",platformKey:{mac:"ctrl_alt_l"}}],constructor:function(f){this._ACTIONS.forEach(function(e){var d=
f.getAction(e.id);f.removeAction(e.id);d.key=e.key;d.platformKey=e.platformKey;e.contextMenuGroup&&(d.contextMenuGroup=e.contextMenuGroup);f.addAction(d)})}})})},"MW/rtc/plugins/richtext/MatlabJSONMimeConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/MatlabJSONMimeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/MatlabJSONMimeConverter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/cutcopypaste/MIMETypes","MW/rtc/plugins/cutcopypaste/mime/MimeConverter"],function(h,f,g){return h(g,{_PRIORITY:99,constructor:function(e){this._cursor=e},getType:function(){return f.MATLAB_RICHTEXT},convertFromMimeData:function(e){try{return JSON.parse(e)}catch(d){}},priority:function(){return this._PRIORITY}})})},"MW/rtc/plugins/richtext/HTMLRichTextElementHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/richtext/HTMLRichTextElementHandler"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cutcopypaste.htmlmimeconverter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/richtext/HTMLRichTextElementHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/plugins/richtext/nodes/inner/HeadingNode MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/plugins/richtext/nodes/leaf/RichTextNode".split(" "),function(h,f,g,e,
d,c,b,a){return h(null,{_LEFT:"left",_CENTER:"center",_RIGHT:"right",constructor:function(a){a.registerNodeHandler(["P","DIV","TR","PRE"],f.hitch(this,"_convertDIVs"));a.registerNodeHandler("H1",f.hitch(this,"_convertHeader",1));a.registerNodeHandler("H2",f.hitch(this,"_convertHeader",2));a.registerNodeHandler("BR",f.hitch(this,"_convertBR"));a.registerTextHandler(f.hitch(this,"_convertText"));a.setDefaultParagraphFactory(function(){return new b([])});this._fontMap={}},_convertHeader:function(a,b,
e){b=d.getComputedStyle(b).textAlign;e.appendParagraph(new c([],{align:this._normalizeAlignment(b),level:a}))},_convertDIVs:function(a,b){var c=b.getLastParagraph();c&&(0<c.children.length&&!c.childrenAreContainers)&&b.leaveParagraph()},_convertBR:function(b,c){c.isInParagraph()||(c.appendParagraph(),c.appendNode(new a({})));c.leaveParagraph()},_checkMonospace:function(a){var b=d.getComputedStyle(a).fontFamily;if(this._fontMap.hasOwnProperty(b))return this._fontMap[b];a=g.create("span",null,a,"last");
a.innerText="iiiii";var c=e.position(a).w;a.innerText="mmmmm";var f=e.position(a).w;g.destroy(a);a=0<c+f&&2>Math.abs(c-f);return this._fontMap[b]=a},_convertText:function(b,c){var e=d.getComputedStyle(b.parentNode),f=c.getLastParagraph(),g={};if((e.fontWeight.match(/\bbold\b/)||"700"===e.fontWeight)&&(!f||"HeadingNode"!==f.className))g.bold=!0;e.fontStyle.match(/\bitalic\b/)&&(g.italic=!0);e.textDecoration.match(/\bunderline\b/)&&(g.underline=!0);this._checkMonospace(b.parentNode)&&(g.monospace=!0);
f=b.textContent;e=e.whiteSpace&&"pre"===e.whiteSpace;e||(f=f.replace(/^\n+/,""),f=f.replace(/\n+\s*/g," "));f=f.replace(/\xA0/g," ");if(e&&f.match(/\n/))this._convertTextArray(f.split(/\n/),g,c),this._setAlign(b,c);else if(f||e)g.text=f,c.appendNode(new a(g)),this._setAlign(b,c)},_convertTextArray:function(b,c,d){b.forEach(function(b,e){c.text=b;0<e&&d.leaveParagraph();d.appendNode(new a(c))})},_setAlign:function(a,c){var e=c.getLastParagraph();if(e&&e instanceof b){var f=d.getComputedStyle(a.parentNode).textAlign;
e.align=this._normalizeAlignment(f)}},_normalizeAlignment:function(a){return-1<a.indexOf(this._CENTER)?this._CENTER:-1<a.indexOf(this._RIGHT)?this._RIGHT:this._LEFT}})})},"MW/rtc/plugins/richtext/view/RichTextCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RichTextCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.richtext.rangeconverter","rtc.view.viewmodel"]}},createInstance:function(e,d){return new g(e,
d)}})})},"MW/rtc/plugins/richtext/view/RichTextCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/leaf/RichTextNode","MW/rtc/view/coordinateconverter/base/TextCoordinateConverter"],function(h,f,g){return h(g,{constructor:function(e,d){this._rangeConverter=e;this._viewModel=d},getApplicableNodeClass:function(){return f}})})},"MW/rtc/view/coordinateconverter/base/TextCoordinateConverter":function(){define("dojo/_base/declare dojo/has mw-log/Log MW/rtc/model/Position MW/rtc/view/ViewUtilities ../CoordinateConverterUtilities ./BaseCoordinateConverter".split(" "),
function(h,f,g,e,d,c,b){return h(b,{getPositionFromCoordinate:function(a,b){var d=this._getClientRects(b);if(!c.isCoordinateWithinRects(a,d))return null;d=this.getDomNode(b);return(d=this._getOffsetFromCoordinate(d,a))?new e(b,d.offset,d.isRightAligned):null},_getClientRects:function(a){var b=[];a=this.getDomNode(a);if(!a)return b;a.textContent?(b=this._rangeConverter.getNodeContentsRange(a),b=c.getClientRectsByRange(b)):(a=this._rangeConverter.getNodeRange(a))&&(b=c.getClientRectsByRange([a]));return b},
_getSubClientRects:function(a){return this.getClientRects(a)},_getOffsetFromCoordinate:function(a,b){var d=this._rangeConverter.createIndexMap(a),e=d.length;if(!e)return{offset:0};for(var f=0,g=e-1,e=0,h;f<=g;)if(e=Math.floor((f+g)/2),h=this._getRectAt(a,e,d),c.isCoordinateAboveOrLeftOfRect(b,h))g=e-1;else if(c.isCoordinateBelowOrRightOfRect(b,h))f=e+1;else break;f>g&&(b.x>h.right&&b.y<h.top?e=g:b.x<h.left&&b.y>h.bottom&&(e=f),h=this._getRectAt(a,e,d)||h);c.isCoordinateAtRightHalfOfRect(b,h)&&(e+=
1);f=!1;(g=this._getRectAt(a,e,d))&&g.top>h.top&&(f=!0);return{offset:e,isRightAligned:f,indexMap:d}},_getRectAt:function(a,b,c){return(a=this._rangeConverter.getCharRange(a,b,!1,c))?this._selectedRectFromRange(a):null},_selectedRectFromRange:function(a,b){var c=a.getClientRects();if(0===c.length)return null;var d=c[0];if(f("ie")||f("trident")||f("edge"))return d;for(var e=0;e<c.length;e+=1)if(0!==c[e].width){d=c[e];break}return d},getCoordinateFromPosition:function(a){var b=a.getOffset();if(0>b)return null;
var c=a.getNode(),c=this.getDomNode(c);if(!c||!c.children)return null;(a=this.isRightAligned(a))&&(b-=1);b=this._rangeConverter.getCharRange(c,b,a)||this._rangeConverter.getNodeRange(c);return!b?null:this._getCoordinateFromRange(b,a)},isRightAligned:function(a){var b=a.getNode(),c=a.getOffset();return 0===c?!1:a.isRightAligned()||c===b.maxOffset()},_getCoordinateFromRange:function(a,b){return f("ie")||f("trident")||f("edge")?this._getCoordinateFromRangeByExplosion(a,b):this._getCoordinateFromRangeByRects(a,
b)},_getCoordinateFromRangeByExplosion:function(a,b){var d=this._selectedRectFromRange(a,b);if(null===d)return d;var e=document.createElement("span");a.insertNode(e);var f=e.getBoundingClientRect(),f=c.convertFromClientToOffset({x:f.left,y:f.top},this._viewModel),d={x:f.x,y:f.y,height:e.offsetHeight,width:d.width,pageX:b?d.right:d.left};this._removeAndMergeSiblingTextNodes(e);return d},_removeAndMergeSiblingTextNodes:function(a){var b=a.previousSibling,c=a.nextSibling,d=a.parentNode;d.removeChild(a);
this._canMergeTextNodes(b,c)&&(b.nodeValue+=c.nodeValue,d.removeChild(c))},_canMergeTextNodes:function(a,b){return d.isDomTextNode(a)&&d.isDomTextNode(b)},_getCoordinateFromRangeByRects:function(a,b){var d=this._selectedRectFromRange(a,b);if(null===d)return d;var e=c.convertFromClientToOffset({x:d.left,y:d.top},this._viewModel);return{x:e.x,y:e.y,height:d.height,width:d.width,pageX:b?d.right:d.left}}})})},"MW/rtc/plugins/richtext/view/RichTextRangeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RichTextRangeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/richtext/view/RichTextRangeConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/richtext/nodes/leaf/RichTextNode","MW/rtc/view/rangeconverter/base/TextRangeConverter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f}})})},"MW/rtc/view/rangeconverter/base/TextRangeConverter":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/dom-construct","MW/rtc/view/ViewUtilities","./AbstractRangeConverter"],function(h,f,g,e,d){return h(d,{_PLACEHOLDER_CLASS:"textContainer",getRangeFromPosition:function(c,b){var a=c.getNode(),d=c.getOffset(),e=a.maxOffset();b=b||this._getDomNode(a);a=d;0===e?(d=b.firstChild||b,a=0):(a=this.createIndexMap(b),d===e?(e=a[d-1],d=e.textNode,a=e.localIndex+1):(e=a[d],d=e.textNode,a=e.localIndex));return this._getRangeStartEnd(d,a,d,a)},getContainerForPosition:function(c,b){var a=
this.getRangeFromPosition(c,b);return!a?null:e.isDomTextNode(a.startContainer)?this._getOrInsertNewContainerAroundText(c,a):this._getOrInsertNewContainerWhenEmptyText(c,b)},_getOrInsertNewContainerAroundText:function(c,b){var a,d=b.startContainer;a=d.parentNode;var e=a.previousSibling,f=a.nextSibling;0===b.startOffset?a=this._isViewOnlyContainer(e)?e:this._insertNewContainerInto(a,"before"):0<c.getOffset()&&c.isAtRightEdge()?a=this._isViewOnlyContainer(f)?f:this._insertNewContainerInto(a,"after"):
(d=d.splitText(b.startOffset),e=a.cloneNode(!1),g.place(d,e),g.place(e,a,"after"),a=this._insertNewContainerInto(a,"after"));return a},_getOrInsertNewContainerWhenEmptyText:function(c,b){var a=c.getNode();b=b||this._getDomNode(a);return this._isViewOnlyContainer(b.firstChild)?b.firstChild:this._insertNewContainerInto(b,"first")},_insertNewContainerInto:function(c,b){var a=this._createContainer();g.place(a,c,b);return a},_isViewOnlyContainer:function(c){return c&&c.className===this._PLACEHOLDER_CLASS},
_createContainer:function(){return g.create("span",{"class":this._PLACEHOLDER_CLASS})},getNodeRange:function(c){var b=document.createRange();try{b.selectNode(c)}catch(a){return null}return b},getNodeContentsRange:function(c){var b=[];for(c=document.createTreeWalker(c,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,f.hitch(this,"_filterTextNodes"),!1);c.nextNode();){var a=c.currentNode;try{var d=document.createRange();d.selectNodeContents(a);b.push(d)}catch(e){}}return b},getCharRange:function(c,b,a,
d){d=d||this.createIndexMap(c);var e=d[b];if(!e)return null;c=e.textNode;var f=e.localIndex,g=e.textNode,e=e.localIndex+1;!a&&0<b&&(b=d[b-1],this._hasViewOnlyElementBetweenTextNodes(b.textNode,c)&&(c=b.textNode,f=b.localIndex+1));return this._getRangeStartEnd(c,f,g,e)},_hasViewOnlyElementBetweenTextNodes:function(c,b){if(c===b)return!1;var a=b.parentNode.previousSibling;return this._isViewOnlyContainer(a)&&0<a.textContent.length},createIndexMap:function(c){var b=[];for(c=document.createTreeWalker(c,
NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,f.hitch(this,"_filterTextNodes"),!1);c.nextNode();)for(var a=c.currentNode,d=0;d<a.textContent.length;d+=1)b.push({textNode:a,localIndex:d});return b},_filterTextNodes:function(c){return e.isDomTextNode(c)&&""!==c.nodeValue?NodeFilter.FILTER_ACCEPT:this._isViewOnlyContainer(c)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},_getRangeStartEnd:function(c,b,a,d){var e=document.createRange();try{e.setStart(c,b),e.setEnd(a,d)}catch(f){return null}return e},
_getDomNode:function(c){return c.box}})})},"MW/rtc/view/rangeconverter/base/AbstractRangeConverter":function(){define(["dojo/_base/declare","mw-log/Log","MW/rtc/abstract/AbstractConverter"],function(h,f,g){return h(g,{getRangeFromPosition:function(e){f.error("Unimplemented: getRangeFromPosition")},getContainerFromPosition:function(e){f.error("Unimplemented: getContainerFromPosition")},_getDomNode:function(e){f.error("Unimplemented: getDomNode")}})})},"MW/rtc/plugins/saveaspdf/SaveAsPDFProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/SaveAsPDF"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.pdfwriters"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/saveaspdf/SaveAsPDF":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/DeferredList MW/rtc/plugins/saveaspdf/Tags MW/rtc/plugins/saveaspdf/utils/XSLFOWriter MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(null,{_REPLACEMENT_CHARACTER_STRING:"\x26#xFFFD;",_FIGURE_DEFAULT_FORMAT:"png",_FIGURE_DEFAULT_RESOLUTION:"600",constructor:function(a,b){this._internalDocument=a;this._writer=new c(b);this._promiseList=[]},saveAsPDF:function(a){var c=this._internalDocument.root.box,h=[],m;a&&a.figurePath&&(m={figureFormat:this._FIGURE_DEFAULT_FORMAT,figureResolution:this._FIGURE_DEFAULT_RESOLUTION,promiseList:h},f.mixin(m,a));a=this._writer.createDocument(c,m);var q=b.serializeToFormattedString(a,
d.XML_HEADER),q=this._normalizeString(q),n=new g;(new e(h)).then(function(a){n.resolve(q)});return n},_normalizeString:function(a){var b,c=a.split("");for(b=0;b<c.length;b++){var d=a.charCodeAt(b);if(32>d||126<d)c[b]=this._replaceDecouragedChar(d)}return a=c.join("")},_replaceDecouragedChar:function(a){return 9>a||11===a||12===a||14<=a&&31>=a||55296<=a&&56319>=a||65533<a?this._REPLACEMENT_CHARACTER_STRING:56320<=a&&57343>=a?"":"\x26#"+a+";"}})})},"dojo/DeferredList":function(){define(["./_base/kernel",
"./_base/Deferred","./_base/array"],function(h,f,g){h.DeferredList=function(e,d,c,b,a){var h=[];f.call(this);var l=this;0===e.length&&!d&&this.resolve([0,[]]);var m=0;g.forEach(e,function(a,f){function g(a,b){h[f]=[a,b];m++;m===e.length&&l.resolve(h)}a.then(function(a){d?l.resolve([f,a]):g(!0,a)},function(a){c?l.reject(a):g(!1,a);if(b)return null;throw a;})})};h.DeferredList.prototype=new f;h.DeferredList.prototype.gatherResults=function(e){e=new h.DeferredList(e,!1,!0,!1);e.addCallback(function(d){var c=
[];g.forEach(d,function(b){c.push(b[1])});return c});return e};return h.DeferredList})},"MW/rtc/plugins/saveaspdf/Tags":function(){define({XML_HEADER:'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',NAMESPACE_URL:"http://www.w3.org/1999/XSL/Format",NAMESPACE_TAG:"fo",SCHEMA_TAG:"xmlns",ROOT_TAG_NAME:"root",LAYOUT_MASTER:"layout-master-set",SIMPLE_PAGE_MASTER:"simple-page-master",PAGE_SEQUENCE:"page-sequence",REGION_BODY:"region-body",REGION_AFTER:"region-after",STATIC_CONTENT:"static-content",
PAGE_NUMBER:"page-number",PAGE_NUMBER_CITATION:"page-number-citation",FLOW:"flow",BLOCK:"block",BLOCK_CONTAINER:"block-container",INLINE:"inline",LIST_BLOCK:"list-block",LIST_ITEM:"list-item",LIST_ITEM_LABEL:"list-item-label",LIST_ITEM_BODY:"list-item-body",BASIC_LINK:"basic-link",EXTERNAL_GRAPHIC:"external-graphic",LEADER:"leader"})},"MW/rtc/plugins/saveaspdf/utils/XSLFOWriter":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/plugins/saveaspdf/Attributes MW/rtc/plugins/saveaspdf/Tags MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(null,{constructor:function(a){this._writers={};a.forEach(function(a){a.getTypes().forEach(function(b){g.assert(!this._writers[b],"Writer for type '"+b+"'' already exists.");this._writers[b]=a},this)},this);a.forEach(function(a){a.setWriters(this._writers)},this)},createDocument:function(a,b){Object.keys(this._writers).forEach(function(a){this._writers[a].setOptions(b)},this);var f=this._writers[c.BASE_DOCUMENT].createElement(d,e),g=this._getPageFlow(f);this._createTags(a,
g);return f},_createTags:function(a,f){var g,h,q,n,p=a.children.length;for(g=0;g<p;g+=1)h=a.children[g],q=this._getWriterType(h),n=this._writers[q],b.isBlock(h)?(q=b.createXMLElement(d,d.BLOCK_CONTAINER),b.isSectionBlock(h)&&(n=b.getCommonStyles(h),n["padding-left"]="0px",n["padding-right"]="0px",b.applyStyles(q,n)),this._createTags(h,q),f.appendChild(q)):q===c.TABLEOFCONTENT?(h=n.createElement(h,d,e,this._writers),f.appendChild(h)):(q=b.createWrapperElement(h,d),h=n.createElement(h,d,e,this._writers),
h.paragraph?q.appendChild(h.paragraph):q.appendChild(h),f.appendChild(q),h.output&&f.appendChild(h.output))},_getPageFlow:function(a){return a.firstChild.childNodes[1].lastChild},_getWriterType:function(a){if(b.isCode(a)||b.isSectionBreak(a)||b.isBlock(a)||b.isHeading(a)||b.isTitle(a))return c.PARAGRAPH;if(b.isTableOfContent(a))return c.TABLEOFCONTENT;if(b.isParagraph(a))return c.PARAGRAPH;if(b.isUnorderedList(a)||b.isOrderedList(a))return c.LIST;if(b.isCodeExample(a))return c.PARAGRAPH}})})},"MW/rtc/plugins/saveaspdf/Attributes":function(){define({MASTER_NAME:"master-name",
MASTER_REFERENCE:"master-reference",PAGE_MASTER:"PageMaster",MARGIN:"margin",MARGIN_BOTTOM:"margin-bottom",MARGIN_LEFT:"margin-left",MARGIN_RIGHT:"margin-right",MARGIN_VALUE:"1cm",FONT_FAMILY:"font-family",FONT_SIZE:"font-size",SERIF:"serif",ARIAL_UNICODE:"Arial Unicode MS",ARIAL:"Arial",COLOR:"color",WHITE_SPACE:"white-space",WHITE_SPACE_PRESERVE:"pre",FLOW_NAME:"flow-name",XSL_REGION_BODY:"xsl-region-body",REGION_NAME:"region-name",REGION_NAME_VALUE:"Footer",EXTENT:"extent",EXTENT_VALUE:"1cm",DISPLAY_ALIGN:"display-align",
DISPLAY_ALIGN_VALUE:"after",PAGE_NUMBER_FONT_SIZE:"11pt",PROVISIONAL_DISTANCE:"provisional-distance-between-starts",LIST_INDENT:"5mm",LABEL_END:"label-end()",BODY_START:"body-start()",END_INDENT:"end-indent",START_INDENT:"start-indent",SOURCE:"src",ERROR_ICON:"url(../images-liveeditor/error.png)",WARNING_ICON:"url(../images-liveeditor/warning.png)",HORIZONTAL_ELLIPSIS:"url(../images-liveeditor/HEllipsis.png)",VERTICAL_ELLIPSIS:"url(../images-liveeditor/VEllipsis.png)",CONTENT_HEIGHT:"content-height",
CONTENT_WIDTH:"content-width",IMAGE_HEIGHT:"80%",IMAGE_WIDTH:"80%",TEXT_ALIGN:"text-align",TEXT_ALIGN_LAST:"text-align-last",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",ID:"id",REF_ID:"ref-id",EXTERNAL_DESTINATION:"external-destination",INTERNAL_DESTINATION:"internal-destination",LEADER_PATTERN:"leader-pattern",VERTICAL_ALIGN:"vertical-align",PADDING_LEFT:"padding-left",VERTICAL_ELLIPSIS_PADDING_LEFT:"25pt"})},"MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities":function(){define(["dojo/dom-style",
"MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,f){return{serializeToFormattedString:function(f,e){var d=(new window.XMLSerializer).serializeToString(f);return e+d},createXMLElement:function(f,e){e=f.NAMESPACE_TAG+":"+e;return document.createElementNS(f.NAMESPACE_URL,e)},createWrapperElement:function(f,e){var d=this.createXMLElement(e,e.BLOCK),c=this.getCommonStyles(f);this.applyStyles(d,c);return d},setAttribute:function(f,e,d){f.setAttributeNS(null,e,d)},createTextTag:function(f){return document.createTextNode(f)},
isOutputParagraph:function(g){return-1<g.className.indexOf(f.OUTPUT_CLASS)},isWarning:function(g){return-1<g.className.indexOf(f.WARNING_CLASS)},isError:function(g){return-1<g.className.indexOf(f.ERROR_CLASS)},isFigure:function(g){return-1<g.className.indexOf(f.FIGURES_CLASS)},isSymEquation:function(g){return-1<g.className.indexOf(f.SYMEQUATION_CLASS)},isText:function(g){return-1<g.className.indexOf(f.TEXT_CLASS)},isVariable:function(g){return-1<g.className.indexOf(f.VARIABLES_CLASS)},isVariableString:function(g){return-1<
g.className.indexOf(f.VARIABLE_STRING_CLASS)},isInteractiveVariable:function(g){return-1<g.className.indexOf(f.INTERACTIVE_VARIABLE_CLASS)},isMatrix:function(g){return-1<g.className.indexOf(f.MATRIX_CLASS)},isInteractiveMatrix:function(g){return-1<g.className.indexOf(f.INTERACTIVE_MATRIX_CLASS)},getCommonStyles:function(g){var e=h.getComputedStyle(g),d={},c=Math.round(parseFloat(e.fontSize)*f.FONT_SCALING_FACTOR),b="";isNaN(c)||(b=c+f.POINT_UNIT);d.color=this._rgba2rgb(e.color);d["font-family"]=this.getFontFamily(g,
e.fontFamily);d["font-style"]=e.fontStyle;d["font-size"]=b;d["font-weight"]=this._fontWeightNumberToName(e.fontWeight);d["text-align"]=e.textAlign;d["vertical-align"]=e.verticalAlign;d["text-decoration"]=e.textDecoration.split(" ")[0];d["margin-top"]=this._replacePXWithPT(e.marginTop);d["margin-bottom"]=this._replacePXWithPT(e.marginBottom);d["margin-left"]=this._replacePXWithPT(e.marginLeft);d["margin-right"]=this._replacePXWithPT(e.marginRight);d["padding-top"]=this._replacePXWithPT(e.paddingTop);
d["padding-bottom"]=this._replacePXWithPT(e.paddingBottom);d["padding-left"]=this._replacePXWithPT(e.paddingLeft);d["padding-right"]=this._replacePXWithPT(e.paddingRight);d["border-top"]=this._replacePXWithPT(e.borderTop);d["border-bottom"]=this._replacePXWithPT(e.borderBottom);d["border-left"]=this._replacePXWithPT(e.borderLeft);d["border-right"]=this._replacePXWithPT(e.borderRight);d["line-height"]=Math.round(e.lineHeight*f.FONT_SCALING_FACTOR);d["white-space"]="pre-wrap"!==e.whiteSpace?e.whiteSpace:
"";0===e.whiteSpace.indexOf("pre")&&(d["linefeed-treatment"]="preserve");d["min-height"]=this._replacePXWithPT(e.minHeight);return d},createInlineElement:function(f,e){var d=this.createXMLElement(e,e.INLINE),c=this.getInlineStyles(f);this.applyStyles(d,c);return d},getInlineStyles:function(f){var e=h.getComputedStyle(f),d={};d["text-decoration"]=e.textDecoration.split(" ")[0];d["font-style"]=e.fontStyle;d["font-weight"]=this._fontWeightNumberToName(e.fontWeight);d["font-family"]=this.getFontFamily(f,
e.fontFamily);d.color=this._rgba2rgb(e.color);return d},getFontFamily:function(g,e){var d=f.BASE_FONT;e&&(d=e+","+d);return d},applyStyles:function(f,e){Object.keys(e).forEach(function(d){var c=e[d];c&&""!==c&&this.setAttribute(f,d,c)},this)},isCode:function(g){return-1<g.className.indexOf(f.LINENODE_CLASS)||-1<g.className.indexOf(f.INLINE_WRAPPER_CLASS)},isBlock:function(g){var e=f.BLOCK_CLASS_SUFFIX;g=g.classList[0];return-1<g.indexOf(e,g.length-e.length)},isSectionBlock:function(g){return-1<g.className.indexOf(f.SECTIONBLOCK_CLASS)},
isSectionBreak:function(g){return-1<g.className.indexOf(f.SECTIONBREAK_CLASS)},isTableOfContent:function(g){return-1<g.className.indexOf(f.TABLEOFCONTENT_CLASS)},isHeading:function(g){return-1<g.className.indexOf(f.HEADING_CLASS)},isHyperLink:function(g){return-1<g.className.indexOf(f.HYPERLINK_CLASS)},isImage:function(g){return-1<g.className.indexOf(f.IMAGE_CLASS)},isLiveControl:function(g){return-1<g.className.indexOf(f.LIVE_CONTROL_CLASS)},isEquation:function(g){return-1<g.className.indexOf(f.EQUATION_CLASS)},
isEquationNode:function(g){return-1<g.className.indexOf(f.EQUATIONNODE_CLASS)},isTitle:function(g){return-1<g.className.indexOf(f.TITLE_CLASS)},isParagraph:function(g){return-1<g.className.indexOf(f.PARAGRAPH_CLASS)},isUnorderedList:function(g){return-1<g.className.indexOf(f.LIST_CLASS)&&g.nodeName===f.UNORDERED_LIST_NODENAME},isOrderedList:function(g){return-1<g.className.indexOf(f.LIST_CLASS)&&g.nodeName===f.ORDERED_LIST_NODENAME},isCodeExample:function(g){return-1<g.className.indexOf(f.CODE_EXAMPLE_CLASS)},
_replacePXWithPT:function(g){return g.replace(f.REGEX_FOR_PX,f.POINT_UNIT)},_fontWeightNumberToName:function(f){return"700"===f?"bold":"400"===f?"normal":f},_rgba2rgb:function(f){return f.replace(/rgba(\(.*), 1\)/,"rgb$1)")}}})},"MW/rtc/plugins/saveaspdf/document/BaseDocumentWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/BaseDocumentWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/BaseDocumentWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g,e){return h(f,{createElement:function(d,c){var b=this._createRoot(d.ROOT_TAG_NAME,d),a=this._createLayoutMasterSet(d,c);b.documentElement.appendChild(a);a=this._createPageSequence(d,c);b.documentElement.appendChild(a);
return b},getTypes:function(){return[g.BASE_DOCUMENT]},_createRoot:function(d,c){var b;document.implementation&&document.implementation.createDocument&&(b=document.implementation.createDocument(c.NAMESPACE_URL,c.NAMESPACE_TAG+":"+c.ROOT_TAG_NAME,null));return b},_createLayoutMasterSet:function(d,c){var b=e.createXMLElement(d,d.REGION_BODY);e.setAttribute(b,c.MARGIN,c.MARGIN_VALUE);var a=e.createXMLElement(d,d.REGION_AFTER);e.setAttribute(a,c.REGION_NAME,c.REGION_NAME_VALUE);e.setAttribute(a,c.EXTENT,
c.EXTENT_VALUE);e.setAttribute(a,c.DISPLAY_ALIGN,c.DISPLAY_ALIGN_VALUE);var f=e.createXMLElement(d,d.SIMPLE_PAGE_MASTER);e.setAttribute(f,c.MASTER_NAME,c.PAGE_MASTER);e.setAttribute(f,c.MARGIN_BOTTOM,c.MARGIN_VALUE);f.appendChild(b);f.appendChild(a);b=e.createXMLElement(d,d.LAYOUT_MASTER);b.appendChild(f);return b},_createPageSequence:function(d,c){var b=e.createXMLElement(d,d.PAGE_SEQUENCE);e.setAttribute(b,c.FONT_FAMILY,c.SERIF);e.setAttribute(b,c.MASTER_REFERENCE,c.PAGE_MASTER);var a=e.createXMLElement(d,
d.STATIC_CONTENT);e.setAttribute(a,c.FLOW_NAME,c.REGION_NAME_VALUE);var f=e.createXMLElement(d,d.BLOCK);e.setAttribute(f,c.TEXT_ALIGN,c.CENTER);e.setAttribute(f,c.FONT_FAMILY,c.ARIAL);e.setAttribute(f,c.FONT_SIZE,c.PAGE_NUMBER_FONT_SIZE);f.appendChild(e.createXMLElement(d,d.PAGE_NUMBER));a.appendChild(f);f=e.createXMLElement(d,d.FLOW);e.setAttribute(f,c.FLOW_NAME,c.XSL_REGION_BODY);b.appendChild(a);b.appendChild(f);return b}})})},"MW/rtc/plugins/saveaspdf/PDFWriterInterface":function(){define(["dojo/_base/declare",
"mw-log/Log"],function(h,f){return h(null,{getTypes:function(){f.error("Subclasses must override getTypes.")},setWriters:function(f){},setOptions:function(f){},createElement:function(g,e,d){f.error("Subclasses must override createElement.")}})})},"MW/rtc/plugins/saveaspdf/document/EquationWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/EquationWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/EquationWriter":function(){define("dojo/query dojo/_base/declare dojo/dom-class MW/rtc/plugins/saveaspdf/PDFWriterInterface MW/equations/renderer/Renderer MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities".split(" "),function(h,f,g,e,d,c,b){return f(e,{_renderer:new d,SCALING_FACTOR:4,getTypes:function(){return[c.EQUATION]},isSimpleEquation:function(a){a=this._getMathNode(a);
var b,c,d;a&&1===a.children.length&&(b=a.children[0]);b&&1===b.children.length&&(c=b.children[0]);c&&1===c.children.length&&(d=c.children[0]);if(d&&g.contains(d,"MathTextBox"))return d},createElement:function(a,b,c){a=this._getURIFromEquation(a);return this._createChildElement(b,c,a)},_getMathNode:function(a){return h("."+c.EQUATION_CLASS,a)[0]},_getURIFromEquation:function(a){var b=a;-1===a.className.indexOf(c.EQUATION_CLASS)&&(b=this._getMathNode(a));return this._renderer.exportDomnodeToImageURL(b,
c.FONT_SCALING_FACTOR*this.SCALING_FACTOR)},_createChildElement:function(a,c,d){a=b.createXMLElement(a,a.EXTERNAL_GRAPHIC);this._applyStyles(a,c,d);return a},_applyStyles:function(a,c,d){b.setAttribute(a,c.SOURCE,d.dataURL);this._scaleToFitInPage(a,c,d)},_scaleToFitInPage:function(a,d,e){b.setAttribute(a,d.CONTENT_HEIGHT,Math.floor(e.height/this.SCALING_FACTOR)+c.POINT_UNIT);b.setAttribute(a,d.CONTENT_WIDTH,Math.floor(e.width/this.SCALING_FACTOR)+c.POINT_UNIT);b.setAttribute(a,d.VERTICAL_ALIGN,e.verticalAlign*
c.FONT_SCALING_FACTOR+"pt")}})})},"MW/rtc/plugins/saveaspdf/document/HyperlinkWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/HyperlinkWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/HyperlinkWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities",
"MW/rtc/plugins/saveaspdf/document/ParagraphWriter"],function(h,f,g,e){return h(e,{getTypes:function(){return[f.HYPERLINK]},createElement:function(d,c,b){return this._createChildElement(c,d,b)},_createChildElement:function(d,c,b){var a=g.createXMLElement(d,d.BASIC_LINK),e=g.getCommonStyles(c);g.applyStyles(a,e);e=c.href;0===e.indexOf(f.INTERNAL_LINK_PREFIX)?g.setAttribute(a,b.INTERNAL_DESTINATION,e.substring(f.INTERNAL_LINK_PREFIX.length)):g.setAttribute(a,b.EXTERNAL_DESTINATION,e);this.insertRichTextElement(c.children,
a,d,b);return a}})})},"MW/rtc/plugins/saveaspdf/document/ParagraphWriter":function(){define(["dojo/_base/array","dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g,e,d){return f(g,{getTypes:function(){return[e.PARAGRAPH]},setWriters:function(c){this._writers=c},createElement:function(c,b,a){var e=this._getProperElement(c),f=this._createWrapperElement(e.line,b);(c=c.rteNode?
c.rteNode.anchorId:null)&&d.setAttribute(f,a.ID,c);e.outputs?(this.insertRichTextElement(e.line.children,f,b,a),b=this.insertRichTextElement(e.outputs,f,b,a)):b=this.insertRichTextElement(e.line.children,f,b,a);return{paragraph:f,output:b}},insertRichTextElement:function(c,b,a,f){var g=null,h;Array.prototype.forEach.apply(c,[function(c){if(d.isHyperLink(c))h=this._writers[e.HYPERLINK],b.appendChild(h.createElement(c,a,f));else if(d.isOutputParagraph(c))h=this._writers[e.OUTPUT],g=h.createElement(c,
a,f);else if(d.isEquationNode(c)){h=this._writers[e.EQUATION];var n=h.isSimpleEquation(c);n?this._createStyledTextElements(n.parentNode,a).forEach(function(a){b.appendChild(a)}):b.appendChild(h.createElement(c,a,f))}else d.isImage(c)?(h=this._writers[e.IMAGE],b.appendChild(h.createElement(c,a,f))):d.isLiveControl(c)?(h=this._writers[e.LIVE_CONTROL],h.createElement(c,a).forEach(function(a){b.appendChild(a)})):this._createStyledTextElements(c,a).forEach(function(a){b.appendChild(a)})},this]);return g},
_createWrapperElement:function(c,b){var a=d.createXMLElement(b,b.BLOCK),f=d.getCommonStyles(c),g=parseInt(f["margin-left"],10)+parseInt(f["margin-right"],10);f["margin-left"]="0pt";if("center"===f["text-align"]){var h=0;Array.prototype.forEach.apply(c.children,[function(a){h+=a.clientWidth*e.FONT_SCALING_FACTOR}]);h>e.AVAILABLE_WIDTH-g&&(f["text-align"]="left")}d.isCode(c)?(f["background-color"]="#F7F7F7",f["white-space"]="pre",f["margin-left"]="3pt",f["padding-left"]="10pt"):f["white-space-collapse"]=
"false";d.applyStyles(a,f);return a},_createStyledTextElements:function(c,b){var a=c.lastElementChild,f=c.firstElementChild;return h.map(c.childNodes,function(c){var g=c.textContent;c===a&&(0<g.length&&" "===g[g.length-1])&&(g=g.slice(0,g.length-1)+e.NBSP);c===f&&(0<g.length&&" "===g[0])&&(g=e.NBSP+g.slice(1,g.length));g?c=d.createInlineElement(c,b):(g=e.NBSP,c=d.createXMLElement(b,b.INLINE));g=d.createTextTag(g);c.appendChild(g);return c})},_getProperElement:function(c){return-1===c.className.indexOf("inlineWrapper")?
{line:c,outputs:null}:{line:c.children[0],outputs:2===c.children.length?[c.children[1]]:null}}})})},"MW/rtc/plugins/saveaspdf/document/ImageWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/ImageWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/ImageWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/document/ParagraphWriter",
"MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g,e){return h(f,{getTypes:function(){return[g.IMAGE]},createElement:function(d,c,b){return this._createChildElement(c,d,b)},_createChildElement:function(d,c,b){d=e.createXMLElement(d,d.EXTERNAL_GRAPHIC);e.setAttribute(d,b.SOURCE,c.src);e.setAttribute(d,b.CONTENT_HEIGHT,c.height*g.FONT_SCALING_FACTOR+g.POINT_UNIT);e.setAttribute(d,b.CONTENT_WIDTH,c.width*g.FONT_SCALING_FACTOR+g.POINT_UNIT);
c=e.getCommonStyles(c);e.setAttribute(d,b.VERTICAL_ALIGN,c["vertical-align"]);e.setAttribute(d,"scaling","non-uniform");return d}})})},"MW/rtc/plugins/saveaspdf/document/LiveControlWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/LiveControlWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/LiveControlWriter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/saveaspdf/document/ParagraphWriter","MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,f,g){return h(f,{_LIVE_CONTROL_DIV:"liveControlTextView",getTypes:function(){return[g.LIVE_CONTROL]},createElement:function(e,d){var c=e.getElementsByClassName(this._LIVE_CONTROL_DIV)[0];return this._createStyledTextElements(c,d)}})})},"MW/rtc/plugins/saveaspdf/document/ListWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/ListWriter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/ListWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities","MW/rtc/plugins/saveaspdf/document/ParagraphWriter"],function(h,f,g,e){return h(e,{_LIST_ITEM_MARGIN:"18pt",getTypes:function(){return[f.LIST]},setWriters:function(d){this._writers=d},createElement:function(d,
c,b){var a=this._createListBlockElement(d,c,b),e=this._getListType(d);Array.prototype.forEach.apply(d.children,[function(d,f){var h=g.getCommonStyles(d);h["margin-left"]=this._LIST_ITEM_MARGIN;var n=this._createListItem(d,f,e,c,b);a.appendChild(n);g.applyStyles(n,h)},this]);return a},_createListBlockElement:function(d,c,b){d=g.createXMLElement(c,c.LIST_BLOCK);this._addAttributesForListBlock(d,b);return d},_createListItem:function(d,c,b,a,e){var f=g.createXMLElement(a,a.LIST_ITEM);f.appendChild(this._createListItemLabel(a,
e,c+1,b));f.appendChild(this._createListItemBody(a,e,d));return f},_addAttributesForListBlock:function(d,c){g.setAttribute(d,c.PROVISIONAL_DISTANCE,c.LIST_INDENT);g.setAttribute(d,c.START_INDENT,c.LIST_INDENT);g.setAttribute(d,c.END_INDENT,c.LIST_INDENT)},_createListItemLabel:function(d,c,b,a){var e=g.createXMLElement(d,d.LIST_ITEM_LABEL);g.setAttribute(e,c.END_INDENT,c.LABEL_END);g.setAttribute(e,c.TEXT_ALIGN,c.RIGHT);c=g.createXMLElement(d,d.BLOCK);e.appendChild(c);var h;d=g.createXMLElement(d,
d.INLINE);a===f.UNORDERED_LIST?h=g.createTextTag(f.SQUARE_LIST_LABEL):a===f.ORDERED_LIST&&(h=g.createTextTag(b+"."));d.appendChild(h);c.appendChild(d);return e},_createListItemBody:function(d,c,b){var a=g.createXMLElement(d,d.LIST_ITEM_BODY);g.setAttribute(a,c.START_INDENT,c.BODY_START);var e=g.createXMLElement(d,d.BLOCK);a.appendChild(e);this.insertRichTextElement(b.children,e,d,c);return a},_getListType:function(d){if(g.isUnorderedList(d))return f.UNORDERED_LIST;if(g.isOrderedList(d))return f.ORDERED_LIST}})})},
"MW/rtc/plugins/saveaspdf/document/ParagraphWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/ParagraphWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/TableOfContentWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/document/TableOfContentWriter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/document/TableOfContentWriter":function(){define(["dojo/_base/array","dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g,e,d){return f(g,{getTypes:function(){return[e.TABLEOFCONTENT]},setWriters:function(c){this._writers=c},
createElement:function(c,b,a){var e=d.createXMLElement(b,b.BLOCK),f=d.getCommonStyles(c);d.applyStyles(e,f);this._removeBorders(e);f=this._createHeader(c,b,a);e.appendChild(f);c=this._createEntries(c,b,a);e.appendChild(c);return e},_createHeader:function(c,b,a){c=this._writers[e.PARAGRAPH].createElement(c.children[0],b,a).paragraph;this._removeBorders(c);return c},_createEntries:function(c,b,a){c=c.children[1];var f=d.getCommonStyles(c),g=d.createXMLElement(b,b.BLOCK);d.applyStyles(g,f);this._removeBorders(g);
var m=this._writers[e.HYPERLINK],q,n,p,r,s=0;h.forEach(c.children,function(c){c.className===e.HYPERLINK_CLASS?(n=d.createXMLElement(b,b.BLOCK),d.setAttribute(n,a.TEXT_ALIGN_LAST,a.JUSTIFY),d.setAttribute(n,a.MARGIN_LEFT,s+e.POINT_UNIT),q=m.createElement(c,b,a),q.textContent=q.textContent.replace("\n",""),n.appendChild(q),p=d.createXMLElement(b,b.LEADER),d.setAttribute(p,a.LEADER_PATTERN,e.DOTS),n.appendChild(p),r=d.createXMLElement(b,b.PAGE_NUMBER_CITATION),d.setAttribute(r,a.REF_ID,q.getAttribute(a.INTERNAL_DESTINATION)),
n.appendChild(r),g.appendChild(n)):s=3*c.textContent.length});return g},_removeBorders:function(c){d.setAttribute(c,"border-bottom","0pt none");d.setAttribute(c,"border-right","0pt none");d.setAttribute(c,"border-left","0pt none");d.setAttribute(c,"border-top","0pt none")}})})},"MW/rtc/plugins/saveaspdf/outputs/FigureWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/FigureWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.embeddedoutputs"]}},
createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/saveaspdf/outputs/FigureWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g,e){return h(f,{constructor:function(d){this._outputView=d.getEmbeddedOutputsView()},getTypes:function(){return[g.FIGURES]},setOptions:function(d){this._options=d},createElement:function(d,c,b){var a=this._createWrapperElement(c,
d);d=this._createChildElement(c,b,d);a.appendChild(d);return a},_createWrapperElement:function(d,c){var b=e.createXMLElement(d,d.BLOCK),a=e.getCommonStyles(c);e.applyStyles(b,a);return b},_createChildElement:function(d,c,b){d=e.createXMLElement(d,d.EXTERNAL_GRAPHIC);var a=b.firstChild.querySelector("img.figureImage"),f=this._outputView.getOutputFromOutputDiv(b);this._hasValidOptions()&&f.canPrintToFile()?(b=this._options.figurePath+"/"+f.uid+"."+this._options.figureFormat,f=f.printToFile(this._options.figureFormat,
this._options.figureResolution,b),this._options.promiseList.push(f),e.setAttribute(d,c.SOURCE,b)):e.setAttribute(d,c.SOURCE,a.src);this._applyStyles(d,c,a);return d},_applyStyles:function(d,c,b){var a=b.clientWidth*g.FONT_SCALING_FACTOR,f=b.offsetLeft;b.offsetParent===b.parentElement&&(f+=b.parentElement.offsetLeft);b=g.AVAILABLE_WIDTH-2*f;a>b&&(a=b);e.setAttribute(d,c.CONTENT_WIDTH,a+g.POINT_UNIT)},_hasValidOptions:function(){return this._options&&this._options.figurePath&&this._options.figureFormat&&
this._options.figureResolution&&this._options.promiseList?!0:!1}})})},"MW/rtc/plugins/saveaspdf/outputs/MatrixWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/MatrixWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/MatrixWriter":function(){define("dojo/_base/declare dojo/dom-class MW/rtc/plugins/saveaspdf/PDFWriterInterface MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities MW/rtc/plugins/saveaspdf/outputs/WriterUtils MW/rtc/plugins/view/exporters/HTMLOutputUtils".split(" "),
function(h,f,g,e,d,c,b){return h(g,{MAX_CHARACTERS:80,_SUMMARY_FONT_FAMILY:"'Consolas', sans-serif",getTypes:function(){return[e.MATRIX]},createElement:function(a,c,e){var g=d.createXMLElement(c,c.BLOCK),h=d.getCommonStyles(a);a=b.processOutput(a);d.applyStyles(g,h);Array.prototype.forEach.apply(a.firstChild.children,[function(a){var b,h=d.getCommonStyles(a);h[e.WHITE_SPACE]=e.WHITE_SPACE_PRESERVE;h[e.FONT_FAMILY]="";f.contains(a,"valueContainer")?(b=JSON.parse(a.dataset.layout),b=this._getChoppedData(b,
this._getValue(a),c,e)):f.contains(a,"veVariableName")?b=this._getNameAndSummary(a,c,e):f.contains(a,"veScalingFactor")?b=this._getScalingFactor(a,c,e):(b=d.createXMLElement(c,c.BLOCK),b.appendChild(d.createTextTag(a.textContent)));d.applyStyles(b,h);g.appendChild(b)},this]);return g},_getValue:function(a){return a.textContent},_getScalingFactor:function(a,b,c){return d.createTextTag("")},_getNameAndSummary:function(a,b,e){var f=a.firstChild;a=this._getMetaSummaryInfo(a);a.displayType=b.INLINE;e=
c.createElement(a,b,e);b=d.createXMLElement(b,b.BLOCK);b.appendChild(d.createTextTag(f.textContent));b.appendChild(e);return b},_getMetaSummaryInfo:function(a){return a.lastChild},_getChoppedData:function(a,b,c,e){var f=this._getAmountOfDataToShow(a),g=f.totalCharactersInRow,h=f.totalCharacters;this._styleHeader(g,e);var r=d.createXMLElement(c,c.BLOCK),s;b.split("\n").forEach(function(a,b){a&&(s=d.createXMLElement(c,c.BLOCK),s.appendChild(d.createTextTag(a.substring(0,h))),this._addHorizontalEllipsis(b,
g,c,e,s),r.appendChild(s))},this);this._addVerticalEllipsis(a.totalRows,c,e,r);return r},_styleHeader:function(a,b){},_getAmountOfDataToShow:function(a){var b=a.charsPerColumn,c=a.totalColumns*a.charsPerColumn;a=Math.min(Math.floor(this.MAX_CHARACTERS/b),a.totalColumns)*b;return{totalCharactersInRow:c,totalCharacters:a}},_showEllipsis:function(){return!0},_addHorizontalEllipsis:function(a,b,c,e,f){0===a&&(b>this.MAX_CHARACTERS&&this._showEllipsis())&&(a=d.createXMLElement(c,c.EXTERNAL_GRAPHIC),d.setAttribute(a,
e.SOURCE,e.HORIZONTAL_ELLIPSIS),f.appendChild(a))},_addVerticalEllipsis:function(a,b,c,e){10<a&&this._showEllipsis()&&(a=d.createXMLElement(b,b.EXTERNAL_GRAPHIC),d.setAttribute(a,c.SOURCE,c.VERTICAL_ELLIPSIS),d.setAttribute(a,c.PADDING_LEFT,c.VERTICAL_ELLIPSIS_PADDING_LEFT),e.appendChild(a))}})})},"MW/rtc/plugins/saveaspdf/outputs/WriterUtils":function(){define(["dojo/dom-class","dojo/dom-style","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g){return{_ELEMENT_NODE:1,_TEXT_NODE:3,
createElement:function(e,d,c){var b=f.getComputedStyle(e),b=this._getDisplayType(b,e,d),b=g.createXMLElement(d,b),a=g.getCommonStyles(e);g.applyStyles(b,a);for(a=0;a<e.childNodes.length;a++){var k=e.childNodes[a];h.contains(k,"doNotExport")||(this._isElementNode(k)?b.appendChild(this._createElementNode(k,d,c)):this._isTextNode(k)&&b.appendChild(this._createTextNode(k)))}return b},_getDisplayType:function(e,d,c){return"inline"===e.display||d.displayType&&"inline"===d.displayType?c.INLINE:c.BLOCK},
_isElementNode:function(e){return e.nodeType===this._ELEMENT_NODE},_isTextNode:function(e){return e.nodeType===this._TEXT_NODE},_createElementNode:function(e,d,c){return"A"===e.nodeName?g.createTextTag(e.text):"BR"===e.nodeName?g.createTextTag("\n"):h.contains(e,"verticalEllipsis")?this._createVerticalEllipsisNode(d,c):this.createElement(e,d,c)},_createTextNode:function(e){return g.createTextTag(e.data)},_createVerticalEllipsisNode:function(e,d){var c=g.createXMLElement(e,e.BLOCK),b=g.createXMLElement(e,
e.EXTERNAL_GRAPHIC);g.setAttribute(b,d.SOURCE,d.VERTICAL_ELLIPSIS);g.setAttribute(b,d.PADDING_LEFT,d.VERTICAL_ELLIPSIS_PADDING_LEFT);c.appendChild(b);return c},_createHorizontalEllipsisNode:function(e,d){var c=g.createXMLElement(e,e.BLOCK),b=g.createXMLElement(e,e.EXTERNAL_GRAPHIC);g.setAttribute(b,d.SOURCE,d.HORIZONTAL_ELLIPSIS);c.appendChild(b);return c}}})},"MW/rtc/plugins/saveaspdf/outputs/TableWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/TableWriter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/TableWriter":function(){define("dojo/_base/declare dojo/dom-class MW/rtc/plugins/saveaspdf/PDFWriterInterface MW/rtc/plugins/saveaspdf/utils/XSLConstants MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities MW/rtc/plugins/saveaspdf/outputs/WriterUtils".split(" "),function(h,f,g,e,d,c){return h(g,{MAX_CHARACTERS:80,getTypes:function(){return[e.INTERACTIVE_VARIABLE]},
createElement:function(b,a,c){var e=d.createXMLElement(a,a.BLOCK),f=d.getCommonStyles(b);d.applyStyles(e,f);var g=this._getNameAndSummary(b,a,c,f);e.appendChild(g);g=d.createXMLElement(a,"table");g.setAttribute("wrap-option","no-wrap");var h=this._getHeaderInfo(b,a,c,f);g.appendChild(h);b=this._getTableContents(b,a,c,f);g.appendChild(b);e.appendChild(g);return e},_getNameAndSummary:function(b,a,e,f){b=b.getElementsByClassName("summaryBarContainer")[0];c.createElement(b,a,e);e=d.createXMLElement(a,
a.BLOCK);b=b.children;for(var g=0;g<b.length;g++){var h=d.createXMLElement(a,a.BLOCK);h.appendChild(d.createTextTag(b[g].textContent));e.appendChild(h)}d.applyStyles(e,f);return e},_getHeaderInfo:function(b,a,c,e){b=b.getElementsByClassName("mw-table-header-label");c=d.createXMLElement(a,"table-header");for(var f=d.createXMLElement(a,"table-row"),g=0;g<b.length;g++){var h=d.createXMLElement(a,"table-cell"),p=d.createXMLElement(a,a.BLOCK);p.appendChild(d.createTextTag(b[g].textContent));h.appendChild(p);
f.appendChild(h)}c.appendChild(f);d.applyStyles(c,e);return c},_getTableContents:function(b,a,c,e){b=b.getElementsByClassName("mw-table-row");c=d.createXMLElement(a,"table-body");for(e=0;e<b.length;e++){for(var f=d.createXMLElement(a,"table-row"),g=b[e].getElementsByClassName("mw-table-cell-content"),h=0;h<g.length;h++){var p=d.createXMLElement(a,"table-cell"),r=d.createXMLElement(a,a.BLOCK);r.appendChild(d.createTextTag(g[h].textContent));p.appendChild(r);f.appendChild(p)}c.appendChild(f)}return c}})})},
"MW/rtc/plugins/saveaspdf/outputs/OutputWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/OutputWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.embeddedoutputs"]}},createInstance:function(e){e=e.getEmbeddedOutputsView();return new g(e)}})})},"MW/rtc/plugins/saveaspdf/outputs/OutputWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants",
"MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g,e){return h(f,{constructor:function(d){this._embeddedOutputsView=d},getTypes:function(){return[g.OUTPUT]},setWriters:function(d){this._writers=d},createElement:function(d,c,b){var a=this._createWrapperElement(c,d);Array.prototype.forEach.apply(d.children,[function(d){0<d.children.length&&a.appendChild(this._createOutputRegion(d,c,b))},this]);return a},_createWrapperElement:function(d,c){var b=e.createXMLElement(d,d.BLOCK),a=e.getCommonStyles(c);
e.applyStyles(b,a);return b},_createOutputRegion:function(d,c,b){var a=this._embeddedOutputsView.getOutputFromOutputDiv(d);if(a.getPdfContent)return a.getPdfContent(d,c,b);a=this._getOutputWriterType(d);return this._writers[a].createElement(d,c,b)},_getOutputWriterType:function(d){if(e.isWarning(d)||e.isError(d))return g.WARNING_ERROR;if(e.isFigure(d))return g.FIGURES;if(e.isSymEquation(d))return g.SYMEQUATION;if(e.isText(d))return g.TEXT;if(e.isVariable(d))return g.VARIABLES;if(e.isVariableString(d))return g.VARIABLE_STRING;
if(e.isMatrix(d)||e.isInteractiveMatrix(d))return g.MATRIX;if(e.isInteractiveVariable(d))return g.INTERACTIVE_VARIABLE}})})},"MW/rtc/plugins/saveaspdf/outputs/SymEquationWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/SymEquationWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/SymEquationWriter":function(){define(["dojo/_base/declare",
"dojo/query","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/utils/XSLConstants","MW/rtc/plugins/saveaspdf/utils/XSLFOWriterUtilities"],function(h,f,g,e,d){return h(g,{getTypes:function(){return[e.SYMEQUATION]},setWriters:function(c){this._writers=c},createElement:function(c,b,a){var e=this._createWrapperElement(b,c),g=c.children[0].children,h,q=0<f(".inlineSymbolicElement",c).length;for(c=0;c<g.length;c+=1)h=g[c],d.isEquation(h)?e.appendChild(this._createEquationElement(h,
b,a,q)):e.appendChild(this._createTextElement(h,b,q));return e},_createEquationElement:function(c,b,a,f){var g=this._writers[e.EQUATION];f=this._createWrapperElement(b,c,f);var h=d.getCommonStyles(c);f.appendChild(g.createElement(c,b,a));d.applyStyles(f,h);return f},_createTextElement:function(c,b,a){b=this._createWrapperElement(b,c,a);a=d.getCommonStyles(c);b.appendChild(d.createTextTag(c.textContent));d.applyStyles(b,a);return b},_createWrapperElement:function(c,b,a){c=d.createXMLElement(c,a?c.INLINE:
c.BLOCK);b=d.getCommonStyles(b);d.applyStyles(c,b);return c}})})},"MW/rtc/plugins/saveaspdf/outputs/TextWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/TextWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/saveaspdf/outputs/TextWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/outputs/WriterUtils",
"MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,f,g,e){return h(f,{getTypes:function(){return[e.TEXT,e.WARNING_ERROR,e.VARIABLE_STRING]},createElement:function(d,c,b){return g.createElement(d,c,b)}})})},"MW/rtc/plugins/saveaspdf/outputs/VariableWriterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/saveaspdf/outputs/VariableWriter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/saveaspdf/outputs/VariableWriter":function(){define(["dojo/_base/declare","MW/rtc/plugins/saveaspdf/PDFWriterInterface","MW/rtc/plugins/saveaspdf/outputs/WriterUtils","MW/rtc/plugins/saveaspdf/utils/XSLConstants"],function(h,f,g,e){return h(f,{getTypes:function(){return[e.VARIABLES]},createElement:function(d,c,b){return g.createElement(d,c,b)}})})},"MW/rtc/plugins/service/CodingUIBackendServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","MW/rtc/plugins/service/CodingUIBackendService"],function(h,f,g,e){return h(f,{requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.cursor","rtc.editordataservice"]}},createInstance:function(d,c,b){return new e(d,c,b)}})})},"MW/rtc/plugins/service/CodingUIBackendService":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/EditorUtilities","mw-log/Log"],function(h,f,g,e){return h(null,
{constructor:function(d,c,b){this._editorDataService=b;this._document=d;this._cursor=c;this._latestPromise=null},requestMetaData:function(d,c,b){this.isBusy()&&this.cancelRequest();var a=this._document.getCodeText(),e=b.column-1;b=g.getOffsetFromLine(a,b.line-1)[0]+e;this._requestMetaData(d,c,a,b)},_requestMetaData:function(d,c,b,a){this._latestPromise=this._editorDataService.request(d,{document:b,cursor:a},1E4);d=this._cursor.getLineColumn();c=f.hitch(this,"_preprocessResultsCallback",d,c);this._latestPromise.then(c,
function(a){"CODINGUICANCEL"!==a&&e.info(a)})},cancelRequest:function(){this._latestPromise&&(this._latestPromise.cancel("CODINGUICANCEL"),this._latestPromise=null)},isBusy:function(){return this._latestPromise&&!this._latestPromise.isResolved()},_preprocessResultsCallback:function(d,c,b){var a=this._cursor.getLineColumn();if(!(d.line!==a.line||d.column!==a.column))if(d=b.results){b=b.maxResults;a=null;try{a=JSON.parse(d)}catch(e){}c(a,b);this._latestPromise=null}}})})},"MW/rtc/plugins/service/FocusServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/service/FocusService"],function(h,f,g){return h(f,{requires:function(){return{isApplicable:[],createInstance:["rtc.keyhandler","rtc.eventhandler","rtc.cursorcontroller","rtc.scrollpane"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)}})})},"MW/rtc/plugins/service/FocusService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin"],function(h,f,g,e){return h(e,{constructor:function(d,
c,b,a){this._keyHandler=d;this._cursorController=b;this._eventHandler=c;this._domTarget=a;this.own(g.after(this._keyHandler,"onFocus",f.hitch(this,"_doFocus")));this.own(g.after(this._keyHandler,"onBlur",f.hitch(this,"_doBlur"),!0));this.own(g.after(this._eventHandler,"onFocus",f.hitch(this,"setFocus")))},_doFocus:function(){this._keyHandler.hasFocus()&&(this._cursorController.show(!0,!0),this.onFocus())},_doBlur:function(d){if((d=d.relatedTarget)&&this._domTarget!==d)this._cursorController.hide(),
this.onBlur()},onFocus:function(){},onBlur:function(){},setFocus:function(){this._cursorController.positionsAreValid()||this._cursorController.reinitializeCursors();this._keyHandler.focus()},setBlur:function(){this._keyHandler.blur();this._cursorController.hide();this.onBlur()}})})},"MW/rtc/plugins/service/LineNumberServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LineNumberService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument"]}},
createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/service/LineNumberService":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractCachedModelQueryService MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/CodeUtilities".split(" "),function(h,f,g,e,d,c){return h(e,{constructor:function(b){this._lineNodeToLineMap=this._codeLineToLine=this._lineToCodeLine=null},getCodeLineNumberFromLineNumber:function(b){this._ensureBuilt();return this._lineToCodeLine[b]},
getCodeLineNumberAtOrBeforeLineNumber:function(b){for(this._ensureBuilt();0<=b;b--)if(-1<this._lineToCodeLine[b])return this._lineToCodeLine[b];return 0},getLineNumberFromCodeLineNumber:function(b){this._ensureBuilt();var a=this._codeLineToLine[b];if(void 0===a)throw b="LineNumberService: Invalid code line number "+b+". There are only "+this.getNumberOfCodeLines()+" lines of code.",Error(b);return a},getNumberOfCodeLines:function(){this._ensureBuilt();return 0===this._codeLineToLine.length?0:this._codeLineToLine.length-
1},getLineNumber:function(b){this._ensureBuilt();b=this._lineNodeToLineMap.get(b);return 0<=b?b:-1},_build:function(){var b=this._internalDocument.root.children;this._lineToCodeLine=[];this._codeLineToLine=[];this._lineNodeToLineMap=d.createMap();var a=1;b.forEach(function(b,d){this._lineNodeToLineMap.set(b,d);if(c.isCodeContainer(b,!0)){var e=a++;this._lineToCodeLine[d]=e;this._codeLineToLine[e]=d}else this._lineToCodeLine[d]=-1},this)}})})},"MW/rtc/plugins/service/OutputHandlerServiceProvider":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/service/OutputHandlerService"],function(h,f,g,e){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new e},destroyInstance:function(d){d.destroy()}})})},"MW/rtc/plugins/service/OutputHandlerService":function(){define(["dojo/_base/declare","mw-log/Log"],function(h,f){return h(null,{constructor:function(){this._outputHandlers={}},handleRawOutput:function(g,
e){var d=g.outputData,c=g.type,b=this._outputHandlers[c];try{return b.getOutputFromData(d,e)}catch(a){return f.error("Error in getOutputFromData. Skipping output.\nOutput type: "+c+"\nOutput data: "+JSON.stringify(d),a),null}},registerOutputPlugin:function(f){f&&f.OUTPUT_TYPE&&(this._outputHandlers[f.OUTPUT_TYPE]=f)},destroy:function(){this._outputHandlers={}}})})},"MW/rtc/plugins/service/TooltipServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/service/TooltipService"],
function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/service/TooltipService":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{PRIORITY:{HOVER:0,AUTO:5,PROMPT:10,ON_DEMAND:15},constructor:function(){this._tooltipInfo=null},requestTooltip:function(g,e,d){d=d||this.PRIORITY.HOVER;if(this._tooltipInfo&&
d<this._tooltipInfo.priority)return null;this._tooltipInfo&&this._closeTooltip();this._tooltipInfo=this._createTooltipInfo(g,e,d);this._showTooltip();return{remove:f.hitch(this,"_handleNotifyClosed",this._tooltipInfo)}},_createTooltipInfo:function(f,e,d){return{show:f,close:e,priority:d}},_showTooltip:function(){this._tooltipInfo.show()},_closeTooltip:function(){this._tooltipInfo.close()},_handleNotifyClosed:function(f){f===this._tooltipInfo&&(this._tooltipInfo=null)},destroy:function(){}})})},"MW/rtc/plugins/shadowtext/ShadowTextServiceProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./ShadowTextService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.divcaret","rtc.view"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/shadowtext/ShadowTextService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/model/DocumentEventUtilities","./ShadowTextServiceView"],
function(h,f,g,e,d){return h(null,{constructor:function(c,b,a,e,h){this._internalDocument=c;this._document=b;this._cursor=a;this._rtcView=h;this._view=new d(a,e,h);this._services=[];this._aspectHandles=[g.after(this._rtcView,"onLinesDOMUpdated",f.hitch(this,"_handleLinesDOMUpdated"),!0),g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"))]},_handleLinesDOMUpdated:function(c,b){this._updateLineRange(c,b)},_handleDocumentChanged:function(c){c&&0<c.length?c=e.lineRangeFromEvents(c):
(c=this._cursor.getLineColumn().line-1,c={startLine:c,endLine:c});0<=c.startLine&&0<=c.endLine&&this._updateLineRange(c.startLine,c.endLine)},_updateLineRange:function(c,b){this._services.filter(function(a){a=a.position.getLineColumn();return a.line>=c+1&&a.line<=b+1}).forEach(function(a){a.updateCallback&&a.updateCallback(a.handle)})},requestTextAfterCursor:function(c){var b=this._cursor.getLineColumn();c.position=this._document.createPositionAtLineColumn(b.line-1,b.column-1,!0);return this.requestTextAtPosition(c)},
requestTextAtPosition:function(c){c.handle=this._getServiceHandle(c);this._services.push(c);this._view.drawView(c);return c.handle},_getServiceHandle:function(c){return{position:c.position,remove:f.hitch(this,"_removeService",c),update:f.hitch(this,"_updateService",c)}},_updateService:function(c,b,a){c.text=b;c.domNodeToAppend=a||c.domNodeToAppend;this._view.redrawView(c)},_removeService:function(c){this._view.removeView(c);c.position.destroy();c=this._services.indexOf(c);this._services.splice(c,
1)},destroy:function(){this._aspectHandles.forEach(function(c){c.remove()});for(this._aspectHandles=[];0<this._services.length;)this._removeService(this._services[this._services.length-1])}})})},"MW/rtc/plugins/shadowtext/ShadowTextServiceView":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct"],function(h,f,g){return h(null,{_SHADOW_TEXT_CSS:"shadowText",constructor:function(e,d,c){this._cursor=e;this._divcaret=d;this._view=c},drawView:function(e){var d=this._drawView(e);
e.caretRightAligned&&(e=this._view.getCoordinateForDomNode(d),e.x+=e.width,this._divcaret.updateCaretGeometry(this._divcaret._permanentLayer,e))},_drawView:function(e){var d=this._createView(e.text,e.cssClass,e.domNodeToAppend);e.viewHandle=this._view.insertDomNode(d,e.position);return d},redrawView:function(e){this._removeView(e);this.drawView(e)},removeView:function(e){this._removeView(e);this._cursor.onUpdate(!0)},_removeView:function(e){e.viewHandle&&e.viewHandle.remove();e.cleanup&&e.cleanup()},
_createView:function(e,d,c){d=d||"";e=g.create("span",{textContent:e,"class":d,"data-testid":this._SHADOW_TEXT_CSS+d});f.add(e,this._SHADOW_TEXT_CSS);c&&e.appendChild(c);return e}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice rtc.code.comment matlab.tokens".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitCommentSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_splitcomment",_TARGET_REGEXP:e.COMMENT_REGEXP,constructor:function(d,c,b,a,e,f){this._internalDocument=
d;this._document=c;this._cursor=b;this._actionService=a;this._commentCode=e;this._tokenizerService=f;this._actionService.loadActions(this._getActions())},_isTriggerPositionExpected:function(d){var c=d.triggerPos.getNode(),b=d.triggerPos.getLineColumn().line-1,a=d.triggerPos.getLineColumn().column-1;return 0>b||0>=a?!1:f.isCodeContainer(c)&&e.isFirstLayerContainer(d.triggerPos)&&e.isCursorPositionApplicableForSplitRule(d.cursorPos)&&this._tokenizerService.isInComment(b,a-1)&&!this._tokenizerService.isInBlockComment(b,
a-1)},format:function(d){if(!this._document.isReadOnly()&&!this._cursor.isCursorReadOnly()){var c=this._commentCode.getCommentAnnotation(),b=d.cursorPos.getLineColumn().line;this._document.startEdit();this._document.insertText(c,b,d.cursorPos.getLineColumn().column);this._cursor.onUpdate();this._document.endEdit()}}})})},"MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter",
"MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(g,{_TARGET_REGEXP:void 0,_TITLE_FORMAT:"title",_HEADING_FORMAT:"heading",_isTriggerTypeExpected:function(c){return c.type===e.INSERT_BREAK},_isTriggerPositionExpected:function(c){return d.isFirstLayerContainer(c.triggerPos)&&d.isAtEndOfEmptyLine(c.cursorPos)},_findAndRecordTarget:function(c){var b=c.triggerPos.getLineColumn().line,b=this._getRangeOfDirectivesOnLine(b);
if(!b)return!1;c.target=b;return!0},format:function(c){var b=c.cursorPos.getLineColumn().line,a=c.triggerPos.getLineColumn().line,d=this._document.startBlockEdit();this._removeLeadingSpaces(b);this._format(a,c.target);this._document.endBlockEdit(d);this._cursor.onUpdate();return c},_format:function(c,b){this._transformLineToParagraph(c,b)},_getRangeOfDirectivesOnLine:function(c){return f.getRangeOfTargetOnLine(this._internalDocument,c,this._TARGET_REGEXP)},_transformLineToParagraph:function(c,b){var a=
this._getTypeOfParagraph(c);this._richText.applyFormatInLine(a,c);this._removeDirectives(c,b);this._removeTrailingSpaces(c)},_getTypeOfParagraph:function(c){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.abstract.ParagraphFormatSmartFormatter._getTypeOfParagraph");},_removeDirectives:function(c,b){this._document.deleteText(c,b.start,c,b.end-1)},_removeTrailingSpaces:function(c){var b=f.getRangeOfTargetOnLine(this._internalDocument,c,d.TRAILING_SPACES_REGEXP);b&&this._document.deleteText(c,
b.start,c,b.end)},_removeLeadingSpaces:function(c){var b=f.getRangeOfTargetOnLine(this._internalDocument,c,d.LEADING_SPACES_REGEXP);b&&this._document.deleteText(c,b.start,c,b.end)}})})},"MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{SMART_FORMATTER_ID:void 0,_enabled:!0,isApplicable:function(f){return this._isEnabled()&&this._isTriggerExpected(f)&&this._findAndRecordTarget(f)},enable:function(){this._enabled=
!0},disable:function(){this._enabled=!1},format:function(f){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter.format");},_isEnabled:function(){return this._enabled},_isTriggerExpected:function(f){return this._isTriggerTypeExpected(f)&&this._isTriggerPositionExpected(f)},_isTriggerTypeExpected:function(f){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter._isTriggerTypeExpected");},_isTriggerPositionExpected:function(f){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter._isTriggerPositionExpected");
},_findAndRecordTarget:function(f){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.AbstractSmartFormatter._findAndRecordTarget");},_getActions:function(){return[{id:"rtc_smartformatting_"+this.SMART_FORMATTER_ID+"_on",enabled:!0,callback:f.hitch(this,this.enable)},{id:"rtc_smartformatting_"+this.SMART_FORMATTER_ID+"_off",enabled:!0,callback:f.hitch(this,this.disable)}]}})})},"MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum":function(){define([],function(){return{INSERT_BREAK:0,
INSERT_TEXT:1,DELETE:2}})},"MW/rtc/plugins/smartformatting/SmartFormatterUtilities":function(){define("mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentConstants MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/tokenizer/TokenConstants MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities".split(" "),function(h,f,g,e,d,c){return{LEADING_SPACES_REGEXP:/^\s+/,TRAILING_SPACES_REGEXP:/\s+$/,URL_REGEXP_STRING:"((https?|ftp):\\/\\/|www\\.)[^\\s]+",COMMENT_REGEXP:/%\s*\S*/,ROUND_PAREN_OPEN_CHAR:"(",
ROUND_PAREN_CLOSE_CHAR:")",CURLY_PAREN_OPEN_CHAR:"{",CURLY_PAREN_CLOSE_CHAR:"}",SQUARE_PAREN_OPEN_CHAR:"[",SQUARE_PAREN_CLOSE_CHAR:"]",SINGLE_QUOTE_OPEN_CHAR:"'",SINGLE_QUOTE_CLOSE_CHAR:"'",DOUBLE_QUOTE_OPEN_CHAR:'"',DOUBLE_QUOTE_CLOSE_CHAR:'"',PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR:", ,),},],;,%".split(","),LINE_CONTINUATION:"...",isAtEndOfEmptyLine:function(b){var a=b.getNode().rootContainer();return e.isAtEndOfContainer(b,a)&&""===a.getTextForPositioning().trim()},isFirstLayerContainer:function(b){b=
b.getNode();return b.textContainer()===b.rootContainer()},isInString:function(b,a,d){b=d.getTokenOnLineColumn(b,a);return 2>=b._length?!1:c.isMatlabStringToken(b)},isInMatlabUntermString:function(b,a,d,e){b=d.getTokenOnLineColumn(b,a);return"single"===e?c.isMatlabUntermSingleQuoteStringToken(b):c.isMatlabUntermDoubleQuoteStringToken(b)},isCursorPositionApplicableForSplitRule:function(b){var a=b.getNode();if(!f.isCodeContainer(a))return!1;a=b.getNode().rootContainer();return!(e.isAtEndOfContainer(b,
a)||""===a.getTextForPositioning().trim())},isNonCodeLineInBetweenForSplitRule:function(b,a,c){for(h.assert(a<=c,"Start line should be \x3c\x3d end line!");a<=c;a+=1){var d=b.getLineNode(a);if(!f.isCodeContainer(d))return!0}return!1},areThereMoreOpenCharactersThanClosingOnLine:function(b,a,c,d,e){b=this._getLineTextForFormatting(b,c-1);for(var f=0,g=0,h=0;h<b.length;h++)a.isInString(c,h)||(b[h]===d&&(f+=1),b[h]===e&&(g+=1));return d===e?0!==f%2:f>g},isLineColumnBeforeValidString:function(b,a,c,d,
f){a=this._getLineTextForFormatting(b,c-1);c=b.getPositionForLineColumn(c,d+1);b=e.getWordAtPosition(b,c);if(null===b)return a.substring(d,d+1)===f;b=b.endLineCol.column;d=a.substring(d-1,d);a=a.substring(b,b+1);return d===f&&a===f},isCharAtLineColumnForFormatting:function(b,a,c,d){h.assert(1===a.length,"Input must be a character");return a===this.getTextAtLineColumnForFormatting(b,c,d,1)},getTextAtLineColumnForFormatting:function(b,a,c,d){return this._getLineTextForFormatting(b,a).substr(c,d)},_getLineTextForFormatting:function(b,
a){return b.getLineNode(a).getTextForPositioning()},lineHasUntermSingleQuoteString:function(b,a){return a.getTokensOnLine(b).some(function(a){return c.isMatlabUntermSingleQuoteStringToken(a)})},lineHasUntermDoubleQuoteString:function(b,a){return a.getTokensOnLine(b).some(function(a){return c.isMatlabUntermDoubleQuoteStringToken(a)})}}})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter",
"MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_roundpareninsert",_OPEN_CHAR:d.ROUND_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.ROUND_PAREN_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:d.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,f,g,e,d,c){return h(e,{_OPEN_CHAR:void 0,_CLOSE_CHAR:void 0,_ALLOWED_CHAR_AFTER_CURSOR:void 0,_isTriggerTypeExpected:function(b){return b.type===d.INSERT_TEXT&&b.text===this._OPEN_CHAR},_isTriggerPositionExpected:function(b){var a=b.triggerPos.getNode();return f.isCodeContainer(a)&&this._isCursorPositionApplicable(b)&&this._isLineValidForPairInsert(b)},_isCursorPositionApplicable:function(b){var a=b.cursorPos.getLineColumn().line;b=b.cursorPos.getLineColumn().column;a-=1;b-=1;if(0>a||0>
b||this._tokenizerService.isInComment(a,b-1)||this._tokenizerService.isInString(a,b-1))return!1;a=c.getTextAtLineColumnForFormatting(this._internalDocument,a,b,1);for(b=0;b<this._ALLOWED_CHAR_AFTER_CURSOR.length;b+=1)if(a===this._ALLOWED_CHAR_AFTER_CURSOR[b])return!0;return!1},_isLineValidForPairInsert:function(b){b=b.cursorPos.getLineColumn().line;return this._OPEN_CHAR!==this._CLOSE_CHAR&&!c.areThereMoreOpenCharactersThanClosingOnLine(this._internalDocument,this._tokenizerService,b,this._OPEN_CHAR,
this._CLOSE_CHAR)?!1:!0},_findAndRecordTarget:function(b){return!0},format:function(b){var a=b.cursorPos.getLineColumn().line,c=b.cursorPos.getLineColumn().column;this._document.startEdit();this._document.insertText(this._CLOSE_CHAR,a,b.cursorPos.getLineColumn().column);this._cursor.setLineColumn(a,c);this._document.endEdit()}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter",
"MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_roundparendelete",_OPEN_CHAR:d.ROUND_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.ROUND_PAREN_CLOSE_CHAR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingPairMatcher"],function(h,f,g){return h(f,{constructor:function(e,d,c,b,a){this._smartFormattingMatcher=new g(a,this._OPEN_CHAR,this._CLOSE_CHAR)},_checkPairDeleteIsApplicable:function(e){return!this.inherited(arguments)?!1:this._smartFormattingMatcher.areTokensBalancedForPosition(e.cursorPos)}})})},"MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(g,{_OPEN_CHAR:void 0,_CLOSE_CHAR:void 0,_isTriggerExpected:function(c){return this._isTriggerTypeExpected(c)&&this._isTriggerDirectionExpected(c)&&this._isTriggerPositionExpected(c)},_isTriggerDirectionExpected:function(c){return-1===c.direction},_isTriggerTypeExpected:function(c){return c.type===
e.DELETE},_isTriggerPositionExpected:function(c){var b=c.triggerPos.getNode();return f.isCodeContainer(b)&&this._checkPairDeleteIsApplicable(c)},_findAndRecordTarget:function(c){return!0},format:function(c){var b=c.cursorPos;this._document.deleteText(b.getLineColumn().line,b.getLineColumn().column-1,b.getLineColumn().line,b.getLineColumn().column+1);return c},_checkPairDeleteIsApplicable:function(c){var b=c.cursorPos.getLineColumn().line-1,a=c.cursorPos.getLineColumn().column-1;if(0>b||0>=a||this._tokenizerService.isInComment(b,
a-1)||d.isInString(b,a-1,this._tokenizerService))return!1;c=d.isCharAtLineColumnForFormatting(this._internalDocument,this._OPEN_CHAR,b,a-1);b=d.isCharAtLineColumnForFormatting(this._internalDocument,this._CLOSE_CHAR,b,a);return c&&b}})})},"MW/rtc/plugins/smartformatting/SmartFormattingPairMatcher":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log MW/rtc/plugins/language/matlab/tokenizer/TokenConstants MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities".split(" "),function(h,
f,g,e,d,c){return h(null,{constructor:function(b,a,c){this._tokenizerService=b;this._openCharacter=a;this._closeCharacter=c},areTokensBalancedForPosition:function(b){var a=b.getLineColumn().column-1,c=b.getLineColumn().line-1;b=this._tokenizerService.getTokenOnLineColumn(c,a);a=this._tokenizerService.getTokenOnLineColumn(c,a-1);a=this._findStartToken(a);b=this._findEndToken(b);return this._areTokensBalanced(a,b)},hasOneMoreCloseThanOpenCharacter:function(b){var a=b.getLineColumn().column-1,c=b.getLineColumn().line-
1;b=this._tokenizerService.getTokenOnLineColumn(c,a);a=this._tokenizerService.getTokenOnLineColumn(c,a-1);a=this._findStartToken(a);b=this._findEndToken(b);return this._hasOneMoreCloseThanOpenCharacter(a,b)},_areTokensBalanced:function(b,a){var c=this._getUnmatchedCharacterCounts(b,a);return 0===c.unmatchedCloseCharacters&&0===c.unmatchedOpenCharacters},_hasOneMoreCloseThanOpenCharacter:function(b,a){var c=this._getUnmatchedCharacterCounts(b,a);return 1===c.unmatchedCloseCharacters&&0===c.unmatchedOpenCharacters},
_getUnmatchedCharacterCounts:function(b,a){e.assert(null!==b,"Start token cannot be null");e.assert(null!==a,"End token cannot be null");for(var c=[],d=0,f=b;null!==f&&!(f.getValue()===this._openCharacter?c.push(f.getValue()):f.getValue()===this._closeCharacter&&(0===c.length?d+=1:c.pop()),f===a);)f=this._getNextToken(f);return{unmatchedCloseCharacters:d,unmatchedOpenCharacters:c.length}},_findStartToken:function(b){var a=b;for(b=b.getPositionInfo().line;null!=a;){var c=this._tokenizerService.getPreviousTokenOf(a,
a.getPositionInfo().line);if(null===c)return a;var d=c.getPositionInfo().line;if(b!==d)if(this._lineContainsLineContinuation(d,this._tokenizerService))b=d;else return a;a=c}return null},_lineContainsLineContinuation:function(b){return this._tokenizerService.getTokensOnLine(b).some(function(a){return c.isDotDotDotToken(a)})},_findEndToken:function(b){for(;null!=b;){var a=this._getNextToken(b);if(null===a)return b;if(this._isEndOfLine(a))return a;b=a}return null},_isEndOfLine:function(b){return c.isEndOfLineToken(b)},
_getNextToken:function(b){return c.isDotDotDotToken(b)?(b=b.getPositionInfo().line+1,this._tokenizerService.getFirstTokenOnLine(b)):this._tokenizerService.getNextTokenOf(b)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_squarepareninsert",
_OPEN_CHAR:d.SQUARE_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.SQUARE_PAREN_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:d.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter",
"MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_squareparendelete",_OPEN_CHAR:d.SQUARE_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.SQUARE_PAREN_CLOSE_CHAR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_curlypareninsert",_OPEN_CHAR:d.CURLY_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.CURLY_PAREN_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:d.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenDeleteSmartFormatter":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_curlyparendelete",_OPEN_CHAR:d.CURLY_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.CURLY_PAREN_CLOSE_CHAR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},
"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteInsertSmartFormatter":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/QuoteInsertSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(c,{SMART_FORMATTER_ID:"automaticcoding_singlequoteinsert",_OPEN_CHAR:b.SINGLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:b.SINGLE_QUOTE_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:b.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(a,b,c,d,e){this._internalDocument=a;this._document=b;this._cursor=c;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/QuoteInsertSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/smartformatting/SmartFormatterUtilities","MW/rtc/plugins/smartformatting/abstract/PairInsertSmartFormatter"],function(h,f,g,e,d){return h(d,{_UNALLOWED_CHAR_BEFORE_CURSOR:[")","}","]","."],_WORD_REGEX:/\w/,_NON_WORD_REGEX:/[^\\w=({[,\s]/,_isTriggerPositionExpected:function(c){var b=c.triggerPos.getNode();return f.isCodeContainer(b)&&this._isCursorPositionApplicable(c)&&this._checkAllowedCharsBeforeCursor(c)},_checkAllowedCharsBeforeCursor:function(c){var b=
c.cursorPos.getLineColumn().line;c=c.cursorPos.getLineColumn().column;b-=1;c-=1;if(0>b||0>c)return!1;if(2>c)return!0;b=e.getTextAtLineColumnForFormatting(this._internalDocument,b,c-2,1);for(c=0;c<this._UNALLOWED_CHAR_BEFORE_CURSOR.length;c+=1)if(b===this._UNALLOWED_CHAR_BEFORE_CURSOR[c])return!1;c=b.search(this._WORD_REGEX);if(0===c)return!1;c=b.search(this._NON_WORD_REGEX);return 0===c?!1:!0}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_singlequotedelete",_OPEN_CHAR:d.SINGLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:d.SINGLE_QUOTE_CLOSE_CHAR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())},_checkPairDeleteIsApplicable:function(c){if(!this.inherited(arguments))return!1;
var b=c.cursorPos.getLineColumn().line-1;return!d.lineHasUntermSingleQuoteString(b,this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor",
"rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteInsertSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/QuoteInsertSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_doublequoteinsert",_OPEN_CHAR:d.DOUBLE_QUOTE_OPEN_CHAR,
_CLOSE_CHAR:d.DOUBLE_QUOTE_CLOSE_CHAR,_ALLOWED_CHAR_AFTER_CURSOR:d.PAIR_INSERT_ALLOWED_CHAR_AFTER_CURSOR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteDeleteSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/PairDeleteSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],
function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_doublequotedelete",_OPEN_CHAR:d.DOUBLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:d.DOUBLE_QUOTE_CLOSE_CHAR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())},_checkPairDeleteIsApplicable:function(c){if(!this.inherited(arguments))return!1;var b=c.cursorPos.getLineColumn().line-1;return!d.lineHasUntermDoubleQuoteString(b,
this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,
d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/RoundParenOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_roundparenoverwrite",_OPEN_CHAR:d.ROUND_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.ROUND_PAREN_CLOSE_CHAR,constructor:function(c,
b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingPairMatcher"],function(h,f,g){return h(f,{constructor:function(e,d,c,b,a){this._smartFormattingMatcher=
new g(a,this._OPEN_CHAR,this._CLOSE_CHAR)},_isCursorPositionApplicable:function(e){return!this.inherited(arguments)?!1:this._smartFormattingMatcher.hasOneMoreCloseThanOpenCharacter(e.cursorPos)}})})},"MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,f,g,e,d,c){return h(e,{_OPEN_CHAR:void 0,_CLOSE_CHAR:void 0,_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["TypingText"],_isTriggerTypeExpected:function(b){return b.type===d.INSERT_TEXT&&b.text===this._CLOSE_CHAR},_isTriggerPositionExpected:function(b){var a=b.triggerPos.getNode();return f.isCodeContainer(a)&&this._isCursorPositionApplicable(b)},_isCursorPositionApplicable:function(b){var a=b.cursorPos.getLineColumn().line;b=b.cursorPos.getLineColumn().column;a-=1;b-=1;return 0>a||0>b||c.getTextAtLineColumnForFormatting(this._internalDocument,
a,b,1)!=this._CLOSE_CHAR||this._tokenizerService.isInComment(a,b-1)||c.isInString(a,b-1,this._tokenizerService)?!1:!0},_findAndRecordTarget:function(b){return!0},format:function(b){var a=b.cursorPos.getLineColumn().line;b=b.cursorPos;this._document.startEdit().setBlockTypesForMergeAndAdvance(this._BLOCK_TYPES_FOR_MERGE_AND_ADVANCE);this._document.deleteText(b.getLineColumn().line,b.getLineColumn().column-1,b.getLineColumn().line,b.getLineColumn().column);this._cursor.setLineColumn(a,b.getLineColumn().column+
1);this._document.endEdit()}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,
b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/CurlyParenOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_curlyparenoverwrite",_OPEN_CHAR:d.CURLY_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.CURLY_PAREN_CLOSE_CHAR,
constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument",
"rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SquareParenOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/ParenCloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_squareparenoverwrite",
_OPEN_CHAR:d.SQUARE_PAREN_OPEN_CHAR,_CLOSE_CHAR:d.SQUARE_PAREN_CLOSE_CHAR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SingleQuoteOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],
function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_singlequoteoverwrite",_OPEN_CHAR:d.SINGLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:d.SINGLE_QUOTE_CLOSE_CHAR,constructor:function(c,b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())},_isCursorPositionApplicable:function(c){if(!this.inherited(arguments))return!1;var b=c.cursorPos.getLineColumn().line-1;return d.lineHasUntermSingleQuoteString(b,
this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","matlab.tokens"]}},createInstance:function(e,d,c,b,
a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/DoubleQuoteOverwritingSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/CloseCharOverwritingSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g,e,d){return h(e,{SMART_FORMATTER_ID:"automaticcoding_doublequoteoverwrite",_OPEN_CHAR:d.DOUBLE_QUOTE_OPEN_CHAR,_CLOSE_CHAR:d.DOUBLE_QUOTE_CLOSE_CHAR,constructor:function(c,
b,a,d,e){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._tokenizerService=e;this._actionService.loadActions(this._getActions())},_isCursorPositionApplicable:function(c){if(!this.inherited(arguments))return!1;var b=c.cursorPos.getLineColumn().line-1;return d.lineHasUntermDoubleQuoteString(b,this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitDoubleQuoteStringSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/plugins/language/matlab/autoindent/Formatter MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities MW/rtc/plugins/smartformatting/abstract/SplitStringSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,f,g,e,d,c){return h(d,{SMART_FORMATTER_ID:"automaticcoding_splitdoublequotestring",_TRIGGER_POS_REQ_CHAR:c.DOUBLE_QUOTE_CLOSE_CHAR+" + "+c.LINE_CONTINUATION,_CURSOR_POS_REQ_CHAR:c.DOUBLE_QUOTE_OPEN_CHAR,_TRIGGER_POS_REQ_CHAR_ESC_CHAR:c.DOUBLE_QUOTE_CLOSE_CHAR+c.DOUBLE_QUOTE_CLOSE_CHAR+" + "+c.LINE_CONTINUATION,_QUOTE_TYPE:"double",constructor:function(b,a,c,d,e,f){this._internalDocument=b;this._document=a;this._cursor=c;this._actionService=d;this._tokenizerService=e;this._indentUtilities=
f;this._actionService.loadActions(this._getActions())},_formatQuoteTypeSpecific:function(b,a,c){}})})},"MW/rtc/plugins/smartformatting/abstract/SplitStringSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/autoindent/ExchangeService MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(c,{_TRIGGER_POS_REQ_CHAR:void 0,_CURSOR_POS_REQ_CHAR:void 0,_TRIGGER_POS_REQ_CHAR_ESC_CHAR:void 0,_QUOTE_TYPE:void 0,_isTriggerPositionExpected:function(a){var c=a.triggerPos.getNode(),d=a.triggerPos.getLineColumn().line-1,g=a.triggerPos.getLineColumn().column-1;if(0>d||0>=g)return!1;var h=a.cursorPos.getLineColumn().line-1;return f.isCodeContainer(c)&&!b.isNonCodeLineInBetweenForSplitRule(this._internalDocument,d,h)&&b.isCursorPositionApplicableForSplitRule(a.cursorPos)&&
this._checkUntermString(d,g-1,this._tokenizerService,e.getLatestNumberOfWhiteSpaces())},_checkUntermString:function(a,c,d,e){var f=b.isInMatlabUntermString(a,c,d,this._QUOTE_TYPE);return!f&&0===e?this._checkEscapeCharCondition(a,c,d):f},_checkEscapeCharCondition:function(a,c,e){var f=b.getTextAtLineColumnForFormatting(this._internalDocument,a,c,1),g=this._cursor.getLineColumn().line-1,h=this._cursor.getLineColumn().column-1,g=b.getTextAtLineColumnForFormatting(this._internalDocument,g,h,1),h="single"===
this._QUOTE_TYPE?b.SINGLE_QUOTE_CLOSE_CHAR:b.DOUBLE_QUOTE_CLOSE_CHAR;if(f===h&&g===h)return a=e.getTokenOnLineColumn(a,c),d.isMatlabStringToken(a)},_findAndRecordTarget:function(a){return!0},format:function(a){if(!this._document.isReadOnly()&&!this._cursor.isCursorReadOnly()){var b=a.triggerPos.getLineColumn().line,c=a.triggerPos.getLineColumn().column;a=a.cursorPos.getLineColumn().line;var d=e.getLatestNumberOfWhiteSpaces(),f=e.getLatestIndentLevel(),g=this._CURSOR_POS_REQ_CHAR;if(d>f)for(var h=
0;h<d-f;h+=1)g+=" ";this._document.startEdit();this._checkEscapeCharCondition(b-1,c-2,this._tokenizerService)?(this._document.insertText(this._TRIGGER_POS_REQ_CHAR_ESC_CHAR,b,c),0<f&&this._document.deleteText(a,1,a,f+1)):(this._document.insertText(this._TRIGGER_POS_REQ_CHAR,b,c),d<f&&this._document.deleteText(a,1,a,f-d+1),this._document.insertText(g,a,1));this._formatQuoteTypeSpecific(b,c,a);this._cursor.setLineColumn(a,2);e.isAutoIndentEnabled()&&this._indentUtilities.format(a-1);this._cursor.onUpdate();
this._document.endEdit()}},_formatQuoteTypeSpecific:function(a,b,c){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.SplitStringSmartFormatter._formatQuoteTypeSpecific");}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/SplitSingleQuoteStringSmartFormatter":function(){define("dojo/_base/declare MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/language/matlab/autoindent/Formatter MW/rtc/plugins/language/matlab/tokenizer/TokenUtilities MW/rtc/plugins/smartformatting/abstract/SplitStringSmartFormatter MW/rtc/plugins/smartformatting/SmartFormatterUtilities".split(" "),
function(h,f,g,e,d,c,b){return h(c,{SMART_FORMATTER_ID:"automaticcoding_splitsinglequotestring",_TRIGGER_POS_REQ_CHAR:b.SINGLE_QUOTE_CLOSE_CHAR+" "+b.LINE_CONTINUATION,_CURSOR_POS_REQ_CHAR:b.SINGLE_QUOTE_OPEN_CHAR,_STRING_OPEN_BRACKET:b.SQUARE_PAREN_OPEN_CHAR,_STRING_CLOSE_BRACKET:b.SQUARE_PAREN_CLOSE_CHAR,_TRIGGER_POS_REQ_CHAR_ESC_CHAR:b.SINGLE_QUOTE_CLOSE_CHAR+b.SINGLE_QUOTE_CLOSE_CHAR+b.LINE_CONTINUATION,_STRING_OPEN_REGEX:RegExp("\\"+b.SQUARE_PAREN_OPEN_CHAR+"\\s*"+b.SINGLE_QUOTE_OPEN_CHAR),_STRING_CLOSE_REGEX:RegExp(b.SINGLE_QUOTE_CLOSE_CHAR+
"\\s*\\"+b.SQUARE_PAREN_CLOSE_CHAR),_STRING_CONTINUATION_REGEX:RegExp(b.SINGLE_QUOTE_CLOSE_CHAR+"\\s*\\.\\.\\."),_QUOTE_TYPE:"single",constructor:function(a,b,c,d,e,f){this._internalDocument=a;this._document=b;this._cursor=c;this._actionService=d;this._tokenizerService=e;this._indentUtilities=f;this._actionService.loadActions(this._getActions())},_formatForFirstTimeSplitString:function(a,b,c,d,e){b=e.getTokenOnLineColumn(a,b);var f=this._getRange(this._internalDocument,a+1,this._STRING_OPEN_REGEX);
d=e.getTokenOnLineColumn(c,d);e=this._getRange(this._internalDocument,c+1,this._STRING_CLOSE_REGEX);var g=this._getRange(this._internalDocument,c+1,this._STRING_CONTINUATION_REGEX);this._isFirstTimeSplit(b,d,f,e,g)&&(this._document.insertText(this._STRING_OPEN_BRACKET,a+1,b._column+1),this._document.insertText(this._STRING_CLOSE_BRACKET,c+1,d._column+d._length+1))},_isFirstTimeSplit:function(a,b,c,d,e){if(!c&&!d&&!e)return!0;var f=!0,g=!0,h=!0;c&&(f=!(a._column>=c.end-2));d&&(g=!(b._column+b._length<=
d.start));e&&(h=b._column+b._length!==e.start);return f&&g&&h},_getRange:function(a,b,c){return g.getRangeOfTargetOnLine(a,b,c)},_formatQuoteTypeSpecific:function(a,b,c){this._formatForFirstTimeSplitString(a-1,b-1,c-1,0,this._tokenizerService)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndClassDefBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities",
"MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e,d){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endclassdefblock",_TARGET_REGEXP:d.getValueOfToken(d.CLASSDEF),constructor:function(c,b,a,d,e,f){this._internalDocument=c;this._document=b;this._cursor=a;this._actionService=d;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter":function(){define("dojo/_base/declare mw-log/Log MW/rtc/model/CodeUtilities MW/rtc/model/DocumentUtilities MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum MW/rtc/plugins/language/matlab/tokenizer/TokenConstants".split(" "),
function(h,f,g,e,d,c,b){return h(d,{_TARGET_REGEXP:void 0,_END_STRING:b.getValueOfToken(b.END),_LINE_COLUMN_LESS_THAN_ZERO:"Line and column must be greater than or equal to zero",_DOCUMENT_IS_READ_ONLY:"This document should not be read only",_isTriggerTypeExpected:function(a){return a.type===c.INSERT_BREAK},_isTriggerPositionExpected:function(a){var b=a.triggerPos.getNode(),c=a.triggerPos.getLineColumn().line-1;a=a.triggerPos.getLineColumn().column-1;f.assert(0<=c&&0<=a,this._LINE_COLUMN_LESS_THAN_ZERO);
if(c=this._tokenizerService.findStartOfBlockOnLine(c))var d=c.getValue()===this._TARGET_REGEXP;return d&&g.isCodeContainer(b)&&this._tokenizerService.isUnmatchedStartToken(c)},_findAndRecordTarget:function(a){var b=a.triggerPos.getLineColumn().line,b=this._getRangeOfDirectivesOnLine(b);if(!b)return!1;a.target=b;return!0},_getRangeOfDirectivesOnLine:function(a){return e.getRangeOfTargetOnLine(this._internalDocument,a,this._TARGET_REGEXP)},format:function(a){f.assert(!(this._document.isReadOnly()||
this._cursor.isCursorReadOnly()),this._DOCUMENT_IS_READ_ONLY);var b=a.cursorPos.getLineColumn().line;a=a.cursorPos.getLineColumn().column;var c=this._document.getLineLength(b),d=this._indentUtilities.getIndentForLineNumber(b-2);this._document.startEdit();this._document.insertText("\n",b,c+1);this._document.insertText(this._END_STRING,b+1,1);0<d&&this._indentUtilities.changeLineIndent(b,d);this._tokenSpecificFormat(b,a,c,d);this._document.endEdit()},_tokenSpecificFormat:function(a,b,c,d){this._cursor.setLineColumn(a,
b,!0)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},createInstance:function(e,d,c,b,a,
f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEnumerationBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endenumerationblock",_TARGET_REGEXP:e.getValueOfToken(e.ENUMERATION),constructor:function(d,c,b,a,e,f){this._internalDocument=
d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndEventsBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endeventsblock",_TARGET_REGEXP:e.getValueOfToken(e.EVENTS),constructor:function(d,c,b,a,
e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndForBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endforblock",_TARGET_REGEXP:e.getValueOfToken(e.FOR),constructor:function(d,c,b,a,e,f){this._internalDocument=
d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndFunctionBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endfunctionblock",_TARGET_REGEXP:e.getValueOfToken(e.FUNCTION),constructor:function(d,
c,b,a,e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndIfBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endifblock",_TARGET_REGEXP:e.getValueOfToken(e.IF),constructor:function(d,c,b,a,e,f){this._internalDocument=
d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndMethodsBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endmethodsblock",_TARGET_REGEXP:e.getValueOfToken(e.METHODS),constructor:function(d,c,b,
a,e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndParforBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endparforblock",_TARGET_REGEXP:e.getValueOfToken(e.PARFOR),constructor:function(d,c,b,a,
e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndPropertiesBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endpropertiesblock",_TARGET_REGEXP:e.getValueOfToken(e.PROPERTIES),constructor:function(d,
c,b,a,e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSpmdBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endspmdblock",_TARGET_REGEXP:e.getValueOfToken(e.PARSECTION),constructor:function(d,c,b,a,
e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndSwitchBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endswitchblock",_TARGET_REGEXP:e.getValueOfToken(e.SWITCH),constructor:function(d,c,b,a,
e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndTryBlockSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endtryblock",_TARGET_REGEXP:e.getValueOfToken(e.TRY),_CATCH_STRING:"catch ME",constructor:function(d,
c,b,a,e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())},_tokenSpecificFormat:function(d,c,b,a){this._document.insertText("\n\n",d,b+1);this._document.insertText(this._CATCH_STRING,d+1,1);1<c&&this._indentUtilities.changeLineIndent(d+1,c-1);0<a&&this._indentUtilities.changeLineIndent(d,a);this._cursor.setLineColumn(d,c,!0)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice matlab.tokens rtc.indentutilities".split(" ")}},createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/automaticcoding/EndWhileBlockSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/BlockSmartFormatter","MW/rtc/plugins/language/matlab/tokenizer/TokenConstants"],function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"automaticcoding_endwhileblock",_TARGET_REGEXP:e.getValueOfToken(e.WHILE),constructor:function(d,c,b,a,e,f){this._internalDocument=d;this._document=c;this._cursor=b;this._actionService=a;this._indentUtilities=f;this._tokenizerService=e;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownBulletedListSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.lists"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownBulletedListSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],
function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"markdown_bulletedlist",_TARGET_REGEXP:/^[\*+-]\s$/,_TRIGGER_CHAR:" ",_LIST_TYPE:"unordered",constructor:function(d,c,b){this._document=d;this._actionService=c;this._list=b;this._actionService.loadActions(this._getActions())},_isTriggerPositionExpected:function(d){var c=d.triggerPos.getNode();return!f.isCodeContainer(c)&&e.isFirstLayerContainer(d.triggerPos)&&c===c.rootContainer().startNode()},_format:function(d){var c=d.target,b=c.line,a=c.line;this._list.isLineListParagraph(b-
1,this._LIST_TYPE)&&(c.line-=1,b-=1);this._list.convertLineRangeIntoList(b,a,this._LIST_TYPE);b=d.cursorPos.getLineColumn();c.left=b.column-d.cursorPos.getOffset();c.right=b.column;this._document.deleteText(c.line,c.left,c.line,c.right);return d}})})},"MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/DocumentUtilities","MW/rtc/plugins/smartformatting/abstract/AbstractSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum"],
function(h,f,g,e){return h(g,{_TARGET_REGEXP:void 0,_TRIGGER_CHAR:void 0,_APPLY_ONLY_STANDALONE_SEGMENT:!0,_isTriggerTypeExpected:function(d){return d.type===e.INSERT_TEXT&&d.text===this._TRIGGER_CHAR},_findAndRecordTarget:function(d){var c=this._getTextRangeForFormatting(d.cursorPos);if(!c)return!1;d.target=c;return!0},format:function(d){var c=this._document.startBlockEdit();d=this._format(d);this._document.endBlockEdit(c);return d},_format:function(d){throw Error("Unimplemented API: MW.rtc.plugins.smartformatting.InlineSmartFormatter._format");
},_getTextRangeForFormatting:function(d){var c=f.getTextRangeFromLeftToPosition(d);if(!c)return null;var b=d.getLineColumn().column,a=c.startPos.getLineColumn().column,c=c.text.substr(0,b-a),e=this._getOffsetOfTargetString(c);return 0>e?null:{line:d.getLineColumn().line,left:a+e,right:b,text:c.slice(e)}},_getOffsetOfTargetString:function(d){var c=d.search(this._TARGET_REGEXP);return 0>c?c:this._APPLY_ONLY_STANDALONE_SEGMENT&&!this._isAtStartOfSegment(d,c)?-1:c},_isAtStartOfSegment:function(d,c){return""===
d.charAt(c-1).replace(" ","")}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownHeadingSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownHeadingSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_heading",_TARGET_REGEXP:/^#{2}(?!#)\s*\S/,constructor:function(f,e,d,c,b){this._internalDocument=f;this._document=e;this._cursor=d;this._actionService=c;this._richText=b;this._actionService.loadActions(this._getActions())},_getTypeOfParagraph:function(f){return this._HEADING_FORMAT}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownNumberedListSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.lists"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownNumberedListSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],
function(h,f,g,e){return h(g,{SMART_FORMATTER_ID:"markdown_numberedlist",_TARGET_REGEXP:/^[1-9][0-9]*\.\s/,_TRIGGER_CHAR:" ",_LIST_TYPE:"ordered",constructor:function(d,c,b){this._document=d;this._actionService=c;this._list=b;this._actionService.loadActions(this._getActions())},_isTriggerPositionExpected:function(d){var c=d.triggerPos.getNode();return!f.isCodeContainer(c)&&e.isFirstLayerContainer(d.triggerPos)&&c===c.rootContainer().startNode()},_findAndRecordTarget:function(d){var c=this._getTextRangeForFormatting(d.cursorPos);
if(!c||c.text.match(this._TARGET_REGEXP)[0].length+1!==d.cursorPos.getLineColumn().column)return!1;var b=this._getItemNumberFromExtractedText(c.text);if(!this._isItemNumberValidForLine(b,c.line))return!1;d.target=c;return!0},_format:function(d){var c=d.target,b=c.line,a=c.line,e=this._getItemNumberFromExtractedText(c.text);this._canItemNumberJoinList(e,c.line-1)&&(c.line-=1,b-=1);this._list.convertLineRangeIntoList(b,a,this._LIST_TYPE);b=d.cursorPos.getLineColumn();c.left=b.column-d.cursorPos.getOffset();
c.right=b.column;this._document.deleteText(c.line,c.left,c.line,c.right);return d},_getItemNumberFromExtractedText:function(d){return parseInt(d.slice(0,-2),10)},_isItemNumberValidForLine:function(d,c){return this._canItemNumberJoinList(d,c-1)?!0:1===d},_canItemNumberJoinList:function(d,c){return this._list.isLineListParagraph(c,this._LIST_TYPE)&&d===this._list.getNumberOfItemsInList(c,this._LIST_TYPE)+1}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownTitleSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/paragraph/MarkdownTitleSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,
f){return h(f,{SMART_FORMATTER_ID:"markdown_title",_TARGET_REGEXP:/^#(?!#)\s*\S/,constructor:function(f,e,d,c,b){this._internalDocument=f;this._document=e;this._cursor=d;this._actionService=c;this._richText=b;this._actionService.loadActions(this._getActions())},_getTypeOfParagraph:function(f){return this._TITLE_FORMAT}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownBold2SmartFormatter"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBold2SmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_bold2",_OPEN_CHAR:"__",_CLOSE_CHAR:"__",_TARGET_REGEXP:/\_\_(?!\s)[^\_]*[^\_\s]\_\_$/,
_TARGET_STYLE:["bold"],constructor:function(f,e,d){this._document=f;this._actionService=e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],function(h,f){return h(f,{_TARGET_STYLE:[],format:function(){var f=this.inherited(arguments);this._TARGET_STYLE.forEach(function(e){f.style[e]||this._actionService.executeAction("rtc_toggle_"+
e)},this);return f},_format:function(){var f=this.inherited(arguments);f.style=this._richText.getFormatAndStyle();var e=f.target;this._TARGET_STYLE.forEach(function(d){this._richText.applyStyleInLineColumn(d,!0,e.line,e.left,e.line,e.right)},this);return f}})})},"MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum"],
function(h,f,g,e){return h(g,{_OPEN_CHAR:void 0,_CLOSE_CHAR:void 0,_isTriggerPositionExpected:function(d){d=d.triggerPos.getNode();return!f.isCodeContainer(d)&&!f.isNonExecutableCodeContainer(d)},_isTriggerTypeExpected:function(d){return d.type===e.INSERT_TEXT&&d.text===this._CLOSE_CHAR.slice(-1)},_getTextRangeForFormatting:function(){var d=this.inherited(arguments);if(!d)return null;var c=this._OPEN_CHAR.length,b=this._CLOSE_CHAR.length;d.left+=c;d.right-=b;d.text=d.text.slice(c,-b);return d},_format:function(d){var c=
d.target;this._document.deleteText(c.line,c.right,c.line,c.right+this._CLOSE_CHAR.length);this._document.deleteText(c.line,c.left-this._OPEN_CHAR.length,c.line,c.left);c.left-=this._OPEN_CHAR.length;c.right-=this._OPEN_CHAR.length;return d}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownBoldSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document",
"rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownBoldSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_bold",_OPEN_CHAR:"**",_CLOSE_CHAR:"**",_TARGET_REGEXP:/\*\*(?!\s)[^\*]*[^\*\s]\*\*$/,_TARGET_STYLE:["bold"],constructor:function(f,e,d){this._document=f;this._actionService=
e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownHyperlinkLabelUrlSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.hyperlink"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkLabelUrlSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_hyperlink_labelurl",_OPEN_CHAR:"[",_CLOSE_CHAR:")",_TARGET_REGEXP:/(\[(.+)\]\()(.+?)(\))$/,constructor:function(f,e,d){this._document=f;this._actionService=e;this._hyperlink=d;this._actionService.loadActions(this._getActions())},_format:function(){var f=this.inherited(arguments).target,e=f.text.split("]("),d=e[0].trim(),e=e[1].trim();this._hyperlink.applyHyperlinkInLineColumn(e,
d,f.line,f.left,f.right);return f}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownHyperlinkUrlTagSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.hyperlink"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownHyperlinkUrlTagSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter","MW/rtc/plugins/smartformatting/SmartFormatterUtilities"],function(h,f,g){return h(f,{SMART_FORMATTER_ID:"markdown_hyperlink_urltag",_OPEN_CHAR:"\x3c",_CLOSE_CHAR:"\x3e",_TARGET_REGEXP:RegExp("\x3c"+g.URL_REGEXP_STRING+"\x3e$"),constructor:function(e,d,c){this._document=e;this._actionService=d;this._hyperlink=c;this._actionService.loadActions(this._getActions())},_format:function(){var e=this.inherited(arguments).target;this._hyperlink.applyHyperlinkInLineColumn(e.text,
e.text,e.line,e.left,e.right);return e}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownItalic2SmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalic2SmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_italic2",_OPEN_CHAR:"_",_CLOSE_CHAR:"_",_TARGET_REGEXP:/\_(?!\s)[^\_]*[^\_\s]\_$/,_TARGET_STYLE:["italic"],constructor:function(f,e,d){this._document=f;this._actionService=e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownItalicBold2SmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBold2SmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_italicbold2",
_OPEN_CHAR:"___",_CLOSE_CHAR:"___",_TARGET_REGEXP:/\_\_\_(?!\s)[^\_]*[^\_\s]\_\_\_$/,_TARGET_STYLE:["italic","bold"],constructor:function(f,e,d){this._document=f;this._actionService=e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownItalicBoldSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document",
"rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicBoldSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_italicbold",_OPEN_CHAR:"***",_CLOSE_CHAR:"***",_TARGET_REGEXP:/\*\*\*(?!\s)[^\*]*[^\*\s]\*\*\*$/,_TARGET_STYLE:["italic","bold"],constructor:function(f,
e,d){this._document=f;this._actionService=e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MarkdownItalicSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},
"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownItalicSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_italic",_OPEN_CHAR:"*",_CLOSE_CHAR:"*",_TARGET_REGEXP:/\*(?!\s)[^\*]*[^\*\s]\*$/,_TARGET_STYLE:["italic"],constructor:function(f,e,d){this._document=f;this._actionService=e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./MarkdownMonospaceSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/markdown/text/MarkdownMonospaceSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"markdown_monospace",
_OPEN_CHAR:"`",_CLOSE_CHAR:"`",_TARGET_REGEXP:/`(?!\s)[^`]*[^`\s]`$/,_TARGET_STYLE:["monospace"],constructor:function(f,e,d){this._document=f;this._actionService=e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MatlabMonospaceSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document",
"rtc.actionservice","rtc.richtext"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabMonospaceSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/MarkdownStyleSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"matlab_monospace",_OPEN_CHAR:"|",_CLOSE_CHAR:"|",_TARGET_REGEXP:/\|(?!\s)[^\|]*[^\|\s]\|$/,_TARGET_STYLE:["monospace"],constructor:function(f,e,d){this._document=f;this._actionService=
e;this._richText=d;this._actionService.loadActions(this._getActions())}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice rtc.richtext rtc.code.sections.sectionbreak".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakHeadingSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"matlab_sectionbreak_heading",_TARGET_REGEXP:/^%{2}\s+\S/,constructor:function(f,e,d,c,b,a){this._internalDocument=f;this._document=e;this._cursor=d;this._actionService=c;this._richText=
b;this._sectionBreak=a;this._actionService.loadActions(this._getActions())},_isEnabled:function(){var f=this.inherited(arguments);this._sectionBreak.canInsertSectionBreak()||(f=!1);return f},_format:function(f,e){this._sectionBreak.isLineAtStartOfSection(f)||(this._sectionBreak.insertSectionBreakAtLineColumn(f,1),f+=1);this._transformLineToParagraph(f,e)},_getTypeOfParagraph:function(f){return 1===f?this._TITLE_FORMAT:this._HEADING_FORMAT}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.document","rtc.cursor","rtc.actionservice","rtc.code.sections.sectionbreak"]}},createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/smartformatting/formatter/matlab/MatlabSectionBreakSeparatorSmartFormatter":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/smartformatting/abstract/ParagraphFormatSmartFormatter"],function(h,f){return h(f,{SMART_FORMATTER_ID:"matlab_sectionbreak_separator",_TARGET_REGEXP:/^(%{2}|-{3,}|\*{3,})\s*$/,constructor:function(f,e,d,c,b){this._internalDocument=f;this._document=e;this._cursor=d;this._actionService=c;this._sectionBreak=b;this._actionService.loadActions(this._getActions())},_isEnabled:function(){var f=this.inherited(arguments);this._sectionBreak.canInsertSectionBreak()||(f=!1);return f},_format:function(f,
e){var d=this._internalDocument.getLineNode(f-1),c=this._sectionBreak.isLineAtStartOfSection(f),b=f,a=1,h=b,l=d.getTextForPositioning().length+1;c||(b-=1,d=this._internalDocument.getLineNode(b-1),a=d.getTextForPositioning().length+1);this._document.deleteText(b,a,h,l);this._sectionBreak.insertSectionBreakAtLineColumn(f,1)}})})},"MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./SymbolTrademarkCopyrightSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/plugins/smartformatting/formatter/symbol/SymbolTrademarkCopyrightSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],function(h,f){var g={C:"\u00a9",R:"\u00ae",TM:"\u2122",SM:"\u2120"};return h(f,{SMART_FORMATTER_ID:"symbol_trademark_copyright",
_OPEN_CHAR:"(",_CLOSE_CHAR:")",_TARGET_REGEXP:/\((C|R|TM|SM)\)$/i,_APPLY_ONLY_STANDALONE_SEGMENT:!1,constructor:function(e,d){this._document=e;this._actionService=d;this._actionService.loadActions(this._getActions())},_format:function(){var e=this.inherited(arguments),d=e.target,c=d.text.toUpperCase();this._document.replaceText(g[c],d.line,d.left,d.line,d.right);return e}})})},"MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.hyperlink"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/HyperlinkSmartFormatter":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","MW/rtc/plugins/smartformatting/SmartFormatterUtilities","MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum",
"MW/rtc/plugins/smartformatting/abstract/InlineSmartFormatter"],function(h,f,g,e,d){return h(d,{SMART_FORMATTER_ID:"hyperlink",_TARGET_REGEXP:RegExp(g.URL_REGEXP_STRING+"$"),_TRIGGER_CHAR:" ",constructor:function(c,b,a){this._document=c;this._actionService=b;this._hyperlink=a;this._actionService.loadActions(this._getActions())},_isTriggerTypeExpected:function(c){return c.type===e.INSERT_TEXT&&c.text===this._TRIGGER_CHAR||c.type===e.INSERT_BREAK},_findAndRecordTarget:function(c){var b=this._getTextRangeForFormatting(c.triggerPos);
if(!b)return!1;c.target=b;return!0},_isTriggerPositionExpected:function(c){c=c.triggerPos;if(c.isAtLeftEdge()){var b=c.getNode().previousSibling();b&&(c=b.endPosition())}b=c.getNode();return!f.isCodeContainer(b)&&!f.isNonExecutableCodeContainer(b)&&!this._hyperlink.isAtHyperlink(c)},_format:function(c){var b=c.target;this._hyperlink.applyHyperlinkInLineColumn(b.text,b.text,b.line,b.left,b.right);return c}})})},"MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.actionservice","rtc.richtext.equationcontroller"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/smartformatting/formatter/MarkupEquationSmartFormatter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/plugins/smartformatting/abstract/OpenCloseInlineSmartFormatter"],
function(h,f,g,e){return h(e,{SMART_FORMATTER_ID:"markup_equation",_OPEN_CHAR:"$",_CLOSE_CHAR:"$",_TARGET_REGEXP:/\$(?=[^\s\$])(\S|\s(?!\$))*[^\\\s]\$$/,constructor:function(d,c,b){this._document=d;this._actionService=c;this._equation=b;this._actionService.loadActions(this._getActions());this._aspectHandles=[];this._initialize()},_convertEquationToMarkup:function(d){var c=d.getTeXString();if(!(0<=c.indexOf("\n"))){var b=this._document.createPosition(d),a=b.getLineColumn(),e=a.line,a=a.column,f=this._document.startBlockEdit();
this._document.insertText("$"+c+"$",e,a);this._equation.deleteEquation(d);this._document.endBlockEdit(f);this._document.deletePosition(b);return!0}},_format:function(){var d=this.inherited(arguments),c=d.target;this._equation.convertRangeToEquation(c.text,c.line,c.left,c.line,c.right);return d},enable:function(){this._isEnabled()||this._initialize();this.inherited(arguments)},disable:function(){this.inherited(arguments);this._aspectHandles.forEach(function(d){d.remove()});this._aspectHandles=[]},
_initialize:function(){this._aspectHandles.push(g.after(this._equation,"onDelete",f.hitch(this,"_convertEquationToMarkup"),!0))}})})},"MW/rtc/plugins/smartformatting/BackspaceUndoHandlerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/BackspaceUndoHandler"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.document","rtc.cursor","rtc.undoredo.controller"]}},createInstance:function(e,d,c){return new g(e,
d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/smartformatting/BackspaceUndoHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/model/DocumentConstants"],function(h,f,g,e){return h(null,{constructor:function(d,c,b){this._document=d;this._cursor=c;this._undoRedoController=b;this._aspectHandles=[];this._cachedCursorPos=null},start:function(){this.reset();this._cachedCursorPos=this._cursor.getLineColumn();this._aspectHandles.push(g.after(this._document,
"onChange",f.hitch(this,"reset")));this._aspectHandles.push(g.after(this._cursor,"onChange",f.hitch(this,"_resetOnCursorChange")));this._aspectHandles.push(g.around(this._document,"deleteTextAtCurrentPosition",f.hitch(this,"_oneTimeUndo")))},reset:function(){this._aspectHandles.forEach(function(d){d.remove()});this._aspectHandles=[];this._cachedCursorPos=null},_resetOnCursorChange:function(){var d=this._cursor.getLineColumn();(d.line!==this._cachedCursorPos.line||d.column!==this._cachedCursorPos.column)&&
this.reset()},_oneTimeUndo:function(d){return f.hitch(this,function(c){this.reset();return c===e.BACKWARD_DELETE?(this._undoRedoController.undo(),!0):d.apply(this._document,arguments)})},destroy:function(){this.reset()}})})},"MW/rtc/plugins/smartformatting/SmartFormattingProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/smartformatting/SmartFormatting"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.cursor rtc.actionservice rtc.smartformatter rtc.smartformatting.backspaceundohandler".split(" ")}},
createInstance:function(e,d,c,b,a,f){return new g(e,d,c,b,a,f)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/smartformatting/SmartFormatting":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/model/DocumentConstants MW/rtc/model/PositionUtilities MW/rtc/plugins/smartformatting/SmartFormattingTriggerData MW/rtc/plugins/smartformatting/SmartFormattingTriggerTypeEnum".split(" "),function(h,f,g,e,d,c,b){return h(null,{constructor:function(a,b,c,d,e,g){this._internalDocument=
a;this._document=b;this._cursor=c;this._actionService=d;this._smartFormatters=e;this._backspaceUndoHandler=g;this._aspectHandles=[];this.enable();this._actionService.loadActions([{id:"rtc_smartformatting_on",enabled:!0,callback:f.hitch(this,this.enable)},{id:"rtc_smartformatting_off",enabled:!0,callback:f.hitch(this,this.disable)}])},enable:function(){this._enabled||(this._initialize(),this._enabled=!0)},disable:function(){this._enabled&&(this.destroy(),this._backspaceUndoHandler.reset(),this._enabled=
!1,this._smartFormatters.forEach(function(a){a.disable()}))},getSmartFormattersIds:function(){return this._smartFormatters.map(function(a){return a.SMART_FORMATTER_ID})},_initialize:function(){if(!this._smartFormatters.length)return null;this._aspectHandles.push(g.after(this._internalDocument,"onDocumentChanged",f.hitch(this,"_documentChanged"),this));this._aspectHandles.push(g.after(this._document,"onDirectedDeletion",f.hitch(this,"_onDelete"),!0))},_documentChanged:function(a){if(this._enabled&&
(a&&1===a.length)&&(a=a[0]||{},!a.isUndoRedo)){var b;switch(a.type){case e.INSERT_BREAK_EVENT:b=this._handleInsertBreak(a);break;case e.INSERT_TEXT:b=this._handleInsertText(a)}b&&this._backspaceUndoHandler.start()}},_handleInsertBreak:function(a){var e=this._cursor.position;a=this._internalDocument.getPositionForLineColumn(a.startLine+1,a.column+1);if(0>=d.comparePositions(e,a))return null;e=c.createInsertBreakEventTriggerData(b.INSERT_BREAK,a,e);return this._findSmartFormatterAndApply(e)},_handleInsertText:function(a){var d=
this._cursor.position.getLineColumn(),e=d.line,d=d.column,f=a.position.getLineColumn(),g=f.column+a.length;if(!(e===f.line&&d===g))return null;a=c.createInsertTextEventTriggerData(b.INSERT_TEXT,a.position,this._cursor.position,a.text);return this._findSmartFormatterAndApply(a)},_findSmartFormatterAndApply:function(a){var b=this._getFirstApplicable(this._smartFormatters,a);if(!b)return null;this._enabled=!1;a=b.format(a);this._enabled=!0;return a},_getFirstApplicable:function(a,b){for(var c=0;c<a.length;c+=
1){var d=a[c];if(d.isApplicable(b))return d}return null},_onDelete:function(a,d){if(this._enabled&&!this._cursor.hasSelection()){var e=this._cursor.position,e=c.createDeleteTriggerData(b.DELETE,e,e,a,d);if(this._findSmartFormatterAndApply(e))return!0}},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/plugins/smartformatting/SmartFormattingTriggerData":function(){define(["dojo/_base/declare"],function(h){var f=h(null,{constructor:function(f,
e,d,c,b,a){this.type=f;this.triggerPos=e;this.cursorPos=d;this.text=c;this.direction=b;this.selection=a}});return{createInsertBreakEventTriggerData:function(g,e,d){return new f(g,e,d,null,null,null)},createInsertTextEventTriggerData:function(g,e,d,c){return new f(g,e,d,c,null,null)},createDeleteTriggerData:function(g,e,d,c,b){return new f(g,e,d,null,c,b)}}})},"MW/rtc/plugins/smarttab/SmartTabProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/smarttab/SmartTab","MW/rtc/core/provider/PluginProvider"],
function(h,f,g){return h(g,{requires:function(){return{createInstance:["rtc.actionservice","rtc.cursor","rtc.document"]}},createInstance:function(e,d,c){return new f(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/smarttab/SmartTab":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/model/DocumentUtilities"],function(h,f,g){return h(null,{constructor:function(e,d,c){this._actionService=e;this._cursor=d;this._document=c;e=[{id:"rtc_smart_tab",enabled:!0,key:"tab",
callback:f.hitch(this,"_doSmartTab")}];this._actionService.loadActions(e)},_doSmartTab:function(){if(this._cursor.hasSelection())return!1;var e=this._cursor.getPosition(),d=g.DEFAULT_TAB_STRING.length,e=g.getWhitespaceStringOfLength(d-e.column%d);this._document.insertTextAtCurrentPosition(e);return!0},destroy:function(){}})})},"MW/rtc/plugins/statusactionbar/StatusActionBarProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/DecoratableSectionMargin"],
function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.view rtc.internaldocument margin.statusactionbar.sectionsdecorator margin.statusactionbar.stalesectionsdecorator rtc.code.sections.model rtc.code.sections.view.containerutility margin.statusactionbar.evaluation rtc.code.matlabfiletype".split(" ")}},createInstance:function(e,d,c,b,a,f,h,m){return new g(e,d,[c,b],200,a,f,h,m)}})})},"MW/rtc/plugins/statusactionbar/DecoratableSectionMargin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on MW/rtc/margin/MarginPlugin MW/rtc/model/CodeUtilities mw-utils/Utils ./tooltip/StatusActionBarTooltip".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q){return h(k,{_SECTION_TARGET:"section",_ACTION_BAR_TARGET:"sectionActionBar",constructor:function(a,b,d,e,h,k,l,m){this._view=a;this._internalDocument=b;this._decorators=d;this._priority=e;this._sectionModel=h;this._sectionContainerUtil=k;this._evaluationManager=l;this._fileType=m;this._tooltipManager=new q(this._decorators);this.own(this._tooltipManager);this._gutterDomElement=c.create("div",{className:"statusActionBar"});this._mouseListeners=[];this._configureMargin();
this._enabled=!0;this.own(g.after(this._fileType,"onFileTypeChange",f.hitch(this,"_handleFileTypeChange"),!0))},getMarginElement:function(){return this._gutterDomElement},_configureMargin:function(){this._width=0;this._decorators.forEach(function(a){this.own(g.after(a,"onUpdate",f.hitch(this,"update")));this.own(g.after(a,"onUpdateClasses",f.hitch(this,"updateClasses")))},this);this._configureMouseEvents()},_clearMouseListeners:function(){this._mouseListeners.forEach(function(a){a.remove()});this._mouseListeners=
[]},_configureMouseEvents:function(){this._clearMouseListeners();this._mouseListeners=[a(this._gutterDomElement,"click",f.hitch(this,this._handleMouseClick)),a(this._gutterDomElement,"mousedown",f.hitch(this,this._handleMouseDown)),a(this._gutterDomElement,"mouseup",f.hitch(this,this._handleMouseUp))];this._mouseListeners.forEach(this.own)},update:function(){if(!this._enabled)return!1;var a=this._getSectionNumbers(),c=a.firstSectionNumber,a=a.lastSectionNumber;if(0>c)return!1;for(var d=this._gutterDomElement.cloneNode(!1),
e=0,f={};c<=a;c++){var g=this._createDecorationForSection(c);f[c]=g;this._updateClassesForSectionElement(c,g.children[0]);var h=this._sectionContainerUtil.getSectionDimensions(c);h&&(b.set(g,{top:h.top-e+"px",height:h.height+"px"}),e+=h.height,d.appendChild(g))}if(this._gutterDomElement.isEqualNode(d))return!1;this._tooltipManager.updateTooltips(f);this._gutterDomElement.parentElement.replaceChild(d,this._gutterDomElement);this._gutterDomElement=d;this._configureMouseEvents();this._updateWidth();
return!0},updateClasses:function(){if(!this._enabled)return!1;var a=this._getSectionNumbers(),b=a.firstSectionNumber,a=a.lastSectionNumber;if(0>b||!this._gutterDomElement.children.length)return!1;for(var c={},d=b;d<=a;d++){var e=this._gutterDomElement.children[d-b];void 0!==e&&(e=e.children[0],c[d]=e,this._updateClassesForSectionElement(d,e))}this._tooltipManager.updateTooltips(c);return!0},_getSectionNumbers:function(){var a=this._view.getDomTargetPosition(),b=a.scrollTop,c=this._sectionContainerUtil.getClosestSectionNumberByCoordinate({y:b});
this._sectionModel.getSection(c)||(c=-1);a=this._sectionContainerUtil.getClosestSectionNumberByCoordinate({y:b+a.clientHeight});this._sectionModel.getSection(a)||(a=-1);return{firstSectionNumber:c,lastSectionNumber:a}},_createDecorationForSection:function(a){var b=c.create("div",{className:"sectionActionBar hitTarget"});e.set(b,"data-testid","sectionBar_"+a);a=c.create("div");c.place(a,b,"last");return b},_updateClassesForSectionElement:function(a,b){var c=this._getClasses(a),e=b.className.split(" "),
f=m.differenceOfArrays(c,e),c=m.differenceOfArrays(e,c);f.forEach(function(a){d.add(b,a)});c.forEach(function(a){d.remove(b,a)})},_getClasses:function(a){var b=[],c;this._decorators.forEach(function(d){d.hasDecorationForSectionNumber(a)&&(c=d.getDecorationClassesForSection(a),b=b.concat(c))},this);return b},_getSectionNumberFromMousePosition:function(a){a=this._view.getCoordinateFromEvent(this._view.fixEvent(a));return this._sectionContainerUtil.getSectionNumberByCoordinate(a)},_handleMouseClick:function(a){if(this._shouldHandleMouseEvent(a)){var b=
this._getSectionNumberFromMousePosition(a);this._evaluationManager.handleMouseClick(a,b)}else a.stopPropagation()},_handleMouseDown:function(a){if(this._shouldHandleMouseEvent(a)){var b=this._getSectionNumberFromMousePosition(a);this._evaluationManager.handleMouseDown(a,b)}else a.stopPropagation()},_handleMouseUp:function(a){if(this._shouldHandleMouseEvent(a)){var b=this._getSectionNumberFromMousePosition(a);this._evaluationManager.handleMouseUp(a,b)}else a.stopPropagation()},_shouldHandleMouseEvent:function(a){var b=
d.contains(a.target,this._SECTION_TARGET);a=d.contains(a.target,this._ACTION_BAR_TARGET);return b||a},_updateWidth:function(){var a=0;this._decorators.forEach(function(b){b=b.getWidth();b>a&&(a=b)},this);this._width=a;this._gutterDomElement.style.width=(this._enabled?this._width:0)+"px"},priority:function(){return this._priority},getWidth:function(){return!this._enabled?1:this._width},_handleFileTypeChange:function(a){a=this._fileType.isScript()||this._fileType.isFunction();this._setEnabled(a)&&(this._updateWidth(),
this.onWidthChange())},_setEnabled:function(a){return this._enabled!==a?((this._enabled=a)?d.remove(this._gutterDomElement,"disabled"):d.add(this._gutterDomElement,"disabled"),!0):!1},onWidthChange:function(){},onClick:function(a){a.stopPropagation()}})})},"MW/rtc/plugins/statusactionbar/tooltip/StatusActionBarTooltip":function(){define(["dojo/_base/declare","dijit/Tooltip","MW/rtc/plugins/view/tooltip/TooltipUtilities"],function(h,f,g){return h([],{_TOOLTIP_SHOW_DELAY:0,_TOOLTIP_HIDE_DELAY:100,constructor:function(e){this._decorators=
e.sort(function(d,c){return c.tooltipPriority()-d.tooltipPriority()});this._tooltips=[]},destroy:function(){this._clearTooltips()},updateTooltips:function(e){var d={};Object.keys(e).forEach(function(c){c=parseInt(c);var b=!1;this._decorators.forEach(function(a){if(!b&&a.getTooltipMessage&&(a=a.getTooltipMessage(c)))b=!0,0>Object.keys(d).indexOf(a)&&(d[a]=[]),d[a].push(e[c])})},this);this._updateTooltips(d)},_updateTooltips:function(e){this._clearTooltips();Object.keys(e).forEach(function(d){this._tooltips.push(new f({label:g.createUnfocusableTooltipTextHTML(d),
connectId:e[d],showDelay:this._TOOLTIP_SHOW_DELAY,hideDelay:this._TOOLTIP_HIDE_DELAY}))},this)},_clearTooltips:function(){this._tooltips.forEach(function(e){e.destroy()});this._tooltips=[]}})})},"MW/rtc/plugins/statusactionbar/decorators/SectionsDecoratorProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/decorators/SectionsDecorator"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.code.sections.model","rtc.actionservice","rtc.code.matlabfiletype"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/statusactionbar/decorators/SectionsDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/has mw-event-utils/platformize ../tooltip/AbstractSectionTooltipDecorator ./AbstractSectionMarginDecorator dojo/i18n!l10n/nls/actions".split(" "),function(h,f,g,e,d,c,b,a){return h([b,c],{_WIDTH:8,_TOOLTIP_PRIORITY:2,_SECTION_CSS_CLASS:"section",
_CURRENT_CSS_CLASS:"current",_ONLY_SECTION_CSS_CLASS:"only",_FUNCTION_SECTION:"function",_RUN_SECTION_ACTION:"rtc_run_section",constructor:function(a,b,c){this._sectionModel=a;this._actionService=b;this._fileTypeService=c;this.own(g.after(this._sectionModel,"onModelUpdated",f.hitch(this,"onUpdate")));this.own(g.after(this._sectionModel,"currentSectionChanged",f.hitch(this,"onUpdate")))},hasDecorationForSectionNumber:function(a){return!0},getDecorationClassesForSection:function(a){var b=[this._SECTION_CSS_CLASS];
a===this._sectionModel.getCurrentSectionNumber()&&b.push(this._CURRENT_CSS_CLASS);(this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.FunctionFile||this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.ClassDefinitionFile||this._sectionModel.getSection(a).localFunctions)&&b.push(this._FUNCTION_SECTION);1===this._sectionModel.getSections().length&&b.push(this._ONLY_SECTION_CSS_CLASS);return b},getTooltipMessage:function(b){var c=this._actionService.getAction(this._RUN_SECTION_ACTION);
if(!c)return"";var c=a.runCurrentSection+" (\x3cb\x3e"+c.shortcut+"\x3c/b\x3e)",d=this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.FunctionFile||this._fileTypeService.getFileType()===this._fileTypeService.FILE_TYPE.ClassDefinitionFile,e=!!this._sectionModel.getSection(b).localFunctions;return b===this._sectionModel.getCurrentSectionNumber()&&!e&&!d?c:""}})})},"MW/rtc/plugins/statusactionbar/tooltip/AbstractSectionTooltipDecorator":function(){define(["dojo/_base/declare"],function(h){return h(null,
{_TOOLTIP_PRIORITY:0,_TOOLTIP_MESSAGE:"",tooltipPriority:function(){return this._TOOLTIP_PRIORITY},getTooltipMessage:function(f){return this._TOOLTIP_MESSAGE}})})},"MW/rtc/plugins/statusactionbar/decorators/AbstractSectionMarginDecorator":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractPlugin"],function(h,f){return h(f,{_WIDTH:0,hasDecorationForSectionNumber:function(f){throw Error("Unimplemented API: MW.rtc.margin.AbstractSectionMarginDecorator.hasDecorationForSectionNumber");},
getDecorationClassesForSection:function(f){throw Error("Unimplemented API: MW.rtc.margin.AbstractSectionMarginDecorator.getDecorationClassesForSection");},handleMouseDown:function(f,e){f.stopPropagation()},handleMouseUp:function(f,e){f.stopPropagation()},handleMouseClick:function(f,e){f.stopPropagation()},onUpdate:function(){},onUpdateClasses:function(){},getWidth:function(){return this._WIDTH}})})},"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecoratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecorator"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.code.sections.stale.model"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/statusactionbar/decorators/StaleSectionsDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect ../tooltip/AbstractSectionTooltipDecorator ./AbstractSectionMarginDecorator dojo/i18n!l10n/nls/actions".split(" "),
function(h,f,g,e,d,c){return h([d,e],{_WIDTH:8,_TOOLTIP_PRIORITY:1,_TOOLTIP_MESSAGE:c.runStaleSection,_STALE_CSS_CLASS:"stale",constructor:function(b){this._staleSectionModel=b;this.own(g.after(this._staleSectionModel,"onModelUpdated",f.hitch(this,"onUpdateClasses")))},hasDecorationForSectionNumber:function(b){return this._staleSectionModel.isSectionStale(b)},getDecorationClassesForSection:function(){return[this._STALE_CSS_CLASS]},getTooltipMessage:function(b){return this._staleSectionModel.isSectionStale(b)?
this.inherited(arguments):""}})})},"MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluationProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluation"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.actionservice","rtc.cursor","rtc.code.sections.model","rtc.code.sections.stale.model","rtc.code.matlabfiletype"]}},
createInstance:function(e,d,c,b,a){return new g(e,d,c,b,a)}})})},"MW/rtc/plugins/statusactionbar/evaluation/StatusActionBarEvaluation":function(){define(["dojo/_base/declare","dojo/mouse"],function(h,f){return h(null,{constructor:function(f,e,d,c,b){this._actionService=f;this._cursor=e;this._sectionModel=d;this._staleSectionModel=c;this._fileTypeService=b},handleMouseClick:function(g,e){if(f.isLeft(g)){var d=this._sectionModel.getCurrentSectionNumber()===e,c=this._staleSectionModel.isSectionStale(e),
b=!!this._sectionModel.getSection(e).localFunctions,a=this._fileTypeService.isFunction()||this._fileTypeService.isClass();d||this._cursor.setCursorToEvent(g);(d||c)&&(!b&&!a)&&this._actionService.executeAction("rtc_run_section")}},handleMouseDown:function(f,e){f.stopPropagation()},handleMouseUp:function(f,e){f.stopPropagation()}})})},"MW/rtc/plugins/sectionbreak/SectionBreakProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/sectionbreak/SectionBreak"],
function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.internaldocument rtc.document rtc.view rtc.cursor rtc.actionservice rtc.code.sections.model rtc.code.sections.contributor.sectionbreak rtc.code.matlabfiletype".split(" ")}},createInstance:function(e,d,c,b,a,f,h,m){return new g(e,d,c,b,a,f,m)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/sectionbreak/SectionBreak":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!l10n/nls/actions mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/CodeUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/events/DeletionEvent MW/rtc/model/events/NumberOfLinesChangedEvent MW/rtc/plugins/language/matlab/functions/FunctionAttributeConstants ./model/SectionBreakNode".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n){return h(c,{ACTION_ID:"rtc_insert_sectionbreak",_UNDOREDO_BLOCK_TYPE:"RemoveSectionBreaks",_BLOCK_TYPES_FOR_MERGE_AND_ADVANCE:["AutoIndent"],constructor:function(a,b,c,d,h,k,l){this._internalDocument=a;this._document=b;this._cursor=d;this._actionService=h;this._sectionModel=k;this._fileTypeService=l;this._actionService.loadActions([{id:this.ACTION_ID,key:"ctrl_alt_enter",platformKey:{mac:"meta_alt_enter"},enabled:!0,contextMenuGroup:"CodeSections",description:e.insertSectionLabel,
callback:f.hitch(this,"_insertSectionBreakAtCursor")}]);this.own(g.after(this._document,"onDirectedDeletion",f.hitch(this,"_onDoDelete"),!0));this.own(g.after(this._cursor,"onChange",f.hitch(this,"_updateActions")));this.own(g.after(this._sectionModel,"currentSectionChanged",f.hitch(this,"_updateActions")));this.own(g.after(this._sectionModel,"onAttributesUpdated",f.hitch(this,"_updateActions")));this.own(g.after(this._fileTypeService,"onFileTypeChange",f.hitch(this,"_handleFileTypeChange"),!0))},
_updateActions:function(){var a=this.canInsertSectionBreak();this._actionService.updateAction("rtc_insert_sectionbreak",{enabled:a})},canInsertSectionBreak:function(){if(this._internalDocument.isReadOnly()||this._cursor.isCursorReadOnly())return!1;var a=!0,b=this._fileTypeService.isFunction()||this._fileTypeService.isClass();if(this._atLocalFunction()||b)a=!1;return a},_atLocalFunction:function(){var a=this._sectionModel.getCurrentSection(),b=this._getFirstLocalFunctionFromSection(a);if(!b)return!1;
a=this._cursor.getLineColumn().line;b=b.position.getLineColumn().line;return a>=b},_getFirstLocalFunctionFromSection:function(a){return a&&a[q.LOCAL_FUNCTION_ATTRIBUTE]&&0<a[q.LOCAL_FUNCTION_ATTRIBUTE].length?a[q.LOCAL_FUNCTION_ATTRIBUTE][0]:null},_canDeleteSectionBreak:function(a){if(this._internalDocument.isReadOnly()||this._cursor.isCursorReadOnly())return!1;var b=!0;a=1===a?this._sectionModel.getNextSection():this._sectionModel.getCurrentSection();this._canMergeWithPreviousSection(a)||(b=!1);
return b},_canMergeWithPreviousSection:function(a){if(!this._getFirstLocalFunctionFromSection(a))return!0;a=this._sectionModel.getSections().indexOf(a)-1;a=this._sectionModel.getSection(a).end.getLineColumn().line;a=this._internalDocument.getLineNode(a-1);return!b.isCodeContainer(a)},_onDoDelete:function(a,b){if(!this._cursor.hasSelection()&&!b.isLocal&&k.isAtEndOfContainer(b.startPosition,b.startNode.rootContainer())&&k.isAtStartOfContainer(b.endPosition,b.endNode.rootContainer())){var c=b.startNode.rootContainer().nextSibling();
if(this._isContainerSectionBreak(c)){if(!this._canDeleteSectionBreak(a))return this._cursor.movePosition(1===a?this._cursor.RIGHT:this._cursor.LEFT),!0;this._deleteSectionBreak(c,a);this._cursor.onUpdate(!1,!0);return!0}}},deleteSectionBreakInBetween:function(a,b){d.assert(a<=b,"Start line should be \x3c\x3d end line!");this._document.startEdit();for(var c=b;c>=a;c-=1){var e=this._internalDocument.getLineNode(c-1);this._isContainerSectionBreak(e)&&this._deleteSectionBreak(e)}this._document.endEdit();
this._cursor.onUpdate()},hasSectionBreakInBetween:function(a,b){d.assert(a<=b,"Start line should be \x3c\x3d end line!");for(var c=a;c<=b;c+=1){var e=this._internalDocument.getLineNode(c-1);if(this._isContainerSectionBreak(e))return!0}return!1},_insertAtPosition:function(b){var c=this._document.startEdit(),d=new n;b=this._internalDocument.insertAtPosition(d,b);d=a.lineRangeFromEvents(b.events);c.appendUndoEvents([m.create(d.startLine,d.endLine)]);c.appendRedoEvents([m.create(d.startLine,d.endLine)]);
this._document.endEdit();return b},_deleteSectionBreak:function(a,b){var c=this._getLineRangeForSectionBreakDeletion(a,b),d=this._document.startEdit();this._internalDocument.deleteNode(a,{node:this._cursor.getNode(),offset:this._cursor.getOffset()});c=[l.create(c.startLine,c.endLine,0)];d.appendUndoEvents(c);d.appendRedoEvents(c);this._document.endEdit();this._internalDocument.emitDocumentEvents(c)},_getLineRangeForSectionBreakDeletion:function(a,b){var c=this._internalDocument.getLineNumber(a),d=
c;-1===b?c+=1:d-=1;return{startLine:d,endLine:c}},_insertSectionBreakForSelection:function(a){var b=this._document.createPosition(a.startPosition.getNode(),a.startPosition.getOffset()),c=this._document.createPosition(a.endPosition.getNode(),a.endPosition.getOffset()),d=[];this._cursor.collapseSelection();var e=this._insertAtPosition(b),d=d.concat(e.events);if(!a.fileEndSelected||!a.startPosition.isEqualTo(a.endPosition))e=this._insertAtPosition(c),d=d.concat(e.events);this._cursor.setPosition(e.insertedRange.getEndPosition());
this._document.deletePosition(b);this._document.deletePosition(c);return d},_insertSectionBreakAtCursor:function(){if(this.canInsertSectionBreak()){this._internalDocument.onPreDocumentChanged({});this._document.startEdit();var a;if(this._cursor.hasSelection())a=this._insertSectionBreakForSelection(this._cursor.selectionInfo());else{var b;b=this._shouldMoveCursorAfterBreak();var c=this._insertAtPosition(this._cursor.position);a=c.events;b=b?c.insertedRange.getEndPosition():c.insertedRange.getStartPosition();
this._cursor.setPosition(b)}this._document.endEdit();this._emitInsertEvents(a)}},_shouldMoveCursorAfterBreak:function(){var a=this._cursor.position,b=a.getNode().textContainer(),c=a.getNode().rootContainer(),d=b.previousSibling()||c.previousSibling(),b=b.nextSibling()||c.nextSibling();return k.isAtStartOfContainer(a)&&d&&!d.isInstanceOf(n)||k.isAtEndOfContainer(a)&&!b||k.isAtEndOfContainer(a)&&b.isInstanceOf(n)||!k.isAtStartOfContainer(a)&&!k.isAtEndOfContainer(a)?!0:!1},insertSectionBreakAtLineColumn:function(a,
b){this._internalDocument.onPreDocumentChanged({});var c=this._internalDocument.getPositionForLineColumn(a,b),c=this._insertAtPosition(c);this._emitInsertEvents(c.events)},_emitInsertEvents:function(a){this._internalDocument.emitDocumentEvents(a);this._cursor.onUpdate(!1,!0)},isLineSectionBreak:function(a){a=this._internalDocument.getLineNode(a-1);return this._isContainerSectionBreak(a)},_isContainerSectionBreak:function(a){return a instanceof n},isLineAtStartOfSection:function(a){a=this._internalDocument.getLineNode(a-
1);return this._isAtStartOfSection(a)},_isAtStartOfSection:function(a){a=a.previousSibling();return!a||this._isContainerSectionBreak(a)},_handleFileTypeChange:function(){this._updateActions()}})})},"MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SectionBreakNodeContentConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/sectionbreak/model/SectionBreakNodeContentConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/contentconverter/base/InnerNodeContentConverter","./SectionBreakNode"],function(h,f,g){return h(f,{getApplicableNodeClass:function(){return g}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SectionBreakCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/plugins/sectionbreak/model/SectionBreakNode","MW/rtc/view/coordinateconverter/base/AbstractCoordinateConverter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f},getPositionFromCoordinate:function(){return null},getCoordinateFromPosition:function(){return null},getDomNode:function(){return null},
getClosestRect:function(){return null}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SectionBreakLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/sectionbreak/view/SectionBreakLayouter":function(){define(["dojo/_base/declare","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter",
"../model/SectionBreakNode"],function(h,f,g){return h(f,{constructor:function(){},getApplicableNodeClass:function(){return g},layout:function(e,d){return e.layoutInto(d,"div",{"class":"sectionBreak"})}})})},"MW/rtc/plugins/tabcompletion/CompletionHandlerProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities","./CompletionHandler","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{isApplicable:function(c){return g.isMatlabCodeFileOrBuffer(c)},
requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.focusservice","rtc.document","rtc.cursor","rtc.divcaret"]}},createInstance:function(c,b,a,d){return new e(c,b,a,d)}})})},"MW/rtc/plugins/tabcompletion/CompletionHandler":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","MW/rtc/model/DocumentConstants","MW/rtc/plugins/completionpopup/CompletionPopup"],function(h,f,g,e,d){return h(null,{constructor:function(c,b,a,e){this._focusService=c;this._document=
b;this._cursor=a;this._startOffsetColumn=0;this._popup=new d(e.getBox(),function(){},function(){c.setFocus()},f.hitch(this,"_charKeyTypedCallback"),f.hitch(this,"_backspaceTypedCallback"))},handleCompletions:function(c,b){this._startOffsetColumn=0;c.partialCompletion&&this._completionCallback(c.partialCompletion);var a=c.finalCompletions;if(!a||0===a.length)this._popup.showStatusPopup(this._popup.STATUS_ENUM.STATUS_NO_MATCHES);else if(a.length>b)this._popup.showStatusPopup(this._popup.STATUS_ENUM.STATUS_TOO_MANY_MATCHES);
else if(1===a.length)this._completionCallback(a[0].completion);else{var d=a[0].completion.offset,e=this._cursor.getLineColumn(),d=this._document.getLineText(e.line).substring(e.column-d-1,e.column-1);this._popup.showPopup(a,f.hitch(this,"_preCompletionCallback"),d)}},_preCompletionCallback:function(c){this._completionCallback(c.completion)},_completionCallback:function(c){var b=this._cursor.getLineColumn();b.column=b.column-c.offset-this._startOffsetColumn;var a=this._cursor.getLineColumn();this._document.replaceText(c.completionString,
b.line,b.column,a.line,a.column);this._focusService.setFocus();this._popup.removePopup()},_charKeyTypedCallback:function(c){this._document.insertTextAtCurrentPosition(c);this._startOffsetColumn+=1},_backspaceTypedCallback:function(){this._document.deleteTextAtCurrentPosition(e.BACKWARD_DELETE);this._startOffsetColumn-=1;0>this._startOffsetColumn&&this._popup.removePopup()}})})},"MW/rtc/plugins/tabcompletion/TabCompletionProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/language/matlab/utilities/MatlabPluginUtilities",
"./TabCompletion","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e){return h(e,{isApplicable:function(d){return f.isMatlabCodeFileOrBuffer(d)},requires:function(){return{isApplicable:["rtc.backingstore"],createInstance:["rtc.document","rtc.cursor","rtc.code.codingui.backendservice","matlab.tabcompletion.completionhandler","rtc.actionservice"]}},createInstance:function(d,c,b,a,e){return new g(d,c,b,a,e)}})})},"MW/rtc/plugins/tabcompletion/TabCompletion":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/model/CodeUtilities","mw-log/Log","MW/rtc/RichTextComponentFeatureEnum"],function(h,f,g,e,d){return h(null,{WORD_REGEXP:/[a-zA-Z0-9(/\\_"'-]/,_NEXT_CHARAT_REGEXP:/[a-zA-Z0-9_'"]/,_featureID:"matlab.code.tabcompletion",constructor:function(c,b,a,d,e){this._tabCompletionDataService=a;this._completionHandler=d;this._document=c;this._cursor=b;this._init(e)},_init:function(c){var b=[{id:d.TAB_COMPLETION.TAB_COMPLETE_ACTION,enabled:!0,key:"tab",callback:f.hitch(this,this._popupIfValidLocation)},
{id:"rtc_tab_completion_escape",enabled:!0,key:"escape",callback:f.hitch(this,this._cancelTabCompletionRequest)}];c.loadActions(b)},_cancelTabCompletionRequest:function(){this._tabCompletionDataService.isBusy()&&this._tabCompletionDataService.cancelRequest();return!1},_popupIfValidLocation:function(){if(this._shouldShowPopup()){var c=this._cursor.getLineColumn();this._tabCompletionDataService.requestMetaData(this._featureID,f.hitch(this._completionHandler,"handleCompletions"),c);e.warn("Sending tab completion request to MATLAB.");
return!0}return!1},_shouldShowPopup:function(){if(this._cursor.hasSelection()||this._cursor.isCursorReadOnly()||!g.isCodeContainer(this._cursor.getNode()))return!1;var c=this._cursor.getLineColumn(),b=this._document.getLineText(c.line);return this._isDotOrValidPartialString(b,c.column-1)},_isDotOrValidPartialString:function(c,b){e.assert(0<=b&&b<=c.length,"position "+b+" is out of bounds of text (length "+c.length+")");if(b<c.length&&-1!==c.charAt(b).search(this._NEXT_CHARAT_REGEXP))return!1;if(0!==
b&&"."===c.substring(b-1,b))return 2<b&&"..."===c.substring(b-3,b)?!1:!0;for(var a=b;0<=a;a-=1){var d=c.charAt(a-1);if(a<b)return!0;if(-1===d.search(this.WORD_REGEXP))break}return!1}})})},"MW/rtc/plugins/templates/TemplateServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/templates/TemplateService"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.document","rtc.internaldocument",
"rtc.id"]}},createInstance:function(e,d,c){return new g(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/templates/TemplateService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","mw-messageservice/MessageService"],function(h,f,g,e){return h(null,{_APPLY_TAMPLATE_NAMESPLACE:"/templateService/applyTemplate/",TEMPLATES:{liveFunction:function(d){return{className:"RootNode",children:[{className:"RichTextParagraphNode",align:"left",children:[{className:"RichTextNode",
text:"Brief summary of this function."}]},{className:"RichTextParagraphNode",align:"left",children:[{className:"RichTextNode",text:"Detailed explanation of this function."}]},{className:"LineNode",children:[{className:"PlainTextNode",text:"function z \x3d "+d+"(x, y)"}]},{className:"LineNode",children:[{className:"PlainTextNode",text:"    z \x3d x + y;"}]},{className:"LineNode",children:[{className:"PlainTextNode",text:"end"}]}]}}},constructor:function(d,c,b){this._document=d;this._internalDocument=
c;this._editorId=b;e.subscribe(this._APPLY_TAMPLATE_NAMESPLACE+this._editorId,"_handleApplyTemplate",this)},_handleApplyTemplate:function(d){this.applyTemplate(d.data.type,d.data.pendingName)},applyTemplate:function(d,c){var b=this.TEMPLATES[d];b&&this._internalDocument.deserialize(b(c))},destroy:function(){e.unsubscribe(this._APPLY_TAMPLATE_NAMESPLACE+this._editorId,"_handleApplyTemplate",this)}})})},"MW/rtc/plugins/text/parenmatch/ParenMatchingPluginProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/language/matlab/parenmatch/ParenMatchingPlugin","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view","rtc.cursor","rtc.cursor.view","matlab.tokens"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)}})})},"MW/rtc/plugins/language/matlab/parenmatch/ParenMatchingPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/NodeUtilities MW/rtc/view/ViewUtilities ./model/Matcher ./view/ParenMatchView".split(" "),
function(h,f,g,e,d,c,b,a){return h(e,{constructor:function(c,d,e,h,n){this._internalDocument=c;this._view=d;this._cursor=e;this._cursorView=h;this._matlabTokens=n;this.own(g.after(h,"onUpdate",f.hitch(this,"_handleUpdate")));this.own(g.after(n,"onUpdate",f.hitch(this,"_handleUpdate"),!0));this._matchView=new a(d);this._matcher=new b(c,n)},_handleUpdate:function(){var a=this._cursor,b="",c=a.getPosition();a.hasSelection()?(b=a.charAtCursor(),this._matcher.isOpenOrClose(b)?a.isReversed()||(c.column-=
1):b=""):(b=a.charAtCursor(-1),this._matcher.isClose(b)?c.column-=1:(b=a.charAtCursor(),this._matcher.isOpen(b)||(b="")));this._matchView.hide();b&&this._scanAndShowAnyMatch(b,c)},_scanAndShowAnyMatch:function(a,b){this._matcher.scanLeftOrRight(a,b);this._showMatch(this._matcher.Left,this._matcher.Right)},_showMatch:function(a,b){var c=this._getViewInformation(a),d=this._getViewInformation(b);(!a||!b||c&&d)&&this._matchView.show(c,d)},_getViewInformation:function(a){if(!a)return null;var b=this._getCoordinateForParen(a);
b&&a.mismatch&&(b.mismatch=!0);return b},_getCoordinateForParen:function(a){a=this._getPositionForParen(a.line,a.column);var b=a.getNode();return c.hasViewOnlyText(b)?null:this._view.getCoordinateForPosition(a)},_getPositionForParen:function(a,b){var c=this._internalDocument.getPositionForLineColumn(a+1,b+1);if(c.isAtRightEdge()){var d=c.getNode(),e=d.nextNode();if(d!==d.textContainer().endNode()&&e.isTextNode())return e.startPosition()}return c}})})},"MW/rtc/plugins/language/matlab/parenmatch/model/Matcher":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(f,g){this.Right=this.Left=null;this._internalDocument=f;this._matlabTokens=g;this._OPEN=["(","[","{"];this._CLOSE=[")","]","}"];this._PARENREG="(\\(|\\[|{)|(\\)|\\]|})"},scanLeftOrRight:function(f,g){var e=this._OPEN.indexOf(f),d=0;this.Right=this.Left=null;0<=e?(d=1,this.Left=g,this.Right=null):(e=this._CLOSE.indexOf(f),0<=e&&(d=-1,this.Right=g,this.Left=null));0!==d&&this._scan(g,d,e)},_scan:function(f,g,e){f=this._scanDocument(f,g,e);if(0<g){if(f&&
(this.Right=f),this.Left&&(!f||f.mismatch))this.Left.mismatch=!0}else if(f&&(this.Left=f),this.Right&&(!f||f.mismatch))this.Right.mismatch=!0},_scanDocument:function(f,g,e){var d=f.line;f=f.column;var c="",b=(g=1===g)?-1:0,a=!1,h=this._internalDocument.getLineNode(d);if(!h||this._isInStringOrComment(d,f))return this.Right=this.Left=null;for(var l=h.getTextForPositioning(),m=this._internalDocument.containerType(h);;){var c=g?l.substring(f):l.substring(0,f),q=RegExp(this._PARENREG,"g"),n=q.exec(c);
if(!g&&n)for(var p=n;p;)(p=q.exec(c))&&(n=p);if(n){if(!this._isInStringOrComment(d,g?f+n.index:n.index))if(n[1]){if(!g&&0===b)return e!==this._OPEN.indexOf(n[0])&&(a=!0),{line:d,column:n.index,mismatch:a};b+=1}else{if(g&&0===b)return e!==this._CLOSE.indexOf(n[0])&&(a=!0),{line:d,column:f+n.index,mismatch:a};b-=1}f=g?f+n.index+n[0].length:n.index}if(g){if(!n||f>=l.length)d+=1,f=0}else if(!n||0===f)d-=1,f=-1;if(0>=f){for(;;){h=this._internalDocument.getLineNode(d);if(!h)return null;if(m===this._internalDocument.containerType(h))break;
d+=g?1:-1}l=h.getTextForPositioning();0>f&&(f=l.length)}}return null},isOpenOrClose:function(f){return this.isOpen(f)||this.isClose(f)},isOpen:function(f){return 0<=this._OPEN.indexOf(f)},isClose:function(f){return 0<=this._CLOSE.indexOf(f)},_isInStringOrComment:function(f,g){return this._matlabTokens.isInString(f,g)||this._matlabTokens.isInComment(f,g)}})})},"MW/rtc/plugins/language/matlab/parenmatch/view/ParenMatchView":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class",
"dojo/dom-style"],function(h,f,g,e){return h(null,{constructor:function(d){this._layer=f.create("div",{"class":"parenMatchLayer"});d.addLayer(this._layer);this._parenMatchLeft=f.create("div",{"class":"parenMatch"},this._layer);this._parenMatchRight=f.create("div",{"class":"parenMatch"},this._layer);this._hideTimer=null},show:function(d,c){this._clearHideTimer();d?this._showOne(this._parenMatchLeft,{left:d.x,top:d.y+d.height-2,width:d.width},d):this._hideOne(this._parenMatchLeft);c?this._showOne(this._parenMatchRight,
{left:c.x,top:c.y+c.height-2,width:c.width},c):this._hideOne(this._parenMatchRight);this._startHideTimer()},hide:function(){this._clearHideTimer();this._hideOne(this._parenMatchLeft);g.remove(this._parenMatchLeft,"parenMismatch");this._hideOne(this._parenMatchRight);g.remove(this._parenMatchRight,"parenMismatch")},_showOne:function(d,c,b){e.set(d,{display:"block",top:c.top+"px",left:c.left+"px",width:c.width+"px"});b.mismatch&&g.add(d,"parenMismatch")},_hideOne:function(d){e.set(d,{display:"none"})},
_clearHideTimer:function(){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null)},_startHideTimer:function(){var d=this;this._hideTimer=setTimeout(function(){d.hide()},1E3)}})})},"MW/rtc/plugins/text/syntaxhighlighter/SyntaxHighlighterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/text/syntaxhighlighter/SyntaxHighlighter"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.document","rtc.internaldocument","rtc.view.decoration","matlab.tokens"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/textnodeservice/TextNodeServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/textnodeservice/TextNodeService"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},
"MW/rtc/plugins/textnodeservice/TextNodeService":function(){define("dojo/_base/declare mw-log/Log MW/rtc/nodes/inner/LineNode MW/rtc/nodes/leaf/PlainTextNode MW/rtc/plugins/richtext/nodes/inner/RichTextParagraphNode MW/rtc/plugins/richtext/nodes/leaf/RichTextNode".split(" "),function(h,f,g,e,d,c){return h(null,{constructor:function(){},destroy:function(){},createTextNodeForPosition:function(b,a){var c=a.getNode(),d=c.textContainer(),d=this.createTextNodeForContainer(b,d);d.setStyleAttributes(c.getStyleAttributes());
return d},createTextNodeForContainer:function(b,a){if(a.isInstanceOf(g))return new e({text:b});if(a.isInstanceOf(d))return new c({text:b});f.error("MW.rtc.plugins.TextNodeService.createTextNodeForContainer: Unexpected container type")}})})},"MW/rtc/plugins/tooltip/TooltipPluginContainerProvider":function(){define(["dojo/_base/declare","MW/rtc/plugins/tooltip/TooltipPluginContainer","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],
createInstance:["rtc.internaldocument","rtc.view","hoverabletooltip","rtc.view.visibility","rtc.tooltipservice"]}},createInstance:function(e,d,c,b,a){return new f(e,d,c,b,a)}})})},"MW/rtc/plugins/tooltip/TooltipPluginContainer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-style dojo/aspect dojo/query MW/rtc/abstract/AbstractPlugin MW/rtc/plugins/view/tooltip/Tooltip MW/rtc/model/CodeUtilities mw-log/Log".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h(b,{_HIDE_TOOLTIP_TIMEOUT:800,
constructor:function(a,b,c,e,h){this._internalDocument=a;this._view=b;this._tooltipPlugins=c.sort(function(a,b){return b.priority()-a.priority()});this._tooltipService=h;for(a=0;a<this._tooltipPlugins.length;a++)if("function"==typeof this._tooltipPlugins[a].onTooltipClose){this.own(f.connect(this._tooltipPlugins[a],"onTooltipClose",this,"cleanup"));break}this.own(d.after(e,"onHide",g.hitch(this,"cleanup")));this._isMouseInTooltip=this._isMouseOutsideRTC=!1;this._initializeTooltip();this._currentTargetNode=
null},_initializeTooltip:function(){this._tooltip=new a(this._view,this._internalDocument,{timeout:500});this.own(this._tooltip);this.own(d.after(this._tooltip,"onTooltip",g.hitch(this,"_handleOnTooltip"),!0));this.own(d.after(this._tooltip,"hideTooltip",g.hitch(this,"_handleHideTooltip"),!0))},_handleOnTooltip:function(a,b){if(this._isActiveWindow()){var c=this.getPositionFromEvent(b);null!==c&&(this._currentTargetNode=a,this._displayTooltip(a,b,c,0))}},_handleHideTooltip:function(){this._currentTargetNode=
null;this._tooltipServiceHandle&&(this._tooltipServiceHandle.remove(),this._tooltipServiceHandle=null)},_isActiveWindow:function(){return!!c(".layeredNode").every(function(a){return"none"===e.get(a,"display")})},getPositionFromEvent:function(a){a=this._view.fixEvent(a);a=this._view.getCoordinateFromEvent(a);return null===a?null:this._view.getPositionFromCoordinate(a)},_displayTooltip:function(a,b,c,d){if(!this._isMouseOutsideRTC)if(d>=this._tooltipPlugins.length)this.cleanup();else if(a&&(a.box&&
a.box.contains(b.target))&&this._isParentElementValid(a)){var e=this._view.getDomtarget();e.onmouseout=g.hitch(this,"_handleMouseLeftWindow");e.onmouseover=g.hitch(this,"_handleMouseEnteredWindow");var e=this._tooltipPlugins[d],f=g.hitch(this,function(e,f){var h=b.target;if(this._currentTargetNode&&this._currentTargetNode===a&&this.isStillHoveringOverTarget(h))if(e){var k={domNode:h};f&&(b=this._view.fixEvent(b),k.xOffset=b.layerX-h.offsetLeft+this._view.getScrollLeft());e.onmouseenter=g.hitch(this,
"_setIsInTooltip",!0);e.onmouseleave=g.hitch(this,"_setIsInTooltip",!1);this._tooltipServiceHandle=this._tooltipService.requestTooltip(g.hitch(this._tooltip,"showTooltip",e,k),g.hitch(this._tooltip,"hideTooltip"),this._tooltipService.PRIORITY.HOVER)}else this._displayTooltip(a,b,c,d+1)});try{e.getTooltipContent(a,c,f)}catch(h){l.assert(!1,"Resolving Tooltip failed: "+h)}}},_handleMouseLeftWindow:function(){this._isMouseOutsideRTC=!0;this._timer=setTimeout(g.hitch(this,"_hideTooltipIfMouseStillOutsideRTC"),
this._HIDE_TOOLTIP_TIMEOUT)},_hideTooltipIfMouseStillOutsideRTC:function(){this._isMouseInTooltip||this.cleanup()},_handleMouseEnteredWindow:function(){this._isMouseOutsideRTC=!1;this._timer&&(clearTimeout(this._timer),this._timer=null);this.cleanup()},_setIsInTooltip:function(a){this._isMouseInTooltip=a},isStillHoveringOverTarget:function(a){return!0},_isParentElementValid:function(a){return k.isCodeContainer(a.parent)},cleanup:function(){this._tooltip&&this._tooltip.hideTooltip();this._isMouseInTooltip=
!1}})})},"MW/rtc/plugins/typocorrection/TypoSuggestionFeatureProvider":function(){define(["dojo/_base/declare","./TypoSuggestionFeature","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.document rtc.embeddedoutputs.model rtc.typocorrection.typocorrectionservice rtc.id rtc.code.sections.model rtc.typocorrection.typocorrectionhandlerfactory".split(" ")}},createInstance:function(e,d,c,b,a,g){return new f(e,
d,c,b,a,g)}})})},"MW/rtc/plugins/typocorrection/TypoSuggestionFeature":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/query MW/rtc/abstract/AbstractPlugin MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/plugins/embeddedoutputs/outputhandlers/error/ErrorOutputProperties".split(" "),function(h,f,g,e,d,c,b,a){return h(c,{constructor:function(a,c,d,e,h,p){this._document=a;this._embeddedOutputsModel=c;this._editorId=e;this._sectionModel=h;this._handlerFactory=
p;this._typoSuggestionHandlerStore=b.createMap();this.own(g.after(this._embeddedOutputsModel,"onModelUpdated",f.hitch(this,"_handleSuggestions")))},_handleSuggestions:function(){var a=this._embeddedOutputsModel.getOutputs(),a=this._filterErrorOutputs(a);this._clearHandlersForNonExistentOutputs(a);a=this._findNewSuggestionErrorOutputs(a);this._showSuggestionForErrors(a)},_filterErrorOutputs:function(b){return b.filter(function(b){return b.type===a.OUTPUT_TYPE})},_clearHandlersForNonExistentOutputs:function(a){var b=
a.map(function(a){return a.uid}),c=this._typoSuggestionHandlerStore;c.forEach(function(a,d){-1===b.indexOf(d)?(a.destroy(),c.delete(d)):a.isSuggestionOutputStale()&&a.destroy()})},_findNewSuggestionErrorOutputs:function(a){var b=[];a.forEach(function(a){"error"===a.type&&(!this._containsSuggestion(a.getDomElement())&&this._hasSuggestion(a.identifier)&&!this._typoSuggestionHandlerStore.has(a.uid))&&b.push(a)},this);return b},_hasSuggestion:function(a){return a&&0<a.length},_containsSuggestion:function(a){var b=
e.contains(a,"typoFixApplied");a=d(".errorRecoveryDiv",a);return b||0!==a.length},_showSuggestionForErrors:function(a){a.forEach(function(a){var b=this._handlerFactory.createHandler(a);b.handleSuggestion(a.identifier.trim());this._typoSuggestionHandlerStore.set(a.uid,b)},this)},destroy:function(){this.inherited(arguments);this._typoSuggestionHandlerStore.forEach(function(a){a.destroy()});this._typoSuggestionHandlerStore.clear()}})})},"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactoryProvider":function(){define(["dojo/_base/declare",
"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactory","MW/rtc/core/provider/PluginProvider"],function(h,f,g){return h(g,{isApplicable:function(){return!0},requires:function(){return{createInstance:"rtc.document rtc.internaldocument rtc.linenumberservice rtc.cursor rtc.embeddedoutputs.model rtc.code.codechange rtc.code.sections.model rtc.embeddedoutputs".split(" ")}},createInstance:function(e,d,c,b,a,g,h,m){m=m.getEmbeddedOutputsView();return new f(e,d,c,b,a,g,h,m)},destroyInstance:function(e){e.dispose()}})})},
"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandlerFactory":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","./TypoSuggestionHandler"],function(h,f,g,e){return h(null,{constructor:function(d,c,b,a,e,f,g,h){this._document=d;this._internalDocument=c;this._lineNumberService=b;this._cursor=a;this._embeddedOutputsModel=e;this._codeChangeService=f;this._sectionModel=g;this._embeddedOutputsView=h},createHandler:function(d){return new e(this._document,this._internalDocument,
this._lineNumberService,this._cursor,this._embeddedOutputsModel,this._codeChangeService,this._sectionModel,d,this._embeddedOutputsView)},dispose:function(){}})})},"MW/rtc/plugins/typocorrection/handler/TypoSuggestionHandler":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/i18n!l10n/nls/actions dojo/on dojo/query dijit/form/Button MW/rtc/plugins/typocorrection/TypoSuggestionContentFactory MW/rtc/plugins/typocorrection/TypoSuggestionFix".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m){return h(null,{_STALE_SUGGESTION_OUTPUT_CLASS:"typoFixApplied",_STALE_OUTPUT_CLASS:"stale_output",constructor:function(a,b,c,d,e,f,g,h,k){this._domElement=h.getDomElement();this._document=a;this._internalDocument=b;this._lineNumberService=c;this._cursor=d;this._embeddedOutputsModel=e;this._codeChangeService=f;this._output=h;this._sectionModel=g;this._didYouMeanContainer=null;this._stackLineNumberLivePosition=h.stackLineNumber;this._embeddedOutputsView=k},handleSuggestion:function(a){this._suggestion=
a;a=new m(this._document,this._internalDocument,this._lineNumberService,this._suggestion,this._stackLineNumberLivePosition);this.initFixButton(a)},initFixButton:function(a){var c=this._domElement,e=l.getContent(a.getSuggestion());this._didYouMeanContainer=e.didYouMeanContainer;this._fixButton=e.fixButton;d.place(this._didYouMeanContainer,c);this._fixButtonHandeler=b.pausable(this._fixButton,"click",f.hitch(this,"_fixButtonClick",a));this._stalenessChangeListener=g.after(this._codeChangeService,"onCodeChanged",
f.hitch(this,"_documentEdited"),!0);this._embeddedOutputsView.outputChanged()},_documentEdited:function(a){if(!this._isFixButtonDisabled()&&(this._output.codeLinePositions&&0!==this._output.codeLinePositions.length)&&a){var b=this._sectionModel.getSectionNumberForLine(this._stackLineNumberLivePosition.line);a.forEach(function(a){b===this._sectionModel.getSectionNumberForNode(a)&&(e.add(this._fixButton,"disabled"),this._fixButtonHandeler.pause())},this)}},_isFixButtonDisabled:function(){return e.contains(this._fixButton,
"disabled")},_fixButtonClick:function(a,b){var c=a.performFix();d.destroy(this._didYouMeanContainer);c&&(this._cursor.setSelectionLineColumn(c.startLine,c.startColumn,c.endLine,c.endColumn),e.add(this._domElement,this._STALE_SUGGESTION_OUTPUT_CLASS),this._embeddedOutputsModel.onModelUpdated());b.stopPropagation();this._embeddedOutputsView.outputChanged()},isSuggestionOutputStale:function(){return e.contains(this._domElement,this._STALE_OUTPUT_CLASS)},destroy:function(){d.destroy(this._didYouMeanContainer);
this._stalenessChangeListener.remove()}})})},"MW/rtc/plugins/typocorrection/TypoSuggestionContentFactory":function(){define(["dojo/dom-construct","dojo/string","dojo/i18n!l10n/nls/actions"],function(h,f,g){return{getContent:function(e){var d=h.create("div",{className:"errorRecoveryDiv doNotExport"});d.setAttribute("data-testid","errorRecoveryDiv");h.create("div",{textContent:g.didYouMeanText},d);h.create("div",{className:"suggestion",textContent:e},d);e=h.create("button",{className:"codeFixBtn",textContent:g.fixButtonLabel},
d);e.setAttribute("data-testid","typoFixButton");return{didYouMeanContainer:d,fixButton:e}}}})},"MW/rtc/plugins/typocorrection/TypoSuggestionFix":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","mw-log/Log"],function(h,f,g){return h(null,{constructor:function(e,d,c,b,a){this._document=e;this._internalDocument=d;this._lineNumberService=c;this._suggestion=b;this._stackLineNumberLivePosition=a},getSuggestion:function(){return this._suggestion},_getCodeLineNumberFromStackLivePosition:function(){return f.getCodeLineNumberFromPosition(this._internalDocument,
this._stackLineNumberLivePosition)},_getUpdatedDocLineNumber:function(){return this._determineLineNumber(this._getCodeLineNumberFromStackLivePosition())},performFix:function(){var e=this._document.getLineText(this._getUpdatedDocLineNumber()),d=e.search(/\S/)+1,e=e.length+1;this._document.replaceText(this._suggestion,this._getUpdatedDocLineNumber(),d,this._getUpdatedDocLineNumber(),e);e=d+this._suggestion.length;return{startLine:this._getUpdatedDocLineNumber(),endLine:this._getUpdatedDocLineNumber(),
startColumn:d,endColumn:e}},_determineLineNumber:function(e){return this._lineNumberService.getLineNumberFromCodeLineNumber(e)+1}})})},"MW/rtc/plugins/view/divcaret/DivCaretPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/divcaret/DivCaretPlugin"],function(h,f,g){return h(f,{isApplicable:function(e){return!e.getAttribute("contenteditable")},requires:function(){return{isApplicable:["rtc.scrollpane"],createInstance:["rtc.cursor.view",
"rtc.view","rtc.cursorcontroller"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/view/divselection/DivSelectionPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/divselection/DivSelectionPlugin"],function(h,f,g){return h(f,{isApplicable:function(e){return!e.getAttribute("contenteditable")},requires:function(){return{isApplicable:["rtc.scrollpane"],createInstance:["rtc.cursor.view","rtc.view","rtc.cursorcontroller"]}},
createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/plugins/view/divselection/DivSelectionPlugin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-geometry dojo/dom-style MW/rtc/abstract/AbstractPlugin MW/rtc/model/Position".split(" "),function(h,f,g,e,d,c,b,a){return h(b,{_PX:"px",_MARGIN:17,constructor:function(a,b,c){this._rtcView=b;this._paddingLeft=this._rtcView.paddingLeft;this._cursorController=c;this._layers=[];this._layer=e.create("span",
{"class":"selectionGroup"});this._rtcView.addLayer(this._layer);this._hidden=this._isLocked=!1;this.own(g.after(a,"onUpdate",f.hitch(this,"_layout")))},_layout:function(){this._isLocked||(this._removeAllSelections(),this._cursorController.getCursors().forEach(function(a){this.draw(a)},this),this._addAllLayers())},lockSelection:function(){this._isLocked=!0},unlockSelection:function(){this._isLocked=!1;this._layout()},draw:function(a){if(a.hasSelection()&&!a.isSelectionHidden()){this._hidden=!1;var b=
a.selectionInfo(),e=this._addSelectionLayer(),f=e.layer,g=e.top,h=e.body,e=e.bottom;b.endPosition=b.isReversed?a.anchor:a.position;var r=this._getStartAndEndOfSelection(b),s=r.start,r=r.end;if(s&&r){var t=this._rtcView.getDomTargetPosition().scrollWidth-this._paddingLeft;a.isFileEndSelected()&&(r.x=t+this._paddingLeft);0===b.startPos&&(0===b.startNode.offsetInContainer()&&b.startNode.textContainer()!==b.endNode.textContainer())&&(s.x=this._paddingLeft);var u=this._getFooterHeight(b,r);if(s.y+s.height>
r.y+4){var b=Math.min(s.y,r.y),v=Math.max(s.height,r.height);c.set(g,{left:(s.x||this._paddingLeft)+"px",top:b+"px",width:r.x-s.x+"px",height:v+"px",display:"block"});a.isFileEndSelected()?c.set(h,{left:this._paddingLeft+"px",top:b+v+"px",width:t+"px",height:u+"px",display:"block"}):c.set(h,{display:"none"});c.set(e,{display:"none"})}else a=r.y-(s.y+s.height),v=b.startNode.textContainer().nextSibling()===b.endNode.textContainer(),r.y-(s.y+s.height)>Math.min(s.height,r.height)&&(v=!1),4>a||v?(c.set(h,
{display:"none"}),r.height&&(s.height+=a)):c.set(h,{left:this._paddingLeft+"px",top:s.y+s.height+"px",width:t+"px",height:a+"px",display:"block"}),c.set(g,{left:(s.x||this._paddingLeft)+"px",top:s.y+"px",width:t-(s.x||this._paddingLeft)+this._paddingLeft+"px",height:s.height+"px",display:"block"}),g=0===b.endPos&&b.fileEndSelected||0<b.endPos||b.endNode.previousSibling(),c.set(e,{left:this._paddingLeft+"px",top:r.y+"px",width:(r.x||this._paddingLeft)-this._paddingLeft+"px",height:r.height+u+"px",
display:g?"block":"none"});c.set(f,{display:"block"});d.setMarginBox(f,{h:Math.max(r.y+r.height,s.y+s.height)+u,w:this._rtcView.getDocumentDimension().width})}}},_getStartAndEndOfSelection:function(b){var c,d,e=this._rtcView.getCoordinateForPosition(b.startPosition),f=this._rtcView.getCoordinateForPosition(b.endPosition);if(!e||!f)return{start:null,end:null};if(b.isLocal)return{start:e,end:f};var g;d=c=0;var h=b.startNode.nextSibling();g=this._rtcView.getCoordinateForNode(b.startNode);for(c=g.x+g.width;h&&
h!==b.endNode;){g=this._rtcView.getCoordinateForNode(h);if(g.x+g.width<=c)break;if(this._isBelow(g,e,!1))break;d=new a(h,h.maxOffset());d=this._rtcView.getCoordinateForPosition(d);if(this._isBelow(d,e,!1))break;this._growCoordinateToMatchSibling(e,g);h=h.nextSibling()}h=b.endNode.previousSibling();for(c=this._rtcView.getCoordinateForNode(b.endNode).x;h&&h!==b.startNode;){g=this._rtcView.getCoordinateForNode(h);d=g.x;if(d>=c)break;c=d;if(this._isBelow(f,g,!0))break;d=new a(h,0);d=this._rtcView.getCoordinateForPosition(d);
if(this._isBelow(f,d,!0))break;this._growCoordinateToMatchSibling(f,g);h=h.previousSibling()}if(e.y+e.height<=f.y+4){for(h=b.startNode.previousSibling();h;){g=this._rtcView.getCoordinateForNode(h);c=g.y;d=g.height;if(this._isBelow(g,e,!0))break;e.y+e.height<c+d&&(e.height=c+d-e.y);h=h.previousSibling()}for(h=b.endNode.nextSibling();h;){g=this._rtcView.getCoordinateForNode(h);c=g.y;if(this._isBelow(f,g,!0))break;f.y>c&&(f.height+=f.y-c,f.y=c);h=h.nextSibling()}}return{start:e,end:f}},_isBelow:function(a,
b,c){return c?a.y>b.y+b.height:a.y>=b.y+b.height},_growCoordinateToMatchSibling:function(a,b){var c=b.y,d=b.height;a.y>c&&(a.height+=a.y-c,a.y=c);c+=d;d=a.y+a.height;c>d&&(a.height+=c-d)},_getFooterHeight:function(a,b){var c=0;if(a.fileEndSelected){var e=a.endNode.rootContainer(),f=e.box.nextElementSibling;f&&(c=d.getMarginBox(f),c=e.getBottom()+c.h-(b.y+b.height))}return c},updateContainerFullSelection:function(){this._layers[0]&&(this._layers[0].children[0].style.top=parseInt(this._layers[0].children[0].style.top,
10)-this._MARGIN+this._PX,this._layers[0].children[1].style.top=parseInt(this._layers[0].children[1].style.top,10)-this._MARGIN+this._PX)},_removeAllSelections:function(){this._layer.innerHTML="";this._layers=[];d.setMarginBox(this._layer,{w:0})},_addAllLayers:function(){if(0!==this._layers.length){var a=document.createDocumentFragment();this._layers.forEach(function(b){a.appendChild(b)});this._layer.appendChild(a);var b=this._rtcView.getDocumentDimension();d.setMarginBox(this._layer,{w:b.width})}},
_addSelectionLayer:function(){var a=e.create("span",{"class":"selectionLayer"}),b=e.create("span",{"class":"selection sel-top"},a),c=e.create("span",{"class":"selection sel-body"},a),d=e.create("span",{"class":"selection sel-bot"},a);this._layers.push(a);return{layer:a,top:b,body:c,bottom:d}}})})},"MW/rtc/plugins/view/layoutmanager/LayoutManagerProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/LayoutManager"],function(h,f,g){return h(f,
{requires:function(){return{createInstance:"rtc.internaldocument rtc.scrollpane rtc.fixedsize rtc.view.viewmodel rtc.view.layoutmanager.layouter rtc.view.layoutmanager.rule rtc.view.layoutmanager.rules.default rtc.view.rangeconverter".split(" ")}},createInstance:function(e,d,c,b,a,f,h,m){return new g(e,d,c,b,a,f,h,m)}})})},"MW/rtc/plugins/view/layoutmanager/LayoutManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/core/NodeMap ./LayoutConstants ./LayoutUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p){return f(m,{constructor:function(a,b,c,d,f,h,k,l){this._internalDocument=a;this._domTarget=b;this.fixedSize=c;this._viewModel=d;this._defaultRule=k;this._rangeConverter=l;this._root=null;this._scrollTopMayHaveChanged=!1;this._layoutOperations=[];this._layoutCache={};this._initializeRules(h);this._initializeLayouters(f);this.own(e.after(a,"onNodeChange",g.hitch(this,"_handleNodeChanged"),!0))},_initializeRules:function(a){this._layoutRules=a&&1<a.length?a.sort(function(a,
b){return b.priority()-a.priority()}):[this._defaultRule]},_initializeLayouters:function(a){this._layouters=new q(a)},registerLayouter:function(a){this._layouters.registerOverwrite(a)},_handleNodeChanged:function(a){a=p.getLayoutOperationsFromNodeChangeEvent(a);this._layoutOperations=this._layoutOperations.concat(a)},layoutDocument:function(){var a=this._internalDocument.root;this._getDomNode(a)||this._reset();var d=this._root;this._root=this._createDomNode(a);d&&d.parentElement?b.place(this._root,
d,"replace"):b.place(this._root,this._domTarget);this.resize();c.toggle(this._domTarget,"readonly",a.readOnly);this._layoutOperations=[];this._layoutCache={}},layoutOnDocumentChange:function(){var a=[];if(0===this._layoutOperations.length)return a;var b=this._viewModel.getViewProperties().scrollTop;this._layoutOperations.forEach(function(b){(b=this._executeOperation(b))&&a.push(b)},this);this._scrollTopMayHaveChanged&&(this._domTarget.scrollTop=b,this._scrollTopMayHaveChanged=!1);this._layoutOperations=
[];this._layoutCache={};return a},_executeOperation:function(a){var b=null,c=a.node,d=p.isInModel(c),e=p.isInView(c,this._domTarget),f=c.parent&&p.isInView(c.parent,this._domTarget);if(!d)return p.isRemoveOperation(a)&&e&&(b=c,this._removeNode(c)),b;p.isUpdateOperation(a)&&e?(b=c,this._layoutNode(c)):p.isLayoutOperation(a)&&f&&(b=c,this._layoutNode(c));return b},layoutNode:function(a){this._layoutNode(a);this._layoutCache={}},_layoutNode:function(a){this._relayout=!0;var b=this._createDomNode(a),
c=a.parent;c&&this._getDomNode(c)&&this._layoutNodeUsingRules(b,a,null);this._relayout=!1},refreshNode:function(a){if(a.parent){var c=this._getDomNode(a);if(c&&c.parentNode){var d=this._getLayouter(a).refresh(this,a,c,c.cloneNode(!1));d&&d!==c&&(b.place(d,c,"replace"),this._connect(a,d))}}},_createDomNode:function(a){return this._getLayouter(a).layout(this,a)},_getLayouter:function(a){var b=this._layouters.get(a);l.assert(b,"No layouter found for "+a.className);return b},layoutInto:function(a,c,e){var f=
this._getDomNode(a);if(f&&!this._relayout)return d.set(f,e),f;f&&this._removeNode(a);c=b.create(c,e);this._layoutNodesIntoContainer(c,a.children);this._connect(a,c);return c},_layoutNodesIntoContainer:function(a,b){b&&b.length&&b.forEach(g.hitch(this,"_layoutNodeIntoContainer",a))},_layoutNodeIntoContainer:function(a,b){var c=this._createDomNode(b);this._layoutNodeUsingRules(c,b,a)},_layoutNodeUsingRules:function(a,b,c){var d=c||this._root;this._layoutRules.forEach(function(e){var f=a.parentElement||
c;if(e=e.getOperationsForLayout(a,b,d))this._placeDomNodeFromLayoutInfo(e,b,f),this._mergeBlocksFromLayoutInfo(e),this._removeDomNodesFromLayoutInfo(e),this._injectBlocksFromLayoutInfo(e),this._redrawBlocksFromLayoutInfo(e),this._decorateFromLayoutInfo(e)},this)},_placeDomNodeFromLayoutInfo:function(a,c,d){a.nodeToPlace&&(a.nodeToPlaceRefNode?b.place(a.nodeToPlace,a.nodeToPlaceRefNode,a.nodeToPlaceRefPos):this._placeDomNode(a.nodeToPlace,c,d))},_mergeBlocksFromLayoutInfo:function(a){if(a.nodeToPlace&&
a.mergeWithSiblingBlock){a=a.nodeToPlace;var b=a.className,c=a.nextElementSibling,d=a.previousElementSibling;c&&0<=c.className.indexOf(b)?this._mergeBlocks([[a,c]]):d&&0<=d.className.indexOf(b)&&this._mergeBlocks([[d,a]])}},_removeDomNodesFromLayoutInfo:function(a){a.nodesToRemove&&a.nodesToRemove.forEach(function(a){for(a.parentNode&&a.parentNode.removeChild(a);0<a.childElementCount;)a.removeChild(a.firstElementChild)})},_injectBlocksFromLayoutInfo:function(a){var b=this._createBlockFromLayoutInfo(a.prevBlock);
this._placeBlock(b,a.nodeToPlace,"before");b=this._createBlockFromLayoutInfo(a.nextBlock);this._placeBlock(b,a.nodeToPlace,"after")},_createBlockFromLayoutInfo:function(a){if(a&&a.container){var c=a.container;a.childNodes.forEach(function(a){var d=a.parentNode;d&&(d.parentNode&&d.firstChild===d.lastChild)&&d.parentNode.removeChild(d);b.place(a,c)});return c}},_redrawBlocksFromLayoutInfo:function(a){var b=this._getRedrawnBlockByNodes(a.prevNodes),c=this._getRedrawnBlockByNodes(a.nextNodes);this._placeBlock(b,
a.nodeToPlace,"before");this._placeBlock(c,a.nodeToPlace,"after")},_decorateFromLayoutInfo:function(a){this._setWidthFromLayoutInfo(a);this._setClassFromLayoutInfo(a);this._setRootWidthFromLayoutInfo(a)},_setWidthFromLayoutInfo:function(a){(a=a.widthToSet)&&a.forEach(function(a){a.nodesToApply.forEach(function(b){this._domTarget.contains(b)&&(b.style.width=this._getMarginWidth(b)-a.widthOffset+"px")},this)},this)},_getMarginWidth:function(a){var b=a.className;if(!this._layoutCache.hasOwnProperty(b)){var c=
a.offsetLeft;a=k.get(a,"marginRight");this._layoutCache[b]=this._domTarget.offsetWidth-(c+a)}return this._layoutCache[b]},_setClassFromLayoutInfo:function(a){(a=a.classToSet)&&a.forEach(function(a){a.nodesToApply.forEach(function(b){c.toggle(b,a.name,a.value)})},this)},_setRootWidthFromLayoutInfo:function(a){if((a=a.rootNodeWidth)&&this._layoutCache.rootWidth!==a)this._layoutCache.rootWidth=a,this._root.style.minWidth=a>this._domTarget.clientWidth?a+"px":"100%"},_getRedrawnBlockByNodes:function(a){if(!a||
!a.length)return null;var c=b.create("div",{"class":n.ROOTNODE_CLASS});a.forEach(function(a){this._getDomNode(a)&&this._layoutNodeIntoContainer(c,a)},this);return c.firstChild},_placeDomNode:function(a,c,d){if(!a.parentElement){var e=this._getReferenceForPlace(c,a,d);e&&this._isDomNodeAttached(e.domNode)?b.place(a,e.domNode,e.position):(c=c.parent,d?b.place(a,d):c&&this._getDomNode(c)&&b.place(a,this._getDomNode(c)))}},_placeBlock:function(a,c,d){a&&(this._scrollTopMayHaveChanged=!0,b.place(a,c,d))},
_getReferenceForPlace:function(a,b,c){if(!a)return null;c=c||this._root;if(!c.hasChildNodes())return null;var d=a,e=a;do{if(d=d&&d.previousSibling()){var f=this._getRefDomNode(a,d,b);if(this._isPreferredReference(f,c))return f}if(e=e&&e.nextSibling()){var g=this._getRefDomNode(a,e,b);if(this._isPreferredReference(g,c))return g}if(this._isValidReference(f,c))return f;if(this._isValidReference(g,c))return g}while(d||e);return null},_isPreferredReference:function(a,b){return!this._isValidReference(a,
b)?!1:!this._domTarget.contains(b)?!0:a.base},_isValidReference:function(a,b){return a&&a.domNode&&b.contains(a.domNode)},_getRefDomNode:function(a,b,c){if(!b)return null;var d=null;this._layoutRules.some(function(e){if(e=e.getRefDomNode(a,b,c))return d=e,!0},this);return d},_isDomNodeAttached:function(a){for(;a;){if(c.contains(a,n.ROOTNODE_CLASS))return!0;a=a.parentElement}return!1},resize:function(){this._layoutRules.forEach(function(a){if(a=a.getOperationsForResize())this._setWidthFromLayoutInfo(a),
this._setRootWidthFromLayoutInfo(a)},this);this._layoutCache={}},_removeNode:function(a){for(var b=[],c=[],d=this._layoutRules.length-1;0<=d;d-=1){var e=this._layoutRules[d].getOperationsForRemove(a,c);e&&(e.nodeToMerge&&e.nodeToMerge.length&&b.unshift(e.nodeToMerge),e.nodeToRemove&&c.unshift(e.nodeToRemove),this._decorateFromLayoutInfo(e))}b.forEach(this._mergeBlocks,this);c.forEach(function(a){a&&a.parentNode&&a.parentNode.removeChild(a)})},_mergeBlocks:function(a){a&&a.length&&a.forEach(function(a){if(2===
a.length){var c=a[0],d=a[1];a=c.parentElement;var e=d.parentElement,f=h.indexOf(a.children,c);a.removeChild(c);e.removeChild(d);c=this._getBlockAfterMerge(c,d);b.place(c,a,f)}},this)},_getBlockAfterMerge:function(a,c){for(var d=b.create("div",{"class":a.className});a.childElementCount;)b.place(a.firstChild,d);for(;c.childElementCount;)b.place(c.firstChild,d);return d},isLayoutPending:function(){return 0<this._layoutOperations.length},insertDomNode:function(a,c,d,e){return(c=this._rangeConverter.getContainerForPosition(c,
e))?b.place(a,c,d):null},removeDomNode:function(a){this._domTarget.contains(a)&&a.parentNode.removeChild(a)},_reset:function(){this._layoutRules.forEach(function(a){a.reset()})},_connect:function(a,b){b&&(b.rteNode=a);a.box=b},applyStyle:function(a,b,c){this._getDomNode(a).style[b]=c},clearStyle:function(a,b){this._getDomNode(a).style[b]=""},applyClass:function(a,b){c.add(this._getDomNode(a),b)},clearClass:function(a,b){c.remove(this._getDomNode(a),b)},_getDomNode:function(a){return a.box}})})},"MW/rtc/plugins/view/layoutmanager/LayoutUtilities":function(){define(["MW/rtc/model/events/nodechange/NodeChangeEventTypes"],
function(h){return{OPERATION:{LAYOUT:"layout",UPDATE:"update",REMOVE:"remove"},getLayoutOperationsFromNodeChangeEvent:function(f){var g=[];switch(f.type){case h.INSERT_NODE:g=this._handleInsertNode(f);break;case h.DELETE_NODE:g=this._handleDeleteNode(f);break;case h.UPDATE_ATTRIBUTES:case h.INSERT_TEXT:case h.DELETE_TEXT:g=this._handleUpdateNode(f);break;case h.MERGE_NODE:g=this._handleMergeNode(f);break;case h.SPLIT_NODE:g=this._handleSplitNode(f)}return g},_handleInsertNode:function(f){return[this._createLayoutOperation(f.newNode)]},
_handleDeleteNode:function(f){return[this._createRemoveOperation(f.node)]},_handleUpdateNode:function(f){return[this._createUpdateOperation(f.node)]},_handleMergeNode:function(f){var g=[];f.node!==f.newNode&&(g.push(this._createRemoveOperation(f.node)),g.push(this._createUpdateOperation(f.newNode)));return g},_handleSplitNode:function(f){var g=[];f.node!==f.newNode&&(f.node.box?g.push(this._createUpdateOperation(f.node)):g.push(this._createLayoutOperation(f.node)),f.newNode&&g.push(this._createLayoutOperation(f.newNode)));
return g},_createLayoutOperation:function(f){return{type:this.OPERATION.LAYOUT,node:f}},_createUpdateOperation:function(f){return{type:this.OPERATION.UPDATE,node:f}},_createRemoveOperation:function(f){return{type:this.OPERATION.REMOVE,node:f}},isLayoutOperation:function(f){return f.type===this.OPERATION.LAYOUT},isUpdateOperation:function(f){return f.type===this.OPERATION.UPDATE},isRemoveOperation:function(f){return f.type===this.OPERATION.REMOVE},isInModel:function(f){return!!f.rootContainer()},isInView:function(f,
g){return f.box&&g.contains(f.box)}}})},"MW/rtc/plugins/view/layoutmanager/layouters/LineLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./LineLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/view/layoutmanager/layouters/PlainTextLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./PlainTextLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view.decoration.viewmodel"]}},createInstance:function(e){return new g(e)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/plugins/view/layoutmanager/layouters/RootLayouterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./RootLayouter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g},destroyInstance:function(e){e.destroy()}})})},
"MW/rtc/plugins/view/layoutmanager/layouters/RootLayouter":function(){define(["dojo/_base/declare","dojo/dom-class","MW/rtc/plugins/view/layoutmanager/abstract/AbstractLayouter","MW/rtc/nodes/inner/RootNode"],function(h,f,g,e){return h(g,{constructor:function(d){},getApplicableNodeClass:function(){return e},layout:function(d,c){var b=d.layoutInto(c,"div",{"class":"rootNode"});c.plainText&&f.add(b,"plainText");d.fixedSize&&f.add(b,"rootNodeFixedSize");return b}})})},"MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRuleProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/BaseGroupingRule"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.scrollpane"]}},
createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/ContiguousGroupingRule"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.scrollpane"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/plugins/view/layoutmanager/rules/DefaultRuleProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/DefaultRule"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/rules/ExpandableRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/ExpandableRule"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/view/layoutmanager/rules/ExpandableRule":function(){define("dojo/_base/declare dojo/dom-geometry dojo/query dojo/dom-class MW/rtc/plugins/view/layoutmanager/abstract/BaseRule MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule".split(" "),function(h,f,g,e,d,c){return h(d,{_EXPANSION_THRESHOLD:10,_EXPANDABLE_CLASSLIST:["equationNode","imageNode"],constructor:function(){this.reset()},reset:function(){this._cachedExpandable=[];this._cachedWidth=[];this._currentMaxWidth=0},
getOperationsForLayout:function(b,a,d){d=[];d=a.wrappable?g("*",b):a.groupingType===c().groupingType?this._getElementsInSiblingBlocks(b):[b];d=d.filter(this._canExpandRootNode,this);if(!d.length)return null;d.forEach(function(a){var b=this._cachedExpandable.indexOf(a),c=this._getMarginWidth(a);0>b?(this._cachedExpandable.push(a),this._cachedWidth.push(c)):this._cachedWidth[b]=c},this);this._currentMaxWidth=this._getMaxCachedWidth();return{rootNodeWidth:this._getExpandedWidth()}},_getElementsInSiblingBlocks:function(b){var a=
b.previousElementSibling;if(a)var c=g("*",a);if(b=b.nextElementSibling)var d=g("*",b);return c&&d?c.concat(d):c||d||[]},getOperationsForRemove:function(b,a){var c=this._getDomNode(b);if(!b.wrappable&&!this._canExpandRootNode(c))return null;var d=g("*",c);d.push(c);d.forEach(function(a){this._canExpandRootNode(a)&&(a=this._cachedExpandable.indexOf(a),0<=a&&(this._cachedExpandable.splice(a,1),this._cachedWidth.splice(a,1)))},this);this._currentMaxWidth=this._getMaxCachedWidth();return{rootNodeWidth:this._getExpandedWidth()}},
getOperationsForResize:function(){if(!this._cachedExpandable.length)return null;this._updateCachedWidth();return{rootNodeWidth:this._getExpandedWidth()}},_updateCachedWidth:function(){this._cachedWidth=this._cachedExpandable.map(this._getMarginWidth);this._currentMaxWidth=this._getMaxCachedWidth()},_getExpandedWidth:function(){return this._currentMaxWidth+this._EXPANSION_THRESHOLD},_getMaxCachedWidth:function(){return Math.max.apply(null,this._cachedWidth)},_getMarginWidth:function(b){b=f.getMarginBox(b);
return b.l+b.w},_canExpandRootNode:function(b){return this._EXPANDABLE_CLASSLIST.some(function(a){return e.contains(b,a)})},_isApplicable:function(b,a){return a.wrappable||this._canExpandRootNode(b)},priority:function(){return-3}})})},"MW/rtc/plugins/view/layoutmanager/rules/OutputRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/OutputRule"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/plugins/view/layoutmanager/rules/OutputRule":function(){define(["dojo/_base/declare","dojo/query","MW/rtc/plugins/view/layoutmanager/abstract/BaseRule","MW/rtc/plugins/view/layoutmanager/LayoutConstants"],function(h,f,g,e){return h(g,{_INLINEELEMENT_CLASS:"inlineElement",constructor:function(){},getOperationsForLayout:function(d,c,b){if(!this._isApplicable(c))return null;d=f("."+this._INLINEELEMENT_CLASS,d);return!d.length?null:{widthToSet:[{nodesToApply:d,
widthOffset:this._getWidthOffset()}]}},_getWidthOffset:function(){return e.RIGHT_MARGIN_WIDTH},_isApplicable:function(d){return"LineNode"===d.className},priority:function(){return-2}})})},"MW/rtc/plugins/view/layoutmanager/rules/WrappableRuleProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/plugins/view/layoutmanager/rules/WrappableRule"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},
"MW/rtc/plugins/view/layoutmanager/rules/WrappableRule":function(){define(["dojo/_base/declare","dojo/query","MW/rtc/plugins/view/layoutmanager/abstract/BaseRule","MW/rtc/plugins/view/layoutmanager/rules/ContainmentGroupingRule","MW/rtc/plugins/view/layoutmanager/LayoutConstants"],function(h,f,g,e,d){return h(g,{_WRAPPABLE_CLASS:"wrappable",constructor:function(){this.reset()},reset:function(){this._cachedWrappable=[]},getOperationsForLayout:function(c,b,a){var d;b.wrappable?d=this._getOperationsForLayoutWrappable(c):
b.groupingType===e().groupingType&&(d=this._getOperationsForLayoutSiblingBlocks(c,b));return d},_getOperationsForLayoutWrappable:function(c,b){var a={};a.classToSet=[{nodesToApply:[c],name:this._WRAPPABLE_CLASS,value:!0}];var d=f("."+this._WRAPPABLE_CLASS,c);d.push(c);a.widthToSet=[{nodesToApply:d,widthOffset:this._getWidthOffset()}];0>this._cachedWrappable.indexOf(c)&&this._cachedWrappable.push(c);return a},_getOperationsForLayoutSiblingBlocks:function(c){c=this._getWrappableInSiblingBlocks(c);return!c.length?
null:{widthToSet:[{nodesToApply:c,widthOffset:this._getWidthOffset()}]}},_getWrappableInSiblingBlocks:function(c){var b=c.previousElementSibling;if(b)var a=f("."+this._WRAPPABLE_CLASS,b);if(c=c.nextElementSibling)var d=f("."+this._WRAPPABLE_CLASS,c);return a&&d?a.concat(d):a||d||[]},getOperationsForRemove:function(c){if(c.wrappable){c=this._getDomNode(c);var b=f("."+this._WRAPPABLE_CLASS,c);b.push(c);b.forEach(function(a){a=this._cachedWrappable.indexOf(a);0<=a&&this._cachedWrappable.splice(a,1)},
this)}return null},getOperationsForResize:function(){return!this._cachedWrappable.length?null:{widthToSet:[{nodesToApply:this._cachedWrappable,widthOffset:this._getWidthOffset()}]}},_getWidthOffset:function(){return d.RIGHT_MARGIN_WIDTH},priority:function(){return-1}})})},"MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCaptureProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./MoveHiddenKeyCapture"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.cursor",
"rtc.divcaret","rtc.domnode","rtc.keyhandler"]}},createInstance:function(e,d,c,b){return new g(e,d,c,b)}})})},"MW/rtc/plugins/view/movehiddenkeycapture/MoveHiddenKeyCapture":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-class","dojo/dom-geometry"],function(h,f,g,e,d){return h(null,{constructor:function(c,b,a,d){this._cursor=c;this._divcaret=b;this._keyCapture=d.keyCapture;this._rtePane=a},_getFocusPosition:function(){var c=this._cursor.getNode(),b=c.box,a=this._divcaret.getBox(),
c=c.isIMENode?d.position(b):d.position(a),b={x:0,y:0};this._rtePane&&(b=d.position(this._rtePane));return{left:c.x-b.x+"px",top:c.y-b.y+"px"}},moveHiddenKeyCaptureToCaret:function(c){var b={top:0,left:0};c&&(b=this._getFocusPosition());this._keyCapture.style.top=b.top;this._keyCapture.style.left=b.left}})})},"MW/rtc/preferences/PreferencesServiceProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/preferences/PreferencesService"],function(h,f,g){return h(f,
{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.editordataservice"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/preferences/PreferencesService":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(h,f){return h(null,{MATLAB_PREFERENCES_FEATURE_ID:"matlab.preferences",constructor:function(g){this._editorDataService=g;this._listener=this._editorDataService.listenTo(this.MATLAB_PREFERENCES_FEATURE_ID,f.hitch(this,"_preferencesChanged"))},
_preferencesChanged:function(){this.onPreferencesChanged()},getValue:function(f,e){var d=this._editorDataService.get(this.MATLAB_PREFERENCES_FEATURE_ID);return d&&f in d?d[f]:e},getValues:function(f){var e=this._editorDataService.get(this.MATLAB_PREFERENCES_FEATURE_ID),d={};f.forEach(function(c){d[c]=e[c]},this);return d},onPreferencesChanged:function(){}})})},"MW/rtc/view/ViewModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/view/ViewModel"],function(h,
f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.scrollpane"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/view/ViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","MW/rtc/abstract/AbstractPlugin","./ViewEventUtilities"],function(h,f,g,e,d){return h(e,{DOMTARGET_PROPERTIES:"scrollTop scrollLeft clientWidth clientHeight offsetHeight offsetWidth scrollHeight scrollWidth".split(" "),
constructor:function(c,b){this._internalDocument=c;this._domTarget=b;this._documentDimension=null;this._properties={}},update:function(){this._invalidateAllCaches();return this._updateAllViewProperties()},_invalidateAllCaches:function(){this._invalidateCacheForDocumentDimension()},_invalidateCacheForDocumentDimension:function(){this._documentDimension=null},_updateAllViewProperties:function(){var c=[],c=c.concat(this._updateViewProperties(this.DOMTARGET_PROPERTIES));this._properties.scrollHeight>
this._properties.clientHeight||c.push(d.createEvent(d.EVENTS.layoutChange));return c},_updateViewProperties:function(c){var b=[];c.forEach(function(a){var c=this._domTarget[a];c!==this._properties[a]&&(b.push(d.createEvent(d.EVENTS[a])),this._properties[a]=c)},this);return b},getViewProperties:function(){return this._properties},getDomTargetDomNode:function(){return this._domTarget},getDomTargetBoundingClientRect:function(){return this._domTarget.getBoundingClientRect()},getDocumentDimension:function(){if(!this._documentDimension){var c=
this.getDocumentClientRect();this._documentDimension={width:c.width,height:c.height}}return this._documentDimension},getDocumentClientRect:function(){return this._internalDocument.root.box.getBoundingClientRect()}})})},"MW/rtc/view/ViewLinesTestHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/query MW/rtc/core/provider/PluginProvider".split(" "),function(h,f,g,e,d,c,b){var a=h(null,{constructor:function(a,b){this._scrollPane=b;this._listener=
g.after(a,"layoutDocument",f.hitch(this,"addTags"),!0);this._listener=g.after(a,"_layoutNode",f.hitch(this,"addTags"),!0);this._listener=g.after(a,"layoutInto",f.hitch(this,"addTags"),!0);this._listener=g.after(a,"_removeNode",f.hitch(this,"addTags"),!0);this._lineCounter=0;this.addTags()},destroy:function(){this._listener.remove()},addTags:function(){var a=c(".rootNode",this._scrollPane);if(0!==a.length){this._lineCounter=0;for(var a=a[0],b=0;b<a.children.length;b+=1)this._addChildTag(a.children[b])}},
_addChildTag:function(a){if(d.contains(a,"heading-1"))e.set(a,"data-testid","RtcLine"+this._lineCounter++),e.set(a,"type","TitleLine");else if(d.contains(a,"heading-2"))e.set(a,"data-testid","RtcLine"+this._lineCounter++),e.set(a,"type","HeadingLine");else if(d.contains(a,"paragraphNode"))e.set(a,"data-testid","RtcLine"+this._lineCounter++),e.set(a,"type","NormalLine");else if(d.contains(a,"RTClistItem"))e.set(a,"data-testid","RtcLine"+this._lineCounter++),"OL"===a.parentElement.tagName?e.set(a,"type",
"OrderedListItem"):e.set(a,"type","UnorderedListItem");else if(d.contains(a,"lineNode"))e.set(a,"data-testid","RtcLine"+this._lineCounter++),e.set(a,"type","CodeLine");else if(0<a.children.length)for(var b=0;b<a.children.length;b+=1)this._addChildTag(a.children[b])}});return h(b,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view.layoutmanager","rtc.scrollpane"]}},createInstance:function(b,c){return new a(b,c)},destroyInstance:function(a){a.destroy()}})})},
"MW/rtc/view/ViewSectionsTestHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/query MW/rtc/core/provider/PluginProvider".split(" "),function(h,f,g,e,d,c,b){var a=h(null,{SECTION_CSS:"SectionBlock",SECTION_DATATEST_PREFIX:"RtcSection",constructor:function(a,b){this._scrollPane=b;this._listener=g.after(a,"layoutDocument",f.hitch(this,"addTags"),!0);this._listener=g.after(a,"_layoutNode",f.hitch(this,"addTags"),!0);this._listener=g.after(a,"layoutInto",
f.hitch(this,"addTags"),!0);this._listener=g.after(a,"_removeNode",f.hitch(this,"addTags"),!0);this.addTags()},addTags:function(){var a=c(".rootNode",this._scrollPane);if(0!==a.length)for(var b=0,a=a[0],f=0;f<a.children.length;f+=1){var g=a.children[f];d.contains(g,this.SECTION_CSS)&&e.set(g,"data-testid",this.SECTION_DATATEST_PREFIX+b++)}},destroy:function(){this._listener.remove()}});return h(b,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view.layoutmanager",
"rtc.scrollpane"]}},createInstance:function(b,c){return new a(b,c)},destroyInstance:function(a){a.destroy()}})})},"MW/rtc/view/ViewProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","MW/rtc/view/View"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.internaldocument","rtc.view.viewmodel","rtc.scrollpane","rtc.view.layoutmanager","rtc.view.coordinateconverter"]}},createInstance:function(e,
d,c,b,a){return new g(e,d,c,b,a)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/view/View":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on mw-log/Log MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentEventUtilities MW/rtc/model/DocumentUtilities MW/rtc/model/NodeUtilities ./ViewEventUtilities ./ViewUtilities".split(" "),function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s){return h(m,{_DEFAULT_HORIZONTAL_PADDING:60,
_DEFAULT_VERTICAL_PADDING:14,_DEFAULT_SCROLL_AMOUNT:50,_LINE_SHOULD_BE_IN_VIEW:"The specified line should be in the current view.",_POSITION_SHOULD_NOT_BE_NULL:"The position should not be null.",constructor:function(a,b,c,d,e){this._internalDocument=a;this._viewModel=b;this._domTarget=c;this._layoutManager=d;this._coordinateConverter=e;this.paddingLeft=0;this._pendingEvents=[];this.own(k(c,"scroll",f.hitch(this,"_handleScroll")));this.own(g.after(a,"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"),
!0));this.own(g.after(a,"onDocumentReset",f.hitch(this,"_handleDocumentReset")));this.own(g.after(a,"readOnlyChanged",f.hitch(this,"_handleReadOnlyChanged")))},onViewUpdated:function(a){},onVisitNode:function(a){},onLinesDOMUpdated:function(a,b){},onLayoutChange:function(a){a&&a.isValid()&&this.scrollPositionIntoView(a);this._pendingEvents.push(r.createEvent(r.EVENTS.layoutChange));this._updateViewPropertiesAndEmitEvents()},onScroll:function(){},onResize:function(){this._layoutManager.resize();this._updateViewPropertiesAndEmitEvents()},
_handleScroll:function(){this._updateViewPropertiesAndEmitEvents()},_handleDocumentChanged:function(a){var b=this._layoutManager.layoutOnDocumentChange();0<b.length&&this._pendingEvents.push(r.createEvent(r.EVENTS.renderUpdate));r.isLayoutChangeEventToPatch(a,this._internalDocument)&&this._pendingEvents.push(r.createEvent(r.EVENTS.layoutChange));this._updateViewPropertiesAndEmitEvents();if(0<b.length)this.onVisitNode(b)},_handleDocumentReset:function(){this._layoutManager.layoutDocument();this._updateViewProperties()},
_handleReadOnlyChanged:function(){this._layoutManager.layoutDocument()},_updateViewPropertiesAndEmitEvents:function(){this._updateViewProperties();this._emitPendingEvents()},_updateViewProperties:function(){var a=this._viewModel.update();this._pendingEvents=this._pendingEvents.concat(a)},_emitPendingEvents:function(){var a=this._pendingEvents;0<a.length&&(this._pendingEvents=[],this.onViewUpdated(a))},getDomTargetPosition:function(){return this._viewModel.getViewProperties()},setScrollTop:function(a){this.getScrollTop()===
a||0===this.getScrollTop()&&0>a||(this._domTarget.scrollTop=a,this._updateViewPropertiesAndEmitEvents(),this.onScroll())},offsetScrollTop:function(a){var b=this.getScrollTop(),c=this.getScrollHeight()-this.getClientHeight();a=Math.min(Math.max(b+a,0),c);a!==b&&(this._domTarget.scrollTop=a,this._updateViewPropertiesAndEmitEvents(),this.onScroll())},setScrollLeft:function(a){this.getScrollLeft()===a||0===this.getScrollLeft()&&0>a||(this._domTarget.scrollLeft=a,this._updateViewPropertiesAndEmitEvents(),
this.onScroll())},offsetScrollLeft:function(a){var b=this.getScrollLeft(),c=this.getScrollWidth()-this.getClientWidth();a=Math.min(Math.max(b+a,0),c);a!==b&&(this._domTarget.scrollLeft=a,this._updateViewPropertiesAndEmitEvents(),this.onScroll())},canScroll:function(){return this.getScrollHeight()>this.getClientHeight()},getScrollLeft:function(){return this._viewModel.getViewProperties().scrollLeft},getScrollTop:function(){return this._viewModel.getViewProperties().scrollTop},getScrollWidth:function(){return this._viewModel.getViewProperties().scrollWidth},
getScrollHeight:function(){return this._viewModel.getViewProperties().scrollHeight},getClientWidth:function(){return this._viewModel.getViewProperties().clientWidth},getClientHeight:function(){return this._viewModel.getViewProperties().clientHeight},applyStyleToLine:function(a,b,c){n.checkLineExists(this._internalDocument,a);(a=this._internalDocument.getLineNode(a-1))&&this._layoutManager.applyStyle(a,b,c)},registerLayouter:function(a){this._layoutManager.registerLayouter(a)},isLayoutPending:function(){return this._layoutManager.isLayoutPending()},
layoutNode:function(a){this._layoutManager.layoutNode(a);this.onVisitNode([a])},refreshNode:function(a){this._layoutManager.refreshNode(a)},getDomtarget:function(){return this._domTarget},addLayer:function(a){e.add(a,"layer");d.place(a,this._domTarget)},switchLayer:function(a,b){this._domTarget.contains(b)&&(e.add(a,"layer"),d.place(a,b,"replace"))},setBlockLayer:function(a){e.add(a,"layer fullWidthLayer");var c=this;k(this._domTarget,"scroll",function(){b.set(a,{left:c._domTarget.scrollLeft+"px"})})},
isElementOutOfView:function(a,b){var c=this._viewModel.getDomTargetBoundingClientRect(),d=a.getBoundingClientRect();b=b||{left:0,right:0,top:0,bottom:0};return d.top>c.bottom+b.bottom||d.left>c.right+b.right||d.bottom<c.top-b.top||d.right<c.left-b.left},getLineHeight:function(a){n.checkLineExists(this._internalDocument,a);return this._internalDocument.getLineNode(a-1).getHeight()},getPreciseLineHeight:function(a){n.checkLineExists(this._internalDocument,a);a=this._internalDocument.getLineNode(a-1);
return this.getNodeBottom(a.rootContainer(),!0)-this.getNodeTop(a.rootContainer(),!0)},getNodeTop:function(a,c){var d=0;if(c)var e=b.getComputedStyle(a.box),d=d+b.get(a.box,"paddingTop",e),d=d+b.get(a.box,"borderTopWidth",e);return a.getTop()+d},getNodeBottom:function(a,c){var d=0;if(c)var e=b.getComputedStyle(a.box),d=d+b.get(a.box,"paddingBottom",e),d=d+b.get(a.box,"borderBottomWidth",e);return a.getBottom()-d},getNodeHeight:function(a,c){return a.getHeight()+(c?b.get(a.box,"paddingTop")+b.get(a.box,
"paddingBottom"):0)},scrollNodeToPercent:function(a,b){this.scrollLineToPercent(this._internalDocument.getLineNumber(a)+1,b)},scrollLineToPercent:function(a,b){n.checkLineExists(this._internalDocument,a);var c=this._internalDocument.getLineNode(a-1).box;this.scrollElementToPercent(c,b)},scrollElementToPercent:function(a,b){s.assert(s.isDescendant(a,this.getDomtarget()));if(void 0===b||null===b)b=this._DEFAULT_SCROLL_AMOUNT;var c=(this.getClientHeight()-a.clientHeight)*(b/100);this.setScrollTop(a.offsetTop-
c)},getLineAtPercent:function(a){var b=this.getScrollTop(),c=this.getClientHeight();a=this.getLineColumnFromCoordinate({x:0,y:b+c*(a/100)}).line;var d=this.getFirstVisibleLineNumber();a===d&&this.getCoordinateForLineColumn(d,1).y<b&&(a+=1);d=this.getLastVisibleLineNumber();a===d&&(d=this.getCoordinateForLineColumn(d,1),d.y+d.height>b+c&&(a-=1));return Math.min(this._internalDocument.getMaxLineNumber(),Math.max(1,a))},getPercentAtLine:function(a){return 100*(this.getNodeTop(this._internalDocument.getLineNode(a-
1))/this.getScrollHeight())},getPositionAtPercent:function(a){a=this.getLineAtPercent(a);return this._internalDocument.getPositionForLineColumn(a,1)},getLinePercentScrolled:function(a,b,c){n.checkLineExists(this._internalDocument,a);b||n.assert(this.isLineInView(a,c),this._LINE_SHOULD_BE_IN_VIEW);c=this.getCoordinateForLineColumn(a,1);a=c.y;c=c.height;c=this.getClientHeight()-c;var d=this.getScrollTop();a=100*((a-d)/c);isNaN(a)&&(a=0);b||(a=Math.max(Math.min(100,a),0));return a},getNodePercentScrolled:function(a,
b){var c=this._internalDocument.getLineNumber(a)+1;return this.getLinePercentScrolled(c,b)},isNodeInView:function(a,b){n.assert("boolean"===typeof b||"undefined"===typeof b,"Second parameter should be boolean");var c=this._internalDocument.getLineNumber(a)+1;return this.isLineInView(c,b)},isLineInView:function(a,b){n.assert("boolean"===typeof b||"undefined"===typeof b,"Second parameter should be boolean");n.checkLineExists(this._internalDocument,a);var c=this.getFirstVisibleLineNumber(b),d=this.getLastVisibleLineNumber(b);
return a>=c&&a<=d},getFirstVisibleLineNumber:function(a){n.assert("boolean"===typeof a||"undefined"===typeof a,"Second parameter should be boolean");var b={x:0,y:this._getTopOfView()},b=this.getLineFromCoordinate(b);a&&!this.isLineFullyOnScreen(b)&&(b+=1);return b},getFirstVisibleNode:function(a){a=this.getFirstVisibleLineNumber(a);return this._internalDocument.getLineNode(a-1)},getLastVisibleLineNumber:function(a){n.assert("boolean"===typeof a||"undefined"===typeof a,"Second parameter should be boolean");
var b={x:0,y:this._getBottomOfView()-1},b=this.getLineFromCoordinate(b),c=this._internalDocument.getMaxLineNumber(),b=0<=b?b:c;a&&!this.isLineFullyOnScreen(b)&&(b-=1);return b},getLastVisibleNode:function(a){a=this.getFirstVisibleLineNumber(a);return this._internalDocument.getLineNode(a-1)},isLineFullyOnScreen:function(a){n.assert("number"===typeof a,a+" is not of type number");a=this._internalDocument.getLineNode(a-1);return this.isNodeFullyOnScreen(a)},isNodeFullyOnScreen:function(a){n.assert(p.isNode(a),
a+" is not of type Node");var b=this.getCoordinateForNode(a);a=b.y;b=a+b.height;a=a>=this._getTopOfView();b=b<=this._getBottomOfView();return a&&b},_getTopOfView:function(){return this.getScrollTop()},_getBottomOfView:function(){return this._getTopOfView()+this.getClientHeight()},getDocumentDimension:function(){return this._viewModel.getDocumentDimension()},scrollLineColumnIntoView:function(a,b,c,d){n.checkLineColumnExists(this._internalDocument,a,b);a=this._internalDocument.getPositionForLineColumn(a,
b);return this.scrollPositionIntoView(a,c,d)},scrollPositionIntoView:function(a,b,c){b=b||this._DEFAULT_VERTICAL_PADDING;c=c||this._DEFAULT_HORIZONTAL_PADDING;var d;n.assert(a,this._POSITION_SHOULD_NOT_BE_NULL);if(!a.isValid())return!1;d=this.getCoordinateForPosition(a);d||(a=a.getNode(),d=this.getCoordinateForNode(a));var e=d.y,f=this.getScrollTop()+b,g=e+d.height,h=this.getScrollTop()+this.getClientHeight()-b;b=e<=f;a=g>=h;var k=g-e>h-f;a&&b&&(b=a=!1);var l=this.getScrollTop();k?a?l-=f-e:b&&(l+=
g-h):a?l+=g-h:b&&(l-=f-e);l=Math.max(0,l);this.setScrollTop(l);d=d.x;e=this.getScrollLeft()+c;c=Math.max(0,this.getScrollLeft()+this.getClientWidth()-c);f=d<=e;g=d>=c;h=this.getScrollLeft();g?h+=d-c:f&&(h-=e-d);h=Math.max(0,h);this.setScrollLeft(h);return a||b||f||g},applyClassToLine:function(a,b){var c=this._internalDocument.getLineNode(a);c&&this._layoutManager.applyClass(c,b)},removeClassFromLine:function(a,b){var c=this._internalDocument.getLineNode(a);c&&this._layoutManager.clearClass(c,b)},
removeClassFromAllLines:function(a){for(var b=this._internalDocument.getMaxLineNumber(),c=0;c<b;c+=1)this.removeClassFromLine(c,a)},getCoordinateForLineColumn:function(a,b){n.checkLineColumnExists(this._internalDocument,a,b);var c=this._internalDocument.getPositionForLineColumn(a,b);return this.getCoordinateForPosition(c)},getLineColumnFromCoordinate:function(a){return(a=this.getPositionFromCoordinate(a))?a.getLineColumn():null},getLineFromCoordinate:function(a){return(a=this.getPositionFromCoordinate(a))?
a.getLineColumn().line:-1},fixEvent:function(a){var b,d,e,f,g,h;g=this.getDomtarget();h={target:a.target,pageX:a.pageX,pageY:a.pageY,layerX:a.layerX,layerY:a.layerY,button:a.button};f=c.position(g);d=c.position(document.getElementsByTagName("body")[0]);b=f.x-d.x;d=f.y-d.y;e=f.w;f=f.h;h.layerX=a.pageX-Math.floor(b);h.layerY=a.pageY-Math.floor(d);h._meta={viewSelectionOffset:{top:d,bottom:d+f,left:b,right:b+e}};if((a=a.target)&&!a.rteNode){for(;a&&a!==g&&a.parentNode&&!a.rteNode;)a=a.parentNode;a===
g&&(a=this._internalDocument.root.box)}h.target=a?a:this._internalDocument.root.box;return h},isFixedEventOutside:function(a){var b=this.getDomTargetPosition();return 0>a.layerX||0>a.layerY||a.layerX>=b.clientWidth||a.layerY>=b.clientHeight},getFixedEventDirectionOutside:function(a){var b={x:0,y:0};a.pageX<a._meta.viewSelectionOffset.left?b.x=-1:a.pageX>a._meta.viewSelectionOffset.right&&(b.x=1);a.pageY<a._meta.viewSelectionOffset.top?b.y=-1:a.pageY>a._meta.viewSelectionOffset.bottom&&(b.y=1);return b},
getFixedEventPositionAtBorder:function(a){var b={target:a.target,layerX:a.layerX,layerY:a.layerY},c=this.getFixedEventDirectionOutside(a);if(0!==c.x||0!==c.y)0>c.x?b.layerX=0:0<c.x&&(b.layerX=a._meta.viewSelectionOffset.right-a._meta.viewSelectionOffset.left),0>c.y?b.layerY=0:0<c.y&&(b.layerY=a._meta.viewSelectionOffset.bottom-a._meta.viewSelectionOffset.top),b.target=this._internalDocument.root.box;return this.getPositionFromEvent(b)},getCoordinateFromEvent:function(b){b={x:b.layerX,y:b.layerY};
if(a("mozilla")&&0===b.x&&0===b.y)return null;b.x+=this.getScrollLeft();b.y+=this.getScrollTop();return b},getPositionFromEvent:function(a){var b=a.target;a=this.getCoordinateFromEvent(a);return this._coordinateConverter.getPositionFromCoordinate({x:a.x,y:a.y+1},b.rteNode)},getCoordinateForNode:function(a){return this.getCoordinateForDomNode(a.box)},getCoordinateForLineNumber:function(a){a=this._internalDocument.getLineNode(a);return this.getCoordinateForNode(a)},getDomNodeForLine:function(a){return this._internalDocument.getLineNode(a).box},
getCoordinateForDomNode:function(a){l.assert(this._domTarget.contains(a),"The input DOM Node should be under the DOM target");a=a.getBoundingClientRect();var b=this._domTarget.getBoundingClientRect(),c=a.left-b.left+this.getScrollLeft(),b=a.top-b.top+this.getScrollTop();return{x:c,y:b,width:a.width,height:a.height}},getCoordinateForPosition:function(a){a=this._coordinateConverter.getCoordinateFromPosition(a);var b=this.getDomtarget(),d=c.position(b);a.x=a.pageX-d.x+b.scrollLeft;return a},getPositionFromCoordinate:function(a){return this._coordinateConverter.getPositionFromCoordinate({x:a.x,
y:a.y+1})},setDraggable:function(a){a||this.setDomTargetDraggable(!1);this._allowDrag=a},setDomTargetDraggable:function(a){this._allowDrag?this._domTarget.draggable=a:l.assert(!1,"The dom node is not allow to be a draggable object")},isDraggable:function(){return this._allowDrag},isDomTargetDraggable:function(){return this._domTarget.draggable},insertDomNode:function(a,b,c){return this._layoutManager.insertDomNode(a,b,c)?{remove:f.hitch(this._layoutManager,"removeDomNode",a)}:null},setDefaultVerticalPadding:function(a){this._DEFAULT_VERTICAL_PADDING=
a}})})},"MW/rtc/view/VisibilityNotifierProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/provider/PluginProvider","MW/rtc/view/VisibilityNotifier"],function(h,f,g,e){return h(g,{requires:function(){return{createInstance:[]}},createInstance:function(){return new e}})})},"MW/rtc/view/VisibilityNotifier":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/view/VisibilityNotifiable"],function(h,f,g){return h(g,{onShow:function(){},onHide:function(){}})})},
"MW/rtc/view/VisibilityNotifiable":function(){define(["dojo/_base/declare"],function(h){return h(null,{onShow:function(){throw Error("Unimplemented OnShow  method");},onHide:function(){throw Error("Unimplemented onHide  method");}})})},"MW/rtc/view/coordinateconverter/PlainTextCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./PlainTextCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view.rangeconverter.converter.plaintext",
"rtc.view.viewmodel"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/view/coordinateconverter/PlainTextCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/PlainTextNode","./base/TextCoordinateConverter"],function(h,f,g){return h(g,{constructor:function(e,d){this._rangeConverter=e;this._viewModel=d},getApplicableNodeClass:function(){return f}})})},"MW/rtc/view/coordinateconverter/RootCoordinateConverterProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider",
"./RootCoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/view/coordinateconverter/RootCoordinateConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/inner/RootNode","./base/VerticalAlignCoordinateConverter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f}})})},"MW/rtc/view/coordinateconverter/CoordinateConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./CoordinateConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.view.viewmodel","rtc.view.coordinateconverter.converter"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"MW/rtc/view/coordinateconverter/CoordinateConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractConverterPlugin","./CoordinateConverterUtilities","./base/BaseCoordinateConverter"],function(h,
f,g,e,d){return h(g,{CONVERTER_PLUGIN_NAME:"CoordinateConverter",constructor:function(c,b,a){this._internalDocument=c;this._viewModel=b;this._baseConverter=new d;this._createConverterMap(a)},getPositionFromCoordinate:function(c,b){var a;c=e.convertFromOffsetToClient(c,this._viewModel);b=b||this._internalDocument.root;do{var d=this._getPositionFromCoordinate(c,b);if(d)a=d,b=d.getNode();else break}while(b.children&&0<b.children.length);return a},_getPositionFromCoordinate:function(c,b){var a=this._getConverter(b),
d=f.hitch(this,"_getRectsRetriever"),a=a.getClosestRect(b,c,d);if(!a)return null;var d=a.associatedNode,g=this._getConverter(d);c=e.getProjectedCoordinate(c,a);return g.getPositionFromCoordinate(c,d)},_getRectsRetriever:function(c){return this._getConverter(c).getClientRects(c)},getCoordinateFromPosition:function(c){for(;c;){var b=this._getConverter(c.getNode()),a=b.getCoordinateFromPosition(c);if(a)return a;c=b.getDelegatedPositionForCoordinate(c)}return{x:0,y:0,width:0,height:0,pageX:0}},_getConverter:function(c){return this.inherited(arguments)||
this._baseConverter}})})},"MW/rtc/view/decoration/DecorationProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./Decoration"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.view","rtc.view.decoration.viewmodel"]}},createInstance:function(e,d,c){return new g(e,d,c)},destroyInstance:function(e){e.destroy()}})})},"MW/rtc/view/decoration/Decoration":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/DocumentEventUtilities MW/rtc/model/RangeUtilities MW/rtc/view/ViewEventUtilities MW/rtc/view/decoration/DecorationUtilities MW/rtc/view/decoration/Decorator MW/rtc/view/decoration/LayerDecorator".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(null,{constructor:function(a,b,c){this._internalDocument=a;this._rtcView=b;this._viewModel=c;this._decoratorLayerMap=e.createMap();this._aspectHandles=[g.after(a,"onDocumentChanged",f.hitch(this,"_handleDocumentChanged"),!0),g.after(c,"onDecorationUpdate",f.hitch(this,"_handleDecorationUpdate"),!0),g.after(c,"onLayerDecoratorUpdate",f.hitch(this,"_handleLayerDecorationUpdate"),!0),g.after(b,"onViewUpdated",f.hitch(this,"_handleViewUpdated"),!0)];this._cachedDocumentWidth=
0;this._resetPendingList();this._resetLayerDecorators()},createDecorator:function(a,b){void 0===b&&(b=!1);return new k(this._viewModel,a,f.hitch(this,"_applyChanges",b))},createLayerDecorator:function(){var b=f.hitch(this,"_applyLayerChanges"),b=new l(this._viewModel,b),c=a.createNewLayerForDecorator(b,this._viewModel,this._rtcView);this._rtcView.addLayer(c);this._decoratorLayerMap.set(b,c);return b},_handleDocumentChanged:function(a){0<this._pendingRanges.length&&this._applyChanges();0<this._pendingLayerDecorators.length&&
this._applyLayerChanges()},_handleDecorationUpdate:function(a){a.forEach(this._addPendingRange,this)},_addPendingRange:function(a){this._pendingRanges.push(a);c.nodesInRange(a).forEach(this._addPendingNode,this)},_addPendingNode:function(a){this._pendingNodes[a.uid]||(this._pendingNodes[a.uid]=a)},_handleLayerDecorationUpdate:function(a){-1===this._pendingLayerDecorators.indexOf(a)&&this._pendingLayerDecorators.push(a)},_handleViewUpdated:function(a){if(b.hasSizingEvent(a)||b.hasLayoutEvent(a)||this._cachedDocumentWidth!==
this._rtcView.getDocumentDimension().width)this._cachedDocumentWidth=this._rtcView.getDocumentDimension().width,this._redrawAllLayerDecorators()},_redrawAllLayerDecorators:function(){this._decoratorLayerMap.forEach(function(b,c){var d=a.createNewLayerForDecorator(c,this._viewModel,this._rtcView);this._rtcView.switchLayer(d,b);this._decoratorLayerMap.set(c,d)},this)},_applyChanges:function(a){this._getPendingNodes().forEach(f.hitch(this._rtcView,"refreshNode"));this._pendingRanges.forEach(function(a){var b=
a.getStartPosition().getLineColumn().line-1;a=a.getEndPosition().getLineColumn().line-1;this._rtcView.onLinesDOMUpdated(b,a)},this);if(a&&0<this._pendingRanges.length)this._rtcView.onViewUpdated([b.createEvent(b.EVENTS.renderUpdate)]);this._resetPendingList()},_getPendingNodes:function(){return Object.keys(this._pendingNodes).map(function(a){return this._pendingNodes[a]},this)},_resetPendingList:function(){this._pendingNodes={};this._pendingRanges=[]},_resetLayerDecorators:function(){this._pendingLayerDecorators=
[]},_applyLayerChanges:function(){this._pendingLayerDecorators.forEach(function(b){var c=this._decoratorLayerMap.get(b),d=a.createNewLayerForDecorator(b,this._viewModel,this._rtcView);this._rtcView.switchLayer(d,c);this._decoratorLayerMap.set(b,d)},this);this._resetLayerDecorators()},destroy:function(){this._aspectHandles.forEach(function(a){a.remove()});this._aspectHandles=[]}})})},"MW/rtc/view/decoration/Decorator":function(){define(["dojo/_base/declare"],function(h){return h(null,{constructor:function(f,
g,e){this._viewModel=f;this._priority=g||0;this._applyChangesCallback=e},addClasses:function(f){f.forEach(function(f){this.addClass(f.range,f.classList)},this)},addClass:function(f,g){this._viewModel.addClass(f,g,this)},removeClass:function(f,g){this._viewModel.removeClass(f,g,this)},setStyle:function(f,g,e){this._viewModel.setStyle(f,g,e,this)},removeStyle:function(f,g){this._viewModel.removeStyle(f,g,this)},addDomNode:function(f,g,e){this._viewModel.addDomNode(g,f,e,this)},removeDomNode:function(f,
g,e){this._viewModel.removeDomNode(g,f,e,this)},clearRange:function(f){this._viewModel.clearRange(f,this)},applyChanges:function(){this._applyChangesCallback()},priority:function(){return this._priority}})})},"MW/rtc/view/decoration/LayerDecorator":function(){define(["dojo/_base/declare","MW/rtc/model/CodeUtilities","mw-log/Log"],function(h,f,g){return h(null,{constructor:function(e,d){this._viewModel=e;this._applyChangesCallback=d},addClasses:function(e){e.forEach(function(d){this.addClass(d.range,
d.classList)},this)},addClass:function(e,d){g.assert(f.isCodeRange(e.getStartPosition().getNode(),e.getEndPosition().getNode()),"Layer decorator class should only be applied to code range");this._viewModel.addLayerClass(e,d,this)},removeClass:function(e,d){this._viewModel.removeLayerClass(e,d,this)},clearRange:function(e){this._viewModel.clearLayerRange(e,this)},applyChanges:function(){this._applyChangesCallback()}})})},"MW/rtc/view/decoration/LayerDecoratorMarginDecoratorProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","MW/rtc/view/decoration/LayerDecoratorMarginDecorator"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:["rtc.view.decoration.viewmodel","rtc.view","rtc.internaldocument","rtc.linenumberservice"]}},createInstance:function(e,d,c,b){return g(e,d,c,b)}})})},"MW/rtc/view/decoration/LayerDecoratorMarginDecorator":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style mw-log/Log MW/rtc/margin/AbstractLineMarginDecorator MW/rtc/view/ViewUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(k,{_DEFAULT_WIDTH:16,_BASE_CSS_CLASS:"marginLineHighlight",constructor:function(a,b,c,d){this._decorationViewModel=a;this._view=b;this._internalDocument=c;this._lineNumberService=d;this.own(g.after(this._decorationViewModel,"onLayerDecoratorUpdate",f.hitch(this,"_handleLayerDecorationChanged"),!0))},hasLayerForLineNumber:function(a,b){var c=this._lineNumberService.getLineNumberFromCodeLineNumber(a+1)+1;return this._decorationViewModel.hasLayerDecorationForLineNumber(c)},
createDecorationForLineNumber:function(a,b){var d=c.create("div"),e=this._lineNumberService.getLineNumberFromCodeLineNumber(a+1)+1,f=this._decorationViewModel.getLayerCssClassesArrayForLineNumber(e),e=this._internalDocument.getPositionForLineColumn(e,1),e=l.getVerticalDimensionsBetweenPositions(e,e,this._view),g=e.bottom-e.top;f.forEach(function(b){var e=c.create("div",{style:{height:g+"px"}},d);this._applyStyle(e,b,a)},this);return d},_applyStyle:function(a,b,c){b=b.slice();b.push(this._BASE_CSS_CLASS);
var e=b.join(" ");d.add(a,e);this._addTestTag(a,b,c)},_addTestTag:function(a,b,c){c=b&&0<b.length?c+"_"+b.join("_"):c+"_invalid";e.set(a,"data-testid",c)},_handleLayerDecorationChanged:function(a){this.onUpdate()},getWidth:function(){return this._DEFAULT_WIDTH}})})},"MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStoreProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./DecorationDescriptorsStore"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},
createInstance:function(){return new g}})})},"MW/rtc/view/decoration/viewmodel/DecorationDescriptorsStore":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/PositionUtilities"],function(h,f,g,e,d){return h(g,{constructor:function(){this._descriptorMap=e.createMap()},add:function(c){var b=this._getKey(c);this._descriptorMap.set(b,c)},remove:function(c){this._destroyDescriptor(c);this._removeFromMap(c)},
clear:function(){this._clearMap()},getForRange:function(c){var b,a=c.getStartPosition().getNode();b=c.getStartPosition().getOffset();var d=c.getEndPosition().getNode();c=c.getEndPosition().getOffset();a===d?b=this.getInNode(a,b,c):(b=this.getInNode(a,b,a.maxOffset()),a.nextNode()!==d&&(b=b.concat(this.getBetweenNodes(a.nextNode(),d.prevNode()))),b=b.concat(this.getInNode(d,0,c)));return b},getBetweenNodes:function(c,b){for(var a=c,d=[];a;){var e=this.getForNode(a),d=d.concat(e);if(a===b)break;a=a.nextNode()}if(a!==
b)throw Error("The input startNode and endNode don't seem to span a range");return d},getForNode:function(c){var b=[];d.getPositions(c).forEach(function(a){(a=this.getForPosition(a))&&b.push(a)},this);return b.sort(function(a,b){return a.getStartOffset()-b.getStartOffset()})},getForPosition:function(c){return this._descriptorMap.get(c)},getInNode:function(c,b,a){return this.getForNode(c).filter(function(c){var d=c.getStartOffset();c=c.getEndOffset();return d>=b&&d<a||c>b&&c<=a||d<b&&c>a})},_removeFromMap:function(c){c=
this._getKey(c);this._descriptorMap["delete"](c)},_getKey:function(c){return c.getRange().getStartPosition()},_clearMap:function(){this._descriptorMap.forEach(f.hitch(this,"_destroyDescriptor"));this._descriptorMap.clear()},_destroyDescriptor:function(c){c.destroy()},destroy:function(){this.inherited(arguments);this.clear()}})})},"MW/rtc/view/decoration/viewmodel/DecorationViewModelProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./DecorationViewModel"],function(h,
f,g){return h(f,{requires:function(){return{createInstance:["rtc.internaldocument","rtc.view.decoration.descriptorsstore"]}},createInstance:function(e,d){return new g(e,d)}})})},"MW/rtc/view/decoration/viewmodel/DecorationViewModel":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/abstract/AbstractPlugin MW/rtc/model/DocumentUtilities MW/rtc/model/Position MW/rtc/model/RangeUtilities MW/rtc/view/decoration/DecorationUtilities MW/rtc/view/decoration/viewmodel/DecorationRangeDescriptor MW/rtc/view/decoration/viewmodel/LayerDecoratorDescriptorStore".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(e,{constructor:function(a,b){this._internalDocument=a;this._descriptorsStore=b;this._layerDecoratorDescriptorsStore=new l;this.own(g.after(this._internalDocument,"onDocumentReset",f.hitch(this,"_handleDocumentReset")))},_handleDocumentReset:function(){this._descriptorsStore.clear();this._layerDecoratorDescriptorsStore.clear()},getDecoration:function(a){var b=this._descriptorsStore.getForNode(a),c=[];if(this._invalidDescriptorsForNode(b,a))return c;b.forEach(function(a){var b=
a.getStartOffset(),d=a.getEndOffset();c.push({start:b,end:d,styles:a.getStyles(),classes:a.getClasses(),domNodes:a.getDomNodes()})});return c},getAllLayerDecoratorsForRange:function(a){return this._layerDecoratorDescriptorsStore.getAllDecoratorsForRange(a)},hasLayerDecorationForLineNumber:function(a){a=this._internalDocument.getRangeForLine(a);a=this._getAllLayerDescriptorsForRange(a);for(var b=0;b<a.length;b+=1){var c=a[b].getClasses();if(0<Object.keys(c).length)return!0}return!1},_getAllLayerDescriptorsForRange:function(a){var b=
[];this._layerDecoratorDescriptorsStore.getAllDecoratorsForRange(a).forEach(function(c){b.push(this._layerDecoratorDescriptorsStore.getDescriptorForRange(a,c))},this);return b},getLayerCssClassesArrayForLineNumber:function(a){var b=[];a=this._internalDocument.getRangeForLine(a);this._getAllLayerDescriptorsForRange(a).forEach(function(a){a=a.getClasses();a=Object.keys(a);b.push(a)},this);return b},_invalidDescriptorsForNode:function(a,b){var c=b.maxOffset(),d=0;return a.some(function(a){var b=a.getStartOffset();
a=a.getEndOffset();if(b<d||a>c||b>a)return!0;d=a})},addClass:function(a,b,c){this._addDecoration(a,function(a){a.forEach(function(a){b.forEach(function(b){a.addClass(b,c)})})})},removeClass:function(a,b,c){this._removeDecoration(a,function(a){return a.filter(function(a){var d=!1;b.forEach(function(b){d=a.removeClass(b,c)||d});return d})})},addLayerClass:function(a,b,c){var d=a.getStartPosition();a=a.getEndPosition();d.setPosition(d.getNode(),0);a.setPosition(d.getNode(),d.getNode().maxOffset());var e=
this._createLayerDescriptor({startPosition:d,endPosition:a});b.forEach(function(a){e.addClass(a,c)},this);e.addChangeListener(f.hitch(this,"_handleLayerDescriptorChanged",e,c));this._layerDecoratorDescriptorsStore.add(c,e);this.onLayerDecoratorUpdate(c)},removeLayerClass:function(a,b,c){var d=a.getStartPosition(),e=a.getEndPosition();d.setPosition(d.getNode(),0);e.setPosition(d.getNode(),d.getNode().maxOffset());var f=this._layerDecoratorDescriptorsStore.getDescriptorForRange(a,c);b.forEach(function(a){f.removeClass(a,
c)});this.onLayerDecoratorUpdate(c)},getDescriptorsForLayerDecorator:function(a){return this._layerDecoratorDescriptorsStore.get(a)},setStyle:function(a,b,c,d){this._addDecoration(a,function(a){a.forEach(function(a){a.setStyle(b,c,d)})})},removeStyle:function(a,b,c){this._removeDecoration(a,function(a){return a.filter(function(a){return a.removeStyle(b,c)})})},addDomNode:function(b,c,d,e){var f,g;switch(d){case a.PLACEMENT.BEFORE:f=b.getStartPosition();g="first";break;case a.PLACEMENT.AFTER:f=b.getEndPosition();
g="last";break;case a.PLACEMENT.BETWEEN:f=b.getStartPosition(),g="last"}this._addDecoration(b,function(a){a=this._getDescriptorForDomNodeLocation(a,d);null!==a&&a.addDomNode(c,f,g,e)}.bind(this))},removeDomNode:function(a,b,c,d){this._removeDecoration(a,function(a){var e=[];a=this._getDescriptorForDomNodeLocation(a,c);null!==a&&a.removeDomNode(b,d)&&e.push(a);return e}.bind(this))},_getDescriptorForDomNodeLocation:function(b,c){if(1>b.length)return null;var d=0;c===a.PLACEMENT.AFTER&&(d=b.length-
1);return b[d]},clearRange:function(a,b){this._removeDecoration(a,function(a){return a.filter(function(a){if(a.clear(b))return!0})})},clearLayerRange:function(a,b){this._layerDecoratorDescriptorsStore.clearRange(a,b);this.onLayerDecoratorUpdate(b)},_addDecoration:function(a,b){if(this._isRangeExpected(a)){var c=this._prepareDescriptorsForRange(a,!0);b(c);c.forEach(this._mergeForSiblingDescriptors,this);this.onDecorationUpdate([a])}},_removeDecoration:function(a,b){if(this._isRangeExpected(a)){var c=
this._prepareDescriptorsForRange(a,!1),d=this._applyCallbackAndGetRemovedRanges(c,b);c.forEach(this._mergeForSiblingDescriptors,this);c.forEach(this._cleanupForSiblingDescriptors,this);this.onDecorationUpdate(d)}},_applyCallbackAndGetRemovedRanges:function(a,b){return b(a).map(function(a){return a.getRange()})},_prepareDescriptorsForRange:function(a,b){this._updateDescriptorsRange(a);var c=a.getStartPosition().getNode(),d=a.getStartPosition().getOffset(),e=a.getEndPosition().getNode(),f=a.getEndPosition().getOffset();
c===e?this._prepareDescriptorsInNode(c,d,f,b):(this._prepareDescriptorsInNode(c,d,c.maxOffset(),b),c.nextNode()!==e&&this._prepareDescriptorsBetweenNodes(c.nextNode(),e.prevNode(),b),this._prepareDescriptorsInNode(e,0,f,b));return this._descriptorsStore.getForRange(a)},_updateDescriptorsRange:function(a){var c=[];this._descriptorsStore.getForRange(a).forEach(function(a){var d=a.getRange();b.rangeIsInsideOneNode(d)||(a=this._handleRangeChangeAcrossNodes(a),c=c.concat(a))},this);this.onDecorationUpdate(c)},
_prepareDescriptorsBetweenNodes:function(a,b,c){for(;a;){this._prepareDescriptorsInNode(a,0,a.maxOffset(),c);if(a===b)break;a=a.nextNode()}if(a!==b)throw Error("The input startNode and endNode don't seem to span a range");},_prepareDescriptorsInNode:function(a,b,c,d){var e=this._descriptorsStore.getInNode(a,b,c);if(0===e.length)d&&this._createAndAddDescriptor(a,b,c);else{var f,g;d&&e.forEach(function(b){f=b.getStartOffset();f>g&&this._createAndAddDescriptor(a,g,f);g=b.getEndOffset()},this);var h=
e[e.length-1],k=h.getStartOffset(),l=h.getEndOffset();c>k&&c<l?this._split(h,c):d&&l<c&&this._createAndAddDescriptor(a,l,c);c=e[0];e=c.getStartOffset();h=c.getEndOffset();b>e&&b<h?this._split(c,b):d&&b<e&&this._createAndAddDescriptor(a,b,e)}},_createAndAddDescriptor:function(a,b,d,e){if(b>=d)return null;b=new c(a,b);a=new c(a,d);e=e||{};f.mixin(e,{startPosition:b,endPosition:a});e=this._createDescriptor(e);e.addChangeListener(f.hitch(this,"_handleDescriptorChanged",e));this._descriptorsStore.add(e);
return e},_createDescriptor:function(a){a.startPosition.setRightAligned(!0);a.startPosition.setLive(!0);a.endPosition.setLive(!0);return new k(a)},_createLayerDescriptor:function(a){a.startPosition.setLive(!0);a.endPosition.setLive(!0);return new k(a)},_split:function(a,b){var c=a.getStartNode(),d=a.cloneSettings(),e=a.getEndOffset();a.adjust(b);return this._createAndAddDescriptor(c,b,e,d)},_mergeForSiblingDescriptors:function(a){a=a.getStartNode();a=this._descriptorsStore.getForNode(a);this._merge(a)},
_merge:function(a){for(var b=0;b<a.length-1;){var c=a[b],d=a[b+1];c.canMerge(d)?(c.merge(d),a.splice(b+1,1),this._descriptorsStore.remove(d)):b+=1}},_cleanupForSiblingDescriptors:function(a){a=a.getStartNode();a=this._descriptorsStore.getForNode(a);this._cleanup(a)},_cleanup:function(a){a.filter(function(a){return!a.hasDecoration()}).forEach(f.hitch(this._descriptorsStore,"remove"))},_handleDescriptorChanged:function(a){var c=a.getRange(),d=this._isRangeStartEndEqual(c),e=b.rangeIsInsideOneNode(c),
f=e&&a.getStartOffset()>a.getEndOffset();d||f?(this._descriptorsStore.remove(a),this.onDecorationUpdate([c])):(a=e?this._handleRangeChangeInNode(a):this._handleRangeChangeAcrossNodes(a),this.onDecorationUpdate(a))},_handleLayerDescriptorChanged:function(a,b,c){if(c.hasOwnProperty("columnHasChanged")){var d=a.getRange(),e=this._isRangeStartEndEqual(d);a=a.getStartOffset()>a.getEndOffset();e=e||a;c.columnHasChanged&&(!c.lineHasChanged&&1===d.getEndPosition().getColumn())&&(e=!1);if(e)this._layerDecoratorDescriptorsStore.clearRange(d,
b),this.onLayerDecoratorUpdate(b);else if(c.lineHasChanged)this.onLayerDecoratorUpdate(b)}},_handleRangeChangeAcrossNodes:function(a){var b=[],c=a.getRange(),e=a.getStartNode(),f=a.getEndNode(),g=a.getEndOffset();if(!c.getStartPosition().isValid()||!c.getEndPosition().isValid()||-1===d.nodesInOrder(e,f))return this._descriptorsStore.remove(a),b;c=e.maxOffset();a.adjust(c);b.push(a.getRange());0<g&&(a=a.cloneSettings(),f=this._createAndAddDescriptor(f,0,g,a),b.push(f.getRange()));return b},_handleRangeChangeInNode:function(a){this._mergeForSiblingDescriptors(a);
return[a.getRange()]},_isRangeExpected:function(a){if(a.getStartPosition().isLinePosition()||a.getEndPosition().isLinePosition())throw Error("Input range for decoration cannot be line positions");return this._isRangeStartEndEqual(a)?!1:!0},_isRangeStartEndEqual:function(a){return a.getStartPosition().isEqualTo(a.getEndPosition())},onDecorationUpdate:function(a){},onLayerDecoratorUpdate:function(a){},destroy:function(){this.inherited(arguments);this._layerDecoratorDescriptorsStore.clear()}})})},"MW/rtc/view/decoration/viewmodel/DecorationRangeDescriptor":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect MW/rtc/browsersupport/BrowserSupportUtilities MW/rtc/model/Range MW/rtc/view/decoration/viewmodel/DecorationAtomicDescriptor".split(" "),
function(h,f,g,e,d,c){return h(c,{constructor:function(b){this._range=new d(b.startPosition,b.endPosition);this._aspectHandles=[];this._setupDescriptorMap(b.descriptorSettings)},_setupDescriptorMap:function(b){this._descriptorMap=e.createMap();b&&b.forEach(function(a){var b=a.decorator;a=new c(a.settings);this._descriptorMap.set(b,a)},this)},addClass:function(b,a){this._getOrCreateAtomicDescriptor(a).addClass(b);this._recalculateDecoration()},setStyle:function(b,a,c){this._getOrCreateAtomicDescriptor(c).setStyle(b,
a);this._recalculateDecoration()},addDomNode:function(b,a,c,d){this._getOrCreateAtomicDescriptor(d).addDomNode(b,a,c);this._recalculateDecoration()},removeClass:function(b,a){var c=this._getAtomicDescriptor(a);if(!c)return!1;c.removeClass(b);this._recalculateDecoration();return!0},removeStyle:function(b,a){var c=this._getAtomicDescriptor(a);if(!c)return!1;c.removeStyle(b);this._recalculateDecoration();return!0},removeDomNode:function(b,a){var c=this._getAtomicDescriptor(a);if(!c)return!1;c.removeDomNode(b);
this._recalculateDecoration();return!0},clear:function(b){if(!this._descriptorMap["delete"](b))return!1;this._recalculateDecoration();return!0},_getOrCreateAtomicDescriptor:function(b){var a=this._getAtomicDescriptor(b);if(a)return a;a=new c;this._descriptorMap.set(b,a);return a},_getAtomicDescriptor:function(b){return this._descriptorMap.get(b)},_recalculateDecoration:function(){var b=this._getSortedAtomicDescriptors(),a={},c={},d=e.createMap();b.forEach(function(b){var e=b.getStyles(),g=b.getClasses();
b=b.getDomNodes();f.mixin(a,e);f.mixin(c,g);b.forEach(function(a,b){d.set(b,a)})},this);this._styles=a;this._classes=c;this._domNodes=d},_getSortedAtomicDescriptors:function(){var b=[];this._descriptorMap.forEach(function(a,c){b.push({decorator:c,descriptor:a})});return b.sort(function(a,b){return a.decorator.priority()-b.decorator.priority()}).map(function(a){return a.descriptor})},merge:function(b){this.adjust(b.getEndOffset())},adjust:function(b){if(0>b)throw Error("Invalid target offset");this._range.getEndPosition().setPosition(this.getStartNode(),
b)},canMerge:function(b){return this._range.getEndPosition().isEqualTo(b.getRange().getStartPosition())&&this._hasSameDecoratorsWith(b)&&this.inherited(arguments)},_hasSameDecoratorsWith:function(b){var a=b.getDescriptorMap();if(this._descriptorMap.size!==a.size)return!1;var c=!0;this._descriptorMap.forEach(function(b,d){a.has(d)||(c=!1)},this);return c},cloneSettings:function(){var b=this.inherited(arguments),a=[];this._descriptorMap.forEach(function(b,c){a.push({decorator:c,settings:b.cloneSettings()})});
b.descriptorSettings=a;return b},getRange:function(){return this._range},getStartNode:function(){return this._range.getStartPosition().getNode()},getStartOffset:function(){return this._range.getStartPosition().getOffset()},getEndNode:function(){return this._range.getEndPosition().getNode()},getEndOffset:function(){return this._range.getEndPosition().getOffset()},getDescriptorMap:function(){return this._descriptorMap},addChangeListener:function(b){this._aspectHandles.push(g.after(this._range.getStartPosition(),
"onChange",b,!0));this._aspectHandles.push(g.after(this._range.getEndPosition(),"onChange",b,!0))},destroy:function(){this._range.getStartPosition().setLive(!1);this._range.getEndPosition().setLive(!1);this._aspectHandles.forEach(function(b){b.remove()});this._aspectHandles=[]}})})},"MW/rtc/view/decoration/viewmodel/DecorationAtomicDescriptor":function(){define(["dojo/_base/declare","MW/rtc/browsersupport/BrowserSupportUtilities"],function(h,f){return h(null,{constructor:function(g){g=g||{};this._styles=
g.styles||{};this._classes=g.classes||{};this._domNodes=g.domNodes||f.createMap()},getClasses:function(){return this._classes},addClass:function(f){this._classes[f]=!0},removeClass:function(f){delete this._classes[f]},getStyles:function(){return this._styles},setStyle:function(f,e){this._styles[f]=e},removeStyle:function(f){delete this._styles[f]},getDomNodes:function(){return this._domNodes},addDomNode:function(f,e,d){this._domNodes.set(f,{rtcPosition:e,domPlacement:d})},removeDomNode:function(f){this._domNodes.delete(f)},
hasDecoration:function(){return 0<Object.keys(this.getStyles()).length||0<Object.keys(this.getClasses()).length||0<this._domNodes.size},canMerge:function(f){return this._objectMatch(this._styles,f.getStyles())&&this._objectMatch(this._classes,f.getClasses())&&this._mapMatch(this._domNodes,f.getDomNodes())},cloneSettings:function(){return{styles:JSON.parse(JSON.stringify(this._styles)),classes:JSON.parse(JSON.stringify(this._classes))}},_objectMatch:function(f,e){var d=Object.keys(f),c=Object.keys(e);
return d.length!==c.length?!1:!d.some(function(b){return f[b]!==e[b]})},_mapMatch:function(f,e){if(f.size!==e.size)return!1;var d=!0;f.forEach(function(c,b){e.has(b)||(d=!1);e.get(b)!==c&&(d=!1)});return d}})})},"MW/rtc/view/decoration/viewmodel/LayerDecoratorDescriptorStore":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/abstract/AbstractPlugin","MW/rtc/browsersupport/BrowserSupportUtilities","MW/rtc/model/PositionUtilities"],function(h,f,g,e,d){return h(g,{constructor:function(){this._descriptorMap=
e.createMap()},add:function(c,b){var a=this._descriptorMap.get(c);if(a){var d=this.getDescriptorForRange(b.getRange(),c);d?this._mergeClasses(d,b,c):a.push(b)}else a=[b],this._descriptorMap.set(c,a)},_mergeClasses:function(c,b,a){b=b.getDescriptorMap().get(a).getClasses();for(var d in b)b.hasOwnProperty(d)&&c.addClass(d,a)},getDescriptorForRange:function(c,b){for(var a=this._descriptorMap.get(b),e=0;e<a.length;e++){var f=a[e],g=f.getRange().getStartPosition(),h=c.getStartPosition(),n=c.getEndPosition();
if(0>=d.comparePositions(h,g)&&0<=d.comparePositions(n,g))return f}return null},get:function(c){return this._descriptorMap.has(c)?this._descriptorMap.get(c):null},getAllDecoratorsForRange:function(c){var b=c.getStartPosition(),a=c.getEndPosition(),e=[];this._descriptorMap.forEach(function(c,f){c.some(function(c){c=c.getRange().getStartPosition();if(0>=d.comparePositions(b,c)&&0<=d.comparePositions(a,c))return e.push(f),!0},this)});return e},clearRange:function(c,b){var a=this.getDescriptorForRange(c,
b);if(null!==a){var d=this._descriptorMap.get(b),a=d.indexOf(a);d.splice(a,1)}c.destroy()},clear:function(){this._clearMap()},_clearMap:function(){this._descriptorMap.forEach(this._destroyDescriptors,this);this._descriptorMap.clear()},_destroyDescriptors:function(c){c.forEach(this._destroyDescriptor,this)},_destroyDescriptor:function(c){c.destroy()},destroy:function(){this.inherited(arguments);this._clearMap()}})})},"MW/rtc/view/rangeconverter/PlainTextRangeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./PlainTextRangeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:[]}},createInstance:function(){return new g}})})},"MW/rtc/view/rangeconverter/PlainTextRangeConverter":function(){define(["dojo/_base/declare","MW/rtc/nodes/leaf/PlainTextNode","./base/TextRangeConverter"],function(h,f,g){return h(g,{constructor:function(){},getApplicableNodeClass:function(){return f}})})},"MW/rtc/view/rangeconverter/RangeConverterProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","./RangeConverter"],function(h,f,g){return h(f,{requires:function(){return{createInstance:["rtc.view.rangeconverter.converter"]}},createInstance:function(e){return new g(e)}})})},"MW/rtc/view/rangeconverter/RangeConverter":function(){define(["dojo/_base/declare","MW/rtc/abstract/AbstractConverterPlugin"],function(h,f){return h(f,{CONVERTER_PLUGIN_NAME:"RangeConverter",constructor:function(f){this._createConverterMap(f)},getRangeFromPosition:function(f){var e=
f.getNode();return(e=this._getConverter(e))?e.getRangeFromPosition(f):null},getContainerForPosition:function(f,e){var d=f.getNode();return(d=this._getConverter(d))?d.getContainerForPosition(f,e):null}})})},"MW/rtc/core/PluginResolver":function(){define("dojo/_base/declare mw-utils/Utils mw-log/Log MW/rtc/core/_dependencyinjector/CachedDependencyInjector MW/rtc/core/_dependencyinjector/LayerableDependencyInjector MW/rtc/core/_dependencyinjector/RegistryBasedDependencyInjector MW/rtc/core/_dependencyinjector/SubsystemDependencyError MW/rtc/core/provider/SubsystemPluginsProviderFactory MW/rtc/core/provider/SubsystemPluginsProviderUtilities".split(" "),
function(h,f,g,e,d,c,b,a,k){return h(null,{_DEFAULT_SUBSYSTEM_ID:"rtc.code.container",constructor:function(a,b,d,e,f){this._subsystemToRequiredPluginIds=this._pluginsBySubsystems=null;this._getOrganizedSubsystemToPlugin(b,d,a);this._resolveSubsystemsWithoutProviders(a);b=this._createBaseInjector(e,f);this._injector=new c({baseInjector:b,registry:a});this._cachedInjector=b},getDependency:function(a){try{return this._injector.getDependency(a)}catch(c){if(!(c instanceof b))throw c;try{var d=c.getSubsystemId();
this._doLateSubsystemLoad(d);this._constructSubsystem(d);return this.getDependency(a)}catch(e){if(!(e instanceof b))throw e;a="RTC PluginResolver: Unable to getDependency for "+a+" because it has a dependency on subsystem "+c.getSubsystemId()+", which is not loaded. Attempting to load that subsystem now failed";e.getSubsystemId()!==c.getSubsystemId()&&(a+="when reaching other subsystem "+e.getSubsystemId()+" which is also not yet loaded");throw Error(a+". It is suggested that you check your RTC enabled feature list.");
}}},resolve:function(){this._createFeaturesUsingInjector()},destroy:function(){this._injector.destroy()},_createPluginsFromSubSystem:function(a){return f.unique(a).map(function(a){return this._injector.getDependency(a)},this).filter(function(a){return!!a})},_resolveSubsystemsWithoutProviders:function(b){var c=this._getSubsystems(b),d=this._getDependencyToProviderPath(b);c.forEach(function(c){d[c]||b.push({id:c,providerClass:a.make(c)})},this)},_createFeaturesUsingInjector:function(){var a=Object.keys(this._pluginsBySubsystems),
c,d=0,e=function(){d++;if(!(d<c.length)){var a="RTC PluginResolver: Failed to construct subsystems after a large number of attempts. Most likely, there is a circular dependency among the following subsystems: "+c.toString()+".";-1<c.indexOf(this._DEFAULT_SUBSYSTEM_ID)&&(a+=" (Note that the subsystem "+this._DEFAULT_SUBSYSTEM_ID+" is the default subsystem, which contains all plugins that are not assigned to another subsystem.)");throw Error(a);}}.bind(this);for(c=a.slice();0<c.length;){var f=c.shift();
try{this._constructSubsystem(f),d=0}catch(g){if(!(g instanceof b))throw g;c.push(f);f=g.getSubsystemId();0>a.indexOf(f)?(this._doLateSubsystemLoad(f),c.unshift(f),d=0):e()}}},_constructSubsystem:function(a){var b=this._createPluginsFromSubSystem(this._pluginsBySubsystems[a]),c=k.getMembersId(a);this._injector.injectDependency(c,b);this._injector.getDependency(a)},_doLateSubsystemLoad:function(a){this._pluginsBySubsystems[a]=this._subsystemToRequiredPluginIds[a]||[]},_getOrganizedSubsystemToPlugin:function(a,
b,c){a=this._removeDisabledElementsFromEnabledPlugins(a,b);var d={},e={},f={};c.forEach(function(a){var b=a.subsystem||this._DEFAULT_SUBSYSTEM_ID,c=a.id;e[c]=b;a.requiredForSubsystem&&(f[b]||(f[b]=[]),f[b].push(c));if(a=a.family)d[a]||(d[a]=[]),d[a].push(c)},this);var h=[];a.forEach(function(a){d[a]?h=h.concat(d[a]):h.push(a)});var h=this._removeDisabledElementsFromEnabledPlugins(h,b),k={};h.forEach(function(a){var b=e[a]||this._DEFAULT_SUBSYSTEM_ID;g.assert(b,'RTC PluginResolver: Invalid registry or feature configuration. After preprocessing, "'+
a+'" was found registered (implicitly or explicitly) under a falsy subsystem ID.');k[b]||(k[b]=[]);k[b].push(a)},this);Object.keys(k).forEach(function(a){var b=f[a];b&&(k[a]=k[a].concat(b))});this._pluginsBySubsystems=k;this._subsystemToRequiredPluginIds=f},_removeDisabledElementsFromEnabledPlugins:function(a,b){return a.filter(function(a){return 0>b.indexOf(a)})},_getDependencyToProviderPath:function(a){var b={};a.forEach(function(a){b[a.id]||(b[a.id]=[]);b[a.id].push(a.path)});return b},_getSubsystems:function(a){var b=
[];a.forEach(function(a){a.subsystem&&0>b.indexOf(a.subsystem)&&b.push(a.subsystem)});return b},_createBaseInjector:function(a,b){var c=new e,f;for(f in a)a.hasOwnProperty(f)&&c.injectDependency(f,a[f]);var g=new d;Object.keys(b).forEach(function(a){g.injectDependency(a,b[a])});g.addInjector(c);return g}})})},"MW/rtc/core/_dependencyinjector/CachedDependencyInjector":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/core/_dependencyinjector/DependencyInjector"],function(h,f,g){return h(g,
{constructor:function(){this._dependencyCache={}},injectDependency:function(e,d){this._dependencyCache[e]=d},getDependency:function(e){return this._dependencyCache[e]}})})},"MW/rtc/core/_dependencyinjector/DependencyInjector":function(){define(["dojo/_base/declare"],function(h){return h(null,{getDependency:function(f){throw Error("Unimplemented API: MW.rtc.core._dependencyinjector.DependencyInjector.getDependency");}})})},"MW/rtc/core/_dependencyinjector/LayerableDependencyInjector":function(){define(["dojo/_base/declare",
"dojo/_base/lang","MW/rtc/core/_dependencyinjector/CachedDependencyInjector","MW/rtc/core/_dependencyinjector/DependencyInjector"],function(h,f,g,e){return h(e,{constructor:function(d){this._passThroughInjectors=[];d&&this.addInjector(d);this._cachedDependancies=new g;this._passThroughInjectors.push(this._cachedDependancies)},addInjector:function(d){this._verifyInstanceOfInjector(d);this._passThroughInjectors.push(d)},injectDependency:function(d,c){this._cachedDependancies.injectDependency(d,c)},
_verifyInstanceOfInjector:function(d){if(!d instanceof e)throw Error("Attempted to add a DependencyInjector that is not an instance of MW.rtc.core/_dependencyinjector.DependencyInjector");},getDependency:function(d){return this._getCachedDependency(d)},_getCachedDependency:function(d){var c;this._passThroughInjectors.forEach(function(b){!c&&b.getDependency(d)&&(c=b.getDependency(d))});return c}})})},"MW/rtc/core/_dependencyinjector/RegistryBasedDependencyInjector":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log MW/rtc/core/_dependencyinjector/CachedDependencyInjector MW/rtc/core/_dependencyinjector/DependencyInjector MW/rtc/core/_dependencyinjector/utilities/DependencyInjectionUtilities MW/rtc/core/provider/PluginProvider MW/rtc/core/provider/SubsystemPluginsProviderUtilities MW/rtc/core/registry/PluginRegistry ./SubsystemDependencyError".split(" "),
function(h,f,g,e,d,c,b,a,k,l){return h(d,{constructor:function(a){a=a||{};var b=a.baseInjector;this._registry=this._formatRegistry(a.registry||k.plugins);this._cachedInjector=b||new e;this._constructedPlugins=[]},injectDependency:function(a,b){this._cachedInjector.injectDependency(a,b)},getDependency:function(d){var e=this._cachedInjector.getDependency(d);if(!e&&a.isAMembersId(d))throw new l(a.getSubsystemId(d));if(e&&!(e instanceof b))return e;if(e||this._registry[d])try{var f=e||this._getFirstApplicable(this._constructMatchingProviders(d));
if(f){g.assert(f instanceof b,"Injected Dependency should be an instanceof PluginProvider");var h=c.getInstanceDependencies(f),k;k=0===h.length?this._constructPluginGivenNoArguments(f):c.constructPlugin(f,this._buildArgumentListGivenKeys(h));if(!k)throw Error("RTC RegistryBasedDependencyInjector: The provider of "+d+" returned a falsy value from createInstance. This is no longer allowed.");this._constructedPlugins.unshift({provider:f,plugin:k});this._cachedInjector.injectDependency(d,k);return k}}catch(s){if(s instanceof
l)throw s;d="Tried to construct registry based plugin in MW/rtc/core/_dependencyinjector/RegistryBasedDependencyInjector: "+d+" but failed with the following exception: "+s;g.assert(!1,d);g.assert(!1,s);throw Error(d);}},destroy:function(){this._constructedPlugins.forEach(function(a){a.provider.destroyInstance(a.plugin)});this._constructedPlugins=[]},_formatRegistry:function(a){var b={};a.forEach(function(a){b[a.id]||(b[a.id]=[]);b[a.id].push(a.path||a.providerClass)});return b},_isProviderApplicable:function(a){var b=
!1,d=c.getIsApplicableDependencies(a),d=this._buildArgumentListGivenKeys(d);c.isPluginApplicable(a,d)&&(b=!0);return b},_buildArgumentListGivenKeys:function(a){var b=[];a.forEach(f.hitch(this,function(a){b.push(this.getDependency(a))}));return b},_constructPluginGivenNoArguments:function(a){return c.constructPlugin(a,[])},_constructMatchingProviders:function(a){var b=[];this._registry[a].forEach(function(a){b.push(c.constructProvider(a))});b.sort(function(a,b){return b.priority()-a.priority()});return b},
_getFirstApplicable:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._isProviderApplicable(c))return c}}})})},"MW/rtc/core/_dependencyinjector/utilities/DependencyInjectionUtilities":function(){define(["mw-log/Log","MW/rtc/core/provider/PluginProvider"],function(h,f){return{getInstanceDependencies:function(f){return this._getDependenciesGivenMethodName(f,"createInstance")},_getDependenciesGivenMethodName:function(g,e){h.assert(g instanceof f,"Not a ProviderInterface.");var d=g.requires();
return(d=d&&d[e])?d:[]},getIsApplicableDependencies:function(f){return this._getDependenciesGivenMethodName(f,"isApplicable")},_constructObjectFromAbsolutePath:function(f){return new (require([f],function(e){return new e})(f))},constructProvider:function(g){g=g instanceof f?g:this._constructObjectFromAbsolutePath(g);h.assert(g instanceof f,"Not a ProviderInterface.");return g},isPluginApplicable:function(g,e){h.assert(g instanceof f,"Not a ProviderInterface.");return g.isApplicable.apply(g,e)},constructPlugin:function(g,
e){h.assert(g instanceof f,"Not a ProviderInterface.");return g.createInstance.apply(g,e)}}})},"MW/rtc/core/provider/SubsystemPluginsProviderUtilities":function(){define([],function(){return{_MEMBERS_ID_PREFIX:"_subsystem_members",isAMembersId:function(h){return h.substring(0,this._MEMBERS_ID_PREFIX.length)===this._MEMBERS_ID_PREFIX},getMembersId:function(h){return this._MEMBERS_ID_PREFIX+h},getSubsystemId:function(h){return h.substring(this._MEMBERS_ID_PREFIX.length)}}})},"MW/rtc/core/_dependencyinjector/SubsystemDependencyError":function(){define(["dojo/_base/declare"],
function(h){return h(null,{constructor:function(f){this._subsystemId=f},getSubsystemId:function(){return this._subsystemId}})})},"MW/rtc/core/provider/SubsystemPluginsProviderFactory":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","./SubsystemPluginsProviderUtilities"],function(h,f,g){return{make:function(e){var d=g.getMembersId(e);return new (h(f,{isApplicable:function(){return!0},requires:function(){return{createInstance:[d]}},createInstance:function(c){return c}}))}}})},
"MW/rtc/keyBindingUtils":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/sniff","mw-event-utils/platformize"],function(h,f,g,e,d){return{addLabelsForActionService:function(c){this._actionService=c;this._connections=[];this._connections.push(g.after(this._actionService,"addAction",f.hitch(this,"_addLabelToAction"),!0));this._connections.push(g.after(this._actionService,"destroy",f.hitch(this,"_dispose")));this._actionService.getAllActions().forEach(f.hitch(this,"_addLabelToAction"))},
_addLabelToAction:function(c){var b=this._createLabel(c);b&&this._actionService.updateAction(c.id,{shortcut:b})},_createLabel:function(c){var b=null,a=!1;if(e("mac")){var d=c.platformShortcut;c=c.platformKey;d&&d.mac?b=d.mac:c&&c.mac&&(b=c.mac,a=!0)}else c.key&&(b=c.key);return this._changeToRequiredCase(b,a)},_changeToRequiredCase:function(c,b){return c?d.getPlatformSpecificString(c,{dontConvertCtrlToCmd:b}):null},_dispose:function(){this._connections.forEach(function(c){c.remove()})}}})},"MW/rtc/HasExtensions":function(){define(["dojo/has"],
function(h){h.add("windows",function(){return 0<=window.navigator.userAgent.toLowerCase().indexOf("windows")});h.add("matlab",function(){return 0<=window.navigator.userAgent.toLowerCase().indexOf("matlab")})})},"MW/layout/BorderContainer":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/fx dojo/_base/window dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/Evented dojo/mouse dojo/on dojo/touch dijit/layout/_LayoutWidget dijit/layout/ContentPane MW/layout/HidingContainer MW/layout/LayoutChildProperty MW/layout/LayoutContainerEvent MW/layout/LayoutUtils MW/layout/MaximizingContainer MW/layout/Restorable MW/layout/SelectionBlocker MW/layout/Traversable mw-log/Log dojo/text!./templates/CollapsedBorderChildH.html dojo/text!./templates/CollapsedBorderChildV.html".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F,H,L){var N=Number.MAX_VALUE,M=["top","left","center","right","bottom"],P=["left","top","center","bottom","right"];return h([r,m,D,t,x],{_:void 0,design:"headline",animationEnabled:!0,minimumCenterWidth:100,minimumCenterHeight:100,baseClass:"borderContainer",constructor:function(){this._borderInfo={};this._dragInfo={}},buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"mwLayoutContainer")},startup:function(){if(!this._started){var a=
this;this.getChildren().forEach(function(b){a._setupChild(b)});this.inherited(arguments)}},addWithProperties:function(a,b){var c=b.region,d;F.assert(c,"No region specified for "+a.id);a.region=c;"center"===c?(this._bindCenterProperties(b),this._isCenterProportional=b.isProportional):(d=this._createBorderInfo(c,a),this._bindChildProperties(d,b),b===a?this._getInfoFromWidget(a,d):(g.mixin(d,b),void 0===b.isResizable&&(d.isResizable=d.hasSplitter)),this._borderInfo[c]=d);this.addChild(a)},addChild:function(a){var b=
a.region,c;F.assert(b,"No region specified for "+a.id);"center"===b?(this._centerWidget=a,this._bindCenterProperties(a)):this._isBorderRegion(b)&&((c=this._borderInfo[b])?F.assert(c.widget.getParent()!==this,b+" region already occupied"):(c=this._createBorderInfo(b,a),this._borderInfo[b]=c,this._getInfoFromWidget(a,c)),this._bindChildProperties(c,a));this.inherited(arguments);this._started&&(this._pendingState&&this._isPopulatedPerState(this._pendingState)?(this._restoreState(this._pendingState),
delete this._pendingState):this.layout(),this.emit(v.STATE_CHANGED));"center"===b&&this._updateExpandedStates()},_setupChild:function(d){var e=d.region,f,h,k;this.inherited(arguments);l.set(d.domNode,"position","absolute");if(e){if(e=this._borderInfo[e]){if(d==e.collapsedWidget)return;e.initComplete=!0}else this._initialCenterWidth=d.domNode.style.width,this._initialCenterHeight=d.domNode.style.height;e&&e.hasSplitter&&(h="H"===e.splitterOrientation?"height":"width",k="H"===e.splitterOrientation?
"padding-top":"padding-left",e.isResizable?(e.initialDimension=this._getDimensionFromStyle(e),e.splitterNode=a.create("div",{id:d.domNode.id+"Splitter"},this.domNode),b.add(e.splitterNode,"splitter"+e.splitterOrientation),c.setSelectable(e.splitterNode,!1),w.preventFocus(e.splitterNode,!0),f=a.create("div",{id:d.domNode.id+"SplitterLine"},e.splitterNode),b.add(f,"splitterLine"+e.splitterOrientation),c.setSelectable(f,!1),w.preventFocus(f,!0),e.splitterThickness=Math.round(l.get(e.splitterNode,h)),
e.visibleSplitterThickness=Math.round(l.get(f,h)),e.preSplitterOverlap=Math.round(l.get(e.splitterNode,k)),e.postSplitterOverlap=e.splitterThickness-e.visibleSplitterThickness-e.preSplitterOverlap,e.followOpposite&&l.set(e.splitterNode,{visibility:"hidden"}),h=g.hitch(this,"_beginSplitterDrag",e),n(e.splitterNode,p.press,h),n(f,p.press,h),h=g.hitch(this,"_handleDoubleClick",e),n(e.splitterNode,"dblclick",h),n(f,"dblclick",h),h=function(a){a.preventDefault()},n(e.splitterNode,"contextmenu",h),n(f,
"contextmenu",h)):(e.splitterNode=a.create("div",{id:d.domNode.id+"Splitter"},this.domNode),l.set(e.splitterNode,"position","absolute"),b.add(e.splitterNode,"splitterLine"+e.splitterOrientation),c.setSelectable(e.splitterNode,!1),w.preventFocus(e.splitterNode),e.splitterThickness=Math.round(l.get(e.splitterNode,h)),e.visibleSplitterThickness=e.splitterThickness,e.preSplitterOverlap=0,e.postSplitterOverlap=0),"function"===typeof e.restoredSplitterPosition&&(e.restoredSplitterPosition=e.restoredSplitterPosition()),
e.collapsePending&&(f=this.animationEnabled,this.animationEnabled=!1,h=e.restoredSplitterPosition,k=e.restoredReferenceDimension,this._collapse(e),e.restoredSplitterPosition=h,e.restoredReferenceDimension=k,this.animationEnabled=f,delete e.collapsePending))}},getChildInRegion:function(a){return"center"===a&&this._centerWidget?this._centerWidget:(a=this._borderInfo[a])?a.widget:null},removeChildInRegion:function(a){(a=this.getChildInRegion(a))&&this.removeChild(a);return a},removeChild:function(b){var c=
b.region,d,e={top:"auto",left:"auto",position:"static",clip:"auto"};if("center"===c)this._centerWidget=null,this._unbindCenterProperties&&this._unbindCenterProperties(),e.width=this._initialCenterWidth,e.height=this._initialCenterHeight;else if(d=this._borderInfo[c])d.unbindChildProperties&&d.unbindChildProperties(),d.initialDimension&&("H"===d.splitterOrientation?e.height=d.initialDimension:e.width=d.initialDimension),d.splitterNode&&a.destroy(d.splitterNode),d.isCollapsed&&r.prototype.removeChild.apply(this,
[d.collapsedWidget]),d.collapsedWidget&&d.collapsedWidget.isDefaultCollapsedWidget&&d.collapsedWidget.destroyRecursive(),delete this._borderInfo[c];this.inherited(arguments);if(d||"center"===c)this._started&&(this.layout(),this.emit(v.STATE_CHANGED)),l.set(b.domNode,e)},collapse:function(a){(a=this._borderInfo[a])&&this._collapse(a)},isCollapsed:function(a){return(a=this._borderInfo[a])?!!a.isCollapsed:!1},isCollapsing:function(a){return(a=this._borderInfo[a])?!!a.isCollapsing:!1},expand:function(a){var b,
c,d=[],e;if("center"===a||!this._centerWidget){c=Object.keys(this._borderInfo);for(b=0;b<c.length;b+=1)e=c[b],e!==a&&!this._borderInfo[e].isCollapsed&&(this._collapse(this._borderInfo[e]),d.push(e));"center"===a?(this._setCenterExpanded(!0),this._regionsCollapsedUponCenterExpand=d):this._borderInfo[a]&&(this._setExpanded(this._borderInfo[a],!0),this._borderInfo[a].regionsCollapsedUponExpand=d)}},isExpanded:function(a){return"center"===a?this._isCenterExpanded:this._borderInfo[a]&&this._borderInfo[a].isExpanded},
restore:function(a){var b,c,d,e;if("center"===a)b=this._isCenterExpanded,d=this._regionsCollapsedUponCenterExpand,this._setCenterExpanded(!1),this._regionsCollapsedUponCenterExpand=null;else if((c=this._borderInfo[a])&&c.isExpanded)b=!0,d=c.regionsCollapsedUponExpand,this._setExpanded(c,!1),c.regionsCollapsedUponExpand=null;if(b){b=Object.keys(this._borderInfo);for(c=0;c<b.length;c+=1)e=b[c],e!==a&&(!d||-1!==d.indexOf(e))&&this._restore(this._borderInfo[b[c]])}else c&&this._restore(c)},canMaximizeLocally:function(a){a=
a.region;var b,c;if(a){if(this.isExpanded(a)||"center"!==a)return!1;a=Object.keys(this._borderInfo);for(b=0;b<a.length;b++)if(c=this._borderInfo[a[b]],c.isCollapsible&&!c.isCollapsed)return!0}return!1},canRestoreLocally:function(a){return(a=a.region)?this.isExpanded(a):!1},maximizeLocally:function(a){(a=a.region)&&this.expand(a)},restoreLocally:function(a){(a=a.region)&&this.restore(a)},revealChild:function(a){a=a.region;this.isCollapsed(a)&&this.restore(a)},nextChild:function(a,b){if(0===this.getChildren().length)return null;
var c=this.traversalOrder||("headline"===this.design?M:P),d=c[c.length-1];if(a&&a.region===d&&this.getParent())return null;var e=a?c.indexOf(a.region):-1,f,g,h;for(f=(e+1)%c.length;f!==e;f=(f+1)%c.length){g=c[f];if("center"===g&&this._centerWidget)return this._centerWidget;if((h=this._borderInfo[g])&&(!b||!h.isCollapsed))if(h.widget.nextChild){if(h.widget.nextChild(null,b))return h.widget}else return h.widget;if((!h||b&&h.isCollapsed)&&g===d&&this.getParent())break}return null},previousChild:function(a,
b){if(0===this.getChildren().length)return null;var c=this.traversalOrder||("headline"===this.design?M:P),d=c[0];if(a&&a.region===d&&this.getParent())return null;var e=a?c.indexOf(a.region):c.length,f,g,h;for(f=(e-1+c.length)%c.length;f!==e;f=(f-1)%c.length){g=c[f];if("center"===g&&this._centerWidget)return this._centerWidget;if((h=this._borderInfo[g])&&(!b||!h.isCollapsed))if(h.widget.previousChild){if(h.widget.previousChild(null,b))return h.widget}else return h.widget;if((!h||b&&h.isCollapsed)&&
g===d&&this.getParent())break}return null},isShowingLocally:function(a){return a.getParent()===this&&!this.isCollapsed(a.region)&&!this.isCollapsing(a.region)},resize:function(){var a,b,c,d,e;this.computedStyle||(this.computedStyle=l.getComputedStyle(this.domNode));this.inherited(arguments);!1===this._isCenterProportional&&(this._portionsAreStale=!0);b=Object.keys(this._dragInfo);0<b.length&&(e=k.getContentBox(this.domNode,this.computedStyle));for(a=0;a<b.length;a+=1)if(c=b[a],d=this._dragInfo[c],
d.animation)switch(c){case "left":e.w!==d.lastReferenceDimension&&(c=e.w-d.lastReferenceDimension,d.oppositeCollapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.w);break;case "top":e.h!==d.lastReferenceDimension&&(c=e.h-d.lastReferenceDimension,d.oppositeCollapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.h);break;case "right":e.w!==d.lastReferenceDimension&&(c=e.w-d.lastReferenceDimension,d.collapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.w);break;case "bottom":e.h!==
d.lastReferenceDimension&&(c=e.h-d.lastReferenceDimension,d.collapsePosition+=c,d.upperLimit+=c,d.lastReferenceDimension=e.h)}},getFreeDimension:function(a){return(a=this._borderInfo[a])&&a.freeDimension?a.freeDimension:0},setFreeDimension:function(a,b){var c=this._borderInfo[a];if(c){var d=k.getContentBox(this.domNode,this.computedStyle),e=this._computeSplitterOverhead(),d="H"===c.splitterOrientation?d.h-e.h:d.w-e.w;0<d&&(e=Math.floor(0.25*d),b>=d?b=Math.max(d-100,e):0>b&&(b=e));c.freeDimension=
b;c.isProportional&&(c.proportion=0<d?c.freeDimension/d:1);this._started&&this.layout()}},getNonCollapsedFreeDimension:function(a){var b=this._borderInfo[a];return b&&b.isCollapsed&&b.preCollapseFreeDimension?b.preCollapseFreeDimension:this.getFreeDimension(a)},getProportion:function(a){return this._getProportion(this._borderInfo[a])},setProportion:function(a,b){var c=this._borderInfo[a];if(c){if(0>b||1<=b)b=0.25;c.proportion=b;this._started&&this.layout()}},getState:function(){var a=k.getContentBox(this.domNode,
this.computedStyle),b={referenceWidth:a.w,referenceHeight:a.h,isCenterExpanded:!!this._isCenterExpanded},c,d=this;Object.keys(this._borderInfo).forEach(function(e){c=d._borderInfo[e];c.isResizable&&(b[e]=d._getBorderState(c,"left"===e||"right"===e?a.w:a.h))});return b},setState:function(a){this._isPopulatedPerState(a)?this._restoreState(a):this._pendingState=a},isRestoringState:function(){return void 0!==this._pendingState},endStateRestore:function(){delete this._pendingState},_isPopulatedPerState:function(a){var b=
!0,c=["left","right","top","bottom"],d,e,f;for(d=0;d<c.length&&b;d+=1)e=c[d],f=!!this._borderInfo[e]&&this._borderInfo[e].isResizable,f!==(void 0!==a[e])&&(b=!1);return b},_restoreState:function(a){var b=k.getContentBox(this.domNode,this.computedStyle),c=a.referenceWidth===b.w,d=a.referenceHeight===b.h,e=this;this._updateLayoutConstraints();Object.keys(this._borderInfo).forEach(function(b){a[b]&&("H"===e._borderInfo[b].splitterOrientation?e._restoreBorderState(b,a[b],d,a.referenceHeight):e._restoreBorderState(b,
a[b],c,a.referenceWidth))})},_getBorderState:function(a,b){var c={freeDimension:a.isCollapsed?this._computeFreeDimensionFromSplitterPosition(a,a.restoredSplitterPosition,b):a.freeDimension,isCollapsed:!!a.isCollapsed};a.proportion&&(c.proportion=a.proportion);return c},_restoreBorderState:function(a,b,c,d){var e,f=this._borderInfo[a];if(f){var h=this.animationEnabled;this.animationEnabled=!1;f.isResizable&&!f.followOpposite&&(c?(this.setFreeDimension(a,b.freeDimension),e=b.freeDimension):(this.setProportion(a,
b.proportion?b.proportion:0.25),e=Math.floor(this._getProportion(f)*d)));f.isCollapsible&&f.isCollapsed!==b.isCollapsed&&(b.isCollapsed?this._collapse(f):this._restore(f));b.isCollapsed&&(f.restoredSplitterPosition=f.initComplete?this._computeSplitterPositionFromFreeDimension(f,e,d):g.hitch(this,"_computeSplitterPositionFromFreeDimension",f,e,d),f.restoredReferenceDimension=d);this.animationEnabled=h}},_getProportion:function(a){return a&&(a.proportion||0===a.portion)?a.proportion:0.25},_getDimensionFromStyle:function(a){return a.widget.domNode.style["H"===
a.splitterOrientation?"height":"width"]},_getBorderThickness:function(a){var b=k.getBorderExtents(a.widget.domNode);return"H"===a.splitterOrientation?b.h:b.w},layout:function(){this._started&&this.domNode&&this._layoutChildren()},_isBorderRegion:function(a){return"left"===a||"right"===a||"top"===a||"bottom"===a},_oppositeRegion:function(a){switch(a){case "top":return"bottom";case "bottom":return"top";case "left":return"right";case "right":return"left"}return"center"},_oppositeBorderInfo:function(a){return this._borderInfo[this._oppositeRegion(a.region)]},
_layoutChildren:function(){this._updateLayoutConstraints();var a=k.getContentBox(this.domNode,this.computedStyle);if(!a||0===a.h||0===a.w)return!1;var b=g.clone(a),c=b.w,d=b.h,e,f,h,m,n={};f={};var p,q,r={},s={},t=this._computeSplitterOverhead(),u=0<Object.keys(this._dragInfo).length,v,x=[];e=Object.keys(this._borderInfo);for(q=0;q<e.length;q++)p=this._borderInfo[e[q]],p.initComplete&&x.push(p);x.sort(function(a,b){return 2*a.layoutOrder+("left"===a.region||"top"===a.region?0:1)-(2*b.layoutOrder+
("left"===b.region||"top"===b.region?0:1))});for(q=0;q<x.length;q++){p=x[q];e=g.clone(b);h=g.clone(b);m=g.clone(b);switch(p.region){case "top":u&&this._portionsAreStale&&this._updatePortion(p,d,t.h);v=this._computeFreeDimension(p,d,t.h);e.h=v;b.t+=e.h;b.h-=e.h;p.splitterNode&&(h.t=b.t-p.preSplitterOverlap,h.h=p.splitterThickness,b.t+=p.visibleSplitterThickness,b.h-=p.visibleSplitterThickness);p.isCollapsed&&(m.h=this._getCollapsedThickness(p));break;case "bottom":u&&this._portionsAreStale&&this._updatePortion(p,
d,t.h);v=this._computeFreeDimension(p,d,t.h);e.h=v;e.t=b.t+b.h-e.h;b.h-=e.h;p.splitterNode&&(h.t=e.t-p.preSplitterOverlap-p.visibleSplitterThickness,h.h=p.splitterThickness,b.h-=p.visibleSplitterThickness);p.isCollapsed&&(m.h=this._getCollapsedThickness(p),m.t=a.t+a.h-m.h);break;case "left":u&&this._portionsAreStale&&this._updatePortion(p,c,t.w);v=this._computeFreeDimension(p,c,t.w);e.w=v;b.l+=e.w;b.w-=e.w;p.splitterNode&&(h.l=b.l-p.preSplitterOverlap,h.w=p.splitterThickness,b.l+=p.visibleSplitterThickness,
b.w-=p.visibleSplitterThickness);p.isCollapsed&&(m.w=this._getCollapsedThickness(p));break;case "right":u&&this._portionsAreStale&&this._updatePortion(p,c,t.w),v=this._computeFreeDimension(p,c,t.w),e.w=v,e.l=b.l+b.w-e.w,b.w-=e.w,p.splitterNode&&(h.l=e.l-p.preSplitterOverlap-p.visibleSplitterThickness,h.w=p.splitterThickness,b.w-=p.visibleSplitterThickness),p.isCollapsed&&(m.w=this._getCollapsedThickness(p),m.l=a.l+a.w-m.w)}n[p.region]={};n[p.region].borderBox=e;n[p.region].splitterBox=h;n[p.region].collapsedBox=
m;f[p.region]=p.isProportional&&!p.isCollapsed;r[p.region]=Math.max(p.minSize,p.minAutoSize)-v;s[p.region]=p.maxSize-v}u&&(this._portionsAreStale=!1);if(this._centerWidget&&!1===this._isCenterProportional&&this._centerSize&&!this._isCenterExpanded&&!u){c=b.w-this._centerSize.w;if(0!==c&&(q=p=c,f.left&&f.right&&(p=this._borderInfo.left.portion,q=this._borderInfo.right.portion,p=c*p/(p+q),q=c-p),f.left&&(p=Math.max(r.left,Math.min(s.left,p)),this._borderInfo.left.freeDimension+=p,n.left.borderBox.w+=
p,b.l+=p,b.w-=p,n.left.splitterBox.l+=p),f.right&&(q=Math.max(r.right,Math.min(s.right,q)),this._borderInfo.right.freeDimension+=q,n.right.borderBox.w+=q,n.right.borderBox.l-=q,b.w-=q,n.right.splitterBox.l-=q),"sidebar"===this.design&&(f.left||f.right)))n.top&&(n.top.borderBox.l=b.l,n.top.borderBox.w=b.w,n.top.splitterBox.l=b.l,n.top.splitterBox.w=b.w),n.bottom&&(n.bottom.borderBox.l=b.l,n.bottom.borderBox.w=b.w,n.bottom.splitterBox.l=b.l,n.bottom.splitterBox.w=b.w);c=b.h-this._centerSize.h;if(0!==
c&&(q=p=c,f.top&&f.bottom&&(p=this._borderInfo.top.portion,q=this._borderInfo.bottom.portion,p=c*p/(p+q),q=c-p),f.top&&(p=Math.max(r.top,Math.min(s.top,p)),this._borderInfo.top.freeDimension+=p,n.top.borderBox.h+=p,b.t+=p,b.h-=p,n.top.splitterBox.t+=p),f.bottom&&(q=Math.max(r.bottom,Math.min(s.bottom,q)),this._borderInfo.bottom.freeDimension+=q,n.bottom.borderBox.h+=q,n.bottom.borderBox.t-=q,b.h-=q,n.bottom.splitterBox.t-=q),"headline"===this.design&&(f.top||f.bottom)))n.left&&(n.left.borderBox.t=
b.t,n.left.borderBox.h=b.h,n.left.splitterBox.t=b.t,n.left.splitterBox.h=b.h),n.right&&(n.right.borderBox.t=b.t,n.right.borderBox.h=b.h,n.right.splitterBox.t=b.t,n.right.splitterBox.h=b.h)}for(q=0;q<x.length;q++){p=x[q];e=n[p.region].borderBox;h=n[p.region].splitterBox;m=n[p.region].collapsedBox;f={t:0,l:0,w:a.l+a.w,h:a.t+a.h};switch(p.region){case "top":e.h<p.minSize?(c=p.minSize-e.h,e.t-=c,e.h=p.minSize,f.t=c):f=null;break;case "bottom":e.h<p.minSize?(f.h=e.h,e.h=p.minSize):f=null;break;case "left":e.w<
p.minSize?(c=p.minSize-e.w,e.l-=c,e.w=p.minSize,f.l=c):f=null;break;case "right":e.w<p.minSize?(f.w=e.w,e.w=p.minSize):f=null}w.setSize(p.widget,e);p.isCollapsed&&w.setSize(this._getCollapsedWidget(p),m);p.isResizable&&l.set(p.widget.domNode,null===f?{clip:"auto"}:w.formatClipStyle(f));p.splitterNode&&(k.setMarginBox(p.splitterNode,h),p.splitterBox=h);p.properties&&(p.properties.freeDimension!==p.freeDimension&&void 0!==p.freeDimension)&&p.properties.set("freeDimension",p.freeDimension)}if(this._centerWidget&&
(w.setSize(this._centerWidget,b),!this._centerSize||u))this._centerSize=b;return!0},_updateLayoutConstraints:function(){if(this._started){var a=this,b,c,d;!this._centerWidget&&!this.isRestoringState()&&Object.keys(this._borderInfo).forEach(function(e){b=a._borderInfo[e];c=("left"===e||"right"===e)&&"headline"===a.design||("top"===e||"bottom"===e)&&"sidebar"===a.design;d=a._oppositeBorderInfo(b);b.isCollapsed&&(c&&(!d||d.isCollapsed||!d.isCollapsible))&&a._setCollapsed(b,!1)});var e,f,g;if(this._borderInfo.left||
this._borderInfo.right){e=!this._centerWidget&&("headline"===this.design||!(this._borderInfo.top||this._borderInfo.bottom));if(this._borderInfo.right&&this._borderInfo.right.isResizable&&(f=!(!e||!this._borderInfo.left),g=!(!e||this._borderInfo.left),f!==this._borderInfo.right.followOpposite||g!==this._borderInfo.right.fillAvailable))this._borderInfo.right.followOpposite=f,this._borderInfo.right.fillAvailable=g,delete this._borderInfo.right.freeDimension,this._borderInfo.left&&delete this._borderInfo.left.freeDimension,
g&&this._setCollapsed(this._borderInfo.right,!1),this._setSplitterVisible(this._borderInfo.right,!(f||g));this._borderInfo.left&&this._borderInfo.left.isResizable&&(g=!(!e||this._borderInfo.right),g!==this._borderInfo.left.fillAvailable&&((this._borderInfo.left.fillAvailable=g)&&this._setCollapsed(this._borderInfo.left,!1),delete this._borderInfo.left.freeDimension,this._setSplitterVisible(this._borderInfo.left,!g)))}if(this._borderInfo.bottom||this._borderInfo.top){e=!this._centerWidget&&("sidebar"===
this.design||!(this._borderInfo.left||this._borderInfo.right));if(this._borderInfo.bottom&&this._borderInfo.bottom.isResizable&&(f=!(!e||!this._borderInfo.top),g=!(!e||this._borderInfo.top),f!==this._borderInfo.bottom.followOpposite||g!==this._borderInfo.bottom.fillAvailable))this._borderInfo.bottom.followOpposite=f,this._borderInfo.bottom.fillAvailable=g,delete this._borderInfo.bottom.freeDimension,this._borderInfo.top&&delete this._borderInfo.top.freeDimension,this._setSplitterVisible(this._borderInfo.bottom,
!(f||g));this._borderInfo.top&&this._borderInfo.top.isResizable&&(g=!(!e||this._borderInfo.bottom),g!==this._borderInfo.top.fillAvailable&&((this._borderInfo.top.fillAvailable=g)&&this._setCollapsed(this._borderInfo.top,!1),delete this._borderInfo.top.freeDimension,this._setSplitterVisible(this._borderInfo.top,!g)))}}},_setSplitterVisible:function(a,b){a.splitterNode&&l.set(a.splitterNode,{visibility:b?"visible":"hidden"})},_setCollapsed:function(a,c){(a.isCollapsed=c)?b.add(a.widget.domNode,"collapsedChild"):
b.remove(a.widget.domNode,"collapsedChild");a.properties&&(a.properties.set(u.IS_COLLAPSED,c),c?a.properties.set(u.IS_SHOWING,!1):w.isShowing(this.domNode)&&a.properties.set(u.IS_SHOWING,!0));var d=this._getCollapsedWidget(a);c?(l.set(d.domNode,"position","absolute"),r.prototype.addChild.apply(this,[d])):r.prototype.removeChild.apply(this,[d])},_setExpanded:function(a,b){a.isExpanded=b;a.properties&&a.properties.set(u.IS_EXPANDED,b)},_setCenterExpanded:function(a){this._isCenterExpanded=a;this._centerProperties&&
this._centerProperties.set(u.IS_EXPANDED,a)},_createBorderInfo:function(a,b){return{region:a,widget:b,hasSplitter:!1,isResizable:!1,splitterOrientation:"top"===a||"bottom"===a?"H":"V",minSize:0,minAutoSize:0,maxSize:N,isCollapsible:!1,layoutOrder:"headline"===this.design&&("top"===a||"bottom"===a)||"sidebar"===this.design&&("left"===a||"right"===a)?0:1,isProportional:!1,proportion:0.25,collapsedWidget:b.collapsedWidget,fillAvailable:!1,followOpposite:!1}},_getInfoFromWidget:function(a,b){void 0!==
a.splitter?b.hasSplitter=a.splitter:void 0!==a.hasSplitter&&(b.hasSplitter=a.hasSplitter);void 0!==a.collapsible?b.isCollapsible=a.collapsible:void 0!==a.isCollapsibled&&(b.isCollapsible=a.isCollapsible);b.isResizable=void 0!==a.resizable?a.resizable:void 0!==a.isResizable?a.isResizable:b.hasSplitter;void 0!==a.minSize&&(b.minSize=a.minSize);void 0!==a.minAutoSize&&(b.minAutoSize=a.minAutoSize);void 0!==a.maxSize&&(b.maxSize=a.maxSize);void 0!==a.layoutOrder&&(b.layoutOrder=a.layoutOrder)},_bindChildProperties:function(a,
b){var c=this,d,e;!a.properties&&(b.watch&&b.set&&b.get)&&(a.properties=b,d=b.watch(u.IS_COLLAPSED,function(b,d,e){e!==a.isCollapsed&&(e?c._collapse(a):c._restore(a))}),e=b.watch(u.IS_EXPANDED,function(b,d,e){e!==a.isExpanded&&(e?c.expand(a.region):c.restore(a.region))}),a.unbindChildProperties=function(){d&&d.remove();e&&e.remove();delete a.properties;delete a.unbindChildProperties})},_bindCenterProperties:function(a){var b=this,c;!this._centerProperties&&(a.watch&&a.set&&a.get)&&(this._centerProperties=
a,c=a.watch(u.IS_EXPANDED,function(a,c,d){d!==b._isCenterExpanded&&(d?b.expand("center"):b.restore("center"))}),this._unbindCenterProperties=function(){c.remove();delete this._centerProperties;delete this._unbindCenterProperties})},_getProperties:function(a){return"center"===a?this._centerProperties:(a=this._borderInfo[a])?a.properties:null},_computeSplitterOverhead:function(){var a=0,b=0,c=this._borderInfo;Object.keys(this._borderInfo).forEach(function(d){c[d.hasSplitter]&&("H"===c[d].splitterOrientation?
b+=c[d].visibleSplitterThickness:a+=c[d].visibleSplitterThickness)});return{w:a,h:b}},_computeFreeDimension:function(a,b,c){var d=Math.max(1,b-c),e;if(e=this._dragInfo[a.region])return a.freeDimension=this._computeFreeDimensionFromSplitterPosition(a,e.splitterPosition,b),this._enforceFreeDimensionLimits(a),a.freeDimension;if(a.isCollapsed)return void 0===a.freeDimension&&(a.freeDimension=this._getCollapsedThickness(a)),a.freeDimension;if(a.fillAvailable)return b;if(e=this._oppositeBorderInfo(a)){if(a.followOpposite)return a.freeDimension=
b-e.freeDimension-(e.splitterNode?e.visibleSplitterThickness:0),a.freeDimension;if(e.followOpposite&&e.isCollapsed)return a.freeDimension=b-a.postSplitterOverlap-a.visibleSplitterThickness-a.preSplitterOverlap,a.freeDimension}if(!a.freeDimension||!a.isResizable&&!a.isProportional){if(e=void 0!==a.initialDimension?a.initialDimension:this._getDimensionFromStyle(a))0<=e.indexOf("%")?a.freeDimension=Math.floor(parseInt(e.slice(0,-1),10)*d/100):a.freeDimension=l.toPixelValue(a.widget.domNode,e)+this._getBorderThickness(a);
this._updatePortion(a,b,c)}if(a.isProportional||!a.freeDimension)b=a.freeDimension,a.freeDimension=Math.floor(this._getProportion(a)*d),a.minSize&&a.freeDimension<a.minSize&&(a.freeDimension=a.minSize),a.minAutoSize&&a.freeDimension<a.minAutoSize&&(a.freeDimension=a.minAutoSize,b&&b<a.freeDimension&&(a.freeDimension=b));this._enforceFreeDimensionLimits(a);return a.freeDimension},_computeFreeDimensionFromSplitterPosition:function(a,b,c){var d=k.getPadExtents(this.domNode,this.computedStyle);b="left"===
a.region||"top"===a.region?b+a.preSplitterOverlap:c-b-a.splitterThickness+a.postSplitterOverlap;switch(a.region){case "left":b-=d.l;break;case "top":b-=d.t;break;case "right":b+=d.l;break;case "bottom":b+=d.t}return b},_computeSplitterPositionFromFreeDimension:function(a,b,c){var d=k.getPadExtents(this.domNode,this.computedStyle);b="left"===a.region||"top"===a.region?b-a.preSplitterOverlap:c-b-a.splitterThickness+a.postSplitterOverlap;switch(a.region){case "left":b+=d.l;break;case "top":b+=d.t;break;
case "right":b-=d.l;break;case "bottom":b-=d.t}return b},_enforceFreeDimensionLimits:function(a){void 0!==a.maxSize&&a.freeDimension>a.maxSize&&(a.freeDimension=a.maxSize);!a.isCollapsible&&(void 0!==a.minSize&&a.freeDimension<a.minSize)&&(a.freeDimension=a.minSize)},_updatePortion:function(a,b,c){a.freeDimension&&(!a.isCollapsed&&a.isProportional&&!a.fillAvailable)&&(b=Math.max(1,b-c),a.proportion=a.freeDimension/b)},_collapse:function(a){if(!a.isCollapsed&&a.isCollapsible)if(a.initComplete){var b=
a.followOpposite;b&&(a=this._oppositeBorderInfo(a));var c=this._dragInfo[a.region];c||(c=this._initDragInfo(a,0,0),this._dragInfo[a.region]=c);c.done=!0;this._doCollapse(c,b)}else a.collapsePending=!0},_restore:function(a){if(a.isCollapsed){var b=a.followOpposite;b&&(a=this._oppositeBorderInfo(a));var c=this._dragInfo[a.region];c||(c=this._initDragInfo(a,0,0),this._dragInfo[a.region]=c);c.done=!0;this._doRestore(c,b)}},_beginSplitterDrag:function(a,b){if((q.isLeft(b)||"touchstart"===b.type)&&!a.isRestoring){if(this._dragInfo[a.region])return;
var c=this._initDragInfo(a,b.pageX,b.pageY);this._dragInfo[a.region]=c;c.connections=[n(this.ownerDocument,p.move,g.hitch(this,"_continueSplitterDrag",c)),n(this.ownerDocument,p.release,g.hitch(this,"_endSplitterDrag",c))];A.blockUntilRelease(this.domNode)}w.stopEvent(b)},_initDragInfo:function(a,b,c){var d={borderInfo:a},e=this._oppositeBorderInfo(a),f=k.getContentBox(this.domNode,this.computedStyle),g=a.splitterBox||k.getMarginBox(a.splitterNode),h=k.getPadExtents(this.domNode,this.computedStyle),
l=a.isCollapsed||e&&e.followOpposite&&e.isCollapsed,m="left"===a.region||"right"===a.region?this.minimumCenterWidth:this.minimumCenterHeight;"V"===a.splitterOrientation?(d.startPoint=b,d.splitterPosition=g.l,d.initialPosition=g.l,d.lastReferenceDimension=f.w,b=h.l,c=f.w,l||(a.restoredSplitterPosition=g.l,a.restoredReferenceDimension=f.w)):(d.startPoint=c,d.splitterPosition=g.t,d.initialPosition=g.t,d.lastReferenceDimension=f.h,b=h.t,c=f.h,l||(a.restoredSplitterPosition=g.t,a.restoredReferenceDimension=
f.h));"left"===a.region||"top"===a.region?(d.lowerLimit=b+this._getCollapsedThickness(a)-a.preSplitterOverlap,d.upperLimit=c+b,e?e.followOpposite?(d.upperLimit-=this._getCollapsedThickness(e)+a.splitterThickness-a.postSplitterOverlap,d.oppositeCollapsePosition=d.upperLimit):d.upperLimit-=m+e.freeDimension:d.upperLimit-=m,d.collapsePosition=d.lowerLimit):(d.lowerLimit=b+m+(e?e.freeDimension:0),d.upperLimit=b+c-this._getCollapsedThickness(a)-a.splitterThickness+a.postSplitterOverlap,d.collapsePosition=
d.upperLimit);d.lastPoint=d.startPoint;return d},_continueSplitterDrag:function(a,b){var c=a.borderInfo,d,e=k.getContentBox(this.domNode,this.computedStyle),f,g,e="V"===c.splitterOrientation?e.w:e.h;f="V"===c.splitterOrientation?b.pageX:b.pageY;var h=f-a.lastPoint;"right"===c.region||"bottom"===c.region?h*=-1:d=this._oppositeBorderInfo(c);a.lastPoint=f;f=a.lastPoint-a.startPoint;3<Math.abs(f)&&!a.hasSplitterMoved&&(a.hasSplitterMoved=!0,this.emit(v.SPLITTER_DRAG_STARTED,c.region));f=a.initialPosition+
f;f<a.lowerLimit?f=a.lowerLimit:f>a.upperLimit&&(f=a.upperLimit);c.isCollapsible&&(g=this._computeFreeDimensionFromSplitterPosition(c,f,e),0<h&&0<g&&this._setCollapsed(c,!1),0>h&&(0<g&&g<c.freeDimension&&g<c.minSize-0)&&this._doCollapse(a));d&&(d.followOpposite&&d.isCollapsible)&&(h*=-1,g=this._computeFreeDimensionFromSplitterPosition(d,f,e),0<h&&0<g&&this._setCollapsed(d,!1),0>h&&(0<g&&g<d.freeDimension&&g<d.minSize-0)&&this._doCollapse(a,!0));if(!a.animation&&!c.isCollapsed&&(!d||!d.followOpposite||
!d.isCollapsed)&&f!==a.splitterPosition)a.splitterPosition=f,this.layout()},_endSplitterDrag:function(a){var b=a.borderInfo,c=this._oppositeBorderInfo(b);a.connections.forEach(function(a){a.remove()});if(a.hasSplitterMoved){if(!b.isCollapsed&&(!c||!c.followOpposite||!c.isCollapsed)&&!a.animation)c=k.getContentBox(this.domNode,this.computedStyle),b.proportion="H"===b.splitterOrientation?b.freeDimension/c.h:b.freeDimension/c.w;a.animation?a.done=!0:(delete this._dragInfo[b.region],this.emit(v.SPLITTER_DRAG_ENDED,
b.region),this.emit(v.STATE_CHANGED))}else b.isCollapsed?this._restore(b):c&&(c.followOpposite&&c.isCollapsed)&&this._restore(c),delete this._dragInfo[b.region]},_handleDoubleClick:function(a,b){if(!a.isCollapsed&&!a.isRestoring){var c=this._oppositeBorderInfo(a);(!c||!c.followOpposite)&&this._collapse(a)}w.stopEvent(b)},_doCollapse:function(a,b){if(!a.animation){var c=this,d=a.borderInfo,f=b?c._oppositeBorderInfo(d):d;d.preCollapseFreeDimension=d.freeDimension;var g=function(){a.animation=null;a.splitterPosition=
b?a.oppositeCollapsePosition:a.collapsePosition;c._layoutChildren()||(d.freeDimension=c._getCollapsedThickness(d));f.isCollapsing=!1;c._setCollapsed(f,!0);c._updateExpandedStates();c.layout();a.done&&(delete c._dragInfo[d.region],c.emit(v.STATE_CHANGED));c.emit(v.SPLITTER_DRAG_ENDED,d.region)};f.isCollapsing=!0;!this.animationEnabled||!w.isAnimationEnabled()?g():(a.splitterStartPosition=a.splitterPosition,a.animation=(new e.Animation({curve:[0,1],onAnimate:function(d){a.splitterPosition=a.splitterStartPosition+
Math.floor(d*((b?a.oppositeCollapsePosition:a.collapsePosition)-a.splitterStartPosition));c.layout()},onEnd:g})).play())}},_doRestore:function(a,b){if(!a.animation){var c=this,d=a.borderInfo;d.isRestoring=!0;var f=k.getContentBox(this.domNode,this.computedStyle),f="V"===d.splitterOrientation?f.w:f.h,g,h;d.restoredSplitterPosition&&(g=d.restoredSplitterPosition,f!==d.restoredReferenceDimension&&(g*=f,g/=d.restoredReferenceDimension));g||(h="left"===d.region||"top"===d.region?0.25:0.75,g=Math.floor(h*
f));b?this._setCollapsed(this._oppositeBorderInfo(d),!1):this._setCollapsed(d,!1);this._setCenterExpanded(!1);f=Object.keys(this._borderInfo);for(h=0;h<f.length;h+=1)this._setExpanded(this._borderInfo[f[h]],!1);f=function(){a.animation=null;a.splitterPosition=g;c.layout();a.done&&(delete c._dragInfo[d.region],c.emit(v.STATE_CHANGED));d.isRestoring=!1};!this.animationEnabled||!w.isAnimationEnabled()?f():a.animation=(new e.Animation({curve:[a.splitterPosition,g],onAnimate:function(b){a.splitterPosition=
Math.floor(b);c.layout()},onEnd:f})).play()}},_getCollapsedWidget:function(a){if(!a.collapsedWidget){var d=new s({content:"H"===a.splitterOrientation?H:L});d.isDefaultCollapsedWidget=!0;b.add(d.domNode,"collapsedBorderChild"+a.splitterOrientation);c.setSelectable(d.domNode,!1);w.preventFocus(d.domNode);var e=a.followOpposite?this._oppositeBorderInfo(a):a;d.own(n(d.domNode,p.press,g.hitch(this,"_beginSplitterDrag",e)));d.own(n(d.domNode,"contextmenu",function(a){a.preventDefault()}));a.collapsedWidget=
d}return a.collapsedWidget},_getCollapsedThickness:function(b){if(!b.collapsedThickness){var c=this._getCollapsedWidget(b),d;l.set(c.domNode,{visibility:"hidden"});a.place(c.domNode,this.domNode);d=k.getContentBox(c.domNode);b.collapsedThickness="H"===b.splitterOrientation?d.h:d.w;this.domNode.removeChild(c.domNode);l.set(c.domNode,{visibility:"visible"})}return b.collapsedThickness},_updateExpandedStates:function(){var a=0,b=0,c,d,e,f;this._centerWidget&&(a+=1,c="center");d=Object.keys(this._borderInfo);
for(e=0;e<d.length&&1>=a;e+=1)f=this._borderInfo[d[e]],f.isCollapsible&&(b++,f.isCollapsed||(a+=1,c=d[e]));1===a&&("center"===c?!this._isCenterExpanded&&b&&(this._setCenterExpanded(!0),this._regionsCollapsedUponCenterExpand=d):(f=this._borderInfo[c],f.isExpanded||(this._setExpanded(f,!0),f.regionsCollapsedUponExpand=d.filter(function(a){return a!==c}))))},destroyRecursive:function(){var a,b,c;a=Object.keys(this._borderInfo);for(b=0;b<a.length;b++)c=this._borderInfo[a[b]],c.collapsedWidget&&!c.isCollapsed&&
c.collapsedWidget.destroyRecursive();this.inherited(arguments)}})})},"MW/layout/HidingContainer":function(){define(["dojo/_base/declare"],function(h){var f=h([],{isShowingLocally:function(f){return f.getParent()===this}});f.isShowingGlobally=function(g){for(var e=g.getParent();e;){if(e.isInstanceOf(f)&&!e.isShowingLocally(g))return!1;g=e;e=g.getParent()}return!0};return f})},"MW/layout/LayoutChildProperty":function(){define([],function(){return{TITLE:"title",DESCRIPTION:"description",REGION:"region",
IS_OPEN:"isOpen",IS_ENABLED:"isEnabled",IS_COLLAPSIBLE:"isCollapsible",IS_COLLAPSED:"isCollapsed",IS_EXPANDED:"isExpanded",IS_MAXIMIZED:"isMaximized",IS_RESIZABLE:"isResizable",IS_SELECTABLE:"isSelectable",IS_SELECTED:"isSelected",IS_SHOWING:"isShowing",ACTIONS:"actions",INDEX:"index",TILE:"tile",PERMISSIBLE_REGIONS:"permissibleRegions",PREFERRED_WIDTH:"preferredWidth",PREFERRED_HEIGHT:"preferredHeight",MINIMUM_WIDTH:"minimumWidth",MINIMUM_HEIGHT:"minimumHeight",SET_ID:"setId",TITLE_SHORTENING_ALLOWED:"titleShorteningAllowed",
DESTROY_ON_CLOSE:"destroyOnClose"}})},"MW/layout/LayoutUtils":function(){define("dojo/_base/event dojo/_base/kernel dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/on dojo/sniff dojo/touch dijit/focus dijit/popup".split(" "),function(h,f,g,e,d,c,b,a,k,l,m){var q=function(a,b){(!a||b.target===a)&&b.preventDefault()},n=function(a){r.stopEvent(a)},p=!0,r={formatClipStyle:function(a){return{clip:"rect("+a.t+"px,"+(a.l+a.w)+"px,"+(a.t+a.h)+"px,"+a.l+"px)"}},isShowing:function(a){return!a||
"hidden"!==c.get(a,"visibility")&&"none"!==c.get(a,"display")&&this.isShowing(a.parent)},setSize:function(a,b){a.resize?a.resize(b):d.setMarginBox(a.domNode,b)},restoreStyle:function(a){c.set(a.domNode,{top:"auto",left:"auto",position:"static",display:"block",clip:"auto"})},removeFromParent:function(b){if(b){var c=b.parentNode;c&&(a("ie")&&c.canHaveChildren&&"removeNode"in b?b.removeNode(!1):c.removeChild(b))}},getScrollPosition:function(a){var b={l:0,t:0};if(a=this._findScrollPane(a))b.l=a.scrollLeft,
b.t=a.scrollTop;return b},setScrollPosition:function(a,b){var c=this._findScrollPane(a);c&&(c.scrollLeft=b.l,c.scrollTop=b.t)},saveScrollPosition:function(a,b){b.scrollPane||(b.scrollPane=this._findScrollPane(a));b.scrollPane&&!b.savedScrollTop&&(b.savedScrollTop=b.scrollPane.scrollTop,b.savedScrollLeft=b.scrollPane.scrollLeft)},restoreScrollPosition:function(a,b){b.scrollPane&&(b.savedScrollTop&&(b.scrollPane.scrollTop=b.savedScrollTop,delete b.savedScrollTop),b.savedScrollLeft&&(b.scrollPane.scrollLeft=
b.savedScrollLeft,delete b.savedScrollLeft))},_findScrollPane:function(a){var b=dojo.query(".scrollPane",a.domNode);return 0<b.length?b[0]:this._findScrolledChild(a.domNode)},_findScrolledChild:function(a){if(a.scrollTop||a.scrollLeft)return a;if(!a.children)return null;var b,c;for(b=0;b<a.children.length;b++)if(c=this._findScrolledChild(a.children[b]))return c;return null},saveIfNotDefault:function(a,b,c,d){c=c.get?c.get(b):c[b];void 0!==c&&c!==d&&(a[b]=c)},restoreOrSetDefault:function(a,b,c,d){a=
void 0===a[b]?d:a[b];c.set?c.set(b,a):c[b]=a},preventDefaultContextMenu:function(a,c){b(a,"contextmenu",g.partial(q,!1===c?a:null))},preventFocus:function(a,c){c||b(a,k.press,n)},stopEvent:function(a){if(this.isPopupShowing()){if(!this.popupHasFocus()){var b=l.curNode;setTimeout(function(){l.focus(b)},0)}}else h.stop(a)},isPopupShowing:function(){return 0<m._stack.length},popupHasFocus:function(){var a=m.getTopPopup().widget.domNode;return a&&(a===l.curNode||e.isDescendant(l.curNode,a))},setLocaleOnDomNode:function(a){(0===
f.locale.indexOf("ko")||0===f.locale.indexOf("ja")||0===f.locale.indexOf("zh"))&&a.classList.add("isCJK")},disableLayoutAnimation:function(){p=!1},enableLayoutAnimation:function(){p=!0},isAnimationEnabled:function(){return p}};return r})},"MW/layout/MaximizingContainer":function(){define(["dojo/_base/declare"],function(h){var f=h([],{canMaximizeLocally:function(f){return!1},canRestoreLocally:function(f){return!1},maximizeLocally:function(f){},restoreLocally:function(f){}});f.canMaximizeGlobally=function(g){var e=
f._getMaximizingContainerAncestor(g);return e&&(e.canMaximizeLocally(g)||f.canMaximizeGlobally(e))};f.canRestoreGlobally=function(g){var e=f._getMaximizingContainerAncestor(g);return e&&(e.canRestoreLocally(g)||f.canRestoreGlobally(e))};f.maximizeGlobally=function(g){var e=f._getMaximizingContainerAncestor(g);e&&(f.maximizeGlobally(e),e.canMaximizeLocally(g)&&e.maximizeLocally(g))};f.restoreGlobally=function(g){var e=f._getMaximizingContainerAncestor(g);e&&(f.restoreGlobally(e),e.canRestoreLocally(g)&&
e.restoreLocally(g))};f._getMaximizingContainerAncestor=function(g){for(g=g.getParent();g&&!g.isInstanceOf(f);)g=g.getParent();return g};return f})},"MW/layout/Restorable":function(){define(["dojo/_base/declare"],function(h){return h([],{getState:function(){return null},setState:function(f){},isRestoringState:function(){return!1},endStateRestore:function(){}})})},"MW/layout/SelectionBlocker":function(){define(["dojo/dom-class","dojo/on","dojo/touch"],function(h,f,g){var e,d,c;return{blockUntilRelease:function(b){if(!d){this.blockSelection(b);
var a=this;d=f(window,g.release,function(){a.unblockSelection(b);d=null})}},blockSelection:function(b){e||(c=b.ownerDocument.body,h.add(c,"noselect"),e=!0)},unblockSelection:function(){e&&(h.remove(c,"noselect"),e=!1)}}})},"MW/layout/Traversable":function(){define(["dojo/_base/declare"],function(h){return h([],{revealChild:function(f){},nextChild:function(f,g){return null},previousChild:function(f,g){return null}})})},"MW/rtc/model/io/OpcPackage":function(){define(["dojo/_base/declare","dojo/_base/lang",
"MW/rtc/model/io/relationship/OpcRelationshipCollection","MW/rtc/model/io/part/OpcPart","MW/rtc/model/io/OpcUtils"],function(h,f,g,e,d){var c=h(null,{constructor:function(){this._opcParts=[];this._opcPackageRelationship=new g},createPart:function(b,a){var c=new e(b,a);this._opcParts.push(c);return c},getPart:function(b){b=b.replace(/^(?:\.\.\/)+/,"/");var a={};this._opcParts.forEach(function(c){var d=c.getPartURI();"/"!==d.charAt(0)&&(d="/"+d);b===d&&(a=c)});return a},getParts:function(){return this._opcParts},
getPartURI:function(b,a,c){var e=[];this._opcParts.forEach(function(a){e.push(a.getPartURI())});return d.getUniquePartUri(b,a,c,e)},createRelationship:function(b,a){return this._opcPackageRelationship.createRelationship(b,a)}});c.toJson=function(b){var a=[];b._opcParts.forEach(f.hitch(this,function(c,d){a.push(e.toJson(b._opcParts[d]))}));return{parts:a,relationships:g.toJson(b._opcPackageRelationship)}};c.fromJson=function(b){var a=new c,d;for(d in b.parts)a._opcParts.push(e.fromJson(b.parts[d]));
a._opcPackageRelationship=g.fromJson(b.relationships);return a};return c})},"MW/rtc/model/io/relationship/OpcRelationshipCollection":function(){define(["dojo/_base/declare","MW/rtc/model/io/relationship/OpcRelationship"],function(h,f){var g=h(null,{_baseRelationshipId:"rId",constructor:function(){this._relationshipIdCounter=0;this._opcRelationshipCollection={}},createRelationship:function(e,d){this._relationshipIdCounter+=1;var c=this._baseRelationshipId+this._relationshipIdCounter;this._opcRelationshipCollection[c]=
new f(c,e,d);return c},getRelationship:function(e){return this._opcRelationshipCollection[e]},getRelationshipCollection:function(){return this._opcRelationshipCollection}});g.toJson=function(e){var d=[],c;for(c in e._opcRelationshipCollection)d.push(f.toJson(e._opcRelationshipCollection[c]));return 0===d.length?null:d};g.fromJson=function(e){var d=g.createInstance();e.forEach(function(c){d._opcRelationshipCollection[c.relationshipId]=f.fromJson(c)});return d};g.createInstance=function(){return new g};
return g})},"MW/rtc/model/io/relationship/OpcRelationship":function(){define(["dojo/_base/declare"],function(h){var f=h(null,{constructor:function(f,e,d){this._relationshipType=e;this._target=d;this._relationshipId=f},getRelationshipType:function(){return this._relationshipType},getTarget:function(){return this._target}});f.toJson=function(f){return{relationshipType:f._relationshipType,target:f._target,relationshipId:f._relationshipId}};f.fromJson=function(g){return new f(g.relationshipId,g.relationshipType,
g.target)};return f})},"MW/rtc/model/io/part/OpcPart":function(){define(["dojo/_base/declare","MW/rtc/model/io/relationship/OpcRelationshipCollection"],function(h,f){var g=h(null,{_relationshipIdCounter:0,constructor:function(e,d){this._partUri=e;this._contentType=d;this._opcPartRelationship=new f},setContent:function(e){this._content=e},getContent:function(){return this._content},getContentType:function(){return this._contentType},getPartURI:function(){return this._partUri},createRelationship:function(e,
d){return this._opcPartRelationship.createRelationship(e,d)},getAllRelationships:function(){return this._opcPartRelationship},getRelationship:function(e){return this._opcPartRelationship.getRelationship(e)}});g.toJson=function(e){return{partUri:e._partUri,contentType:e._contentType,content:e._content,relationship:f.toJson(e._opcPartRelationship)}};g.fromJson=function(e){var d=new g(e.partUri,e.contentType);d.setContent(e.content);e.relationship&&(d._opcPartRelationship=f.fromJson(e.relationship));
return d};return g})},"MW/rtc/model/io/OpcUtils":function(){define(["dojo/_base/lang"],function(h){return{getUniquePartUri:function(f,g,e,d){return this._getUpdatedPartUri(f+(g?g:"")+"."+(e?e:""),d)},_getUpdatedPartUri:function(f,g){var e=this._getFileNameWithCount(f),d=e;g.some(h.hitch(this,function(c){c=this._getFileNameWithCount(c);c.partUri===e.partUri&&c.fileName===e.fileName&&c.fileExtension===e.fileExtension&&c.count>d.count&&(d=c)}));d||(d=e);d.count+=1;return this._getPartUri(d)},_getFileNameWithCount:function(f){var g=
f.split(".");f=g[0];var g=g[1],e=f.lastIndexOf("/"),d=f.slice(e+1),c=d.match(/\d+$/),c=c?parseInt(c[0]):0,d=d.replace(/\d+/g,"");-1===e?f=d:(f=f.slice(0,e),f=f+"/"+d);return{partUri:f,fileName:d,fileExtension:g,count:c}},_getPartUri:function(f){var g=f.partUri+f.count;0!==f.fileExtension.length&&(g=g+"."+f.fileExtension);return g}}})},"MW/rtc/model/io/Reader":function(){define("dojo/_base/lang mw-log/Log MW/rtc/model/io/DocumentTag MW/rtc/model/io/ForwardCompatibility MW/rtc/model/io/XmlUtils MW/rtc/model/io/Serializers".split(" "),
function(h,f,g,e,d,c){return{read:function(b,a,c){var d=a.getPart(g.DOCUMENT_TARGET),d=e.processXML(d.getContent(),["R2018a"]),f=this._getAllTopItems(d.xmlDocument).reduce(h.partial(this._reduceByNodeType,c),[]);a=this._readItems(f,a,c);this._insertNodeInDocument(a.readArray,b);return!d.status},_readItems:function(b,a,c){var e=!0,f=[];b.forEach(function(b){var g=this._getParagraph(b);if(g)b=this._readParagraph(g,a,c),f=f.concat(b.readObject),e=e&&b.readStatus;else{var h=this._getSDT(b);h&&(b=d.getSdtAttribute(h),
g=c.getSerializer(b),h=this._getSDTContent(h),g&&h&&(b=g.read(h,a,c,b),f=f.concat(b.readObject),e=e&&b.readStatus))}},this);return{readStatus:e,readArray:f}},_getParagraph:function(b){return b&&b[0]&&b[0].localName===g.PARAGRAPH_TAG_NAME?b:null},_getSDT:function(b){return b&&b[0]&&b[0].localName===g.SDT_TAG?b[0]:null},_getSDTContent:function(b){for(var a=0;a<b.childNodes.length;a++){var c=b.childNodes[a];if(c.localName===g.SDT_CONTENT_TAG)return c}return null},_readParagraph:function(b,a,c){var e=
!0,f=d.getAttribute(b[0]),g=c.getSerializer(f);if(!f||!g)g=c.getSerializer("text"),e=!1;b=g.read(b,a,c);b.readStatus||(e=!1);return{readObject:b.readObject,readStatus:e}},_reduceByNodeType:function(b,a,c){if(b=b.getSerializer(d.getAttribute(c))){var e=a[a.length-1];e&&d.getAttribute(e[0])===d.getAttribute(c)&&b.mustMerge(e[0],c)?e.push(c):a.push([c])}return a},_insertNodeInDocument:function(b,a){var c={className:"RootNode",children:[]};b.forEach(function(a){c.children.push(a)});a.deserialize(c)},
_getAllTopItems:function(b){b=(new window.DOMParser).parseFromString(b,"text/xml").getElementsByTagNameNS(g.NAMESPACE_URL,g.BODY_TAG_NAME)[0].childNodes;for(var a=[],c=0;c<b.length;c++)a.push(b[c]);return a}}})},"MW/rtc/model/io/ForwardCompatibility":function(){define([],function(){return{_ALTERNATE_CONTENT_TAG:"mc:AlternateContent",_FALLBACK_TAG:"Fallback",_CHOICE_TAG:"Choice",_MARKUP_COMPATIBILITY_NAMESPACE:"http://schemas.openxmlformats.org/markup-compatibility/2006",_REQUIRE_TAG:"Requires",_supportedVersions:[],
_showCompatibilityBanner:!1,processXML:function(h,f){this._showCompatibilityBanner=!1;this._supportedVersions=f;this._latestMatlabVersion=this._getLatestMatlabVersion(f);var g=this._getXMLDocumentObject(h);this._createCompatibilityNode(g);return{xmlDocument:(new window.XMLSerializer).serializeToString(g),status:this._showCompatibilityBanner}},_getLatestMatlabVersion:function(h){if(0===h.length)return"";h.sort();h.reverse();return h[0]},_getXMLDocumentObject:function(h){return(new window.DOMParser).parseFromString(h,
"text/xml")},_hasCompatibilityTag:function(h){return h.nodeName===this._ALTERNATE_CONTENT_TAG},_createCompatibilityNode:function(h){if(this._hasCompatibilityTag(h))return this._getChoiceNodeVersion(h)>this._latestMatlabVersion&&(this._showCompatibilityBanner=!0),this._getCompatibleNode(h);var f=this;[].forEach.call(h.childNodes,function(g,e){var d=f._createCompatibilityNode(g);d?h.replaceChild(d,h.childNodes.item(e)):h.removeChild(g)});return h},_getCompatibleNode:function(h){if(!this._hasElementWithTag(h,
this._CHOICE_TAG)&&!this._hasElementWithTag(h,this._FALLBACK_TAG))return h.childNodes[0];var f=this._hasSupportedVersion(h,this._supportedVersions)?this._CHOICE_TAG:this._FALLBACK_TAG;h=h.getElementsByTagNameNS(this._MARKUP_COMPATIBILITY_NAMESPACE,f);return!h[0]||0===h[0].getElementsByTagName("*").length?null:f===this._FALLBACK_TAG?this._getCompatibleNode(h[0]):h[0].childNodes[0]},_hasElementWithTag:function(h,f){h=h.getElementsByTagNameNS(this._MARKUP_COMPATIBILITY_NAMESPACE,f);return!h||0===h.length?
!1:!0},_getChoiceNodeVersion:function(h){return(h=h.getElementsByTagNameNS(this._MARKUP_COMPATIBILITY_NAMESPACE,this._CHOICE_TAG))&&h[0]?h[0].getAttribute(this._REQUIRE_TAG):!1},_hasSupportedVersion:function(h,f){if(!this._hasElementWithTag(h,this._CHOICE_TAG))return!1;var g=this._getChoiceNodeVersion(h);return-1!==f.indexOf(g)}}})},"MW/rtc/model/io/Writer":function(){define(["dojo/_base/lang","MW/rtc/model/io/DocumentTag","MW/rtc/model/io/XmlUtils"],function(h,f,g){return{write:function(e,d,c){e=
e.serialize(e.root).children.reduce(this._reduceByNodeType,[]);var b=g.createXMLElement(f.BODY_TAG_NAME),a=this._createPart(d,b);this._addRelationship(d);e.forEach(h.hitch(this,function(a){this._createAndAppendParagraphs(b,a,d,c)}));a.setContent(this._getDocumentXML(b))},_addRelationship:function(e){e.createRelationship(f.RELATIONSHIP_TYPE,f.DOCUMENT_TARGET)},_createPart:function(e,d){return e.createPart(f.DOCUMENT_TARGET,f.DOCUMENT_CONTENT_TYPE,this._getDocumentXML(d))},_reduceByNodeType:function(e,
d){var c=e[e.length-1];c&&c[0].className===d.className?c.push(d):e.push([d]);return e},_getDocumentXML:function(e){var d=g.createDocument(f.ROOT_TAG_NAME);d.documentElement.appendChild(e);return g.serializeToFormattedString(d)},_createAndAppendParagraphs:function(e,d,c,b){d=b.getSerializer(d[0].className).write(d,c,b);for(c=d.childNodes.length;0!==c;)e.appendChild(d.childNodes[0]),c--}}})},"MW/rtc/plugins/view/exporters/HTMLContentWriter":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style MW/rtc/plugins/view/exporters/HTMLWriter mw-html-utils/HtmlUtils".split(" "),
function(h,f,g,e,d,c){return f(d,{_IGNOREDSTYLES:["width","height","max-height","overflow"],constructor:function(){},_getStyle:function(b){var a=e.getComputedStyle(b),c=e.getComputedStyle(b.parentNode),d=h.filter(a,function(b){return a[b]!==c[b]&&0>this._IGNOREDSTYLES.indexOf(b)},this);if(g.contains(b,"CodeExampleBlock")||g.contains(b,"ToC")||g.contains(b,"ToCHeading")||g.contains(b,"ToCItems"))d=h.filter(d,function(a){return 0!==a.indexOf("border")},this);var f,d=d.reduce(function(b,c){f=a[c];"text-decoration"===
c&&(f=-1<f.indexOf("underline")?"underline":"none");return b+c+": "+f+"; "},""),d=d+this._nonInheritedStyles.reduce(function(b,c){return 0<parseInt(a[c],10)?b+c+": "+a[c]+"; ":b},"");g.contains(b,"lineNode")&&(0===parseInt(a.paddingLeft,10)&&b.parentNode.firstChild===b&&b.firstElementChild&&b.firstElementChild.offsetLeft!==b.offsetLeft)&&(d+="; padding-left: "+(b.firstElementChild.offsetLeft-parseInt(a.marginLeft,10))+"px");b.className.match(/\balertPlugin-/)&&(d+="; width: "+a.width+"; height: "+
a.height+";");return d},_startNodeElement:function(b){var a=this._getAttributes(b);if(g.contains(b,"heading-1"))this._openTag("div",b,a);else if(g.contains(b,"heading-2"))this._openTag("div",b,a);else{if(g.contains(b,"textBox"))return this._openTag("span",b,a),this._writeTextNode(b),!0;if(g.contains(b,"equationNode"))return this._body+=this._writeEquationNode(b),!0;if("a"===b.localName)this._openTag("a",b," target\x3d'_blank' href \x3d '"+c.escapeHtml(b.href)+"'");else{if("br"===b.localName||"img"===
b.localName)return this._body+=b.outerHTML,!0;this._openTag(b.localName,b,a)}}return!1},_getAttributes:function(b){b=this._getStyle(b);return' style\x3d"'+c.escapeHtml(b).replace(/"/g,"\x26quot;")+'"'},_endNodeElement:function(b){this._tagStack.length&&this._tagStack[0].node===b&&(this._body+="\x3c/"+this._tagStack[0].tag+"\x3e",this._tagStack.shift())},_enterTextNode:function(b){this._body+=c.escapeHtml(this._getNodeText(b))},_write:function(){this._writeBody();var b=e.getComputedStyle(this._internalDocument.root.box);
return"\x3cdiv style \x3d '"+this._inheritedStyles.reduce(function(a,c){return a+c+": "+b[c]+"; "},"")+"'\x3e"+this._body+"\x3c/div\x3e"}})})},"richeditor-converter/REToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-construct dojo/on dojo/query dojo/text!./Toolbar.html".split(" "),function(h,f,g,e,d,c,b,a){return h(null,{constructor:function(a){this._editor=a},_keyScope:"Toolbar",_template:a,place:function(a){this.domNode=d.create("div",{innerHTML:this._template,
id:"rtc"+Math.random().toString(36).substr(2,5)});d.place(this.domNode,a,"before");this._updateActions();c(this.domNode,"[data-on-click]:click",f.hitch(this,function(a){for(var b=a.target;b&&!b.getAttribute("data-on-click");)b=b.parentNode;if(b)this[b.getAttribute("data-on-click")](a,b)}));c(this.domNode,"[data-action-id]:click",f.hitch(this,function(a){this._handleToolbarEvents(a.target)}));e.byId("text_heading_dropdown_select").onchange=f.hitch(this,function(a){this._handleToolbarEvents(a.target.options[a.target.selectedIndex])})},
_handleToolbarEvents:function(a){for(;a&&!a.getAttribute("data-action-id");)a=a.parentNode;a&&"false"!==a.getAttribute("data-enabled")&&this._executeAction(a.getAttribute("data-action-id"))},onAssertDocument:function(a){a.stopPropagation()},setVisible:function(a,c){var d=b("."+a,this.domNode),d=d[0];d.style.display=c?"":"none"},onExecuteAction:function(){},_executeAction:function(a){var b;this.onExecuteAction(a);b=this._editor;b.localActionService.executeAction(a);b.focus()},_updateActions:function(){var a=
this._editor,c,d,e,h;if(a){this._listener&&this._listener.remove();this._listener=g.after(a.localActionService,"onActionChange",f.hitch(this,function(a){var c=b('[data-action-id\x3d"'+a.id+'"]',this.domNode)[0];c&&c.setAttribute("data-"+a.key,a.newValue)}),!0);h=b("[data-action-id]",this.domNode);for(c=0;c<h.length;c+=1)d=h[c],e=(e=a.localActionService.getAction(d.getAttribute("data-action-id")))||{enabled:!1},d.setAttribute("data-enabled",e.enabled),d.setAttribute("data-selected",e.selected)}}})})},
"richeditor-converter/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPluginProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","richeditor-converter/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPlugin"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.document rtc.cursor rtc.keyhandler rtc.view rtc.domnode rtc.divcaret rtc.eventhandler".split(" ")}},createInstance:function(e,d,c,b,a,f,h){return new g(e,
d,c,b,a,f,h)}})})},"richeditor-converter/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPlugin":function(){define(["dojo/_base/declare","dijit/Destroyable","dojo/_base/lang","dojo/aspect","dojo/dom-style"],function(h,f,g,e,d){return h([f],{constructor:function(c,b,a,d,f,h,q){this._cursor=b;this._keyCapture=a.keyCapture;this._rtePane=f;this._view=d;this._divcaret=h.getBox();this._eventHandler=q;this.own(e.before(this._cursor,"onChange",g.hitch(this,"_alignHiddenTextAreaWithCursor")),
e.before(this._eventHandler,"onMouseDown",g.hitch(this,"_alignHiddenTextAreaWhenCursorHidden"),!0))},_alignHiddenTextAreaWithCursor:function(){var c=this._view.getDomtarget().scrollWidth;d.set(this._keyCapture,{right:c-this._divcaret.offsetLeft+"px",top:this._divcaret.offsetTop+"px",padding:"0",border:"0",left:"auto",width:"3px",opacity:"0",height:this._divcaret.style.height})},_alignHiddenTextAreaWhenCursorHidden:function(c){if("undefined"!==typeof c&&("mousedown"===c.type&&this._cursor.isHidden())&&
(c=this._view.getCoordinateFromEvent(c)))this._cursor.setCursorToCoordinates(c),this._cursor.show(),this._cursor.onUpdate()}})})},"richeditor-converter/CustomPlugins/textstyletoolstrip/TextStyleToolstripProvider":function(){define(["dojo/_base/declare","MW/rtc/core/provider/PluginProvider","richeditor-converter/CustomPlugins/textstyletoolstrip/TextStyleToolstrip"],function(h,f,g){return h(f,{isApplicable:function(){return!0},requires:function(){return{createInstance:["rtc.richtext","rtc.actionservice",
"rtc.cursor"]}},createInstance:function(e,d,c){return new g(e,d,c)}})})},"richeditor-converter/CustomPlugins/textstyletoolstrip/TextStyleToolstrip":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","richeditor-converter/CustomPlugins/textstyletoolstrip/ParagraphFormatsEnum"],function(h,f,g,e){return h(null,{constructor:function(d,c,b){this._actionDataService=c;this._cursor=b;this._richText=d;this._actionDataService.loadActions([{id:"rtc_paragraph_style",enabled:!1}]);g.after(this._cursor,
"onChange",f.hitch(this,"_updateActions"))},isRichTextParagraphFormat:function(d){for(var c in e)if(e.hasOwnProperty(c)&&e[c]===d)return!0;return!1},_updateActions:function(){var d=this._richText.getFormatAndStyle(),c=e.NORMAL;this.isRichTextParagraphFormat(d.format)&&(c=d.format);var d="smallNormalTextStyle",b="Normal";switch(c){case e.TITLE:d="smallTitleTextStyle";b="Title";break;case e.HEADING1:d="smallHeadingTextStyle";b="Heading";break;case e.HEADING2:d="smallHeading2TextStyle";b="Heading 2";
break;case e.HEADING3:d="smallHeading3TextStyle",b="Heading 3"}this._actionDataService.updateAction("rtc_paragraph_style",{enabled:this._richText.canSetFormat(),text:b,icon:d})}})})},"richeditor-converter/CustomPlugins/textstyletoolstrip/ParagraphFormatsEnum":function(){define([],function(){return{NORMAL:"text",TITLE:"title",HEADING1:"heading",HEADING2:"heading2",HEADING3:"heading3"}})},"richeditor-converter/PopUpConfig":function(){define(["MW/toolstrip/constants/TypeConstants"],function(h){return{popups:[{tag:"motwToolstrip.liveEditorTab.text.paragraphStyle.paragraphStyleList",
type:h.POPUP_LIST,children:[{tag:"motwToolstrip.liveEditorTab.text.paragraphStyle.paragraphStyleList.normal",actionId:"rtc_paraformat_text",icon:"smallNormalTextStyle",type:h.LIST_ITEM,text:"Normal"},{tag:"motwToolstrip.liveEditorTab.text.paragraphStyle.paragraphStyleList.heading",actionId:"rtc_paraformat_heading",icon:"smallHeadingTextStyle",type:h.LIST_ITEM,text:"Heading"}]}]}})},"richeditor-converter/ToolStripConfig":function(){define(["MW/toolstrip/constants/TypeConstants","MW/toolstrip/constants/MiscConstants"],
function(h,f){return{tag:"motwToolstrip.globalTabGroupTest",type:h.TAB_GROUP,children:[{tag:"motwToolstrip.liveEditorTab",type:h.TAB,title:"LIVE EDITOR",mnemonic:"L",children:[{tag:"motwToolstrip.liveEditorTab.text",type:h.SECTION,title:"TEXT",collapsePriority:3,children:[{tag:"motwToolstrip.liveEditorTab.format.textColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.format.text",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,text:"Text",description:"Text",actionId:"rtc_insert_text",
icon:"smallInsertText",mnemonic:"T"}]},{tag:"motwToolstrip.liveEditorTab.text.paragraphStyle",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.style",type:h.DROP_DOWN_BUTTON,popupTag:"motwToolstrip.liveEditorTab.text.paragraphStyle.paragraphStyleList",actionId:"rtc_paragraph_style",text:"Normal",icon:"smallNormalTextStyle",mnemonic:"H"},{type:h.EMPTY_CONTROL}]},{tag:"motwToolstrip.liveEditorTab.text.boldColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.text.bold",type:h.TOGGLE_BUTTON,
description:"Bold",textOverride:f.DO_NOT_DISPLAY,icon:"smallBold",actionId:"rtc_toggle_bold",mnemonic:"FB"}]},{tag:"motwToolstrip.liveEditorTab.text.italicsColumn",type:h.COLUMN,horizontalAlignment:"center",children:[{tag:"motwToolstrip.liveEditorTab.text.italics",type:h.TOGGLE_BUTTON,textOverride:f.DO_NOT_DISPLAY,actionId:"rtc_toggle_italic",description:"Italics",icon:"smallItalic",mnemonic:"FI"}]},{tag:"motwToolstrip.liveEditorTab.text.underlineColumn",type:h.COLUMN,horizontalAlignment:"center",
children:[{tag:"motwToolstrip.liveEditorTab.text.underline",type:h.TOGGLE_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Underline",icon:"smallUnderline",actionId:"rtc_toggle_underline",mnemonic:"FU"}]},{tag:"motwToolstrip.liveEditorTab.text.monospaceColumn",type:h.COLUMN,horizontalAlignment:"center",children:[{tag:"motwToolstrip.liveEditorTab.text.monospace",type:h.TOGGLE_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Monospace",icon:"smallMonospaced",actionId:"rtc_toggle_monospace",mnemonic:"FM"}]},
{tag:"motwToolstrip.liveEditorTab.text.bulletedListColumn",type:h.COLUMN,horizontalAlignment:"center",children:[{tag:"motwToolstrip.liveEditorTab.text.bulletedList",type:h.TOGGLE_BUTTON,description:"Bullet List",textOverride:f.DO_NOT_DISPLAY,actionId:"rtc_unordered_list",icon:"smallBulletedList"}]},{tag:"motwToolstrip.liveEditorTab.text.numberedListColumn",type:h.COLUMN,horizontalAlignment:"center",children:[{tag:"motwToolstrip.liveEditorTab.text.numberedlist",type:h.TOGGLE_BUTTON,description:"Numbered List",
textOverride:f.DO_NOT_DISPLAY,actionId:"rtc_ordered_list",icon:"smallNumberedList"}]}]},{tag:"motwToolstrip.liveEditorTab.code",type:h.SECTION,collapsePriority:2,title:"CODE",children:[{tag:"motwToolstrip.liveEditorTab.format.codeColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.format.code",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,text:"Code",description:"Code",icon:"smallInsertCode",actionId:"rtc_insert_code",mnemonic:"K"}]},{tag:"motwToolstrip.liveEditorTab.code.commentColumn",
type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.code.comment",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Comment",icon:"smallInsertComment",actionId:"rtc_comment",mnemonic:"R"}]},{tag:"motwToolstrip.liveEditorTab.code.uncommentColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.code.uncomment",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Uncomment",icon:"smallUncomment",actionId:"rtc_uncomment",mnemonic:"T"}]},{tag:"motwToolstrip.liveEditorTab.code.indentColumn",
type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.code.indent",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Indent",icon:"smallIndent",actionId:"rtc_indent",mnemonic:"IN"}]},{tag:"motwToolstrip.liveEditorTab.code.unindentColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.code.unindent",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Unindent",icon:"smallOutdent",actionId:"rtc_unindent",mnemonic:"UI"}]}]},{tag:"motwToolstrip.liveEditorTab.insert",
type:h.SECTION,title:"INSERT",collapsePriority:1,children:[{tag:"motwToolstrip.liveEditorTab.insert.imageColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.insert.image",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Image",icon:"smallImage",actionId:"rtc_image",mnemonic:"A"}]},{tag:"motwToolstrip.liveEditorTab.insert.hyperlinkColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.insert.hyperlink",actionId:"rtc_hyperlink",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,
description:"Hyperlink",icon:"smallHyperlink",mnemonic:"H"}]},{tag:"motwToolstrip.liveEditorTab.insert.equationColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.insert.equation",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"LaTeX",icon:"smallEquation",actionId:"rtc_equation",mnemonic:"Q"}]},{tag:"motwToolstrip.liveEditorTab.insert.attachmentsColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.insert.attachments",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,
text:"Attachments",description:"Attachments",icon:"smallAttachments",mnemonic:"AT"}]}]},{tag:"motwToolstrip.liveEditorTab.help",type:h.SECTION,title:"HELP",collapsePriority:10,children:[{tag:"motwToolstrip.liveEditorTab.help.editorUsageHelpColumn",type:h.COLUMN,children:[{tag:"motwToolstrip.liveEditorTab.help.editorUsageHelp",type:h.PUSH_BUTTON,textOverride:f.DO_NOT_DISPLAY,description:"Help",icon:"smallHelp",mnemonic:"P"}]}]}]}]}})},"richeditor-converter/HTMLDivWriter":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/dom-style","MW/rtc/plugins/view/exporters/HTMLContentWriter"],function(h,f,g,e){return h(e,{_COMMENT_COLOR:"rgb(34, 139, 34)",_KEYWORD_COLOR:"rgb(0, 0, 255)",_STRING_COLOR:"rgb(160, 32, 240)",_UNDET_COLOR:"rgb(179, 0, 0)",_SYSCOMMAND_COLOR:"rgb(179, 140, 0)",constructor:function(){},_getAttributes:function(d){var c=d.className;d.rteNode&&(d.rteNode.bold&&(c+=" bold"),d.rteNode.italic&&(c+=" italic"),d.rteNode.underline&&(c+=" underline"),d.rteNode.monospace&&(c+=" monospace"));
var b="",a=g.getComputedStyle(d),e=a["text-align"];"start"!==e&&"left"!==e&&(b+="text-align: "+a["text-align"]+"; ");if(f.contains(d,"textWrapper")&&"rgb(0, 0, 0)"!==a.color)switch(a.color){case this._COMMENT_COLOR:c+=" Comment";break;case this._KEYWORD_COLOR:c+=" Keyword";break;case this._STRING_COLOR:c+=" String";break;case this._UNDET_COLOR:c+=" UndetString";break;case this._SYSCOMMAND_COLOR:c+=" SysCommand"}d=' class\x3d"'+c+'"';0<b.length&&(d+=' style \x3d "'+b+'"');return d},_write:function(){this._writeBody();
return"\x3cdiv class \x3d 'rtcContent'\x3e"+this._body+"\x3c/div\x3e"}})})},"shared/RichEditor/REditor":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-attr dojo/dom-style dojo/dom-class dojo/on dojo/dom dojo/query dojo/aspect dojo/touch dojo/ready dojo/topic dojo/_base/lang dijit/Destroyable MW/rtc/RichTextComponent dojo/dom-geometry MW/rtc/model/io/OpcPackage MW/rtc/model/io/Reader MW/rtc/model/io/Writer MW/rtc/plugins/view/exporters/HTMLContentWriter shared/RichEditor/REToolbar MW/rtc/clipboardservice/ClipboardService MW/equations/renderer/view/FontsLoaded shared/RichEditor/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPluginProvider shared/RichEditor/CustomPlugins/LockLines/LockLinesPluginProvider".split(" "),
function(h,f,g,e,d,c,b,a,k,l,m,q,n,p,r,s,t,u,v,w,x,B,A,D,F){return h([p],{getLockedRows:!0,constructor:function(){this.textAreaNode=this.rtcInstance=null},replaceDivWithCodeEditor:function(a,b){var c=this._getRtcArguments(!1,b);this.start(a,c)},replaceDivWithTextEditor:function(a){var b=this._getRtcArguments(!0);this.start(a,b);this.toolbarObj=new x(this.rtcInstance);this.toolbarObj.place(this.targetParent)},setReadOnly:function(a){this._document.setReadOnly(a)},convertToReadOnlyRTC:function(a){var b=
this._getRtcArguments(!1);this._createRTCParent();f.place(this.rtcParent,a,"before");this.start(this.placeHolderNode,b);this.rtcInstance.document.setText(a.innerHTML);e.set(this.rtcParent,"display","none");var c=this;setTimeout(function(){var b=c.convertToHTML();a.innerHTML=b;c.destroy()},0)},start:function(a,b){this.target=a.parentElement.parentElement;this.targetParent=this.target.parentElement;this.rtcInstance=new r(b,a);this.rtcInstance.startup();this.rtcInstance.resize();this._document=this.rtcInstance.getDocument();
this._view=this.rtcInstance.getView();this._cursor=this.rtcInstance.getCursor();this._cursor.hide();this._initializeAutogrow();this._handleCursorEvents();this.rtcInstance.own(k.after(this._cursor,"show",n.hitch(this,"_addFocusAttributes",!0)),k.after(this._cursor,"hide",n.hitch(this,"_addFocusAttributes",!1)),k.after(this._cursor,"onChange",n.hitch(this,"_reAdjustWindowScroll")),k.after(this._view.getDomtarget(),"blur",n.hitch(this,function(){this.rtcInstance.blur()})),k.after(this._document,"insertContent",
n.hitch(this,"_autoGrowOnImageLoad")),q.subscribe("viewChanged",n.hitch(this,function(){this.resizeEditor()})),A.then(n.hitch(this,function(){var a=this;setTimeout(function(){a.autoGrow()},0)})))},placeDataInEditor:function(a){a=JSON.parse(a);a=t.fromJson(a);u.read(this.rtcInstance._internalDocument,a,this.rtcInstance._pluginResolver._injector.getDependency("rtc.serializers"));this.autoGrow();this._autoGrowOnImageLoad()},convertToOpcPackage:function(){var a=new t;v.write(this.rtcInstance._internalDocument,
a,this.rtcInstance._pluginResolver._injector.getDependency("rtc.serializers"));a=t.toJson(a);return JSON.stringify(a)},convertToHTML:function(){var a=new w;a.switchToInlineView(this.rtcInstance.localActionService);return a.write(this.rtcInstance._internalDocument)},destroy:function(){f.destroy(this.rtcParent);this.rtcInstance.destroy()},displayCode:function(a){this._document.setText(a);this.resizeEditor()},resizeEditor:function(){this.rtcInstance.resize()},autoGrow:function(){var a=this._view.getDomtarget().offsetHeight;
if(a!==this.target.offsetHeight||this._view.canScroll())a+="px",this.target.style.height=a,this.targetParent.style.height=a,this.rtcInstance.resize(),this._reAdjustWindowScroll()},getReadOnlyLineNumbers:function(){var a=[];this._document.getLinePropertiesArray().forEach(function(b,c){b.readOnly&&a.push(c+1)},this);return a},setReadOnlyLines:function(a){a&&n.isArray(a)&&this._document.setReadOnlyLines(a)},_getRtcArguments:function(a,b){var c={};c["rtc.clipboard"]=B.getBrowserSyncedClipboard();c={"class":"rtePaneFixedSize",
features:null,registry:[{id:"learningtool.movekeycapturewithcursor",path:"shared/RichEditor/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPluginProvider"},{id:"learningtool.locklines",path:"shared/RichEditor/CustomPlugins/LockLines/LockLinesPluginProvider",subsystem:"rtc.left.margin"}],dependencies:c};c.features=a?this._getConfiguration("richText"):this._getConfiguration("codeField");b&&b.readOnlyFeature&&c.features.enabled.push("learningtool.locklines");return c},_getConfiguration:function(a){switch(a){case "richText":return{fixedSize:!0,
enabled:"layoutrules rtc.view.layoutmanager.rule rtc.serializers.serialize rtc.code.formatcode rtc.code.parenmatch rtc.richtext rtc.code.syntaxhighlighter rtc.richtext.lists rtc.richtext.hyperlink rtc.richtext.equations rtc.richtext.images rtc.richtext.insertimage rtc.code.sections.insert rtc.cutcopypaste liveeditor.saveload smartformatting learningtool.movekeycapturewithcursor rtc.code.autoindent".split(" ")};case "codeField":return{defaultFeatureState:!1,plainText:!0,fixedSize:!0,enabled:"rtc.code.syntaxhighlighter rtc.code.autoindent margin.linenumber rtc.code.formatcode rtc.cutcopypaste learningtool.movekeycapturewithcursor".split(" ")}}},
_handleCursorEvents:function(){this.rtcInstance.own(c(document.body,"click",n.hitch(this,function(a){var c=b.isDescendant(a.target,this.rtcInstance.domNode);a=this._handleToolbarCursorEvents(a);!c&&!a?!1===this.rtcInstance.focused||"false"===this.rtcInstance.focused?(this._cursor.releaseAnchor(),this._cursor.hide()):this._cursor.show():(!0===this.rtcInstance.focused||"true"===this.rtcInstance.focused)&&this._cursor.show()})))},_handleToolbarCursorEvents:function(c){var d=!1;this.toolbarObj&&(d=b.isDescendant(c.target,
this.toolbarObj.domNode)||b.isDescendant(c.target,a(".dialog")[0]));return d},_createRTCParent:function(){this.rtcParent=f.create("div");g.set(this.rtcParent,"class","code_template lti_editor lti_editor_sm add_border");var a=f.create("div");g.set(a,"class","windowPane editorWindow");f.place(a,this.rtcParent,"first");var b=f.create("div");g.set(b,"class","rtcWrapper");f.place(b,a,"first");this.placeHolderNode=f.create("div");f.place(this.placeHolderNode,b,"first")},_initializeAutogrow:function(){this.own(k.after(this._document,
"onChange",n.hitch(this,"autoGrow")));var a=this.targetParent.offsetHeight,b=this._view.getDomtarget();e.set(b,{minHeight:a+"px",overflowY:"hidden",overflowX:"auto",height:"auto"})},_cumulativeOffset:function(a){var b=0,c=0;do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a);return{x:c,y:b}},_reAdjustWindowScroll:function(){if(!0!==this._cursor.isHidden()){var a=this._cursor.getLineColumn(),a=this._view.getCoordinateForLineColumn(a.line,a.column),b=this._cumulativeOffset(this.target),
c=window.document.documentElement.clientHeight;a.x+=b.x;a.y+=b.y;(a.y>c+this._getWindowScrollY()||a.y<this._getWindowScrollY())&&window.scrollTo(a.x,a.y-c+this._cursor.getNode().getHeight())}},_getWindowScrollY:function(){return s.docScroll().y},_addFocusAttributes:function(a){!0===a||"true"===a?!0===this.rtcInstance.isEditable()&&(g.set(this.target,"data-focused-on-tab","true"),g.set(this._view.getDomtarget(),"data-refuse-focus-on-tab","true")):(g.set(this.target,"data-focused-on-tab","false"),g.set(this._view.getDomtarget(),
"data-refuse-focus-on-tab","false"))},_autoGrowOnImageLoad:function(){var b=this;a("img",this.target).forEach(function(a){a.onload=function(){b.autoGrow()}},this)}})})},"shared/RichEditor/REToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-construct dojo/on dojo/query dojo/text!./Toolbar.html".split(" "),function(h,f,g,e,d,c,b,a){return h(null,{constructor:function(a){this._editor=a},_keyScope:"Toolbar",_template:a,place:function(a){this.domNode=d.create("div",
{innerHTML:this._template,id:"rtc"+Math.random().toString(36).substr(2,5)});d.place(this.domNode,a,"before");this._updateActions();c(this.domNode,"[data-on-click]:click",f.hitch(this,function(a){for(var b=a.target;b&&!b.getAttribute("data-on-click");)b=b.parentNode;if(b)this[b.getAttribute("data-on-click")](a,b)}));c(this.domNode,"[data-action-id]:click",f.hitch(this,function(a){var b=a.target;for(a.stopPropagation();b&&!b.getAttribute("data-action-id");)b=b.parentNode;b&&"false"!==b.getAttribute("data-enabled")&&
this._executeAction(b.getAttribute("data-action-id"))}))},onAssertDocument:function(a){a.stopPropagation()},setVisible:function(a,c){var d=b("."+a,this.domNode),d=d[0];d.style.display=c?"":"none"},onExecuteAction:function(){},_executeAction:function(a){var b;this.onExecuteAction(a);b=this._editor;b.localActionService.executeAction(a);b.focus()},_updateActions:function(){var a=this._editor,c,d,e,h;if(a){this._listener&&this._listener.remove();this._listener=g.after(a.localActionService,"onActionChange",
f.hitch(this,function(a){var c=b('[data-action-id\x3d"'+a.id+'"]',this.domNode)[0];c&&c.setAttribute("data-"+a.key,a.newValue)}),!0);h=b("[data-action-id]",this.domNode);for(c=0;c<h.length;c+=1)d=h[c],e=(e=a.localActionService.getAction(d.getAttribute("data-action-id")))||{enabled:!1},d.setAttribute("data-enabled",e.enabled),d.setAttribute("data-selected",e.selected)}}})})},"shared/RichEditor/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPluginProvider":function(){define(["dojo/_base/declare",
"MW/rtc/core/provider/PluginProvider","shared/RichEditor/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPlugin"],function(h,f,g){return h(f,{requires:function(){return{createInstance:"rtc.document rtc.cursor rtc.keyhandler rtc.view rtc.domnode rtc.divcaret rtc.eventhandler".split(" ")}},createInstance:function(e,d,c,b,a,f,h){return new g(e,d,c,b,a,f,h)}})})},"shared/RichEditor/CustomPlugins/MoveKeyCaptureWithCursor/MoveKeyCaptureWithCursorPlugin":function(){define(["dojo/_base/declare",
"dijit/Destroyable","dojo/_base/lang","dojo/aspect","dojo/dom-style"],function(h,f,g,e,d){return h([f],{constructor:function(c,b,a,d,f,h,q){this._cursor=b;this._keyCapture=a.keyCapture;this._rtePane=f;this._view=d;this._scrollPane=this._view.getDomtarget();this._divcaret=h.getBox();this._eventHandler=q;this.own(e.before(this._cursor,"onChange",g.hitch(this,"_alignHiddenTextAreaWithCursor")),e.before(this._view,"fixEvent",g.hitch(this,"_alignHiddenTextAreaWhenCursorHidden"),!0))},_alignHiddenTextAreaWithCursor:function(){d.set(this._keyCapture,
{right:this._scrollPane.offsetWidth+this._scrollPane.scrollLeft-this._divcaret.offsetLeft+"px",top:this._divcaret.offsetTop+"px",padding:"0",border:"0",left:"auto",width:"3px",opacity:"0",height:this._divcaret.style.height})},_alignHiddenTextAreaWhenCursorHidden:function(c){if("undefined"!==typeof c&&("mousedown"===c.type||"pointerdown"===c.type))if(this._cursor.isHidden()){if(c=this._view.getCoordinateFromEvent(c))this._cursor.setCursorToCoordinates(c),this._cursor.show(),this._cursor.onUpdate()}else this._alignHiddenTextAreaWithCursor()}})})},
"shared/RichEditor/CustomPlugins/LockLines/LockLinesPluginProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","MW/rtc/margin/DecoratableLineMargin","shared/RichEditor/CustomPlugins/LockLines/LockLinesDecorator","MW/rtc/core/provider/PluginProvider"],function(h,f,g,e,d){return h(d,{isApplicable:function(){return!0},requires:function(){return{isApplicable:[],createInstance:"rtc.view rtc.internaldocument rtc.linenumberservice rtc.focusservice rtc.document rtc.cursor".split(" ")}},createInstance:function(c,
b,a,d,f,h){f=[new e({document:f,cursor:h,internalDocument:b})];return new g(c,b,a,d,f,1)},destroyInstance:function(c){c.dispose()}})})},"shared/RichEditor/CustomPlugins/LockLines/LockLinesDecorator":function(){define("dojo/_base/declare dojo/dom-construct dojo/aspect dojo/dom-class dojo/dom-attr dojo/on dojo/_base/lang dojo/_base/array dojo/mouse MW/rtc/margin/AbstractLineMarginDecorator".split(" "),function(h,f,g,e,d,c,b,a,k,l){return h(l,{NO_LINE:-1,MARGIN_WIDTH:25,constructor:function(a){this._document=
a.document;this._cursor=a.cursor;this._internalDocument=a.internalDocument;this._currentDraggedLineNumber=this._startLockedLine=this.NO_LINE;this._activeListeners=[];a=c(document.body,"mouseup",b.hitch(this,function(a){this._clickFlag&&this._dragFlag&&this.handleMouseUp(a,this._currentDraggedLineNumber)}));this._activeListeners.push(a)},hasLayerForLineNumber:function(a,b){return!0},createDecorationForLineNumber:function(a,b){var c=f.create("button");this._applyStyle(c,a,b);return c},getWidth:function(){return this.MARGIN_WIDTH},
handleMouseDown:function(a,b){this._document.isReadOnly()||(0<=b&&this._cursor.setLineColumn(b+1,1),this._clickFlag=!0,this._createStartLockedLine(a,b))},handleMouseUp:function(a,b){if(!this._document.isReadOnly()){this._currentDraggedLineNumber=b;if(!0===this._dragFlag){var c=Math.min(this._currentDraggedLineNumber,this._startLockedLine),d=Math.max(this._currentDraggedLineNumber,this._startLockedLine),c=this._getLineNumbersBetween(c,d),d=this._isRangeNotReadOnly(c);this._insertBreakIfLastLine(b,
d);this.setRangeAsReadOnly(c,d)}else b===this._startLockedLine&&this._toggleLocked(a,b);this._resetState();this.onUpdate()}},handleMouseMove:function(a,b){this._document.isReadOnly()||(this._currentDraggedLineNumber=b,this._dragFlag=!0,this.onUpdate())},setRangeAsReadOnly:function(a,b){a.forEach(function(a){this._document.setReadOnlyLine(a+1,b)},this)},dispose:function(){this._activeListeners.forEach(function(a){a.remove()},this)},_isRangeNotReadOnly:function(b){return a.some(b,function(a){if(a=this._internalDocument.getLineNode(a))return!1===
a.isReadOnly()},this)},_getLineNumbersBetween:function(a,b){for(var c=[],d=a;d<=b;d++)c.push(d);return c},_createStartLockedLine:function(a,b){this._startLockedLine=b},_resetState:function(){this._startLockedLine!==this.NO_LINE&&(this._startLockedLine=this.NO_LINE);this._currentDraggedLineNumber!==this.NO_LINE&&(this._currentDraggedLineNumber=this.NO_LINE);this._clickFlag=this._dragFlag=!1},_toggleLocked:function(a,b){if(b!==this.NO_LINE){var c=this._internalDocument.getLineNode(b).readOnly;this._insertBreakIfLastLine(b,
!c);this._document.setReadOnlyLine(b+1,!c)}},_applyStyle:function(a,b,c){c=Math.min(this._currentDraggedLineNumber,this._startLockedLine);var d=Math.max(this._currentDraggedLineNumber,this._startLockedLine);this._clickFlag&&(this._dragFlag&&d>=b&&c<=b)&&(e.contains(a,"drag-border")?e.remove(a,"drag-border"):e.add(a,"drag-border"));!this._clickFlag&&!this._dragFlag&&e.contains(a,"drag-border")&&e.remove(a,"drag-border");c=[];d=this._internalDocument.getLineNode(b);e.add(a,"icon-locked");d.readOnly?
e.remove(a,"faded-icon"):e.add(a,"faded-icon");c.push("lockLine");this._addTestTag(a,c,b)},_addTestTag:function(a,b,c){c=b&&0<b.length?c+"_"+b.join("_"):c+"_invalid";d.set(a,"data-testid",c)},_insertBreakIfLastLine:function(a,b){if(this._internalDocument.getLineNode(a)&&!0===b){var c=this._document.getEndOfDocumentLineColumn();c&&c.line===a+1&&this._document.insertBreakAt(c.line,c.column)}}})})},"url:MW/rtc/templates/rtePane.html":'\x3cdiv data-dojo-attach-point\x3d"rtePane"\x3e\x3cdiv class\x3d"rteWindow" data-dojo-attach-point\x3d"rteWindow"\x3e\x3c/div\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/dialog/ConditionalBreakpointTemplate.html":'\x3cdiv class\x3d"rteConditionalBreakpointDialog" data-dojo-attach-point\x3d"contentNode" data-dojo-attach-event\x3d"onkeydown:onTextKeydown"\x3e\n    \x3cspan class\x3d"iconColumn"\x3e\n        \x3cdiv class\x3d"mwIconNode bigConditionalBreakpointDialog" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\x3e\n    \x3c/span\x3e\n    \x3cspan class\x3d"contentColumn"\x3e\n        \x3cdiv class\x3d"fileLabel"\x3e\n            \x3clabel data-dojo-attach-point\x3d"fileLabel"\x3e\x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"condition"\x3e\n            \x3cdiv class\x3d"conditionLabel"\x3e\n                \x3clabel data-dojo-attach-point\x3d"conditionLabel"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv  class\x3d"input-row"\x3e\n                \x3cdiv class\x3d"conditionTextBox" tabindex\x3d"1" data-dojo-attach-point\x3d"conditionInput"\n                     data-dojo-attach-event\x3d"onkeydown:onTextKeydown" data-dojo-type\x3d"dijit.form.TextBox" name\x3d"conditionInput" id\x3d"conditionInput"\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"noteLabel"\x3e\n            \x3clabel data-dojo-attach-point\x3d"noteLabel"\x3e\x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"confirmButtons"\x3e\n            \x3cbutton class\x3d"helpButton" tabindex\x3d"2" data-dojo-type\x3d"dijit.form.Button" data-dojo-attach-point\x3d"helpButton" name\x3d"helpButton" id\x3d"helpButton"\x3e\x3c/button\x3e\n            \x3cbutton class\x3d"cancelButton" tabindex\x3d"3" data-dojo-type\x3d"dijit.form.Button" data-dojo-attach-point\x3d"cancelButton" name\x3d"cancelButton" id\x3d"cancelButton"\x3e\x3c/button\x3e\n            \x3cbutton class\x3d"okButton" tabindex\x3d"4" data-dojo-type\x3d"dijit.form.Button" data-dojo-attach-point\x3d"okButton" name \x3d "okButton" id\x3d"okButton"\x3e\x3c/button\x3e\n        \x3c/div\x3e\n    \x3c/span\x3e\n\x3c/div\x3e',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\n\t${!actionBarTemplate}\n\x3c/div\x3e\n\n',
"url:dojox/layout/resources/FloatingPane.html":'\x3cdiv class\x3d"dojoxFloatingPane" id\x3d"${id}"\x3e\n\t\x3cdiv tabindex\x3d"0" role\x3d"button" class\x3d"dojoxFloatingPaneTitle" dojoAttachPoint\x3d"focusNode"\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"closeNode" dojoAttachEvent\x3d"onclick: close" class\x3d"dojoxFloatingCloseIcon"\x3e\x3c/span\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"maxNode" dojoAttachEvent\x3d"onclick: maximize" class\x3d"dojoxFloatingMaximizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"restoreNode" dojoAttachEvent\x3d"onclick: _restore" class\x3d"dojoxFloatingRestoreIcon"\x3e\x26thinsp;\x3c/span\x3e\t\n\t\t\x3cspan dojoAttachPoint\x3d"dockNode" dojoAttachEvent\x3d"onclick: minimize" class\x3d"dojoxFloatingMinimizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"titleNode" class\x3d"dijitInline dijitTitleNode"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv dojoAttachPoint\x3d"canvas" class\x3d"dojoxFloatingPaneCanvas"\x3e\n\t\t\x3cdiv dojoAttachPoint\x3d"containerNode" role\x3d"region" tabindex\x3d"-1" class\x3d"${contentClass}"\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxFloatingResizeHandle"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:mw-dialog-utils/floatingPaneTemplate.html":'\x3cdiv tabindex\x3d"0" class\x3d"mwNonModalDialog dojoxFloatingPane" id\x3d"${id}"\x3e\n\t\x3cdiv role\x3d"button" class\x3d"dojoxFloatingPaneTitle dijitDialogTitleBar" dojoAttachPoint\x3d"focusNode"\x3e\n        \x3c!--\n         This template is required because the dojox Floating pane template uses onClick Event instead of ondijitclick,\n         which causes some issues with Ipad. Dojo ticket for dialogs not closing on touch devices: http://bugs.dojotoolkit.org/ticket/13488\n         the fix was implemented in _onDijitClickMixin() so using ondijitclick solves the problem.\n\n         This template also groups the icons into a div so that it can be absolute positioned which\n         allows it to be stacked on top of the title node. Previously long titles were overlapping\n         the icons making them unclickable, z-index does not work because the buttons are floats.\n         g985154\n        --\x3e\n\t\t\x3cspan style\x3d"float:left" dojoAttachPoint\x3d"titleNode" class\x3d"dijitInline dijitTitleNode dijitDialogTitle"\x3e\x3c/span\x3e\n\n        \x3cdiv class\x3d"dojoxFloatingIconContainer"\x3e\n            \x3cspan dojoAttachPoint\x3d"closeNode" dojoAttachEvent\x3d"ondijitclick: close" class\x3d"dojoxFloatingCloseIcon"\x3e\x3c/span\x3e\n            \x3cspan dojoAttachPoint\x3d"maxNode" dojoAttachEvent\x3d"ondijitclick: maximize" class\x3d"dojoxFloatingMaximizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n            \x3cspan dojoAttachPoint\x3d"restoreNode" dojoAttachEvent\x3d"ondijitclick: _restore" class\x3d"dojoxFloatingRestoreIcon"\x3e\x26thinsp;\x3c/span\x3e\n            \x3cspan dojoAttachPoint\x3d"dockNode" dojoAttachEvent\x3d"ondijitclick: minimize" class\x3d"dojoxFloatingMinimizeIcon"\x3e\x26thinsp;\x3c/span\x3e\n        \x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv dojoAttachPoint\x3d"canvas" class\x3d"dojoxFloatingPaneCanvas"\x3e\n\t\t\x3cdiv dojoAttachPoint\x3d"containerNode" role\x3d"region" tabindex\x3d"-1" class\x3d"${contentClass}"\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxFloatingResizeHandle"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:MW/rtc/plugins/view/exporters/sectionrules.css":".CodeBlock {margin: 10px 0 10px 0; background-color: #F7F7F7;}.CodeBlock+.paragraphNode {margin-top: 10px;}.lineNode {padding-left: 10px; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}.lineNode .textBox {white-space: pre;}",
"url:MW/rtc/plugins/embeddedoutputs/outputhandlers/css/outputhandler.css":".rtePane .variableNameElement .headerElement {color: rgb(179, 179, 179); font-style: italic;}.rtePane .variableNameElement .headerElement .headerDataType {color: rgb(147, 176, 230);}","url:MW/rtc/plugins/embeddedoutputs/view/css/errorOutput.css":".rtePane .embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .embeddedOutputsErrorElement.inlineElement {}.rtePane .embeddedOutputsErrorElement.rightPaneElement {}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/matrixOutput.css":".rtePane .embeddedOutputsMatrixElement,.rtePane .eoOutputWrapper .matrixElement {min-height: 18px; box-sizing: border-box;}.rtePane .embeddedOutputsMatrixElement .matrixElement,.rtePane .eoOutputWrapper .matrixElement,.rtcDataTipElement .matrixElement {position: relative;}.rtePane .matrixElement .variableValue,.rtcDataTipElement .matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}.rtePane .embeddedOutputsMatrixElement.inlineElement {}.rtePane .embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}.rtePane .embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}.rtePane .inlineElement .matrixElement {max-height: 300px;}.rtePane .embeddedOutputsMatrixElement.rightPaneElement {}.rtePane .rightPaneElement .matrixElement,.rtcDataTipElement .matrixElement {overflow: hidden; padding-left: 9px;}.rtePane .rightPaneElement .matrixElement {margin-bottom: -1px;}.rtePane .embeddedOutputsMatrixElement .matrixElement .valueContainer,.rtePane .eoOutputWrapper .matrixElement .valueContainer,.rtcDataTipElement .matrixElement .valueContainer {white-space: nowrap; margin-bottom: 3px;}.rtePane .embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.rtePane .embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide,.rtePane .eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis.hide,.rtePane .eoOutputWrapper .matrixElement .verticalEllipsis.hide,.rtcDataTipElement .matrixElement .valueContainer .horizontalEllipsis.hide,.rtcDataTipElement .matrixElement .verticalEllipsis.hide {display: none;}.embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .verticalEllipsis, .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .horizontalEllipsis {display:none;}.rtePane .embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis,.rtePane .eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}.rtePane .eoOutputWrapper .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer {cursor: default !important;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/variableTableOutput.css":".rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr {height: 22px; white-space: nowrap;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr td,.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr th {min-width : 75px; max-width : 75px; background-color:white; text-overflow: ellipsis; font-family: 'Arial', sans-serif; font-size: 12px; overflow : hidden;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tbody tr th {width: 34px; max-width: 100px;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr span {text-overflow: ellipsis; padding: 3px;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr th {color: rgba(0,0,0,0.5); padding: 3px; font-size: 9px;}.rtePane .embeddedOutputsVariableTableElement .ClientViewDiv table tr th:first-child {min-width: 28px; max-width: 250px;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/symbolicOutput.css":".rtePane .inlineElement .symbolicElement {margin-top: 1px; margin-bottom: 1px;}.rtePane .rightPaneElement .symbolicElement {padding-top: 3px; padding-left: 9px;}.rtePane .embeddedOutputsSymbolicElement .MathEquation {margin-top: 4px; margin-bottom: 4px;}.rtePane .embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}.rtePane .embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {}.rtePane .embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: auto;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/textOutput.css":".rtePane .embeddedOutputsTextElement,.rtePane .embeddedOutputsVariableStringElement {white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .textElement,.rtcDataTipElement .textElement {padding-top: 3px;}.rtePane .embeddedOutputsTextElement.inlineElement,.rtePane .embeddedOutputsVariableStringElement.inlineElement {}.rtePane .inlineElement .textElement {}.rtePane .embeddedOutputsTextElement.rightPaneElement,.rtePane .embeddedOutputsVariableStringElement.rightPaneElement {min-height: 16px;}.rtePane .rightPaneElement .textElement {padding-top: 2px; padding-left: 9px;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/variableEditor.css":'.rtePane .veSpecifier {}.rtePane .veContainer {}.rtePane .veSpecifierBox {height: 400px; width: 500px;}.rtePane .veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}.rtePane .veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}.rtePane .veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}.rtePane .veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}.rtePane .veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}.rtePane .veSpecifier .veTable .topHeaderWrapper,.rtePane .veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}.rtePane .veMetaSummary {font-style: italic;}.rtePane .veSpecifier .veTable .scroller {overflow: hidden;}.rtePane .veSpecifier .veTable:hover .scroller {overflow: auto;}.rtePane .veSpecifier .veVariableName,.rtePane .veSpecifier .veDimensionFont {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}.rtePane .veSpecifier .veVariableName {padding-top: 2px;}.rtePane .veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}.rtePane .veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}.rtePane .veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}.rtePane .veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}.rtePane .veSpecifier .mw_type_ListBase.showCellBorders,.rtePane .veSpecifier .veTable .topHeaderWrapper,.rtePane .veSpecifier .veTable .bottomRowHeaderWrapper,.rtePane .veSpecifier .veTable .verticalScrollSpacer,.rtePane .veSpecifier .veTable .horizontalScrollSpacer {border: none;}.rtePane .veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}.rtePane .veSpecifier .veTable .columnHeaderNode,.rtePane .veSpecifier .veTable .rowHeaderNode,.rtePane .veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}.rtePane .veSpecifier .veTable .columnHeaderNode,.rtePane .veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}.rtePane .veSpecifier .veTable .dataBody {color: #000000;}.rtePane .veSpecifier .veTable .columnHeaderNode .cell .drag,.rtePane .veSpecifier .veTable .columnHeaderNode .cell .header,.rtePane .veSpecifier .veTable .topHeaderWrapper,.rtePane .veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}.rtePane .veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}.rtePane .veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}.rtePane .veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}.rtePane .veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}',
"url:MW/rtc/plugins/embeddedoutputs/view/css/variableOutput.css":".rtePane .embeddedOutputsVariableElement {white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .variableElement {}.rtePane .embeddedOutputsVariableElement.inlineElement {}.rtePane .inlineElement .variableElement {}.rtePane .embeddedOutputsVariableElement.rightPaneElement {min-height: 16px;}.rtePane .rightPaneElement .variableElement {padding-top: 2px; padding-left: 9px;}.variableNameElement {margin-bottom: 3px; display: inline-block;}",
"url:MW/rtc/plugins/embeddedoutputs/view/css/warningOutput.css":".rtePane .embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}.rtePane .embeddedOutputsWarningElement.inlineElement {}.rtePane .embeddedOutputsWarningElement.rightPaneElement {}","url:MW/rtc/plugins/embeddedoutputs/view/inline/css/inlineoutput.css":".rtePane .outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}.rtePane .outputRegion {}.rtePane .outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}.rtePane .inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}.rtePane .outputParagraph:empty {margin: 0;}",
"url:MW/rtc/plugins/language/matlab/alert/css/alertPlugin.css":".dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}.alertPluginLayer {position: relative !important; z-index: 2;}.rtePane .alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}.rtePane .alertPlugin-onTextLine {visibility: hidden;}.rtePane .alertPlugin-hasTooltip .alertPlugin-warningImg,.rtePane .alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}.rtePane .alertPlugin-alertLine .alertPlugin-warningElement,.rtePane .alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}.rtePane .alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}",
"url:MW/rtc/plugins/language/matlab/diagnosticmessage/css/diagnosticMessage.css":'.diagnosticMessage-wrapper {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}',
"url:MW/rtc/plugins/view/exporters/ellipses.css":'.matrixElement .horizontalEllipsis,.rtcDataTipElement .matrixElement .horizontalEllipsis {display: inline-block; margin-top: 3px; width: 30px; height: 12px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAJCAYAAADO1CeCAAAAJUlEQVR42mP4//8/A70xw0i29BUDFPxnAEtTW37wWDqakIa4pQDvOOG89lHX2gAAAABJRU5ErkJggg\x3d\x3d");}.matrixElement .verticalEllipsis,.textElement .verticalEllipsis,.rtcDataTipElement .matrixElement .verticalEllipsis,.rtcDataTipElement .textElement .verticalEllipsis {margin-left: 35px; width: 12px; height: 30px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAZCAYAAAAIcL+IAAAALklEQVR42mP4//8/AzGYgWyFMECMwv8QddRS+P//KyimlmcGUOFoOI6GI/UVAgDnd8Dd4+NCwgAAAABJRU5ErkJggg\x3d\x3d");}',
"url:mw-menu/templates/Menu.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" tabindex\x3d"0" data-focus\x3d"temporary"\x3e\x3c/div\x3e\n',"url:mw-menu/templates/MenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode"\n        \x3e\x3cdiv class\x3d"mwIconNode" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\n        \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-navigationbar/templates/navigationBar.html":'\x3cdiv class\x3d"navigationBarContainer" data-dojo-attach-point\x3d"navigationBarContainer"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"navigationBarNode" class\x3d"navigationBarNode"\x3e\n        \x3cdiv class\x3d"locationNodeWithIcon" data-dojo-attach-point\x3d"locationNodeWithIcon"\x3e\n            \x3cdiv class\x3d"iconParentDiv" title\x3d""\x3e\n                \x3cdiv class\x3d"navBarIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"currentLocationNode" data-dojo-attach-point\x3d"currentLocationNode" data-tag\x3d""\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:mw-form/templates/DropDownButton.html":'\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"focusNode" class\x3d"mwFocusNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"buttonNode" class\x3d"mwButtonNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"buttonAlignmentNode" class\x3d"mwButtonAlignmentNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"buttonContainerNode" class\x3d"mwButtonContainerNode"\n                \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n                \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode mwBlockTextNode"\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"textLine" class\x3d"mwTextContentNode"\x3e\x3c/div\n                \x3e\x3c/div\n            \x3e\x3c/div\n        \x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"dropDownNode" class\x3d"mwDropDownNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"dropDownAlignmentNode" class\x3d"mwDropDownAlignmentNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"dropDownContainerNode" class\x3d"mwDropDownContainerNode"\n                \x3e\x3cdiv data-dojo-attach-point\x3d"inlineTextNode" class\x3d"mwTextNode mwInlineTextNode"\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"inlineTextLine" class\x3d"mwTextContentNode"\x3e\x3c/div\n                \x3e\x3c/div\n                \x3e\x3cdiv data-dojo-attach-point\x3d"arrowNode" class\x3d"mwArrowNode"\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"lastTextLineNode" class\x3d"mwLastTextLineNode"\n                        \x3e\x3cdiv data-dojo-attach-point\x3d"lastTextLine" class\x3d"mwTextContentNode"\x3e\x3c/div\n                    \x3e\x3c/div\n                    \x3e\x3cdiv data-dojo-attach-point\x3d"arrowIconNode" class\x3d"mwArrowIconNode"\x3e\x3c/div\n                \x3e\x3c/div\n            \x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-overlay-utils/templates/busyOverlayTemplate.html":'\x3cdiv class\x3d"mw-busyIndicator" data-dojo-attach-point\x3d"_busyOverlayNode"\x3e\n\t\x3cdiv class\x3d"underlayNode" data-dojo-attach-point\x3d"_underlayNode"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"spinnerNode" data-dojo-attach-point\x3d"_spinnerNode" \x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:MW/rtc/plugins/debug/css/run_here_14.svg":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 14 14"\x3e\x3cg id\x3d"Layer_2" data-name\x3d"Layer 2"\x3e\x3cg id\x3d"Icons"\x3e\x3cg id\x3d"NEW"\x3e\x3cg id\x3d"CONTEXTUAL_MENU" data-name\x3d"CONTEXTUAL MENU"\x3e\x3cg id\x3d"run_here_14"\x3e\x3crect fill\x3d"#c2b59b" opacity\x3d"0" width\x3d"14" height\x3d"14"/\x3e\x3crect fill\x3d"#414042" x\x3d"9" y\x3d"2" width\x3d"2" height\x3d"10"/\x3e\x3cpolygon fill\x3d"#414042" points\x3d"3 2 3 12 8 7 3 2"/\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e',
"url:MW/rtc/plugins/debug/css/step_in_14.svg":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 14 14"\x3e\x3cg id\x3d"Layer_2" data-name\x3d"Layer 2"\x3e\x3cg id\x3d"Icons"\x3e\x3cg id\x3d"NEW"\x3e\x3cg id\x3d"CONTEXTUAL_MENU" data-name\x3d"CONTEXTUAL MENU"\x3e\x3cg id\x3d"step_in_14"\x3e\x3crect fill\x3d"#c2b59b" fill-opacity\x3d"0" opacity\x3d"0.36" width\x3d"14" height\x3d"14"/\x3e\x3crect fill\x3d"#414042" x\x3d"2" y\x3d"8" width\x3d"7" height\x3d"2"/\x3e\x3crect fill\x3d"#414042" x\x3d"1" y\x3d"1" width\x3d"2" height\x3d"9"/\x3e\x3cpolygon fill\x3d"#414042" points\x3d"9 5 9 13 13 9 9 5"/\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e',
"url:MW/rtc/plugins/embeddedoutputs/view/templateError.html":'\x3cspan\x3e\n    \x3csvg class\x3d"errorImg" width\x3d"14" height\x3d"15" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:svg\x3d"http://www.w3.org/2000/svg"\x3e\n        \x3ccircle id\x3d"error_circle" cx\x3d"7" cy\x3d"8" r\x3d"7" fill\x3d"rgb(204, 55, 41)"/\x3e\n        \x3crect id\x3d"top_bang" fill\x3d"white" x\x3d"6" y\x3d"3" width\x3d"2" height\x3d"6"/\x3e\n        \x3crect id\x3d"bottom_bang" fill\x3d"white" x\x3d"6" y\x3d"11" width\x3d"2" height\x3d"2"/\x3e\n    \x3c/svg\x3e\n\x3c/span\x3e',
"url:mw-form/templates/ToggleButton.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"button" aria-pressed\x3d"false" aria-labelledby\x3d"${id}_label"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconAndTextContainerNode" class\x3d"mwIconAndTextContainerNode mwAlignmentNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode" id\x3d"${id}_label"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/rtc/plugins/embeddedoutputs/codegen/templates/CodeGenWidget.html":'\x3cdiv data-dojo-attach-point\x3d\'containerNode\' class\x3d"${baseClass} figureWidget"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"codeDiv" class\x3d"codeexpander"\x3e\n        \x3cspan class\x3d"codepopuplabel" data-dojo-attach-point\x3d"codeLabel"\x3e${_codeLabel}\x3c/span\x3e\n        \x3cimg data-dojo-attach-point\x3d"arrowImgNode" class\x3d"codepopuparrow"\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"codeGenArea" class\x3d"codegentoggle overlay"\x3e\n        \x3ctextarea name\x3d"codearea" data-dojo-attach-point\x3d"textarea" class\x3d"textcodepopup" readonly rows\x3d"${_MIN_TEXT_SIZE}" dojoType\x3d"dijit.form.Textarea"\x3e\x3c/textarea\x3e\n        \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"updateBtn" class\x3d"codebtn" data-dojo-type\x3d"dijit.form.Button"\x3e${_updateCodeLabel}\x3c/button\x3e\n        \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"copyBtn" class\x3d"codebtn copybutton" data-dojo-type\x3d"dijit.form.Button"\x3e${_copyLabel}\x3c/button\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:MW/rtc/plugins/embeddedoutputs/outputhandlers/figure/floatingpalette/templates/Palette.html":'\x3cdiv data-dojo-attach-point\x3d\'containerNode\' class\x3d"${baseClass} figureWidget" data-tag\x3d"${dataTag}"\x3e\x3c/div \x3e\n',"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\t\t\t${!actionBarTemplate}\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:MW/equations/editor/utils/Templates.xml":'\x3croot\x3e\n    \x3c!--\n        This file contains all available structures.\n\n        The \'id\' will be used to generated the action-id by prepending \'equationeditor.insert.\'.\n\n        If no command-id is given, the id will also be used as command-id\n        (for LaTeX-style backslash commands).\n    --\x3e\n\n    \x3c!-- Structures --\x3e\n    \x3c!-- Script --\x3e\n    \x3ctemplate id\x3d"superscript"\x3e\n        \x3cMathScript data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"subscript"\x3e\n        \x3cMathScript data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"subsuperscript"\x3e\n        \x3cMathScript data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"multiscript"\x3e\n        \x3cMathMultiScript numPostPairs \x3d"1" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"3" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"4" data-category\x3d"placeholder" /\x3e\n        \x3c/MathMultiScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"over"\x3e\n        \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"under"\x3e\n        \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"underover"\x3e\n        \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder" /\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3c!-- Fractions and Radicals --\x3e\n    \x3ctemplate id\x3d"frac"\x3e\n        \x3cMathFraction data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n        \x3c/MathFraction\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"fracbevelled"\x3e\n        \x3cMathFraction data-category\x3d"structure" bevelled\x3d"true"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n        \x3c/MathFraction\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"fracinline"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathText kind\x3d"symbol" text\x3d"\x26#x002F;" symbolName\x3d"slash" data-category\x3d"static" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"sqrt"\x3e\n        \x3cMathRadical data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-category\x3d"static" /\x3e\n        \x3c/MathRadical\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"root"\x3e\n        \x3cMathRadical data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder" /\x3e\n            \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder" /\x3e\n        \x3c/MathRadical\x3e\n    \x3c/template\x3e\n\n    \x3c!-- Operators --\x3e\n    \x3ctemplate id\x3d"int"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathText data-category\x3d"static" kind\x3d"symbol" text\x3d"\x26#x222B;" symbolName\x3d"intop" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"intdef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x222B;" symbolName\x3d"intop" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"oint"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathText data-category\x3d"static" kind\x3d"symbol" text\x3d"\x26#x222E;" symbolName\x3d"contourintop" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"ointdef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x222E;" symbolName\x3d"contourintop" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"sum"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x2211;" symbolName\x3d"sum" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cNull/\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"sumdef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x2211;" symbolName\x3d"sum" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"prod"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x220F;" symbolName\x3d"prod" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cNull/\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"proddef"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" text\x3d"\x26#x220F;" symbolName\x3d"prod" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"lim"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathScript limitStyle\x3d"stack" data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"code" text\x3d"lim" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3cNull/\x3e\n            \x3c/MathScript\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n\n\n    \x3c!-- Misc_Structures --\x3e\n    \x3ctemplate id\x3d"cases"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"braceleft" data-category\x3d"static"/\x3e\n            \x3cMathMatrix data-category\x3d"structure-part" rows\x3d"2" cols\x3d"2"\x3e\n                \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n                \x3cMathRow data-cursor\x3d"1" data-category\x3d"placeholder"/\x3e\n                \x3cMathRow data-cursor\x3d"2" data-category\x3d"placeholder"/\x3e\n                \x3cMathRow data-cursor\x3d"3" data-category\x3d"placeholder"/\x3e\n            \x3c/MathMatrix\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"derivative"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"code" text\x3d"d" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText data-category\x3d"static" kind\x3d"code" text\x3d"d" /\x3e\n                    \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n\n    \x3ctemplate id\x3d"derivativeN"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"static"\x3e\n                            \x3cMathText kind\x3d"code" text\x3d"d" /\x3e\n                        \x3c/MathRow\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText kind\x3d"code" text\x3d"d" data-category\x3d"static" /\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"3" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"partialderivative"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"static"\x3e\n                    \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" /\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" data-category\x3d"static" /\x3e\n                    \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n\n    \x3ctemplate id\x3d"partialderivativeN"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathFraction data-category\x3d"structure-part"\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"static"\x3e\n                            \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" /\x3e\n                        \x3c/MathRow\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"1" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n                \x3cMathRow data-category\x3d"structure-part"\x3e\n                    \x3cMathText kind\x3d"symbol" symbolName\x3d"partial" data-category\x3d"static" /\x3e\n                    \x3cMathScript\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"2" /\x3e\n                        \x3cNull/\x3e\n                        \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"3" /\x3e\n                    \x3c/MathScript\x3e\n                \x3c/MathRow\x3e\n            \x3c/MathFraction\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n\n    \x3c!-- Brackets --\x3e\n    \x3ctemplate id\x3d"parentheses"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"parenleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"parenright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"brackets"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"bracketleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"bracketright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"braces"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"braceleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"braceright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"ceil"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"ceilleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"ceilright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"floor"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"floorleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"floorright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"anglebracket"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"anglebracketleft" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"anglebracketright" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"bars"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"verticalbar" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"verticalbar" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"doublebars"\x3e\n        \x3cMathRow data-category\x3d"structure"\x3e\n            \x3cMathDelimiter symbolName\x3d"dblverticalbar" data-category\x3d"static" /\x3e\n            \x3cMathRow data-category\x3d"placeholder" data-cursor\x3d"0" /\x3e\n            \x3cMathDelimiter symbolName\x3d"dblverticalbar" data-category\x3d"static" /\x3e\n        \x3c/MathRow\x3e\n    \x3c/template\x3e\n\n    \x3c!-- Accents --\x3e\n    \x3c!-- Accents above --\x3e\n    \x3ctemplate id\x3d"hat"\x3e\n        \x3cMathScript accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"circumflex"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"breve"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"breve"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"grave"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"grave"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"bar"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol"  stretchy\x3d"false" symbolName\x3d"macron"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"dot"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"dotabove"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"check"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"caron"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"acute"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"acute"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"tilde"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"sim"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"vec"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"rightarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"ddot"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathText kind\x3d"symbol" symbolName\x3d"diaresis"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n\n    \x3ctemplate id\x3d"widehat"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter stretchy\x3d"true" symbolName\x3d"circumflex"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"widetilde"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter stretchy\x3d"true" symbolName\x3d"sim"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overleftarrow"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"leftarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overrightarrow"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"rightarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overleftrightarrow"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"leftrightarrow"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overbrace"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"overbrace"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"overline"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accent\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cNull/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"macron" stretchy\x3d"true"/\x3e\n            \x3c/MathRow\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n\n    \x3c!-- Accents below --\x3e\n    \x3ctemplate id\x3d"underbrace"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accentunder\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"underbrace"/\x3e\n            \x3c/MathRow\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n    \x3ctemplate id\x3d"underline"\x3e\n        \x3cMathScript limitStyle\x3d"stack" accentunder\x3d"true" data-category\x3d"structure"\x3e\n            \x3cMathRow data-cursor\x3d"0" data-category\x3d"placeholder"/\x3e\n            \x3cMathRow data-category\x3d"static"\x3e\n                \x3cMathDelimiter symbolName\x3d"macron"/\x3e\n            \x3c/MathRow\x3e\n            \x3cNull/\x3e\n        \x3c/MathScript\x3e\n    \x3c/template\x3e\n\n\x3c/root\x3e\n',
"url:MW/rtc/plugins/completionpopup/CompletionPopupMenu.html":'\x3ctable class\x3d"tabCompletionPopupMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n       cellspacing\x3d"0"\x3e\n    \x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',"url:mw-form/templates/PushButton.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"button" aria-labelledby\x3d"${id}_label"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconAndTextContainerNode" class\x3d"mwIconAndTextContainerNode mwAlignmentNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode" id\x3d"${id}_label"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/rtc/plugins/equations/latexeditor/view/EquationDialogTemplate.html":'\x3cdiv class\x3d"rteEquationsDialog" data-dojo-attach-point\x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n\n    \x3cdiv class\x3d"label"\x3e\n        \x3clabel data-dojo-attach-point \x3d\'equationCodeLabel\'\x3e\x3c/label\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"eqnCode"\x3e\n        \x3cspan class\x3d"codeTextarea" tabindex\x3d"1" data-dojo-attach-point\x3d"codeTextInput"\n              data-dojo-type\x3d"dijit.form.SimpleTextarea" name\x3d"codeTextInput" id\x3d"codeTextInput" \x3e\x3c/span\x3e\n     \x3c/div\x3e\n\n     \x3cdiv class\x3d"label"\x3e\n        \x3clabel data-dojo-attach-point \x3d\'previewLabel\'\x3e\x3c/label\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"preview"\x3e\n\n    \x3cdiv class\x3d"previewTextarea" data-dojo-attach-point\x3d"previewTextInput"\n               name\x3d"previewTextInput" id\x3d"previewTextInput"\x3e\x3c/div\x3e\n     \x3c/div\x3e\n\n\n    \x3cdiv class\x3d"linkButtons"\x3e\n        \x3cbutton class\x3d"okButton" data-dojo-attach-point \x3d"okButton" name\x3d"okButton"\n                tabIndex\x3d"2" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"cancelButton" data-dojo-attach-point \x3d"cancelButton"\n                tabIndex\x3d"3" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"helpButton" data-dojo-attach-point \x3d"helpButton" name\x3d"helpButton"\n                tabIndex\x3d"4" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n    \x3c/div\x3e\n\n\x3c/div\x3e\n',
"url:MW/rtc/plugins/find/view/FindDialogTemplate.html":'\x3cdiv class\x3d"rteFindDialog" data-dojo-attach-point\x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n    \x3cdiv class\x3d"find"\x3e\n         \x3cspan class\x3d"findLabel"\x3e\x3clabel data-dojo-attach-point\x3d"findTextLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n         \x3cspan class\x3d"findTextBox" tabindex\x3d"1" data-dojo-attach-point\x3d"findTextInput"\n              data-dojo-type\x3d"dijit.form.TextBox" name\x3d"findTextInput" id\x3d"findTextInput"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"findNextButton" tabindex\x3d"5" data-dojo-attach-point\x3d"findNextButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "findNextButton" id\x3d"findNext"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"findPreviousButton" tabindex\x3d"6" data-dojo-attach-point\x3d"findPreviousButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "findPreviousButton" id\x3d"findPrevious"\x3e\n         \x3c/span\x3e\n     \x3c/div\x3e\n    \x3cdiv class\x3d"replace" data-dojo-attach-point\x3d"replace"\x3e\n         \x3cspan class\x3d"replaceLabel"\x3e\x3clabel data-dojo-attach-point\x3d"replaceTextLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n         \x3cspan class\x3d"replaceTextBox" tabindex\x3d"2" data-dojo-attach-point\x3d"replaceTextInput"\n              data-dojo-type\x3d"dijit.form.TextBox" name\x3d"replaceTextInput" id\x3d"replaceTextInput"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"replaceButton" tabindex\x3d"7" data-dojo-attach-point\x3d"replaceButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "replaceButton" id\x3d"replaceButton"\x3e\x3c/span\x3e\n         \x3cspan class\x3d"replaceAllButton" tabindex\x3d"8" data-dojo-attach-point\x3d"replaceAllButton" data-dojo-type\x3d"dijit.form.Button" name\x3d "replaceAllButton" id\x3d"replaceAllButton"\x3e\x3c/span\x3e\n     \x3c/div\x3e\n    \x3cdiv class\x3d"options"\x3e\n        \x3cspan class\x3d"matchCase" tabindex\x3d"3"   data-dojo-attach-point\x3d"matchCaseCheckBox" data-dojo-props\x3d"checked: false" data-dojo-type\x3d"dijit.form.CheckBox" name\x3d "matchCaseCheckBox" id\x3d"matchCaseCheckBox"\x3e \x3c/span\x3e\n        \x3cspan class\x3d"matchCaseLabel"\x3e\x3clabel for \x3d "matchCaseCheckBox" data-dojo-attach-point\x3d"matchCaseLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n        \x3cspan class\x3d"wholeWord" tabindex\x3d"4"   data-dojo-attach-point\x3d"wholeWordCheckBox"data-dojo-props\x3d"checked: false" data-dojo-type\x3d"dijit.form.CheckBox" name\x3d "wholeWordCheckBox" id\x3d"wholeWordCheckBox"\x3e \x3c/span\x3e\n        \x3cspan class\x3d"wholeWordLabel"\x3e\x3clabel for \x3d "wholeWordCheckBox" data-dojo-attach-point\x3d"wholeWordLabel"\x3e\x3c/label\x3e\x3c/span\x3e\n\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n',"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/goto/view/GotoDialogTemplate.html":'\x3cdiv class\x3d"rteGoToDialog" data-dojo-attach-point \x3d"contentNode"\x3e\n    \x3cdiv class\x3d"goToDetails" data-dojo-attach-point \x3d"goToDetails"\x3e\n        \x3cdiv class\x3d"input-row"\x3e\n            \x3cspan class\x3d"lineNumberLabel"\x3e\x3clabel data-dojo-attach-point \x3d\'lineNumberLabel\'\x3e\x3c/label\x3e\x3c/span\x3e\n            \x3cspan tabindex\x3d"1" data-dojo-attach-point \x3d"lineNumberInput"\n              data-dojo-type\x3d"dijit.form.NumberTextBox" data-dojo-props\x3d"constraints:{min:0, places:0}"\n              name\x3d"lineNumberInput" id\x3d"lineNumberInput"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"linkButtons"\x3e\n        \x3cbutton class\x3d"okButton" data-dojo-attach-point \x3d"okButton"\n                tabIndex\x3d"3" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"cancelButton" data-dojo-attach-point \x3d"cancelButton"\n                tabIndex\x3d"2" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/Toolstrip.html":'\x3cdiv id\x3d${id} class\x3d"toolstrip toolstripNode" data-focus\x3d"refuse"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"tabGroupContainer"\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"toolstripTabContainer"\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"topRightContainer" data-dojo-attach-point\x3d"topRightContainer"\x3e\n        \x3cdiv class\x3d"QABContainer" data-dojo-attach-point\x3d"QABContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"searchContainer" data-dojo-attach-point\x3d"searchContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"searchPopupContainer dijitOffScreen" data-dojo-attach-point\x3d"searchPopupContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"logoutContainer" data-dojo-attach-point\x3d"logoutContainer"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"collapseButtonContainer" data-dojo-attach-point\x3d"collapseButtonContainer"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\n\t\t  role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\n\t\t\t\t\x3e\x3c/span\x3e\n\x3c/div\x3e\n',
"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_menuBtn"\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_leftBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_rightBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\n\t\x3cdiv class\x3d\'dijitTabListWrapper\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip\'\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\n\x3c/div\x3e',"url:mw-menu/templates/MenuSeparator.html":'\x3cdiv data-refuse-key-nav\x3d"true"\x3e\x3c/div\x3e\n',
"url:MW/layout/templates/ConfirmationDialog.html":'\x3cdiv\x3e\n    \x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"mwMessageNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/QAB.html":'\x3cdiv id\x3d${id} class\x3d"qab"\x3e\n    \x3cdiv class\x3d"leftArrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"mainArea" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/QAGroup.html":'\x3cdiv id\x3d${id} class\x3d"qaGroup"\x3e\n\x3cdiv data-dojo-attach-point\x3d"separatorNode" class\x3d"quickAccessGroupSeparator"\x3e\x3c/div\x3e\x3cdiv class\x3d"qaGroupContainer" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/TabGroup.html":'\x3cdiv class\x3d"tabGroup"\x3e\n\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/Section.html":"\x3cdiv id\x3d${id} class\x3d'section'\x3e\n    \x3cdiv data-dojo-attach-point\x3d'sectionWrapper' class\x3d'sectionWrapper'\x3e\n        \x3cdiv data-dojo-attach-point\x3d'columnContainerWrapper' class\x3d'columnContainerWrapper'\x3e\n            \x3cdiv data-dojo-attach-point\x3d'containerNode' class\x3d'columnContainer'\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'titleNode' class\x3d'title'\x3e\x3c/div\x3e\n    \x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d'sectionDropDownContainer' class\x3d'sectionDropDownContainer'\x3e\x3c/div\x3e\x3cdiv class\x3d'sectionDivider'\x3e\x3c/div\x3e\n\x3c/div\x3e",
"url:MW/toolstrip/widgets/gallery/templates/GalleryPopup.html":"\x3cdiv id\x3d${id} class\x3d'toolstrip galleryPopup'\x3e\n    \x3cdiv data-dojo-attach-point\x3d'header' class\x3d'header'\x3e\n        \x3cdiv data-dojo-attach-point\x3d'searchTextFieldContainerNode' class\x3d\"mwSearchTextFieldContainerNode\"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'buttonWrapper' class\x3d'ButtonWrapper'\x3e\n            \x3cdiv data-dojo-attach-point\x3d'listViewButtonContainerNode' class\x3d\"mwListViewButtonContainerNode\"\x3e\x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d'iconViewButtonContainerNode' class\x3d\"mwIconViewButtonContainerNode\"\x3e\x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d'closeButtonNode' class\x3d\"mwCloseButtonNode\" data-tag\x3d\"closeButton\"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\"categoryContainer\" class\x3d'categoryContainer'\x3e\n        \x3cdiv data-dojo-attach-point\x3d\"noSearchMatchNode\" class\x3d\"noSearchMatchNode\"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d\"favCategoryContainer\" class\x3d\"favCategoryContainer\"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'containerNode' class\x3d\"otherCategoriesContainer\"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\"footerContainer\" class\x3d'footerContainer'\x3e\x3c/div\x3e\n\x3c/div\x3e",
"url:mw-form/templates/TextField.html":'\x3cdiv\x3e\x3cinput class\x3d "mwInputNode mwAlignmentNode" spellcheck\x3d"false" type\x3d"text" data-dojo-attach-point\x3d"inputNode,focusNode"\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/Panel.html":"\x3cdiv id\x3d${id} class\x3d'panel'\x3e\n\x3c/div\x3e","url:MW/toolstrip/widgets/templates/Column.html":"\x3cdiv id\x3d${id} class\x3d'column' data-dojo-attach-point\x3d\"containerNode\"\x3e\x3c/div\x3e","url:mw-menu/templates/MenuPanel.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" data-refuse-key-nav\x3d"true"\x3e\x3c/div\x3e\n',
"url:MW/toolstrip/widgets/templates/Footer.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/templates/FooterCell.html":'\x3cdiv data-dojo-attach-point\x3d"footerCellNode"\x3e\x3c/div\x3e',"url:MW/toolstrip/widgets/gallery/templates/Gallery.html":'\x3cspan id\x3d${id} class\x3d\'gallery icon_view\' \x3e\n    \x3cdiv data-dojo-attach-point\x3d"_aroundNode" class\x3d"aroundNode"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\'containerNode\' class\x3d\'mainArea\'\x3e\n    \x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d\'openPopupDiv, focusNode, _buttonNode\' class\x3d\'openPopupDiv\'\x3e\n        \x3cdiv class\x3d"buttonDownArrow"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"busyLayer" class\x3d"busyLayer"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"busyNode" class\x3d"busyIndicator"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"textOverlayWrapperNode" class\x3d"textOverlayWrapper"\x3e\n        \x3cdiv class\x3d"textOverlayCell"\x3e\n            \x3cspan data-dojo-attach-point\x3d"textOverlayNode" class\x3d"textOverlay"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/span\x3e',
"url:MW/toolstrip/widgets/gallery/templates/GalleryCategory.html":"\x3cdiv id\x3d${id} class\x3d\"Category\"\x3e\n    \x3cdiv data-dojo-attach-point\x3d'header' class\x3d\"categoryHeader\"\x3e\n        \x3cdiv data-dojo-attach-point\x3d'titleIconNode' class\x3d'titleIcon'\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'titleNode' class\x3d'categoryTitle'\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d'moveTopNode' class\x3d'moveTopNode'\x3e\n            \x3cdiv class\x3d'moveTopLabel'\x3eTOP\x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d'moveTopButtonNode' class\x3d'moveTopButton'\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\"containerNode\" class\x3d'gridWrapperNode'\x3e\n    \x3c/div\x3e\n\x3c/div\x3e",
"url:mw-colorpicker/templates/ColorPalette.html":'\x3cdiv class\x3d"dijitInline mwDisableSelection"\n    \x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"${baseClass}Title"\x3e${!title}\x3c/span\n    \x3e\x3ctable dojoAttachPoint\x3d"paletteTableNode" class\x3d"dijitPaletteTable" cellSpacing\x3d"0" cellPadding\x3d"0"\n        \x3e\x3ctbody data-dojo-attach-point\x3d"gridNode"\x3e\x3c/tbody\n    \x3e\x3c/table\n\x3e\x3c/div\x3e',"url:mw-colorpicker/templates/ColorPaletteSwatch.html":'\x3cdiv class\x3d"dijitInline mwPaletteDiv"\n    \x3e\x3cdiv title\x3d"${title}" class\x3d"mwColorPaletteSwatch" style\x3d"background-color: ${color}" data-test-id\x3d"${color}"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-colorpicker/templates/ColorSpinner.html":'\x3cdiv class\x3d"mwDisableSelection"\n    \x3e\x3ctable\n        \x3e\x3ctr\n            \x3e\x3ctd colspan\x3d"3"\n            \x3e\x3cdiv data-dojo-type\x3d"mw-colorpicker/ToggleButtonGroup" data-dojo-attach-point\x3d"toggleButton" data-dojo-props\x3d"buttonText:[\'1\', \'2\', \'3\']"\x3e\x3c/div\n            \x3e\x3c/td\n        \x3e\x3c/tr\n        \x3e\x3ctr class\x3d"${baseClass}Double" data-dojo-attach-point\x3d"doubleSpinners"\n            \x3e\x3ctd\x3e${_redTitle}\x3cbr/\x3e\x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-test-id\x3d"redDoubleSpinner" data-dojo-attach-point\x3d"redDoubleSpinner" class\x3d"${baseClass}Red"\x3e\x3c/div\x3e\x3c/td\n            \x3e\x3ctd\x3e${_greenTitle}\x3cbr/\x3e\x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-test-id\x3d"greenDoubleSpinner" data-dojo-attach-point\x3d"greenDoubleSpinner" class\x3d"${baseClass}Green"\x3e\x3c/div\x3e\x3c/td\n            \x3e\x3ctd\x3e${_blueTitle}\x3cbr/\x3e\x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-test-id\x3d"blueDoubleSpinner" data-dojo-attach-point\x3d"blueDoubleSpinner" class\x3d"${baseClass}Blue"\x3e\x3c/div\x3e\x3c/td\n        \x3e\x3c/tr\n        \x3e\x3ctr class\x3d"${baseClass}Int"  data-dojo-attach-point\x3d"intSpinners"\n            \x3e\x3ctd\x3e${_redTitle}\x3cbr/\x3e\x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-test-id\x3d"redIntSpinner" data-dojo-attach-point\x3d"redIntSpinner" class\x3d"${baseClass}Red"\x3e\x3c/div\x3e\x3c/td\n            \x3e\x3ctd\x3e${_greenTitle}\x3cbr/\x3e\x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-test-id\x3d"greenIntSpinner" data-dojo-attach-point\x3d"greenIntSpinner" class\x3d"${baseClass}Green"\x3e\x3c/div\x3e\x3c/td\n            \x3e\x3ctd\x3e${_blueTitle}\x3cbr/\x3e\x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" data-test-id\x3d"blueIntSpinner" data-dojo-attach-point\x3d"blueIntSpinner" class\x3d"${baseClass}Blue"\x3e\x3c/div\x3e\x3c/td\n        \x3e\x3c/tr\n        \x3e\x3ctr class\x3d"${baseClass}Hex" data-dojo-attach-point\x3d"hexSpinners"\n            \x3e\x3ctd colspan\x3d"3"\x3e${_hexTitle}\x3cbr/\x3e\x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-test-id\x3d"hexSpinner" data-dojo-attach-point\x3d"hexSpinner" class\x3d"${baseClass}HexSpinner"\x3e\x3c/div\x3e\x3c/td\n        \x3e\x3c/tr\n    \x3e\x3c/table\n\x3e\x3c/div\x3e',
"url:mw-colorpicker/templates/ColorPicker.html":'\x3cdiv class\x3d"mwDisableSelection" data-test-id\x3d"mwColorPicker"\n    \x3e\x3cdiv class\x3d"${baseClass}Palette" data-dojo-type\x3d"mw-colorpicker/ColorPalette" data-dojo-attach-point\x3d"paletteNode" data-test-id\x3d"palette" data-dojo-props\x3d"palette: ${_parsedStandardColors}"\x3e\x3c/div\n    \x3e\x3ctable class\x3d"${baseClass}Middle"\n        \x3e\x3ctr\n            \x3e\x3ctd class\x3d"${baseClass}Recent" data-dojo-attach-point\x3d"recentColorsNode" data-test-id\x3d"recentColors"\x3e\x3c/td\n            \x3e\x3ctd\n                \x3e\x3cdiv data-dojo-attach-point\x3d"previewNode" class\x3d"${baseClass}Preview"\n                    \x3e\x3cspan data-dojo-attach-point\x3d"previewTitleNode"\x3e${_previewTitle}\x3c/span\n                    \x3e\x3cdiv class\x3d"${baseClass}PreviewColor" data-dojo-attach-point\x3d"previewColorNode" data-test-id\x3d"previewColor"\x3e\x3c/div\n                \x3e\x3c/div\n            \x3e\x3c/td\n        \x3e\x3c/tr\n    \x3e\x3c/table\n    \x3e\x3cdiv class\x3d"${baseClass}Spinner" data-dojo-type\x3d"mw-colorpicker/ColorSpinner" data-dojo-attach-point\x3d"spinnerNode" data-test-id\x3d"spinner"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-menu/templates/PopupMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" class\x3d"mwFocusNode"\n    \x3e\x3cdiv class\x3d"mwIconNode" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutAndArrowWrapperNode"\n        \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n        \x3e\x3cdiv class\x3d"mwMenuArrowNode"  data-dojo-attach-point\x3d"menuArrowNode"\x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-form/templates/CheckBox.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"checkbox" aria-checked\x3d"false" aria-labelledby\x3d"${id}_label"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"checkBoxRadioIconNode" class\x3d"mwCheckBoxRadioIconNode"\n        \x3e\x3cdiv class\x3d"mwCheckBoxRadioIconInner"\x3e\x3c/div\x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode" id\x3d"${id}_label"\x3e\x3c/div\n\x3e\x3c/div\x3e',"url:mw-menu/templates/CheckBoxRadioButtonMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode"\n    \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwOverlayNode"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-menu/templates/TextFieldMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode"\n    \x3e\x3cdiv class\x3d"mwTextContainer" data-dojo-attach-point\x3d"textContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:mw-form/templates/RadioButton.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"radio" aria-checked\x3d"false" aria-labelledby\x3d"${id}_label"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"checkBoxRadioIconNode" class\x3d"mwCheckBoxRadioIconNode"\n        \x3e\x3cdiv class\x3d"mwCheckBoxRadioIconInner"\x3e\x3c/div\x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode" id\x3d"${id}_label"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-menu/templates/MenuHeader.html":'\x3cdiv data-dojo-attach-point\x3d"textNode" data-refuse-key-nav\x3d"true"\x3e\x3c/div\x3e\n',"url:mw-form/templates/ComboBox.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d"mwTextFieldContainerNode" data-dojo-attach-point\x3d"textFieldContainerNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"mwArrowContainerNode" data-dojo-attach-point\x3d"arrowNode"\x3e\x3cdiv class\x3d"mwArrowNode"\x3e\x3c/div\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:mw-form/templates/ListBox.html":'\x3cdiv\x3e\x3cul tabindex \x3d "0" data-dojo-attach-point\x3d "containerNode, focusNode"\x3e\x3c/ul\x3e\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/Tooltip.html":'\x3cdiv class\x3d"validation-tooltip-dialog"\x3e\n        \x3cdiv class\x3d"tooltipConnector" data-dojo-attach-point\x3d"arrowNode" style\x3d"display:inline-block"\x3e\x3c/div\n                \x3e\x3cdiv  style\x3d"display:inline-block" class\x3d"validationContents" data-dojo-attach-point\x3d"contentsNode"\x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"validationImage" style\x3d"display:inline-block"\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"validationText" style\x3d"display:inline-block"\x3e\x3c/div\x3e\x3c/div\x3e\n\n\x3c/div\x3e\n\n',
"url:mw-form/templates/Label.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" aria-labelledby\x3d"${id}_label"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconAndTextContainerNode" class\x3d"mwIconAndTextContainerNode mwAlignmentNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode" id\x3d"${id}_label"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/EmptyControl.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d "emptyControl"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:mw-form/templates/TextArea.html":'\x3cdiv\x3e\x3ctextarea class\x3d"mwInputNode mwAlignmentNode" data-dojo-attach-point\x3d"inputNode,focusNode" spellcheck\x3d"false"\x3e\x3c/textarea\x3e\x3c/div\x3e',"url:mw-form/templates/Spinner.html":'\x3cdiv\n    \x3e\x3cdiv class \x3d "mwContainerNode" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\n    \x3e\x3cdiv class \x3d "mwButtonsContainer" data-dojo-attach-point\x3d"buttonsContainerNode"\n        \x3e\x3cdiv class \x3d "mwIncrementButtonWrapper" data-dojo-attach-point\x3d"incrementButtonNodeWrapper"\n            \x3e\x3cdiv class \x3d "mwIncrementButton" data-dojo-attach-point\x3d"incrementButtonNode"\n            \x3e\x3c/div\n        \x3e\x3c/div\n        \x3e\x3cdiv class \x3d "mwDecrementButtonWrapper" data-dojo-attach-point\x3d"decrementButtonNodeWrapper"\n            \x3e\x3cdiv class \x3d "mwDecrementButton" data-dojo-attach-point\x3d"decrementButtonNode"\n            \x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:MW/toolstrip/widgets/external/templates/Slider.html":'\x3cdiv class\x3d"vc-userSelectNone vc-defaultFontRules" data-dojo-attach-event\x3d"press:_onTrackClick"\x3e\n    \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"valueNode"\x3e\n    \x3cdiv class\x3d"vc-sliderTrack" data-dojo-attach-point\x3d"sliderTrackNode"\x3e\n        \x3cdiv class\x3d"vc-sliderThumb" data-dojo-attach-point\x3d"sliderThumbNode, focusNode"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"vc-sliderRuleAndLabelContainer" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:MW/toolstrip/widgets/templates/ToolbarWrapper.html":"\x3cdiv class\x3d'toolbarWrapper'\x3e\n\x3c/div\x3e","url:MW/toolstrip/widgets/templates/MenubarWrapper.html":"\x3cdiv class\x3d'menubarWrapper' data-focus\x3d'accept'\x3e\n\x3c/div\x3e","url:MW/toolstrip/widgets/gallery/templates/GalleryItem.html":'\x3cdiv id\x3d${id} class\x3d"Item"\n    \x3e\x3cdiv data-dojo-attach-point\x3d\'itemWrapperNode, focusNode\' class\x3d"itemWrapper"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconWrapper" class\x3d"iconWrapper"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"iconNode"\x3e\x3c/div\n        \x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"labelWrapper" class\x3d\'labelWrapper\'\n            \x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"label"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d"description"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d\'favButtonWrapperNode\' class\x3d\'favButtonWrapper\'\n        \x3e\x3cdiv data-dojo-attach-point\x3d\'favButtonNode\' class\x3d\'favButton\'\x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/hyperlink/view/HyperlinkDialogTemplate.html":'\x3cdiv class\x3d"rteHyperlinkDialog" data-dojo-attach-point \x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n\n    \x3ctable class\x3d"hyperlinkDetails" width\x3d"100%"\x3e\n        \x3ctr class\x3d"displaytext-row"\x3e\n            \x3ctd\x3e\x3clabel data-dojo-attach-point \x3d\'displayTextLabel\' for\x3d"displayTextInput"\x3e\x3c/label\x3e\x3c/td\x3e\n            \x3ctd\x3e\x3cspan tabindex\x3d"1" data-dojo-attach-point \x3d"displayTextInput" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\n              data-dojo-type\x3d"dijit.form.TextBox"\n              name\x3d"displayTextInput" id\x3d"displayTextInput" class\x3d"hyperlinkTextInput"\x3e\x3c/span\x3e\x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr class\x3d"urltext-row"\x3e\n            \x3ctd\x3e\x3clabel data-dojo-attach-point \x3d\'urlTextLabel\' for\x3d"urlTextInput"\x3e\x3c/label\x3e\x3c/td\x3e\n            \x3ctd\x3e\x3cspan tabindex\x3d"2" data-dojo-attach-point \x3d"urlTextInput" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\n              data-dojo-type\x3d"dijit.form.TextBox"\n              name\x3d"urlTextInput" id\x3d"urlTextInput" class\x3d"hyperlinkTextInput"\x3e\x3c/span\x3e\x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/table\x3e\n\n    \x3ctable width\x3d"100%"\x3e\x3ctr\x3e\n    \x3ctd\x3e\n    \x3cdiv class\x3d"linkButtons"\x3e\n        \x3cbutton class\x3d"okButton" data-dojo-attach-point \x3d"okButton"\n                tabIndex\x3d"3" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"cancelButton" data-dojo-attach-point \x3d"cancelButton"\n                tabIndex\x3d"4" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n    \x3c/div\x3e\n    \x3c/td\x3e\n        \x3ctd align\x3d"right"\x3e\n            \x3cbutton class\x3d"removeButton" data-dojo-attach-point \x3d"removeButton"\n                tabIndex\x3d"5" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3c/td\x3e\n    \x3c/tr\x3e\x3c/table\x3e\n\x3c/div\x3e',
"url:MW/rtc/plugins/images/view/ImageDialogTemplate.html":'\x3cdiv class\x3d"rtcImageDialog" data-dojo-attach-point \x3d"contentNode" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\x3e\n    \n    \x3cdiv class\x3d"inputMode"\x3e\n      \x3cspan class\x3d"fileRadio" value\x3d"fromFile" data-dojo-attach-point\x3d"fileRadioBut" data-dojo-props\x3d"checked: true" data-dojo-type\x3d"dijit.form.RadioButton" name\x3d"inputRadioButGroup" id\x3d"fileRadioBut"\x3e \x3c/span\x3e\n      \x3clabel class\x3d"label" for\x3d"fileRadioBut" data-dojo-attach-point\x3d"fileRadioLabel"\x3e\x3c/label\x3e\n      \x3cspan class\x3d"urlRadio" value\x3d"fromWeb" data-dojo-attach-point\x3d"urlRadioBut" data-dojo-props\x3d"checked: false" data-dojo-type\x3d"dijit.form.RadioButton" name\x3d"inputRadioButGroup" id\x3d"urlRadioBut"\x3e \x3c/span\x3e\n      \x3clabel class\x3d"label" for\x3d"urlRadioBut" data-dojo-attach-point\x3d"urlRadioLabel"\x3e\x3c/label\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"inputField"\x3e     \n        \x3cdiv class\x3d"urlField" data-dojo-attach-point \x3d"urlField"\x3e\n            \x3clabel for\x3d"imageUrlTextInput" data-dojo-attach-point\x3d"imageUrlTextInputLabel"\x3eURL:\x3c/label\x3e\n            \x3cspan class\x3d"urlTextInput" data-dojo-attach-point \x3d"imageUrlTextInput" data-dojo-attach-event\x3d"onkeyup:onTextKeyup"\n              data-dojo-type\x3d"dijit.form.TextBox" name\x3d"imageUrlTextInput" id\x3d"imageUrlTextInput"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"fileField" data-dojo-attach-point \x3d"fileField"\x3e\n            \x3cspan\x3e\x3cinput data-dojo-attach-point \x3d "imageFileInput" type\x3d"file" accept\x3d"image/*" id\x3d"imageFileInput"\x3e\x3c/span\x3e\n        \x3c/div\x3e    \n    \x3c/div\x3e\n\n\n    \x3cdiv class\x3d"imgPreview"\x3e\n        \x3cdiv class\x3d"noPreview" data-dojo-attach-point \x3d"noPreview"\x3eNo Preview\x3c/div\x3e\n        \x3cimg max-width\x3d"100%" max-height\x3d"100%" data-dojo-attach-point \x3d"imagePreview"/\x3e\n    \x3c/div\x3e\n\n\n    \x3cdiv class\x3d"label"\x3e\n        \x3cspan data-dojo-attach-point \x3d"detailsTriangle" class\x3d"detailTriangleCollapsed"\x3e\x3c/span\x3e\n        \x3clabel data-dojo-attach-point \x3d\'detailsLabel\'\x3e\x3c/label\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"detailArea" data-dojo-attach-point \x3d\'detailArea\'\x3e\n\n    \x3ctable class\x3d"detailTable"\x3e\n    \x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"altTextInput" data-dojo-attach-point\x3d"altTextInputLabel"\x3e\x3c/label\x3e\x3c/td\x3e\n        \x3ctd\x3e\x3cspan data-dojo-attach-point \x3d"altTextInput" data-dojo-type\x3d"dijit.form.TextBox" name\x3d"altTextInput" id\x3d"altTextInput"\x3e\x3c/span\x3e\x3c/td\x3e\n    \x3c/tr\x3e\n    \x3ctr\x3e\n        \x3ctd\x3e\x3clabel for\x3d"sizeTextInput" data-dojo-attach-point\x3d"sizeInputLabel"\x3e\x3c/label\x3e\x3c/td\x3e\n        \x3ctd\x3e\x3cspan class\x3d"sizeCombo" data-dojo-attach-point \x3d"sizeTextInput" data-dojo-type\x3d"dijit.form.ComboBox" autoComplete\x3d"false" name\x3d"sizeTextInput" id\x3d"sizeTextInput"\x3e\n        \x3coption\x3e25\x3c/option\x3e\n        \x3coption\x3e50\x3c/option\x3e\n        \x3coption selected\x3e100\x3c/option\x3e\n        \x3coption\x3e125\x3c/option\x3e\n        \x3coption\x3e150\x3c/option\x3e\n        \x3coption\x3e200\x3c/option\x3e\n        \x3c/span\x3e\x3cspan class\x3d"origSize" data-dojo-attach-point \x3d"origSize"\x3e\x3c/span\x3e\x3c/td\x3e\n    \x3c/tr\x3e\n    \x3ctr\x3e\n        \x3ctd\x3e\x3clabel for\x3d"alignInput" data-dojo-attach-point\x3d"alignInputLabel"\x3e\x3c/label\x3e\x3c/td\x3e\n        \x3ctd\x3e\x3cselect data-dojo-attach-point \x3d"alignInput" name\x3d"alignInput" id\x3d"alignInput"\x3e\n            \x3coption value\x3d"top"\x3eTop\x3c/option\x3e\n            \x3coption value\x3d"middle"\x3eMiddle\x3c/option\x3e\n            \x3coption selected value\x3d"bottom"\x3eBottom\x3c/option\x3e\n        \x3c/select\x3e\x3c/td\x3e\n    \x3c/tr\x3e\n    \x3c/table\x3e\n\n    \x3c/div\x3e\n\n    \x3ctable width\x3d"100%"\x3e\x3ctr\x3e\n    \x3ctd\x3e\n    \x3cdiv class\x3d"linkButtons"\x3e\n        \x3cbutton class\x3d"okButton" data-dojo-attach-point \x3d"okButton" name\x3d"okButton"\n                 tabIndex\x3d"2" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n        \x3cbutton class\x3d"cancelButton" data-dojo-attach-point \x3d"cancelButton"\n                tabIndex\x3d"3" data-dojo-type\x3d"dijit.form.Button"\x3e\x3c/button\x3e\n    \x3c/div\x3e\n    \x3c/td\x3e\n    \x3c/tr\x3e\x3c/table\x3e\n\x3c/div\x3e',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:MW/rtc/plugins/language/matlab/alert/templateErrorAlert.html":'\x3cspan\x3e\n    \x3csvg class\x3d"alertPlugin-errorImg" width\x3d"14" height\x3d"15" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:svg\x3d"http://www.w3.org/2000/svg"\x3e\n        \x3ccircle id\x3d"error_circle" cx\x3d"7" cy\x3d"8" r\x3d"7" fill\x3d"rgb(204, 55, 41)"/\x3e\n        \x3crect id\x3d"top_bang" fill\x3d"white" x\x3d"6" y\x3d"3" width\x3d"2" height\x3d"6"/\x3e\n        \x3crect id\x3d"bottom_bang" fill\x3d"white" x\x3d"6" y\x3d"11" width\x3d"2" height\x3d"2"/\x3e\n    \x3c/svg\x3e\n\x3c/span\x3e',
"url:MW/rtc/plugins/language/matlab/alert/templateWarningAlert.html":'\x3cspan\x3e\n\x3csvg class\x3d"alertPlugin-warningImg" width\x3d"14" height\x3d"15" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:svg\x3d"http://www.w3.org/2000/svg"\x3e\n    \x3cpath id\x3d"warning_triangle" fill\x3d"rgb(255, 161, 0)" d\x3d"M 9.41,2.05 C 9.41,2.05 11.79,6.99 11.79,6.99 11.79,6.99 13.74,11.30 13.74,11.30 14.51,14.01 12.80,14.68 10.29,14.68 10.29,14.68 3.71,14.68 3.71,14.68 1.31,14.68 -0.40,14.17 0.21,11.51 0.40,10.67 1.18,9.06 1.60,8.22 1.60,8.22 3.86,3.49 3.86,3.49 4.50,2.20 4.95,1.06 6.18,0.21 7.88,-0.35 8.64,0.67 9.41,2.05 Z M -3.55,13.30M 18.47,12.60"/\x3e\n    \x3crect id\x3d"top_bang" fill\x3d"white" x\x3d"6" y\x3d"3" width\x3d"2" height\x3d"6"/\x3e\n    \x3crect id\x3d"bottom_bang" fill\x3d"white" x\x3d"6" y\x3d"11" width\x3d"2" height\x3d"2"/\x3e\n\x3c/svg\x3e\n\x3c/span\x3e',
"url:MW/rtc/plugins/language/matlab/codeanalyzer/tooltip/templates/CodeAnalyzerTooltipContent.html":'\x3cdiv data-dojo-attach-point\x3d"tooltipContentNode"\x3e\n\x3c/div\x3e',"url:MW/rtc/plugins/language/matlab/codingui/livecontrols/widgets/templates/Slider.html":'\x3cdiv data-dojo-attach-event\x3d"mousedown:_onTrackClick"\n\x3e\x3cdiv class\x3d"mwSliderTrack" data-dojo-attach-point\x3d"sliderTrackNode"\n\x3e\x3cdiv class\x3d"mwSliderThumb" data-dojo-attach-point\x3d"sliderThumbNode, focusNode"\x3e\x3c/div\n\x3e\x3c/div\n\x3e\x3cdiv class\x3d"mwSliderRuleAndLabelContainer" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:MW/layout/templates/CollapsedBorderChildH.html":'\x3cdiv class\x3d"gripH"\x3e\x3c/div\x3e',"url:MW/layout/templates/CollapsedBorderChildV.html":'\x3cdiv class\x3d"gripV"\x3e\x3c/div\x3e',"url:richeditor-converter/Toolbar.html":'\x3cul class\x3d"toolbar"\x3e\n    \x3cspan class\x3d"rtc_toolbar_section_span toolbar_text"\x3e\n        \x3cul class\x3d"toolbar"\x3e\n            \x3cli id\x3d"rte_text"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_insert_text" title\x3d"Insert a line of Text (Ctrl+E)" help_content\x3d"Insert a line of Text" tabindex\x3d"0"\x3e\n                    \x3c!-- \x3cspan class\x3d"icon-rte-mode-text"\x3e\x3c/span\x3e --\x3e\n                    \x3c!-- \x3cspan class\x3d"glyphicon glyphicon-text-size"\x3e\x3c/span\x3e --\x3e\n                    \x3cimg src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACISURBVDhPpZKxDYAgEADBOJCLGBZgAAagF4ehonQR14EGffKFBjA+fwmB5i6fDzKEkAUH730eBdwppYQpOuC+A1L2T4M6kO919E6DOkAE3PkZWLYDX9+c+1ru4jrncKd0wOVPYK3FHh1w+RMYY7BHB1z+BFpr7NEBd4oxltoI4EqlVPuf/kKICxUQgtpvowvhAAAAAElFTkSuQmCC"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eInsert a line of Text\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n\n            \x3cli id\x3d"rte_text_heading_dropdown"\x3e\n                \x3cform id\x3d"text_heading_dropdown_form"\x3e\n                    \x3cselect id\x3d"text_heading_dropdown_select" \x3e\n                      \x3coption value\x3d"text"  id\x3d"rtc_paraformat_text_option" data-action-id\x3d"rtc_paraformat_text"\x3eNormal\x3c/option\x3e\n                      \x3coption value\x3d"heading" id\x3d"rtc_paraformat_heading_option" data-action-id\x3d"rtc_paraformat_heading"\x3eHeading\x3c/option\x3e\n                    \x3c/select\x3e\n                \x3c/form\x3e\n            \x3c/li\x3e\n\n            \x3c!--\x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_paragraph_style"\x3e--\x3e\n            \x3c!--rtc_text_heading_dropdown--\x3e\n            \x3c!--\x3c/button\x3e--\x3e\n\n\n\n            \x3c!--\x3cli id\x3d"rte_plain_text" class\x3d"hidden"\x3e--\x3e\n                \x3c!--\x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_paraformat_text" title\x3d"Normal Text (Ctrl+Alt+T)" help_content\x3d"Normal Text" tabindex\x3d"0"\x3e--\x3e\n                    \x3c!--\x3cspan class\x3d"icon-rte-plaintext"\x3e\x3c/span\x3e--\x3e\n                    \x3c!--\x3cspan class\x3d"sr-only"\x3eSwitch to Normal Text\x3c/span\x3e--\x3e\n                \x3c!--\x3c/button\x3e--\x3e\n            \x3c!--\x3c/li\x3e--\x3e\n\n            \x3c!--\x3cli id\x3d"rte_header" class\x3d"hidden"\x3e--\x3e\n                \x3c!--\x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_paraformat_heading" title\x3d"Heading (Ctrl+Alt+H)" help_content\x3d"Heading" tabindex\x3d"0"\x3e--\x3e\n                    \x3c!--\x3cspan class\x3d"icon-rte-header"\x3e\x3c/span\x3e--\x3e\n                    \x3c!--\x3cspan class\x3d"sr-only"\x3eSwitch to Heading\x3c/span\x3e--\x3e\n                \x3c!--\x3c/button\x3e--\x3e\n            \x3c!--\x3c/li\x3e--\x3e\n\n            \x3cli id\x3d"rte_bold"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_bold" title\x3d"Bold (Ctrl+B)" help_content\x3d"Bold" tabindex\x3d"0"\x3e\n                    \x3cspan class\x3d"icon-rte-bold"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"sr-only"\x3eBold\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \x3cli id\x3d"rte_italic"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_italic" title\x3d"Italic (Ctrl+I)" help_content\x3d"Italic" tabindex\x3d"0"\x3e\n                    \x3cspan class\x3d"icon-rte-italic"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"sr-only"\x3eItalic\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \x3cli id\x3d"rte_underline"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_underline" title\x3d"Underline (Ctrl+U)" help_content\x3d"Underline" tabindex\x3d"0"\x3e\n                    \x3cspan class\x3d"icon-rte-underline"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"sr-only"\x3eUnderline\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \x3cli id\x3d"rte_monospace"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_monospace" title\x3d"Monospace (Ctrl+M)" help_content\x3d"Monospace" tabindex\x3d"0"\x3e\n                    \x3cspan class\x3d"icon-rte-monospace"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"sr-only"\x3eMonospace\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n\n            \x3cli id\x3d"rte_bullet_list"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_unordered_list" title\x3d"Bulleted list" help_content\x3d"Bulleted list" tabindex\x3d"0"\x3e\n                    \x3cspan class\x3d"icon-rte-bullet_list"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"sr-only"\x3eBulleted list\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \x3cli id\x3d"rte_number_list"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_ordered_list" title\x3d"Numbered list" help_content\x3d"Numbered list" tabindex\x3d"0"\x3e\n                    \x3cspan class\x3d"icon-rte-number_list"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"sr-only"\x3eNumbered list\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n        \x3c/ul\x3e\n        \x3cspan class\x3d"rtc_toolbar_section_label"\x3eTEXT\x3c/span\x3e\n    \x3c/span\x3e\n\n    \x3cspan class\x3d"rtc_toolbar_section_span"\x3e\n        \x3cul class\x3d"toolbar"\x3e\x3cli class\x3d"add_list_separator" data-separator\x3d"|"\x3e\x3c/li\x3e\x3c/ul\x3e\n    \x3c/span\x3e\n\n    \x3cspan class\x3d"rtc_toolbar_section_span toolbar_code"\x3e\n        \x3cul class\x3d"toolbar"\x3e\n            \x3cli id\x3d"rte_code"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_insert_code" title\x3d"Insert a line of Code (Ctrl+E)" help_content\x3d"Insert a line of Code" tabindex\x3d"0"\x3e\n                    \x3c!-- \x3cspan class\x3d"glyphicon glyphicon-console"\x3e\x3c/span\x3e --\x3e\n                    \x3cimg src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACXSURBVDhPpZOxDcMgEEXB8kBZxKJiAQZgAJrIFQMwAxVlFvE60Ni60yeK7EjOhdfg5j192UaXUnY1Qs55/xdyp9YaUnLInXvg8XzxeWZbFzxdYTelhEFyyH0v+OTXNezGGNGTQ+5ca0Xvyt0SdkMI6Mkh9+s76NwtYNd7j54ccse/gnMOPTnkjv+J1lr05JCrjTED11mpA+Fd6LR8wRnLAAAAAElFTkSuQmCC"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eInsert a line of Code\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \n            \x3cli id\x3d"rte_comment"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_comment" title\x3d"Comment (Ctrl+/)" help_content\x3d"Comment" tabindex\x3d"0"\x3e\n                    \x3c!-- \x3cspan class\x3d"glyphicon glyphicon-text-background"\x3e\x3c/span\x3e --\x3e\n                    \x3cimg style\x3d"height: 16px; width: 16px" src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABy1BMVEXJycnT09Py8vLd3d34+Pj////IyMjS0tL7+/u90p/k5OTg4ODT4b/U1NS9vb339/f6+vrPz8+urq7Hx8fOzs6tra3x8fHI2a/z8/Oyyo+/v7/Gxsa80Z/09++xyY/FxcWvyY/R4L+6urrNzc3AwMDc58/E17D8/Pzi4uLExMSqqqrz9+/D1rDb59De3t6mpqa1tbXN3cCoxJDDw8OlpaX19fXy9u+lwpHLy8uyy6HCwsLf39+vyqGiwZG80rHk7eD09PTt8eu+vr68vLy7u7uxsbG40LGpqanj7OCqxqKioqKzs7Onp6eysrLu7u6kpKTb29urq6ujo6OoqKivr6+4uLjr6+t8pT+ow3/p8N9RiACdvG9xni9bjw9mlh/u8Ohllh+cu29QhwBNhQFXjBB5o0CNsWBUihCBqVBJgwGkwYCKr2BEgAJbjyHo799+p1B6pVE/fQPn799WjSKHrWGNjY2fn585eQOPs3F2o1FFgRKDq2GMjIyenp5ll0I+fRMydQQrcQXp6emHr3JFgiM/fySdnZ0xdhVMiDQkbQaRtoKcnJyOs4MdaAdjl1SFhYWTk5OWlpZubm5zc3OLi4t5eXmCgoKVlZWBgYFDp84hAAAAVnRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEjko0AAAABYktHRAX4b+nHAAAACXBIWXMAAABIAAAASABGyWs+AAACCUlEQVQ4y43T51vaUBTA4VCTKI4kgEG9GOPAccWBVlGLWxE3xToAbVVwoYjiwi2gxIXiqvrn9ibWD+1jS37f7nneT/c8B8PkpFCMj39CJSW9vXGckFIo5ACSTE5OSVEqJyYcDqczNZUk09LS010uhyMjg6JIUg6g6clJl2tq6juKYVQqhvmBmp5Wq0kUptH8CTIz3wHLalAIEMTMzOysVut0ut1ZWdnZOTlut1Kp0QAgD+h0BOHx5OaqVBzn8eTlcdzc3Py8VsuyOqnEgOdxfGFhcTE/f2nJ6+W45WWvt6CgsLCoiJeSA/T64uKVFZ9vdbWkxO/3+dbWxG/2+0tLy8oQgBCAfwMIESgvhxDHDQZxvL4eCGxsVFRsbgYCW1uVlVVVcgCE1dXb2zs7RmNNTTC4u2swBIN7e7W1+/sHBwyDfUbV1R0eHh39B4hRVH398fHJicnU0BAKmUyNjU1NoRBBJAZffmc2NzeHwy0tkUhrazjc1tbefnp6diYH6PUAUBTPd3REUTQtCDQdjZ6fX1xcXl5dRSIYAJ2dXV0QvoPr679Ad7fRaLGYzbHYzU1PDwBWKwC9vbHY7W1fH0339ycGAwODg0NDb4cyPByPC0I8brN9RWHY3Z3dnhio1Tbb/f2D1OOjIPX09BP1/CzuB2PZkZGXl4/A66u4H8xisdu/fZjVOjo6NvYLW136bUHCv8sAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDYtMjNUMDk6NDU6MjItMDU6MDCa0Pn8AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA2LTIzVDA5OjQ1OjIyLTA1OjAw641BQAAAAABJRU5ErkJggg\x3d\x3d"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eComment\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \x3cli id\x3d"rte_uncomment"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_uncomment" title\x3d"Uncomment" help_content\x3d"Uncomment" tabindex\x3d"0"\x3e\n                    \x3c!-- \x3cspan class\x3d"glyphicon glyphicon-text-color"\x3e\x3c/span\x3e --\x3e\n                    \x3cimg style\x3d"height: 16px; width: 16px" src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAMAAAAJbCvNAAAB3VBMVEXKysrJycnT09PX5MXK27LU1NS+vr7IyMjE16nPz8+urq7E1qnR37zHx8fAwMC/v7/X48XQ37zGxsa60J/P37zI2rK7u7vOzs7FxcW5z5/P1uDM096rq6uxy9/ExMSqqqq1tbWxy96kwdfDw8O9vb3P38bH2r29wsvP1NzCwsK9wsnBwcG70bTU49Czs7O4uLi3t7etra3r6+vy8vLd3d34+Pj////7+/uxyYzy9uzk5OTh4eHl7dmXuGb39/epxYKcvG/6+vqjwHnx8+/x8fGWt2be6M/z8/OUtmf4+vWaunCvyIyYuHCzy5WStWfk7dnq8OKPs2edvHrb59Dx9exZfWIKLV4NLmJ7iJ33+vVti4BScZgaOmx9nnVylmYYOWl6h5ympqaNjY2fn5/h69kIKVfZ8f0XN2QZOGYMK1319fWjwI1xlmobOGLJ5vafpa6epK3g4OCAqmkYM1iUtc+22O4TMFPy9PGMsnyBho0YMFOGqsaky+UVLk/j4+N3pGqfo6kTKUh2n76Rvt0SKEecoKabn6Xv7+8JGzVnlLZ+sdUUKEILHTaenp5wcHBubm5zc3NiaHApSGRYia0OITZjZmpxd3+kpKSdnZ1iZ20JFiV/goVpbnSjo6NobXPELEIxAAAAMnRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFxCgDIAAAABYktHRDZHv4jRAAAACXBIWXMAAABIAAAASABGyWs+AAACBElEQVQ4y2NgoBgwMjIyMRkZGQOBiQkjGJiamoEBExOQQ4QCJiZzc2ZmCwsWFktLKytGRmtrGxtbWxYWVlY2NqIUsNvZcXDY2trbOwCBoyMnp6OjExA4O3NxsYMAEQrMzJycuLldXCwtXV3d3NzdeXhcXZmZeXn5+CAKeHEp4OfnBQGQAg8PAQFOTk9PDw9BQU9PLy9vbxcXLi5eXiIVCJmaCgv7+IiI+Pr6+Xl6ior6+fn7i4mJiwtBAGEFEnx8AQGSkoGBQUHBwSEhoaFhYVJSZmYhIdLS4eERERJEKJCRkZAwNY2MBEVPVFR0tKxsTExsbFxcfLysbHR0BIOcvLycHG4FCQxycnKJiUlJyckKCikpqamKimlpiorp6RkZEFYmUQpAgI0tKys7OycnN1dJKS9PSQlC5ubmMyhDgIoKdgUFMAWFhaqqRUVqaurqxcUlJaVAUFJSVqahoUxYgSYIMDCUl1cAgalpZWVVVXV1DRBUV9fWamlpElagzcfHz19Xp6NTX6+r29DQ2NjU1Nzc1AQhW1paGYDSbGy4FbQx8ImJKStDMkp7e0dHZ2dXV2dnNxBAWD2EFYjp6fX29vX1A8GECRMnTpo0efKUKVOBYMqUyZMnTZpGWIE+F9f06cnJM6Bg5sxZs2bPBrFmz541a84cBQYDQ8O5c3t7sSuYN08BAGVdG6fwl7KhAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTA2LTIzVDA5OjUwOjI3LTA1OjAw70/C3wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNy0wNi0yM1QwOTo1MDoyNy0wNTowMJ4SemMAAAAASUVORK5CYII\x3d"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eUncomment\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \x3cli id\x3d"rte_indent"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_indent" title\x3d"Indent (Ctrl+])" help_content\x3d"Indent" tabindex\x3d"0"\x3e\n                    \x3cimg style\x3d"height: 16px; width: 16px" src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAbxJREFUeNpi/P//PwMILF++/AwDGYAFmRMWFmaMTzHIMpiFIHrt2rVnWZAlQeDbt28YGv/9+8fw9+9fOA3CIiIiYD1wA37+/AnXsGPHDgwDYNjZ2RluGUgP3IAfP37ANXh4eKA4G9lmEIYZANKD1QXY/B0dHY0SBps3b0Z1AYgDkpx8Mp8hRCufQZJXCa4B5ILFixejuAKEsRpw49Ethvmf2hn0pewZPDWjwJpB4jExMXDbZ8+eDTeA0a/X/D+6szsiKxhWHt/J8P3HH4ZEqwIGIS5RlHAAsfn5+Rm6u7vPsnz48Jsh1kuTgZedhYEPhDlkGH7/e8uQYB/EULqgl6FmdQlDZ9gUhszUTJQ0sHLlSogXPr7/wzBl6WUk+08z9Gb5M8zZtpeB878oQ4lfKQMnKyfDvHnzUNLD79+/wQYwXZh8kRGETb6bnj3SfpThx6+fDG1LtzFI8+ozdMV0M4jwioA1JCYmMiQlJaFEK0Y0ggTlROQY6kLqGFQkVFASECjgkPl//vzBjAWQ4OK8xSgKYTglJQUeBlOnTmX49esXdgOQAwrGBoFZs2bBnY8cBowwRe7u7mRlZ4AAAwBke4J9ItzoOgAAAABJRU5ErkJggg\x3d\x3d"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eIndent\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \x3cli id\x3d"rte_unindent"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_unindent" title\x3d"Unindent (Ctrl+[)" help_content\x3d"Unindent" tabindex\x3d"0"\x3e\n                    \x3cimg style\x3d"height: 16px; width: 16px" src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAaxJREFUeNqcUk1LAlEUPaO2SzDQffYXdFZBERK4CKKNk0NKm6KFtAmhqFaRC0lbhFokiYLCLKSFKNIPaJVQtCooAlsIgQsjm/Ez38B7zTDVooEz713uO+eed9/lCoXCDf7x+f1+N1kt5Ofz+Vx/HR4Ohyrovlgs1mjOQhPtdttAHAwG6Pf7bCWw2+1MTBVQFIUF1WrVIEDh8XgYUcuxyLLMAq/Xq7OtrUxABbQcnQNBEHQCowaz+2t7oHNAApqUJMlQnZIbHy8oP51hayb1uwB1QOJ8Ps+Erh4lPDRrqDefVVFDD7QOaNPIwbdWAxfXx7BZbdiY3UQoE8LK+TwwDtdivDI0OBjNA3Nwmk5hvxiG2WzCzlIYLbmOA2EN70p9tH9FS+kheXn/LUAqam0T7C5EECvFcCgdQZjjsR5PGmbFRK7Q6/VUgiiKKuizOawORJYjmBibxF4mC7mjoLxdgfuTr92e3HEEqgNKyOVyuuGhEKdF8FM8oqWoWszwCtRBIBBgiXQ6rRNxOpxIrCbQ6XR+FiB3z2azjKCdd47jGLrdrvEZg8FgDf/8vgQYAFB9fxkV4i0cAAAAAElFTkSuQmCC"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eUnindent\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n        \x3c/ul\x3e\n        \x3cspan class\x3d"rtc_toolbar_section_label"\x3eCODE\x3c/span\x3e\n    \x3c/span\x3e\n\n    \x3cspan class\x3d"rtc_toolbar_section_span"\x3e\n        \x3cul class\x3d"toolbar"\x3e\x3cli class\x3d"add_list_separator" data-separator\x3d"|"\x3e\x3c/li\x3e\x3c/ul\x3e\n    \x3c/span\x3e\n\n    \x3cspan class\x3d"rtc_toolbar_section_span toolbar_insert"\x3e\n        \x3cul class\x3d"toolbar"\x3e\n            \x3cli id\x3d"rte_image"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_image" title\x3d"Insert Image" help_content\x3d"Insert Image" tabindex\x3d"0"\x3e\n                    \x3cimg style\x3d"height: 16px; width: 16px" src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXBJREFUeNqkkztOw0AQhv99eP1IjLGIiFLQRuIScIIcJAehDA2VL0HLCeiR6CgoEEooQhMix15sL/uQrUQ0iTySNVpr/3++ndklSin0CZJlWT8HY3BqlGWpNputMlreGi2ePk8qPL+9sLkzSEIKPx4dJS5/1iCEOIO2iUlIEA3IUQZ5RayB0fI8zzuCYUSPMvAkhQEwWr7b7ezPt9UzhkWKQRCDUnYgKKotvrbv3fpj+Yqb6R2MtiN4fLkHQgXhC/iR+FdVMAqmy5Z1DV74Fv+AoA3VNFC1AmGuH1SLrs4CxD6DoFSvgfU3QaP3dQS1dt2PSFdLY4FznyMJPIScgmslpy6PKbcGHUFZSitMQw/TywSTdIDAc5uZ+YjJsNkQScl00T0CKSXGcoJRHqFZelitHEks3DUxsxGawuduSuZw1XXtCIqi0AS/eJhnYIzpCehzUtJdlDaaRunGNbaywa/rCkZLZrNZr8dE+j7nPwEGAODD1dsVkXgAAAAAAElFTkSuQmCC"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eInsert an image\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \n            \x3cli id\x3d"rte_link"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_hyperlink" title\x3d"Insert HyperLink (Ctrl+K)" help_content\x3d"Insert HyperLink" tabindex\x3d"0"\x3e\n                    \x3cimg style\x3d"height: 16px; width: 16px" src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWlJREFUeNqMUrFuglAU5TXO2gkHh1oHF4bK4kTSFxYHCfEP2v4Bf1D8Az6B/gExzgQTZkITWBykHRx0KjODvZdcyCsY6U1OLnDePbx77mWXy0XqCtM07yG9AizAA+AD4G42m4B1CSyXyxmkADC4Qq/vuv5eFIUFGABywBvgEbADlBz7Twuc8zHmIAi+6N2G9I7PvRt9r6hnqd/vO9CvJ9yqPte6gWEY2LNHZonxud1uZ/P5XPRk90dgsViIZA5wiMIJrE6nk9TgeS2g63qzmPu+H1fiiqK0+DRN41JA07QWGYZhXTydTlv8fr8vedboqSTP57NEPrikYYl8lmW1OFNVFYufKzKKong0GuGBp4aJ3+jD8XiMxY8MeqtcXCdJYleELMv1GNFMuJV3bdw9caZiUIHXtWQokFN/fDKZ4MZxGh9unX04HLwuAYfWEn3IBG5MIjejHONwOOS0LC9kFoq6sDg/XQK/AgwAUk+xYwcUrMYAAAAASUVORK5CYII\x3d"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eInsert a hyperlink\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n\n            \x3cli id\x3d"rte_equation"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_equation" title\x3d"Insert LaTeX equation (Ctrl+Alt+G)" help_content\x3d"Insert LaTeX" tabindex\x3d"0"\x3e\n                    \x3cimg style\x3d"height: 16px; width: 16px" src\x3d"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAaJJREFUeNqkUz1rwmAQvvc1imLQDuKihW6KUx3dOmfxJ5if4NSlQ/0Hpb/A2F/g1NEWOgrSDkIgQ6gifuBgg4qKmt57mBDjR2kbCJe73PPcc3fvy2zbhlQqZcMfnl6vxyTHUVUVOp0OtFqtsyBFUSAUCoGmaeS7BKZpkkU1YBjG82q1usMK714w/rtpNBovmUzGjfGd/RoOh/SRSCQgn88rsiy/IaDsk/w6GAw+J5PJAcG1rusf7XYbptMpiLnkcjkZyR6QpI7vhYenggpdh4lkj8RKOBy+T6fTgJZiolq/37c2m01RKPDPZI/A6ZNz/pRMJi+j0SjFcB4wGo1guVw+Ikn5LMGOREjWcA7FeDxOMVRAJN1ul3lz+Yn9iinV1+u1qAqLxQLG4zFst9vajy3sFKjBYLAaiURooPP5XCioIbHqz+VHwJVAIFCVJIl6n81mJ8HHtqAhuIRDpMqib7R7YMy5isVipmVZdJS5F8wYKzlA0b8f7Jz6bDbrOpIDRkNgj6IDsNgOrvdWtLXXwm9uY6FQgGazSQpFC+y/1/lbgAEAd77yMdid7zQAAAAASUVORK5CYII\x3d"\x3e\n                    \x3cspan class\x3d"sr-only"\x3eEquation\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n            \n            \x3cli id\x3d"attach_file"\x3e\n                \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"attach_file" title\x3d"Attach File" help_content\x3d"Attach File" tabindex\x3d"0"\x3e\n                    \x3cspan class\x3d"glyphicon glyphicon-paperclip"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"sr-only"\x3eAttach a File\x3c/span\x3e\n                \x3c/button\x3e\n            \x3c/li\x3e\n        \x3c/ul\x3e\n        \x3cspan class\x3d"rtc_toolbar_section_label"\x3eINSERT\x3c/span\x3e\n    \x3c/span\x3e\n    \n    \x3ca href\x3d"http://tushald-deb8-64.dhcp.mathworks.com/matlabcentral/answers/help/rtc/" target\x3d"_blank"\x3e\n        \x3cspan class\x3d"pull-right" style\x3d"padding-top:7px;padding-right:7px;"\x3e\n            \x3cspan class\x3d"glyphicon glyphicon-question-sign"\x3e\x3c/span\x3e\n        \x3c/span\x3e\n    \x3c/a\x3e\n\x3c/ul\x3e\n\x3cscript\n        src\x3d"https://code.jquery.com/jquery-3.2.1.min.js"\n        integrity\x3d"sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4\x3d"\n        crossorigin\x3d"anonymous"\x3e\x3c/script\x3e\n\x3cscript type\x3d"text/javascript"\x3e\n    $(\'#rte_bullet_list button\').click(function(){\n         0 \x26\x26 console.log(\'TEST -\x3e\');\n    })\n\x3c/script\x3e',
"url:shared/RichEditor/Toolbar.html":'\x3cul class\x3d"toolbar"\x3e\n    \x3cli id\x3d"rte_text"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_insert_text" help_content\x3d"Insert a line of Text" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-mode-text"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eInsert a line of Text\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli id\x3d"rte_code"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_insert_code" help_content\x3d"Insert a line of Code" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-mode-code"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eInsert a line of Code\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli class\x3d"add_list_separator" data-separator\x3d"|"\x3e\x3c/li\x3e\n\n    \x3cli id\x3d"rte_bold"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_bold" help_content\x3d"Bold" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-bold"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eBold\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli id\x3d"rte_italic"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_italic" help_content\x3d"Italic" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-italic"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eItalic\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli id\x3d"rte_underline"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_underline" help_content\x3d"Underline" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-underline"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eUnderline\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli id\x3d"rte_monospace"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_toggle_monospace" help_content\x3d"Monospace" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-monospace"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eMonospace\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli class\x3d"add_list_separator" data-separator\x3d"|"\x3e\x3c/li\x3e\n\n    \x3cli id\x3d"rte_plain_text"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_paraformat_text" help_content\x3d"Normal Text" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-plaintext"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eSwitch to Normal Text\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n\n    \x3cli id\x3d"rte_header"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_paraformat_heading" help_content\x3d"Heading" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-header"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eSwitch to Heading\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n\n    \x3cli id\x3d"rte_bullet_list"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_unordered_list" help_content\x3d"Bulleted list" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-bullet_list"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eBulleted list\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli id\x3d"rte_number_list"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_ordered_list" help_content\x3d"Numbered list" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-number_list"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eNumbered list\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n\n    \x3cli class\x3d"add_list_separator" data-separator\x3d"|"\x3e\x3c/li\x3e\n    \x3cli id\x3d"rte_equation"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_equation" help_content\x3d"Insert LaTeX" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-equation"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eEquation\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli id\x3d"rte_link"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_hyperlink" help_content\x3d"Insert HyperLink" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-link"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eInsert a hyperlink\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n    \x3cli id\x3d"rte_image"\x3e\n        \x3cbutton class\x3d"btn btn_icon btn_default" type\x3d"button" action_type\x3d"toolbar_action" data-action-id\x3d"rtc_image" help_content\x3d"Insert Image" tabindex\x3d"0"\x3e\n            \x3cspan class\x3d"icon-rte-image"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"sr-only"\x3eInsert an image\x3c/span\x3e\n        \x3c/button\x3e\n    \x3c/li\x3e\n\x3c/ul\x3e\n',
"*now":function(h){h(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var h=this.require;h({cache:{}});!h.async&&h(["dojo"]);h.boot&&h.apply(null,h.boot)})();
//# sourceMappingURL=dojo.js.map